<!-- This is a static file -->
<!-- served from your routes in server.js -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="A cool thing made with Glitch" />

    <title>No store GUN peer</title>

    <link rel="stylesheet" href="/styles.css" />
  
    <script defer type="module">
      import  'https://cdn.skypack.dev/gun';
      import ms from 'https://cdn.skypack.dev/ms';
      import { createApp, reactive } from 'https://cdn.skypack.dev/petite-vue';
     

      const gun = GUN([window.location.href+'gun']);
      const db = gun.get(window.location.hostname);

      const Relay = reactive({

        status: "connecting",
        pulse:0,
        started: 0,
        ms,
        listen() {
    
          db.map().on((d,k) => {
            Relay[k] = d
          });

        }
      });

      Relay.listen();

      createApp({ Relay }).mount();
    </script>

    <template id="player-template">
      {{ pub }} {{pulse}} {{x}} {{y}}
    </template>
  </head>
  <body v-scope>
    <header>
      <h2>Gun relay peer</h2>
      <h5>started: {{Relay.ms(Relay.pulse-Relay.started)}} </h5>
      <h5>{{Relay.status}}: {{(Relay.pulse-Relay.started)/1000}}s</h5>
      
    </header>
    <main>
      <code>{{Relay}}</code>
    </main>
  </body>
</html>
