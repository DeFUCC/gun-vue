{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/gun-avatar@1.3.5/node_modules/gun-avatar/dist/gun-avatar.es.js"],
  "sourcesContent": ["(() => {\n  if (!needPoly()) {\n    return;\n  }\n  const proto = CanvasRenderingContext2D.prototype;\n  const original = proto.drawImage;\n  if (!original) {\n    console.error(\"This script requires a basic implementation of drawImage\");\n    return;\n  }\n  proto.drawImage = function drawImage(source, x, y) {\n    const will_crop = arguments.length === 9;\n    if (!will_crop) {\n      return original.apply(this, [...arguments]);\n    }\n    const safe_rect = getSafeRect(...arguments);\n    if (isEmptyRect(safe_rect)) {\n      return;\n    }\n    return original.apply(this, safe_rect);\n  };\n  function needPoly() {\n    const ctx = document.createElement(\"canvas\").getContext(\"2d\");\n    ctx.fillRect(0, 0, 40, 40);\n    ctx.drawImage(ctx.canvas, -40, -40, 80, 80, 50, 50, 20, 20);\n    const img = ctx.getImageData(50, 50, 30, 30);\n    const data = new Uint32Array(img.data.buffer);\n    const colorAt = (x, y) => data[y * img.width + x];\n    const transparents = [\n      [9, 9],\n      [20, 9],\n      [9, 20],\n      [20, 20]\n    ];\n    const blacks = [\n      [10, 10],\n      [19, 10],\n      [10, 19],\n      [19, 19]\n    ];\n    return transparents.some(([x, y]) => colorAt(x, y) !== 0) || blacks.some(([x, y]) => colorAt(x, y) === 0);\n  }\n  function getSafeRect(image, sx, sy, sw, sh, dx, dy, dw, dh) {\n    const { width, height } = getSourceDimensions(image);\n    if (sw < 0) {\n      sx += sw;\n      sw = Math.abs(sw);\n    }\n    if (sh < 0) {\n      sy += sh;\n      sh = Math.abs(sh);\n    }\n    if (dw < 0) {\n      dx += dw;\n      dw = Math.abs(dw);\n    }\n    if (dh < 0) {\n      dy += dh;\n      dh = Math.abs(dh);\n    }\n    const x1 = Math.max(sx, 0);\n    const x2 = Math.min(sx + sw, width);\n    const y1 = Math.max(sy, 0);\n    const y2 = Math.min(sy + sh, height);\n    const w_ratio = dw / sw;\n    const h_ratio = dh / sh;\n    return [\n      image,\n      x1,\n      y1,\n      x2 - x1,\n      y2 - y1,\n      sx < 0 ? dx - sx * w_ratio : dx,\n      sy < 0 ? dy - sy * h_ratio : dy,\n      (x2 - x1) * w_ratio,\n      (y2 - y1) * h_ratio\n    ];\n  }\n  function isEmptyRect(args) {\n    return [3, 4, 7, 8].some((index) => !args[index]);\n  }\n  function getSourceDimensions(source) {\n    const sourceIs = (type) => {\n      const constructor = globalThis[type];\n      return constructor && source instanceof constructor;\n    };\n    if (sourceIs(\"HTMLImageElement\")) {\n      return { width: source.naturalWidth, height: source.naturalHeight };\n    } else if (sourceIs(\"HTMLVideoElement\")) {\n      return { width: source.videoWidth, height: source.videoHeight };\n    } else if (sourceIs(\"SVGImageElement\")) {\n      throw new TypeError(\"SVGImageElement isn't yet supported as source image.\", \"UnsupportedError\");\n    } else if (sourceIs(\"HTMLCanvasElement\") || sourceIs(\"ImageBitmap\")) {\n      return source;\n    }\n  }\n})();\nconst cache = {};\nif (document) {\n  class Avatar extends HTMLElement {\n    constructor() {\n      super();\n      this.attachShadow({ mode: \"open\" });\n      this.img = document.createElement(\"img\");\n      this.shadowRoot.append(this.img);\n    }\n    render() {\n      this.pub = this.hasAttribute(\"pub\") ? this.getAttribute(\"pub\") : \"1234123455Ute2tFhdjDQgzR-1234lfSlZxgEZKuquI.2F-j1234434U1234Asj-5lxnECG5TDyuPD8gEiuI123\";\n      this.size = this.hasAttribute(\"size\") ? this.getAttribute(\"size\") : 400;\n      this.round = this.hasAttribute(\"round\") || this.getAttribute(\"round\") == \"\" ? true : false;\n      if (this.round) {\n        this.img.style.borderRadius = \"100%\";\n      } else {\n        this.img.style.borderRadius = \"0%\";\n      }\n      this.dark = this.hasAttribute(\"dark\") || this.getAttribute(\"dark\") == \"\" ? true : false;\n      this.img.src = gunAvatar(this.pub, this.size, this.dark);\n    }\n    connectedCallback() {\n      this.render();\n    }\n    static get observedAttributes() {\n      return [\"pub\", \"round\", \"size\", \"dark\"];\n    }\n    attributeChangedCallback(name, oldValue, newValue) {\n      this.render();\n    }\n  }\n  customElements.define(\"gun-avatar\", Avatar);\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    let avatars = document.getElementsByClassName(\"gun-avatar\");\n    for (let img of avatars) {\n      img.src = gunAvatar(img.dataset.pub, img.dataset.size, img.dataset.dark);\n    }\n  });\n}\nfunction gunAvatar(pub, size = 800, dark = false) {\n  var _a;\n  if (!pub)\n    return;\n  if ((_a = cache == null ? void 0 : cache[size]) == null ? void 0 : _a[pub])\n    return cache[size][pub];\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = canvas.height = size;\n  const ctx = canvas.getContext(\"2d\");\n  const split = pub.split(\".\");\n  const decoded = split.map((single) => decodeUrlSafeBase64(single));\n  drawGradient(ctx, decoded[0][42], decoded[1][42], size, dark);\n  drawCircles(decoded[0], ctx, size, 0.42 * size);\n  ctx.globalCompositeOperation = \"lighter\";\n  drawCircles(decoded[1], ctx, size, 0.125 * size);\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.scale(-1, 1);\n  ctx.translate(-size / 2, 0);\n  ctx.drawImage(canvas, size / 2, 0, size, size, 0, 0, size, size);\n  cache[size] = cache[size] || {};\n  cache[size][pub] = canvas.toDataURL();\n  return cache[size][pub];\n}\nfunction drawGradient(ctx, top, bottom, size, dark = false) {\n  var gradient = ctx.createLinearGradient(0, 0, 0, size);\n  let offset = 70;\n  if (dark)\n    offset = 0;\n  gradient.addColorStop(0, `hsl(0,0%,${offset + top * 30}%)`);\n  gradient.addColorStop(1, `hsl(0,0%,${offset + bottom * 30}%)`);\n  ctx.fillStyle = gradient;\n  ctx.fillRect(0, 0, size, size);\n}\nfunction drawCircles(data, ctx, size, radius) {\n  const chunks = chunkIt(data, 7);\n  chunks.forEach((chunk) => {\n    if (chunk.length == 7) {\n      let x = size / 2 + chunk[0] * size / 2;\n      let y = chunk[1] * size;\n      let r = chunk[2] * radius;\n      let h = chunk[3] * 360;\n      let s = chunk[4] * 100;\n      let l = chunk[5] * 100;\n      let a = chunk[6];\n      ctx.beginPath();\n      ctx.arc(x, y, r, 0, 2 * Math.PI, false);\n      ctx.fillStyle = `hsla(${h},${s}%,${l}%,${a})`;\n      ctx.closePath();\n      ctx.fill();\n    }\n  });\n}\nfunction decodeUrlSafeBase64(st) {\n  const symbols = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\";\n  const symbolArray = symbols.split(\"\");\n  let arr = [];\n  let i = 0;\n  for (let letter of st) {\n    arr[i++] = symbolArray.indexOf(letter) / 64;\n  }\n  return arr;\n}\nfunction chunkIt(list, chunkSize = 3) {\n  return [...Array(Math.ceil(list.length / chunkSize))].map(() => list.splice(0, chunkSize));\n}\nexport { gunAvatar };\n"],
  "mappings": "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",
  "names": []
}
