import{d as q,p as U,h as g,c as l,e as c,k as i,o,j as t,G as y,r as F,t as w,N as I,n as x,w as b,T as $,F as V,B as j}from"./framework.Cn0LGHOD.js";import{a as A,E as J,G as Q,H as z,D as M,I as O,J as W}from"./components.dqDRA8lG.js";import"./theme.KpIl4si9.js";const Y={key:0,class:"flex p-4 items-center bg-dark-100 bg-opacity-20 mt-2 shadow-inset"},H={key:0,class:"i-la-lock"},K={key:1,class:"i-la-unlock"},X={class:"text-sm"},Z={class:"flex flex-wrap gap-2 p-2"},ee=["href"],te={key:1,class:"flex w-full justify-center mt-4"},se={class:"p-2 flex flex-col w-full items-start",key:"text"},ne={class:"flex gap-2 items-center mx-4"},le={key:0,class:"px-2"},ie={key:1,class:"px-2"},oe={class:"w-full p-4 text-sm flex-1 rounded-xl break-all select-all",key:"text"},ae={class:"p-2 flex flex-col items-center",key:"png"},re=["src"],ue={class:"p-4 flex flex-col gap-2",key:"link"},de={class:"flex flex-wrap gap-2 items-center mx-4"},ce={key:0,class:"px-2"},pe={key:1,class:"px-2"},ve=["onClick"],me={class:"px-2"},xe=["href"],fe={class:"px-2 font-normal font-mono text-xs"},ke={class:"p-4 flex flex-col gap-2 items-center",key:"qr"},Se=q({__name:"AuthCredentials",emits:["close"],setup(ye,{emit:ge}){const a=U("pass"),{user:r}=A();function f(s){a.value!=s?a.value=s:a.value=null}const{pass:u}=J(),{text:we,copy:P,copied:S,isSupported:L}=Q(),{share:T,isSupported:D}=z(),d=U(!0),k=g(()=>{var s;return d.value?(s=u==null?void 0:u.safe)==null?void 0:s.enc:JSON.stringify(r.pair())}),p=g(()=>d.value?u.links.pass:u.links.pair),N=g(()=>M({pub:r.pub,embed:k.value})),h=g(()=>R(p.value));function C(s,e,v="text/plain"){const m=s.startsWith("data:")?s:`data:${v};base64,${btoa(unescape(encodeURIComponent(s)))}`,n=document.createElement("a");n.download=e,n.href=m,n.click()}function B(s){!(s!=null&&s.content)||!(s!=null&&s.extension)||C(s.content,`${r.name||"account"}${s.extension}`,s.mime)}function E(s){C(s,`${r.name||"avatar"}.png`)}function G(s){C(s,`${r.name||"account"}.json`,"application/json")}function R(s,e="Bookmark"){const v=`[InternetShortcut]
URL=`+s,m=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>URL</key>
  <string>`+s+`</string>
</dict>
</plist>`,n=`[Desktop Entry]
Encoding=UTF-8
Type=Link
Name=`+e+`
URL=`+s;return{Win:{content:v,extension:".url",mime:"application/internet-shortcut"},Mac:{content:m,extension:".webloc",mime:"application/x-apple-plist"},Linux:{content:n,extension:".desktop",mime:"application/x-desktop"}}}return(s,e)=>{var v,m;return i(r).is?(o(),l("div",{class:"flex flex-col items-stretch pb-4 border-1 border-dark-100 border-opacity-10 max-w-120 mx-auto dark-bg-dark-200",key:i(r).is},[e[26]||(e[26]=t("div",{class:"mt-4 mx-6"},"Please make sure to safely store your cryptographic keypair to be able to use it again later",-1)),y(i(O)),(m=(v=i(u))==null?void 0:v.safe)!=null&&m.enc?(o(),l("div",Y,[t("div",{class:"flex flex-col w-34 items-center",style:I({color:d.value?"green":"red"})},[t("button",{class:"m-2 button text-2xl",onClick:e[0]||(e[0]=n=>d.value=!d.value)},[d.value?(o(),l("div",H)):(o(),l("div",K))]),t("div",X,w(d.value?"Encrypted":"Plain Text"),1),e[12]||(e[12]=t("div",{class:"text-m"},"Key Pair",-1))],4),t("div",Z,[t("button",{class:x(["button items-center",{active:a.value=="key"}]),onClick:e[1]||(e[1]=n=>f("key"))},e[13]||(e[13]=[t("div",{class:"i-la-envelope-open-text"},null,-1),t("div",{class:"px-2"},"Text",-1)]),2),t("button",{class:x(["button items-center",{active:a.value=="link"}]),href:p.value,target:"_blank",onClick:e[2]||(e[2]=n=>f("link"))},e[14]||(e[14]=[t("div",{class:"i-la-link"},null,-1),t("div",{class:"px-2"},"Link",-1)]),10,ee),t("button",{class:x(["button items-center",{active:a.value=="qr"}]),onClick:e[3]||(e[3]=n=>f("qr"))},e[15]||(e[15]=[t("div",{class:"i-la-qrcode"},null,-1),t("div",{class:"px-2"},"QR",-1)]),2),t("button",{class:x(["button items-center",{active:a.value=="png"}]),onClick:e[4]||(e[4]=n=>f("png"))},e[16]||(e[16]=[t("div",{class:"i-la-user-circle"},null,-1),t("div",{class:"px-2"},"PNG",-1)]),2)])])):c("",!0),a.value?(o(),l("div",te,[y($,{name:"fade",mode:"out-in"},{default:b(()=>[a.value=="key"?(o(),l("div",se,[t("div",ne,[i(L)?(o(),l("button",{key:0,class:"button items-center",onClick:e[5]||(e[5]=n=>i(P)(k.value))},[e[17]||(e[17]=t("div",{class:"i-la-copy"},null,-1)),y($,{name:"fade",mode:"out-in",appear:""},{default:b(()=>[i(S)?(o(),l("div",le,"Copied!")):(o(),l("div",ie,"Copy"))]),_:1})])):c("",!0),i(D)?(o(),l("button",{key:1,class:x(["button items-center",{active:a.value=="pass"}]),onClick:e[6]||(e[6]=n=>i(T)({title:i(r).name||"Gun-Vue keypair",text:k.value}))},e[18]||(e[18]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):c("",!0),t("button",{class:"button items-center",onClick:e[7]||(e[7]=n=>{G(k.value),a.value=null})},e[19]||(e[19]=[t("div",{class:"i-la-download"},null,-1),t("div",{class:"px-2"},"Download",-1)]))]),t("div",oe,w(k.value),1)])):a.value=="png"?(o(),l("div",ae,[t("img",{class:"cursor-pointer shadow-lg rounded-full hover-lightness-120 hover-shadow-2xl -hover-translate-y-1 transition active-translate-y-1",src:N.value,onClick:e[8]||(e[8]=n=>E(N.value))},null,8,re),e[20]||(e[20]=t("div",{class:"text-sm op-50 text-center m-4 max-w-50"},"Click the image to download the PNG file with your key embedded. You can use to login later. ",-1))])):a.value=="link"?(o(),l("div",ue,[t("div",de,[i(L)?(o(),l("button",{key:0,class:"button items-center",onClick:e[9]||(e[9]=n=>i(P)(p.value))},[e[21]||(e[21]=t("div",{class:"i-la-copy"},null,-1)),y($,{name:"fade",mode:"out-in",appear:""},{default:b(()=>[i(S)?(o(),l("div",ce,"Copied!")):(o(),l("div",pe,"Copy"))]),_:1})])):c("",!0),i(D)?(o(),l("button",{key:1,class:x(["button items-center",{active:a.value=="pass"}]),onClick:e[10]||(e[10]=n=>i(T)({title:i(r).name||"Gun-Vue Login link",text:p.value}))},e[22]||(e[22]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):c("",!0),(o(!0),l(V,null,j(h.value,(n,_)=>(o(),l("button",{class:"button items-center",key:n==null?void 0:n.content,onClick:Ce=>B(n)},[e[23]||(e[23]=t("div",{class:"i-la-download"},null,-1)),t("div",me,w(_),1)],8,ve))),128))]),t("a",{class:"m-2 button items-center break-all",href:p.value,target:"_blank",onClick:e[11]||(e[11]=n=>f("links"))},[e[24]||(e[24]=t("div",{class:"i-la-link"},null,-1)),t("div",fe,w(p.value),1)],8,xe)])):a.value=="qr"?(o(),l("div",ke,[y(i(W),{class:"max-w-600px",data:d.value?i(u).links.pass:i(u).links.pair},null,8,["data"]),e[25]||(e[25]=t("div",{class:"text-sm op-50 text-center mx-4 max-w-80"},"Make a screenshot to save the QR code for logging in later.",-1))])):c("",!0)]),_:1})])):c("",!0),F(s.$slots,"default")])):c("",!0)}}});export{Se as default};
