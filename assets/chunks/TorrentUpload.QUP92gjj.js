import{p as i,v as C,h as b,c as d,o as u,j as l,G as w,t as f,k as t,w as F,F as _,B as h,a0 as $}from"./framework.ap9ZVjPY.js";import{ah as B,L as S,I as y,ai as L,aj as U}from"./components.BxMa2vxL.js";import"./theme.MpryKJ4B.js";const j={class:"flex gap-2"},z={class:"text-sm"},H={class:"flex flex-col gap-2 p-4"},M={class:"flex flex-col gap-2"},N={class:"flex items-center gap-2"},O=["onClick"],P={class:"text-md max-w-55ch"},T={class:"p-0"},V=["onClick"],q={__name:"TorrentUpload",emits:["uploaded","url"],setup(D,{emit:E}){const{files:p,deleteFile:m,init:x,clearFiles:v,clearOPFS:c}=B(),n=i(!1),a=i(null);i(!1),C(x);const k=b(()=>{var s,e,o;if(!((e=(s=a.value)==null?void 0:s.info)!=null&&e.infoHash))return"";let r=new URL((o=window==null?void 0:window.location)==null?void 0:o.href);return r.hash="",`${r.href}#/files/${a.value.info.infoHash}`});return S({source:k}),y(),i(!1),i(!1),(r,s)=>(u(),d("div",j,[l("button",{class:"button",onClick:s[0]||(s[0]=e=>n.value=!0)},[s[4]||(s[4]=l("div",{class:"i-la-share"},null,-1)),l("div",z,f(t(p).size),1)]),w(t(U),{open:n.value,onClose:s[3]||(s[3]=e=>n.value=!1)},{default:F(()=>[l("div",H,[l("div",M,[l("div",N,[s[7]||(s[7]=l("div",{class:"text-xl font-bold"},"Shared files",-1)),s[8]||(s[8]=l("div",{class:"flex-1"},null,-1)),l("button",{class:"button p-2 gap-2",onClick:s[1]||(s[1]=(...e)=>t(v)&&t(v)(...e))},s[5]||(s[5]=[l("div",{class:"i-la-folder-minus"},null,-1),l("div",{class:"p-0"},"Clear files",-1)])),l("button",{class:"button p-2 gap-2",onClick:s[2]||(s[2]=(...e)=>t(c)&&t(c)(...e))},s[6]||(s[6]=[l("div",{class:"i-la-trash"},null,-1),l("div",{class:"p-0"},"Clear OPFS",-1)]))])]),(u(!0),d(_,null,h(t(p),([e,o])=>(u(),d("div",{key:e,class:"flex gap-2 items-center p-2 bg-light-100 dark-bg-dark-400 rounded cursor-pointer",onClick:g=>a.value=o},[l("div",P,f(e),1),s[10]||(s[10]=l("div",{class:"flex-1"},null,-1)),l("div",T,f(t(L)(o.file.size)),1),l("button",{class:"p-2",onClick:$(g=>t(m)(e),["stop"])},s[9]||(s[9]=[l("div",{class:"i-la-trash"},null,-1)]),8,V)],8,O))),128))])]),_:1},8,["open"])]))}};export{q as default};
