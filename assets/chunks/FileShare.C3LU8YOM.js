import{p as c,v as g,h as w,c as $,o as x,j as o,a0 as r,n as b}from"./framework.DtSfhgxr.js";import{a9 as y,ab as s}from"./components.B_W1O-I8.js";import"./theme.DKVKzJue.js";const B={class:"flex gap-2"},F={__name:"FileShare",emits:["uploaded","url"],setup(D,{emit:d}){const{upload:m,init:h}=y(),n=c(!1),i=d;g(h);async function u(t){var l,f,p;const e=((l=t.target)==null?void 0:l.files)||((f=t==null?void 0:t.dataTransfer)==null?void 0:f.files);if(!(e!=null&&e.length))return;const a=await m(e);if(a.length){s.value=a[0],i("uploaded",a[0]);let v=new URL((p=window==null?void 0:window.location)==null?void 0:p.href);v.hash="",i("url",`${v.href}#/files/${s.value.info.infoHash}`)}}return w(()=>{var e,a,l;if(!((a=(e=s.value)==null?void 0:e.info)!=null&&a.infoHash))return"";let t=new URL((l=window==null?void 0:window.location)==null?void 0:l.href);return t.hash="",`${t.href}#/files/${s.value.info.infoHash}`}),(t,e)=>(x(),$("div",B,[o("label",{class:b(["button",{"bg-light-800":n.value}]),onDragover:e[0]||(e[0]=r(a=>n.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=r(a=>n.value=!1,["prevent"])),onDrop:e[2]||(e[2]=r(a=>{u(a),n.value=!1},["prevent"]))},[e[3]||(e[3]=o("div",{class:"i-la-paperclip text-xl"},null,-1)),o("input",{type:"file",accept:"*",multiple:"",onChange:u,style:{display:"none"}},null,32)],34)]))}};export{F as default};
