import{p as i,v as C,h as b,c as d,o as u,j as l,G as w,t as f,k as t,w as F,F as _,B as $,a0 as h}from"./framework.NFQ89pQN.js";import{a7 as y,z as B,y as S,a8 as U,a9 as z}from"./components.CoJQvNDd.js";import"./theme.CGOUX2rs.js";const L={class:"flex gap-2"},H={class:"text-sm"},M={class:"flex flex-col gap-2 p-4"},N={class:"flex flex-col gap-2"},O={class:"flex items-center gap-2"},P=["onClick"],T={class:"text-md max-w-55ch"},V={class:"p-0"},j=["onClick"],A={__name:"TorrentUpload",emits:["uploaded","url"],setup(D,{emit:E}){const{files:p,deleteFile:m,init:x,clearFiles:v,clearOPFS:c}=y(),n=i(!1),a=i(null);i(!1),C(x);const k=b(()=>{var s,e,o;if(!((e=(s=a.value)==null?void 0:s.info)!=null&&e.infoHash))return"";let r=new URL((o=window==null?void 0:window.location)==null?void 0:o.href);return r.hash="",`${r.href}#/files/${a.value.info.infoHash}`});return B({source:k}),S(),i(!1),i(!1),(r,s)=>(u(),d("div",L,[l("button",{class:"button",onClick:s[0]||(s[0]=e=>n.value=!0)},[s[4]||(s[4]=l("div",{class:"i-la-share"},null,-1)),l("div",H,f(t(p).size),1)]),w(t(z),{open:n.value,onClose:s[3]||(s[3]=e=>n.value=!1)},{default:F(()=>[l("div",M,[l("div",N,[l("div",O,[s[7]||(s[7]=l("div",{class:"text-xl font-bold"},"Shared files",-1)),s[8]||(s[8]=l("div",{class:"flex-1"},null,-1)),l("button",{class:"button p-2 gap-2",onClick:s[1]||(s[1]=(...e)=>t(v)&&t(v)(...e))},s[5]||(s[5]=[l("div",{class:"i-la-folder-minus"},null,-1),l("div",{class:"p-0"},"Clear files",-1)])),l("button",{class:"button p-2 gap-2",onClick:s[2]||(s[2]=(...e)=>t(c)&&t(c)(...e))},s[6]||(s[6]=[l("div",{class:"i-la-trash"},null,-1),l("div",{class:"p-0"},"Clear OPFS",-1)]))])]),(u(!0),d(_,null,$(t(p),([e,o])=>(u(),d("div",{key:e,class:"flex gap-2 items-center p-2 bg-light-100 dark-bg-dark-400 rounded cursor-pointer",onClick:g=>a.value=o},[l("div",T,f(e),1),s[10]||(s[10]=l("div",{class:"flex-1"},null,-1)),l("div",V,f(t(U)(o.file.size)),1),l("button",{class:"p-2",onClick:h(g=>t(m)(e),["stop"])},s[9]||(s[9]=[l("div",{class:"i-la-trash"},null,-1)]),8,j)],8,P))),128))])]),_:1},8,["open"])]))}};export{A as default};
