import{h as c,u as i,m as l}from"./components.BfL1cQFx.js";import{x as m,h as o,aj as f}from"./framework.DOfjDz1B.js";const g=1e4;function k(a){const t=c(),n=m(a),{user:u}=i();return{account:o(()=>{const s=f({pub:n.value,color:o(()=>"gray"),profile:{name:""},pulse:0,lastSeen:o(()=>{const e=Date.now()-s.pulse;return e>g?l(e):"online"}),blink:!1,db:t.user(n.value)});return u.is&&t.user().get("petnames").get(n.value).on(async e=>{s.petname=await u.decrypt(e)}),t.user(n.value).get("pulse").on(e=>{s.blink=!s.blink,s.pulse=e}).back().get("profile").map().on((e,p)=>{s.profile[p]=e}),s}),setPetname:b}}async function b(a,t){const{user:n}=i();if(!n.is)return;const u=c(),r=await n.encrypt(t);u.user().get("petnames").get(a).put(r)}export{b as s,k as u};
