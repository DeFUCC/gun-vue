import{c as o,o as t,j as n,e as v,b as m,G as u,k as s,H as b,t as c,w,aG as B,aZ as C}from"./framework.DOfjDz1B.js";import{u as j,aH as G,n as $,ab as F}from"./components.BfL1cQFx.js";import{a as S}from"./useGifts.C77v3Jtb.js";import"./theme.2Mja-hgs.js";import"./composables.BdOMFBpf.js";const P={class:"flex flex-col"},D={class:"text-xl my-4 p-2 flex items-center"},E={key:1,class:"text-xs"},H={key:0,class:"p-2 flex flex-col gap-4"},V={class:"p-2 w-full flex items-center gap-2"},_={class:"text-xl font-bold"},A={class:"text-xl"},L={class:"flex flex-wrap gap-2"},U={class:"mr-2"},O={__name:"ProjectFunding",props:{path:{type:String,default:""},enabled:{type:Boolean,default:!1}},emits:["enable","gift","open"],setup(l,{emit:Z}){const h=l,{collections:x}=S(h.path),{user:i}=j();return(f,e)=>(t(),o("div",P,[n("div",D,[e[2]||(e[2]=n("div",{class:"font-bold"},"Project funding",-1)),e[3]||(e[3]=n("div",{class:"flex-1"},null,-1)),l.enabled?(t(),m(s(G),{key:1,gift:{project:l.path,to:l.path.slice(-87)},onSent:e[1]||(e[1]=a=>f.$emit("gift",a))},null,8,["gift"])):(t(),o(u,{key:0},[l.path.includes(s(i).pub)?(t(),o("button",{key:0,class:"button",onClick:e[0]||(e[0]=a=>f.$emit("enable"))},"Enable Funding")):(t(),o("div",E,"Funding not yet enabled by the author"))],64))]),l.enabled?(t(),o("div",H,[(t(!0),o(u,null,b(s(x),(a,p)=>{var y,g,k;return t(),o("div",{class:"flex flex-col gap-2 p-2 bg-dark-50 rounded-xl bg-opacity-10 shadow-xl",key:a},[n("div",V,[n("div",_,c(a.sum),1),n("div",A,c(p),1),e[4]||(e[4]=n("div",{class:"opacity-50"},"by",-1)),n("div",L,[(t(!0),o(u,null,b(a.from,(r,d)=>(t(),m(s($),{key:r,pub:d},{default:w(()=>[n("div",U,c(r)+" "+c(p),1)]),_:2},1032,["pub"]))),128))])]),(k=(g=(y=s(x))==null?void 0:y[p])==null?void 0:g.from)!=null&&k[s(i).pub]||l.path.includes(s(i).pub)?(t(!0),o(u,{key:0},b(a.list,(r,d)=>B((t(),m(s(F),{class:"cursor-pointer",key:d,hash:d,onClick:z=>f.$emit("open",d)},null,8,["hash","onClick"])),[[C,r.from==s(i).pub||r.to==s(i).pub]])),128)):v("",!0)])}),128))])):v("",!0)]))}};export{O as default};
