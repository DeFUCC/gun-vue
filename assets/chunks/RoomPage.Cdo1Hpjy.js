import{aV as B,a as C,i as m,aO as $,q as F,aW as L,aK as N,aX as S,o as T,aY as U,aZ as V,a_ as z,aB as H}from"./components.DHXz-LG9.js";import{u as M}from"./useMd.ClE9o_Bs.js";import{u as P}from"./useBackground.DNpZJU5j.js";import"./theme.DdZphXP3.js";import{h as y,ah as j,c as n,o as r,j as s,r as A,b as f,k as e,G as d,t as G,F as h,B as _,N as O,e as q}from"./framework.BN2VI_cg.js";const D={class:"flex flex-col items-stretch"},E={class:"max-w-full flex flex-col items-stretche bg-light-100 bg-opacity-20 dark-bg-dark-800 dark-bg-opacity-40 p-4 md-p-12 shadow-xl backdrop-blur-md backdrop-filter rounded-t-xl"},K={class:"flex flex-wrap items-center gap-8"},W={class:"flex flex-col flex-auto",style:{flex:"100"}},X={class:"flex gap-2 items-center"},Y={key:0,class:"i-la-star"},Z={key:1,class:"i-la-star-solid"},I={class:"text-md"},J={class:"flex items-center flex-wrap"},Q={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},ee={class:"flex flex-wrap items-center gap-2 p-4"},te={class:"px-4 max-w-55ch"},se={class:"relative"},oe={key:0,class:"flex items-center"},le=["innerHTML"],me={__name:"RoomPage",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>B}},emits:["rooms","browse","user"],setup(p){const x=p,{user:b}=C(),i=y(()=>x.pub?x.pub:m.pub),{room:l,leaveRoom:ae,updateRoomProfile:v,enterRoom:re}=$(i.value),w=M(),u=j({name:!1,description:!1,text:!1});F("deep");const R=y(()=>P({pub:i.value,size:1200,attachment:"local"}));return(c,t)=>{var k,g;return r(),n("div",D,[s("div",{class:"pt-32 px-2 md-px-8 bg-cover relative flex flex-col items-center",style:O({...R.value})},[s("div",E,[s("div",K,[(r(),f(e(L),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:i.value,key:i.value},null,8,["pub"])),s("div",W,[s("div",X,[d(e(N),{class:"font-bold text-2xl",text:e(l).profile.name||i.value.substring(0,12),editable:e(l).hosts[e(b).pub]&&i.value==e(m).pub&&!u.name,onUpdate:t[0]||(t[0]=a=>e(v)("name",a))},null,8,["text","editable"]),t[6]||(t[6]=s("div",{class:"flex-1"},null,-1)),s("button",{class:"button",onClick:t[1]||(t[1]=a=>e(S)(i.value))},[e(l).isFavourite?(r(),n("div",Z)):(r(),n("div",Y))])]),s("div",I,G(e(l).profile.description),1),s("div",J,[t[7]||(t[7]=s("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(r(!0),n(h,null,_(e(l).hosts,(a,o)=>(r(),n("div",{class:"p-2 flex flex-col items-start gap-2",key:o},[d(e(T),{pub:o,selectable:!0},null,8,["pub"])]))),128))]),d(e(U),{pub:i.value},null,8,["pub"])])])])],4),A(c.$slots,"default"),s("div",Q,[s("div",ee,[(r(!0),n(h,null,_(p.titles,(a,o)=>(r(),f(e(V),{key:o,cert:e(l).features[o],type:o,title:a,pub:p.pub||e(m).pub,open:e(l).features[o]||o=="users"&&e(l).features.space||o=="chat"&&e(l).features.chat,onClick:ie=>c.$emit("browse",o)},null,8,["cert","type","title","pub","open","onClick"]))),128))]),s("div",te,[d(e(z),{state:"offline",onUser:t[2]||(t[2]=a=>c.$emit("user",a))})]),s("div",se,[u.text===!1?(r(),n("div",oe,[s("div",{class:"p-8 prose max-w-65ch break-all",innerHTML:e(w).render(((k=e(l).profile)==null?void 0:k.text)||"")},null,8,le),(g=e(l).hosts)!=null&&g[e(b).pub]?(r(),n("button",{key:0,class:"button absolute top-4 right-4 z-200",onClick:t[3]||(t[3]=a=>{var o;return u.text=((o=e(l).profile)==null?void 0:o.text)||""})},t[8]||(t[8]=[s("div",{class:"i-la-pen"},null,-1)]))):q("",!0)])):(r(),f(e(H),{key:1,text:u.text,"onUpdate:text":t[4]||(t[4]=a=>u.text=a),onClose:t[5]||(t[5]=a=>{e(v)("text",u.text),u.text=!1})},null,8,["text"]))])])])}}};export{me as default};
