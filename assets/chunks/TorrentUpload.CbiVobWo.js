import{p as i,v as C,h as b,aR as w,aS as F,c as d,o as u,j as l,G as _,t as f,k as t,w as S,F as $,B as h,a0 as y}from"./framework.BfubPTv1.js";import{a9 as B,U}from"./components.Deetb6dJ.js";import"./theme.BnzEJp4D.js";import{p as L}from"./index.BuUnCgYx.js";const z={class:"flex gap-2"},H={class:"text-sm"},M={class:"flex flex-col gap-2 p-4"},N={class:"flex flex-col gap-2"},O={class:"flex items-center gap-2"},P=["onClick"],R={class:"text-md max-w-55ch"},T={class:"p-0"},V=["onClick"],I={__name:"TorrentUpload",emits:["uploaded","url"],setup(j,{emit:D}){const{files:p,deleteFile:m,init:x,clearFiles:v,clearOPFS:c}=B(),a=i(!1),n=i(null);i(!1),C(x);const k=b(()=>{var s,e,o;if(!((e=(s=n.value)==null?void 0:s.info)!=null&&e.infoHash))return"";let r=new URL((o=window==null?void 0:window.location)==null?void 0:o.href);return r.hash="",`${r.href}#/files/${n.value.info.infoHash}`});return w({source:k}),F(),i(!1),i(!1),(r,s)=>(u(),d("div",z,[l("button",{class:"button",onClick:s[0]||(s[0]=e=>a.value=!0)},[s[4]||(s[4]=l("div",{class:"i-la-share"},null,-1)),l("div",H,f(t(p).size),1)]),_(t(U),{open:a.value,onClose:s[3]||(s[3]=e=>a.value=!1)},{default:S(()=>[l("div",M,[l("div",N,[l("div",O,[s[7]||(s[7]=l("div",{class:"text-xl font-bold"},"Shared files",-1)),s[8]||(s[8]=l("div",{class:"flex-1"},null,-1)),l("button",{class:"button p-2 gap-2",onClick:s[1]||(s[1]=(...e)=>t(v)&&t(v)(...e))},s[5]||(s[5]=[l("div",{class:"i-la-folder-minus"},null,-1),l("div",{class:"p-0"},"Clear files",-1)])),l("button",{class:"button p-2 gap-2",onClick:s[2]||(s[2]=(...e)=>t(c)&&t(c)(...e))},s[6]||(s[6]=[l("div",{class:"i-la-trash"},null,-1),l("div",{class:"p-0"},"Clear OPFS",-1)]))])]),(u(!0),d($,null,h(t(p),([e,o])=>(u(),d("div",{key:e,class:"flex gap-2 items-center p-2 bg-light-100 dark-bg-dark-400 rounded cursor-pointer",onClick:g=>n.value=o},[l("div",R,f(e),1),s[10]||(s[10]=l("div",{class:"flex-1"},null,-1)),l("div",T,f(t(L)(o.file.size)),1),l("button",{class:"p-2",onClick:y(g=>t(m)(e),["stop"])},s[9]||(s[9]=[l("div",{class:"i-la-trash"},null,-1)]),8,V)],8,P))),128))])]),_:1},8,["open"])]))}};export{I as default};
