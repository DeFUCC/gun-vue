var Y=Object.defineProperty;var Z=(e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t,n)=>Z(e,typeof t!="symbol"?t+"":t,n);import{d as X,p as M,h as B,q as K,b0 as ee,aF as T,c as g,o as d,aJ as te,ah as J,C as ie,j as f,b as C,e as $,k as l,w as Q,t as F,F as O,B as L,G as I,K as se,aZ as ne,aG as re,a as le,N as z}from"./framework.BfubPTv1.js";import{a as ae,p as oe,i as ue,n as q,v as pe,P as ce,ai as me}from"./components.DrUpwvb3.js";import{u as fe}from"./useGuests.DQ893KK6.js";import{a as de}from"./useGift.B8k8J-fl.js";import{u as he}from"./useProject.B1-jGLRJ.js";import{u as ve}from"./useProjects.B5SuFn5s.js";import"./theme.CrhHRl-W.js";import{c as ge}from"./currencies.G9pkebxG.js";import"./composables.CunwHOJw.js";/**
 * Vue Number Format 3.34.1
 * (c) 2021-2024 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var _={prefix:"",suffix:"",separator:",",decimal:".",inputmode:"numeric",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function xe(e){return t=0,n=e,a=20,Math.max(t,Math.min(n,a));var t,n,a}class U{constructor(t){v(this,"options");v(this,"input");v(this,"number");v(this,"isClean");v(this,"isCustomDecimal");v(this,"noPreSuffix");v(this,"hasPreOrSuffix");v(this,"prefix");v(this,"preSufRegExp");v(this,"prefixRegExp");v(this,"suffixRegExp");v(this,"numberRegExp");v(this,"cleanRegExp");v(this,"negativeRegExp");this.options=Object.assign(A(_),t);const{prefix:n,suffix:a,decimal:p,reverseFill:i}=this.options;this.input="",this.number="",this.isClean=!i;const o=n,s=a,c=o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=s.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");c&&(this.prefixRegExp=new RegExp(`^${c}`)),u&&(this.suffixRegExp=new RegExp(`${u}$`)),this.prefix=n,this.numberRegExp=new RegExp(`[^0-9\\${p}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=p!==".",this.noPreSuffix=!o&&!s,this.hasPreOrSuffix=!this.noPreSuffix}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(t=!1){return this.isClean=t,this}sign(){if(this.input===null||this.input===void 0)return"";const t=this.input.toString().indexOf(R)>=0;return this.isClean?t&&this.realNumber()>0?R:"":t?R:""}toFixed(){const t=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/t||0).toFixed(xe(this.options.precision))}toNumber(t){return Number(t)}numberOnly(t){var a;let n=(a=this.input)==null?void 0:a.toString();return this.prefixRegExp&&(n=n.replace(this.prefixRegExp,"")),this.suffixRegExp&&(n=n.replace(this.suffixRegExp,"")),n.replace(t||this.numberRegExp,"")}inputWithPreOrSuffix(){return this.input&&this.prefixRegExp?this.prefixRegExp.test(this.input.toString()):!this.input||!this.suffixRegExp||this.suffixRegExp.test(this.input.toString())}isNegative(){return this.sign()===R}isNumber(t){return!isNaN(this.toNumber(t||this.input))}numbers(){var p;const{reverseFill:t,decimal:n,separator:a}=this.options;if(t)this.number=this.toFixed().replace(".",n);else{const i=(p=this.input)==null?void 0:p.toString().replace(this.prefixRegExp??"","").replace(this.suffixRegExp??"","").replace(new RegExp(R,"g"),""),o=this.input.toString().indexOf(n)>=0&&this.isCustomDecimal,s=i.replace(new RegExp(`\\${a}`,"g"),"").replace(n,".");typeof this.input=="number"||this.isNumber()&&!o&&!this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(i,".").join(n):this.isNumber(s)&&!o&&this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(s,".").join(n):this.number=this.parts(this.numberOnly()).join(n)}return this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(t,n){const{precision:a,minimumFractionDigits:p,decimal:i}=this.options;let o=t.toString().split(n||i);if(o.length>1&&(o[0]=this.toNumber(o[0])||0,o[1]=o.slice(1,o.length).join(""),o=o.slice(0,2)),this.isClean){const s=this.toNumber(o.join(".")).toFixed(a),c=this.toNumber(s),u=c.toFixed(p);o=p>=0&&c.toString().length<u.length?u.toString().split("."):c.toString().split(".")}return o.slice(0,2)}addSeparator(){const{decimal:t,separator:n}=this.options,a=this.numbers().split(t);return a[0]=a[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${n}`),a.join(t)}format(t){this.input=t;const{reverseFill:n,nullValue:a,prefix:p,suffix:i}=this.options;return this.isNull()&&!n?a:this.sign()+p+this.addSeparator()+i}unformat(t){this.input=t;const{reverseFill:n,nullValue:a}=this.options,p=this.realNumber(),i=this.unformatNumber();return this.isNull()||n&&p===0?a:this.sign()+i}}const R="-";function A(e){return JSON.parse(JSON.stringify(e))}function W(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function P(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function H(e,t){const n=()=>{e.setSelectionRange(t,t)};n(),setTimeout(n,1)}function j(e,t,{emit:n=!0,force:a=!1,clean:p=!1}={}){var x;const{options:i,oldValue:o}=e,{reverseFill:s,max:c,min:u}=i,h=((x=t==null?void 0:t.props)==null?void 0:x.value)||e.value;if(a||o!==h){const E=new U(i).clean(p&&!s);let y=E.format(h),k=E.clean(!s).unformat(h);p&&(Number(c)===c&&Number(k)>c?(y=E.format(c),k=c.toString()):Number(u)===u&&Number(k)<u&&(y=E.format(u),k=u.toString())),e.oldValue=y,e.unmasked=k,e.value!==y&&(e.value=y)}return n&&e.dispatchEvent(W("input"))}var be={beforeMount:(e,{value:t,modifiers:n},a)=>{var u;e=P(e);const p=Object.assign(A(_),t,n),{reverseFill:i,precision:o,decimal:s,inputmode:c}=p;e.options=p,e.setAttribute("inputmode",c),i&&e.value?(e.value=parseFloat(new U({...p,reverseFill:!1}).unformat(e.value)).toFixed(o),(u=a==null?void 0:a.props)!=null&&u.value&&(a.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",s)),j(e,a,{force:p.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=P(e)).parentElement||e,n=i=>{i.target===e&&function(o){const{target:s,detail:c}=o;if(c!=null&&c.facade)return!1;o.stopPropagation();let u=s.value.length;const{oldValue:h,options:x}=s;s.selectionEnd&&(u=s.value.length-s.selectionEnd),j(s,null,{clean:!x.precision,emit:!1}),x.suffix&&(u=Math.max(u,x.suffix.length)),u=s.value.length-u,x.prefix&&(u=Math.max(u,x.prefix.length)),H(s,u),h!==s.value&&s.dispatchEvent(W("input"))}(i)},a=i=>{i.target===e&&function(o){const{target:s}=o,{oldValue:c}=s;j(s,null,{force:!0,clean:!0,emit:!1}),c!==s.value&&s.dispatchEvent(W("input"))}(i)},p=i=>{i.target===e&&function(o,s){const{options:c}=s,{prefix:u,suffix:h,decimal:x,min:E,separator:y}=c,{key:k}=o,D=new RegExp(`${u}|${h}`,"g"),V=s.value.replace(D,""),N=E===void 0||Number(E)<0||Number(E)!==E;if(k===x)V.includes(x)?o.preventDefault():V||(s.value="0",s.dispatchEvent(new Event("input")));else if(k!==R||N){if(k==="Backspace"){const r=s.selectionEnd||0,S=s.value.slice(r-1,r),m=s.value.slice(r-2,r);let w=s.value.length-r;[u,R,y].includes(S)&&(o.preventDefault(),s.value=S===y?s.value.replace(m,""):s.value.replace(new RegExp(`[${u}${R}]`,"g"),""),w=Math.max(w,h.length),w=s.value.length-w,w=Math.max(w,u.length),H(s,w),s.dispatchEvent(new Event("input")))}}else o.preventDefault()}(i,e)};t.addEventListener("input",n,!0),t.addEventListener("blur",a,!0),t.addEventListener("keydown",p,!0),e.cleanup=()=>{t.removeEventListener("input",n,!0),t.removeEventListener("blur",a,!0),t.removeEventListener("keydown",p,!0)}},updated:(e,{value:t,oldValue:n,modifiers:a},p)=>{if(e=P(e),t!==n){const i=e.options;e.options=Object.assign(i,t,a),j(e,p,{force:!0,clean:!1,emit:!1})}else j(e,p,{emit:!1})},unmounted:e=>{var t;(t=P(e))==null||t.cleanup()}};const b=A(_);var G=X({name:"VueNumber",directives:{number:be},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:b.nullValue},masked:Boolean,readonly:Boolean,disabled:Boolean,reverseFill:{type:Boolean,default:b.reverseFill},prefill:{type:Boolean,default:b.prefill},precision:{type:Number,default:()=>b.precision},minimumFractionDigits:{type:Number,default:()=>b.minimumFractionDigits},decimal:{type:String,default:()=>b.decimal},min:{type:Number,default:()=>b.min},max:{type:Number,default:()=>b.max},separator:{type:String,default:()=>b.separator},prefix:{type:String,default:()=>b.prefix},suffix:{type:String,default:()=>b.suffix},inputmode:{type:String,default:()=>b.inputmode}},emits:["update:model-value","input:model-value"],setup(e,{emit:t}){const n=M(e.modelValue),a=M(!1),p=M(""),i=B(()=>({...e})),o=new U(i.value),s=B(()=>e.masked?o.format(n.value):p.value),c=()=>{t("update:model-value",s.value)};return K(()=>e.modelValue,u=>{s.value!=u&&(n.value=o.format(u))}),{config:i,maskedValue:n,unmaskedValue:p,input:u=>{const{target:h}=u;n.value=h.value,p.value=h.unmasked,a.value=!0,t("input:model-value",s.value)},blur:()=>{a.value&&s.value!==e.modelValue&&c()},change:c}}});const Ee=["value","readonly","disabled"];G.render=function(e,t,n,a,p,i){const o=ee("number");return T((d(),g("input",{type:"text",autocomplete:"off",value:e.maskedValue,readonly:e.readonly,disabled:e.disabled,class:"v-number vue-number-format",onChange:t[0]||(t[0]=(...s)=>e.change&&e.change(...s)),onInput:t[1]||(t[1]=(...s)=>e.input&&e.input(...s)),onBlur:t[2]||(t[2]=(...s)=>e.blur&&e.blur(...s))},null,40,Ee)),[[o,e.config]])},G.__file="src/component.vue";const ye={class:"flex flex-col max-w-140"},ke={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},Ne={class:"flex-1"},we={key:1,class:"flex flex-col"},Se={class:"font-bold"},Re={class:"flex flex-wrap gap-3"},Ce=["value"],Fe={class:"p-2 text-right"},Oe={key:0,class:"w-full"},je={key:1,class:"flex flex-wrap gap-1"},Ve=["onClick"],$e={class:"font-bold"},Pe={key:2,class:"flex"},Be={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},Qe={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(e,{emit:t}){const n={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},a=e,{user:p}=ae(),{gift:i,cleanGift:o,propose:s,hash:c,valid:u}=de(a.gift),{guests:h,count:x}=fe(),{project:E}=he(te(i,"project")),{projects:y}=ve(),k=oe();K(()=>i.wallet,N=>{N&&(i.ql=N.currency)});const D=B(()=>{const N=ue(),r=J({});return Object.keys(h).forEach(S=>{N.user(S).get("wallets").on((m,w)=>{r[S]=h[S]})}),r}),V=B(()=>{const N=J({});return Object.keys(y).forEach(r=>{r.includes(i.to)&&(N[r]=y[r])}),N});return(N,r)=>{const S=ie("gift-wallets");return d(),g("div",ye,[f("div",ke,[r[15]||(r[15]=f("div",{class:"p-2 text-right"},"FROM",-1)),f("div",Ne,[l(p).pub?(d(),C(l(q),{key:0,pub:l(p).pub},null,8,["pub"])):(d(),C(l(pe),{key:1}))]),r[16]||(r[16]=f("div",{class:"p-2 text-right"},"TO ",-1)),l(i).to?(d(),C(l(q),{key:0,pub:l(i).to},{default:Q(()=>[r[8]||(r[8]=f("div",{class:"flex-1"},null,-1)),f("div",{class:"i-la-times mr-2",onClick:r[0]||(r[0]=m=>{l(i).to="",l(i).wallet=null})})]),_:1},8,["pub"])):(d(),g("div",we,[f("div",Se,"USER SELECT OF "+F(Object.keys(D.value).length),1),f("div",Re,[(d(!0),g(O,null,L(l(h),m=>(d(),C(l(q),{key:m,pub:m.pub,onClick:w=>l(i).to=m.pub},null,8,["pub","onClick"]))),128))])])),l(i).to?(d(),g(O,{key:2},[r[14]||(r[14]=f("div",{class:"p-2 text-right"},"WALLET",-1)),(d(),C(S,{key:l(i).to,pub:l(i).to,"active-wallet":l(i).wallet,onWallet:r[1]||(r[1]=m=>l(i).wallet=m),onClear:r[2]||(r[2]=m=>l(i).wallet=null)},null,8,["pub","active-wallet"])),l(i).wallet?(d(),g(O,{key:0},[r[10]||(r[10]=f("div",{class:"p-2 text-right"},"Quantity",-1)),I(l(G),se({modelValue:l(i).qn,"onUpdate:modelValue":r[3]||(r[3]=m=>l(i).qn=m)},n,{placeholder:"Quantity"}),null,16,["modelValue"]),r[11]||(r[11]=f("div",{class:"p-2 text-right"},"Quality",-1)),T(f("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":r[4]||(r[4]=m=>l(i).ql=m),placeholder:"Your account currency"},[(d(!0),g(O,null,L(l(ge),m=>(d(),g("option",{key:m,value:m},F(m),9,Ce))),128))],512),[[ne,l(i).ql]]),r[12]||(r[12]=f("div",{class:"p-2 text-right self-start"},"Wish ",-1)),T(f("textarea",{class:"p-2","onUpdate:modelValue":r[5]||(r[5]=m=>l(i).wish=m),placeholder:"Wish"},null,512),[[re,l(i).wish]]),f("div",Fe,[r[9]||(r[9]=le("PROJECT ")),l(i).project?$("",!0):(d(),g("div",Oe,"SELECT"))]),l(i).project?(d(),C(l(ce),{key:0,project:l(E),path:l(i).project},{default:Q(()=>[f("div",{class:"i-la-times",onClick:r[6]||(r[6]=m=>l(i).project=null)})]),_:1},8,["project","path"])):(d(),g("div",je,[(d(!0),g(O,null,L(V.value,(m,w)=>(d(),g("div",{class:"p-2 rounded-xl cursor-pointer",key:w,style:z({backgroundColor:m.color}),onClick:De=>l(i).project=m.path},[f("div",$e,F(m.title),1)],12,Ve))),128))])),r[13]||(r[13]=f("div",{class:"p-2 text-right"},"ROOM",-1)),I(l(me)),l(u)?(d(),g("div",Pe,[f("button",{class:"button w-full justify-center",onClick:r[7]||(r[7]=m=>{l(s)(),N.$emit("sent",l(c))})},"Propose")])):$("",!0),f("pre",Be,F(l(o)),1),f("div",{class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition",style:z({backgroundColor:l(k).hex(l(c)||"")})},F(l(c)),5)],64)):$("",!0)],64)):$("",!0)])])}}};export{Qe as default};
