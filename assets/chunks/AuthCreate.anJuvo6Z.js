import{d as P,p as l,c,e as r,k as a,o as i,j as t,b as k,aD as A,N as y,aE as D,a0 as u,n as E,P as j}from"./framework.BoVd_Pm6.js";import{p as g,a as B,C as N,A as S,S as z,j as T,E as U}from"./components.C212Cyus.js";import"./theme.D819OjSK.js";import{_ as V}from"./AuthDerive.vue_vue_type_script_setup_true_lang.0x_j-dx4.js";import"./usePassKeys.qPtVqLFc.js";const M={class:"flex flex-wrap justify-center gap-2"},R={key:1,class:"button w-full flex justify-center items-center",type:"submit"},K=P({__name:"AuthCreate",emits:["back"],setup(G,{emit:H}){const d=g("deep");g("light");const{user:v,auth:C}=B(),o=l();l("");const p=l(""),s=l(null),{history:w,undo:$}=N(s);async function m(){s.value=await z.pair()}m();function f(){C(s.value,()=>j(async()=>{await T().user(s.value.pub).get("profile").get("name").once().then()||U("name",p.value||"Noname")}))}return(b,e)=>{var x;return a(v).is?r("",!0):(i(),c("div",{key:0,class:"flex flex-col items-center flex-1 p-2 bg-light-700 dark-bg-dark-200 rounded-3xl shadow-lg text-center p-4 transition duration-300ms ease-in",style:y({backgroundColor:a(d).hex(((x=s.value)==null?void 0:x.pub)||"")})},[e[11]||(e[11]=t("div",{class:"text-xl font-bold"},"Create a new account",-1)),e[12]||(e[12]=t("div",{class:"mb-4 mt-2"},"Tap the circle to generate a new key",-1)),s.value?(i(),k(a(S),{key:0,class:"cursor-pointer rounded-full shadow-xl border-8",pub:s.value.pub,size:200,style:y({borderColor:a(d).hex(s.value.pub)}),onClick:e[0]||(e[0]=n=>m())},null,8,["pub","style"])):r("",!0),A(t("input",{class:"p-4 rounded-2xl my-2 dark-bg-dark-200","onUpdate:modelValue":e[1]||(e[1]=n=>p.value=n),placeholder:"Enter your name or nickname",autocomplete:"username"},null,512),[[D,p.value]]),t("form",{class:"flex flex-col gap-4 mt-4",onSubmit:e[7]||(e[7]=u(n=>f(),["prevent"]))},[t("div",M,[t("button",{class:"gap-2 button items-center",type:"button",onClick:e[2]||(e[2]=u(n=>a(w).length>2?a($)():b.$emit("back"),["stop"]))},e[8]||(e[8]=[t("div",{class:"i-la-undo text-2xl"},null,-1),t("div",{class:"text-sm"},"Previous",-1)])),t("button",{class:"gap-2 button items-center",type:"button",onClick:e[3]||(e[3]=u(n=>m(),["stop"]))},e[9]||(e[9]=[t("div",{class:"i-la-dice text-2xl"},null,-1),t("div",{class:"text-sm"},"Random",-1)])),t("button",{class:E(["gap-2 button items-center",{active:o.value}]),type:"button",onClick:e[4]||(e[4]=u(n=>o.value=!o.value,["stop"]))},e[10]||(e[10]=[t("div",{class:"i-la-fingerprint text-2xl"},null,-1),t("div",{class:"text-sm"},"Derive",-1)]),2)]),o.value?(i(),k(V,{key:0,onPair:e[5]||(e[5]=n=>s.value=n),onLogin:e[6]||(e[6]=n=>f())})):r("",!0),s.value&&!a(v).is?(i(),c("button",R,"Create user")):r("",!0)],32)],4))}}});export{K as default};
