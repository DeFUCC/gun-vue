import{x as m,aU as B,p as P,h as R,c as r,e as i,k as n,o as d,J as v,j as t,aG as f,w as b,P as $,T as c,aH as z,a as M,aT as G}from"./framework.DOfjDz1B.js";import{u as H,C as j,aL as A}from"./components.BfL1cQFx.js";import{u as D}from"./useBackground.DH-ZD7cH.js";import"./theme.2Mja-hgs.js";const E={class:"flex gap-2"},F={key:0,class:"flex gap-2"},I={class:"button flex items-center gap-2",for:"publish"},O={__name:"RoomForm",emits:["room"],setup(J,{emit:x}){const k=x,{user:y}=H(),o=m(null),s=m(""),u=m(!0),{undo:g,redo:w,canRedo:C,canUndo:V}=B(o);async function p(){o.value=await j.pair()}P(()=>{p()});function N(){o.value=null,s.value="",u.value=!0}function T(){var l;A({pair:o.value,name:s.value,publish:u.value}),k("room",(l=o.value)==null?void 0:l.pub),N()}const U=R(()=>{var l;return D({pub:(l=o.value)==null?void 0:l.pub,size:1920})});return(l,e)=>n(y).pub?(d(),r("div",{class:"flex flex-col gap-4 w-full p-16 max-w-620px h-full transition items-center",key:o.value},[v(c,{name:"fade",mode:"out-in"},{default:b(()=>[t("div",{class:"bg-cover absolute top-0 left-0 right-0 bottom-0 -z-1",style:$({...U.value})},null,4)]),_:1}),e[9]||(e[9]=t("label",{for:"title"},"New room name",-1)),f(t("input",{class:"text-center p-2 rounded-xl dark-bg-dark-200",id:"title",d:"","onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),type:"text",autofocus:""},null,512),[[z,s.value]]),t("div",E,[n(V)?(d(),r("button",{key:0,class:"button",onClick:e[1]||(e[1]=a=>n(g)())},e[6]||(e[6]=[t("div",{class:"i-la-undo"},null,-1)]))):i("",!0),n(C)?(d(),r("button",{key:1,class:"button",onClick:e[2]||(e[2]=a=>n(w)())},e[7]||(e[7]=[t("div",{class:"i-la-redo"},null,-1)]))):i("",!0),t("button",{class:"button flex-1",onClick:e[3]||(e[3]=a=>p())},"Generate a new room key")]),v(c,{name:"fade",mode:"out-in",appear:""},{default:b(()=>[o.value&&s.value?(d(),r("div",F,[t("button",{class:"button flex-1",onClick:e[4]||(e[4]=a=>T())},"Add room"),t("label",I,[e[8]||(e[8]=M("Publish")),f(t("input",{id:"publish",type:"checkbox",switch:"","onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a)},null,512),[[G,u.value]])])])):i("",!0)]),_:1})])):i("",!0)}};export{O as default};
