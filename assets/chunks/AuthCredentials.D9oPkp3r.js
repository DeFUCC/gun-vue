import{p as F,h as $,c as l,e as m,k as s,o as a,G as y,r as j,j as t,t as L,N as q,n as k,w as U,T as D,F as W,B as K}from"./framework.ap9ZVjPY.js";import{K as A,a as M,L as J,N as Q,G,O as Y,R as z}from"./components.B1Gw4HcJ.js";import"./theme.BE1TR317.js";function H(){const{share:S,isSupported:h}=A();function u(o,r="Bookmark"){return{Win:{content:`[InternetShortcut]
URL=${o}`,extension:".url",mime:"application/internet-shortcut"},Mac:{content:`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>URL</key>
  <string>${o}</string>
</dict>
</plist>`,extension:".webloc",mime:"application/x-apple-plist"},Linux:{content:`[Desktop Entry]
Encoding=UTF-8
Type=Link
Name=${r}
URL=${o}`,extension:".desktop",mime:"application/x-desktop"}}}function i(o,r,p){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&h){S({title:r,text:p.startsWith("text/")?o:"Your key file",files:[new File([o],r,{type:p})]});return}const d=new Blob([o],{type:p}),n=URL.createObjectURL(d),v=document.createElement("a");v.href=n,v.download=r,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(n)}function b(o,r,p){const n=u(o)[r];!(n!=null&&n.content)||!(n!=null&&n.extension)||i(n.content,`${p||"account"}${n.extension}`,n.mime)}function x(o,r,p="png"){fetch(o).then(d=>d.blob()).then(d=>i(d,`${r||"account "+new Date().getDate()}.${p}`,d.type))}function R(o,r,p="webkey"){i(o,`${r||"account "+new Date().getDate()}.${p}`,"application/json")}async function w(o,r,p="png"){if(!h){console.log("Sharing not supported");return}try{const d=await fetch(o).then(v=>v.blob());if(!d){console.error("Failed to create blob from data URL");return}const n=new File([d],`${r||"avatar"}.${p}`,{type:p=="png"?"image/png":"image/svg+xml"});return S({title:r||"Gun-Vue avatar",files:[n]}).catch(v=>console.error("Share failed:",v))}catch(d){console.error("Share preparation failed:",d)}}return{saveLink:b,saveImage:x,saveJson:R,shareImage:w}}const X={key:0,class:"flex items-center bg-dark-100 bg-opacity-20 shadow-inset"},Z={key:0,class:"i-la-lock"},_={key:1,class:"i-la-unlock"},ee={class:"flex-1"},te={class:"text-sm"},se={class:"flex flex-wrap gap-2 p-2"},ne=["href"],le={key:1,class:"flex w-full justify-center mt-4"},ae={class:"p-2 flex flex-col w-full items-start",key:"text"},oe={class:"flex gap-2 items-center mx-4"},ie={key:0,class:"px-2"},re={key:1,class:"px-2"},ue={class:"p-2 flex flex-col items-center",key:"avatar"},de={class:"flex gap-2 items-center mt-4"},ve=["src"],ce={class:"p-4 flex flex-col gap-2",key:"link"},pe={class:"flex flex-wrap gap-2 items-center mx-4"},xe={key:0,class:"px-2"},me={key:1,class:"px-2"},ke=["onClick"],fe={class:"px-2"},be=["href"],ge={class:"p-4 flex flex-col gap-2 items-center",key:"qr"},Le={__name:"AuthCredentials",emits:["close"],setup(S,{emit:h}){const u=F("pass"),{user:i}=M();function b(f){u.value!=f?u.value=f:u.value=null}const{pass:x}=J(),{text:R,copy:w,copied:o,isSupported:r}=Q(),{share:p,isSupported:d}=A(),n=F(!0),v=$(()=>{var f;return n.value?(f=x==null?void 0:x.safe)==null?void 0:f.enc:JSON.stringify(i.pair())}),g=$(()=>n.value?x.links.pass:x.links.pair),C=$(()=>G({pub:i.pub,embed:v.value,svg:!1}));$(()=>G({pub:i.pub,embed:v.value,svg:!0,p3:!1}));const{saveImage:P,saveJson:E,saveLink:I,shareImage:V}=H(),O={Win:"Windows",Mac:"MacOS",Linux:"Linux"};return(f,e)=>{var T,N;return s(i).is?(a(),l("div",{class:"flex flex-wrap items-center pb-4 border-1 border-dark-100 border-opacity-10 mx-auto dark-bg-dark-200 rounded-xl p-4",key:s(i).is},[y(s(Y)),(N=(T=s(x))==null?void 0:T.safe)!=null&&N.enc?(a(),l("div",X,[t("div",{class:"flex flex-wrap w-34 items-center",style:q({color:n.value?"green":"red"})},[t("button",{class:"m-2 button text-2xl",onClick:e[0]||(e[0]=c=>n.value=!n.value)},[n.value?(a(),l("div",Z)):(a(),l("div",_))]),t("div",ee,[t("div",te,L(n.value?"Encrypted":"Plain Text"),1),e[15]||(e[15]=t("div",{class:"text-m"},"Key Pair",-1))])],4),t("div",se,[t("button",{class:k(["flex-1 button items-center",{active:u.value=="key"}]),onClick:e[1]||(e[1]=c=>b("key"))},e[16]||(e[16]=[t("div",{class:"i-la-envelope-open-text text-2xl"},null,-1),t("div",{class:"px-2"},"Key",-1)]),2),t("button",{class:k(["flex-1 button items-center",{active:u.value=="link"}]),href:g.value,target:"_blank",onClick:e[2]||(e[2]=c=>b("link"))},e[17]||(e[17]=[t("div",{class:"i-la-link text-2xl"},null,-1),t("div",{class:"px-2"},"Link",-1)]),10,ne),t("button",{class:k(["flex-1 button items-center",{active:u.value=="qr"}]),onClick:e[3]||(e[3]=c=>b("qr"))},e[18]||(e[18]=[t("div",{class:"i-la-qrcode text-2xl"},null,-1),t("div",{class:"px-2"},"QR",-1)]),2),t("button",{class:k(["flex-1 button items-center",{active:u.value=="avatar"}]),onClick:e[4]||(e[4]=c=>b("avatar"))},e[19]||(e[19]=[t("div",{class:"i-la-user-circle text-2xl"},null,-1),t("div",{class:"px-2"},"Avatar",-1)]),2)])])):m("",!0),u.value?(a(),l("div",le,[y(D,{name:"fade",mode:"out-in"},{default:U(()=>[u.value=="key"?(a(),l("div",ae,[t("div",oe,[s(r)?(a(),l("button",{key:0,class:"button items-center",onClick:e[5]||(e[5]=c=>s(w)(v.value))},[e[20]||(e[20]=t("div",{class:"i-la-copy text-2xl"},null,-1)),y(D,{name:"fade",mode:"out-in",appear:""},{default:U(()=>[s(o)?(a(),l("div",ie,"Copied!")):(a(),l("div",re,"Copy"))]),_:1})])):m("",!0),s(d)?(a(),l("button",{key:1,class:k(["button items-center",{active:u.value=="pass"}]),onClick:e[6]||(e[6]=c=>s(p)({title:s(i).name||"Gun-Vue keypair",text:v.value}))},e[21]||(e[21]=[t("div",{class:"i-la-share text-2xl"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):m("",!0),t("button",{class:"button items-center",onClick:e[7]||(e[7]=c=>s(E)(v.value,s(i).name))},e[22]||(e[22]=[t("div",{class:"i-la-download text-2xl"},null,-1),t("div",{class:"px-2"},"WebKey",-1)]))]),t("div",{class:k(["w-full p-4 text-sm flex-1 rounded-xl break-all select-all transition-4000",{"blur-lg hover-blur-0":!n.value}]),key:"text"},L(v.value),3)])):u.value=="avatar"?(a(),l("div",ue,[t("div",de,[t("button",{class:"button items-center",onClick:e[8]||(e[8]=c=>s(P)(C.value,s(i).name,"png"))},e[23]||(e[23]=[t("div",{class:"i-la-download text-2xl"},null,-1),t("div",{class:"px-2"},"PNG",-1)])),t("button",{class:"button items-center",onClick:e[9]||(e[9]=c=>s(P)(f.svg,s(i).name,"svg"))},e[24]||(e[24]=[t("div",{class:"i-la-download text-2xl"},null,-1),t("div",{class:"px-2"},"SVG",-1)])),s(d)?(a(),l("button",{key:0,class:"button items-center",onClick:e[10]||(e[10]=c=>s(V)(C.value,s(i).name))},e[25]||(e[25]=[t("div",{class:"i-la-share text-2xl"},null,-1),t("div",{class:"px-1"},"Share",-1)]))):m("",!0)]),t("img",{class:"cursor-pointer shadow-lg rounded-full hover-lightness-120 hover-shadow-2xl -hover-translate-y-1 transition active-translate-y-1",src:C.value,onClick:e[11]||(e[11]=c=>s(P)(C.value,s(i).name))},null,8,ve),e[26]||(e[26]=t("div",{class:"text-sm op-50 text-center m-4 max-w-50"},"Click the image to download the PNG file with your key embedded. You can use to login later. ",-1))])):u.value=="link"?(a(),l("div",ce,[t("div",pe,[s(r)?(a(),l("button",{key:0,class:"button items-center",onClick:e[12]||(e[12]=c=>s(w)(g.value))},[e[27]||(e[27]=t("div",{class:"i-la-copy text-2xl"},null,-1)),y(D,{name:"fade",mode:"out-in",appear:""},{default:U(()=>[s(o)?(a(),l("div",xe,"Copied!")):(a(),l("div",me,"Copy"))]),_:1})])):m("",!0),s(d)?(a(),l("button",{key:1,class:k(["button items-center",{active:u.value=="pass"}]),onClick:e[13]||(e[13]=c=>s(p)({title:s(i).name||"Gun-Vue Login link",text:g.value}))},e[28]||(e[28]=[t("div",{class:"i-la-share text-2xl"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):m("",!0),(a(),l(W,null,K(O,(c,B)=>t("button",{class:"button items-center",key:B,onClick:ye=>s(I)(g.value,B,s(i).name)},[e[29]||(e[29]=t("div",{class:"i-la-download text-2xl"},null,-1)),t("div",fe,L(c),1)],8,ke)),64))]),t("a",{class:"m-2 button items-center break-all",href:g.value,target:"_blank",onClick:e[14]||(e[14]=c=>b("links"))},[e[30]||(e[30]=t("div",{class:"i-la-link text-2xl"},null,-1)),t("div",{class:k(["px-2 font-normal font-mono text-xs transition-4000",{"blur-lg hover-blur-0":!n.value}])},L(g.value),3)],8,be)])):u.value=="qr"?(a(),l("div",ge,[y(s(z),{class:k(["max-w-600px transition-4000",{"blur-lg hover-blur-0":!n.value}]),data:n.value?s(x).links.pass:s(x).links.pair},null,8,["class","data"]),e[31]||(e[31]=t("div",{class:"text-sm op-50 text-center mx-4 max-w-80"},"Make a screenshot to save the QR code for logging in later.",-1))])):m("",!0)]),_:1})])):m("",!0),j(f.$slots,"default")])):m("",!0)}}};export{Le as default};
