import{aS as R,a as B,i as P,aN as L,q as N,aT as S,o as $,aU as z,aW as F}from"./components.C59ew70n.js";import{u as H}from"./useMd.C82x397v.js";import{f as M}from"./useRooms.B9xMMSOX.js";import{u as T}from"./useBackground.CW-HP0pn.js";import"./theme.C9m0d1sm.js";import{h as p,ah as U,c as r,o,j as e,r as V,b as v,k as s,G as b,e as j,t as x,F as A,B as C,N as G}from"./framework.DADfZotI.js";const q={class:"flex flex-col items-stretch"},D={class:"flex flex-wrap items-center gap-8"},E={class:"flex flex-col flex-auto",style:{flex:"1 0"}},O={class:"flex gap-2 items-center"},W={class:"font-bold text-2xl"},I={key:0,class:"i-la-star"},J={key:1,class:"i-la-star-solid"},K={class:"text-md"},Q={class:"flex items-center flex-wrap"},X={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},Y={class:"relative"},Z={class:"flex items-center"},ee=["innerHTML"],se={class:"px-4 max-w-55ch"},de={__name:"RoomProfile",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>R}},emits:["rooms","browse","user"],setup(_,{emit:g}){const n=_,h=g,{user:k}=B(),a=p(()=>n.pub?n.pub:P.pub),{room:l,leaveRoom:te,updateRoomProfile:oe,enterRoom:le}=L(a.value),y=H();U({name:!1,description:!1,text:!1}),N("deep");const w=p(()=>T({pub:a.value,size:1200,attachment:"local"}));return(u,t)=>{var c,d,m;return o(),r("div",q,[e("div",{class:"p-4 bg-cover relative flex flex-col items-center w-full",style:G({...w.value})},[e("div",D,[(o(),v(s(S),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:a.value,key:a.value},null,8,["pub"])),e("div",E,[e("div",O,[e("div",W,x(s(l).profile.name),1),t[3]||(t[3]=e("div",{class:"flex-1"},null,-1)),(c=s(k))!=null&&c.is?(o(),r("button",{key:0,class:"button z-100",onPointerdown:t[0]||(t[0]=i=>s(M)(a.value))},[s(l).isFavourite?(o(),r("div",J)):(o(),r("div",I))],32)):j("",!0)]),e("div",K,x(s(l).profile.description),1),e("div",Q,[t[4]||(t[4]=e("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(o(!0),r(A,null,C(s(l).hosts,(i,f)=>(o(),r("div",{class:"p-2 flex flex-col items-start gap-2",key:f},[b(s($),{pub:f,selectable:!0},null,8,["pub"])]))),128))]),b(s(z),{pub:a.value,onRoom:t[1]||(t[1]=i=>h("browse","/"))},null,8,["pub"])])])],4),V(u.$slots,"default"),e("div",X,[e("div",Y,[e("div",Z,[e("div",{class:"p-4 prose max-w-65ch",innerHTML:s(y).render(((d=s(l).profile)==null?void 0:d.text)||"")},null,8,ee)])]),e("div",se,[(o(),v(s(F),{state:"offline",onUser:t[2]||(t[2]=i=>u.$emit("user",i)),roomPub:(m=s(l))==null?void 0:m.pub,key:s(l).pub},null,8,["roomPub"]))])])])}}};export{de as default};
