import{d as $,p as o,ai as A,c,e as r,k as n,o as i,j as t,b as x,N as k,aD as D,a0 as u,n as E,aE as j,P as B}from"./framework.BoVd_Pm6.js";import{p as y,a as N,C as S,A as z,S as T,j as U,E as V}from"./components.BStd8ry_.js";import"./theme.uJOwaQTb.js";import{_ as M}from"./AuthDerive.vue_vue_type_script_setup_true_lang.ZQ0a7XD_.js";import"./usePassKeys.CTxM7HAV.js";const R={class:"flex flex-wrap justify-center my-4 gap-2"},G={key:1,class:"button w-full flex justify-center items-center",type:"submit"},O=$({__name:"AuthCreate",emits:["back"],setup(H,{emit:q}){const d=y("deep");y("light");const{user:v,auth:g}=N(),l=o();o(""),A({});const p=o(""),s=o(null),{history:C,undo:w}=S(s);async function m(){s.value=await T.pair()}m();function P(){g(s.value,()=>B(async()=>{await U().user(s.value.pub).get("profile").get("name").once().then()||V("name",p.value||"Noname")}))}return(f,e)=>{var b;return n(v).is?r("",!0):(i(),c("div",{key:0,class:"flex flex-col items-center flex-1 p-2 bg-light-700 dark-bg-dark-200 rounded-3xl shadow-lg text-center p-4 transition duration-300ms ease-in",style:k({backgroundColor:n(d).hex(((b=s.value)==null?void 0:b.pub)||"")})},[e[10]||(e[10]=t("div",{class:"text-xl font-bold"},"Create a new account",-1)),e[11]||(e[11]=t("div",{class:"mb-4 mt-2"},"Tap the circle to generate a new key",-1)),s.value?(i(),x(n(z),{key:0,class:"cursor-pointer rounded-full shadow-xl border-8",pub:s.value.pub,size:200,style:k({borderColor:n(d).hex(s.value.pub)}),onClick:e[0]||(e[0]=a=>m())},null,8,["pub","style"])):r("",!0),t("form",{class:"flex flex-col",onSubmit:e[6]||(e[6]=u(a=>P(),["prevent"]))},[t("div",R,[t("button",{class:"gap-2 button items-center",type:"button",onClick:e[1]||(e[1]=u(a=>n(C).length>2?n(w)():f.$emit("back"),["stop"]))},e[7]||(e[7]=[t("div",{class:"i-la-undo text-2xl"},null,-1),t("div",{class:"text-sm"},"Previous",-1)])),t("button",{class:"gap-2 button items-center",type:"button",onClick:e[2]||(e[2]=u(a=>m(),["stop"]))},e[8]||(e[8]=[t("div",{class:"i-la-dice text-2xl"},null,-1),t("div",{class:"text-sm"},"Random",-1)])),t("button",{class:E(["gap-2 button items-center",{active:l.value}]),type:"button",onClick:e[3]||(e[3]=u(a=>l.value=!l.value,["stop"]))},e[9]||(e[9]=[t("div",{class:"i-la-fingerprint text-2xl"},null,-1),t("div",{class:"text-sm"},"Derive",-1)]),2)]),l.value?(i(),x(M,{key:0,onPair:e[4]||(e[4]=a=>s.value=a)})):r("",!0),D(t("input",{class:"p-4 rounded-2xl my-2 dark-bg-dark-200","onUpdate:modelValue":e[5]||(e[5]=a=>p.value=a),placeholder:"Enter your name or nickname",autocomplete:"username"},null,512),[[j,p.value]]),s.value&&!n(v).is?(i(),c("button",G,"Authenticate")):r("",!0)],32)],4))}}});export{O as default};
