import{p as F,h as L,c as i,e as c,k as s,o as a,j as t,G as g,r as V,t as C,N as q,n as b,w as P,T as U,F as J,B as I}from"./framework.BoVd_Pm6.js";import{G as E,a as M,H as W,I as Q,D as Y,J as z,K}from"./components.C212Cyus.js";import"./theme.D819OjSK.js";function H(){const{share:$,isSupported:S}=E();function r(l,n="Bookmark"){return{Win:{content:`[InternetShortcut]
URL=${l}`,extension:".url",mime:"application/internet-shortcut"},Mac:{content:`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>URL</key>
  <string>${l}</string>
</dict>
</plist>`,extension:".webloc",mime:"application/x-apple-plist"},Linux:{content:`[Desktop Entry]
Encoding=UTF-8
Type=Link
Name=${n}
URL=${l}`,extension:".desktop",mime:"application/x-desktop"}}}function d(l,n,u){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&S){$({title:n,text:u.startsWith("text/")?l:"Your key file",files:[new File([l],n,{type:u})]});return}const k=new Blob([l],{type:u}),o=URL.createObjectURL(k),p=document.createElement("a");p.href=o,p.download=n,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(o)}return{saveLink:(l,n,u)=>{const o=r(l)[n];!(o!=null&&o.content)||!(o!=null&&o.extension)||d(o.content,`${u||"account"}${o.extension}`,o.mime)},savePng:(l,n)=>{fetch(l).then(u=>u.blob()).then(u=>d(u,`${n||"avatar"}.png`,u.type))},saveJson:(l,n)=>{d(JSON.stringify(l),`${n||"account"}.json`,"application/json")},sharePng:async(l,n)=>{if(!S){console.log("Sharing not supported");return}try{const u=await fetch(l).then(o=>o.blob());if(!u){console.error("Failed to create blob from data URL");return}const k=new File([u],`${n||"avatar"}.png`,{type:"image/png"});return $({title:n||"Gun-Vue avatar",files:[k]}).catch(o=>console.error("Share failed:",o))}catch(u){console.error("Share preparation failed:",u)}}}}const X={key:0,class:"flex p-4 items-center bg-dark-100 bg-opacity-20 mt-2 shadow-inset"},Z={key:0,class:"i-la-lock"},_={key:1,class:"i-la-unlock"},ee={class:"text-sm"},te={class:"flex flex-wrap gap-2 p-2"},se=["href"],ne={key:1,class:"flex w-full justify-center mt-4"},le={class:"p-2 flex flex-col w-full items-start",key:"text"},oe={class:"flex gap-2 items-center mx-4"},ie={key:0,class:"px-2"},ae={key:1,class:"px-2"},re={class:"w-full p-4 text-sm flex-1 rounded-xl break-all select-all",key:"text"},ue={class:"p-2 flex flex-col items-center",key:"png"},de={class:"flex gap-2 items-center mt-4"},ve=["src"],ce={class:"p-4 flex flex-col gap-2",key:"link"},pe={class:"flex flex-wrap gap-2 items-center mx-4"},me={key:0,class:"px-2"},ke={key:1,class:"px-2"},xe=["onClick"],fe={class:"px-2"},be=["href"],ye={class:"px-2 font-normal font-mono text-xs"},ge={class:"p-4 flex flex-col gap-2 items-center",key:"qr"},he={__name:"AuthCredentials",emits:["close"],setup($,{emit:S}){const r=F("pass"),{user:d}=M();function l(x){r.value!=x?r.value=x:r.value=null}const{pass:n}=W(),{text:u,copy:k,copied:o,isSupported:p}=Q(),{share:T,isSupported:h}=E(),m=F(!0),y=L(()=>{var x;return m.value?(x=n==null?void 0:n.safe)==null?void 0:x.enc:JSON.stringify(d.pair())}),f=L(()=>m.value?n.links.pass:n.links.pair),w=L(()=>Y({pub:d.pub,embed:y.value})),{savePng:D,saveJson:G,saveLink:j,sharePng:A}=H(),O={Win:"Windows",Mac:"MacOS",Linux:"Linux"};return(x,e)=>{var R,N;return s(d).is?(a(),i("div",{class:"flex flex-col items-stretch pb-4 border-1 border-dark-100 border-opacity-10 max-w-120 mx-auto dark-bg-dark-200",key:s(d).is},[e[30]||(e[30]=t("div",{class:"mt-4 mx-6"},"Please make sure to safely store your cryptographic keypair to be able to use it again later",-1)),g(s(z)),(N=(R=s(n))==null?void 0:R.safe)!=null&&N.enc?(a(),i("div",X,[t("div",{class:"flex flex-col w-34 items-center",style:q({color:m.value?"green":"red"})},[t("button",{class:"m-2 button text-2xl",onClick:e[0]||(e[0]=v=>m.value=!m.value)},[m.value?(a(),i("div",Z)):(a(),i("div",_))]),t("div",ee,C(m.value?"Encrypted":"Plain Text"),1),e[14]||(e[14]=t("div",{class:"text-m"},"Key Pair",-1))],4),t("div",te,[t("button",{class:b(["button items-center",{active:r.value=="key"}]),onClick:e[1]||(e[1]=v=>l("key"))},e[15]||(e[15]=[t("div",{class:"i-la-envelope-open-text"},null,-1),t("div",{class:"px-2"},"Text",-1)]),2),t("button",{class:b(["button items-center",{active:r.value=="link"}]),href:f.value,target:"_blank",onClick:e[2]||(e[2]=v=>l("link"))},e[16]||(e[16]=[t("div",{class:"i-la-link"},null,-1),t("div",{class:"px-2"},"Link",-1)]),10,se),t("button",{class:b(["button items-center",{active:r.value=="qr"}]),onClick:e[3]||(e[3]=v=>l("qr"))},e[17]||(e[17]=[t("div",{class:"i-la-qrcode"},null,-1),t("div",{class:"px-2"},"QR",-1)]),2),t("button",{class:b(["button items-center",{active:r.value=="png"}]),onClick:e[4]||(e[4]=v=>l("png"))},e[18]||(e[18]=[t("div",{class:"i-la-user-circle"},null,-1),t("div",{class:"px-2"},"PNG",-1)]),2)])])):c("",!0),r.value?(a(),i("div",ne,[g(U,{name:"fade",mode:"out-in"},{default:P(()=>[r.value=="key"?(a(),i("div",le,[t("div",oe,[s(p)?(a(),i("button",{key:0,class:"button items-center",onClick:e[5]||(e[5]=v=>s(k)(y.value))},[e[19]||(e[19]=t("div",{class:"i-la-copy"},null,-1)),g(U,{name:"fade",mode:"out-in",appear:""},{default:P(()=>[s(o)?(a(),i("div",ie,"Copied!")):(a(),i("div",ae,"Copy"))]),_:1})])):c("",!0),s(h)?(a(),i("button",{key:1,class:b(["button items-center",{active:r.value=="pass"}]),onClick:e[6]||(e[6]=v=>s(T)({title:s(d).name||"Gun-Vue keypair",text:y.value}))},e[20]||(e[20]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):c("",!0),t("button",{class:"button items-center",onClick:e[7]||(e[7]=v=>s(G)(y.value,s(d).name))},e[21]||(e[21]=[t("div",{class:"i-la-download"},null,-1),t("div",{class:"px-2"},"Download",-1)]))]),t("div",re,C(y.value),1)])):r.value=="png"?(a(),i("div",ue,[t("div",de,[t("button",{class:"button items-center",onClick:e[8]||(e[8]=v=>s(D)(w.value,s(d).name))},e[22]||(e[22]=[t("div",{class:"i-la-download"},null,-1),t("div",{class:"px-2"},"Download",-1)])),s(h)?(a(),i("button",{key:0,class:"button items-center",onClick:e[9]||(e[9]=v=>s(A)(w.value,s(d).name))},e[23]||(e[23]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]))):c("",!0)]),t("img",{class:"cursor-pointer shadow-lg rounded-full hover-lightness-120 hover-shadow-2xl -hover-translate-y-1 transition active-translate-y-1",src:w.value,onClick:e[10]||(e[10]=v=>s(D)(w.value,s(d).name))},null,8,ve),e[24]||(e[24]=t("div",{class:"text-sm op-50 text-center m-4 max-w-50"},"Click the image to download the PNG file with your key embedded. You can use to login later. ",-1))])):r.value=="link"?(a(),i("div",ce,[t("div",pe,[s(p)?(a(),i("button",{key:0,class:"button items-center",onClick:e[11]||(e[11]=v=>s(k)(f.value))},[e[25]||(e[25]=t("div",{class:"i-la-copy"},null,-1)),g(U,{name:"fade",mode:"out-in",appear:""},{default:P(()=>[s(o)?(a(),i("div",me,"Copied!")):(a(),i("div",ke,"Copy"))]),_:1})])):c("",!0),s(h)?(a(),i("button",{key:1,class:b(["button items-center",{active:r.value=="pass"}]),onClick:e[12]||(e[12]=v=>s(T)({title:s(d).name||"Gun-Vue Login link",text:f.value}))},e[26]||(e[26]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):c("",!0),(a(),i(J,null,I(O,(v,B)=>t("button",{class:"button items-center",key:B,onClick:we=>s(j)(f.value,B,s(d).name)},[e[27]||(e[27]=t("div",{class:"i-la-download"},null,-1)),t("div",fe,C(v),1)],8,xe)),64))]),t("a",{class:"m-2 button items-center break-all",href:f.value,target:"_blank",onClick:e[13]||(e[13]=v=>l("links"))},[e[28]||(e[28]=t("div",{class:"i-la-link"},null,-1)),t("div",ye,C(f.value),1)],8,be)])):r.value=="qr"?(a(),i("div",ge,[g(s(K),{class:"max-w-600px",data:m.value?s(n).links.pass:s(n).links.pair},null,8,["data"]),e[29]||(e[29]=t("div",{class:"text-sm op-50 text-center mx-4 max-w-80"},"Make a screenshot to save the QR code for logging in later.",-1))])):c("",!0)]),_:1})])):c("",!0),V(x.$slots,"default")])):c("",!0)}}};export{he as default};
