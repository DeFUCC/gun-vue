const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/AccountHome.BACt0_VG.js","assets/chunks/useAccount.C3JQGb8K.js","assets/chunks/framework.DOfjDz1B.js","assets/chunks/useProjects.CrDMTMaQ.js","assets/chunks/useBackground.DH-ZD7cH.js","assets/chunks/theme.2Mja-hgs.js","assets/chunks/AccountPetname.Bwjl4YUy.js","assets/chunks/AccountReactions.DHtH03oV.js","assets/chunks/useReactions.BNnHR-_c.js","assets/chunks/AccountSelect.Cj_B6U9T.js","assets/chunks/useGuests.Jfjf2Vvq.js","assets/chunks/AccountProfile.BG_S-7PY.js","assets/chunks/AccountBadge.fcJC-fRS.js","assets/chunks/AccountAvatar.CURNq69G.js","assets/chunks/useAvatar.CBKfExWp.js","assets/chunks/AuthForm.H_ADJkoe.js","assets/chunks/english.MxR0N9Hb.js","assets/chunks/useAuth.DRiKlp2X.js","assets/chunks/decode.BnXHfSSi.js","assets/chunks/index.PUUcqk1C.js","assets/chunks/AuthCreate.BQyvo7_i.js","assets/chunks/AuthPanel.Z-ZPlHBc.js","assets/chunks/AuthCredentials.C8-lF6ot.js","assets/chunks/QrShow.ZWH-saa8.js","assets/chunks/ChatInput.shUQBTkU.js","assets/chunks/ChatMessage.goklTUYa.js","assets/chunks/useMd.CWC-_XYj.js","assets/chunks/useMates.DCRW0Ss7.js","assets/chunks/ChatMessages.bHHxUS5f.js","assets/chunks/ChatTopics.GYfB7i0l.js","assets/chunks/ChatRoom.D_EFg8J6.js","assets/chunks/DictBy.BVigu_l0.js","assets/chunks/DictPanel.OUQEqzvG.js","assets/chunks/langs.CLi14XB-.js","assets/chunks/DictAuthors.D5bH1JxM.js","assets/chunks/DictDefCard.B0_HMi7Y.js","assets/chunks/DictDefList.CBOJwk88.js","assets/chunks/DictDefPage.CtSblt3v.js","assets/chunks/DictWordCard.B7GqzTby.js","assets/chunks/DictWordList.UMP_VqDv.js","assets/chunks/DictWordPage.z96uk5ka.js","assets/chunks/DictLinkList.B5WveRb3.js","assets/chunks/DictLinkButton.BGJ1MFcW.js","assets/chunks/EmbedYoutube.mIEP3zWn.js","assets/chunks/TorrentUpload.DScqz-hI.js","assets/chunks/TorrentDownload.BiaQ2XnI.js","assets/chunks/FileCard.B8NlJbSt.js","assets/chunks/FileHash.8gmTQYiM.js","assets/chunks/FileShare.B4OmtSB_.js","assets/chunks/FileInfo.WNhAviV7.js","assets/chunks/FileList.CwNXcilW.js","assets/chunks/FormLink.BGXERyy5.js","assets/chunks/FormPicture.CKJsnWAb.js","assets/chunks/FormText.BZxTCI8o.js","assets/chunks/FormYoutube.zCoQMW5D.js","assets/chunks/FormTitle.BDNkvh0B.js","assets/chunks/GiftCard.D0tVVz1I.js","assets/chunks/useGift.25WCymDI.js","assets/chunks/composables.BdOMFBpf.js","assets/chunks/useProject.3mgXu__6.js","assets/chunks/GiftList.D6wadGLo.js","assets/chunks/useGifts.C77v3Jtb.js","assets/chunks/GiftForm.s6xzeZCJ.js","assets/chunks/currencies.G9pkebxG.js","assets/chunks/GiftButton.Bid-98ig.js","assets/chunks/GiftWallets.B3PT2NjU.js","assets/chunks/GiftWallet.Dbc5IMq4.js","assets/chunks/GiftStatus.DADNWztp.js","assets/chunks/GunGraph.C1-hyZrU.js","assets/chunks/GunRelay.C0UPVEPb.js","assets/chunks/GunRelayList.Bpmbxczp.js","assets/chunks/GunTools.CKmQZlhu.js","assets/chunks/GunSettings.CrVl4kwn.js","assets/chunks/MateButton.DfODzpQR.js","assets/chunks/MateList.CnPTZpyK.js","assets/chunks/MateLink.DLwid6-5.js","assets/chunks/PostCard.n2mrSogQ.js","assets/chunks/useZip.cnH7bZAf.js","assets/chunks/PostForm.CWlQwgvd.js","assets/chunks/PostGraph.BpT8orzt.js","assets/chunks/force-graph.-gFrwpU5.js","assets/chunks/PostLine.CYA8Qb1F.js","assets/chunks/PostLink.QwjjN0M-.js","assets/chunks/PostList.dJW1KVOp.js","assets/chunks/usePosts.CXt9QA4u.js","assets/chunks/PostPage.OVIUDmvW.js","assets/chunks/PostActionStar.m8DA65nK.js","assets/chunks/PostActionUpdate.GPySI7FS.js","assets/chunks/PostActionBan.2wlm1maa.js","assets/chunks/PostActionReact.CX45OiKs.js","assets/chunks/PostReactionButton.DNoFD4JG.js","assets/chunks/PostReactionTabs.iQx1k7N9.js","assets/chunks/MessageExchange.DzgMMqw2.js","assets/chunks/useMessages.ChmRddHG.js","assets/chunks/MessagesCount.DKGa0Xi8.js","assets/chunks/MessageList.CNr0m4WB.js","assets/chunks/ProjectList.C9acWIkw.js","assets/chunks/ProjectForm.BqJ1A3vh.js","assets/chunks/ProjectCard.ClWl9QoL.js","assets/chunks/ProjectPage.DcfJEBcv.js","assets/chunks/ProjectFunding.C1mG3xPj.js","assets/chunks/QrLoad.Cxu9W-t2.js","assets/chunks/QrShare.gh8IgOGf.js","assets/chunks/RoomCard.CbLSH1yy.js","assets/chunks/useRoomLogo.BYrIN1L9.js","assets/chunks/RoomFeature.C0bNtj_s.js","assets/chunks/RoomFeatureIcon.BCTaH0ZS.js","assets/chunks/RoomForm.eudaaf9d.js","assets/chunks/RoomLogo.DxD48nP1.js","assets/chunks/RoomList.BZFBW-Mt.js","assets/chunks/useRooms.BrDJHFg_.js","assets/chunks/RoomPage.G_F4mI-H.js","assets/chunks/RoomProfile.Bf2MhXtj.js","assets/chunks/RoomButton.BLqsigUt.js","assets/chunks/RoomActions.BBmcV61i.js","assets/chunks/GuestList.By-lgqmq.js","assets/chunks/SpacePlane.CvZRtQZe.js","assets/chunks/SpaceGuest.Cw2RU3xn.js","assets/chunks/SpaceArrow.C3XlqBbt.js","assets/chunks/SpaceDraw.CcOXTthP.js","assets/chunks/SpaceStatus.By28ewyf.js","assets/chunks/UiButton.BBDBmm4t.js","assets/chunks/UiLayer.th8HOX2j.js","assets/chunks/UiLink.Dx5Dbalw.js","assets/chunks/UiModal.DTN26uWU.js","assets/chunks/UiPanel.M4RbJ_K4.js","assets/chunks/UiDark.BWPeYNOy.js","assets/chunks/UiComponents.CKaTC6fP.js","assets/chunks/UserAvatar.C2nCVscQ.js","assets/chunks/UserGraph.DvRMTPa2.js","assets/chunks/UserHome.BaQiOAaV.js","assets/chunks/UserIcon.BXM3eKkm.js","assets/chunks/UserListOverlay.DYEgNqdX.js","assets/chunks/UserProfile.BcARXNnq.js","assets/chunks/UserProfileField.yKgvL7vX.js","assets/chunks/UserRooms.cU3achfm.js"])))=>i.map(i=>d[i]);
var Af=Object.defineProperty;var Sf=(e,t,r)=>t in e?Af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Zt=(e,t,r)=>Sf(e,typeof t!="symbol"?t+"":t,r);import"./theme.2Mja-hgs.js";import{V as J,W as Z,x as Yt,ai as Re,aj as xt,h as Lt,ak as Cf,al as Df,z as nn,B as Vr,am as Tf,R as Pu,an as Ff,y as Of,ao as If,ap as Pf,aq as Lf,ar as Rf,as as Bf,at as Mf}from"./framework.DOfjDz1B.js";const Lu=J(()=>Z(()=>import("./AccountHome.BACt0_VG.js"),__vite__mapDeps([0,1,2,3,4,5]))),Ru=J(()=>Z(()=>import("./AccountPetname.Bwjl4YUy.js"),__vite__mapDeps([6,2,1,5]))),Bu=J(()=>Z(()=>import("./AccountReactions.DHtH03oV.js"),__vite__mapDeps([7,2,8,5]))),Mu=J(()=>Z(()=>import("./AccountSelect.Cj_B6U9T.js"),__vite__mapDeps([9,2,10,1,5]))),Nu=J(()=>Z(()=>import("./AccountProfile.BG_S-7PY.js"),__vite__mapDeps([11,1,2,5]))),ju=J(()=>Z(()=>import("./AccountBadge.fcJC-fRS.js"),__vite__mapDeps([12,5,2]))),$u=J(()=>Z(()=>import("./AccountAvatar.CURNq69G.js"),__vite__mapDeps([13,14,2,5]))),zu=J(()=>Z(()=>import("./AuthForm.H_ADJkoe.js"),__vite__mapDeps([15,2,16,17,18,19,5]))),Uu=J(()=>Z(()=>import("./AuthCreate.BQyvo7_i.js"),__vite__mapDeps([20,2,16,5]))),Hu=J(()=>Z(()=>import("./AuthPanel.Z-ZPlHBc.js"),__vite__mapDeps([21,5,2,4,22,17,16,18,19,23]))),qu=J(()=>Z(()=>import("./AuthCredentials.C8-lF6ot.js"),__vite__mapDeps([22,2,17,16,18,19,23,5]))),Vu=J(()=>Z(()=>import("./ChatInput.shUQBTkU.js"),__vite__mapDeps([24,2,5]))),Wu=J(()=>Z(()=>import("./ChatMessage.goklTUYa.js"),__vite__mapDeps([25,2,26,27,5]))),Gu=J(()=>Z(()=>import("./ChatMessages.bHHxUS5f.js"),__vite__mapDeps([28,2,25,26,27,5]))),Zu=J(()=>Z(()=>import("./ChatTopics.GYfB7i0l.js"),__vite__mapDeps([29,2,5]))),Ku=J(()=>Z(()=>import("./ChatRoom.D_EFg8J6.js"),__vite__mapDeps([30,5,2,4]))),Ju=J(()=>Z(()=>import("./DictBy.BVigu_l0.js"),__vite__mapDeps([31,2,5]))),Yu=J(()=>Z(()=>import("./DictPanel.OUQEqzvG.js"),__vite__mapDeps([32,2,33,5]))),Xu=J(()=>Z(()=>import("./DictAuthors.D5bH1JxM.js"),__vite__mapDeps([34,5,2]))),Qu=J(()=>Z(()=>import("./DictDefCard.B0_HMi7Y.js"),__vite__mapDeps([35,2,33,5]))),tc=J(()=>Z(()=>import("./DictDefList.CBOJwk88.js"),__vite__mapDeps([36,2,33,5]))),ec=J(()=>Z(()=>import("./DictDefPage.CtSblt3v.js"),__vite__mapDeps([37,2,33,5]))),rc=J(()=>Z(()=>import("./DictWordCard.B7GqzTby.js"),__vite__mapDeps([38,2,5]))),nc=J(()=>Z(()=>import("./DictWordList.UMP_VqDv.js"),__vite__mapDeps([39,2,5]))),ic=J(()=>Z(()=>import("./DictWordPage.z96uk5ka.js"),__vite__mapDeps([40,2,5]))),sc=J(()=>Z(()=>import("./DictLinkList.B5WveRb3.js"),__vite__mapDeps([41,2,5]))),oc=J(()=>Z(()=>import("./DictLinkButton.BGJ1MFcW.js"),__vite__mapDeps([42,2,5]))),ac=J(()=>Z(()=>import("./EmbedYoutube.mIEP3zWn.js"),__vite__mapDeps([43,2]))),uc=J(()=>Z(()=>import("./TorrentUpload.DScqz-hI.js"),__vite__mapDeps([44,2,5]))),cc=J(()=>Z(()=>import("./TorrentDownload.BiaQ2XnI.js"),__vite__mapDeps([45,5,2]))),lc=J(()=>Z(()=>import("./FileCard.B8NlJbSt.js"),__vite__mapDeps([46,2,5]))),hc=J(()=>Z(()=>import("./FileHash.8gmTQYiM.js"),__vite__mapDeps([47,2,5]))),fc=J(()=>Z(()=>import("./FileShare.B4OmtSB_.js"),__vite__mapDeps([48,2,5]))),dc=J(()=>Z(()=>import("./FileInfo.WNhAviV7.js"),__vite__mapDeps([49,2,5]))),pc=J(()=>Z(()=>import("./FileList.CwNXcilW.js"),__vite__mapDeps([50,2,5]))),mc=J(()=>Z(()=>import("./FormLink.BGXERyy5.js"),__vite__mapDeps([51,2,5]))),gc=J(()=>Z(()=>import("./FormPicture.CKJsnWAb.js"),__vite__mapDeps([52,5,2]))),bc=J(()=>Z(()=>import("./FormText.BZxTCI8o.js"),__vite__mapDeps([53,2,26,5]))),_c=J(()=>Z(()=>import("./FormYoutube.zCoQMW5D.js"),__vite__mapDeps([54,2,5]))),yc=J(()=>Z(()=>import("./FormTitle.BDNkvh0B.js"),__vite__mapDeps([55,2]))),wc=J(()=>Z(()=>import("./GiftCard.D0tVVz1I.js"),__vite__mapDeps([56,2,57,58,59,5]))),vc=J(()=>Z(()=>import("./GiftList.D6wadGLo.js"),__vite__mapDeps([60,61,58,2,5]))),xc=J(()=>Z(()=>import("./GiftForm.s6xzeZCJ.js"),__vite__mapDeps([62,2,10,1,57,58,59,3,5,63]))),kc=J(()=>Z(()=>import("./GiftButton.Bid-98ig.js"),__vite__mapDeps([64,5,2]))),Ec=J(()=>Z(()=>import("./GiftWallets.B3PT2NjU.js"),__vite__mapDeps([65,2,5,63]))),Ac=J(()=>Z(()=>import("./GiftWallet.Dbc5IMq4.js"),__vite__mapDeps([66,2]))),Sc=J(()=>Z(()=>import("./GiftStatus.DADNWztp.js"),__vite__mapDeps([67,2]))),Cc=J(()=>Z(()=>import("./GunGraph.C1-hyZrU.js"),__vite__mapDeps([68,2,5]))),Dc=J(()=>Z(()=>import("./GunRelay.C0UPVEPb.js"),__vite__mapDeps([69,2,5]))),Tc=J(()=>Z(()=>import("./GunRelayList.Bpmbxczp.js"),__vite__mapDeps([70,2,5]))),Fc=J(()=>Z(()=>import("./GunTools.CKmQZlhu.js"),__vite__mapDeps([71,5,2]))),Oc=J(()=>Z(()=>import("./GunSettings.CrVl4kwn.js"),__vite__mapDeps([72,2,5]))),Ic=J(()=>Z(()=>import("./MateButton.DfODzpQR.js"),__vite__mapDeps([73,2,27,5]))),Pc=J(()=>Z(()=>import("./MateList.CnPTZpyK.js"),__vite__mapDeps([74,2,27,5]))),Lc=J(()=>Z(()=>import("./MateLink.DLwid6-5.js"),__vite__mapDeps([75,27,2,5]))),Rc=J(()=>Z(()=>import("./PostCard.n2mrSogQ.js"),__vite__mapDeps([76,77,26,57,58,2,5]))),Bc=J(()=>Z(()=>import("./PostForm.CWlQwgvd.js"),__vite__mapDeps([78,2,77,26,57,58,5]))),Mc=J(()=>Z(()=>import("./PostGraph.BpT8orzt.js"),__vite__mapDeps([79,80,2,5]))),Nc=J(()=>Z(()=>import("./PostLine.CYA8Qb1F.js"),__vite__mapDeps([81,77,26,57,58,2,5]))),jc=J(()=>Z(()=>import("./PostLink.QwjjN0M-.js"),__vite__mapDeps([82,2,5]))),$c=J(()=>Z(()=>import("./PostList.dJW1KVOp.js"),__vite__mapDeps([83,2,84,77,26,57,58,8,5]))),zc=J(()=>Z(()=>import("./PostPage.OVIUDmvW.js"),__vite__mapDeps([85,26,77,57,58,2,84,5]))),Uc=J(()=>Z(()=>import("./PostActionStar.m8DA65nK.js"),__vite__mapDeps([86,2,5]))),Hc=J(()=>Z(()=>import("./PostActionUpdate.GPySI7FS.js"),__vite__mapDeps([87,2,77,26,57,58,5]))),qc=J(()=>Z(()=>import("./PostActionBan.2wlm1maa.js"),__vite__mapDeps([88,2,5]))),Vc=J(()=>Z(()=>import("./PostActionReact.CX45OiKs.js"),__vite__mapDeps([89,2,27,8,5]))),Wc=J(()=>Z(()=>import("./PostReactionButton.DNoFD4JG.js"),__vite__mapDeps([90,2,5]))),Gc=J(()=>Z(()=>import("./PostReactionTabs.iQx1k7N9.js"),__vite__mapDeps([91,2,27,5]))),Zc=J(()=>Z(()=>import("./MessageExchange.DzgMMqw2.js"),__vite__mapDeps([92,1,2,93,5,48]))),Kc=J(()=>Z(()=>import("./MessagesCount.DKGa0Xi8.js"),__vite__mapDeps([94,93,2,5]))),Jc=J(()=>Z(()=>import("./MessageList.CNr0m4WB.js"),__vite__mapDeps([95,2,93,5]))),Yc=J(()=>Z(()=>import("./ProjectList.C9acWIkw.js"),__vite__mapDeps([96,2,3,5,97,59]))),Xc=J(()=>Z(()=>import("./ProjectCard.ClWl9QoL.js"),__vite__mapDeps([98,2,59,5]))),Qc=J(()=>Z(()=>import("./ProjectPage.DcfJEBcv.js"),__vite__mapDeps([99,2,26,59,5]))),tl=J(()=>Z(()=>import("./ProjectFunding.C1mG3xPj.js"),__vite__mapDeps([100,2,61,58,5]))),el=J(()=>Z(()=>import("./ProjectForm.BqJ1A3vh.js"),__vite__mapDeps([97,2,59,5]))),rl=J(()=>Z(()=>import("./QrLoad.Cxu9W-t2.js"),__vite__mapDeps([101,18,19,2]))),nl=J(()=>Z(()=>import("./QrShow.ZWH-saa8.js"),__vite__mapDeps([23,2,19]))),il=J(()=>Z(()=>import("./QrShare.gh8IgOGf.js"),__vite__mapDeps([102,2,5]))),sl=J(()=>Z(()=>import("./RoomCard.CbLSH1yy.js"),__vite__mapDeps([103,104,2,4,5]))),ol=J(()=>Z(()=>import("./RoomFeature.C0bNtj_s.js"),__vite__mapDeps([105,5,2]))),al=J(()=>Z(()=>import("./RoomFeatureIcon.BCTaH0ZS.js"),__vite__mapDeps([106,2]))),ul=J(()=>Z(()=>import("./RoomForm.eudaaf9d.js"),__vite__mapDeps([107,2,4,5]))),cl=J(()=>Z(()=>import("./RoomLogo.DxD48nP1.js"),__vite__mapDeps([108,2,104,5]))),ll=J(()=>Z(()=>import("./RoomList.BZFBW-Mt.js"),__vite__mapDeps([109,110,2,5]))),hl=J(()=>Z(()=>import("./RoomPage.G_F4mI-H.js"),__vite__mapDeps([111,26,110,2,4,5]))),fl=J(()=>Z(()=>import("./RoomProfile.Bf2MhXtj.js"),__vite__mapDeps([112,26,110,2,4,5]))),dl=J(()=>Z(()=>import("./RoomButton.BLqsigUt.js"),__vite__mapDeps([113,104,2,4,5]))),pl=J(()=>Z(()=>import("./RoomActions.BBmcV61i.js"),__vite__mapDeps([114,2,5]))),ml=J(()=>Z(()=>import("./GuestList.By-lgqmq.js"),__vite__mapDeps([115,2,110,10,1,5]))),gl=J(()=>Z(()=>import("./SpacePlane.CvZRtQZe.js"),__vite__mapDeps([116,2,27,5]))),bl=J(()=>Z(()=>import("./SpaceGuest.Cw2RU3xn.js"),__vite__mapDeps([117,14,2,5]))),_l=J(()=>Z(()=>import("./SpaceArrow.C3XlqBbt.js"),__vite__mapDeps([118,2]))),yl=J(()=>Z(()=>import("./SpaceDraw.CcOXTthP.js"),__vite__mapDeps([119,2,5]))),wl=J(()=>Z(()=>import("./SpaceStatus.By28ewyf.js"),__vite__mapDeps([120,2]))),vl=J(()=>Z(()=>import("./UiButton.BBDBmm4t.js"),__vite__mapDeps([121,2]))),xl=J(()=>Z(()=>import("./UiLayer.th8HOX2j.js"),__vite__mapDeps([122,2]))),kl=J(()=>Z(()=>import("./UiLink.Dx5Dbalw.js"),__vite__mapDeps([123,2]))),El=J(()=>Z(()=>import("./UiModal.DTN26uWU.js"),__vite__mapDeps([124,2]))),Al=J(()=>Z(()=>import("./UiPanel.M4RbJ_K4.js"),__vite__mapDeps([125,2]))),Sl=J(()=>Z(()=>import("./UiDark.BWPeYNOy.js"),__vite__mapDeps([126,2,5]))),Cl=J(()=>Z(()=>import("./UiComponents.CKaTC6fP.js"),__vite__mapDeps([127,5,2]))),Dl=J(()=>Z(()=>import("./UserAvatar.C2nCVscQ.js"),__vite__mapDeps([128,2,14,5]))),Tl=J(()=>Z(()=>import("./UserGraph.DvRMTPa2.js"),__vite__mapDeps([129,2,27,80,5]))),Fl=J(()=>Z(()=>import("./UserHome.BaQiOAaV.js"),__vite__mapDeps([130,2,110,5,113,104,4,48,49]))),Ol=J(()=>Z(()=>import("./UserIcon.BXM3eKkm.js"),__vite__mapDeps([131,5,2]))),Il=J(()=>Z(()=>import("./UserListOverlay.DYEgNqdX.js"),__vite__mapDeps([132,2,110,10,1,5]))),Pl=J(()=>Z(()=>import("./UserProfile.BcARXNnq.js"),__vite__mapDeps([133,2,1,5]))),Ll=J(()=>Z(()=>import("./UserProfileField.yKgvL7vX.js"),__vite__mapDeps([134,2,5]))),Rl=J(()=>Z(()=>import("./UserRooms.cU3achfm.js"),__vite__mapDeps([135,2,5]))),Qi=Object.freeze(Object.defineProperty({__proto__:null,AccountAvatar:$u,AccountBadge:ju,AccountHome:Lu,AccountPetname:Ru,AccountProfile:Nu,AccountReactions:Bu,AccountSelect:Mu,AuthCreate:Uu,AuthCredentials:qu,AuthForm:zu,AuthPanel:Hu,ChatInput:Vu,ChatMessage:Wu,ChatMessages:Gu,ChatRoom:Ku,ChatTopics:Zu,DictAuthors:Xu,DictBy:Ju,DictDefCard:Qu,DictDefList:tc,DictDefPage:ec,DictLinkButton:oc,DictLinkList:sc,DictPanel:Yu,DictWordCard:rc,DictWordList:nc,DictWordPage:ic,EmbedYoutube:ac,FileCard:lc,FileHash:hc,FileInfo:dc,FileList:pc,FileShare:fc,FormLink:mc,FormPicture:gc,FormText:bc,FormTitle:yc,FormYoutube:_c,GiftButton:kc,GiftCard:wc,GiftForm:xc,GiftList:vc,GiftStatus:Sc,GiftWallet:Ac,GiftWallets:Ec,GuestList:ml,GunGraph:Cc,GunRelay:Dc,GunRelayList:Tc,GunSettings:Oc,GunTools:Fc,MateButton:Ic,MateLink:Lc,MateList:Pc,MessageExchange:Zc,MessageList:Jc,MessagesCount:Kc,PostActionBan:qc,PostActionReact:Vc,PostActionStar:Uc,PostActionUpdate:Hc,PostCard:Rc,PostForm:Bc,PostGraph:Mc,PostLine:Nc,PostLink:jc,PostList:$c,PostPage:zc,PostReactionButton:Wc,PostReactionTabs:Gc,ProjectCard:Xc,ProjectForm:el,ProjectFunding:tl,ProjectList:Yc,ProjectPage:Qc,QrLoad:rl,QrShare:il,QrShow:nl,RoomActions:pl,RoomButton:dl,RoomCard:sl,RoomFeature:ol,RoomFeatureIcon:al,RoomForm:ul,RoomList:ll,RoomLogo:cl,RoomPage:hl,RoomProfile:fl,SpaceArrow:_l,SpaceDraw:yl,SpaceGuest:bl,SpacePlane:gl,SpaceStatus:wl,TorrentDownload:cc,TorrentUpload:uc,UiButton:vl,UiComponents:Cl,UiDark:Sl,UiLayer:xl,UiLink:kl,UiModal:El,UiPanel:Al,UserAvatar:Dl,UserGraph:Tl,UserHome:Fl,UserIcon:Ol,UserListOverlay:Il,UserProfile:Pl,UserProfileField:Ll,UserRooms:Rl},Symbol.toStringTag,{value:"Module"}));var vn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gi,no;function Nf(){if(no)return gi;no=1;var e=1e3,t=e*60,r=t*60,n=r*24,i=n*7,s=n*365.25;gi=function(l,f){f=f||{};var h=typeof l;if(h==="string"&&l.length>0)return o(l);if(h==="number"&&isFinite(l))return f.long?u(l):a(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function o(l){if(l=String(l),!(l.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(f){var h=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*n;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(l){var f=Math.abs(l);return f>=n?Math.round(l/n)+"d":f>=r?Math.round(l/r)+"h":f>=t?Math.round(l/t)+"m":f>=e?Math.round(l/e)+"s":l+"ms"}function u(l){var f=Math.abs(l);return f>=n?c(l,f,n,"day"):f>=r?c(l,f,r,"hour"):f>=t?c(l,f,t,"minute"):f>=e?c(l,f,e,"second"):l+" ms"}function c(l,f,h,d){var p=f>=h*1.5;return Math.round(l/h)+" "+d+(p?"s":"")}return gi}var jf=Nf();const $f=Nr(jf);var zf=Object.create,Bl=Object.defineProperty,Uf=Object.getOwnPropertyDescriptor,Hf=Object.getOwnPropertyNames,qf=Object.getPrototypeOf,Vf=Object.prototype.hasOwnProperty,mr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Wf=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Hf(t))!Vf.call(e,i)&&i!==r&&Bl(e,i,{get:()=>t[i],enumerable:!(n=Uf(t,i))||n.enumerable});return e},Os=(e,t,r)=>(r=e!=null?zf(qf(e)):{},Wf(Bl(r,"default",{value:e,enumerable:!0}),e)),Ml=mr(e=>{(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof e=="object"?t(e):typeof define=="function"&&define.amd?define(function(){var r={};return t(r),r}):t({}):t({})})(function(t){t.version="0.3.0";function r(){for(var c=0,l=new Array(256),f=0;f!=256;++f)c=f,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,l[f]=c;return typeof Int32Array<"u"?new Int32Array(l):l}var n=r(),i=typeof Buffer<"u";function s(c){if(c.length>32768&&i)return a(new Buffer(c));for(var l=-1,f=c.length-1,h=0;h<f;)l=n[(l^c.charCodeAt(h++))&255]^l>>>8,l=n[(l^c.charCodeAt(h++))&255]^l>>>8;return h===f&&(l=l>>>8^n[(l^c.charCodeAt(h))&255]),l^-1}function o(c){if(c.length>1e4)return a(c);for(var l=-1,f=0,h=c.length-3;f<h;)l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255];for(;f<h+3;)l=l>>>8^n[(l^c[f++])&255];return l^-1}function a(c){for(var l=-1,f=0,h=c.length-7;f<h;)l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255],l=l>>>8^n[(l^c[f++])&255];for(;f<h+7;)l=l>>>8^n[(l^c[f++])&255];return l^-1}function u(c){for(var l=-1,f=0,h=c.length,d,p;f<h;)d=c.charCodeAt(f++),d<128?l=l>>>8^n[(l^d)&255]:d<2048?(l=l>>>8^n[(l^(192|d>>6&31))&255],l=l>>>8^n[(l^(128|d&63))&255]):d>=55296&&d<57344?(d=(d&1023)+64,p=c.charCodeAt(f++)&1023,l=l>>>8^n[(l^(240|d>>8&7))&255],l=l>>>8^n[(l^(128|d>>2&63))&255],l=l>>>8^n[(l^(128|p>>6&15|d&3))&255],l=l>>>8^n[(l^(128|p&63))&255]):(l=l>>>8^n[(l^(224|d>>12&15))&255],l=l>>>8^n[(l^(128|d>>6&63))&255],l=l>>>8^n[(l^(128|d&63))&255]);return l^-1}t.table=n,t.bstr=s,t.buf=o,t.str=u})}),Gf=mr((e,t)=>{var r=Ml();t.exports=o;var n=new Uint8Array(4),i=new Int32Array(n.buffer),s=new Uint32Array(n.buffer);function o(a){if(a[0]!==137)throw new Error("Invalid .png file header");if(a[1]!==80)throw new Error("Invalid .png file header");if(a[2]!==78)throw new Error("Invalid .png file header");if(a[3]!==71)throw new Error("Invalid .png file header");if(a[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(a[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(a[6]!==26)throw new Error("Invalid .png file header");if(a[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var u=!1,c=[],l=8;l<a.length;){n[3]=a[l++],n[2]=a[l++],n[1]=a[l++],n[0]=a[l++];var f=s[0]+4,h=new Uint8Array(f);h[0]=a[l++],h[1]=a[l++],h[2]=a[l++],h[3]=a[l++];var d=String.fromCharCode(h[0])+String.fromCharCode(h[1])+String.fromCharCode(h[2])+String.fromCharCode(h[3]);if(!c.length&&d!=="IHDR")throw new Error("IHDR header missing");if(d==="IEND"){u=!0,c.push({name:d,data:new Uint8Array(0)});break}for(var p=4;p<f;p++)h[p]=a[l++];n[3]=a[l++],n[2]=a[l++],n[1]=a[l++],n[0]=a[l++];var m=i[0],g=r.buf(h);if(g!==m)throw new Error("CRC values for "+d+" header do not match, PNG file is likely corrupted");var y=new Uint8Array(h.buffer.slice(4));c.push({name:d,data:y})}if(!u)throw new Error(".png file ended prematurely: no IEND header was found");return c}}),Zf=mr((e,t)=>{t.exports=function(r,n,i){var s=[],o=r.length;if(o===0)return s;var a=n<0?Math.max(0,n+o):n||0;for(i!==void 0&&(o=i<0?i+o:i);o-- >a;)s[o-a]=r[o];return s}}),Kf=mr((e,t)=>{var r=Zf(),n=Ml();t.exports=a;var i=new Uint8Array(4),s=new Int32Array(i.buffer),o=new Uint32Array(i.buffer);function a(u){var c=8,l=c,f;for(f=0;f<u.length;f++)c+=u[f].data.length,c+=12;var h=new Uint8Array(c);for(h[0]=137,h[1]=80,h[2]=78,h[3]=71,h[4]=13,h[5]=10,h[6]=26,h[7]=10,f=0;f<u.length;f++){var d=u[f],p=d.name,m=d.data,g=m.length,y=[p.charCodeAt(0),p.charCodeAt(1),p.charCodeAt(2),p.charCodeAt(3)];o[0]=g,h[l++]=i[3],h[l++]=i[2],h[l++]=i[1],h[l++]=i[0],h[l++]=y[0],h[l++]=y[1],h[l++]=y[2],h[l++]=y[3];for(var _=0;_<g;)h[l++]=m[_++];var b=y.concat(r(m)),w=n.buf(b);s[0]=w,h[l++]=i[3],h[l++]=i[2],h[l++]=i[1],h[l++]=i[0]}return h}}),Jf=mr((e,t)=>{t.exports=r;function r(n,i){if(n=String(n),i=String(i),!/^[\x00-\xFF]+$/.test(n)||!/^[\x00-\xFF]+$/.test(i))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(n.length>=80)throw new Error('Keyword "'+n+'" is longer than the 79-character limit imposed by the PNG specification');for(var s=n.length+i.length+1,o=new Uint8Array(s),a=0,u,c=0;c<n.length;c++){if(!(u=n.charCodeAt(c)))throw new Error("0x00 character is not permitted in tEXt keywords");o[a++]=u}o[a++]=0;for(var l=0;l<i.length;l++){if(!(u=i.charCodeAt(l)))throw new Error("0x00 character is not permitted in tEXt content");o[a++]=u}return{name:"tEXt",data:o}}}),Yf=mr((e,t)=>{t.exports=r;function r(n){n.data&&n.name&&(n=n.data);for(var i=!0,s="",o="",a=0;a<n.length;a++){var u=n[a];if(i)u?o+=String.fromCharCode(u):i=!1;else if(u)s+=String.fromCharCode(u);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:o,text:s}}}),Xf=mr(e=>{e.encode=Jf(),e.decode=Yf()}),Qf=()=>{if(typeof window>"u"||typeof window.CanvasRenderingContext2D>"u"||!r())return;let e=CanvasRenderingContext2D.prototype,t=e.drawImage;if(!t){console.error("This script requires a basic implementation of drawImage");return}e.drawImage=function(o,a,u){if(arguments.length!==9)return t.apply(this,[...arguments]);let c=n(...arguments);if(!i(c))return t.apply(this,c)};function r(){let o=document.createElement("canvas").getContext("2d");o.fillRect(0,0,40,40),o.drawImage(o.canvas,-40,-40,80,80,50,50,20,20);let a=o.getImageData(50,50,30,30),u=new Uint32Array(a.data.buffer),c=(h,d)=>u[d*a.width+h],l=[[9,9],[20,9],[9,20],[20,20]],f=[[10,10],[19,10],[10,19],[19,19]];return l.some(([h,d])=>c(h,d)!==0)||f.some(([h,d])=>c(h,d)===0)}function n(o,a,u,c,l,f,h,d,p){let{width:m,height:g}=s(o);c<0&&(a+=c,c=Math.abs(c)),l<0&&(u+=l,l=Math.abs(l)),d<0&&(f+=d,d=Math.abs(d)),p<0&&(h+=p,p=Math.abs(p));let y=Math.max(a,0),_=Math.min(a+c,m),b=Math.max(u,0),w=Math.min(u+l,g),v=d/c,S=p/l;return[o,y,b,_-y,w-b,a<0?f-a*v:f,u<0?h-u*S:h,(_-y)*v,(w-b)*S]}function i(o){return[3,4,7,8].some(a=>!o[a])}function s(o){let a=u=>{let c=globalThis[u];return c&&o instanceof c};if(a("HTMLImageElement"))return{width:o.naturalWidth,height:o.naturalHeight};if(a("HTMLVideoElement"))return{width:o.videoWidth,height:o.videoHeight};if(a("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(a("HTMLCanvasElement")||a("ImageBitmap"))return o}},Nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function td(e){return e.split("").reduce((t,r)=>t*64+Nl.indexOf(r),0)}function ed(e){let t=Nl.split(""),r=[],n=0;for(let i of e)r[n++]=t.indexOf(i)/64;return r}function rd(e){return e&&typeof e=="string"&&e.length===87&&e.split(".").length===2}function jl(e){let t=e.split("."),r=t.map(a=>ed(a)),n=r.map(a=>a[42]),i=r.map(a=>a.reduce((u,c)=>u+c)/a.length),s=t.map(a=>td(a)%360),o=t.map((a,u)=>`hsl(${s[u]} ${n[u]*100}% ${i[u]*100}%)`);return{finals:n,decoded:r,angles:s,averages:i,colors:o}}function qn(e,t=3){return[...Array(Math.ceil(e.length/t))].map(()=>e.splice(0,t))}var $l=Os(Gf()),nd=Os(Kf()),zl=Os(Xf()),pr=Yt(null);function id(e){try{let t=e.toDataURL("image/png").split(",")[1],r=atob(t),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}catch(t){return pr.value="Failed to convert canvas to buffer: "+t.message,null}}function sd(e,t){try{let r=`<metadata>
      <gun-data>${JSON.stringify(t)}</gun-data>
    </metadata>`;return e.replace("</svg>",`${r}</svg>`)}catch(r){return pr.value="Failed to embed data in SVG: "+r.message,null}}function od(e){console.log(e);try{let t=e.match(/<metadata>\s*<gun-data>(.*?)<\/gun-data>\s*<\/metadata>/s);return!t||!t[1]?(pr.value="No embedded data found in SVG",null):JSON.parse(t[1])}catch(t){return pr.value="Failed to extract data from SVG: "+t.message,null}}function ad(e,t){try{let r=id(e);if(!r)return null;let n=(0,$l.default)(r);return n.splice(-1,0,zl.default.encode("message",JSON.stringify(t))),(0,nd.default)(n)}catch(r){return pr.value="Failed to embed data: "+r.message,null}}function ud(e,t="image/png"){if(t==="image/svg+xml"){let r=new TextDecoder().decode(e);return od(r)}try{let r=(0,$l.default)(e).filter(n=>n.name==="tEXt").map(n=>zl.default.decode(n.data)).find(n=>n.keyword==="message");return r?JSON.parse(r.text):null}catch(r){return pr.value=r.message,null}}async function q_(e){try{if(!(e instanceof File))throw new Error("Input must be a File object");let t=await e.arrayBuffer(),r=new Uint8Array(t);return await ud(r,e.type)}catch(t){return pr.value=t.message,null}}function cd({pub:e,size:t,dark:r,draw:n,reflect:i,round:s,embed:o,p3:a}){let u=document.createElement("canvas");u.width=u.height=t;let c=u.getContext("2d"),{decoded:l,finals:f}=jl(e);if(ld({ctx:c,top:f[0],bottom:f[1],size:t,dark:r}),n=="squares"?(c.filter="blur(20px)",io(l[0],c,t,a),c.filter="blur(0px)",c.globalCompositeOperation="color-burn",io(l[1],c,t,a)):(so(l[0],c,t,.42*t,a),c.globalCompositeOperation="multiply",so(l[1],c,t,.125*t,a)),i&&(c.globalCompositeOperation="source-over",c.scale(-1,1),c.translate(-t/2,0),c.drawImage(u,t/2,0,t,t,0,0,t,t),c.setTransform(1,0,0,1,0,0)),s){let d=c.getImageData(0,0,t,t);c.clearRect(0,0,t,t),c.fillStyle=r?"#cccccc":"#ffffff",c.fillRect(0,0,t,t),c.putImageData(d,0,0),c.globalCompositeOperation="destination-in",c.beginPath(),c.arc(t/2,t/2,t/2,0,Math.PI*2),c.closePath(),c.fill()}let h=u.toDataURL("image/png");if(o){let d=ad(u,{pub:e,content:o});if(d){let p=new Blob([d],{type:"image/png"});h=URL.createObjectURL(p)}}return h}function ld({ctx:e,top:t=0,bottom:r=150,size:n=200,dark:i=!1}){let s=e.createLinearGradient(0,0,0,n),o=i?0:70;s.addColorStop(0,`hsl(0,0%,${o+t*30}%)`),s.addColorStop(1,`hsl(0,0%,${o+r*30}%)`),e.fillStyle=s,e.fillRect(0,0,n,n)}function io(e,t,r,n){qn(e,14).forEach(i=>{if(i.length===14){let[s,o,a,u,c,l,f,h,d,p,m,g,y,_]=i,b=r/8+a*r*(7/8),w=t.createLinearGradient(s*r+b*h,0,s*r+b*y,r);w.addColorStop(0,n?`color(display-p3 ${u} ${c} ${l} / ${f})`:`rgba(${u*255}, ${c*255}, ${l*255}, ${f})`),w.addColorStop(1,n?`color(display-p3 ${d} ${p} ${m} / ${g})`:`rgba(${d*255}, ${p*255}, ${m*255}, ${g})`),t.fillStyle=w,t.translate(s*r,o*r),t.rotate(_*Math.PI),t.fillRect(-b/2,-b/2,b,b),t.setTransform(1,0,0,1,0,0)}})}function so(e,t,r,n,i){qn(e,7).forEach(s=>{if(s.length===7){let[o,a,u,c,l,f,h]=s;t.beginPath(),t.arc(r/2+o*r/2,a*r,u*n,0,2*Math.PI),t.fillStyle=i?`color(display-p3 ${c} ${l} ${f} / ${h})`:`rgba(${c*255}, ${l*255}, ${f*255}, ${h})`,t.closePath(),t.fill()}})}function hd({size:e=300,reflect:t=!0,follow:r=!0,finals:n=[.5,.5],averages:i=[.5,.5],breathVert:s=.03}={}){return`
    <script type="text/javascript"><![CDATA[
      // Compact state & precomputed constants
      const s = {
        e: [], // elements
        p: { x: null, y: null, tx: null, ty: null, a: false, lt: 0, lit: 0 }, // pointer state
        r: null, // rect
        a: false, // pulse active
        pt: 0, // pulse time
        pv: 0, // pulse value
        t: 0 // time
      },
      c = {
        sz: ${e},
        cx: ${e/2},
        cy: ${e/2},
        pz: ${e} * 1.2,
        bz: ${e} * 0.4 * ${n[1]},
        pr: ${e} * (0.5 + ${n[0]}/4),
        mv: (0.1 + 0.05*${i[0]}) * Math.max(0.8, Math.min(4.4, 200/${e})),
        bs: 0.1 * Math.max(0.8, Math.min(1.4, 200/${e})),
        bv: ${s} * Math.max(0.8, Math.min(1.4, 200/${e})),
        bd: 4500 + ${i[0]}*1000,
        pa: 0.6 * Math.max(0.8, Math.min(1.4, 200/${e})),
        pr: 200,
        pf: 700,
        rf: ${r},
        d: 900,
        td: 1500000,
        pp: 0.5+ 0.5*${i[1]}
      };

      // Init using IIFE
      (() => {
        const svg = document.currentScript?.closest('svg');
        if (!svg) return;
        
        // Update rect and get element collections
        const ur = () => s.r = svg.getBoundingClientRect();
        ur();
        
        // Cache elements for better performance
        s.e = [
          ...Array.from(svg.querySelectorAll('.interactive-circle')).map(el => {
            const x = +el.getAttribute('data-cx');
            const y = +el.getAttribute('data-cy');
            const r = +el.getAttribute('r');
            const o = +el.getAttribute('data-opacity');
            const m = Math.pow(r / (c.sz * 0.05), 0.7) * o;
            const mr = el.nextElementSibling && 
                      el.nextElementSibling.getAttribute('cx') === (c.sz - x).toString() ?
                      el.nextElementSibling : null;
            
            return {
              el, t: 'c',
              x, y, r,
              cx: x, cy: y,
              m, mr,
              o: Math.random() * Math.PI * 2
            };
          }),
          ...Array.from(svg.querySelectorAll('.interactive-square')).map(el => {
            const x = +el.getAttribute('data-cx');
            const y = +el.getAttribute('data-cy');
            const r = +el.getAttribute('data-r');
            const o = +el.getAttribute('data-opacity');
            const a = +el.getAttribute('data-angle') + (Math.random() * 20 - 10);
            
            return {
              el, t: 's',
              x, y, z: c.bz, r: a,
              cx: x, cy: y, cz: c.bz, cr: a, cs: 1,
              m: Math.pow((r / c.sz), 1.5) * o,
              o: Math.random() * Math.PI * 2
            };
          })
        ];
        
        // Initial transform for squares
        s.e.filter(el => el.t === 's').forEach(setTransform);
        
        // Helper functions for event handling
        const gc = e => ({ x: (e.touches?.[0] || e.changedTouches?.[0] || e).clientX, 
                           y: (e.touches?.[0] || e.changedTouches?.[0] || e).clientY });
        
        const inBounds = (x, y) => {
          const { left, top, width, height } = s.r || {};
          return x >= left && x <= left + width && y >= top && y <= top + height;
        };
        
        // Event handlers
        const up = e => {
          if (!s.r) ur();
          const { left, top, width, height } = s.r;
          const { x, y } = gc(e);
          
          if (!inBounds(x, y) && !e.type.startsWith('touch')) {
            if (s.p.a) pl(false);
            return;
          }
          
          // Calculate relative position
          const tx = ((x - left) / width) * c.sz;
          const ty = ((y - top) / height) * c.sz;
          
          // Init/update target position
          if (s.p.tx === null) {
            s.p.tx = tx;
            s.p.ty = ty;
          } else {
            s.p.tx = tx;
            s.p.ty = ty;
            
            // Handle reappearance after inactivity
            if (!s.p.a && performance.now() - s.p.lt > 100) {
              s.p.x = tx;
              s.p.y = ty;
            }
          }
          
          // Initialize actual position if first interaction
          if (s.p.x === null) {
            s.p.x = s.p.tx;
            s.p.y = s.p.ty;
          }
          
          s.p.a = true;
          s.p.lt = performance.now();
        };
        
        const pd = e => {
          up(e);
          s.a = true;
          s.pt = performance.now();
          if (e.type === 'touchstart') e.preventDefault();
        };
        
        const pu = e => {
          s.a = false;
          s.pt = performance.now();
          
          if (e.type === 'touchend' || e.type === 'touchcancel') {
            pl(true);
          }
        };
        
        const pl = (immediate = false) => {
          s.p.a = false;
          s.p.lit = performance.now();
          s.a = false;
          s.pt = s.p.lit;
          
          if (immediate) {
            s.p.tx = s.p.x = null;
            s.p.ty = s.p.y = null;
          }
        };
        
        // Event listeners
        window.addEventListener('resize', ur, { passive: true });
        svg.addEventListener('pointermove', up, { passive: true });
        svg.addEventListener('pointerenter', up, { passive: true });
        svg.addEventListener('pointerleave', pl, { passive: true });
        svg.addEventListener('pointerdown', pd, { passive: false });
        window.addEventListener('pointerup', pu, { passive: true });
        window.addEventListener('pointercancel', pu, { passive: true });
        
        // Start animation
        requestAnimationFrame(animate);
        
        // Setup auto-cleanup
        if (document.currentScript?.parentNode) {
          const cleanup = () => {
            window.removeEventListener('resize', ur);
            svg.removeEventListener('pointermove', up);
            svg.removeEventListener('pointerenter', up);
            svg.removeEventListener('pointerleave', pl);
            svg.removeEventListener('pointerdown', pd);
            window.removeEventListener('pointerup', pu);
            window.removeEventListener('pointercancel', pu);
            s.e = [];
          };
          
          new MutationObserver(mutations => {
            mutations.forEach(m => {
              if (m.removedNodes) {
                m.removedNodes.forEach(n => {
                  if (n === document.currentScript) {
                    cleanup();
                    observer.disconnect();
                  }
                });
              }
            });
          }).observe(document.currentScript.parentNode, { childList: true });
        }
      })();
      
      // Apply 3D transform to square elements
      function setTransform(el) {
        const ps = c.pz / (c.pz + el.cz);
        const px = c.cx + (el.cx - c.cx) * ps;
        const py = c.cy + (el.cy - c.cy) * ps;
        el.el.setAttribute('transform', 
          'translate('+ px+' '+ py+') rotate('+ el.cr+ ') scale(' + ps * el.cs + ')'
        );
      }
      
      // Calculate effects based on time and pulse
      function fx(el, t, pv) {
        const θ = (t % c.bd) / c.bd * Math.PI * 2 + el.o;
        const w = Math.sin(θ);
        const mf = 1 - Math.min(0.8, el.m);
        return {
          s: (1 + w * c.bs * mf) * (1 + pv * c.pa * Math.pow(mf, 2)),
          y: w * c.sz * c.bv * mf,
          p: pv * c.pa * Math.pow(mf, 2)
        };
      }
      
      // Animation loop
      function animate(time) {
        const dt = s.t ? time - s.t : 0;
        s.t = time;
        
        // Handle pointer inactivity
        if (!s.p.a && s.p.x !== null && time - s.p.lit > c.td) {
          s.p.x = s.p.y = s.p.tx = s.p.ty = null;
          s.e.forEach(el => { if (el.ractive) el.ractive = false; });
        }
        
        // Smooth pointer movement
        if (s.p.a && s.p.tx !== null && s.p.x !== null) {
          const dx = s.p.tx - s.p.x;
          const dy = s.p.ty - s.p.y;
          const dist = Math.sqrt(dx*dx + dy*dy);
          const factor = dist > c.sz * 0.3 ? 0.2 : c.pp;
          
          s.p.x += dx * factor;
          s.p.y += dy * factor;
        }
        
        // Update pulse
        s.pv = s.a ? 
          s.pv + (1 - s.pv) * Math.min(1, (time - s.pt) / c.pr) : 
          s.pv * Math.max(0, 1 - (time - s.pt) / c.pf);
        
        if (s.pv < 0.001) s.pv = 0;
        
        // Process elements
        const ps = Math.max(0.6, Math.min(1, c.sz / 150));
        const active = s.p.x !== null;
        
        s.e.forEach(el => {
          const sm = Math.min(dt / c.d, 1) * (el.t === 's' ? 0.3 : 0.1);
          const effect = fx(el, time, s.pv);
          
          if (el.t === 'c') { // Circle
            let tx = el.x;
            let ty = el.y + effect.y;
            
            if (active) {
              const dx = s.p.x - el.x;
              const dy = s.p.y - el.y;
              const d = Math.sqrt(dx * dx + dy * dy);
              const mv = c.sz * c.mv * (1 - Math.min(0.8, el.m));
              const m = Math.min(d, mv) * ps;
              
              if (d > 0.1) {
                tx += m * (dx / d);
                ty += m * (dy / d);
              }
            }
            
            // Smooth interpolation
            const cx_diff = tx - el.cx;
            const cy_diff = ty - el.cy;
            const c_dist = Math.sqrt(cx_diff*cx_diff + cy_diff*cy_diff);
            const c_factor = c_dist > 20 ? 0.15 : 0.1;
            
            el.cx += cx_diff * c_factor;
            el.cy += cy_diff * c_factor;
            
            // Apply changes
            el.el.setAttribute('cx', el.cx);
            el.el.setAttribute('cy', el.cy);
            el.el.setAttribute('r', el.r * effect.s);
            
            // Handle reflection
            if (el.mr && ${t}) {
              // Initialize reflection properties if needed
              const reflectX = c.sz - el.x;
              if (!el.rcx) {
                el.rcx = reflectX;
                el.rcy = el.y;
                el.rtx = reflectX;
                el.rty = el.y;
                el.ractive = false;
                el.rest = { x: reflectX, y: el.y };
              }
              
              // Update reflection activity state
              if (active && !el.ractive && s.p.lt - s.p.lit > 100) {
                el.ractive = true;
              } else if (!active && el.ractive && s.p.lit - s.p.lt > 50) {
                el.ractive = false;
              }
              
              // Set target position based on active state and mode
              if (!active || !${r}) {
                el.rtx = c.sz - el.cx;
                el.rty = el.cy;
              } else {
                const rdx = s.p.x - reflectX;
                const rdy = s.p.y - el.y;
                const rd = Math.sqrt(rdx * rdx + rdy * rdy);
                const rmv = c.sz * c.mv * (1 - Math.min(0.8, el.m));
                const rm = Math.min(rd, rmv) * ps;
                
                if (rd > 0.1) {
                  el.rtx = reflectX + rm * (rdx / rd);
                  el.rty = el.y + effect.y + rm * (rdy / rd);
                } else {
                  el.rtx = reflectX;
                  el.rty = el.y + effect.y;
                }
              }
              
              // Return to rest position when inactive
              if (!active && !s.p.x) {
                el.rtx = el.rest.x;
                el.rty = el.rest.y + effect.y;
              }
              
              // Smooth interpolation for reflection
              const rcx_diff = el.rtx - el.rcx;
              const rcy_diff = el.rty - el.rcy;
              const rc_dist = Math.sqrt(rcx_diff*rcx_diff + rcy_diff*rcy_diff);
              const rc_factor = rc_dist > 30 ? 0.05 : (rc_dist > 10 ? 0.07 : 0.09);
              
              el.rcx += rcx_diff * rc_factor;
              el.rcy += rcy_diff * rc_factor;
              
              // Apply reflection position
              el.mr.setAttribute('cx', el.rcx);
              el.mr.setAttribute('cy', el.rcy);
              el.mr.setAttribute('r', el.r * effect.s);
            }
          } else if (el.t === 's') { // Square
            let tx = el.x, ty = el.y + effect.y, tz = c.bz, tr = el.r, ts = 1;
            
            if (active) {
              const dx = s.p.x - el.x;
              const dy = s.p.y - el.y;
              const d = Math.sqrt(dx * dx + dy * dy);
              const mf = 1 - Math.min(0.8, el.m);
              const mv = c.sz * 0.1 * mf;
              const m = Math.min(d, mv) * ps;
              
              if (d > 0.1) {
                tx += m * (dx / d);
                ty += m * (dy / d);
              }
              
              // Apply depth & scale changes
              const n = Math.min(d / c.pr, 1);
              const zf = 1 - n * n;
              tz -= c.bz * zf * mf;
              ts += zf * 0.3 * mf;
              tr += Math.sin(d / 100) * 5 * mf;
            } else {
              // Idle rotation
              tr += Math.sin(time / 1500 + el.o) * 3 * (1 - Math.min(0.8, el.m));
            }
            
            // Apply pulse to Z depth
            tz -= effect.p * c.bz * 0.7 * (1 - Math.min(0.8, el.m));
            ts *= effect.s;
            
            // Smoothing based on distance
            const sx_diff = tx - el.cx;
            const sy_diff = ty - el.cy;
            const s_dist = Math.sqrt(sx_diff*sx_diff + sy_diff*sy_diff);
            const s_factor = Math.min(1, s_dist > 20 ? sm * 1.5 : sm);
            
            // Apply interpolation
            el.cx += sx_diff * s_factor;
            el.cy += sy_diff * s_factor;
            el.cz += (tz - el.cz) * sm;
            el.cr += (tr - el.cr) * sm;
            el.cs += (ts - el.cs) * sm;
            
            setTransform(el);
          }
        });
        
        requestAnimationFrame(animate);
      }
    ]]><\/script>
  `}function fd({pub:e,size:t=200,dark:r=!1,draw:n="circles",reflect:i=!0,round:s=!0,embed:o=!0,svg:a}={}){let{decoded:u,finals:c,averages:l}=jl(e),f=`
      <linearGradient id="bg" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="hsla(0,0%,${(r?0:70)+c[0]*30}%)"/>
        <stop offset="100%" stop-color="hsla(0,0%,${(r?0:70)+c[1]*30}%)"/>
      </linearGradient>
    `,h=(y,_=!1)=>qn(y,14).map(b=>{if(b.length!==14)return"";let[w,v,S,E,T,I,P,B,D,k,x,O,A,C]=b,L=t/8+S*t*(7/8),R=`gradient-${w}-${v}-${_?"2":"1"}`,U=w*t,N=v*t,z=a==="interactive"?`class="interactive-square" data-cx="${U}" data-cy="${N}" data-r="${L}" data-angle="${C*180}" data-opacity="${(P+O)/2}"`:"";return`
          <defs>
            <linearGradient id="${R}" x1="${B}" y1="0" x2="${A}" y2="1">
              <stop offset="0%" stop-color="color(display-p3 ${E} ${T} ${I} / ${P})"/>
              <stop offset="100%" stop-color="color(display-p3 ${D} ${k} ${x} / ${O})"/>
            </linearGradient>
          </defs>
          <g ${z} transform="translate(${U} ${N}) rotate(${C*180})">
            <rect 
              x="${-L/2}" y="${-L/2}" 
              width="${L}" height="${L}"
              fill="url(#${R})"
              style="${_?"mix-blend-mode:color-burn;":"filter:blur(20px);"}"
            />
          </g>
        `}).join(""),d=(y,_,b=!1)=>qn(y,7).map(w=>{if(w.length!==7)return"";let[v,S,E,T,I,P,B]=w,D=t/2+v*t/2,k=S*t,x=E*_;return`
          <circle 
            ${a==="interactive"?`class="interactive-circle" data-cx="${D}" data-cy="${k}" data-opacity="${B}"`:""}
            cx="${D}" cy="${k}" r="${x}"
            fill="color(display-p3 ${T} ${I} ${P} / ${B})"

            style="${b?"mix-blend-mode:multiply;":""}"
          />
          ${i?`
          <circle 
            cx="${t-D}" cy="${k}" r="${x}"
            fill="color(display-p3 ${T} ${I} ${P} / ${B})"

            style="${b?"mix-blend-mode:multiply;":""}"
          />`:""}
        `}).join(""),p=s?`
      <defs>
        <clipPath id="circle-mask">
          <circle cx="${t/2}" cy="${t/2}" r="${t/2}" />
        </clipPath>
      </defs>
    `:"",m=a==="interactive"?hd({size:t,reflect:i,finals:c,averages:l}):"",g=`
      <svg 
        width="${t}" height="${t}" 
        viewBox="0 0 ${t} ${t}" 
        xmlns="http://www.w3.org/2000/svg"
        style="overflow: visible;"
        >
        <defs>${f}</defs>
        ${p}
        <g ${s?'clip-path="url(#circle-mask)"':""}>
          <rect x="${-t}" width="${3*t}" y="${-t}" height="${3*t}" fill="url(#bg)"/>
          ${n==="squares"?`${h(u[0],!1)}
             ${h(u[1],!0)}`:`${d(u[0],.42*t)}
             ${d(u[1],.125*t,!0)}`}
        </g>
        ${m}
      </svg>
    `;if(a==="interactive")return`data:image/svg+xml,${encodeURIComponent(g.trim())}`;if(o){let y={pub:e};o&&(y.content=o),g=sd(g,y)}return`data:image/svg+xml;base64,${typeof btoa=="function"?btoa(g):Buffer.from(g).toString("base64")}`}var xn={};function V_({pub:e,size:t=200,dark:r=!1,draw:n="circles",reflect:i=!0,round:s=!0,embed:o=!0,svg:a=!0,p3:u=!0}={}){let c=typeof window<"u"&&typeof document<"u";if(!rd(e))return"";if(a||!c)return fd({pub:e,size:t,dark:r,draw:n,reflect:i,round:s,embed:o,svg:a});let l=JSON.stringify(arguments[0]);if(xn!=null&&xn[l])return xn[l];let f=cd({pub:e,size:t,dark:r,draw:n,reflect:i,round:s,embed:o,p3:u});return xn[l]=f,f}Qf();const wr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dd(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ts(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function pn(e,...t){if(!dd(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function pd(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ts(e.outputLen),ts(e.blockLen)}function Vn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function md(e,t){pn(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Pr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function bi(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function de(e,t){return e<<32-t|e>>>t}function gd(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Is(e){return typeof e=="string"&&(e=gd(e)),pn(e),e}function bd(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];pn(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}let Ul=class{};function Ps(e){const t=n=>e().update(Is(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function _d(e=32){if(wr&&typeof wr.getRandomValues=="function")return wr.getRandomValues(new Uint8Array(e));if(wr&&typeof wr.randomBytes=="function")return Uint8Array.from(wr.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ls=BigInt(0),es=BigInt(1);function Lr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Rs(e){if(!Lr(e))throw new Error("Uint8Array expected")}function sn(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function kn(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Hl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Ls:BigInt("0x"+e)}const ql=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",yd=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function on(e){if(Rs(e),ql)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=yd[e[r]];return t}const ke={_0:48,_9:57,A:65,F:70,a:97,f:102};function oo(e){if(e>=ke._0&&e<=ke._9)return e-ke._0;if(e>=ke.A&&e<=ke.F)return e-(ke.A-10);if(e>=ke.a&&e<=ke.f)return e-(ke.a-10)}function Wn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(ql)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=oo(e.charCodeAt(s)),a=oo(e.charCodeAt(s+1));if(o===void 0||a===void 0){const u=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function lr(e){return Hl(on(e))}function Vl(e){return Rs(e),Hl(on(Uint8Array.from(e).reverse()))}function an(e,t){return Wn(e.toString(16).padStart(t*2,"0"))}function Wl(e,t){return an(e,t).reverse()}function ue(e,t,r){let n;if(typeof t=="string")try{n=Wn(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Lr(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function Gn(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];Rs(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const s=e[n];r.set(s,i),i+=s.length}return r}const _i=e=>typeof e=="bigint"&&Ls<=e;function Bs(e,t,r){return _i(e)&&_i(t)&&_i(r)&&t<=e&&e<r}function Dr(e,t,r,n){if(!Bs(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function wd(e){let t;for(t=0;e>Ls;e>>=es,t+=1);return t}const oi=e=>(es<<BigInt(e))-es,yi=e=>new Uint8Array(e),ao=e=>Uint8Array.from(e);function vd(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=yi(e),i=yi(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...l)=>r(i,n,...l),u=(l=yi(0))=>{i=a(ao([0]),l),n=a(),l.length!==0&&(i=a(ao([1]),l),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const f=[];for(;l<t;){n=a();const h=n.slice();f.push(h),l+=n.length}return Gn(...f)};return(l,f)=>{o(),u(l);let h;for(;!(h=f(c()));)u();return o(),h}}const xd={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Lr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ai(e,t,r={}){const n=(i,s,o)=>{const a=xd[s];if(typeof a!="function")throw new Error("invalid validator function");const u=e[i];if(!(o&&u===void 0)&&!a(u,e))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return e}function uo(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const s=e(r,...n);return t.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jt=BigInt(0),Ut=BigInt(1),ur=BigInt(2),kd=BigInt(3),rs=BigInt(4),co=BigInt(5),lo=BigInt(8);function re(e,t){const r=e%t;return r>=Jt?r:t+r}function ns(e,t){if(e===Jt)throw new Error("invert: expected non-zero number");if(t<=Jt)throw new Error("invert: expected positive modulus, got "+t);let r=re(e,t),n=t,i=Jt,s=Ut;for(;r!==Jt;){const o=n/r,a=n%r,u=i-s*o;n=r,r=a,i=s,s=u}if(n!==Ut)throw new Error("invert: does not exist");return re(i,t)}function Ed(e){let t=e-Ut,r=0;for(;t%ur===Jt;)t/=ur,r++;let n=ur;const i=mn(e);for(;n<e&&ho(i,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1){const o=(e+Ut)/rs;return function(a,u){const c=a.pow(u,o);if(!a.eql(a.sqr(c),u))throw new Error("Cannot find square root");return c}}const s=(t+Ut)/ur;return function(o,a){if(!ho(o,a))throw new Error("Cannot find square root");let u=r,c=o.pow(o.mul(o.ONE,n),t),l=o.pow(a,s),f=o.pow(a,t);for(;!o.eql(f,o.ONE);){if(o.eql(f,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(f);h<u&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const d=o.pow(c,Ut<<BigInt(u-h-1));c=o.sqr(d),l=o.mul(l,d),f=o.mul(f,c),u=h}return l}}function Ad(e){return e%rs===kd?function(t,r){const n=(e+Ut)/rs,i=t.pow(r,n);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}:e%lo===co?function(t,r){const n=t.mul(r,ur),i=(e-co)/lo,s=t.pow(n,i),o=t.mul(r,s),a=t.mul(t.mul(o,ur),s),u=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(u),r))throw new Error("Cannot find square root");return u}:Ed(e)}const Sd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Cd(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Sd.reduce((n,i)=>(n[i]="function",n),t);return ai(e,r)}function Dd(e,t,r){if(r<Jt)throw new Error("invalid exponent, negatives unsupported");if(r===Jt)return e.ONE;if(r===Ut)return t;let n=e.ONE,i=t;for(;r>Jt;)r&Ut&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Ut;return n}function Gl(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((o,a,u)=>e.is0(a)?o:(n[u]=o,e.mul(o,a)),e.ONE),s=e.inv(i);return t.reduceRight((o,a,u)=>e.is0(a)?o:(n[u]=e.mul(o,n[u]),e.mul(o,a)),s),n}function Td(e,t){const r=(e.ORDER-Ut)/ur,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),o=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!o)throw new Error("Cannot find square root: probably non-prime P");return i?1:s?0:-1}function ho(e,t){const r=Td(e,t);return r===0||r===1}function Zl(e,t){t!==void 0&&ts(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function mn(e,t,r=!1,n={}){if(e<=Jt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Zl(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:oi(i),ZERO:Jt,ONE:Ut,create:u=>re(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Jt<=u&&u<e},is0:u=>u===Jt,isOdd:u=>(u&Ut)===Ut,neg:u=>re(-u,e),eql:(u,c)=>u===c,sqr:u=>re(u*u,e),add:(u,c)=>re(u+c,e),sub:(u,c)=>re(u-c,e),mul:(u,c)=>re(u*c,e),pow:(u,c)=>Dd(a,u,c),div:(u,c)=>re(u*ns(c,e),e),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>ns(u,e),sqrt:n.sqrt||(u=>(o||(o=Ad(e)),o(a,u))),toBytes:u=>r?Wl(u,s):an(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return r?Vl(u):lr(u)},invertBatch:u=>Gl(a,u),cmov:(u,c,l)=>l?c:u});return Object.freeze(a)}function Kl(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Jl(e){const t=Kl(e);return t+Math.ceil(t/2)}function Fd(e,t,r=!1){const n=e.length,i=Kl(t),s=Jl(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Vl(e):lr(e),a=re(o,t-Ut)+Ut;return r?Wl(a,i):an(a,i)}function Od(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;e.setUint32(t+u,o,n),e.setUint32(t+c,a,n)}function Id(e,t,r){return e&t^~e&r}function Pd(e,t,r){return e&t^e&r^t&r}let Yl=class extends Ul{constructor(t,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=bi(this.buffer)}update(t){Vn(this),t=Is(t),pn(t);const{view:r,buffer:n,blockLen:i}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=bi(t);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Vn(this),md(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,Pr(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)r[f]=0;Od(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=bi(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,l[f],s)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=i,t.pos=a,i%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}};const je=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$t=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),zt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),En=BigInt(2**32-1),fo=BigInt(32);function Ld(e,t=!1){return t?{h:Number(e&En),l:Number(e>>fo&En)}:{h:Number(e>>fo&En)|0,l:Number(e&En)|0}}function Rd(e,t=!1){const r=e.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=Ld(e[s],t);[n[s],i[s]]=[o,a]}return[n,i]}const po=(e,t,r)=>e>>>r,mo=(e,t,r)=>e<<32-r|t>>>r,vr=(e,t,r)=>e>>>r|t<<32-r,xr=(e,t,r)=>e<<32-r|t>>>r,An=(e,t,r)=>e<<64-r|t>>>r-32,Sn=(e,t,r)=>e>>>r-32|t<<64-r;function Ee(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const Bd=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Md=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Nd=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),jd=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,$d=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),zd=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,Ud=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$e=new Uint32Array(64);class Hd extends Yl{constructor(t=32){super(64,t,8,!1),this.A=je[0]|0,this.B=je[1]|0,this.C=je[2]|0,this.D=je[3]|0,this.E=je[4]|0,this.F=je[5]|0,this.G=je[6]|0,this.H=je[7]|0}get(){const{A:t,B:r,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[t,r,n,i,s,o,a,u]}set(t,r,n,i,s,o,a,u){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,r){for(let f=0;f<16;f++,r+=4)$e[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){const h=$e[f-15],d=$e[f-2],p=de(h,7)^de(h,18)^h>>>3,m=de(d,17)^de(d,19)^d>>>10;$e[f]=m+$e[f-7]+p+$e[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:c,H:l}=this;for(let f=0;f<64;f++){const h=de(a,6)^de(a,11)^de(a,25),d=l+h+Id(a,u,c)+Ud[f]+$e[f]|0,p=(de(n,2)^de(n,13)^de(n,22))+Pd(n,i,s)|0;l=c,c=u,u=a,a=o+d|0,o=s,s=i,i=n,n=d+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,i,s,o,a,u,c,l)}roundClean(){Pr($e)}destroy(){this.set(0,0,0,0,0,0,0,0),Pr(this.buffer)}}const Xl=Rd(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),qd=Xl[0],Vd=Xl[1],ze=new Uint32Array(80),Ue=new Uint32Array(80);let Ql=class extends Yl{constructor(t=64){super(128,t,16,!1),this.Ah=zt[0]|0,this.Al=zt[1]|0,this.Bh=zt[2]|0,this.Bl=zt[3]|0,this.Ch=zt[4]|0,this.Cl=zt[5]|0,this.Dh=zt[6]|0,this.Dl=zt[7]|0,this.Eh=zt[8]|0,this.El=zt[9]|0,this.Fh=zt[10]|0,this.Fl=zt[11]|0,this.Gh=zt[12]|0,this.Gl=zt[13]|0,this.Hh=zt[14]|0,this.Hl=zt[15]|0}get(){const{Ah:t,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:c,El:l,Fh:f,Fl:h,Gh:d,Gl:p,Hh:m,Hl:g}=this;return[t,r,n,i,s,o,a,u,c,l,f,h,d,p,m,g]}set(t,r,n,i,s,o,a,u,c,l,f,h,d,p,m,g){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=f|0,this.Fl=h|0,this.Gh=d|0,this.Gl=p|0,this.Hh=m|0,this.Hl=g|0}process(t,r){for(let b=0;b<16;b++,r+=4)ze[b]=t.getUint32(r),Ue[b]=t.getUint32(r+=4);for(let b=16;b<80;b++){const w=ze[b-15]|0,v=Ue[b-15]|0,S=vr(w,v,1)^vr(w,v,8)^po(w,v,7),E=xr(w,v,1)^xr(w,v,8)^mo(w,v,7),T=ze[b-2]|0,I=Ue[b-2]|0,P=vr(T,I,19)^An(T,I,61)^po(T,I,6),B=xr(T,I,19)^Sn(T,I,61)^mo(T,I,6),D=Nd(E,B,Ue[b-7],Ue[b-16]),k=jd(D,S,P,ze[b-7],ze[b-16]);ze[b]=k|0,Ue[b]=D|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:c,Dl:l,Eh:f,El:h,Fh:d,Fl:p,Gh:m,Gl:g,Hh:y,Hl:_}=this;for(let b=0;b<80;b++){const w=vr(f,h,14)^vr(f,h,18)^An(f,h,41),v=xr(f,h,14)^xr(f,h,18)^Sn(f,h,41),S=f&d^~f&m,E=h&p^~h&g,T=$d(_,v,E,Vd[b],Ue[b]),I=zd(T,y,w,S,qd[b],ze[b]),P=T|0,B=vr(n,i,28)^An(n,i,34)^An(n,i,39),D=xr(n,i,28)^Sn(n,i,34)^Sn(n,i,39),k=n&s^n&a^s&a,x=i&o^i&u^o&u;y=m|0,_=g|0,m=d|0,g=p|0,d=f|0,p=h|0,{h:f,l:h}=Ee(c|0,l|0,I|0,P|0),c=a|0,l=u|0,a=s|0,u=o|0,s=n|0,o=i|0;const O=Bd(P,D,x);n=Md(O,I,B,k),i=O|0}({h:n,l:i}=Ee(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Ee(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=Ee(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l}=Ee(this.Dh|0,this.Dl|0,c|0,l|0),{h:f,l:h}=Ee(this.Eh|0,this.El|0,f|0,h|0),{h:d,l:p}=Ee(this.Fh|0,this.Fl|0,d|0,p|0),{h:m,l:g}=Ee(this.Gh|0,this.Gl|0,m|0,g|0),{h:y,l:_}=Ee(this.Hh|0,this.Hl|0,y|0,_|0),this.set(n,i,s,o,a,u,c,l,f,h,d,p,m,g,y,_)}roundClean(){Pr(ze,Ue)}destroy(){Pr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class Wd extends Ql{constructor(){super(48),this.Ah=$t[0]|0,this.Al=$t[1]|0,this.Bh=$t[2]|0,this.Bl=$t[3]|0,this.Ch=$t[4]|0,this.Cl=$t[5]|0,this.Dh=$t[6]|0,this.Dl=$t[7]|0,this.Eh=$t[8]|0,this.El=$t[9]|0,this.Fh=$t[10]|0,this.Fl=$t[11]|0,this.Gh=$t[12]|0,this.Gl=$t[13]|0,this.Hh=$t[14]|0,this.Hl=$t[15]|0}}const Gd=Ps(()=>new Hd),Zd=Ps(()=>new Ql),Kd=Ps(()=>new Wd);let th=class extends Ul{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,pd(t);const n=Is(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Pr(s)}update(t){return Vn(this),this.iHash.update(t),this}digestInto(t){Vn(this),pn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const eh=(e,t,r)=>new th(e,t).update(r).digest();eh.create=(e,t)=>new th(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const go=BigInt(0),is=BigInt(1);function wi(e,t){const r=t.negate();return e?r:t}function rh(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function vi(e,t){rh(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e,s=oi(e),o=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function bo(e,t,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(e&i),u=e>>o;a>n&&(a-=s,u+=is);const c=t*n,l=c+Math.abs(a)-1,f=a===0,h=a<0,d=t%2!==0;return{nextN:u,offset:l,isZero:f,isNeg:h,isNegF:d,offsetF:c}}function Jd(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function Yd(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const xi=new WeakMap,nh=new WeakMap;function ki(e){return nh.get(e)||1}function Xd(e,t){return{constTimeNegate:wi,hasPrecomputes(r){return ki(r)!==1},unsafeLadder(r,n,i=e.ZERO){let s=r;for(;n>go;)n&is&&(i=i.add(s)),s=s.double(),n>>=is;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=vi(n,t),o=[];let a=r,u=a;for(let c=0;c<i;c++){u=a,o.push(u);for(let l=1;l<s;l++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(r,n,i){let s=e.ZERO,o=e.BASE;const a=vi(r,t);for(let u=0;u<a.windows;u++){const{nextN:c,offset:l,isZero:f,isNeg:h,isNegF:d,offsetF:p}=bo(i,u,a);i=c,f?o=o.add(wi(d,n[p])):s=s.add(wi(h,n[l]))}return{p:s,f:o}},wNAFUnsafe(r,n,i,s=e.ZERO){const o=vi(r,t);for(let a=0;a<o.windows&&i!==go;a++){const{nextN:u,offset:c,isZero:l,isNeg:f}=bo(i,a,o);if(i=u,!l){const h=n[c];s=s.add(f?h.negate():h)}}return s},getPrecomputes(r,n,i){let s=xi.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&xi.set(n,i(s))),s},wNAFCached(r,n,i){const s=ki(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=ki(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){rh(n,t),nh.set(r,n),xi.delete(r)}}}function Qd(e,t,r,n){if(Jd(r,e),Yd(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=wd(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=oi(o),u=new Array(Number(a)+1).fill(i),c=Math.floor((t.BITS-1)/o)*o;let l=i;for(let f=c;f>=0;f-=o){u.fill(i);for(let d=0;d<n.length;d++){const p=n[d],m=Number(p>>BigInt(f)&a);u[m]=u[m].add(r[d])}let h=i;for(let d=u.length-1,p=i;d>0;d--)p=p.add(u[d]),h=h.add(p);if(l=l.add(h),f!==0)for(let d=0;d<o;d++)l=l.double()}return l}function ih(e){return Cd(e.Fp),ai(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Zl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _o(e){e.lowS!==void 0&&sn("lowS",e.lowS),e.prehash!==void 0&&sn("prehash",e.prehash)}function t0(e){const t=ih(e);ai(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class e0 extends Error{constructor(t=""){super(t)}}const Fe={Err:e0,_tlv:{encode:(e,t)=>{const{Err:r}=Fe;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=kn(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?kn(i.length/2|128):"";return kn(e)+s+i+t},decode(e,t){const{Err:r}=Fe;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");const c=t.subarray(n,n+u);if(c.length!==u)throw new r("tlv.decode: length bytes not complete");if(c[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of c)o=o<<8|l;if(n+=u,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=Fe;if(e<Ie)throw new t("integer: negative integers are not allowed");let r=kn(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=Fe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return lr(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Fe,i=ue("signature",e),{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,s),{v:c,l}=n.decode(2,u);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(e){const{_tlv:t,_int:r}=Fe,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),s=n+i;return t.encode(48,s)}},Ie=BigInt(0),Nt=BigInt(1);BigInt(2);const yo=BigInt(3);BigInt(4);function r0(e){const t=t0(e),{Fp:r}=t,n=mn(t.n,t.nBitLength),i=t.toBytes||((m,g,y)=>{const _=g.toAffine();return Gn(Uint8Array.from([4]),r.toBytes(_.x),r.toBytes(_.y))}),s=t.fromBytes||(m=>{const g=m.subarray(1),y=r.fromBytes(g.subarray(0,r.BYTES)),_=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:y,y:_}});function o(m){const{a:g,b:y}=t,_=r.sqr(m),b=r.mul(_,m);return r.add(r.add(b,r.mul(m,g)),y)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(m){return Bs(m,Nt,t.n)}function u(m){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:_,n:b}=t;if(g&&typeof m!="bigint"){if(Lr(m)&&(m=on(m)),typeof m!="string"||!g.includes(m.length))throw new Error("invalid private key");m=m.padStart(y*2,"0")}let w;try{w=typeof m=="bigint"?m:lr(ue("private key",m,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof m)}return _&&(w=re(w,b)),Dr("private key",w,Nt,b),w}function c(m){if(!(m instanceof h))throw new Error("ProjectivePoint expected")}const l=uo((m,g)=>{const{px:y,py:_,pz:b}=m;if(r.eql(b,r.ONE))return{x:y,y:_};const w=m.is0();g==null&&(g=w?r.ONE:r.inv(b));const v=r.mul(y,g),S=r.mul(_,g),E=r.mul(b,g);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(E,r.ONE))throw new Error("invZ was invalid");return{x:v,y:S}}),f=uo(m=>{if(m.is0()){if(t.allowInfinityPoint&&!r.is0(m.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=m.toAffine();if(!r.isValid(g)||!r.isValid(y))throw new Error("bad point: x or y not FE");const _=r.sqr(y),b=o(g);if(!r.eql(_,b))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(g,y,_){if(g==null||!r.isValid(g))throw new Error("x required");if(y==null||!r.isValid(y)||r.is0(y))throw new Error("y required");if(_==null||!r.isValid(_))throw new Error("z required");this.px=g,this.py=y,this.pz=_,Object.freeze(this)}static fromAffine(g){const{x:y,y:_}=g||{};if(!g||!r.isValid(y)||!r.isValid(_))throw new Error("invalid affine point");if(g instanceof h)throw new Error("projective point not allowed");const b=w=>r.eql(w,r.ZERO);return b(y)&&b(_)?h.ZERO:new h(y,_,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=Gl(r,g.map(_=>_.pz));return g.map((_,b)=>_.toAffine(y[b])).map(h.fromAffine)}static fromHex(g){const y=h.fromAffine(s(ue("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return h.BASE.multiply(u(g))}static msm(g,y){return Qd(h,n,g,y)}_setWindowSize(g){p.setWindowSize(this,g)}assertValidity(){f(this)}hasEvenY(){const{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){c(g);const{px:y,py:_,pz:b}=this,{px:w,py:v,pz:S}=g,E=r.eql(r.mul(y,S),r.mul(w,b)),T=r.eql(r.mul(_,S),r.mul(v,b));return E&&T}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:g,b:y}=t,_=r.mul(y,yo),{px:b,py:w,pz:v}=this;let S=r.ZERO,E=r.ZERO,T=r.ZERO,I=r.mul(b,b),P=r.mul(w,w),B=r.mul(v,v),D=r.mul(b,w);return D=r.add(D,D),T=r.mul(b,v),T=r.add(T,T),S=r.mul(g,T),E=r.mul(_,B),E=r.add(S,E),S=r.sub(P,E),E=r.add(P,E),E=r.mul(S,E),S=r.mul(D,S),T=r.mul(_,T),B=r.mul(g,B),D=r.sub(I,B),D=r.mul(g,D),D=r.add(D,T),T=r.add(I,I),I=r.add(T,I),I=r.add(I,B),I=r.mul(I,D),E=r.add(E,I),B=r.mul(w,v),B=r.add(B,B),I=r.mul(B,D),S=r.sub(S,I),T=r.mul(B,P),T=r.add(T,T),T=r.add(T,T),new h(S,E,T)}add(g){c(g);const{px:y,py:_,pz:b}=this,{px:w,py:v,pz:S}=g;let E=r.ZERO,T=r.ZERO,I=r.ZERO;const P=t.a,B=r.mul(t.b,yo);let D=r.mul(y,w),k=r.mul(_,v),x=r.mul(b,S),O=r.add(y,_),A=r.add(w,v);O=r.mul(O,A),A=r.add(D,k),O=r.sub(O,A),A=r.add(y,b);let C=r.add(w,S);return A=r.mul(A,C),C=r.add(D,x),A=r.sub(A,C),C=r.add(_,b),E=r.add(v,S),C=r.mul(C,E),E=r.add(k,x),C=r.sub(C,E),I=r.mul(P,A),E=r.mul(B,x),I=r.add(E,I),E=r.sub(k,I),I=r.add(k,I),T=r.mul(E,I),k=r.add(D,D),k=r.add(k,D),x=r.mul(P,x),A=r.mul(B,A),k=r.add(k,x),x=r.sub(D,x),x=r.mul(P,x),A=r.add(A,x),D=r.mul(k,A),T=r.add(T,D),D=r.mul(C,A),E=r.mul(O,E),E=r.sub(E,D),D=r.mul(O,k),I=r.mul(C,I),I=r.add(I,D),new h(E,T,I)}subtract(g){return this.add(g.negate())}is0(){return this.equals(h.ZERO)}wNAF(g){return p.wNAFCached(this,g,h.normalizeZ)}multiplyUnsafe(g){const{endo:y,n:_}=t;Dr("scalar",g,Ie,_);const b=h.ZERO;if(g===Ie)return b;if(this.is0()||g===Nt)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,g,h.normalizeZ);let{k1neg:w,k1:v,k2neg:S,k2:E}=y.splitScalar(g),T=b,I=b,P=this;for(;v>Ie||E>Ie;)v&Nt&&(T=T.add(P)),E&Nt&&(I=I.add(P)),P=P.double(),v>>=Nt,E>>=Nt;return w&&(T=T.negate()),S&&(I=I.negate()),I=new h(r.mul(I.px,y.beta),I.py,I.pz),T.add(I)}multiply(g){const{endo:y,n:_}=t;Dr("scalar",g,Nt,_);let b,w;if(y){const{k1neg:v,k1:S,k2neg:E,k2:T}=y.splitScalar(g);let{p:I,f:P}=this.wNAF(S),{p:B,f:D}=this.wNAF(T);I=p.constTimeNegate(v,I),B=p.constTimeNegate(E,B),B=new h(r.mul(B.px,y.beta),B.py,B.pz),b=I.add(B),w=P.add(D)}else{const{p:v,f:S}=this.wNAF(g);b=v,w=S}return h.normalizeZ([b,w])[0]}multiplyAndAddUnsafe(g,y,_){const b=h.BASE,w=(S,E)=>E===Ie||E===Nt||!S.equals(b)?S.multiplyUnsafe(E):S.multiply(E),v=w(this,y).add(w(g,_));return v.is0()?void 0:v}toAffine(g){return l(this,g)}isTorsionFree(){const{h:g,isTorsionFree:y}=t;if(g===Nt)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=t;return g===Nt?this:y?y(h,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return sn("isCompressed",g),this.assertValidity(),i(h,this,g)}toHex(g=!0){return sn("isCompressed",g),on(this.toRawBytes(g))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,p=Xd(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function n0(e){const t=ih(e);return ai(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function i0(e){const t=n0(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(x){return re(x,n)}function a(x){return ns(x,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:l,isWithinCurveOrder:f}=r0({...t,toBytes(x,O,A){const C=O.toAffine(),L=r.toBytes(C.x),R=Gn;return sn("isCompressed",A),A?R(Uint8Array.from([O.hasEvenY()?2:3]),L):R(Uint8Array.from([4]),L,r.toBytes(C.y))},fromBytes(x){const O=x.length,A=x[0],C=x.subarray(1);if(O===i&&(A===2||A===3)){const L=lr(C);if(!Bs(L,Nt,r.ORDER))throw new Error("Point is not on curve");const R=l(L);let U;try{U=r.sqrt(R)}catch(z){const Y=z instanceof Error?": "+z.message:"";throw new Error("Point is not on curve"+Y)}const N=(U&Nt)===Nt;return(A&1)===1!==N&&(U=r.neg(U)),{x:L,y:U}}else if(O===s&&A===4){const L=r.fromBytes(C.subarray(0,r.BYTES)),R=r.fromBytes(C.subarray(r.BYTES,2*r.BYTES));return{x:L,y:R}}else{const L=i,R=s;throw new Error("invalid Point, expected length of "+L+", or uncompressed "+R+", got "+O)}}}),h=x=>on(an(x,t.nByteLength));function d(x){const O=n>>Nt;return x>O}function p(x){return d(x)?o(-x):x}const m=(x,O,A)=>lr(x.slice(O,A));class g{constructor(O,A,C){Dr("r",O,Nt,n),Dr("s",A,Nt,n),this.r=O,this.s=A,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(O){const A=t.nByteLength;return O=ue("compactSignature",O,A*2),new g(m(O,0,A),m(O,A,2*A))}static fromDER(O){const{r:A,s:C}=Fe.toSig(ue("DER",O));return new g(A,C)}assertValidity(){}addRecoveryBit(O){return new g(this.r,this.s,O)}recoverPublicKey(O){const{r:A,s:C,recovery:L}=this,R=S(ue("msgHash",O));if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");const U=L===2||L===3?A+t.n:A;if(U>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const N=(L&1)===0?"02":"03",z=u.fromHex(N+h(U)),Y=a(U),G=o(-R*Y),K=o(C*Y),ut=u.BASE.multiplyAndAddUnsafe(z,G,K);if(!ut)throw new Error("point at infinify");return ut.assertValidity(),ut}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Wn(this.toDERHex())}toDERHex(){return Fe.hexFromSig(this)}toCompactRawBytes(){return Wn(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(x){try{return c(x),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const x=Jl(t.n);return Fd(t.randomBytes(x),t.n)},precompute(x=8,O=u.BASE){return O._setWindowSize(x),O.multiply(BigInt(3)),O}};function _(x,O=!0){return u.fromPrivateKey(x).toRawBytes(O)}function b(x){const O=Lr(x),A=typeof x=="string",C=(O||A)&&x.length;return O?C===i||C===s:A?C===2*i||C===2*s:x instanceof u}function w(x,O,A=!0){if(b(x))throw new Error("first arg must be private key");if(!b(O))throw new Error("second arg must be public key");return u.fromHex(O).multiply(c(x)).toRawBytes(A)}const v=t.bits2int||function(x){if(x.length>8192)throw new Error("input is too large");const O=lr(x),A=x.length*8-t.nBitLength;return A>0?O>>BigInt(A):O},S=t.bits2int_modN||function(x){return o(v(x))},E=oi(t.nBitLength);function T(x){return Dr("num < 2^"+t.nBitLength,x,Ie,E),an(x,t.nByteLength)}function I(x,O,A=P){if(["recovered","canonical"].some(at=>at in A))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:L}=t;let{lowS:R,prehash:U,extraEntropy:N}=A;R==null&&(R=!0),x=ue("msgHash",x),_o(A),U&&(x=ue("prehashed msgHash",C(x)));const z=S(x),Y=c(O),G=[T(Y),T(z)];if(N!=null&&N!==!1){const at=N===!0?L(r.BYTES):N;G.push(ue("extraEntropy",at))}const K=Gn(...G),ut=z;function yt(at){const ht=v(at);if(!f(ht))return;const bt=a(ht),dt=u.BASE.multiply(ht).toAffine(),_t=o(dt.x);if(_t===Ie)return;const At=o(bt*o(ut+_t*Y));if(At===Ie)return;let F=(dt.x===_t?0:2)|Number(dt.y&Nt),W=At;return R&&d(At)&&(W=p(At),F^=1),new g(_t,W,F)}return{seed:K,k2sig:yt}}const P={lowS:t.lowS,prehash:!1},B={lowS:t.lowS,prehash:!1};function D(x,O,A=P){const{seed:C,k2sig:L}=I(x,O,A),R=t;return vd(R.hash.outputLen,R.nByteLength,R.hmac)(C,L)}u.BASE._setWindowSize(8);function k(x,O,A,C=B){var At;const L=x;O=ue("msgHash",O),A=ue("publicKey",A);const{lowS:R,prehash:U,format:N}=C;if(_o(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(N!==void 0&&N!=="compact"&&N!=="der")throw new Error("format must be compact or der");const z=typeof L=="string"||Lr(L),Y=!z&&!N&&typeof L=="object"&&L!==null&&typeof L.r=="bigint"&&typeof L.s=="bigint";if(!z&&!Y)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,K;try{if(Y&&(G=new g(L.r,L.s)),z){try{N!=="compact"&&(G=g.fromDER(L))}catch(F){if(!(F instanceof Fe.Err))throw F}!G&&N!=="der"&&(G=g.fromCompact(L))}K=u.fromHex(A)}catch{return!1}if(!G||R&&G.hasHighS())return!1;U&&(O=t.hash(O));const{r:ut,s:yt}=G,at=S(O),ht=a(yt),bt=o(at*ht),dt=o(ut*ht),_t=(At=u.BASE.multiplyAndAddUnsafe(K,bt,dt))==null?void 0:At.toAffine();return _t?o(_t.x)===ut:!1}return{CURVE:t,getPublicKey:_,getSharedSecret:w,sign:D,verify:k,ProjectivePoint:u,Signature:g,utils:y}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function s0(e){return{hash:e,hmac:(t,...r)=>eh(e,t,bd(...r)),randomBytes:_d}}function Ms(e,t){const r=n=>i0({...e,...s0(n)});return{...r(t),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sh=mn(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),o0=sh.create(BigInt("-3")),a0=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),u0=Ms({a:o0,b:a0,Fp:sh,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Gd),oh=mn(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),c0=oh.create(BigInt("-3")),l0=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");Ms({a:c0,b:l0,Fp:oh,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},Kd);const ah=mn(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),h0=ah.create(BigInt("-3")),f0=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");Ms({a:h0,b:f0,Fp:ah,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Zd);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wo=u0;async function J_(e,t){const r=new TextEncoder,n=e?typeof e=="string"?r.encode(p0(e)):e:crypto.getRandomValues(new Uint8Array(32)),i=[],s=r.encode(i.join("|")),o=new Uint8Array(n.length+s.length);if(o.set(n),o.set(s,n.length),o.length<16)throw new Error(`Insufficient input entropy (${o.length})`);const a="v1",u=[{label:"signing",type:"pub/priv"},{label:"encryption",type:"epub/epriv"}],[c,l]=await Promise.all(u.map(async({label:f})=>{const h=r.encode(`${f}-${a}`),d=await m0(o,h);if(!wo.utils.isValidPrivateKey(d))throw new Error(`Invalid private key for ${f}`);const p=wo.getPublicKey(d,!1);return{pub:d0(p),priv:ss(d)}}));return{pub:c.pub,priv:c.priv,epub:l.pub,epriv:l.priv}}function ss(e){return btoa(String.fromCharCode(...e)).replace(/\//g,"_").replace(/=/g,"").replace(/\+/g,"-")}function d0(e){if(e[0]!==4)throw new Error("Invalid uncompressed public key format");return[ss(e.slice(1,33)),ss(e.slice(33,65))].join(".")}function p0(e){return e.normalize("NFC").trim()}async function m0(e,t,r=3e5){const n=await crypto.subtle.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]),i=await crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:"SHA-256"},n,256);return new Uint8Array(i)}const We=Re("cast-camera","default"),Tr=Re("cast-mic","default"),g0=Yt(""),vo=Yt(!0),xo=Re("slidev-record-mimetype","video/webm"),b0={"video/webm":"webm","video/webm;codecs=h264":"mp4","video/x-matroska;codecs=avc1":"mkv"};function Zn(e,t){const r=new Date,n=o=>`${o}`.padStart(2,"0"),i=`${n(r.getMonth()+1)}${n(r.getDate())}-${n(r.getHours())}${n(r.getMinutes())}`,s=t?b0[t]:"webm";return`${[i,e,g0.value].filter(o=>!!o).join("-")}.${s}`}xt({screen:Lt(()=>Zn("screen",xo.value)),camera:Lt(()=>Zn("camera",xo.value))});const{videoInputs:ko,audioInputs:Eo,ensurePermissions:Ao}=Cf({onUpdated:function(){var e,t;We.value!=="none"&&(ko.value.find(r=>r.deviceId===We.value)||(We.value=((e=ko.value[0])==null?void 0:e.deviceId)||"default")),Tr.value!=="none"&&(Eo.value.find(r=>r.deviceId===Tr.value)||(Tr.value=((t=Eo.value[0])==null?void 0:t.deviceId)||"default"))}});function So(e,t){const r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",e),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function _0(){const e=Yt(!1),t=Yt(0),r=Df();nn(e,y=>y?t.value=Date.now():t.value=0);const n=Lt(()=>t.value?r.value-t.value:0),i=Yt(!1),s=Vr(),o=Vr(),a=Vr(),u=Vr(),c=Vr(),l={type:"video",bitsPerSecond:4*256*8*1024,timeSlice:24*60*60*1e3};async function f(){We.value!=="none"&&(i.value?(i.value=!1,e.value||m(a)):(await h(),a.value&&(i.value=!!a.value)))}async function h(){if(await Ao(),await Pu(),!a.value){if(We.value==="none"&&Tr.value==="none")return;a.value=await navigator.mediaDevices.getUserMedia({video:We.value==="none"||vo.value!==!0?!1:{deviceId:We.value},audio:Tr.value==="none"?!1:{deviceId:Tr.value}})}}nn(We,async y=>{if(y==="none")m(a);else{if(e.value)return;a.value&&(m(a),await h())}});async function d(y={}){var b;await Ao();const{default:_}=await Z(async()=>{const{default:w}=await import("./RecordRTC.2GIslAcv.js").then(v=>v.R);return{default:w}},[]);if(await h(),u.value=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:30,width:3840,height:2160}}),u.value.addEventListener("inactive",p),c.value=new MediaStream,u.value.getVideoTracks().forEach(w=>c.value.addTrack(w)),Object.assign(l,y),a.value){const w=(b=a.value.getAudioTracks())==null?void 0:b[0];w&&c.value.addTrack(w),s.value=new _(a.value,l),s.value.startRecording()}o.value=new _(c.value,l),o.value.startRecording(),e.value=!0}async function p(){var y,_;e.value=!1,(y=s.value)==null||y.stopRecording(()=>{if(vo.value){const b=s.value.getBlob(),w=URL.createObjectURL(b);So(Zn("camera",l.mimeType),w),window.URL.revokeObjectURL(w)}s.value=void 0,i.value||m(a)}),(_=o.value)==null||_.stopRecording(()=>{const b=o.value.getBlob(),w=URL.createObjectURL(b);So(Zn("screen",l.mimeType),w),window.URL.revokeObjectURL(w),m(u),m(c),o.value=void 0})}function m(y){const _=y.value;_&&(_.getTracks().forEach(b=>{b.stop(),_.removeTrack(b)}),y.value=void 0)}function g(){e.value?p():d()}return Tf("beforeunload",y=>{e.value&&(confirm("Recording is not saved yet, do you want to leave?")||(y.preventDefault(),y.returnValue=""))}),{recording:e,recordingTime:n,showAvatar:i,toggleRecording:g,startRecording:d,stopRecording:p,toggleAvatar:f,recorderCamera:s,recorderSlides:o,streamCamera:a,streamCapture:u,streamSlides:c}}_0();var jn={exports:{}},y0=jn.exports,Co;function w0(){return Co||(Co=1,function(e,t){(function(r,n,i){e.exports=i(),e.exports.default=i()})("slugify",y0,function(){var r=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),n=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function i(s,o){if(typeof s!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var a=n[o.locale]||{},u=o.replacement===void 0?"-":o.replacement,c=o.trim===void 0?!0:o.trim,l=s.normalize().split("").reduce(function(f,h){var d=a[h];return d===void 0&&(d=r[h]),d===void 0&&(d=h),d===u&&(d=" "),f+d.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(l=l.replace(/[^A-Za-z0-9\s]/g,"")),c&&(l=l.trim()),l=l.replace(/\s+/g,u),o.lower&&(l=l.toLowerCase()),l}return i.extend=function(s){Object.assign(r,s)},i})}(jn)),jn.exports}var v0=w0();const Do=Nr(v0),Cn=Yt("general"),os="chat";function Y_(e="general"){const t=Tt(),{user:r}=br();Cn.value=e;const n=xt({}),i=xt({}),s=xt({});t.user(pt.pub).get(os).map().once((l,f)=>{const[h,d]=f.split("@");n[h]||(n[h]={upvotes:new Set,downvotes:new Set}),n[h].upvotes.delete(d),n[h].downvotes.delete(d),l===!0?(n[h].upvotes.add(d),d==r.pub&&(delete i[h],s[h]=!0)):l===!1?(n[h].downvotes.add(d),d==r.pub&&(i[h]=!0,delete s[h])):l===null&&d==r.pub&&(delete i[h],delete s[h])});const o=Lt(()=>Object.entries(n).map(([l,f])=>({title:l,authors:Array.from(f.upvotes),rating:f.upvotes.size-f.downvotes.size,my:f.upvotes.has(r.pub)?1:f.downvotes.has(r.pub)?-1:0})).filter(l=>l.title=="general"||s[l.title]||!i[l.title]&&l.rating>=0).sort((l,f)=>f.rating-l.rating)),a=Lt(()=>{const l=xt({});return t.user(pt.pub).get("chat/"+Cn.value).map().on((f,h)=>{const d=h.substring(0,13),p=h.substring(14);f?l[h]={timestamp:d,author:p,text:f}:delete l[h]}),l}),u=Lt(()=>Ff(Lt(()=>Object.values(a.value||{}))).value.sort((l,f)=>l.timestamp>f.timestamp?1:-1));function c(l){if(!l)return;const f=Date.now();t.user(pt.pub).get("chat/"+Cn.value).get(`${f}@${r.pub}`).put(l,void 0,{opt:{cert:pt.features.chat}})}return{send:c,addChat:l=>To(l,!0),removeChat:l=>To(l,!1),currentChat:Cn,chats:o,messages:a,sorted:u}}async function To(e,t=!0){const r=Tt(),{user:n}=br(),s=await r.user(pt.pub).get(os).get(`${Do(e)}@${n.pub}`).then()===t?null:t;r.user(pt.pub).get(os).get(`${Do(e)}@${n.pub}`).put(s,void 0,{opt:{cert:pt.features.chat}})}var x0={},en=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ns(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fo={exports:{}},Oo;function jr(){return Oo||(Oo=1,function(e){(function(){function t(n,i){return i?Ns(n):n.slice?t[s(n)]:function(o,a){n(o={exports:{}}),t[s(a)]=o.exports};function s(o){return o.split("/").slice(-1).toString().replace(".js","")}}var r=e;t(function(n){String.random=function(s,o){var a="";for(s=s||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";s-- >0;)a+=o.charAt(Math.floor(Math.random()*o.length));return a},String.match=function(s,o){var a,u;return typeof s!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},a=o["="]||o["*"]||o[">"]||o["<"],s===a?!0:u!==o["="]?!1:(a=o["*"]||o[">"],s.slice(0,(a||"").length)===a?!0:u!==o["*"]?!1:u!==o[">"]&&u!==o["<"]?s>=o[">"]&&s<=o["<"]:u!==o[">"]&&s>=o[">"]||u!==o["<"]&&s<=o["<"]))},String.hash=function(s,o){if(typeof s=="string"){if(o=o||0,!s.length)return o;for(var a=0,u=s.length,c;a<u;++a)c=s.charCodeAt(a),o=(o<<5)-o+c,o|=0;return o}};var i=Object.prototype.hasOwnProperty;Object.plain=function(s){return s?s instanceof Object&&s.constructor===Object||Object.prototype.toString.call(s).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(s,o){for(var a in s)if(i.call(s,a)&&(!o||o.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(s){var o=[];for(var a in s)i.call(s,a)&&o.push(a);return o},function(){var s,o=setTimeout,a=0,u=0,c=typeof setImmediate!=""+s&&setImmediate||function(f,h){return typeof MessageChannel==""+s?o:((f=new MessageChannel).port1.onmessage=function(d){d.data==""&&h()},function(d){h=d,f.port2.postMessage("")})}(),l=o.check=o.check||typeof performance!=""+s&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(f){if(o.hold>=l.now()-a&&u++<3333){f();return}c(function(){a=l.now(),f()},u=0)}}(),function(){var s=setTimeout,o=s.turn=s.turn||function(h){a.push(h)==1&&u(f)},a=o.s=[],u=s.poll,c=0,l,f=function(){(l=a[c++])&&l(),(c==a.length||c==99)&&(a=o.s=a.slice(c),c=0),a.length&&u(f)}}(),function(){var s,o=setTimeout,a=o.turn;(o.each=o.each||function(u,c,l,f){f=f||9,function h(d,p,m){if(p=(d=(u||[]).splice(0,f)).length){for(var g=0;g<p&&s===(m=c(d[g]));g++);if(s===m){a(h);return}}l&&l(m)}()})()}()})(t,"./shim"),t(function(n){n.exports=function i(l,o,a){if(!l)return{to:i};var u,c=typeof o=="function",l=(this.tag||(this.tag={}))[l]||c&&(this.tag[l]={tag:l,to:i._={next:function(h){var d;(d=this.to)&&d.next(h)}}});if(c){var f={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:o,the:l,on:this,as:a};return(f.back=l.last||l).to=f,l.last=f}return(l=l.to)&&u!==o&&l.next(o),l}})(t,"./onto"),t(function(n){n.exports=function(i){return i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"&&i!=1/0&&i!=-1/0&&i===i||!!i&&typeof i["#"]=="string"&&Object.keys(i).length===1&&i["#"]}})(t,"./valid"),t(function(n){t("./shim");function i(){var l=+new Date;return u<l?(o=0,u=l+i.drift):u=l+(o+=1)/a+i.drift}i.drift=0;var s=-1/0,o=0,a=999,u=s,c;i.is=function(l,f,h){var d=f&&l&&l._&&l._[">"]||h;if(d)return typeof(d=d[f])=="number"?d:s},i.ify=function(l,f,h,d,p){(l=l||{})._=l._||{},p&&(l._["#"]=p);var m=l._[">"]||(l._[">"]={});return c!==f&&f!=="_"&&(typeof h=="number"&&(m[f]=h),c!==d&&(l[f]=d)),l},n.exports=i})(t,"./state"),t(function(n){t("./shim");function i(s){var o={s:{}},a=o.s;s=s||{max:999,age:1e3*9},o.check=function(c){return a[c]?u(c):!1};var u=o.track=function(c){var l=a[c]||(a[c]={});return l.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,s.age+9)),u.ed&&u.ed(c),l};return o.drop=function(c){o.to=null,o.now=+new Date;var l=Object.keys(a);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(l,function(f){var h=a[f];h&&(c||s.age)>o.now-h.was||delete a[f]},0,99)},o}n.exports=i})(t,"./dup"),t(function(n){t("./onto"),n.exports=function(s,o){if(this.on){var a=(this.opt||{}).lack||9e3;if(typeof s!="function"){if(!s)return;var c=s["#"]||s,u=(this.tag||"")[c];return u?(o&&(u=this.on(c,o),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},a)),!0):void 0}var c=o&&o["#"]||i(9);if(!s)return c;var l=this.on(c,s,o);return l.err=l.err||setTimeout(function(){l.off(),l.next({err:"Error: No ACK yet.",lack:!0})},a),c}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(n){function i(p){return p instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:p}):new i(p)}i.is=function(p){return p instanceof i||p&&p._&&p===p._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},t("./shim"),i.valid=t("./valid"),i.state=t("./state"),i.on=t("./onto"),i.dup=t("./dup"),i.ask=t("./ask"),function(){i.create=function(k){k.root=k.root||k,k.graph=k.graph||{},k.on=k.on||i.on,k.ask=k.ask||i.ask,k.dup=k.dup||i.dup();var x=k.$.opt(k.opt);return k.once||(k.on("in",p,k),k.on("out",p,k),k.on("put",y,k),i.on("create",k),k.on("create",k)),k.once=1,x};function p(k){if(k){if(k.out===p){this.to.next(k);return}var x=this,O=x.as,A=O.at||O,C=A.$,L=A.dup,R,U=k.DBG;if((R=k["#"])||(R=k["#"]=o(9)),!L.check(R)){if(L.track(R),R=k._,k._=typeof R=="function"?R:function(){},k.$&&k.$===(k.$._||"").$||(k.$=C),k["@"]&&!k.put&&b(k),!A.ask(k["@"],k))if(U&&(U.u=+new Date),k.put){m(k);return}else k.get&&i.on.get(k,C);U&&(U.uc=+new Date),x.to.next(k),U&&(U.ua=+new Date),!(k.nts||k.NTS)&&(k.out=p,A.on("out",k),U&&(U.ue=+new Date))}}}function m(k){if(k){var x=k._||"",O=x.root=((x.$=k.$||"")._||"").root;if(k["@"]&&x.faith&&!x.miss){k.out=p,O.on("out",k);return}x.latch=O.hatch,x.match=O.hatch=[];var A=k.put,C=x.DBG=k.DBG,L=+new Date;if(B=B||L,!(A["#"]&&A["."])){C&&(C.p=L),x["#"]=k["#"],x.msg=k,x.all=0,x.stun=1;var R=Object.keys(A);console.STAT&&console.STAT(L,((C||x).pk=+new Date)-L,"put sort");var U=0,N,z,Y,G,K,ut,yt;(function at(ht){if(N!=U){if(N=U,!(Y=R[U])){console.STAT&&console.STAT(L,((C||x).pd=+new Date)-L,"put"),_(x);return}(G=A[Y])?(yt=G._)?Y!==yt["#"]?ut=v+S(Y)+"soul not same.":(K=yt[">"])||(ut=v+S(Y)+"no state."):ut=v+S(Y)+"no meta.":ut=v+S(Y)+"no node.",z=Object.keys(G||{})}if(ut){k.err=x.err=ut,_(x);return}var bt=0,dt;for(ht=ht||0;ht++<9&&(dt=z[bt++]);)if(dt!=="_"){var _t=G[dt],At=K[dt];if(f===At){ut=v+S(dt)+"on"+S(Y)+"no state.";break}if(!u(_t)){ut=v+S(dt)+"on"+S(Y)+"bad "+typeof _t+S(_t);break}g(_t,dt,Y,At,k),++P}if((z=z.slice(bt)).length){a(at);return}++U,z=null,at(ht)})()}}}i.on.put=m;function g(k,x,O,A,C){var L=C._||"",R=L.root,U=R.graph,N,z=U[O]||h,Y=c(z,x,1),G=z[x],K=L.DBG;(N=console.STAT)&&(!U[O]||!G)&&(N.has=(N.has||0)+1);var ut=I();if(A>ut){setTimeout(function(){g(k,x,O,A,C)},(N=A-ut)>T?T:N),console.STAT&&console.STAT((K||L).Hf=+new Date,N,"future");return}if(!(A<Y)&&!(!L.faith&&A===Y&&(k===G||E(k)<=E(G))&&!L.miss)){L.stun++;var yt=C["#"]+L.all++,at={toString:function(){return yt},_:L};at.toJSON=at.toString,R.dup.track(at)["#"]=C["#"],K&&(K.ph=K.ph||+new Date),R.on("put",{"#":at,"@":C["@"],put:{"#":O,".":x,":":k,">":A},ok:C.ok,_:L})}}function y(k){var x;(x=(k._||"").DBG)&&(x.pa=+new Date,x.pm=x.pm||+new Date);var O=this,A=O.as,C=A.graph,L=k._,R=k.put,U=R["#"],N=R["."],z=R[":"],Y=R[">"];k["#"];var G;(G=L.msg)&&(G=G.put)&&(G=G[U])&&l(G,N,Y,z,U),C[U]=l(C[U],N,Y,z,U),(G=(A.next||"")[U])&&G.on("in",k),_(L),O.to.next(k)}function _(k,x){var O;if(!k.stop&&!(!k.err&&0<--k.stun)&&(k.stop=1,!!(O=k.root))){var A=k.match;A.end=1,A===O.hatch&&(!(A=k.latch)||A.end?delete O.hatch:O.hatch=A),k.hatch&&k.hatch(),setTimeout.each(k.match,function(C){C&&C()}),!(!(x=k.msg)||k.err||x.err)&&(x.out=p,k.root.on("out",x),D())}}function b(k){var x=k["@"]||"",O;if(!(O=x._)){var A=(A=k.$)&&(A=A._)&&(A=A.root)&&(A=A.dup);if(!(A=A.check(x)))return;k["@"]=A["#"]||k["@"];return}O.acks=(O.acks||0)+1,(O.err=k.err)&&(k["@"]=O["#"],_(O)),O.ok=k.ok||O.ok,!O.stop&&!O.crack&&(O.crack=O.match&&O.match.push(function(){w(O)})),w(O)}function w(k){!k||!k.root||k.stun||k.acks!==k.all||k.root.on("in",{"@":k["#"],err:k.err,ok:k.err?f:k.ok||{"":1}})}var v="Error: Invalid graph!",S=function(k){return" '"+(""+k).slice(0,9)+"...' "},E=JSON.stringify,T=2147483647,I=i.state,P=0,B,D=function(){P>999&&P/-(B-(B=+new Date))>1&&(i.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),D=function(){P=0})}}(),function(){i.on.get=function(m,g){var y=g._,_=m.get,b=_["#"],w=y.graph[b],v=_["."],S=y.next||(y.next={}),E=S[b],T=m._||{},I=T.DBG=m.DBG;if(I&&(I.g=+new Date),!w)return y.on("get",m);if(v){if((typeof v!="string"||f===w[v])&&!((E||"").next||"")[v]){y.on("get",m);return}w=l({},v,c(w,v),w[v],b)}w&&p(m,w),y.on("get",m)};function p(m,g){var y=+new Date,_=m._||{},b=_.DBG=m.DBG,w=m["#"],v=o(9),S=Object.keys(g||"").sort(),E=((g||"")._||"")["#"];S.length;var T=m.$._.root,I=g===T.graph[E];console.STAT&&console.STAT(y,((b||_).gk=+new Date)-y,"got keys"),g&&function P(){y=+new Date;for(var B=0,D,k={},x;B<9&&(D=S[B++]);)l(k,D,c(g,D),g[D],E);S=S.slice(B),(x={})[E]=k,k=x;var O;I&&(O=function(){},O.ram=O.faith=!0),x=S.length,console.STAT&&console.STAT(y,-(y-(y=+new Date)),"got copied some"),b&&(b.ga=+new Date),T.on("in",{"@":w,"#":v,put:k,"%":x?v=o(9):f,$:T.$,_:O,DBG:b,FOO:1}),console.STAT&&console.STAT(y,+new Date-y,"got in"),x&&setTimeout.turn(P)}(),g||T.on("in",{"@":m["#"]})}i.on.get.ack=p}(),function(){i.chain.opt=function(p){p=p||{};var m=this,g=m._,y=p.peers||p;return Object.plain(p)||(p={}),Object.plain(g.opt)||(g.opt=p),typeof y=="string"&&(y=[y]),Object.plain(g.opt.peers)||(g.opt.peers={}),y instanceof Array&&(p.peers={},y.forEach(function(_){var b={};b.id=b.url=_,p.peers[_]=g.opt.peers[_]=g.opt.peers[_]||b})),s(p,function _(b){var w=this[b];if(this&&this.hasOwnProperty(b)||typeof w=="string"||Object.empty(w)){this[b]=w;return}w&&w.constructor!==Object&&!(w instanceof Array)||s(w,_)}),g.opt.from=p,i.on("opt",g),g.opt.uuid=g.opt.uuid||function(_){return i.state().toString(36).replace(".","")+String.random(_||12)},m}}();var s=function(p,m){Object.keys(p).forEach(m,p)},o=String.random,a=setTimeout.turn,u=i.valid,c=i.state.is,l=i.state.ify,f,h={},d;i.log=function(){return!i.log.off&&d.log.apply(d,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(p,m,g){return(g=i.log.once)[p]=g[p]||0,g[p]++||i.log(m)},typeof window<"u"&&((window.GUN=window.Gun=i).window=window);try{typeof r<"u"&&(r.exports=i)}catch{}n.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(d=console).only=function(p,m){return d.only.i&&p===d.only.i&&d.only.i++&&(d.log.apply(d,arguments)||m)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(n){var i=t("./root");i.chain.back=function(a,u){var c;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var l=this,f=l._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var h=0,d=a.length,c=f;for(h;h<d;h++)c=(c||s)[a[h]];return o!==c?u?l:c:(c=f.back)?c.$.back(a,u):void 0}if(typeof a=="function"){for(var p,c={back:f};(c=c.back)&&o===(p=a(c,u)););return p}return typeof a=="number"?(f.back||f).$.back(a-1):this};var s={},o})(t,"./back"),t(function(n){var i=t("./root");i.chain.chain=function(_){var b=this,w=b._,v=new(_||b).constructor(b),S=v._,E;return S.root=E=w.root,S.id=++E.once,S.back=b._,S.on=i.on,S.on("in",i.on.in,S),S.on("out",i.on.out,S),v};function s(_){var b,w=this.as,v=w.back,S=w.root,E;if(_.$||(_.$=w.$),this.to.next(_),w.err){w.on("in",{put:w.put=f,$:w.$});return}if(b=_.get){if(S.pass&&(S.pass[w.id]=w),w.lex&&Object.keys(w.lex).forEach(function(T){E[T]=w.lex[T]},E=_.get=_.get||{}),b["#"]||w.soul){if(b["#"]=b["#"]||w.soul,_["#"]||(_["#"]=h(9)),v=S.$.get(b["#"])._,b=b["."]){if(p(v.put,b)&&(E=v.ask&&v.ask[b],(v.ask||(v.ask={}))[b]=v.$.get(b)._,v.on("in",{get:b,put:{"#":v.soul,".":b,":":v.put[b],">":g(S.graph[v.soul],b)}}),E))return}else{if(E=v.ask&&v.ask[""],(v.ask||(v.ask={}))[""]=v,f!==v.put&&(v.on("in",v),E))return;_.$=v.$}return S.ask(c,_),S.on("in",_)}if(b["."])return w.get?(_={get:{".":w.get},$:w.$},(v.ask||(v.ask={}))[w.get]=_.$._,v.on("out",_)):(_={get:w.lex?_.get:{},$:w.$},v.on("out",_));if((w.ask||(w.ask={}))[""]=w,w.get)return b["."]=w.get,(v.ask||(v.ask={}))[w.get]=_.$._,v.on("out",_)}return v.on("out",_)}i.on.out=s;function o(_,b){b=b||this.as;var w=b.root,v=_.$||(_.$=b.$),S=(v||"")._||l,E=_.put||"",T=E["#"],I=E["."],P=f!==E["="]?E["="]:E[":"],B=E[">"]||-1/0,D;if(f!==_.put&&(f===E["#"]||f===E["."]||f===E[":"]&&f===E["="]||f===E[">"])){if(!d(E)){if(!(T=((E||"")._||"")["#"])){console.log("chain not yet supported for",E,"...",_,b);return}return v=b.root.$.get(T),setTimeout.each(Object.keys(E).sort(),function(k){k=="_"||f===(B=g(E,k))||b.on("in",{$:v,put:{"#":T,".":k,"=":E[k],">":B},VIA:_})})}b.on("in",{$:S.back.$,put:{"#":T=S.back.soul,".":I=S.has||S.get,"=":E,">":g(S.back.put,I)},via:_});return}(_.seen||"")[b.id]||((_.seen||(_.seen=function(){}))[b.id]=b,b!==S&&(Object.keys(_).forEach(function(k){E[k]=_[k]},E={}),E.get=b.get||E.get,!b.soul&&!b.has?E.$$$=E.$$$||b.$:S.soul&&(E.$=b.$,E.$$=E.$$||S.$),_=E),u(_,b),(b.soul||_.$$)&&B>=g(w.graph[T],I)&&((E=w.$.get(T)._).put=y(E.put,I,B,P,T)),!S.soul&&B>=g(w.graph[T],I)&&(D=(w.$.get(T)._.next||"")[I])&&(D.put=P,typeof(E=d(P))=="string"&&(D.put=w.$.get(E)._.put||P)),this.to&&this.to.next(_),b.any&&setTimeout.each(Object.keys(b.any),function(k){(k=b.any[k])&&k(_)},0,99),b.echo&&setTimeout.each(Object.keys(b.echo),function(k){(k=b.echo[k])&&k.on("in",_)},0,99),((_.$$||"")._||S).soul&&(D=b.next)&&(D=D[I])&&(E={},Object.keys(_).forEach(function(k){E[k]=_[k]}),E.$=(_.$$||_.$).get(E.get=I),delete E.$$,delete E.$$$,D.on("in",E)),a(_,b))}i.on.in=o;function a(_,b){if(b=b||this.as||_.$._,!(_.$$&&this!==i.on)&&!(!_.put||b.soul)){var w=_.put||"",v=w["="]||w[":"],S,E=b.root,T=E.$.get(w["#"]).get(w["."])._;if(typeof(v=d(v))!="string"){this===i.on&&((T.echo||(T.echo={}))[b.id]=b);return}if(!((T.echo||(T.echo={}))[b.id]&&!(E.pass||"")[b.id])){if(S=E.pass){if(S[v+b.id])return;S[v+b.id]=1}(T.echo||(T.echo={}))[b.id]=b,b.has&&(b.link=v);var I=E.$.get(T.link=v)._;(I.echo||(I.echo={}))[T.id]=T;var S=b.ask||"";(S[""]||b.lex)&&I.on("out",{get:{"#":v}}),setTimeout.each(Object.keys(S),function(B,D){!B||!(D=S[B])||D.on("out",{get:{"#":v,".":B}})},0,99)}}}i.on.link=a;function u(_,b){var w=_.put||"",v=f!==w["="]?w["="]:w[":"],S=b.root,E,T;if(f===v){if(b.soul&&f!==b.put||(T=(_.$$||_.$||"")._||"",_["@"]&&(f!==T.put||f!==b.put)))return;(E=b.link||_.linked)&&delete(S.$.get(E)._.echo||"")[b.id],b.has&&(b.link=null),b.put=f,setTimeout.each(Object.keys(b.next||""),function(I,P){(P=b.next[I])&&(E&&delete(S.$.get(E).get(I)._.echo||"")[P.id],P.on("in",{get:I,put:f,$:P.$}))},0,99);return}b.soul||_.$$||(E=d(v),T=_.$._||"",!((E===T.link||b.has&&!T.link)&&!((S.pass||"")[b.id]&&typeof E!="string"))&&(delete(T.echo||"")[b.id],u({get:b.get,put:f,$:_.$,linked:_.linked=_.linked||T.link},b)))}i.on.unlink=u;function c(_,b){var w=this.as,v=w.$._;v.root;var S=w.get||"",E=(_.put||"")[S["#"]]||"";if(!_.put||typeof S["."]=="string"&&f===E[S["."]]){if(f!==v.put||!v.soul&&!v.has)return;v.ack=(v.ack||0)+1,v.on("in",{get:v.get,put:v.put=f,$:v.$,"@":_["@"]});return}(_._||{}).miss=1,i.on.put(_)}var l={},f,h=String.random,d=i.valid,p=function(_,b){return _&&Object.prototype.hasOwnProperty.call(_,b)},m=i.state,g=m.is,y=m.ify})(t,"./chain"),t(function(n){var i=t("./root");i.chain.get=function(f,h,d){var p,m;if(typeof f=="string"){if(f.length==0)return(p=this.chain())._.err={err:i.log("0 length key!",f)},h&&h.call(p,p._.err),p;var g=this,y=g._,_=y.next||u;(p=_[f])||(p=f&&s(f,g)),p=p&&p.$}else if(typeof f=="function"){let E=function(I,P,B){if(!E.stun&&!((C=w.pass)&&!C[v])){var D=I.$._,k=(I.$$||"")._,x=(k||D).put,O=!D.has&&!D.soul,A={},C;if((O||l===x)&&(x=l===((C=I.put)||"")["="]?l===(C||"")[":"]?C:C[":"]:C["="]),typeof(C=i.valid(x))=="string"&&(x=l===(C=w.$.get(C)._.put)?b.not?l:x:C),!(b.not&&l===x)){if(l===b.stun){if((C=w.stun)&&C.on&&(y.$.back(function(L){if(C.on(""+L.id,A={}),(A.run||0)<E.id)return A}),!A.run&&C.on(""+D.id,A={}),!A.run&&k&&C.on(""+k.id,A={}),E.id>A.run&&((!A.stun||A.stun.end)&&(A.stun=C.on("stun"),A.stun=A.stun&&A.stun.last),A.stun&&!A.stun.end))){(A.stun.add||(A.stun.add={}))[v]=function(){E(I,P,1)};return}if(l===x&&(B=0),(C=w.hatch)&&!C.end&&l===b.hatch&&!B){if(S[D.$._.id])return;S[D.$._.id]=1,C.push(function(){E(I,P,1)});return}S={}}if(w.pass){if(w.pass[v+D.id])return;w.pass[v+D.id]=1}if(b.on){b.ok.call(D.$,x,D.get,I,P||E);return}if(b.v2020){b.ok(I,P||E);return}Object.keys(I).forEach(function(L){C[L]=I[L]},C={}),I=C,I.put=x,b.ok.call(b.as,I,P||E)}}};if(h===!0)return o(this,f,h,d),this;p=this;var y=p._,b=h||{},w=y.root,v;b.at=y,b.ok=f;var S={};return E.at=y,(y.any||(y.any={}))[v=String.random(7)]=E,E.off=function(){E.stun=1,y.any&&delete y.any[v]},E.rid=a,E.id=b.run||++w.once,m=w.pass,(w.pass={})[v]=1,b.out=b.out||{get:{}},y.on("out",b.out),w.pass=m,p}else{if(typeof f=="number")return this.get(""+f,h,d);if(typeof(m=c(f))=="string")return this.get(m,h,d);(m=this.get.next)&&(p=m(this,f))}return p?(h&&typeof h=="function"&&p.get(h,d),p):((p=this.chain())._.err={err:i.log("Invalid get request!",f)},h&&h.call(p,p._.err),p)};function s(f,h){var d=h._,p=d.next,m=h.chain(),g=m._;return p||(p=d.next={}),p[g.get=f]=g,h===d.root.$?g.soul=f:(d.soul||d.has)&&(g.has=f),g}function o(f,h,d,p){var m=f._,g=0,y;return(y=m.soul||m.link)?h(y,p,m):m.jam?m.jam.push([h,p]):(m.jam=[[h,p]],f.get(function(_,b){if(!(l===_.put&&!m.root.opt.super&&(y=Object.keys(m.root.opt.peers).length)&&++g<=y)){b.rid(_);var w=(w=_.$)&&w._||{},v=0,S;for(y=m.jam,delete m.jam;S=y[v++];){var E=S[0];S=S[1],E&&E(w.link||w.soul||i.valid(_.put)||((_.put||{})._||{})["#"],S,_,b)}}},{out:{get:{".":!0}}}),f)}function a(f){var h=this.at||this.on;if(!f||h.soul||h.has)return this.off();if(f=(f=(f=f.$||f)._||f).id){h.map;var d;if((d=this.seen||(this.seen={}))[f])return!0;d[f]=!0}}var u={},c=i.valid,l})(t,"./get"),t(function(n){var i=t("./root");i.chain.put=function(p,m,g){var y=this,_=y._,b=_.root;g=g||{},g.root=_.root,g.run||(g.run=b.once),s(g,_.id),g.ack=g.ack||m,g.via=g.via||y,g.data=g.data||p,g.soul||(g.soul=_.soul||typeof m=="string"&&m);var w=g.state=g.state||i.state();return typeof p=="function"?(p(function(v){g.data=v,y.put(c,c,g)}),y):g.soul?(g.$=b.$.get(g.soul),g.todo=[{it:g.data,ref:g.$}],g.turn=g.turn||f,g.ran=g.ran||o,function v(){var S=g.todo,E=S.pop(),T=E.it;E.ref&&E.ref._.id;var I,P,B,D,k;if(s(g,E.ref),(D=E.todo)&&(P=D.pop(),T=T[P],D.length&&S.push(E)),P&&(S.path||(S.path=[])).push(P),!(I=h(T))&&!(k=i.is(T))){if(!Object.plain(T)){o.err(g,"Invalid data: "+u(T)+" at "+(g.via.back(function(C){C.get&&D.push(C.get)},D=[])||D.join("."))+"."+(S.path||[]).join("."));return}for(var x=g.seen||(g.seen=[]),O=x.length;O--;)if(T===(D=x[O]).it){I=T=D.link;break}}if(P&&I)E.node=d(E.node,P,w,T);else{let C=function(L,R){var U=B.link["#"];R&&(R.off(),R.rid(L));var N=U||L.soul||(D=(L.$$||L.$)._||"").soul||D.link||((D=D.put||"")._||"")["#"]||D["#"]||((D=L.put||"")&&L.$$?D["#"]:(D["="]||D[":"]||"")["#"]);if(!U&&s(g,L.$),!N&&!E.link["#"]){(E.wait||(E.wait=[])).push(function(){C(L,R)});return}N||(N=[],(L.$$||L.$).back(function(z){if(D=z.soul||z.link)return N.push(D);N.push(z.get)}),N=N.reverse().join("/")),B.link["#"]=N,!k&&(((g.graph||(g.graph={}))[N]=B.node||(B.node={_:{}}))._["#"]=N),delete g.wait[A],B.wait&&setTimeout.each(B.wait,function(z){z&&z()}),g.ran(g)};if(!g.seen){o.err(g,"Data at root of graph must be a node (an object).");return}g.seen.push(B={it:T,link:{},todo:k?[]:Object.keys(T).sort().reverse(),path:(S.path||[]).slice(),up:E}),E.node=d(E.node,P,w,B.link),!k&&B.todo.length&&S.push(B);var A=g.seen.length;(g.wait||(g.wait={}))[A]="",D=(B.ref=k?T:P?E.ref.get(P):E.ref)._,(D=T&&(T._||"")["#"]||D.soul||D.link)?C({soul:D}):B.ref.get(C,{run:g.run,v2020:1,out:{get:{".":" "}}})}if(!S.length)return g.ran(g);g.turn(v)}(),y):(a(g),y)};function s(p,m){if(m){m=(m._||"").id||m;var g=p.root.stun||(p.root.stun={on:i.on}),y={},_;p.stun||(p.stun=g.on("stun",function(){})),(_=g.on(""+m))&&_.the.last.next(y),!(y.run>=p.run)&&g.on(""+m,function(b){if(p.stun.end){this.off(),this.to.next(b);return}b.run=b.run||p.run,b.stun=b.stun||p.stun})}}function o(p){if(p.err){o.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var m=p.$.back(-1)._,g=m.root,y=m.ask(function(v){g.on("ack",v),v.err&&!v.lack&&i.log(v),++_>(p.acks||0)&&this.off(),p.ack&&p.ack(v,this)},p.opt),_=0,b=p.stun,w;(w=function(){b&&(o.end(b,g),setTimeout.each(Object.keys(b=b.add||""),function(v){(v=b[v])&&v()}))}).hatch=w,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":y,_:w})}}o.end=function(p,m){p.end=l,p.the.to===p&&p===p.the.last&&delete m.stun,p.off()},o.err=function(p,m){(p.ack||l).call(p,p.out={err:p.err=i.log(m)}),p.ran(p)};function a(p){var m=p.via._,g;p.via=p.via.back(function(y){if(y.soul||!y.get)return y.$;g=p.data,(p.data={})[y.get]=g}),(!p.via||!p.via._.soul)&&(p.via=m.root.$.get(((p.data||"")._||"")["#"]||m.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function u(p,m){return p&&(m=p.constructor)&&m.name||typeof p}var c,l=function(){},f=setTimeout.turn,h=i.valid,d=i.state.ify})(t,"./put"),t(function(n){var i=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),n.exports=i})(t,"./index"),t(function(n){var i=t("./index");i.chain.on=function(a,u,c,l){var f=this,h=f._;h.root;var d;if(typeof a=="string")return u?(d=h.on(a,u,c||h,l),c&&c.$&&(c.subs||(c.subs=[])).push(d),f):h.on(a);var p=u;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,f.get(a,p),f},i.chain.once=function(a,u){if(u=u||{},!a)return s(this);var c=this,l=c._,f=l.root;l.put;var h=String.random(7),d;return c.get(function(p,m,g,y){var _=this,b=_._,w=b.one||(b.one={});if(y.stun||w[h]==="")return;if((d=i.valid(p))===!0){v();return}if(typeof d=="string")return;clearTimeout((l.one||"")[h]),clearTimeout(w[h]),w[h]=setTimeout(v,u.wait||99);function v(S){if(!b.has&&!b.soul&&(b={put:p,get:m}),o===(d=b.put)&&(d=((g.$$||"")._||"").put),typeof i.valid(d)=="string"&&(d=f.$.get(d)._.put,d===o&&!S)){w[h]=setTimeout(function(){v(1)},u.wait||99);return}y.stun||w[h]!==""&&(w[h]="",(l.soul||l.has)&&y.off(),a.call(_,d,b.get),clearTimeout(w[h]))}},{on:1}),c};function s(a,u,c){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(c=a.chain())._.nix=a.once(function(l,f){c._.on("in",this._)}),c._.lex=a._.lex,c}i.chain.off=function(){var a=this,u=a._,c,l=u.back;if(l)return u.ack=0,(c=l.next)&&c[u.get]&&delete c[u.get],(c=l.any)&&(delete l.any,l.any={}),(c=l.ask)&&delete c[u.get],(c=l.put)&&delete c[u.get],(c=u.soul)&&delete l.root.graph[c],(c=u.map)&&Object.keys(c).forEach(function(f,h){h=c[f],h.link&&l.root.$.get(h.link).off()}),(c=u.next)&&Object.keys(c).forEach(function(f,h){h=c[f],h.$.off()}),u.on("off",{}),a};var o})(t,"./on"),t(function(n){var i=t("./index"),s=i.chain.get.next;i.chain.get.next=function(c,l){var f;return Object.plain(l)?(f=((f=l["#"])||"")["="]||f)?c.get(f):((f=c.chain()._).lex=l,c.on("in",function(h){String.match(h.get||(h.put||"")["."],l["."]||l["#"]||l)&&f.on("in",h),this.to.next(h)}),f.$):(s||a)(c,l)},i.chain.map=function(c,l,f){var h=this,d=h._,p,m;return Object.plain(c)&&(p=c["."]?c:{".":c},c=u),c?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),m=h.chain(),h.map().on(function(g,y,_,b){var w=(c||a).call(this,g,y,_,b);if(u!==w){if(g===w)return m._.on("in",_);if(i.is(w))return m._.on("in",w._);var v={};Object.keys(_.put).forEach(function(S){v[S]=_.put[S]},v),v["="]=w,m._.on("in",{get:y,put:v})}}),m):((m=d.each)||((d.each=m=h.chain())._.lex=p||m._.lex||d.lex,m._.nix=h.back("nix"),h.on("in",o,m._)),m)};function o(c){this.to.next(c);var l=this.as,f=c.$,h=f._,d=c.put,p;!h.soul&&!c.$$||(p=l.lex)&&!String.match(c.get||(d||"")["."],p["."]||p["#"]||p)||i.on.link(c,l)}var a=function(){},u})(t,"./map"),t(function(n){var i=t("./index");i.chain.set=function(s,o,a){var u=this,c=u.back(-1),l,f;return o=o||function(){},a=a||{},a.item=a.item||s,(l=((s||"")._||"")["#"])&&((s={})["#"]=l),typeof(f=i.valid(s))=="string"?u.get(l=f).put(s,o,a):i.is(s)?(u.put(function(h){s.get(function(d,p,m){if(!d)return o.call(u,{err:i.log('Only a node can be linked! Not "'+m.put+'"!')});(f={})[d]={"#":d},h(f)},!0)}),s):(Object.plain(s)&&(s=c.get(l=u.back("opt.uuid")()).put(s)),u.get(l||c.back("opt.uuid")(7)).put(s,o,a))}})(t,"./set"),t(function(n){t("./shim");var i=function(){},s=JSON.parseAsync||function(c,l,f){var h,d=+new Date;try{l(h,JSON.parse(c,f),o.sucks(+new Date-d))}catch(p){l(p)}},o=JSON.stringifyAsync||function(c,l,f,h){var d,p=+new Date;try{l(d,JSON.stringify(c,f,h),o.sucks(+new Date-p))}catch(m){l(m)}};o.sucks=function(c){c>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=i)};function a(c){var l=function(){},f=c.opt||{};f.log=f.log||console.log,f.gap=f.gap||f.wait||0,f.max=f.max||(f.memory?f.memory*999*999:3e8)*.3,f.pack=f.pack||f.max*.01*.01,f.puff=f.puff||9;var h=setTimeout.turn||setTimeout,d=c.dup,p=d.check,m=d.track,g=l.hear=function(b,w){if(b){if(f.max<=b.length)return l.say({dam:"!",err:"Message too big!"},w);l===this&&(g.d+=b.length||0,++g.c);var v=w.SH=+new Date,S=b[0],E;if(S==="["){s(b,function(T,I){if(T||!I)return l.say({dam:"!",err:"DAM JSON parse error."},w);console.STAT&&console.STAT(+new Date,I.length,"# on hear batch");var P=f.puff;(function B(){for(var D=+new Date,k=0,x;k<P&&(x=I[k++]);)l.hear(x,w);I=I.slice(k),console.STAT&&console.STAT(D,+new Date-D,"hear loop"),y(w),I.length&&h(B,0)})()}),b="";return}if(S==="{"||(b["#"]||Object.plain(b))&&(E=b)){if(E)return g.one(E,w,v);s(b,function(T,I){if(T||!I)return l.say({dam:"!",err:"DAM JSON parse error."},w);g.one(I,w,v)});return}}};g.one=function(b,w,v){var S,E,T,I,P;if(b.DBG&&(b.DBG=P={DBG:b.DBG}),P&&(P.h=v),P&&(P.hp=+new Date),(S=b["#"])||(S=b["#"]=String.random(9)),!(T=p(S))&&(E=b["##"],!(E&&(T=b["@"]||b.get&&S)&&d.check(I=T+E)))){if((b._=function(){}).via=l.leap=w,(T=b["><"])&&typeof T=="string"&&T.slice(0,99).split(",").forEach(function(D){this[D]=1},b._.yo={}),T=b.dam){(T=l.hear[T])&&T(b,w,c),m(S);return}(T=b.ok)&&(b._.near=T["/"]);var v=+new Date;P&&(P.is=v),w.SI=S,m.ed=function(D){S===D&&(m.ed=0,(D=d.s[S])&&(D.via=w,b.get&&(D.it=b)))},c.on("in",l.last=b),P&&(P.hd=+new Date),console.STAT&&console.STAT(v,+new Date-v,b.get?"msg get":b.put?"msg put":"msg"),m(S),I&&m(I),l.leap=l.last=null}},g.c=g.d=0,function(){var b=0,w;l.hash=function(E,T){var I,P,B,D=+new Date;o(E.put,function k(x,O){var A=(P||(P=B=O||"")).slice(0,32768);if(I=String.hash(A,I),P=P.slice(32768),P){h(k,0);return}console.STAT&&console.STAT(D,+new Date-D,"say json+hash"),E._.$put=B,E["##"]=I,l.say(E,T),delete E._.$put},v)};function v(E,T){var I;return T instanceof Object?(Object.keys(T).sort().forEach(S,{to:I={},on:T}),I):T}function S(E){this.to[E]=this.on[E]}l.say=function(E,T){var I;if((I=this)&&(I=I.to)&&I.next&&I.next(E),!E)return!1;var P,B,D,k=E["@"],x=E._||(E._=function(){}),O=E.DBG,A=+new Date;if(x.y=x.y||A,T||O&&(O.y=A),(P=E["#"])||(P=E["#"]=String.random(9)),!w&&m(P),!(B=E["##"])&&u!==E.put&&!x.via&&k){l.hash(E,T);return}if(!T&&k&&(T=(I=d.s[k])&&(I.via||(I=I.it)&&(I=I._)&&I.via)||(I=l.last)&&k===I["#"]&&l.leap),!T&&k)return d.s[k]?void 0:(console.STAT&&console.STAT(+new Date,++b,"total no peer to ack to"),!1);if(k&&!E.put&&!B&&((d.s[k]||"").it||"")["##"])return!1;if(!T&&l.way)return l.way(E);if(O&&(O.yh=+new Date),!(D=x.raw)){l.raw(E,T);return}if(O&&(O.yr=+new Date),!T||!T.id){if(!Object.plain(T||f.peers))return!1;var A=+new Date;f.puff;var C=f.peers,L=Object.keys(T||f.peers||{});console.STAT&&console.STAT(A,+new Date-A,"peer keys"),function N(){var z=+new Date;w=1;var Y=x.raw;x.raw=D;for(var G=0,K;G<9&&(K=(L||"")[G++]);)(K=C[K]||(T||"")[K])&&l.say(E,K);x.raw=Y,w=0,L=L.slice(G),console.STAT&&console.STAT(z,+new Date-z,"say loop"),L.length&&(h(N,0),k&&m(k))}();return}if(!T.wire&&l.wire&&l.wire(T),P!==T.last){if(T.last=P,T===x.via||(I=x.yo)&&(I[T.url]||I[T.pid]||I[T.id]))return!1;if(console.STAT&&console.STAT(A,((O||x).yp=+new Date)-(x.y||A),"say prep"),!w&&k&&m(k),T.batch){if(T.tail=(I=T.tail||0)+D.length,T.tail<=f.pack){T.batch+=(I?",":"")+D;return}y(T)}T.batch="[";var R=+new Date;setTimeout(function(){console.STAT&&console.STAT(R,+new Date-R,"0ms TO"),y(T)},f.gap),_(D,T),console.STAT&&k===T.SI&&console.STAT(A,+new Date-T.SH,"say ack")}},l.say.c=l.say.d=0,l.raw=function(E,T){if(!E)return"";var I=E._||{},P,B;if(B=I.raw)return B;if(typeof E=="string")return E;var D=E["##"],k=E["@"];if(D&&k){if(!I.via&&p(k+D))return!1;if(B=(d.s[k]||"").it){if(D===B["##"])return!1;B["##"]||(B["##"]=D)}}if(!E.dam&&!E["@"]){var x=0,O=[];B=f.peers;for(var A in B){var C=B[A];if(O.push(C.url||C.pid||C.id),++x>6)break}x>1&&(E["><"]=O.join())}if(E.put&&(B=E.ok)&&(E.ok={"@":(B["@"]||1)-1,"/":B["/"]==E._.near?l.near:B["/"]}),P=I.$put){B={},Object.keys(E).forEach(function(R){B[R]=E[R]}),B.put=":])([:",o(B,function(R,U){if(!R){var N=+new Date;B=U.indexOf('"put":":])([:"'),L(u,U=U.slice(0,B+6)+P+U.slice(B+14)),console.STAT&&console.STAT(N,+new Date-N,"say slice")}});return}o(E,L);function L(R,U){R||(I.raw=U,l.say(E,T))}}}();function y(b){var w=b.batch,v=typeof w=="string";if(v&&(w+="]"),b.batch=b.tail=null,!!w&&!(v?3>w.length:!w.length)){if(!v)try{w=w.length===1?w[0]:JSON.stringify(w)}catch(S){return f.log("DAM JSON stringify error",S)}w&&_(w,b)}}function _(b,w){try{var v=w.wire;w.say?w.say(b):v.send&&v.send(b),l.say.d+=b.length||0,++l.say.c}catch{(w.queue=w.queue||[]).push(b)}}return l.near=0,l.hi=function(b){var w=b.wire,v;if(!w){l.wire(b.length&&{url:b,id:b}||b);return}b.id?f.peers[b.url||b.id]=b:(v=b.id=b.id||b.url||String.random(9),l.say({dam:"?",pid:c.opt.pid},f.peers[v]=b),delete d.s[b.last]),b.met||(l.near++,b.met=+new Date,c.on("hi",b)),v=b.queue,b.queue=[],setTimeout.each(v||[],function(S){_(S,b)},0,9)},l.bye=function(b){b.met&&--l.near,delete b.met,c.on("bye",b);var w=+new Date;w=w-(b.met||w),l.bye.time=((l.bye.time||w)+w)/2},l.hear["!"]=function(b,w){f.log("Error:",b.err)},l.hear["?"]=function(b,w){b.pid&&(w.pid||(w.pid=b.pid),b["@"])||(l.say({dam:"?",pid:f.pid,"@":b["#"]},w),delete d.s[w.last])},l.hear.mob=function(b,w){if(b.peers){var v=Object.keys(b.peers),S=v[Math.random()*v.length>>0];S&&(l.bye(w),l.hi(S))}},c.on("create",function(b){b.opt.pid=b.opt.pid||String.random(9),this.to.next(b),b.on("out",l.say)}),c.on("bye",function(b,w){b=f.peers[b.id||b]||b,this.to.next(b),b.bye?b.bye():(w=b.wire)&&w.close&&w.close(),delete f.peers[b.id],b.wire=null}),c.on("bye",function(b,w){this.to.next(b),(w=console.STAT)&&(w.peers=l.near),(w=b.url)&&setTimeout(function(){},f.lack||9e3)}),c.on("hi",function(b,w){if(this.to.next(b),(w=console.STAT)&&(w.peers=l.near),!f.super){var v=Object.keys(c.next||"");v.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(v,function(S){var E=c.next[S];if(f.super||(E.ask||"")[""]){l.say({get:{"#":S}},b);return}setTimeout.each(Object.keys(E.ask||""),function(T){T&&l.say({"##":String.hash((c.graph[S]||"")[T]),get:{"#":S,".":T}},b)})})}}),l}var u;try{n.exports=a}catch{}})(t,"./mesh"),t(function(n){var i=t("./index");i.Mesh=t("./mesh"),i.on("opt",function(o){if(this.to.next(o),o.once)return;var a=o.opt;if(a.WebSocket===!1)return;var u=i.window||{},c=a.WebSocket||u.WebSocket||u.webkitWebSocket||u.mozWebSocket;if(!c)return;a.WebSocket=c;var l=a.mesh=a.mesh||i.Mesh(o);l.wire||a.wire,l.wire=a.wire=f;function f(m){try{if(!m||!m.url)return y&&y(m);var g=m.url.replace(/^http/,"ws"),y=m.wire=new a.WebSocket(g);return y.onclose=function(){d(m),a.mesh.bye(m)},y.onerror=function(_){d(m)},y.onopen=function(){a.mesh.hi(m)},y.onmessage=function(_){_&&a.mesh.hear(_.data||_,m)},y}catch{a.mesh.bye(m)}}setTimeout(function(){!a.super&&o.on("out",{dam:"hi"})},1);var h=2*999;function d(m){clearTimeout(m.defer),a.peers[m.url]&&(p&&m.retry<=0||(m.retry=(m.retry||a.retry+1||60)-(-m.tried+(m.tried=+new Date)<h*4?1:0),m.defer=setTimeout(function g(){if(p&&p.hidden)return setTimeout(g,h);f(m)},h)))}var p=""+s!=typeof document&&document});var s})(t,"./websocket"),t(function(n){if(!(typeof Gun>"u")){var i=function(){},s;try{s=(Gun.window||i).localStorage}catch{}s||(Gun.log("Warning: No localStorage exists to persist data to!"),s={setItem:function(a,u){this[a]=u},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var o=JSON.stringifyAsync||function(a,u,c,l){var f;try{u(f,JSON.stringify(a,c,l))}catch(h){u(h)}};Gun.on("create",function a(u){this.to.next(u);var c=u.opt;u.graph;var l=[],f,h,d,p;if(c.localStorage===!1)return;c.prefix=c.file||"gun/";try{f=a[c.prefix]=a[c.prefix]||JSON.parse(d=s.getItem(c.prefix))||{}}catch{f=a[c.prefix]={}}d=(d||"").length,u.on("get",function(g){this.to.next(g);var y=g.get,_,b,w,v;!y||!(_=y["#"])||(b=f[_]||v,b&&(w=y["."])&&!Object.plain(w)&&(b=Gun.state.ify({},w,Gun.state.is(b,w),b[w],_)),Gun.on.get.ack(g,b))}),u.on("put",function(g){this.to.next(g);var y=g.put,_=y["#"],b=y["."],w=g["#"],v=g.ok||"";if(f[_]=Gun.state.ify(f[_],b,y[">"],y[":"],_),p&&d>4999880){u.on("in",{"@":w,err:"localStorage max!"});return}!g["@"]&&(!g._.via||Math.random()<v["@"]/v["/"])&&l.push(w),!h&&(h=setTimeout(m,9+d/333))});function m(){if(!l.length&&((setTimeout.turn||"").s||"").length){setTimeout(m,99);return}var g=l;clearTimeout(h),h=!1,l=[],o(f,function(y,_){try{!y&&s.setItem(c.prefix,_)}catch(b){y=p=b||"localStorage failure"}y&&(Gun.log(y+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),u.on("localStorage:error",{err:y,get:c.prefix,put:f})),d=_.length,setTimeout.each(g,function(b){u.on("in",{"@":b,err:y,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var t;if(""+t!=typeof Gun){var r=function(k){console.warn("Warning! Deprecated internal utility will break in next version:",k)},n=Gun;n.fn=n.fn||{is:function(k){return r("fn"),!!k&&typeof k=="function"}},n.bi=n.bi||{is:function(k){return r("bi"),k instanceof Boolean||typeof k=="boolean"}},n.num=n.num||{is:function(k){return r("num"),!i(k)&&(k-parseFloat(k)+1>=0||k===1/0||k===-1/0)}},n.text=n.text||{is:function(k){return r("text"),typeof k=="string"}},n.text.ify=n.text.ify||function(k){return r("text.ify"),n.text.is(k)?k:typeof JSON<"u"?JSON.stringify(k):k&&k.toString?k.toString():k},n.text.random=n.text.random||function(k,x){r("text.random");var O="";for(k=k||24,x=x||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";k>0;)O+=x.charAt(Math.floor(Math.random()*x.length)),k--;return O},n.text.match=n.text.match||function(k,x){var O,A;return r("text.match"),typeof k!="string"?!1:(typeof x=="string"&&(x={"=":x}),x=x||{},O=x["="]||x["*"]||x[">"]||x["<"],k===O?!0:A!==x["="]?!1:(O=x["*"]||x[">"]||x["<"],k.slice(0,(O||"").length)===O?!0:A!==x["*"]?!1:A!==x[">"]&&A!==x["<"]?k>=x[">"]&&k<=x["<"]:A!==x[">"]&&k>=x[">"]||A!==x["<"]&&k<=x["<"]))},n.text.hash=n.text.hash||function(k,x){if(r("text.hash"),typeof k=="string"){if(x=x||0,!k.length)return x;for(var O=0,A=k.length,C;O<A;++O)C=k.charCodeAt(O),x=(x<<5)-x+C,x|=0;return x}},n.list=n.list||{is:function(k){return r("list"),k instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(k){return r("list.sort"),function(x,O){return!x||!O?0:(x=x[k],O=O[k],x<O?-1:x>O?1:0)}},n.list.map=n.list.map||function(k,x,O){return r("list.map"),P(k,x,O)},n.list.index=1,n.obj=n.boj||{is:function(k){return r("obj"),k?k instanceof Object&&k.constructor===Object||Object.prototype.toString.call(k).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},n.obj.put=n.obj.put||function(k,x,O){return r("obj.put"),(k||{})[x]=O,k},n.obj.has=n.obj.has||function(k,x){return r("obj.has"),k&&Object.prototype.hasOwnProperty.call(k,x)},n.obj.del=n.obj.del||function(k,x){if(r("obj.del"),!!k)return k[x]=null,delete k[x],k},n.obj.as=n.obj.as||function(k,x,O,A){return r("obj.as"),k[x]=k[x]||(A===O?{}:O)},n.obj.ify=n.obj.ify||function(k){if(r("obj.ify"),v(k))return k;try{k=JSON.parse(k)}catch{k={}}return k},function(){var k;function x(O,A){E(this,A)&&k!==this[A]||(this[A]=O)}n.obj.to=n.obj.to||function(O,A){return r("obj.to"),A=A||{},P(O,x,A),A}}(),n.obj.copy=n.obj.copy||function(k){return r("obj.copy"),k&&JSON.parse(JSON.stringify(k))},function(){function k(x,O){var A=this.n,C;if(!(A&&(O===A||v(A)&&E(A,O)))&&C!==O)return!0}n.obj.empty=n.obj.empty||function(x,O){return r("obj.empty"),x?!P(x,k,{n:O}):!0}}(),function(){function k(A,C){if(arguments.length===2){k.r=k.r||{},k.r[A]=C;return}k.r=k.r||[],k.r.push(A)}var x=Object.keys,O;Object.keys=Object.keys||function(A){return O(A,function(C,L,R){R(L)})},n.obj.map=O=n.obj.map||function(A,C,L){r("obj.map");var R,U=0,N,z,Y,G,K=typeof C=="function";if(k.r=R,x&&v(A)&&(Y=x(A),G=!0),L=L||{},i(A)||Y)for(N=(Y||A).length;U<N;U++){var ut=U+n.list.index;if(K){if(z=G?C.call(L,A[Y[U]],Y[U],k):C.call(L,A[U],ut,k),z!==R)return z}else if(C===A[G?Y[U]:U])return Y?Y[U]:ut}else for(U in A)if(K){if(E(A,U)&&(z=L?C.call(L,A[U],U,k):C(A[U],U,k),z!==R))return z}else if(C===A[U])return U;return K?k.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(k){return r("time"),k?k instanceof Date:+new Date().getTime()};var b=n.fn.is,i=n.list.is,w=n.obj,v=w.is,E=w.has,P=w.map,s={};s.is=function(k){return r("val.is"),k===t?!1:k===null?!0:k===1/0?!1:u(k)||a(k)||m(k)?!0:s.link.is(k)||!1},s.link=s.rel={_:"#"},function(){s.link.is=function(x){if(r("val.link.is"),x&&x[o]&&!x._&&v(x)){var O={};if(P(x,k,O),O.id)return O.id}return!1};function k(x,O){var A=this;if(A.id)return A.id=!1;if(O==o&&u(x))A.id=x;else return A.id=!1}}(),s.link.ify=function(k){return r("val.link.ify"),I({},o,k)},n.obj.has._=".";var o=s.link._,t,a=n.bi.is,m=n.num.is,u=n.text.is,w=n.obj,v=w.is,I=w.put,P=w.map;n.val=n.val||s;var c={_:"_"};c.soul=function(k,x){return r("node.soul"),k&&k._&&k._[x||h]},c.soul.ify=function(k,x){return r("node.soul.ify"),x=typeof x=="string"?{soul:x}:x||{},k=k||{},k._=k._||{},k._[h]=x.soul||k._[h]||f(),k},c.soul._=s.link._,function(){c.is=function(x,O,A){r("node.is");var C;return v(x)&&(C=c.soul(x))?!P(x,k,{as:A,cb:O,s:C,n:x}):!1};function k(x,O){if(O!==c._){if(!s.is(x))return!0;this.cb&&this.cb.call(this.as,x,O,this.n,this.s)}}}(),function(){c.ify=function(x,O,A){return r("node.ify"),O?typeof O=="string"?O={soul:O}:typeof O=="function"&&(O={map:O}):O={},O.map&&(O.node=O.map.call(A,x,t,O.node||{})),(O.node=c.soul.ify(O.node||{},O))&&P(x,k,{o:O,as:A}),O.node};function k(x,O){var A=this.o,C,L;if(A.map){C=A.map.call(this.as,x,""+O,A.node),L===C?S(A.node,O):A.node&&(A.node[O]=C);return}s.is(x)&&(A.node[O]=x)}}();var w=n.obj,v=w.is,S=w.del,P=w.map,l=n.text,f=l.random,h=c.soul._,t;n.node=n.node||c;var d=n.state;d.lex=function(){return r("state.lex"),d().toString(36).replace(".","")},d.to=function(k,x,O){r("state.to");var A=(k||{})[x];return v(A)&&(A=B(A)),d.ify(O,x,d.is(k,x),A,c.soul(k))},function(){d.map=function(x,O,A){r("state.map");var C,L=v(L=x||O)?L:null;return x=b(x=x||O)?x:null,L&&!x?(O=m(O)?O:d(),L[y]=L[y]||{},P(L,k,{o:L,s:O}),L):(A=A||v(O)?O:C,O=m(O)?O:d(),function(R,U,N,z){if(!x)return k.call({o:N,s:O},R,U),R;x.call(A||this||{},R,U,N,z),!(E(N,U)&&C===N[U])&&k.call({o:N,s:O},R,U)})};function k(x,O){y!==O&&d.ify(this.o,O,this.s)}}();var w=n.obj;w.as;var E=w.has,v=w.is,P=w.map,B=w.copy,p=n.num,m=p.is,g=n.fn,b=g.is,y=c._,t,_={};(function(){_.is=function(O,A,C,L){return r("graph.is"),!O||!v(O)||T(O)?!1:!P(O,k,{cb:A,fn:C,as:L})};function k(O,A){if(!O||A!==c.soul(O)||!c.is(O,this.fn,this.as))return!0;this.cb&&(x.n=O,x.as=this.as,this.cb.call(x.as,O,A,x))}function x(O){O&&c.is(x.n,O,x.as)}})(),function(){_.ify=function(L,R,U){r("graph.ify");var N={path:[],obj:L};return R?typeof R=="string"?R={soul:R}:typeof R=="function"&&(R.map=R):R={},typeof U=="string"&&(R.soul=R.soul||U,U=t),R.soul&&(N.link=s.link.ify(R.soul)),R.shell=(U||{}).shell,R.graph=R.graph||{},R.seen=R.seen||[],R.as=R.as||U,k(R,N),R.root=N.node,R.graph};function k(L,R){var U;return(U=C(L,R))?U:(R.env=L,R.soul=O,c.ify(R.obj,x,R)&&(R.link=R.link||s.link.ify(c.soul(R.node)),R.obj!==L.shell&&(L.graph[s.link.is(R.link)]=R.node)),R)}function x(L,R,U){var N=this,z=N.env,Y,G;if(c._===R&&E(L,s.link._))return U._;if(Y=A(L,R,U,N,z)){if(R||(N.node=N.node||U||{},E(L,c._)&&c.soul(L)&&(N.node._=B(L._)),N.node=c.soul.ify(N.node,s.link.is(N.link)),N.link=N.link||s.link.ify(c.soul(N.node))),(G=z.map)&&(G.call(z.as||{},L,R,U,N),E(U,R))){if(L=U[R],t===L){S(U,R);return}if(!(Y=A(L,R,U,N,z)))return}if(!R)return N.node;if(Y===!0)return L;if(G=k(z,{obj:L,path:N.path.concat(R)}),!!G.node)return G.link}}function O(L){var R=this,U=s.link.is(R.link),N=R.env.graph;R.link=R.link||s.link.ify(L),R.link[s.link._]=L,R.node&&R.node[c._]&&(R.node[c._][s.link._]=L),E(N,U)&&(N[L]=N[U],S(N,U))}function A(L,R,U,N,z){var Y;if(s.is(L))return!0;if(v(L))return 1;if(Y=z.invalid)return L=Y.call(z.as||{},L,R,U),A(L,R,U,N,z);z.err="Invalid value at '"+N.path.concat(R).join(".")+"'!",n.list.is(L)&&(z.err+=" Use `.set(item)` instead of an Array.")}function C(L,R){for(var U=L.seen,N=U.length,z;N--;)if(z=U[N],R.obj===z.obj)return z;U.push(R)}}(),_.node=function(k){r("graph.node");var x=c.soul(k);if(x)return I({},x,k)},function(){_.to=function(x,O,A){if(r("graph.to"),!!x){var C={};return A=A||{seen:{}},P(x[O],k,{obj:C,graph:x,opt:A}),C}};function k(x,O){var A,C;if(c._===O){if(T(x,s.link._))return;this.obj[O]=B(x);return}if(!(A=s.link.is(x))){this.obj[O]=x;return}if(C=this.opt.seen[A]){this.obj[O]=C;return}this.obj[O]=this.opt.seen[A]=_.to(this.graph,A,this.opt)}}();var b=n.fn.is,w=n.obj,v=w.is,S=w.del,E=w.has,T=w.empty,I=w.put,P=w.map,B=w.copy,t;n.graph=n.graph||_}}()}(Fo)),Fo.exports}var k0=jr();const Je=uh(k0);var Io={},Po;function E0(){if(Po)return Io;Po=1;var e=typeof window<"u"?window.Gun:jr();return e.chain.promise=function(n){var r=this,n=n||function(i){return i};return new Promise(function(i,s){r.once(function(o,a){i({put:o,get:a,gun:this})})}).then(n)},e.chain.then=function(t){var r=this,n=new Promise((i,s)=>{r.once(function(o,a){i(o,a)})});return t?n.then(t):n},Io}E0();var Lo={exports:{}},Ro;function js(){return Ro||(Ro=1,function(){function e(){var s=function(o,a,u){if(s.unit=0,!u&&n!==a&&(s.last=""+o<s.last?s.last:""+o,delete(s.$||{})[i]),u=u||s.$||(s.$={}),!o&&Object.keys(u).length)return u;o=""+o;for(var c=0,l=o.length-1,f=o[c],h,d;!(h=u[f])&&c<l;)f+=o[++c];if(h)if(c==l){if(n===a)return n===(d=h[""])?h:(s.unit=1)&&d;h[""]=a}else return n!==a&&delete h[i],s(o.slice(++c),a,h||(h={}));else{if(!t(u,function(p,m){var g=0,y="";if((m||"").length)for(;m[g]==o[g];)y+=m[g++];if(y){if(n===a)return g<=l?void 0:((d||(d={}))[m.slice(g)]=p,p);var _={};if(_[m.slice(g)]=p,g=o.slice(g),g===""?_[""]=a:(_[g]={})[""]=a,u[y]=_,e.debug&&""+y=="undefined"){console.log(0,y);debugger}return delete u[m],!0}})){if(n===a)return;if((u[f]||(u[f]={}))[""]=a,e.debug&&""+f=="undefined"){console.log(1,f);debugger}}if(n===a)return d}};return s}if(e.map=function s(o,a,u,c){try{c=c||[];var l=typeof o=="function"?o.$||{}:o;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!l)return;if(typeof l=="string"){if(e.debug)throw["BUG:",o,a,u,c];return}var f=(l[i]||r).sort||(l[i]=function T(){return T.sort=Object.keys(l).sort(),T}()).sort,h;u=u===!0?{branch:!0}:u||{},(h=u.reverse)&&(f=f.slice(0).reverse());for(var d=u.start,p=u.end,m="￿",g=0,y=f.length;g<y;g++){var _=f[g],b=l[_],w,v,S;if(!(!b||_===""||i===_||_==="undefined")&&(v=c.slice(0),v.push(_),S=v.join(""),!(n!==d&&S<(d||"").slice(0,S.length))&&!(n!==p&&(p||m)<S))){if(h&&(w=s(b,a,u,v),n!==w))return w;if(n!==(w=b[""])){var E=1;if(n!==d&&S<(d||"")&&(E=0),n!==p&&S>(p||m)&&(E=0),E&&(w=a(w,S,_,c),n!==w))return w}else if(u.branch&&(w=a(n,S,_,c),n!==w))return w;if(c=v,!h&&(w=s(b,a,u,c),n!==w))return w;c.pop()}}}catch(T){console.error(T)}},typeof window<"u")window.Radix=e;else try{Lo.exports=e}catch{}var t=e.object=function(s,o,a){for(var u in s)if(s.hasOwnProperty(u)&&(a=o(s[u],u))!==n)return a},r={},n,i=""}()),Lo.exports}js();var Bo={exports:{}},Mo={exports:{}},No;function A0(){return No||(No=1,function(e){(function(){var t={},r,n=setTimeout.turn||typeof setImmediate!=""+r&&setImmediate||setTimeout;t.parseAsync=function(s,o,a,u){if(typeof s!="string"){try{o(r,JSON.parse(s))}catch(f){o(f)}return}var c={i:0,text:s,done:o,l:s.length,up:[]};u=u||1024*32,l();function l(){for(var f=c.text,h=c.i,d=c.l,p=0,m=c.w,g,y;p++<u;){var _=f[h++];if(h>d){c.end=!0;break}if(m){for(h=f.indexOf('"',h-1),_=f[h],y=0;f[h-++y]=="\\";);y=!(y%2),g=g||y,_=='"'&&!y&&(m=r,y=c.s,c.a?(y=f.slice(c.sl,h),(g||1+y.indexOf("\\"))&&(y=JSON.parse('"'+y+'"')),c.at instanceof Array?c.at.push(c.s=y):(c.at||(c.end=p=u,y=r),(c.at||{})[c.s]=c.s=y),c.s=r):(c.s=f.slice(c.sl,h),(g||1+c.s.indexOf("\\"))&&(c.s=JSON.parse('"'+c.s+'"'))),c.a=g=r),++h}else switch(_){case'"':c.sl=h,m=!0;break;case":":c.ai=h,c.a=!0;break;case",":(c.a||c.at instanceof Array)&&(y=f.slice(c.ai,h-1))&&r!==(y=i(y))&&(c.at instanceof Array?c.at.push(y):c.at[c.s]=y),c.a=r,c.at instanceof Array&&(c.a=!0,c.ai=h);break;case"{":c.up.push(c.at||(c.at={})),c.at instanceof Array?c.at.push(c.at={}):r!==(y=c.s)&&(c.at[y]=c.at={}),c.a=r;break;case"}":c.a&&(y=f.slice(c.ai,h-1))&&r!==(y=i(y))&&(c.at instanceof Array?c.at.push(y):(c.at||(c.end=p=u,y=r),(c.at||{})[c.s]=y)),c.a=r,c.at=c.up.pop();break;case"[":r!==(y=c.s)?(c.up.push(c.at),c.at[y]=c.at=[]):c.at||c.up.push(c.at=[]),c.a=!0,c.ai=h;break;case"]":c.a&&(y=f.slice(c.ai,h-1))&&r!==(y=i(y))&&(c.at instanceof Array?c.at.push(y):c.at[c.s]=y),c.a=r,c.at=c.up.pop();break}}if(c.s=r,c.i=h,c.w=m,c.end){if(y=c.at,r===y)try{y=JSON.parse(s)}catch(b){return c.done(b)}c.done(r,y)}else n(l)}};function i(s){var o=parseFloat(s);if(!isNaN(o))return o;if(s=s.trim(),s=="true")return!0;if(s=="false")return!1;if(s=="null")return null}t.stringifyAsync=function(s,o,a,u,c){c=c||{},c.text=c.text||"",c.up=[c.at={d:s}],c.done=o,c.i=0;var l=0;f();function f(){var h=c.at,d=h.d,p="",m;switch(h.i&&h.i-h.j>0&&(p+=","),r!==(m=h.k)&&(p+=JSON.stringify(m)+":"),typeof d){case"boolean":p+=""+d;break;case"string":p+=JSON.stringify(d);break;case"number":p+=isNaN(d)?"null":d;break;case"object":if(!d){p+="null";break}if(d instanceof Array){p+="[",h={i:-1,as:d,up:h,j:0},h.l=d.length,c.up.push(c.at=h);break}if(typeof(d||"").toJSON!="function"){p+="{",h={i:-1,ok:Object.keys(d).sort(),as:d,up:h,j:0},h.l=h.ok.length,c.up.push(c.at=h);break}if(m=d.toJSON()){p+=m;break}case"function":if(h.as instanceof Array){p+="null";break}default:p="",h.j++}for(c.text+=p;1+h.i>=h.l;)c.text+=h.ok?"}":"]",h=c.at=h.up;if(++h.i<h.l){if((m=h.ok)?h.d=h.as[h.k=m[h.i]]:h.d=h.as[h.i],++l<9)return f();l=0,n(f);return}c.done(r,c.text)}},typeof window!=""+r&&(window.YSON=t);try{""+r!="object"&&(e.exports=t)}catch{}typeof JSON!=""+r&&(JSON.parseAsync=t.parseAsync,JSON.stringifyAsync=t.stringifyAsync)})()}(Mo)),Mo.exports}var jo,$o;function S0(){return $o||($o=1,jo=function(e){var t=js();e.find("a",function(){var r=[];t.map(e.list,function(s,o){o.indexOf("%1B")+1&&s&&r.push([o,s])}),r.length&&console.log(`
! ! ! WARNING ! ! !
RAD v0.2020.x has detected OLD v0.2019.x data & automatically migrating. Automatic migration will be turned OFF in future versions! If you are just developing/testing, we recommend you reset your data. Please contact us if you have any concerns.
This message should only log once.`);var n,i;r.forEach(function(s){n=s[0],i=s[1],e.list(decodeURIComponent(n),i),e.list(n,0)}),n&&e.find.bad(n)})}),jo}var zo;function ch(){return zo||(zo=1,function(){function e(n){n=n||{},n.log=n.log||console.log,n.file=String(n.file||"radata");var i=(e.has||(e.has={}))[n.file];if(i)return i;n.max=n.max||(n.memory?n.memory*999*999:3e8)*.3,n.until=n.until||n.wait||250,n.batch=n.batch||10*1e3,n.chunk=n.chunk||1024*1024*1,n.code=n.code||{},n.code.from=n.code.from||"!",n.jsonify=!0;function s(g){return encodeURIComponent(g).replace(/\*/g,"%2A")}function o(g){return m!==g&&(!g||typeof g!="object")}var a=""+m==typeof setImmediate?setTimeout:setImmediate,u=setTimeout.turn||a,m,c=r.object,l=0;if(!n.store)return n.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!n.store.put)return n.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!n.store.get)return n.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");n.store.list,""+m!=typeof Ns&&A0();var f=JSON.parseAsync||function(g,y,_){var b;try{y(b,JSON.parse(g,_))}catch(w){y(w)}},h=function(g,y,_,b,w){if(typeof y=="function"){var v=_||{};_=y,h.read(g,_,v,w||b);return}h.save(g,y,_,b,w)};h.save=function(g,y,_,b,w){var v={key:g},S,E;v.find=function(T){var I;if(v.file=T||(T=n.code.from),w&&(w=w[T]=w[T]||{}),w&&(w.sf=w.sf||+new Date),I=h.disk[T]){v.mix(m,I);return}h.parse(T,v.mix,m,w)},v.mix=function(T,I){if(w&&(w.sml=+new Date),w&&(w.sm=w.sm||+new Date),v.err=T||v.err){_(T);return}var P=v.file=(I||"").file||v.file,B;if(!I&&P!==n.code.from){h.find.bad(P),h.save(g,y,_,b);return}if((I=h.disk[P]||(h.disk[P]=I||r())).file||(I.file=P),n.compare&&(y=n.compare(I(g),y,g,P),m===y)){_(T,-1);return}if((v.disk=I)(g,y),b&&((B=(B=I.tags||(I.tags={}))[b]||(B[b]=h.tags[b]||(h.tags[b]={})))[P]||(B[P]=h.one[b]||(h.one[b]=_)),_=null),w&&(w.st=w.st||+new Date),I.Q){_&&I.Q.push(_);return}I.Q=_?[_]:[],I.to=setTimeout(v.write,n.until)},v.write=function(){w&&(w.sto=w.sto||+new Date);var T=S=v.file,I=v.disk;E=v.q=I.Q,v.tags=I.tags,delete I.Q,delete h.disk[T],delete I.tags,h.write(T,I,v.ack,m,w)},v.ack=function(T,I){w&&(w.sa=w.sa||+new Date),w&&(w.sal=E.length);var P,B;for(var D in h.tags)if(h.tags.hasOwnProperty(D)){var k=h.tags[D];if(!((B=h.disk[S])&&(B=B.tags)&&B[k])){P=k[S],delete k[S];var x;for(var O in k)if(k.hasOwnProperty(O)){x=!0;break}x||(delete h.tags[k],P&&P(T,I))}}!E&&(E="");for(var A=E.length,C=0,L=+new Date;C<A;C++)(P=E[C])&&P(T,I);console.STAT&&console.STAT(L,+new Date-L,"rad acks",s(v.file)),console.STAT&&console.STAT(L,E.length,"rad acks #",s(v.file))},_||(_=function(T,I){}),h.find(g,v.find)},h.disk={},h.one={},h.tags={};var d=0;h.write=function(g,y,_,b,w){if(!y){_("No radix!");return}b=typeof b=="object"?b:{force:b};var v=function(){},S,E;if(v.text="",v.file=g=y.file||(y.file=g),!g){_("What file?");return}if(v.write=function(){var T=y.raw=v.text;h.disk[g=y.file||v.file||g]=y;var I=+new Date;w&&(w.wd=I),h.find.add(g,function(P){if(w&&(w.wa=+new Date),P){_(P);return}n.store.put(s(g),T,function(B,D){w&&(w.wp=+new Date),console.STAT&&console.STAT(I,l=+new Date-I,"wrote disk",JSON.stringify(g),++d,"total all writes."),_(B,D||1),y.Q||delete h.disk[g]})})},v.split=function(){var T=+new Date;w&&(w.wf=T),v.text="",v.count||(v.count=0,r.map(y,function(){v.count++})),w&&(w.wfc=v.count),v.limit=Math.ceil(v.count/2);var I=v.count;return v.count=0,w&&(w.wf1=+new Date),v.sub=r(),r.map(y,v.slice,{reverse:1}),w&&(w.wf2=+new Date),h.write(v.end,v.sub,v.both,b),w&&(w.wf3=+new Date),v.hub=r(),r.map(y,v.stop),w&&(w.wf4=+new Date),h.write(y.file,v.hub,v.both,b),w&&(w.wf5=+new Date),console.STAT&&console.STAT(T,+new Date-T,"rad split",s(y.file),I),!0},v.slice=function(T,I){if(v.sub(v.end=I,T),v.limit<=++v.count)return!0},v.stop=function(T,I){if(I>=v.end)return!0;v.hub(I,T)},v.both=function(T,I){if(w&&(w.wfd=+new Date),E){_(T||E);return}if(S){_(T,I);return}S=!0,E=T},v.each=function(T,I,P,B){if(m!==T&&v.count++,n.max<=(T||"").length)return _("Data too big!"),!0;var D=e.encode(B.length)+"#"+e.encode(P)+(m===T?"":":"+e.encode(T))+`
`;if(n.chunk<v.text.length+D.length&&1<v.count&&!b.force)return v.split();v.text+=D},n.jsonify){h.write.jsonify(v,y,_,b,w);return}r.map(y,v.each,!0)||v.write()},h.write.jsonify=function(g,y,_,b,w){var v,S=+new Date;w&&(w.w=S);try{v=JSON.stringify(y.$)}catch{_("Cannot radisk!");return}if(w&&(w.ws=+new Date),console.STAT&&console.STAT(S,+new Date-S,"rad stringified JSON"),n.chunk<v.length&&!b.force){var E=0;if(r.map(y,function(){if(E++)return!0}),E>1)return g.split()}g.text=v,g.write()},h.range=function(g,y){if(!(!g||!y)){if(m===y.start&&m===y.end||o(g))return g;var _=r();return r.map(g,function(b,w){_(w,b)},y),_("")}},function(){h.read=function(g,y,_,b){_=_||{};var w={key:g};w.find=function(v){var S;if(w.file=v||(v=n.code.from),b&&(b=b[v]=b[v]||{}),b&&(b.rf=b.rf||+new Date),S=h.disk[w.file=v]){w.check(m,S);return}h.parse(v,w.check,m,b)},w.get=function(v,S,E){if(b&&(b.rgl=+new Date),b&&(b.rg=b.rg||+new Date),w.err=v||w.err){y(v);return}var T=w.file=(S||"").file||w.file;if(!S&&T!==n.code.from){h.find.bad(T),h.read(g,y,_);return}if(S=h.disk[T]||(h.disk[T]=S),!S){y(T===n.code.from?m:"No file!");return}S.file||(S.file=T);var I=h.range(S(g),_);if(b&&(b.rr=+new Date),_.unit=S.unit,_.chunks=(_.chunks||0)+1,_.parsed=(_.parsed||0)+((E||"").parsed||_.chunks*n.chunk),_.more=1,_.next=m,r.map(h.list,function(D,k){if(!(!D||T===k))return _.next=k,1},_.reverse?{reverse:1,end:T}:{start:T}),b&&(b.rl=+new Date),_.next||(_.more=0),_.next&&(!_.reverse&&(g<_.next&&_.next.indexOf(g)!=0||m!==_.end&&(_.end||"￿")<_.next)&&(_.more=0),_.reverse&&(g>_.next&&g.indexOf(_.next)!=0||m!==_.start&&(_.start||"")>_.next&&T<=_.start)&&(_.more=0)),!_.more){y(w.err,I,_);return}if(I&&y(w.err,I,_),!(_.parsed>=_.limit)){var P=+new Date;b&&(b.rm=P);var B=_.next;a(function(){console.STAT&&console.STAT(P,+new Date-P,"rad more"),h.parse(B,w.check)},0)}},w.check=function(v,S,E){if(w.get(v,S,E),!(!S||S.check)){S.check=1;var T=+new Date;(E||(E={})).file||(E.file=w.file),r.map(S,function(I,P){h.find(P,function(B){if((B||(B=n.code.from))!==E.file){var D=(""+Math.random()).slice(-3);u(function(){h.save(P,I,function k(x,O){if(x){h.save(P,I,k);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",D,s(P),s(E.file),s(B))})},0)}})}),console.STAT&&console.STAT(T,+new Date-T,"rad check")}},h.find(g||(_.reverse?_.end||"":_.start||""),w.find)}}(),function(){var g=0,y={},_="";h.parse=function(b,w,v,S){var E;if(!b)return w();if(E=y[b]){E.push(w);return}E=y[b]=[w];var T=function(){},I={file:b};(T.disk=r()).file=b,T.read=function(B,D){if(S&&(S.rpg=+new Date),console.STAT&&console.STAT(P,+new Date-P,"read disk",JSON.stringify(b),++g,"total all parses."),(T.err=B)||(T.not=!D)){delete y[b],T.map(E,T.ack);return}if(typeof D!="string"){try{n.max<=D.length?T.err="Chunk too big!":D=D.toString()}catch(k){T.err=k}if(T.err){delete y[b],T.map(E,T.ack);return}}if(I.parsed=D.length,S&&(S.rpl=I.parsed),S&&(S.rpa=E.length),P=+new Date,!(n.jsonify||D[0]==="{")){T.radec(B,D);return}f(D,function(k,x){if(!k){delete y[b],T.disk.$=x,console.STAT&&(l=+new Date-P)>9&&console.STAT(P,l,"rad parsed JSON"),S&&(S.rpd=+new Date),T.map(E,T.ack);return}if(D[0]==="{"){delete y[b],T.err="JSON error!",T.map(E,T.ack);return}T.radec(k,D)})},T.map=function(){if(!(!E||!E.length)){for(var B=+new Date,D=T.err,k=T.not?m:T.disk,x=0,O;x<9&&(O=E[x++]);)O(D,k,I);console.STAT&&console.STAT(B,+new Date-B,"rad packs",s(b)),console.STAT&&console.STAT(B,x,"rad packs #",s(b)),(E=E.slice(x)).length&&u(T.map,0)}},T.ack=function(B){if(B){if(T.err||T.not){B(T.err,m,I);return}B(m,T.disk,I)}},T.radec=function(B,D){delete y[b],P=+new Date;var k=T.split(D),x=[],O,A,C;if(!k||k[1]!==0){T.err="File '"+b+"' does not have root radix! ",T.map(E,T.ack);return}for(;k;)A=C=m,O=k[1],k=T.split(k[2])||"",k[0]=="#"&&(A=k[1],x=x.slice(0,O),O<=x.length&&x.push(A)),k=T.split(k[2])||"",k[0]!=`
`&&((k[0]=="="||k[0]==":")&&(C=k[1]),m!==A&&m!==C&&T.disk(x.join(""),C),k=T.split(k[2]));console.STAT&&console.STAT(P,+new Date-P,"parsed RAD"),T.map(E,T.ack)},T.split=function(B){if(B){var D=[],k={},x=-1,O="";if(x=B.indexOf(_),!!B[x])return O=B.slice(0,x),D[0]=O,D[1]=e.decode(B.slice(x),k),D[2]=B.slice(x+k.i),D}},h.disk&&(v||(v=(h.disk[b]||"").raw));var P=+new Date;if(S&&(S.rp=P),v)return u(function(){T.read(m,v)},0);n.store.get(s(b),T.read)}}(),function(){var g,y="",_;h.find=function(v,S){if(!g){if(_){_.push([v,S]);return}_=[[v,S]],h.parse(y,b);return}r.map(h.list=g,function(E,T){if(E)return S(T)||!0},{reverse:1,end:v})||S(n.code.from)},h.find.add=function(v,S){var E=g(v);if(E||v===y){S(m,1);return}g(v,1),S.found=(S.found||0)+1,h.write(y,g,function(T,I){if(T){S(T);return}S.found=(S.found||0)-1,S.found===0&&S(m,1)},!0)},h.find.bad=function(v,S){g(v,0),h.write(y,g,S||p)};function b(v,S){if(v){n.log("list",v),setTimeout(function(){h.parse(y,b)},1e3);return}if(S){w(S);return}if(g=g||S||r(),!n.store.list){w(g);return}n.store.list(function(E){if(!E){w(g);return}h.find.add(E,p)})}function w(v,S){g=g||v,g.file=y,S=_,_=null,c(S,function(E){h.find(E[0],E[1])})}}();try{!t.window&&S0()(h)}catch{}var p=function(){},m;return e.has[n.file]=h,h}if(function(){var n="";e.encode=function(i,s,o){o=o||n;var a=o,u;if(typeof i=="string"){for(var c=i.indexOf(o);c!=-1;)a+=o,c=i.indexOf(o,c+1);return a+'"'+i+o}else{if(i&&i["#"]&&Object.keys(i).length==1)return a+"#"+u+a;if(typeof i=="number")return a+"+"+(i||0)+a;if(i===null)return a+" "+a;if(i===!0)return a+"+"+a;if(i===!1)return a+"-"+a}},e.decode=function(i,s,o){o=o||n;var a="",u=-1,c=0,l,f;if(o===i[0]){for(;o===i[++u];)++c;for(f=i[l=c]||!0;--c>=0;)u=i.indexOf(o,u+1);if(u==-1&&(u=i.length),a=i.slice(l+1,u),s&&(s.i=u+1),f==='"')return a;if(f==="#")return{"#":a};if(f==="+")return a.length===0?!0:parseFloat(a);if(f===" ")return null;if(f==="-")return!1}}}(),typeof window<"u"){var t=window.Gun,r=window.Radix;window.Radisk=e}else{var t=jr(),r=js();try{Bo.exports=e}catch{}}e.Radix=r}()),Bo.exports}ch();var Uo={},Ho;function C0(){if(Ho)return Uo;Ho=1;var e=typeof window<"u"?window.Gun:jr();return e.on("create",function(t){e.TESTING&&(t.opt.file="radatatest"),this.to.next(t);var r=t.opt,n;if(!(r.rad===!1||r.radisk===!1)&&!(n+""!=typeof process&&""+(x0||"").RAD=="false")){var i=e.window&&e.window.Radisk||ch(),s=i.Radix,o=i(r),a="\x1B",u=0;t.on("put",function(l){if(this.to.next(l),!(l._||"").rad){var f=l["#"],h=l.put,d=h["#"],p=h["."],m=h[":"],g=h[">"],y=(l._||"").DBG;y&&(y.sp=y.sp||+new Date);var _=(l._||"").RPS||((l._||"").RPS=+new Date);o(d+a+p,{":":m,">":g},function(b,w){if(y&&(y.spd=y.spd||+new Date),console.STAT&&console.STAT(_,+new Date-_,"put"),b){t.on("in",{"@":f,err:b,DBG:y});return}t.on("in",{"@":f,ok:w,DBG:y})},!1,y&&(y.r=y.r||{})),y&&(y.sps=y.sps||+new Date)}}),t.on("get",function(l){this.to.next(l);var f=l._||"",h=f.DBG=l.DBG;h&&(h.sg=+new Date);var d=l["#"],p=l.get,m=l.get["#"],g=l.get["."]||"",y={},_,b,w,v;if(typeof m=="string"?b=m:m&&(n!==(w=m["*"])&&(y.limit=v=1),n!==m[">"]&&(y.start=m[">"]),n!==m["<"]&&(y.end=m["<"]),b=v?""+w:w||m["="],v=null),b&&!y.limit&&(typeof g=="string"?b=b+a+(y.atom=g):g&&(n!==g[">"]&&(y.start=g[">"],y.limit=1),n!==g["<"]&&(y.end=g["<"],y.limit=1),n!==(w=g["*"])&&(y.limit=v=1),b&&(b=b+a+(v?""+(w||""):w||(y.atom=g["="]||""))))),((w=p["%"])||y.limit)&&(y.limit=w<=(y.pack||1e3*100)?w:1),(g["-"]||(m||{})["-"]||p["-"])&&(y.reverse=!0),(w=(t.next||"")[m])&&w.put){if(y.atom){if(w=(w.next||"")[y.atom],w&&w.root&&w.root.graph&&w.root.graph[m]&&w.root.graph[m][y.atom])return}else if(w&&w.rad)return}var S=e.state(),E=+new Date,T=0;h&&(h.sgm=E),o(b||"",function(P,B,D){h&&(h.sgr=+new Date),h&&(h.sgi=D);try{r.store.stats.get.time[c%50]=+new Date-E,++c,r.store.stats.get.count++,P&&(r.store.stats.get.err=P)}catch{}console.STAT&&console.STAT(E,+new Date-E,"got",JSON.stringify(b)),E=+new Date,D=D||"";var k,x;if(D.unit&&B&&n!==(k=B[":"])&&n!==(x=B[">"])){var O=b.split(a),A=O[0],C=O[1];(_=_||{})[A]=e.state.ify(_[A],C,x,k,A),t.$.get(A).get(C)._.rad=S}else B&&(typeof B!="string"&&(y.atom?B=n:s.map(B,I,y)),!_&&B&&I(B,""),!y.atom&&!g&typeof m=="string"&&!y.limit&&!y.more&&(t.$.get(m)._.rad=S));h&&(h.sgp=+new Date),console.STAT&&(u=+new Date-E)>9&&(console.STAT(E,u,"got prep time"),console.STAT(E,T,"got prep #")),T=0,E=+new Date;var L=function(){};L.faith=!0,L.rad=p,t.on("in",{"@":d,put:_,"%":D.more?1:n,err:P||n,_:L,DBG:h}),console.STAT&&(u=+new Date-E)>9&&console.STAT(E,u,"got emit",Object.keys(_||{}).length),_=n},y,h&&(h.r=h.r||{})),h&&(h.sgd=+new Date),console.STAT&&(u=+new Date-E)>9&&console.STAT(E,u,"get call");function I(P,B,D,k){if(T++,!!P){B=(b+B).split(a);var x=B.slice(0,1)[0];if(B=B.slice(-1)[0],y.limit&&y.limit<=y.count)return!0;var O,A,C=x,L=B;if(typeof P!="string"){O=P[":"],A=P[">"],(_=_||{})[C]=e.state.ify(_[C],L,A,O,C),y.count=(y.count||0)+((O||"").length||9);return}y.count=(y.count||0)+P.length;var R=P.lastIndexOf(">"),U=i.decode(P.slice(R+1),null,a);P=i.decode(P.slice(0,R),null,a),(_=_||{})[x]=e.state.ify(_[x],B,U,P,x)}}}),e.valid,(r.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var c=0}}),Uo}C0();var qo={exports:{}},Vo;function D0(){return Vo||(Vo=1,function(){function e(r){r=r||{},r.file=String(r.file||"radata");var n=e[r.file],i=null,s;if(n)return console.log("Warning: reusing same IndexedDB store and options as 1st."),e[r.file];n=e[r.file]=function(){};try{r.indexedDB=r.indexedDB||e.indexedDB||indexedDB}catch{}try{if(!r.indexedDB||location.protocol=="file:"){var o=n.d||(n.d={});return n.put=function(a,u,c){o[a]=u,setTimeout(function(){c(null,1)},250)},n.get=function(a,u){setTimeout(function(){u(null,o[a]||s)},5)},console.log("Warning: No indexedDB exists to persist data to!"),n}}catch{}return n.start=function(){var a=indexedDB.open(r.file,1);a.onupgradeneeded=function(u){u.target.result.createObjectStore(r.file)},a.onsuccess=function(){i=a.result},a.onerror=function(u){console.log(u||1)}},n.start(),n.put=function(a,u,c){if(!i){setTimeout(function(){n.put(a,u,c)},1);return}var l=i.transaction([r.file],"readwrite"),f=l.objectStore(r.file),h=f.put(u,""+a);h.onsuccess=f.onsuccess=l.onsuccess=function(){c(null,1)},h.onabort=f.onabort=l.onabort=function(d){c(d||"put.tx.abort")},h.onerror=f.onerror=l.onerror=function(d){c(d||"put.tx.error")}},n.get=function(a,u){if(!i){setTimeout(function(){n.get(a,u)},9);return}var c=i.transaction([r.file],"readonly"),l=c.objectStore(r.file),f=l.get(""+a);f.onsuccess=function(){u(null,f.result)},f.onabort=function(h){u(h||4)},f.onerror=function(h){u(h||5)}},setInterval(function(){i&&i.close(),i=null,n.start()},1e3*15),n}if(typeof window<"u")(e.window=window).RindexedDB=e,e.indexedDB=window.indexedDB;else try{qo.exports=e}catch{}try{var t=e.window.Gun||jr();t.on("create",function(r){this.to.next(r),r.opt.store=r.opt.store||e(r.opt)})}catch{}}()),qo.exports}D0();var T0={},Wo;function F0(){return Wo||(Wo=1,function(){var e=typeof window<"u"?window.Gun:jr();e.on("opt",function(t){this.to.next(t);var r=t.opt;if(t.once||!e.Mesh||r.RTCPeerConnection===!1)return;var n;typeof window<"u"&&(n=window),typeof en<"u"&&(n=en),n=n||{};var i=r.RTCPeerConnection||n.RTCPeerConnection||n.webkitRTCPeerConnection||n.mozRTCPeerConnection,s=r.RTCSessionDescription||n.RTCSessionDescription||n.webkitRTCSessionDescription||n.mozRTCSessionDescription,o=r.RTCIceCandidate||n.RTCIceCandidate||n.webkitRTCIceCandidate||n.mozRTCIceCandidate;if(!i||!s||!o)return;r.RTCPeerConnection=i,r.RTCSessionDescription=s,r.RTCIceCandidate=o,r.rtc=r.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},r.rtc.dataChannel=r.rtc.dataChannel||{ordered:!1,maxRetransmits:2},r.rtc.sdp=r.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},r.rtc.max=r.rtc.max||55,r.rtc.room=r.rtc.room||e.window&&(location.hash.slice(1)||location.pathname.slice(1)),r.announce=function(c){r.rtc.start=+new Date,t.$.get("/RTC/"+r.rtc.room+"<?99").get("+").put(r.pid,function(l){!l.ok||!l.ok.rtc||u(l)},{acks:r.rtc.max}).on(function(l,f,h){l===r.pid||r.rtc.start>h.put[">"]||u({"#":""+h["#"],ok:{rtc:{id:l}}})})};var a=r.mesh=r.mesh||e.Mesh(t);t.on("create",function(c){this.to.next(c),setTimeout(r.announce,1)});function u(c){if(this&&this.off&&this.off(),!!c.ok){var l=c.ok.rtc,f,h;if(!(!l||!l.id||l.id===r.pid)){if(h=l.answer)return!(f=r.peers[l.id]||u[l.id])||f.remoteSet?void 0:(h.sdp=h.sdp.replace(/\\r\\n/g,`\r
`),f.setRemoteDescription(f.remoteSet=new r.RTCSessionDescription(h)));if(h=l.candidate)return f=r.peers[l.id]||u[l.id]||u({ok:{rtc:{id:l.id}}}),f.addIceCandidate(new r.RTCIceCandidate(h));if(!u[l.id]){(f=new r.RTCPeerConnection(r.rtc)).id=l.id;var d=f.wire=f.createDataChannel("dc",r.rtc.dataChannel);if(u[l.id]=f,d.to=setTimeout(function(){delete u[l.id]},1e3*60),d.onclose=function(){a.bye(f)},d.onerror=function(p){},d.onopen=function(p){delete u[l.id],a.hi(f)},d.onmessage=function(p){p&&a.hear(p.data||p,f)},f.onicecandidate=function(p){p.candidate&&t.on("out",{"@":c["#"],ok:{rtc:{candidate:p.candidate,id:r.pid}}})},f.ondatachannel=function(p){var m=p.channel;m.onmessage=d.onmessage,m.onopen=d.onopen,m.onclose=d.onclose},h=l.offer){l.offer.sdp=l.offer.sdp.replace(/\\r\\n/g,`\r
`),f.setRemoteDescription(new r.RTCSessionDescription(h)),f.createAnswer(function(p){f.setLocalDescription(p),t.on("out",{"@":c["#"],ok:{rtc:{answer:p,id:r.pid}}})},function(){},r.rtc.sdp);return}return f.createOffer(function(p){f.setLocalDescription(p),t.on("out",{"@":c["#"],"#":t.ask(u),ok:{rtc:{offer:p,id:r.pid}}})},function(){},r.rtc.sdp),f}}}}})}()),T0}F0();var Go={exports:{}},Zo;function O0(){return Zo||(Zo=1,function(e){(function(){function t(n,i){return i?Ns(n):n.slice?t[s(n)]:function(o,a){n(o={exports:{}}),t[s(a)]=o.exports};function s(o){return o.split("/").slice(-1).toString().replace(".js","")}}var r=e;t(function(n){typeof self<"u"&&(n.window=self),typeof window<"u"&&(n.window=window);var i=n.window||n,s,o=i.SEA||{};(o.window=n.window)&&(o.window.SEA=o);try{s+""!=typeof r&&(r.exports=o)}catch{}n.exports=o})(t,"./root"),t(function(n){var i=t("./root");try{i.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(t,"./https"),t(function(n){var i;if(i+""==typeof btoa){if(i+""==typeof Buffer)try{en.Buffer=t("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}en.btoa=function(s){return Buffer.from(s,"binary").toString("base64")},en.atob=function(s){return Buffer.from(s,"base64").toString("binary")}}})(t,"./base64"),t(function(n){t("./base64");function i(){}Object.assign(i,{from:Array.from}),i.prototype=Object.create(Array.prototype),i.prototype.toString=function(s,o,a){s=s||"utf8",o=o||0;const u=this.length;if(s==="hex"){const c=new Uint8Array(this);return[...Array((a&&a+1||u)-o).keys()].map(l=>c[l+o].toString(16).padStart(2,"0")).join("")}if(s==="utf8")return Array.from({length:(a||u)-o},(c,l)=>String.fromCharCode(this[l+o])).join("");if(s==="base64")return btoa(this)},n.exports=i})(t,"./array"),t(function(n){t("./base64");var i=t("./array");function s(...o){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),s.from(...o)}s.prototype=Object.create(Array.prototype),Object.assign(s,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const o=arguments[0];let a;if(typeof o=="string"){const u=arguments[1]||"utf8";if(u==="hex"){const c=o.match(/([\da-fA-F]{2})/g).map(l=>parseInt(l,16));if(!c||!c.length)throw new TypeError("Invalid first argument for type 'hex'.");a=i.from(c)}else if(u==="utf8"||u==="binary"){const c=o.length,l=new Uint16Array(c);Array.from({length:c},(f,h)=>l[h]=o.charCodeAt(h)),a=i.from(l)}else if(u==="base64"){const c=atob(o),l=c.length,f=new Uint8Array(l);Array.from({length:l},(h,d)=>f[d]=c.charCodeAt(d)),a=i.from(f)}else u==="binary"?a=i.from(o):console.info("SafeBuffer.from unknown encoding: "+u);return a}if(o.byteLength,o.byteLength?o.byteLength:o.length){let u;return o instanceof ArrayBuffer&&(u=new Uint8Array(o)),i.from(u||o)}},alloc(o,a=0){return i.from(new Uint8Array(Array.from({length:o},()=>a)))},allocUnsafe(o){return i.from(new Uint8Array(Array.from({length:o})))},concat(o){if(!Array.isArray(o))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return i.from(o.reduce((a,u)=>a.concat(Array.from(u)),[]))}}),s.prototype.from=s.from,s.prototype.toString=i.prototype.toString,n.exports=s})(t,"./buffer"),t(function(n){const i=t("./root"),s={Buffer:t("./buffer")};var o={},a;if(JSON.parseAsync=JSON.parseAsync||function(c,l,f){var h;try{l(h,JSON.parse(c,f))}catch(d){l(d)}},JSON.stringifyAsync=JSON.stringifyAsync||function(c,l,f,h){var d;try{l(d,JSON.stringify(c,f,h))}catch(p){l(p)}},s.parse=function(c,l){return new Promise(function(f,h){JSON.parseAsync(c,function(d,p){d?h(d):f(p)},l)})},s.stringify=function(c,l,f){return new Promise(function(h,d){JSON.stringifyAsync(c,function(p,m){p?d(p):h(m)},l,f)})},i.window&&(s.crypto=i.window.crypto||i.window.msCrypto,s.subtle=(s.crypto||o).subtle||(s.crypto||o).webkitSubtle,s.TextEncoder=i.window.TextEncoder,s.TextDecoder=i.window.TextDecoder,s.random=c=>s.Buffer.from(s.crypto.getRandomValues(new Uint8Array(s.Buffer.alloc(c))))),!s.TextDecoder){const{TextEncoder:c,TextDecoder:l}=t((a+""==typeof r?".":"")+"./lib/text-encoding",1);s.TextDecoder=l,s.TextEncoder=c}if(!s.crypto)try{var u=t("crypto",1);Object.assign(s,{crypto:u,random:l=>s.Buffer.from(u.randomBytes(l))});const{Crypto:c}=t("@peculiar/webcrypto",1);s.ossl=s.subtle=new c({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}n.exports=s})(t,"./shim"),t(function(n){var i=t("./root"),s=t("./shim"),o={};o.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},o.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},o.ecdh={name:"ECDH",namedCurve:"P-256"},o.jwk=function(a,u){a=a.split(".");var c=a[0],l=a[1],f={kty:"EC",crv:"P-256",x:c,y:l,ext:!0};return f.key_ops=u?["sign"]:["verify"],u&&(f.d=u),f},o.keyToJwk=function(a){return{kty:"oct",k:a.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},o.recall={validity:12*60*60,hook:function(a){return a}},o.check=function(a){return typeof a=="string"&&a.slice(0,4)==="SEA{"},o.parse=async function(a){try{var u=typeof a=="string";return u&&a.slice(0,4)==="SEA{"&&(a=a.slice(3)),u?await s.parse(a):a}catch{}return a},i.opt=o,n.exports=o})(t,"./settings"),t(function(n){var i=t("./shim");n.exports=async function(s,o){var a=typeof s=="string"?s:await i.stringify(s),u=await i.subtle.digest({name:o||"SHA-256"},new i.TextEncoder().encode(a));return i.Buffer.from(u)}})(t,"./sha256"),t(function(n){const i=t("./shim"),s=i.subtle,o=i.ossl?i.ossl:s,a=u=>o.digest({name:"SHA-1"},new ArrayBuffer(u));n.exports=a})(t,"./sha1"),t(function(n){var i=t("./root"),s=t("./shim"),o=t("./settings"),a=t("./sha256"),u;i.work=i.work||(async(c,l,f,h)=>{try{var d=(l||{}).epub||l;if(h=h||{},d instanceof Function&&(f=d,d=u),c=typeof c=="string"?c:await s.stringify(c),(h.name||"").toLowerCase().slice(0,3)==="sha"){var p=s.Buffer.from(await a(c,h.name),"binary").toString(h.encode||"base64");if(f)try{f(p)}catch(_){console.log(_)}return p}d=d||s.random(9);var m=await(s.ossl||s.subtle).importKey("raw",new s.TextEncoder().encode(c),{name:h.name||"PBKDF2"},!1,["deriveBits"]),g=await(s.ossl||s.subtle).deriveBits({name:h.name||"PBKDF2",iterations:h.iterations||o.pbkdf2.iter,salt:new s.TextEncoder().encode(h.salt||d),hash:h.hash||o.pbkdf2.hash},m,h.length||o.pbkdf2.ks*8);c=s.random(c.length);var y=s.Buffer.from(g,"binary").toString(h.encode||"base64");if(f)try{f(y)}catch(_){console.log(_)}return y}catch(_){if(console.log(_),i.err=_,i.throw)throw _;f&&f();return}}),n.exports=i.work})(t,"./work"),t(function(n){var i=t("./root"),s=t("./shim");t("./settings"),i.name=i.name||(async(o,a)=>{try{if(o)try{o()}catch(u){console.log(u)}return}catch(u){if(console.log(u),i.err=u,i.throw)throw u;o&&o();return}}),i.pair=i.pair||(async(o,a)=>{try{var u=s.ossl||s.subtle,c=await s.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async h=>{var d={};d.priv=(await s.subtle.exportKey("jwk",h.privateKey)).d;var p=await s.subtle.exportKey("jwk",h.publicKey);return d.pub=p.x+"."+p.y,d});try{var l=await u.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async h=>{var d={};d.epriv=(await u.exportKey("jwk",h.privateKey)).d;var p=await u.exportKey("jwk",h.publicKey);return d.epub=p.x+"."+p.y,d})}catch(h){if(i.window)throw h;if(h=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw h}l=l||{};var f={pub:c.pub,priv:c.priv,epub:l.epub,epriv:l.epriv};if(o)try{o(f)}catch(h){console.log(h)}return f}catch(h){if(console.log(h),i.err=h,i.throw)throw h;o&&o();return}}),n.exports=i.pair})(t,"./pair"),t(function(n){var i=t("./root"),s=t("./shim"),o=t("./settings"),a=t("./sha256"),u;i.sign=i.sign||(async(c,l,f,h)=>{try{if(h=h||{},!(l||h).priv){if(!i.I)throw"No signing key.";l=await i.I(null,{what:c,how:"sign",why:h.why})}if(u===c)throw"`undefined` not allowed.";var d=await o.parse(c),p=h.check=h.check||d;if(i.verify&&(i.opt.check(p)||p&&p.s&&p.m)&&u!==await i.verify(p,l)){var w=await o.parse(p);if(h.raw||(w="SEA"+await s.stringify(w)),f)try{f(w)}catch(S){console.log(S)}return w}var m=l.pub,g=l.priv,y=o.jwk(m,g),_=await a(d),b=await(s.ossl||s.subtle).importKey("jwk",y,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(v=>(s.ossl||s.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},v,new Uint8Array(_))),w={m:d,s:s.Buffer.from(b,"binary").toString(h.encode||"base64")};if(h.raw||(w="SEA"+await s.stringify(w)),f)try{f(w)}catch(v){console.log(v)}return w}catch(v){if(console.log(v),i.err=v,i.throw)throw v;f&&f();return}}),n.exports=i.sign})(t,"./sign"),t(function(n){var i=t("./root"),s=t("./shim"),o=t("./settings"),a=t("./sha256"),u;i.verify=i.verify||(async(f,h,d,p)=>{try{var m=await o.parse(f);if(h===!1){var g=await o.parse(m.m);if(d)try{d(g)}catch(I){console.log(I)}return g}p=p||{};var y=h.pub||h,_=i.opt.slow_leak?await i.opt.slow_leak(y):await(s.ossl||s.subtle).importKey("jwk",o.jwk(y),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),b=await a(m.m),w,v,S,E;try{if(w=s.Buffer.from(m.s,p.encode||"base64"),v=new Uint8Array(w),S=await(s.ossl||s.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},_,v,new Uint8Array(b)),!S)throw"Signature did not match."}catch{if(i.opt.fallback)return await i.opt.fall_verify(f,h,d,p)}var T=S?await o.parse(m.m):u;if(d)try{d(T)}catch(I){console.log(I)}return T}catch(I){if(console.log(I),i.err=I,i.throw)throw I;d&&d();return}}),n.exports=i.verify;var c={};i.opt.slow_leak=f=>{if(c[f])return c[f];var h=o.jwk(f);return c[f]=(s.ossl||s.subtle).importKey("jwk",h,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),c[f]};var l=i.opt;i.opt.fall_verify=async function(f,h,d,p,m){if(m===i.opt.fallback)throw"Signature did not match";m=m||1;var g=f||"";f=i.opt.unpack(f)||f;var y=await o.parse(f),_=h.pub||h,b=await i.opt.slow_leak(_),w=m<=i.opt.fallback?s.Buffer.from(await s.subtle.digest({name:"SHA-256"},new s.TextEncoder().encode(await o.parse(y.m)))):await a(y.m),v,S,E;try{if(v=s.Buffer.from(y.s,p.encode||"base64"),S=new Uint8Array(v),E=await(s.ossl||s.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},b,S,new Uint8Array(w)),!E)throw"Signature did not match."}catch{try{v=s.Buffer.from(y.s,"utf8"),S=new Uint8Array(v),E=await(s.ossl||s.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},b,S,new Uint8Array(w))}catch{if(!E)throw"Signature did not match."}}var T=E?await o.parse(y.m):u;if(l.fall_soul=g["#"],l.fall_key=g["."],l.fall_val=f,l.fall_state=g[">"],d)try{d(T)}catch(I){console.log(I)}return T},i.opt.fallback=2})(t,"./verify"),t(function(n){var i=t("./shim"),s=t("./settings"),o=t("./sha256");const a=async(u,c,l)=>{const f=u+(c||i.random(8)).toString("utf8"),h=i.Buffer.from(await o(f),"binary"),d=s.keyToJwk(h);return await i.subtle.importKey("jwk",d,{name:"AES-GCM"},!1,["encrypt","decrypt"])};n.exports=a})(t,"./aeskey"),t(function(n){var i=t("./root"),s=t("./shim");t("./settings");var o=t("./aeskey"),a;i.encrypt=i.encrypt||(async(u,c,l,f)=>{try{f=f||{};var h=(c||f).epriv||c;if(a===u)throw"`undefined` not allowed.";if(!h){if(!i.I)throw"No encryption key.";c=await i.I(null,{what:u,how:"encrypt",why:f.why}),h=c.epriv||c}var d=typeof u=="string"?u:await s.stringify(u),p={s:s.random(9),iv:s.random(15)},m=await o(h,p.s,f).then(y=>s.subtle.encrypt({name:f.name||"AES-GCM",iv:new Uint8Array(p.iv)},y,new s.TextEncoder().encode(d))),g={ct:s.Buffer.from(m,"binary").toString(f.encode||"base64"),iv:p.iv.toString(f.encode||"base64"),s:p.s.toString(f.encode||"base64")};if(f.raw||(g="SEA"+await s.stringify(g)),l)try{l(g)}catch(y){console.log(y)}return g}catch(y){if(console.log(y),i.err=y,i.throw)throw y;l&&l();return}}),n.exports=i.encrypt})(t,"./encrypt"),t(function(n){var i=t("./root"),s=t("./shim"),o=t("./settings"),a=t("./aeskey");i.decrypt=i.decrypt||(async(u,c,l,f)=>{try{f=f||{};var h=(c||f).epriv||c;if(!h){if(!i.I)throw"No decryption key.";c=await i.I(null,{what:u,how:"decrypt",why:f.why}),h=c.epriv||c}var d=await o.parse(u),p,m,g;try{p=s.Buffer.from(d.s,f.encode||"base64"),m=s.Buffer.from(d.iv,f.encode||"base64"),g=s.Buffer.from(d.ct,f.encode||"base64");var y=await a(h,p,f).then(b=>s.subtle.decrypt({name:f.name||"AES-GCM",iv:new Uint8Array(m),tagLength:128},b,new Uint8Array(g)))}catch{if(f.encode==="utf8")throw"Could not decrypt";if(i.opt.fallback)return f.encode="utf8",await i.decrypt(u,c,l,f)}var _=await o.parse(new s.TextDecoder("utf8").decode(y));if(l)try{l(_)}catch(b){console.log(b)}return _}catch(b){if(console.log(b),i.err=b,i.throw)throw b;l&&l();return}}),n.exports=i.decrypt})(t,"./decrypt"),t(function(n){var i=t("./root"),s=t("./shim");t("./settings"),i.secret=i.secret||(async(a,u,c,l)=>{try{if(l=l||{},!u||!u.epriv||!u.epub){if(!i.I)throw"No secret mix.";u=await i.I(null,{what:a,how:"secret",why:l.why})}var f=a.epub||a,h=u.epub,d=u.epriv,p=s.ossl||s.subtle,m=o(f),g=Object.assign({public:await p.importKey(...m,!0,[])},{name:"ECDH",namedCurve:"P-256"}),y=o(h,d),_=await p.importKey(...y,!1,["deriveBits"]).then(async w=>{var v=await p.deriveBits(g,w,256),S=new Uint8Array(v),E=await p.importKey("raw",S,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return p.exportKey("jwk",E).then(({k:T})=>T)}),b=_;if(c)try{c(b)}catch(w){console.log(w)}return b}catch(w){if(console.log(w),i.err=w,i.throw)throw w;c&&c();return}});var o=(a,u)=>{var[c,l]=a.split("."),f=u?{d:u}:{};return["jwk",Object.assign(f,{x:c,y:l,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};n.exports=i.secret})(t,"./secret"),t(function(n){var i=t("./root");i.certify=i.certify||(async(s,o={},a,u,c={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),s=(()=>{var _=[];if(s){if((typeof s=="string"||Array.isArray(s))&&s.indexOf("*")>-1)return"*";if(typeof s=="string")return s;if(Array.isArray(s)){if(s.length===1&&s[0])return typeof s[0]=="object"&&s[0].pub?s[0].pub:typeof s[0]=="string"?s[0]:null;s.map(b=>{typeof b=="string"?_.push(b):typeof b=="object"&&b.pub&&_.push(b.pub)})}return typeof s=="object"&&s.pub?s.pub:_.length>0?_:null}})(),!s)return console.log("No certificant found.");const f=c.expiry&&(typeof c.expiry=="number"||typeof c.expiry=="string")?parseFloat(c.expiry):null,h=(o||{}).read?o.read:null,d=(o||{}).write?o.write:typeof o=="string"||Array.isArray(o)||o["+"]||o["#"]||o["."]||o["="]||o["*"]||o[">"]||o["<"]?o:null,p=(c||{}).block||(c||{}).blacklist||(c||{}).ban||{},m=p.read&&(typeof p.read=="string"||(p.read||{})["#"])?p.read:null,g=typeof p=="string"?p:p.write&&(typeof p.write=="string"||p.write["#"])?p.write:null;if(!h&&!d)return console.log("No policy found.");const y=JSON.stringify({c:s,...f?{e:f}:{},...h?{r:h}:{},...d?{w:d}:{},...m?{rb:m}:{},...g?{wb:g}:{}});var l=await i.sign(y,a,null,{raw:1});if(c.raw||(l="SEA"+JSON.stringify(l)),u)try{u(l)}catch(_){console.log(_)}return l}catch(f){if(i.err=f,i.throw)throw f;u&&u();return}}),n.exports=i.certify})(t,"./certify"),t(function(n){var i=t("./shim"),s=t("./root");s.work=t("./work"),s.sign=t("./sign"),s.verify=t("./verify"),s.encrypt=t("./encrypt"),s.decrypt=t("./decrypt"),s.certify=t("./certify"),s.random=s.random||i.random,s.Buffer=s.Buffer||t("./buffer"),s.keyid=s.keyid||(async o=>{try{const a=i.Buffer.concat(o.replace(/-/g,"+").replace(/_/g,"/").split(".").map(f=>i.Buffer.from(f,"base64"))),u=i.Buffer.concat([i.Buffer.from([153,a.length/256,a.length%256]),a]),c=await sha1hash(u),l=i.Buffer.from(c,"binary");return l.toString("hex",l.length-8)}catch(a){throw console.log(a),a}}),((s.window||{}).GUN||{}).SEA=s,n.exports=s})(t,"./sea"),t(function(n){var i=t("./sea"),s,o;i.window?s=i.window.GUN||{chain:{}}:s=t((o+""==typeof r?".":"")+"./gun",1),i.GUN=s;function a(c){this._={$:this}}a.prototype=function(){function c(){}return c.prototype=s.chain,new c}(),a.prototype.constructor=a,s.chain.user=function(c){var l=this,h=l.back(-1),f;if(c)return c=i.opt.pub((c._||"")["#"])||c,h.get("~"+c);if(f=h.back("user"))return f;var h=h._,d=h,p=d.opt.uuid||u;return(d=(f=d.user=l.chain(new a))._).opt={},d.opt.uuid=function(m){var g=p(),y=h.user;return!y||!(y=y.is)||!(y=y.pub)||(g="~"+y+"/"+g,m&&m.call&&m(null,g)),g},f};function u(){return s.state().toString(36).replace(".","")}s.User=a,a.GUN=s,a.SEA=s.SEA=i,n.exports=a})(t,"./user"),t(function(n){var i,s=""+i!=typeof GUN?GUN||{chain:{}}:t((""+i==typeof r?".":"")+"./gun",1);s.chain.then=function(o,a){var u=this,c=new Promise(function(l,f){u.once(l,a)});return o?c.then(o):c}})(t,"./then"),t(function(n){var i=t("./user"),s=i.SEA,o=i.GUN,a=function(){};i.prototype.create=function(...u){var c=typeof u[0]=="object"&&(u[0].pub||u[0].epub)?u[0]:typeof u[1]=="object"&&(u[1].pub||u[1].epub)?u[1]:null,l=c&&(c.pub||c.epub)?c.pub:typeof u[0]=="string"?u[0]:null,f=c&&(c.pub||c.epub)?c:l&&typeof u[1]=="string"?u[1]:null,h=u.filter(b=>typeof b=="function")[0]||null,d=u&&u.length>1&&typeof u[u.length-1]=="object"?u[u.length-1]:{},p=this,m=p._,g=p.back(-1);if(h=h||a,d=d||{},d.check!==!1){var y;if(l||(y="No user."),(f||"").length<8&&(y="Password too short!"),y)return h({err:o.log(y)}),p}if(m.ing)return(h||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),p;m.ing=!0;var _={};return _.a=function(b){if(_.pubs=b,b&&!d.already){var w={err:o.log("User already created!")};m.ing=!1,(h||a)(w),p.leave();return}_.salt=String.random(64),s.work(f,_.salt,_.b)},_.b=function(b){_.proof=b,c?_.c(c):s.pair(_.c)},_.c=function(b){var w;_.pair=b||{},(w=m.root.user)&&(w._.sea=b,w.is={pub:b.pub,epub:b.epub,alias:l}),_.data={pub:b.pub},_.d()},_.d=function(){_.data.alias=l,_.e()},_.e=function(){_.data.epub=_.pair.epub,s.encrypt({priv:_.pair.priv,epriv:_.pair.epriv},_.proof,_.f,{raw:1})},_.f=function(b){_.data.auth=JSON.stringify({ek:b,s:_.salt}),_.g(_.data.auth)},_.g=function(b){var w;_.data.auth=_.data.auth||b,g.get(w="~"+_.pair.pub).put(_.data).on(_.h);var v={};v[w]={"#":w},g.get("~@"+l).put(v).get(w).on(_.i)},_.h=function(b,w,v,S){S.off(),_.h.ok=1,_.i()},_.i=function(b,w,v,S){S&&(_.i.ok=1,S.off()),!(!_.h.ok||!_.i.ok)&&(m.ing=!1,h({ok:0,pub:_.pair.pub}),a===h&&(c?p.auth(c):p.auth(l,f)))},g.get("~@"+l).once(_.a),p},i.prototype.leave=function(u,c){var l=this,f=l.back(-1)._.user;if(f&&(delete f.is,delete f._.is,delete f._.sea),s.window)try{var h={};h=s.window.sessionStorage,delete h.recall,delete h.pair}catch{}return l}})(t,"./create"),t(function(n){var i=t("./user"),s=i.SEA,o=i.GUN,a=function(){};i.prototype.auth=function(...c){var l=typeof c[0]=="object"&&(c[0].pub||c[0].epub)?c[0]:typeof c[1]=="object"&&(c[1].pub||c[1].epub)?c[1]:null,f=!l&&typeof c[0]=="string"?c[0]:null,h=(f||l&&!(l.priv&&l.epriv))&&typeof c[1]=="string"?c[1]:null,d=c.filter(v=>typeof v=="function")[0]||null,p=c&&c.length>1&&typeof c[c.length-1]=="object"?c[c.length-1]:{},m=this,g=m._,y=m.back(-1);if(g.ing)return(d||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),m;g.ing=!0;var _={},b,w=9;return _.a=function(v){if(!v)return _.b();if(!v.pub){var S=[];return Object.keys(v).forEach(function(E){E!="_"&&S.push(v[E])}),_.b(S)}if(_.name)return _.f(v);_.c((_.data=v).auth)},_.b=function(v){var S=(_.list=(_.list||[]).concat(v||[])).shift();if(b===S){if(_.name)return _.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(f&&w--){y.get("~@"+f).once(_.a);return}return _.err("Wrong user or password.")}y.get(S).once(_.a)},_.c=function(v){if(b===v)return _.b();if(typeof v=="string")return _.c(u(v));s.work(h,(_.auth=v).s,_.d,_.enc)},_.d=function(v){s.decrypt(_.auth.ek,v,_.e,_.enc)},_.e=function(v){if(b===v)return _.enc?(_.enc=null,_.b()):(_.enc={encode:"utf8"},_.c(_.auth));_.half=v,_.f(_.data)},_.f=function(v){var S=_.half||{},E=_.data||{};_.g(_.lol={pub:v.pub||E.pub,epub:v.epub||E.epub,priv:v.priv||S.priv,epriv:v.epriv||S.epriv})},_.g=function(v){if(!v||!v.pub||!v.epub)return _.b();_.pair=v;var S=y._.user,E=S._;E.tag;var T=E.opt;E=S._=y.get("~"+v.pub)._,E.opt=T,S.is={pub:v.pub,epub:v.epub,alias:f||v.pub},E.sea=_.pair,g.ing=!1;try{h&&b==(u(g.root.graph["~"+v.pub].auth)||"")[":"]&&(p.shuffle=p.change=h)}catch{}if(p.change?_.z():(d||a)(E),s.window&&(m.back("user")._.opt||p).remember)try{var I={};I=s.window.sessionStorage,I.recall=!0,I.pair=JSON.stringify(v)}catch{}try{y._.tag.auth?y._.on("auth",E):setTimeout(function(){y._.on("auth",E)},1)}catch(P){o.log("Your 'auth' callback crashed with:",P)}},_.h=function(v){if(!v)return _.b();if(f=v.alias,f||(f=v.alias="~"+l.pub),!v.auth)return _.g(l);l=null,_.c((_.data=v).auth)},_.z=function(){_.salt=String.random(64),s.work(p.change,_.salt,_.y)},_.y=function(v){s.encrypt({priv:_.pair.priv,epriv:_.pair.epriv},v,_.x,{raw:1})},_.x=function(v){_.w(JSON.stringify({ek:v,s:_.salt}))},_.w=function(v){if(p.shuffle){console.log("migrate core account from UTF8 & shuffle");var S={};Object.keys(_.data).forEach(function(E){S[E]=_.data[E]}),delete S._,S.auth=v,y.get("~"+_.pair.pub).put(S)}y.get("~"+_.pair.pub).get("auth").put(v,d||a)},_.err=function(v){var S={err:o.log(v||"User cannot be found!")};g.ing=!1,(d||a)(S)},_.plugin=function(v){if(!(_.name=v))return _.err();var S=[v];v[0]!=="~"&&(S[1]="~"+v,S[2]="~@"+v),_.b(S)},l?l.priv&&l.epriv?_.g(l):y.get("~"+l.pub).once(_.h):f?y.get("~@"+f).once(_.a):!f&&!h&&s.name(_.plugin),m};function u(c){if(typeof c!="string")return c;try{c=JSON.parse(c)}catch{c={}}return c}})(t,"./auth"),t(function(n){var i=t("./user"),s=i.SEA;i.GUN,i.prototype.recall=function(o,a){var u=this,c=u.back(-1);if(o=o||{},o&&o.sessionStorage){if(s.window)try{var l={};l=s.window.sessionStorage,l&&(c._.opt.remember=!0,(u.back("user")._.opt||o).remember=!0,(l.recall||l.pair)&&c.user().auth(JSON.parse(l.pair),a))}catch{}return u}return u}})(t,"./recall"),t(function(n){var i=t("./user"),s=i.SEA,o=i.GUN,a=function(){};i.prototype.pair=function(){var u=this,c;try{c=new Proxy({DANGER:"☠"},{get:function(l,f,h){if(!(!u.is||!(u._||"").sea))return u._.sea[f]}})}catch{}return c},i.prototype.delete=async function(u,c,l){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var f=this;f.back(-1);var h=f.back("user");try{h.auth(u,c,function(d){var p=(h.is||{}).pub;h.map().once(function(){this.put(null)}),h.leave(),(l||a)({ok:0})})}catch(d){o.log("User.delete failed! Error:",d)}return f},i.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const u=this.back(-1);try{return await authRecall(u),u._.user._}catch{const c="No session!";throw o.log(c),{err:c}}},i.prototype.trust=async function(u){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(u)&&u.get("pub").get((c,l)=>{console.log(c,l)}),u.get("trust").get(path).put(theirPubkey)},i.prototype.grant=function(u,c){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var l=this,f=l.back(-1).user(),h=f._.sea,d="";return l.back(function(p){p.is||(d+=p.get||"")}),async function(){var p,m=await f.get("grant").get(h.pub).get(d).then();m=await s.decrypt(m,h),m||(m=s.random(16).toString(),p=await s.encrypt(m,h),f.get("grant").get(h.pub).get(d).put(p));var g=u.get("pub").then(),y=u.get("epub").then();g=await g,y=await y;var _=await s.secret(y,h);p=await s.encrypt(m,_),f.get("grant").get(g).get(d).put(p,c)}(),l},i.prototype.secret=function(u,c){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var l=this,f=l.back(-1).user(),h=f.pair(),d="";return l.back(function(p){p.is||(d+=p.get||"")}),async function(){var p,m=await f.get("trust").get(h.pub).get(d).then();m=await s.decrypt(m,h),m||(m=s.random(16).toString(),p=await s.encrypt(m,h),f.get("trust").get(h.pub).get(d).put(p)),p=await s.encrypt(u,m),l.put(p,c)}(),l},n.exports=i})(t,"./share"),t(function(n){var i=t("./sea"),s=t("./settings"),o,a=(i.window||"").GUN||t((""+o==typeof r?".":"")+"./gun",1);a.on("opt",function(p){p.sea||(p.sea={own:{}},p.on("put",u,p)),this.to.next(p)});function u(p){var m=this,g=m.as,y=p.put,_=y["#"],b=y["."],w=y[":"],v=y[">"],S=p["#"],E;if(!(!_||!b)){if((p._||"").faith&&(g.opt||"").faith&&typeof p._=="function"){i.opt.pack(y,function(I){i.verify(I,!1,function(P){y["="]=i.opt.unpack(P),m.to.next(p)})});return}var T=function(I){g.on("in",{"@":S,err:p.err=I})};if((p._||"").DBG&&((p._||"").DBG.c=+new Date),0<=_.indexOf("<?")&&(E=parseFloat(_.split("<?")[1]||""),E&&v<a.state()-E*1e3)){(E=p._)&&E.stun&&E.stun--;return}if(_==="~@"){u.alias(m,p,w,b,_,g,T);return}if(_.slice(0,2)==="~@"){u.pubs(m,p,w,b,_,g,T);return}if(E=i.opt.pub(_)){u.pub(m,p,w,b,_,g,T,g.user||"",E);return}if(0<=_.indexOf("#")){u.hash(m,p,w,b,_,g,T);return}u.any(m,p,w,b,_,g,T,g.user||"")}}u.hash=function(p,m,g,y,_,b,w){i.work(g,null,function(v){function S(E){let T="";for(let I=0;I<E.length;I++)T+=I-1&1?"":String.fromCharCode(parseInt(E.substring(I-1,I+1),16));return btoa(T)}if(v&&v===y.split("#").slice(-1)[0]||v&&v===S(y.split("#").slice(-1)[0]))return p.to.next(m);w("Data hash not same as hash!")},{name:"SHA-256"})},u.alias=function(p,m,g,y,_,b,w){if(!g)return w("Data must exist!");if("~@"+y===l(g))return p.to.next(m);w("Alias not same!")},u.pubs=function(p,m,g,y,_,b,w){if(!g)return w("Alias must exist!");if(y===l(g))return p.to.next(m);w("Alias not same!")},u.pub=async function(p,m,g,y,_,b,w,v,S){var E;const T=await s.parse(g)||{},I=(P,B,D)=>{if(P.m&&P.s&&B&&S)return i.verify(P,S,k=>{if(o!==k&&o!==k.e&&m.put[">"]&&m.put[">"]>parseFloat(k.e))return w("Certificate expired.");if(o!==k&&k.c&&k.w&&(k.c===B||k.c.indexOf("*")>-1)){let O=_.indexOf("/")>-1?_.replace(_.substring(0,_.indexOf("/")+1),""):"";String.match=String.match||a.text.match;const A=Array.isArray(k.w)?k.w:typeof k.w=="object"||typeof k.w=="string"?[k.w]:[];for(const C of A)if(String.match(O,C["#"])&&String.match(y,C["."])||!C["."]&&String.match(O,C["#"])||!C["#"]&&String.match(y,C["."])||String.match(O?O+"/"+y:y,C["#"]||C)){if(C["+"]&&C["+"].indexOf("*")>-1&&O&&O.indexOf(B)==-1&&y.indexOf(B)==-1)return w(`Path "${O}" or key "${y}" must contain string "${B}".`);if(k.wb&&(typeof k.wb=="string"||(k.wb||{})["#"])){var x=p.as.root.$.back(-1);return typeof k.wb=="string"&&k.wb.slice(0,1)!=="~"&&(x=x.get("~"+S)),x.get(k.wb).get(B).once(L=>L&&(L===1||L===!0)?w(`Certificant ${B} blocked.`):D(k))}return D(k)}return w("Certificate verification fail.")}})};if(y==="pub"&&"~"+S===_)return g===S?p.to.next(m):w("Account not same!");if((E=v.is)&&E.pub&&!T["*"]&&!T["+"]&&(S===E.pub||S!==E.pub&&((m._.msg||{}).opt||{}).cert)){i.opt.pack(m.put,P=>{i.sign(P,v._.sea,async function(B){if(o===B)return w(i.err||"Signature fail.");if(m.put[":"]={":":E=i.opt.unpack(B.m),"~":B.s},m.put["="]=E,S===v.is.pub){(E=l(g))&&((b.sea.own[E]=b.sea.own[E]||{})[S]=1),JSON.stringifyAsync(m.put[":"],function(D,k){return D?w(D||"Stringify error."):(m.put[":"]=k,p.to.next(m))});return}if(S!==v.is.pub&&((m._.msg||{}).opt||{}).cert){const D=await s.parse(m._.msg.opt.cert);D&&D.m&&D.s&&I(D,v.is.pub,k=>{m.put[":"]["+"]=D,m.put[":"]["*"]=v.is.pub,JSON.stringifyAsync(m.put[":"],function(x,O){return x?w(x||"Stringify error."):(m.put[":"]=O,p.to.next(m))})})}},{raw:1})});return}i.opt.pack(m.put,P=>{i.verify(P,T["*"]||S,function(B){var D;if(B=i.opt.unpack(B),o===B)return w("Unverified data.");if((D=l(B))&&S===i.opt.pub(D)&&((b.sea.own[D]=b.sea.own[D]||{})[S]=1),T["+"]&&T["+"].m&&T["+"].s&&T["*"])I(T["+"],T["*"],k=>(m.put["="]=B,p.to.next(m)));else return m.put["="]=B,p.to.next(m)})})},u.any=function(p,m,g,y,_,b,w,v){if(b.opt.secure)return w("Soul missing public key at '"+y+"'.");b.on("secure",function(S){if(this.off(),!b.opt.secure)return p.to.next(S);w("Data cannot be changed.")}).on.on("secure",m)};var c=a.valid,l=function(p,m){return typeof(m=c(p))=="string"&&m};(a.state||"").ify;var f=/[^\w_-]/;i.opt.pub=function(p){if(p&&(p=p.split("~"),!(!p||!(p=p[1]))&&(p=p.split(f).slice(0,2),!(!p||p.length!=2)&&(p[0]||"")[0]!=="@")))return p=p.slice(0,2).join("."),p},i.opt.stringy=function(p){},i.opt.pack=function(p,m,g,y,_){var b,w;if(i.opt.check(p))return m(p);p&&p["#"]&&p["."]&&p[">"]&&(b=p[":"],w=1),JSON.parseAsync(w?b:p,function(v,S){var E=o!==(S||"")[":"]&&(S||"")["~"];if(!E){m(p);return}m({m:{"#":_||p["#"],".":g||p["."],":":(S||"")[":"],">":p[">"]||a.state.is(y,g)},s:E})})};var h=i.opt;i.opt.unpack=function(p,m,g){var y;if(o!==p){if(p&&o!==(y=p[":"]))return y;if(m=m||h.fall_key,!g&&h.fall_val&&(g={},g[m]=h.fall_val),!(!m||!g)){if(p===g[m]||!i.opt.check(g[m]))return p;var _=g&&g._&&g._["#"]||h.fall_soul,b=a.state.is(g,m)||h.fall_state;if(p&&p.length===4&&_===p[0]&&m===p[1]&&d(b)===d(p[3]))return p[2];if(b<i.opt.shuffle_attack)return p}}},i.opt.shuffle_attack=15463296e5;var d=Math.floor})(t,"./index")})()}(Go)),Go.exports}var I0=O0();const Fr=uh(I0),P0="https://peer.wallie.io/gun",L0={space:"Space",chat:"Chat",posts:"Posts",rooms:"Rooms",files:"Files"},R0={pub:"McUmKdO7NtwX1vUrZiNvzgnPVPwgqKGV1PNATxIxTuM.iXExKjIByXeVGosHHeUzaJyrcthdc83O9HuX6rYX0gs",hosts:{"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo":{enc:'SEA{"ct":"169OGBU2H9XKmaZLO+s8Pc5+fSaTrrSB4OVFm33CGh+VwxhEu0x9U7ir8m0LxXbcBEVt6MZ7CEPYtIL12Stwi0LCG6a139JEDSWwUZFxE/b/y6HZtn/V2gr9G4xL/TcdWHF2D+r+bBMHqJMBXKoIofz3DH/eArW8IgAIWm+VBmJYkejZ1w8WW9/1qx3RFVIITXeMB5FI8VzY7y9DGCyIDwMNVSeHDbjenK3oDz2qS48Gem13lHv/behM+vZNug7eL7WaF07sf962p0oX9mF0Y0fMLossIFOT8QPjeV9ZcdkMl4ngc+W2HN+WvxldE5dy2yock/15N77X6VQ5111ITDwJHkhXjp4Ro94NeKujb3yh4H8vXbQOeJPPJyQTZ3G4yF4Nw65PKIghIwdBNdsiRQ1QtjxQvaetaK5j5+0=","iv":"dc92+kgMorDWh4I0ntGb","s":"MV6T397GhmNe"}',profile:'SEA{"m":{"c":"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo","w":{"*":"profile"}},"s":"j5LkQNRO7KX/PAwK4vvg/SGg2zHp6np2Bq6Ge9RgJrkSBmXPMxRJbsZncBqrlwWYbaUFtb4vcUlzDq9onzVSLA=="}',features:'SEA{"m":{"c":"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo","w":{"*":"features"}},"s":"lUXJ84tvirAhnSwWgZGg2QfT0S8D7Xe7D0Bbae24pcX6D/GZuiq/lYPFnr+4ym/6bteJgdWV2U+E2q/1AMblsA=="}',hosts:'SEA{"m":{"c":"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo","w":{"*":"hosts"}},"s":"Aq15hOjPHe2Q73pPa3OasqzflU1b41tmVC7mZwX2GQJujI7VYLR85W4zszeu9oEnLfcRf5bgu0aOngJrvLT9KA=="}'}},features:{space:'SEA{"m":{"c":"*","w":{"*":"space","+":"*"}},"s":"7N0iKUMsr2LMVyu7WWBknTDUZSTJjsz9vFFkUwNpjdhiAWfga/GIL2HJg6YfbAnCcWKdZCi4fQYLPsoR9LILIg=="}',chat:'SEA{"m":{"c":"*","w":{"*":"chat","+":"*"}},"s":"2Nv9jI4I1ixSuGZnLFesGoveoioftd2yjIDOLwCGTmqAoX5KJs9f8REj1lAvYwZqm8jX6v36wew7XOwlBG1/IA=="}',posts:'SEA{"m":{"c":"*","w":{"*":"posts","+":"*"}},"s":"iDKLG8/PkTrhb4uO+aMA5SB6kt/GdOnrnlbEG79OL66v+miHo/Pa1YO+/4yF5f5Y5YSJcskTnoNqi3KW0pFJuA=="}',rooms:'SEA{"m":{"c":"*","w":{"*":"rooms","+":"*"}},"s":"wIwGepdJmjNOZHA4ujL624PLGu+hLRjgkg2vSm5mRCqN208sKWRqEsMrM44TFfVz6p0wNkmQvdH6kb2037zRwg=="}',files:'SEA{"m":{"c":"*","w":{"*":"files","+":"*"}},"s":"rni6jM8eMk9lSDmNtroe4pqknBaXTUGHRR/9tEf2nnyx/v+qO465qk+pJJdeKlul0hanLujtL3TH+AE3e5W03A=="}'}},Cr={relay:P0,features:L0,room:R0},lh=Cr.relay,Dt=xt({list:[],peer:Re("peer",lh),hostname:Lt(()=>{var e;return((e=new URL(Dt.peer))==null?void 0:e.hostname)||""}),status:"offline",started:0,pulse:0,lag:0,diff:Lt(()=>Dt.pulse-Dt.started),age:Lt(()=>$f(Dt.diff)),delay:Lt(()=>Date.now()-Dt.pulse),blink:!1});nn(()=>Dt.pulse,(e,t)=>{Dt.blink=!Dt.blink,Dt.lag=e-t-500});function B0(e){Dt.peer=e,setTimeout(()=>{window.location.reload()})}function M0(){Dt.peer=lh,setTimeout(()=>{window.location.reload()})}function X_(){const e=Tt();return Dt.pulse==0&&(Dt!=null&&Dt.hostname)&&e.get(Dt==null?void 0:Dt.hostname).map().on((t,r)=>{try{Dt[r]=t}catch(n){console.log(n)}}),{relay:Dt,setPeer:B0,resetPeer:M0}}let Ei;function Tt({localStorage:e=!1,peers:t=[Dt.peer]}={}){return Ei||(Ei=Je({localStorage:e,peers:t})),Ei}function Q_({localStorage:e=!1,peers:t=[Dt.peer]}={}){return Je({peers:t,localStorage:e})}var Au;(Au=Je==null?void 0:Je.node)==null||Au.soul;var Su;const t2=(Su=Je==null?void 0:Je.text)==null?void 0:Su.random;var Ai,Ko;function N0(){if(Ko)return Ai;Ko=1;const e="[a-fA-F\\d:]",t=c=>c&&c.includeBoundaries?`(?:(?<=\\s|^)(?=${e})|(?<=${e})(?=\\s|$))`:"",r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",i=`
(?:
(?:${n}:){7}(?:${n}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${n}:){6}(?:${r}|:${n}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${n}:){5}(?::${r}|(?::${n}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${n}:){4}(?:(?::${n}){0,1}:${r}|(?::${n}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${n}:){3}(?:(?::${n}){0,2}:${r}|(?::${n}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${n}:){2}(?:(?::${n}){0,3}:${r}|(?::${n}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${n}:){1}(?:(?::${n}){0,4}:${r}|(?::${n}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${n}){0,5}:${r}|(?::${n}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp(`(?:^${r}$)|(?:^${i}$)`),o=new RegExp(`^${r}$`),a=new RegExp(`^${i}$`),u=c=>c&&c.exact?s:new RegExp(`(?:${t(c)}${r}${t(c)})|(?:${t(c)}${i}${t(c)})`,"g");return u.v4=c=>c&&c.exact?o:new RegExp(`${t(c)}${r}${t(c)}`,"g"),u.v6=c=>c&&c.exact?a:new RegExp(`${t(c)}${i}${t(c)}`,"g"),Ai=u,Ai}const j0=JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","اتصالات","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","诺基亚","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]');var Si,Jo;function $0(){if(Jo)return Si;Jo=1;const e=N0(),t=j0;return Si=r=>{r={strict:!0,...r};const n=`(?:(?:[a-z]+:)?//)${r.strict?"":"?"}`,i="(?:\\S+(?::\\S*)?@)?",s=e.v4().source,o="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",a="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",u=`(?:\\.${r.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${t.sort((h,d)=>d.length-h.length).join("|")})`})\\.?`,f=`(?:${n}|www\\.)${i}(?:localhost|${s}|${o}${a}${u})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return r.exact?new RegExp(`(?:^${f}$)`,"i"):new RegExp(f,"ig")},Si}var z0=$0();const U0=Nr(z0),as=xt({}),us=xt({});function e2(){return{relays:as,errors:us,loadRelays:H0}}async function H0({source:e="https://raw.githubusercontent.com/wiki/amark/gun/volunteer.dht.md"}={}){const n=(await(await fetch(e)).text()).match(U0());return n.push(Dt.peer),Array.from(n).forEach(s=>{let o=new URL(s);if(o.pathname==="/gun"&&o.pathname.indexOf("~~")===-1){let a=performance.now();fetch(o.href,{method:"HEAD",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"}).then(u=>{let c=performance.now();if(u.ok){const l={host:o.hostname,ping:(c-a).toFixed(),url:o.href};as[o.hostname]=l}else us[o.hostname]=u}).catch(u=>{us[o.hostname]=u})}}),as}function r2(e){return typeof e=="string"&&e.length===44&&e.charAt(43)==="="}async function hh(e){return await Fr.work(e,null,null,{name:"SHA-256"})}async function q0(e){let t=typeof e=="string"?e:JSON.stringify(e);return{hash:await hh(t),hashed:t}}function n2(e){if(!e)return;const t=/[+=/]/g;return e.replace(t,V0)}function V0(e){switch(e){case"+":return"-";case"=":return".";case"/":return"_"}}async function W0({pair:e,tag:t="word",dot:r="",users:n="*",personal:i=!1}){let s={"*":`${t}`};r&&(s["."]=r),i&&(s["+"]="*");try{return await Fr.certify(n,s,e,null)}catch(o){return console.log("cert error: ",o),""}}async function Yo({pair:e,list:t=[]}){const r={};for(let n of t)r[n.tag]=await W0({...n,pair:e});return r}function Le(e){return Array.isArray?Array.isArray(e):ph(e)==="[object Array]"}function G0(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Z0(e){return e==null?"":G0(e)}function _e(e){return typeof e=="string"}function fh(e){return typeof e=="number"}function K0(e){return e===!0||e===!1||J0(e)&&ph(e)=="[object Boolean]"}function dh(e){return typeof e=="object"}function J0(e){return dh(e)&&e!==null}function Kt(e){return e!=null}function Ci(e){return!e.trim().length}function ph(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Y0="Incorrect 'index' type",X0=e=>`Invalid value for key ${e}`,Q0=e=>`Pattern length exceeds max of ${e}.`,tp=e=>`Missing ${e} property in key`,ep=e=>`Property 'weight' in key '${e}' must be a positive integer`,Xo=Object.prototype.hasOwnProperty;class rp{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let i=mh(n);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function mh(e){let t=null,r=null,n=null,i=1,s=null;if(_e(e)||Le(e))n=e,t=Qo(e),r=cs(e);else{if(!Xo.call(e,"name"))throw new Error(tp("name"));const o=e.name;if(n=o,Xo.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(ep(o));t=Qo(o),r=cs(o),s=e.getFn}return{path:t,id:r,weight:i,src:n,getFn:s}}function Qo(e){return Le(e)?e:e.split(".")}function cs(e){return Le(e)?e.join("."):e}function np(e,t){let r=[],n=!1;const i=(s,o,a)=>{if(Kt(s))if(!o[a])r.push(s);else{let u=o[a];const c=s[u];if(!Kt(c))return;if(a===o.length-1&&(_e(c)||fh(c)||K0(c)))r.push(Z0(c));else if(Le(c)){n=!0;for(let l=0,f=c.length;l<f;l+=1)i(c[l],o,a+1)}else o.length&&i(c,o,a+1)}};return i(e,_e(t)?t.split("."):t,0),n?r:r[0]}const ip={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},sp={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},op={location:0,threshold:.6,distance:100},ap={useExtendedSearch:!1,getFn:np,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ft={...sp,...ip,...op,...ap};const up=/[^ ]+/g;function cp(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(i){const s=i.match(up).length;if(r.has(s))return r.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*n)/n);return r.set(s,a),a},clear(){r.clear()}}}class $s{constructor({getFn:t=ft.getFn,fieldNormWeight:r=ft.fieldNormWeight}={}){this.norm=cp(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,_e(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();_e(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Kt(t)||Ci(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Kt(o)){if(Le(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:c,value:l}=u.pop();if(Kt(l))if(_e(l)&&!Ci(l)){let f={v:l,i:c,n:this.norm.get(l)};a.push(f)}else Le(l)&&l.forEach((f,h)=>{u.push({nestedArrIndex:h,value:f})})}n.$[s]=a}else if(_e(o)&&!Ci(o)){let a={v:o,n:this.norm.get(o)};n.$[s]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function gh(e,t,{getFn:r=ft.getFn,fieldNormWeight:n=ft.fieldNormWeight}={}){const i=new $s({getFn:r,fieldNormWeight:n});return i.setKeys(e.map(mh)),i.setSources(t),i.create(),i}function lp(e,{getFn:t=ft.getFn,fieldNormWeight:r=ft.fieldNormWeight}={}){const{keys:n,records:i}=e,s=new $s({getFn:t,fieldNormWeight:r});return s.setKeys(n),s.setIndexRecords(i),s}function Dn(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:i=ft.distance,ignoreLocation:s=ft.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(n-r);return i?o+a/i:a?1:o}function hp(e=[],t=ft.minMatchCharLength){let r=[],n=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&n===-1?n=s:!a&&n!==-1&&(i=s-1,i-n+1>=t&&r.push([n,i]),n=-1)}return e[s-1]&&s-n>=t&&r.push([n,s-1]),r}const ar=32;function fp(e,t,r,{location:n=ft.location,distance:i=ft.distance,threshold:s=ft.threshold,findAllMatches:o=ft.findAllMatches,minMatchCharLength:a=ft.minMatchCharLength,includeMatches:u=ft.includeMatches,ignoreLocation:c=ft.ignoreLocation}={}){if(t.length>ar)throw new Error(Q0(ar));const l=t.length,f=e.length,h=Math.max(0,Math.min(n,f));let d=s,p=h;const m=a>1||u,g=m?Array(f):[];let y;for(;(y=e.indexOf(t,p))>-1;){let E=Dn(t,{currentLocation:y,expectedLocation:h,distance:i,ignoreLocation:c});if(d=Math.min(E,d),p=y+l,m){let T=0;for(;T<l;)g[y+T]=1,T+=1}}p=-1;let _=[],b=1,w=l+f;const v=1<<l-1;for(let E=0;E<l;E+=1){let T=0,I=w;for(;T<I;)Dn(t,{errors:E,currentLocation:h+I,expectedLocation:h,distance:i,ignoreLocation:c})<=d?T=I:w=I,I=Math.floor((w-T)/2+T);w=I;let P=Math.max(1,h-I+1),B=o?f:Math.min(h+I,f)+l,D=Array(B+2);D[B+1]=(1<<E)-1;for(let x=B;x>=P;x-=1){let O=x-1,A=r[e.charAt(O)];if(m&&(g[O]=+!!A),D[x]=(D[x+1]<<1|1)&A,E&&(D[x]|=(_[x+1]|_[x])<<1|1|_[x+1]),D[x]&v&&(b=Dn(t,{errors:E,currentLocation:O,expectedLocation:h,distance:i,ignoreLocation:c}),b<=d)){if(d=b,p=O,p<=h)break;P=Math.max(1,2*h-p)}}if(Dn(t,{errors:E+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:c})>d)break;_=D}const S={isMatch:p>=0,score:Math.max(.001,b)};if(m){const E=hp(g,a);E.length?u&&(S.indices=E):S.isMatch=!1}return S}function dp(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const i=e.charAt(r);t[i]=(t[i]||0)|1<<n-r-1}return t}const Kn=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class bh{constructor(t,{location:r=ft.location,threshold:n=ft.threshold,distance:i=ft.distance,includeMatches:s=ft.includeMatches,findAllMatches:o=ft.findAllMatches,minMatchCharLength:a=ft.minMatchCharLength,isCaseSensitive:u=ft.isCaseSensitive,ignoreDiacritics:c=ft.ignoreDiacritics,ignoreLocation:l=ft.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreDiacritics:c,ignoreLocation:l},t=u?t:t.toLowerCase(),t=c?Kn(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(d,p)=>{this.chunks.push({pattern:d,alphabet:dp(d),startIndex:p})},h=this.pattern.length;if(h>ar){let d=0;const p=h%ar,m=h-p;for(;d<m;)f(this.pattern.substr(d,ar),d),d+=ar;if(p){const g=h-ar;f(this.pattern.substr(g),g)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:i}=this.options;if(t=r?t:t.toLowerCase(),t=n?Kn(t):t,this.pattern===t){let m={isMatch:!0,score:0};return i&&(m.indices=[[0,t.length-1]]),m}const{location:s,distance:o,threshold:a,findAllMatches:u,minMatchCharLength:c,ignoreLocation:l}=this.options;let f=[],h=0,d=!1;this.chunks.forEach(({pattern:m,alphabet:g,startIndex:y})=>{const{isMatch:_,score:b,indices:w}=fp(t,m,g,{location:s+y,distance:o,threshold:a,findAllMatches:u,minMatchCharLength:c,includeMatches:i,ignoreLocation:l});_&&(d=!0),h+=b,_&&w&&(f=[...f,...w])});let p={isMatch:d,score:d?h/this.chunks.length:1};return d&&i&&(p.indices=f),p}}class Qe{constructor(t){this.pattern=t}static isMultiMatch(t){return ta(t,this.multiRegex)}static isSingleMatch(t){return ta(t,this.singleRegex)}search(){}}function ta(e,t){const r=e.match(t);return r?r[1]:null}class pp extends Qe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class mp extends Qe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class gp extends Qe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class bp extends Qe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class _p extends Qe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class yp extends Qe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class _h extends Qe{constructor(t,{location:r=ft.location,threshold:n=ft.threshold,distance:i=ft.distance,includeMatches:s=ft.includeMatches,findAllMatches:o=ft.findAllMatches,minMatchCharLength:a=ft.minMatchCharLength,isCaseSensitive:u=ft.isCaseSensitive,ignoreDiacritics:c=ft.ignoreDiacritics,ignoreLocation:l=ft.ignoreLocation}={}){super(t),this._bitapSearch=new bh(t,{location:r,threshold:n,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreDiacritics:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class yh extends Qe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const i=[],s=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+s,i.push([n,r-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const ls=[pp,yh,gp,bp,yp,_p,mp,_h],ea=ls.length,wp=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,vp="|";function xp(e,t={}){return e.split(vp).map(r=>{let n=r.trim().split(wp).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=n.length;s<o;s+=1){const a=n[s];let u=!1,c=-1;for(;!u&&++c<ea;){const l=ls[c];let f=l.isMultiMatch(a);f&&(i.push(new l(f,t)),u=!0)}if(!u)for(c=-1;++c<ea;){const l=ls[c];let f=l.isSingleMatch(a);if(f){i.push(new l(f,t));break}}}return i})}const kp=new Set([_h.type,yh.type]);class Ep{constructor(t,{isCaseSensitive:r=ft.isCaseSensitive,ignoreDiacritics:n=ft.ignoreDiacritics,includeMatches:i=ft.includeMatches,minMatchCharLength:s=ft.minMatchCharLength,ignoreLocation:o=ft.ignoreLocation,findAllMatches:a=ft.findAllMatches,location:u=ft.location,threshold:c=ft.threshold,distance:l=ft.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:i,minMatchCharLength:s,findAllMatches:a,ignoreLocation:o,location:u,threshold:c,distance:l},t=r?t:t.toLowerCase(),t=n?Kn(t):t,this.pattern=t,this.query=xp(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Kn(t):t;let o=0,a=[],u=0;for(let c=0,l=r.length;c<l;c+=1){const f=r[c];a.length=0,o=0;for(let h=0,d=f.length;h<d;h+=1){const p=f[h],{isMatch:m,indices:g,score:y}=p.search(t);if(m){if(o+=1,u+=y,n){const _=p.constructor.type;kp.has(_)?a=[...a,...g]:a.push(g)}}else{u=0,o=0,a.length=0;break}}if(o){let h={isMatch:!0,score:u/o};return n&&(h.indices=a),h}}return{isMatch:!1,score:1}}}const hs=[];function Ap(...e){hs.push(...e)}function fs(e,t){for(let r=0,n=hs.length;r<n;r+=1){let i=hs[r];if(i.condition(e,t))return new i(e,t)}return new bh(e,t)}const Jn={AND:"$and",OR:"$or"},ds={PATH:"$path",PATTERN:"$val"},ps=e=>!!(e[Jn.AND]||e[Jn.OR]),Sp=e=>!!e[ds.PATH],Cp=e=>!Le(e)&&dh(e)&&!ps(e),ra=e=>({[Jn.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function wh(e,t,{auto:r=!0}={}){const n=i=>{let s=Object.keys(i);const o=Sp(i);if(!o&&s.length>1&&!ps(i))return n(ra(i));if(Cp(i)){const u=o?i[ds.PATH]:s[0],c=o?i[ds.PATTERN]:i[u];if(!_e(c))throw new Error(X0(u));const l={keyId:cs(u),pattern:c};return r&&(l.searcher=fs(c,t)),l}let a={children:[],operator:s[0]};return s.forEach(u=>{const c=i[u];Le(c)&&c.forEach(l=>{a.children.push(n(l))})}),a};return ps(e)||(e=ra(e)),n(e)}function Dp(e,{ignoreFieldNorm:t=ft.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),r.score=n})}function Tp(e,t){const r=e.matches;t.matches=[],Kt(r)&&r.forEach(n=>{if(!Kt(n.indices)||!n.indices.length)return;const{indices:i,value:s}=n;let o={indices:i,value:s};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function Fp(e,t){t.score=e.score}function Op(e,t,{includeMatches:r=ft.includeMatches,includeScore:n=ft.includeScore}={}){const i=[];return r&&i.push(Tp),n&&i.push(Fp),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,a)}),a})}class gr{constructor(t,r={},n){this.options={...ft,...r},this.options.useExtendedSearch,this._keyStore=new rp(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof $s))throw new Error(Y0);this._myIndex=r||gh(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Kt(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,i=this._docs.length;n<i;n+=1){const s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,i-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let u=_e(t)?_e(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Dp(u,{ignoreFieldNorm:a}),s&&u.sort(o),fh(r)&&r>-1&&(u=u.slice(0,r)),Op(u,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){const r=fs(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:s,i:o,n:a})=>{if(!Kt(s))return;const{isMatch:u,score:c,indices:l}=r.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:c,value:s,norm:a,indices:l}]})}),i}_searchLogical(t){const r=wh(t,this.options),n=(a,u,c)=>{if(!a.children){const{keyId:f,searcher:h}=a,d=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:h});return d&&d.length?[{idx:c,item:u,matches:d}]:[]}const l=[];for(let f=0,h=a.children.length;f<h;f+=1){const d=a.children[f],p=n(d,u,c);if(p.length)l.push(...p);else if(a.operator===Jn.AND)return[]}return l},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:u})=>{if(Kt(a)){let c=n(r,a,u);c.length&&(s[u]||(s[u]={idx:u,item:a,matches:[]},o.push(s[u])),c.forEach(({matches:l})=>{s[u].matches.push(...l)}))}}),o}_searchObjectList(t){const r=fs(t,this.options),{keys:n,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Kt(o))return;let u=[];n.forEach((c,l)=>{u.push(...this._findMatches({key:c,value:o[l],searcher:r}))}),u.length&&s.push({idx:a,item:o,matches:u})}),s}_findMatches({key:t,value:r,searcher:n}){if(!Kt(r))return[];let i=[];if(Le(r))r.forEach(({v:s,i:o,n:a})=>{if(!Kt(s))return;const{isMatch:u,score:c,indices:l}=n.searchIn(s);u&&i.push({score:c,key:t,value:s,idx:o,norm:a,indices:l})});else{const{v:s,n:o}=r,{isMatch:a,score:u,indices:c}=n.searchIn(s);a&&i.push({score:u,key:t,value:s,norm:o,indices:c})}return i}}gr.version="7.1.0";gr.createIndex=gh;gr.parseIndex=lp;gr.config=ft;gr.parseQuery=wh;Ap(Ep);const Ze=xt({word:null,def:null}),ms=Re("dict-lang","en");nn(Ze,()=>{Ze.word&&Ze.def&&Ip(Ze)});function i2(){const e=Tt(),t=Yt(""),r=Lt(()=>vh(t.value));async function n(){const u=await hh(r.value);e.get("dict").get("#word").get(u).put(r.value),Ze.word=u,t.value=""}const i=xt({});e.user(pt.pub).get("dict").map().on(async(u,c)=>{if(!u)return;let l=c.slice(0,44),f=c.slice(45,89),h=await e.get("dict").get("#def").get(f).then();if(h){try{h=JSON.parse(h)}catch(d){console.log(d,h);return}(h==null?void 0:h.lang)==ms.value&&(i[l]=i[l]||await e.get("dict").get("#word").get(l).then())}});const s=xt({});e.get("dict").get("#word").map().once((u,c)=>{u.includes(" ")||(s[c]=u)});const o=Lt(()=>{let u=Object.entries(s).map(c=>({text:c[1],hash:c[0]}));return new gr(u,{keys:["text"],includeScore:!0})}),a=Lt(()=>o.value.search(t.value));return{input:t,found:a,words:s,linked:i,word:r,addWord:n}}function s2(e){const t=Tt(),r=Yt("");return t.get("dict").get("#word").get(e).once(n=>{r.value=vh(n)}),{word:r}}function o2(){const e=Tt(),t=xt({text:"",lang:ms,part:"noun"});async function r(){const{hash:a,hashed:u}=await q0(t);e.get("dict").get("#def").get(a).put(u),Ze.def=a,t.text="",t.part=null}const n=xt({});e.user(pt.pub).get("dict").map().on(async(a,u)=>{if(!a)return;let c=u.slice(45,89),l=await e.get("dict").get("#def").get(c).then();if(l)try{if(l=JSON.parse(l),(l==null?void 0:l.lang)!=ms.value)return;n[c]=n[c]||l}catch(f){console.log(f,l)}});const i=xt({});e.get("dict").get("#def").map().once((a,u)=>{i[u]=JSON.parse(a)});const s=Lt(()=>{let a=[];for(let u in i)a.push({hash:u,...i[u]});return new gr(a,{keys:["text"],includeScore:!0})}),o=Lt(()=>s.value.search(t.text));return{def:t,addDef:r,defs:i,found:o,linked:n}}async function Ip({word:e,def:t}){var s;const r=Tt(),{user:n}=br();let i=await r.user(pt.pub).get("dict").get(`${e}:${t}@${n.pub}`).then();r.user(pt.pub).get("dict").get(`${e}:${t}@${n.pub}`).put(!i,null,{opt:{cert:(s=pt.features)==null?void 0:s.dict}}),Ze.word=null,Ze.def=null}function a2(e){const t=Tt(),r=xt({});return t.user(pt.pub).get("dict").map().on((n,i)=>{var l;if(i.indexOf(e)==-1)return;const{from:o,to:a,author:u}=zs(i);let c=o==e?a:o;r[c]=r[c]||{},n?r[c][u]=n:((l=r==null?void 0:r[c])==null||delete l[u],Object.keys(r==null?void 0:r[c]).length==0&&(r==null||delete r[c]))}),r}function u2(e){const t=Tt(),r=xt({});return t.user(pt.pub).get("dict").map().on((n,i)=>{var u;const{from:s,to:o,author:a}=zs(i);a==e&&(r[s]=r[s]||{},n?r[s][o]=n:((u=r==null?void 0:r[s])==null||delete u[o],Object.keys(r[s]).length==0&&(r==null||delete r[s])))}),r}function c2(){const e=Tt(),t=xt({});return e.user(pt.pub).get("dict").map().once(async(r,n)=>{const{from:i,to:s,author:o}=zs(n);t[o]=t[o]||{},t[o][i]=t[o][i]||{},t[o][i][s]=r}),t}function l2(){const e=Tt(),t=xt({});return e.user(pt.pub).get("dict").map().once(async(r,n)=>{let i=n.slice(45,89),s=await e.get("dict").get("#def").get(i).then();if(s){try{s=JSON.parse(s)}catch(o){console.log(s,o)}s!=null&&s.lang&&(t[s==null?void 0:s.lang]=t[s==null?void 0:s.lang]||0,t[s==null?void 0:s.lang]++)}}),t}function zs(e){return{from:e.slice(0,44),to:e.slice(45,89),author:e.slice(-87)}}function vh(e){if(!e)return"";let t=e.toLowerCase().matchAll(new RegExp("\\p{L}","gu"),"");return Array.from(t).map(r=>r[0]).join("")}function na(e,t,r,n=!0){const i=document.createElement("a");i.download=r,n?i.href=URL.createObjectURL(new Blob([e],{type:t})):i.href=`data:${t};,${e}`,i.dataset.downloadurl=[t,i.download,i.href].join(":"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}async function h2(e){if(!e||e.length===0)return;const t=e[0],r=2e7;if(t.size>r){console.error("File is bigger than "+r+" bytes limit");return}return new Promise((n,i)=>{let s=new FileReader;s.onload=()=>{n(s.result)},s.onerror=o=>{i(o)},s.readAsText(t)})}function f2({preserveRatio:e=!1,picSize:t=100,maxSize:r=1024e4}){const n=xt({errors:[],status:"",output:{}});function i(d){const p=d.target.files;a(),p.length&&(n.status="loading",Array.from(p).map(m=>s(m)))}function s(d){return o(d).then(p=>{n.output={name:f(d.name),content:p,size:Lp(Math.round(p.length*3/4))},n.status="success"}),null}function o(d){return new Promise((p,m)=>{const g=new FileReader,y=new FileReader,_=d.slice(0,4);g.readAsArrayBuffer(_),g.onloadend=b=>{const w=b.target.result;let v=c(l(w));if(u(d.size)>u(r)&&n.errors.push({message:"File size is too large!"}),v===!1&&n.errors.push({message:"File type is not supported!"}),n.errors.length>0){h(n.errors),a();return}else y.readAsDataURL(d)},y.onloadend=()=>{const b=new Image,w=y.result;typeof w=="string"&&(b.src=w,b.onload=()=>{const v=e?b.naturalWidth/b.naturalHeight:1,S=document.createElement("canvas");S.width=t,S.height=t/v,S.getContext("2d").drawImage(b,0,0,S.width,S.height),p(S.toDataURL())})},g.onerror=b=>m(b),y.onerror=b=>m(b)})}function a(){n.status="",n.errors=[],n.output={}}function u(d){return d*Math.pow(10,-6)}function c(d){return["89504E47","47494638","FFD8FFDB","FFD8FFE0","FFD8FFE1","FFD8FFE2","FFD8FFE3","FFD8FFE8","FFD8FFED","3C3F786D","3C737667"].includes(d)}function l(d){const p=new Uint8Array(d);let m=[];return p.forEach(g=>{m.push(g.toString(16))}),m.join("").toUpperCase()}function f(d){return d.replace(/\.[^/.]+$/,"").toLowerCase()}function h(d){d.length===2?console.error("File upload failed due to size and type!"):console.error(d[0].message+d[0].type)}return{state:n,handleChange:i}}const Pp=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function Lp(e){let t=0,r=parseInt(e+"",10)||0;for(;r>=1024&&++t;)r=r/1024;return r.toFixed(r<10&&t>0?1:0)+" "+Pp[t]}function d2(e){var t;return(t=e.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/))==null?void 0:t[0]}function p2(e){return e.substring(e.indexOf("/")+1,e.indexOf(";base64"))}var ia={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};function m2(e){for(var t in ia)if(e.indexOf(t)===0)return ia[t]}function Tn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Di={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var sa;function Rp(){return sa||(sa=1,function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,s){function o(c,l){if(!i[c]){if(!n[c]){var f=typeof Tn=="function"&&Tn;if(!l&&f)return f(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[c]={exports:{}};n[c][0].call(d.exports,function(p){var m=n[c][1][p];return o(m||p)},d,d.exports,r,n,i,s)}return i[c].exports}for(var a=typeof Tn=="function"&&Tn,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(r,n,i){var s=r("./utils"),o=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var c,l,f,h,d,p,m,g=[],y=0,_=u.length,b=_,w=s.getTypeOf(u)!=="string";y<u.length;)b=_-y,f=w?(c=u[y++],l=y<_?u[y++]:0,y<_?u[y++]:0):(c=u.charCodeAt(y++),l=y<_?u.charCodeAt(y++):0,y<_?u.charCodeAt(y++):0),h=c>>2,d=(3&c)<<4|l>>4,p=1<b?(15&l)<<2|f>>6:64,m=2<b?63&f:64,g.push(a.charAt(h)+a.charAt(d)+a.charAt(p)+a.charAt(m));return g.join("")},i.decode=function(u){var c,l,f,h,d,p,m=0,g=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var _,b=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&b--,u.charAt(u.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=o.uint8array?new Uint8Array(0|b):new Array(0|b);m<u.length;)c=a.indexOf(u.charAt(m++))<<2|(h=a.indexOf(u.charAt(m++)))>>4,l=(15&h)<<4|(d=a.indexOf(u.charAt(m++)))>>2,f=(3&d)<<6|(p=a.indexOf(u.charAt(m++))),_[g++]=c,d!==64&&(_[g++]=l),p!==64&&(_[g++]=f);return _}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),o=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function c(l,f,h,d,p){this.compressedSize=l,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=p}c.prototype={getContentWorker:function(){var l=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return l.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(l,f,h){return l.pipe(new a).pipe(new u("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),o=function(){for(var a,u=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;u[c]=a}return u}();n.exports=function(a,u){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,l,f,h){var d=o,p=h+f;c^=-1;for(var m=h;m<p;m++)c=c>>>8^d[255&(c^l[m])];return-1^c}(0|u,a,a.length,0):function(c,l,f,h){var d=o,p=h+f;c^=-1;for(var m=h;m<p;m++)c=c>>>8^d[255&(c^l.charCodeAt(m))];return-1^c}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),a=r("./utils"),u=r("./stream/GenericWorker"),c=s?"uint8array":"array";function l(f,h){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(l,u),l.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,f.data),!1)},l.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},i.compressWorker=function(f){return new l("Deflate",f)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(d,p){var m,g="";for(m=0;m<p;m++)g+=String.fromCharCode(255&d),d>>>=8;return g}function o(d,p,m,g,y,_){var b,w,v=d.file,S=d.compression,E=_!==c.utf8encode,T=a.transformTo("string",_(v.name)),I=a.transformTo("string",c.utf8encode(v.name)),P=v.comment,B=a.transformTo("string",_(P)),D=a.transformTo("string",c.utf8encode(P)),k=I.length!==v.name.length,x=D.length!==P.length,O="",A="",C="",L=v.dir,R=v.date,U={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(U.crc32=d.crc32,U.compressedSize=d.compressedSize,U.uncompressedSize=d.uncompressedSize);var N=0;p&&(N|=8),E||!k&&!x||(N|=2048);var z=0,Y=0;L&&(z|=16),y==="UNIX"?(Y=798,z|=function(K,ut){var yt=K;return K||(yt=ut?16893:33204),(65535&yt)<<16}(v.unixPermissions,L)):(Y=20,z|=function(K){return 63&(K||0)}(v.dosPermissions)),b=R.getUTCHours(),b<<=6,b|=R.getUTCMinutes(),b<<=5,b|=R.getUTCSeconds()/2,w=R.getUTCFullYear()-1980,w<<=4,w|=R.getUTCMonth()+1,w<<=5,w|=R.getUTCDate(),k&&(A=s(1,1)+s(l(T),4)+I,O+="up"+s(A.length,2)+A),x&&(C=s(1,1)+s(l(B),4)+D,O+="uc"+s(C.length,2)+C);var G="";return G+=`
\0`,G+=s(N,2),G+=S.magic,G+=s(b,2),G+=s(w,2),G+=s(U.crc32,4),G+=s(U.compressedSize,4),G+=s(U.uncompressedSize,4),G+=s(T.length,2),G+=s(O.length,2),{fileRecord:f.LOCAL_FILE_HEADER+G+T+O,dirRecord:f.CENTRAL_FILE_HEADER+s(Y,2)+G+s(B.length,2)+"\0\0\0\0"+s(z,4)+s(g,4)+T+O+B}}var a=r("../utils"),u=r("../stream/GenericWorker"),c=r("../utf8"),l=r("../crc32"),f=r("../signature");function h(d,p,m,g){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,u),h.prototype.push=function(d){var p=d.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,u.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-g-1))/m:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var m=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,m=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(g){return f.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-d,g=function(y,_,b,w,v){var S=a.transformTo("string",v(w));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(_,4)+s(b,4)+s(S.length,2)+S}(this.dirRecords.length,m,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(m){p.processChunk(m)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(m){p.error(m)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var p=this._sources;if(!u.prototype.error.call(this,d))return!1;for(var m=0;m<p.length;m++)try{p[m].error(d)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),o=r("./ZipFileWorker");i.generateWorker=function(a,u,c){var l=new o(u.streamFiles,c,u.platform,u.encodeFileName),f=0;try{a.forEach(function(h,d){f++;var p=function(_,b){var w=_||b,v=s[w];if(!v)throw new Error(w+" is not a valid compression method !");return v}(d.options.compression,u.compression),m=d.options.compressionOptions||u.compressionOptions||{},g=d.dir,y=d.date;d._compressWorker(p,m).withStreamInfo("file",{name:h,dir:g,date:y,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=f}catch(h){l.error(h)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),o=r("./external"),a=r("./utf8"),u=r("./zipEntries"),c=r("./stream/Crc32Probe"),l=r("./nodejsUtils");function f(h){return new o.Promise(function(d,p){var m=h.decompressed.getContentWorker().pipe(new c);m.on("error",function(g){p(g)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var p=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(m){var g=new u(d);return g.load(m),g}).then(function(m){var g=[o.Promise.resolve(m)],y=m.files;if(d.checkCRC32)for(var _=0;_<y.length;_++)g.push(f(y[_]));return o.Promise.all(g)}).then(function(m){for(var g=m.shift(),y=g.files,_=0;_<y.length;_++){var b=y[_],w=b.fileNameStr,v=s.resolve(b.fileNameStr);p.file(v,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:d.createFolders}),b.dir||(p.file(v).unsafeOriginalName=w)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),o=r("../stream/GenericWorker");function a(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(l){c.push({data:l,meta:{percent:0}})}).on("error",function(l){c.isPaused?this.generatedError=l:c.error(l)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function o(a,u,c){s.call(this,u),this._helper=a;var l=this;a.on("data",function(f,h){l.push(f)||l._helper.pause(),c&&c(h)}).on("error",function(f){l.emit("error",f)}).on("end",function(){l.push(null)})}r("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(v,S,E){var T,I=a.getTypeOf(S),P=a.extend(E||{},l);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(v=y(v)),P.createFolders&&(T=g(v))&&_.call(this,T,!0);var B=I==="string"&&P.binary===!1&&P.base64===!1;E&&E.binary!==void 0||(P.binary=!B),(S instanceof f&&S.uncompressedSize===0||P.dir||!S||S.length===0)&&(P.base64=!1,P.binary=!0,S="",P.compression="STORE",I="string");var D=null;D=S instanceof f||S instanceof u?S:p.isNode&&p.isStream(S)?new m(v,S):a.prepareContent(v,S,P.binary,P.optimizedBinaryString,P.base64);var k=new h(v,D,P);this.files[v]=k}var o=r("./utf8"),a=r("./utils"),u=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),l=r("./defaults"),f=r("./compressedObject"),h=r("./zipObject"),d=r("./generate"),p=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),g=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var S=v.lastIndexOf("/");return 0<S?v.substring(0,S):""},y=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},_=function(v,S){return S=S!==void 0?S:l.createFolders,v=y(v),this.files[v]||s.call(this,v,null,{dir:!0,createFolders:S}),this.files[v]};function b(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var S,E,T;for(S in this.files)T=this.files[S],(E=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&v(E,T)},filter:function(v){var S=[];return this.forEach(function(E,T){v(E,T)&&S.push(T)}),S},file:function(v,S,E){if(arguments.length!==1)return v=this.root+v,s.call(this,v,S,E),this;if(b(v)){var T=v;return this.filter(function(P,B){return!B.dir&&T.test(P)})}var I=this.files[this.root+v];return I&&!I.dir?I:null},folder:function(v){if(!v)return this;if(b(v))return this.filter(function(I,P){return P.dir&&v.test(I)});var S=this.root+v,E=_.call(this,S),T=this.clone();return T.root=E.name,T},remove:function(v){v=this.root+v;var S=this.files[v];if(S||(v.slice(-1)!=="/"&&(v+="/"),S=this.files[v]),S&&!S.dir)delete this.files[v];else for(var E=this.filter(function(I,P){return P.name.slice(0,v.length)===v}),T=0;T<E.length;T++)delete this.files[E[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var S,E={};try{if((E=a.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");a.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var T=E.comment||this.comment||"";S=d.generateWorker(this,E,T)}catch(I){(S=new u("error")).error(I)}return new c(S,E.type||"string",E.mimeType)},generateAsync:function(v,S){return this.generateInternalStream(v).accumulate(S)},generateNodeStream:function(v,S){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(S)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),c=a.charCodeAt(1),l=a.charCodeAt(2),f=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===c&&this.data[h+2]===l&&this.data[h+3]===f)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),c=a.charCodeAt(1),l=a.charCodeAt(2),f=a.charCodeAt(3),h=this.readData(4);return u===h[0]&&c===h[1]&&l===h[2]&&f===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,c=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),o=r("../support"),a=r("./ArrayReader"),u=r("./StringReader"),c=r("./NodeBufferReader"),l=r("./Uint8ArrayReader");n.exports=function(f){var h=s.getTypeOf(f);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(f):o.uint8array?new l(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),o=r("../utils");function a(u){s.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(a,s),a.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),o=r("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,s),a.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(a,o),a.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(l){c.dataIsReady=!0,c.data=l,c.max=l&&l.length||0,c.type=s.getTypeOf(l),c.isPaused||c._tickAndRepeat()},function(l){c.error(l)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(u){a.processChunk(u)}),o.on("end",function(){a.end()}),o.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),o=r("./ConvertWorker"),a=r("./GenericWorker"),u=r("../base64"),c=r("../support"),l=r("../external"),f=null;if(c.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,m){return new l.Promise(function(g,y){var _=[],b=p._internalType,w=p._outputType,v=p._mimeType;p.on("data",function(S,E){_.push(S),m&&m(E)}).on("error",function(S){_=[],y(S)}).on("end",function(){try{var S=function(E,T,I){switch(E){case"blob":return s.newBlob(s.transformTo("arraybuffer",T),I);case"base64":return u.encode(T);default:return s.transformTo(E,T)}}(w,function(E,T){var I,P=0,B=null,D=0;for(I=0;I<T.length;I++)D+=T[I].length;switch(E){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(B=new Uint8Array(D),I=0;I<T.length;I++)B.set(T[I],P),P+=T[I].length;return B;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+E+"'")}}(b,_),v);g(S)}catch(E){y(E)}_=[]}).resume()})}function d(p,m,g){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=g,s.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(_){this._worker=new a("error"),this._worker.error(_)}}d.prototype={accumulate:function(p){return h(this,p)},on:function(p,m){var g=this;return p==="data"?this._worker.on(p,function(y){m.call(g,y.data,y.meta)}):this._worker.on(p,function(){s.delay(m,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),o=r("./support"),a=r("./nodejsUtils"),u=r("./stream/GenericWorker"),c=new Array(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;c[254]=c[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}i.utf8encode=function(d){return o.nodebuffer?a.newBufferFrom(d,"utf-8"):function(p){var m,g,y,_,b,w=p.length,v=0;for(_=0;_<w;_++)(64512&(g=p.charCodeAt(_)))==55296&&_+1<w&&(64512&(y=p.charCodeAt(_+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),_++),v+=g<128?1:g<2048?2:g<65536?3:4;for(m=o.uint8array?new Uint8Array(v):new Array(v),_=b=0;b<v;_++)(64512&(g=p.charCodeAt(_)))==55296&&_+1<w&&(64512&(y=p.charCodeAt(_+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),_++),g<128?m[b++]=g:(g<2048?m[b++]=192|g>>>6:(g<65536?m[b++]=224|g>>>12:(m[b++]=240|g>>>18,m[b++]=128|g>>>12&63),m[b++]=128|g>>>6&63),m[b++]=128|63&g);return m}(d)},i.utf8decode=function(d){return o.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(p){var m,g,y,_,b=p.length,w=new Array(2*b);for(m=g=0;m<b;)if((y=p[m++])<128)w[g++]=y;else if(4<(_=c[y]))w[g++]=65533,m+=_-1;else{for(y&=_===2?31:_===3?15:7;1<_&&m<b;)y=y<<6|63&p[m++],_--;1<_?w[g++]=65533:y<65536?w[g++]=y:(y-=65536,w[g++]=55296|y>>10&1023,w[g++]=56320|1023&y)}return w.length!==g&&(w.subarray?w=w.subarray(0,g):w.length=g),s.applyFromCharCode(w)}(d=s.transformTo(o.uint8array?"uint8array":"array",d))},s.inherits(f,u),f.prototype.processChunk=function(d){var p=s.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=function(_,b){var w;for((b=b||_.length)>_.length&&(b=_.length),w=b-1;0<=w&&(192&_[w])==128;)w--;return w<0||w===0?b:w+c[_[w]]>b?w:b}(p),y=p;g!==p.length&&(o.uint8array?(y=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(y=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:i.utf8decode(y),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(h,u),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),o=r("./base64"),a=r("./nodejsUtils"),u=r("./external");function c(m){return m}function l(m,g){for(var y=0;y<m.length;++y)g[y]=255&m.charCodeAt(y);return g}r("setimmediate"),i.newBlob=function(m,g){i.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(m,g,y){var _=[],b=0,w=m.length;if(w<=y)return String.fromCharCode.apply(null,m);for(;b<w;)g==="array"||g==="nodebuffer"?_.push(String.fromCharCode.apply(null,m.slice(b,Math.min(b+y,w)))):_.push(String.fromCharCode.apply(null,m.subarray(b,Math.min(b+y,w)))),b+=y;return _.join("")},stringifyByChar:function(m){for(var g="",y=0;y<m.length;y++)g+=String.fromCharCode(m[y]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var g=65536,y=i.getTypeOf(m),_=!0;if(y==="uint8array"?_=f.applyCanBeUsed.uint8array:y==="nodebuffer"&&(_=f.applyCanBeUsed.nodebuffer),_)for(;1<g;)try{return f.stringifyByChunk(m,y,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(m)}function d(m,g){for(var y=0;y<m.length;y++)g[y]=m[y];return g}i.applyFromCharCode=h;var p={};p.string={string:c,array:function(m){return l(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return l(m,new Uint8Array(m.length))},nodebuffer:function(m){return l(m,a.allocBuffer(m.length))}},p.array={string:h,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return d(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:h,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:h,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:c},i.transformTo=function(m,g){if(g=g||"",!m)return g;i.checkSupport(m);var y=i.getTypeOf(g);return p[y][m](g)},i.resolve=function(m){for(var g=m.split("/"),y=[],_=0;_<g.length;_++){var b=g[_];b==="."||b===""&&_!==0&&_!==g.length-1||(b===".."?y.pop():y.push(b))}return y.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var g,y,_="";for(y=0;y<(m||"").length;y++)_+="\\x"+((g=m.charCodeAt(y))<16?"0":"")+g.toString(16).toUpperCase();return _},i.delay=function(m,g,y){setImmediate(function(){m.apply(y||null,g||[])})},i.inherits=function(m,g){function y(){}y.prototype=g.prototype,m.prototype=new y},i.extend=function(){var m,g,y={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&y[g]===void 0&&(y[g]=arguments[m][g]);return y},i.prepareContent=function(m,g,y,_,b){return u.Promise.resolve(g).then(function(w){return s.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new u.Promise(function(v,S){var E=new FileReader;E.onload=function(T){v(T.target.result)},E.onerror=function(T){S(T.target.error)},E.readAsArrayBuffer(w)}):w}).then(function(w){var v=i.getTypeOf(w);return v?(v==="arraybuffer"?w=i.transformTo("uint8array",w):v==="string"&&(b?w=o.decode(w):y&&_!==!0&&(w=function(S){return l(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))}(w))),w):u.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./signature"),u=r("./zipEntry"),c=r("./support");function l(f){this.files=[],this.loadOptions=f}l.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var p=this.reader.readString(4)===h;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",d=o.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,p=this.zip64EndOfCentralSize-44;0<p;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=h-d;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./compressedObject"),u=r("./crc32"),c=r("./utf8"),l=r("./compressions"),f=r("./support");function h(d,p){this.options=d,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,m;if(d.skip(22),this.fileNameLength=d.readInt(2),m=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(g){for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)&&l[y].magic===g)return l[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,m,g,y=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<y;)p=d.readInt(2),m=d.readInt(2),g=d.readData(m),this.extraFields[p]={id:p,length:m,value:g};d.setIndex(y)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var y=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=s(d.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=s(d.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(p,m,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),u=r("./utf8"),c=r("./compressedObject"),l=r("./stream/GenericWorker");s.prototype={internalStream:function(p){var m=null,g="string";try{if(!p)throw new Error("No output type specified.");var y=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var _=!this._dataBinary;_&&!y&&(m=m.pipe(new u.Utf8EncodeWorker)),!_&&y&&(m=m.pipe(new u.Utf8DecodeWorker))}catch(b){(m=new l("error")).error(b)}return new o(m,g,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(g,p,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)s.prototype[f[d]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var o,a,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var c=0,l=new u(p),f=s.document.createTextNode("");l.observe(f,{characterData:!0}),o=function(){f.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var d=[];function p(){var m,g;a=!0;for(var y=d.length;y;){for(g=d,d=[],m=-1;++m<y;)g[m]();y=d.length}a=!1}n.exports=function(m){d.push(m)!==1||a||o()}}).call(this,typeof vn<"u"?vn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function o(){}var a={},u=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function f(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,y!==o&&m(this,y)}function h(y,_,b){this.promise=y,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function d(y,_,b){s(function(){var w;try{w=_(b)}catch(v){return a.reject(y,v)}w===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,w)})}function p(y){var _=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof _=="function")return function(){_.apply(y,arguments)}}function m(y,_){var b=!1;function w(E){b||(b=!0,a.reject(y,E))}function v(E){b||(b=!0,a.resolve(y,E))}var S=g(function(){_(v,w)});S.status==="error"&&w(S.value)}function g(y,_){var b={};try{b.value=y(_),b.status="success"}catch(w){b.status="error",b.value=w}return b}(n.exports=f).prototype.finally=function(y){if(typeof y!="function")return this;var _=this.constructor;return this.then(function(b){return _.resolve(y()).then(function(){return b})},function(b){return _.resolve(y()).then(function(){throw b})})},f.prototype.catch=function(y){return this.then(null,y)},f.prototype.then=function(y,_){if(typeof y!="function"&&this.state===c||typeof _!="function"&&this.state===u)return this;var b=new this.constructor(o);return this.state!==l?d(b,this.state===c?y:_,this.outcome):this.queue.push(new h(b,y,_)),b},h.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){d(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){a.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){d(this.promise,this.onRejected,y)},a.resolve=function(y,_){var b=g(p,_);if(b.status==="error")return a.reject(y,b.value);var w=b.value;if(w)m(y,w);else{y.state=c,y.outcome=_;for(var v=-1,S=y.queue.length;++v<S;)y.queue[v].callFulfilled(_)}return y},a.reject=function(y,_){y.state=u,y.outcome=_;for(var b=-1,w=y.queue.length;++b<w;)y.queue[b].callRejected(_);return y},f.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},f.reject=function(y){var _=new this(o);return a.reject(_,y)},f.all=function(y){var _=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,w=!1;if(!b)return this.resolve([]);for(var v=new Array(b),S=0,E=-1,T=new this(o);++E<b;)I(y[E],E);return T;function I(P,B){_.resolve(P).then(function(D){v[B]=D,++S!==b||w||(w=!0,a.resolve(T,v))},function(D){w||(w=!0,a.reject(T,D))})}},f.race=function(y){var _=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,w=!1;if(!b)return this.resolve([]);for(var v=-1,S=new this(o);++v<b;)E=y[v],_.resolve(E).then(function(T){w||(w=!0,a.resolve(S,T))},function(T){w||(w=!0,a.reject(S,T))});var E;return S}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),o=r("./utils/common"),a=r("./utils/strings"),u=r("./zlib/messages"),c=r("./zlib/zstream"),l=Object.prototype.toString,f=0,h=-1,d=0,p=8;function m(y){if(!(this instanceof m))return new m(y);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},y||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var b=s.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(b!==f)throw new Error(u[b]);if(_.header&&s.deflateSetHeader(this.strm,_.header),_.dictionary){var w;if(w=typeof _.dictionary=="string"?a.string2buf(_.dictionary):l.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(b=s.deflateSetDictionary(this.strm,w))!==f)throw new Error(u[b]);this._dict_set=!0}}function g(y,_){var b=new m(_);if(b.push(y,!0),b.err)throw b.msg||u[b.err];return b.result}m.prototype.push=function(y,_){var b,w,v=this.strm,S=this.options.chunkSize;if(this.ended)return!1;w=_===~~_?_:_===!0?4:0,typeof y=="string"?v.input=a.string2buf(y):l.call(y)==="[object ArrayBuffer]"?v.input=new Uint8Array(y):v.input=y,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new o.Buf8(S),v.next_out=0,v.avail_out=S),(b=s.deflate(v,w))!==1&&b!==f)return this.onEnd(b),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(v.output,v.next_out))):this.onData(o.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&b!==1);return w===4?(b=s.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===f):w!==2||(this.onEnd(f),!(v.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=m,i.deflate=g,i.deflateRaw=function(y,_){return(_=_||{}).raw=!0,g(y,_)},i.gzip=function(y,_){return(_=_||{}).gzip=!0,g(y,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),o=r("./utils/common"),a=r("./utils/strings"),u=r("./zlib/constants"),c=r("./zlib/messages"),l=r("./zlib/zstream"),f=r("./zlib/gzheader"),h=Object.prototype.toString;function d(m){if(!(this instanceof d))return new d(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,g.windowBits);if(y!==u.Z_OK)throw new Error(c[y]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function p(m,g){var y=new d(g);if(y.push(m,!0),y.err)throw y.msg||c[y.err];return y.result}d.prototype.push=function(m,g){var y,_,b,w,v,S,E=this.strm,T=this.options.chunkSize,I=this.options.dictionary,P=!1;if(this.ended)return!1;_=g===~~g?g:g===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof m=="string"?E.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?E.input=new Uint8Array(m):E.input=m,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(T),E.next_out=0,E.avail_out=T),(y=s.inflate(E,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&I&&(S=typeof I=="string"?a.string2buf(I):h.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,y=s.inflateSetDictionary(this.strm,S)),y===u.Z_BUF_ERROR&&P===!0&&(y=u.Z_OK,P=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&y!==u.Z_STREAM_END&&(E.avail_in!==0||_!==u.Z_FINISH&&_!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(E.output,E.next_out),w=E.next_out-b,v=a.buf2string(E.output,b),E.next_out=w,E.avail_out=T-w,w&&o.arraySet(E.output,E.output,b,w,0),this.onData(v)):this.onData(o.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(P=!0)}while((0<E.avail_in||E.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(_=u.Z_FINISH),_===u.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):_!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(E.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=d,i.inflate=p,i.inflateRaw=function(m,g){return(g=g||{}).raw=!0,p(m,g)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var l=c.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var f in l)l.hasOwnProperty(f)&&(u[f]=l[f])}}return u},i.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,l,f,h){if(c.subarray&&u.subarray)u.set(c.subarray(l,l+f),h);else for(var d=0;d<f;d++)u[h+d]=c[l+d]},flattenChunks:function(u){var c,l,f,h,d,p;for(c=f=0,l=u.length;c<l;c++)f+=u[c].length;for(p=new Uint8Array(f),c=h=0,l=u.length;c<l;c++)d=u[c],p.set(d,h),h+=d.length;return p}},a={arraySet:function(u,c,l,f,h){for(var d=0;d<f;d++)u[h+d]=c[l+d]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new s.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(f,h){if(h<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,h));for(var d="",p=0;p<h;p++)d+=String.fromCharCode(f[p]);return d}u[254]=u[254]=1,i.string2buf=function(f){var h,d,p,m,g,y=f.length,_=0;for(m=0;m<y;m++)(64512&(d=f.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=f.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),m++),_+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(_),m=g=0;g<_;m++)(64512&(d=f.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=f.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),m++),d<128?h[g++]=d:(d<2048?h[g++]=192|d>>>6:(d<65536?h[g++]=224|d>>>12:(h[g++]=240|d>>>18,h[g++]=128|d>>>12&63),h[g++]=128|d>>>6&63),h[g++]=128|63&d);return h},i.buf2binstring=function(f){return l(f,f.length)},i.binstring2buf=function(f){for(var h=new s.Buf8(f.length),d=0,p=h.length;d<p;d++)h[d]=f.charCodeAt(d);return h},i.buf2string=function(f,h){var d,p,m,g,y=h||f.length,_=new Array(2*y);for(d=p=0;d<y;)if((m=f[d++])<128)_[p++]=m;else if(4<(g=u[m]))_[p++]=65533,d+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&d<y;)m=m<<6|63&f[d++],g--;1<g?_[p++]=65533:m<65536?_[p++]=m:(m-=65536,_[p++]=55296|m>>10&1023,_[p++]=56320|1023&m)}return l(_,p)},i.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+u[f[d]]>h?d:h}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,o,a,u){for(var c=65535&s|0,l=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;l=l+(c=c+o[u++]|0)|0,--f;);c%=65521,l%=65521}return c|l<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var o,a=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[u]=o}return a}();n.exports=function(o,a,u,c){var l=s,f=c+u;o^=-1;for(var h=c;h<f;h++)o=o>>>8^l[255&(o^a[h])];return-1^o}},{}],46:[function(r,n,i){var s,o=r("../utils/common"),a=r("./trees"),u=r("./adler32"),c=r("./crc32"),l=r("./messages"),f=0,h=4,d=0,p=-2,m=-1,g=4,y=2,_=8,b=9,w=286,v=30,S=19,E=2*w+1,T=15,I=3,P=258,B=P+I+1,D=42,k=113,x=1,O=2,A=3,C=4;function L(F,W){return F.msg=l[W],W}function R(F){return(F<<1)-(4<F?9:0)}function U(F){for(var W=F.length;0<=--W;)F[W]=0}function N(F){var W=F.state,V=W.pending;V>F.avail_out&&(V=F.avail_out),V!==0&&(o.arraySet(F.output,W.pending_buf,W.pending_out,V,F.next_out),F.next_out+=V,W.pending_out+=V,F.total_out+=V,F.avail_out-=V,W.pending-=V,W.pending===0&&(W.pending_out=0))}function z(F,W){a._tr_flush_block(F,0<=F.block_start?F.block_start:-1,F.strstart-F.block_start,W),F.block_start=F.strstart,N(F.strm)}function Y(F,W){F.pending_buf[F.pending++]=W}function G(F,W){F.pending_buf[F.pending++]=W>>>8&255,F.pending_buf[F.pending++]=255&W}function K(F,W){var V,$,j=F.max_chain_length,H=F.strstart,X=F.prev_length,Q=F.nice_match,q=F.strstart>F.w_size-B?F.strstart-(F.w_size-B):0,et=F.window,it=F.w_mask,rt=F.prev,ct=F.strstart+P,vt=et[H+X-1],gt=et[H+X];F.prev_length>=F.good_match&&(j>>=2),Q>F.lookahead&&(Q=F.lookahead);do if(et[(V=W)+X]===gt&&et[V+X-1]===vt&&et[V]===et[H]&&et[++V]===et[H+1]){H+=2,V++;do;while(et[++H]===et[++V]&&et[++H]===et[++V]&&et[++H]===et[++V]&&et[++H]===et[++V]&&et[++H]===et[++V]&&et[++H]===et[++V]&&et[++H]===et[++V]&&et[++H]===et[++V]&&H<ct);if($=P-(ct-H),H=ct-P,X<$){if(F.match_start=W,Q<=(X=$))break;vt=et[H+X-1],gt=et[H+X]}}while((W=rt[W&it])>q&&--j!=0);return X<=F.lookahead?X:F.lookahead}function ut(F){var W,V,$,j,H,X,Q,q,et,it,rt=F.w_size;do{if(j=F.window_size-F.lookahead-F.strstart,F.strstart>=rt+(rt-B)){for(o.arraySet(F.window,F.window,rt,rt,0),F.match_start-=rt,F.strstart-=rt,F.block_start-=rt,W=V=F.hash_size;$=F.head[--W],F.head[W]=rt<=$?$-rt:0,--V;);for(W=V=rt;$=F.prev[--W],F.prev[W]=rt<=$?$-rt:0,--V;);j+=rt}if(F.strm.avail_in===0)break;if(X=F.strm,Q=F.window,q=F.strstart+F.lookahead,et=j,it=void 0,it=X.avail_in,et<it&&(it=et),V=it===0?0:(X.avail_in-=it,o.arraySet(Q,X.input,X.next_in,it,q),X.state.wrap===1?X.adler=u(X.adler,Q,it,q):X.state.wrap===2&&(X.adler=c(X.adler,Q,it,q)),X.next_in+=it,X.total_in+=it,it),F.lookahead+=V,F.lookahead+F.insert>=I)for(H=F.strstart-F.insert,F.ins_h=F.window[H],F.ins_h=(F.ins_h<<F.hash_shift^F.window[H+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[H+I-1])&F.hash_mask,F.prev[H&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=H,H++,F.insert--,!(F.lookahead+F.insert<I)););}while(F.lookahead<B&&F.strm.avail_in!==0)}function yt(F,W){for(var V,$;;){if(F.lookahead<B){if(ut(F),F.lookahead<B&&W===f)return x;if(F.lookahead===0)break}if(V=0,F.lookahead>=I&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+I-1])&F.hash_mask,V=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),V!==0&&F.strstart-V<=F.w_size-B&&(F.match_length=K(F,V)),F.match_length>=I)if($=a._tr_tally(F,F.strstart-F.match_start,F.match_length-I),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=I){for(F.match_length--;F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+I-1])&F.hash_mask,V=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart,--F.match_length!=0;);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else $=a._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if($&&(z(F,!1),F.strm.avail_out===0))return x}return F.insert=F.strstart<I-1?F.strstart:I-1,W===h?(z(F,!0),F.strm.avail_out===0?A:C):F.last_lit&&(z(F,!1),F.strm.avail_out===0)?x:O}function at(F,W){for(var V,$,j;;){if(F.lookahead<B){if(ut(F),F.lookahead<B&&W===f)return x;if(F.lookahead===0)break}if(V=0,F.lookahead>=I&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+I-1])&F.hash_mask,V=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=I-1,V!==0&&F.prev_length<F.max_lazy_match&&F.strstart-V<=F.w_size-B&&(F.match_length=K(F,V),F.match_length<=5&&(F.strategy===1||F.match_length===I&&4096<F.strstart-F.match_start)&&(F.match_length=I-1)),F.prev_length>=I&&F.match_length<=F.prev_length){for(j=F.strstart+F.lookahead-I,$=a._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-I),F.lookahead-=F.prev_length-1,F.prev_length-=2;++F.strstart<=j&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+I-1])&F.hash_mask,V=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),--F.prev_length!=0;);if(F.match_available=0,F.match_length=I-1,F.strstart++,$&&(z(F,!1),F.strm.avail_out===0))return x}else if(F.match_available){if(($=a._tr_tally(F,0,F.window[F.strstart-1]))&&z(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return x}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&($=a._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<I-1?F.strstart:I-1,W===h?(z(F,!0),F.strm.avail_out===0?A:C):F.last_lit&&(z(F,!1),F.strm.avail_out===0)?x:O}function ht(F,W,V,$,j){this.good_length=F,this.max_lazy=W,this.nice_length=V,this.max_chain=$,this.func=j}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*E),this.dyn_dtree=new o.Buf16(2*(2*v+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*w+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function dt(F){var W;return F&&F.state?(F.total_in=F.total_out=0,F.data_type=y,(W=F.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?D:k,F.adler=W.wrap===2?0:1,W.last_flush=f,a._tr_init(W),d):L(F,p)}function _t(F){var W=dt(F);return W===d&&function(V){V.window_size=2*V.w_size,U(V.head),V.max_lazy_match=s[V.level].max_lazy,V.good_match=s[V.level].good_length,V.nice_match=s[V.level].nice_length,V.max_chain_length=s[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=I-1,V.match_available=0,V.ins_h=0}(F.state),W}function At(F,W,V,$,j,H){if(!F)return p;var X=1;if(W===m&&(W=6),$<0?(X=0,$=-$):15<$&&(X=2,$-=16),j<1||b<j||V!==_||$<8||15<$||W<0||9<W||H<0||g<H)return L(F,p);$===8&&($=9);var Q=new bt;return(F.state=Q).strm=F,Q.wrap=X,Q.gzhead=null,Q.w_bits=$,Q.w_size=1<<Q.w_bits,Q.w_mask=Q.w_size-1,Q.hash_bits=j+7,Q.hash_size=1<<Q.hash_bits,Q.hash_mask=Q.hash_size-1,Q.hash_shift=~~((Q.hash_bits+I-1)/I),Q.window=new o.Buf8(2*Q.w_size),Q.head=new o.Buf16(Q.hash_size),Q.prev=new o.Buf16(Q.w_size),Q.lit_bufsize=1<<j+6,Q.pending_buf_size=4*Q.lit_bufsize,Q.pending_buf=new o.Buf8(Q.pending_buf_size),Q.d_buf=1*Q.lit_bufsize,Q.l_buf=3*Q.lit_bufsize,Q.level=W,Q.strategy=H,Q.method=V,_t(F)}s=[new ht(0,0,0,0,function(F,W){var V=65535;for(V>F.pending_buf_size-5&&(V=F.pending_buf_size-5);;){if(F.lookahead<=1){if(ut(F),F.lookahead===0&&W===f)return x;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var $=F.block_start+V;if((F.strstart===0||F.strstart>=$)&&(F.lookahead=F.strstart-$,F.strstart=$,z(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-B&&(z(F,!1),F.strm.avail_out===0))return x}return F.insert=0,W===h?(z(F,!0),F.strm.avail_out===0?A:C):(F.strstart>F.block_start&&(z(F,!1),F.strm.avail_out),x)}),new ht(4,4,8,4,yt),new ht(4,5,16,8,yt),new ht(4,6,32,32,yt),new ht(4,4,16,16,at),new ht(8,16,32,32,at),new ht(8,16,128,128,at),new ht(8,32,128,256,at),new ht(32,128,258,1024,at),new ht(32,258,258,4096,at)],i.deflateInit=function(F,W){return At(F,W,_,15,8,0)},i.deflateInit2=At,i.deflateReset=_t,i.deflateResetKeep=dt,i.deflateSetHeader=function(F,W){return F&&F.state?F.state.wrap!==2?p:(F.state.gzhead=W,d):p},i.deflate=function(F,W){var V,$,j,H;if(!F||!F.state||5<W||W<0)return F?L(F,p):p;if($=F.state,!F.output||!F.input&&F.avail_in!==0||$.status===666&&W!==h)return L(F,F.avail_out===0?-5:p);if($.strm=F,V=$.last_flush,$.last_flush=W,$.status===D)if($.wrap===2)F.adler=0,Y($,31),Y($,139),Y($,8),$.gzhead?(Y($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),Y($,255&$.gzhead.time),Y($,$.gzhead.time>>8&255),Y($,$.gzhead.time>>16&255),Y($,$.gzhead.time>>24&255),Y($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Y($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(Y($,255&$.gzhead.extra.length),Y($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(F.adler=c(F.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(Y($,0),Y($,0),Y($,0),Y($,0),Y($,0),Y($,$.level===9?2:2<=$.strategy||$.level<2?4:0),Y($,3),$.status=k);else{var X=_+($.w_bits-8<<4)<<8;X|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(X|=32),X+=31-X%31,$.status=k,G($,X),$.strstart!==0&&(G($,F.adler>>>16),G($,65535&F.adler)),F.adler=1}if($.status===69)if($.gzhead.extra){for(j=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>j&&(F.adler=c(F.adler,$.pending_buf,$.pending-j,j)),N(F),j=$.pending,$.pending!==$.pending_buf_size));)Y($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>j&&(F.adler=c(F.adler,$.pending_buf,$.pending-j,j)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){j=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>j&&(F.adler=c(F.adler,$.pending_buf,$.pending-j,j)),N(F),j=$.pending,$.pending===$.pending_buf_size)){H=1;break}H=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,Y($,H)}while(H!==0);$.gzhead.hcrc&&$.pending>j&&(F.adler=c(F.adler,$.pending_buf,$.pending-j,j)),H===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){j=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>j&&(F.adler=c(F.adler,$.pending_buf,$.pending-j,j)),N(F),j=$.pending,$.pending===$.pending_buf_size)){H=1;break}H=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,Y($,H)}while(H!==0);$.gzhead.hcrc&&$.pending>j&&(F.adler=c(F.adler,$.pending_buf,$.pending-j,j)),H===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&N(F),$.pending+2<=$.pending_buf_size&&(Y($,255&F.adler),Y($,F.adler>>8&255),F.adler=0,$.status=k)):$.status=k),$.pending!==0){if(N(F),F.avail_out===0)return $.last_flush=-1,d}else if(F.avail_in===0&&R(W)<=R(V)&&W!==h)return L(F,-5);if($.status===666&&F.avail_in!==0)return L(F,-5);if(F.avail_in!==0||$.lookahead!==0||W!==f&&$.status!==666){var Q=$.strategy===2?function(q,et){for(var it;;){if(q.lookahead===0&&(ut(q),q.lookahead===0)){if(et===f)return x;break}if(q.match_length=0,it=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,it&&(z(q,!1),q.strm.avail_out===0))return x}return q.insert=0,et===h?(z(q,!0),q.strm.avail_out===0?A:C):q.last_lit&&(z(q,!1),q.strm.avail_out===0)?x:O}($,W):$.strategy===3?function(q,et){for(var it,rt,ct,vt,gt=q.window;;){if(q.lookahead<=P){if(ut(q),q.lookahead<=P&&et===f)return x;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=I&&0<q.strstart&&(rt=gt[ct=q.strstart-1])===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]){vt=q.strstart+P;do;while(rt===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]&&rt===gt[++ct]&&ct<vt);q.match_length=P-(vt-ct),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=I?(it=a._tr_tally(q,1,q.match_length-I),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(it=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),it&&(z(q,!1),q.strm.avail_out===0))return x}return q.insert=0,et===h?(z(q,!0),q.strm.avail_out===0?A:C):q.last_lit&&(z(q,!1),q.strm.avail_out===0)?x:O}($,W):s[$.level].func($,W);if(Q!==A&&Q!==C||($.status=666),Q===x||Q===A)return F.avail_out===0&&($.last_flush=-1),d;if(Q===O&&(W===1?a._tr_align($):W!==5&&(a._tr_stored_block($,0,0,!1),W===3&&(U($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),N(F),F.avail_out===0))return $.last_flush=-1,d}return W!==h?d:$.wrap<=0?1:($.wrap===2?(Y($,255&F.adler),Y($,F.adler>>8&255),Y($,F.adler>>16&255),Y($,F.adler>>24&255),Y($,255&F.total_in),Y($,F.total_in>>8&255),Y($,F.total_in>>16&255),Y($,F.total_in>>24&255)):(G($,F.adler>>>16),G($,65535&F.adler)),N(F),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?d:1)},i.deflateEnd=function(F){var W;return F&&F.state?(W=F.state.status)!==D&&W!==69&&W!==73&&W!==91&&W!==103&&W!==k&&W!==666?L(F,p):(F.state=null,W===k?L(F,-3):d):p},i.deflateSetDictionary=function(F,W){var V,$,j,H,X,Q,q,et,it=W.length;if(!F||!F.state||(H=(V=F.state).wrap)===2||H===1&&V.status!==D||V.lookahead)return p;for(H===1&&(F.adler=u(F.adler,W,it,0)),V.wrap=0,it>=V.w_size&&(H===0&&(U(V.head),V.strstart=0,V.block_start=0,V.insert=0),et=new o.Buf8(V.w_size),o.arraySet(et,W,it-V.w_size,V.w_size,0),W=et,it=V.w_size),X=F.avail_in,Q=F.next_in,q=F.input,F.avail_in=it,F.next_in=0,F.input=W,ut(V);V.lookahead>=I;){for($=V.strstart,j=V.lookahead-(I-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[$+I-1])&V.hash_mask,V.prev[$&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=$,$++,--j;);V.strstart=$,V.lookahead=I-1,ut(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=I-1,V.match_available=0,F.next_in=Q,F.input=q,F.avail_in=X,V.wrap=H,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,o){var a,u,c,l,f,h,d,p,m,g,y,_,b,w,v,S,E,T,I,P,B,D,k,x,O;a=s.state,u=s.next_in,x=s.input,c=u+(s.avail_in-5),l=s.next_out,O=s.output,f=l-(o-s.avail_out),h=l+(s.avail_out-257),d=a.dmax,p=a.wsize,m=a.whave,g=a.wnext,y=a.window,_=a.hold,b=a.bits,w=a.lencode,v=a.distcode,S=(1<<a.lenbits)-1,E=(1<<a.distbits)-1;t:do{b<15&&(_+=x[u++]<<b,b+=8,_+=x[u++]<<b,b+=8),T=w[_&S];e:for(;;){if(_>>>=I=T>>>24,b-=I,(I=T>>>16&255)===0)O[l++]=65535&T;else{if(!(16&I)){if((64&I)==0){T=w[(65535&T)+(_&(1<<I)-1)];continue e}if(32&I){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}P=65535&T,(I&=15)&&(b<I&&(_+=x[u++]<<b,b+=8),P+=_&(1<<I)-1,_>>>=I,b-=I),b<15&&(_+=x[u++]<<b,b+=8,_+=x[u++]<<b,b+=8),T=v[_&E];r:for(;;){if(_>>>=I=T>>>24,b-=I,!(16&(I=T>>>16&255))){if((64&I)==0){T=v[(65535&T)+(_&(1<<I)-1)];continue r}s.msg="invalid distance code",a.mode=30;break t}if(B=65535&T,b<(I&=15)&&(_+=x[u++]<<b,(b+=8)<I&&(_+=x[u++]<<b,b+=8)),d<(B+=_&(1<<I)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(_>>>=I,b-=I,(I=l-f)<B){if(m<(I=B-I)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(k=y,(D=0)===g){if(D+=p-I,I<P){for(P-=I;O[l++]=y[D++],--I;);D=l-B,k=O}}else if(g<I){if(D+=p+g-I,(I-=g)<P){for(P-=I;O[l++]=y[D++],--I;);if(D=0,g<P){for(P-=I=g;O[l++]=y[D++],--I;);D=l-B,k=O}}}else if(D+=g-I,I<P){for(P-=I;O[l++]=y[D++],--I;);D=l-B,k=O}for(;2<P;)O[l++]=k[D++],O[l++]=k[D++],O[l++]=k[D++],P-=3;P&&(O[l++]=k[D++],1<P&&(O[l++]=k[D++]))}else{for(D=l-B;O[l++]=O[D++],O[l++]=O[D++],O[l++]=O[D++],2<(P-=3););P&&(O[l++]=O[D++],1<P&&(O[l++]=O[D++]))}break}}break}}while(u<c&&l<h);u-=P=b>>3,_&=(1<<(b-=P<<3))-1,s.next_in=u,s.next_out=l,s.avail_in=u<c?c-u+5:5-(u-c),s.avail_out=l<h?h-l+257:257-(l-h),a.hold=_,a.bits=b}},{}],49:[function(r,n,i){var s=r("../utils/common"),o=r("./adler32"),a=r("./crc32"),u=r("./inffast"),c=r("./inftrees"),l=1,f=2,h=0,d=-2,p=1,m=852,g=592;function y(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(D){var k;return D&&D.state?(k=D.state,D.total_in=D.total_out=k.total=0,D.msg="",k.wrap&&(D.adler=1&k.wrap),k.mode=p,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new s.Buf32(m),k.distcode=k.distdyn=new s.Buf32(g),k.sane=1,k.back=-1,h):d}function w(D){var k;return D&&D.state?((k=D.state).wsize=0,k.whave=0,k.wnext=0,b(D)):d}function v(D,k){var x,O;return D&&D.state?(O=D.state,k<0?(x=0,k=-k):(x=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?d:(O.window!==null&&O.wbits!==k&&(O.window=null),O.wrap=x,O.wbits=k,w(D))):d}function S(D,k){var x,O;return D?(O=new _,(D.state=O).window=null,(x=v(D,k))!==h&&(D.state=null),x):d}var E,T,I=!0;function P(D){if(I){var k;for(E=new s.Buf32(512),T=new s.Buf32(32),k=0;k<144;)D.lens[k++]=8;for(;k<256;)D.lens[k++]=9;for(;k<280;)D.lens[k++]=7;for(;k<288;)D.lens[k++]=8;for(c(l,D.lens,0,288,E,0,D.work,{bits:9}),k=0;k<32;)D.lens[k++]=5;c(f,D.lens,0,32,T,0,D.work,{bits:5}),I=!1}D.lencode=E,D.lenbits=9,D.distcode=T,D.distbits=5}function B(D,k,x,O){var A,C=D.state;return C.window===null&&(C.wsize=1<<C.wbits,C.wnext=0,C.whave=0,C.window=new s.Buf8(C.wsize)),O>=C.wsize?(s.arraySet(C.window,k,x-C.wsize,C.wsize,0),C.wnext=0,C.whave=C.wsize):(O<(A=C.wsize-C.wnext)&&(A=O),s.arraySet(C.window,k,x-O,A,C.wnext),(O-=A)?(s.arraySet(C.window,k,x-O,O,0),C.wnext=O,C.whave=C.wsize):(C.wnext+=A,C.wnext===C.wsize&&(C.wnext=0),C.whave<C.wsize&&(C.whave+=A))),0}i.inflateReset=w,i.inflateReset2=v,i.inflateResetKeep=b,i.inflateInit=function(D){return S(D,15)},i.inflateInit2=S,i.inflate=function(D,k){var x,O,A,C,L,R,U,N,z,Y,G,K,ut,yt,at,ht,bt,dt,_t,At,F,W,V,$,j=0,H=new s.Buf8(4),X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return d;(x=D.state).mode===12&&(x.mode=13),L=D.next_out,A=D.output,U=D.avail_out,C=D.next_in,O=D.input,R=D.avail_in,N=x.hold,z=x.bits,Y=R,G=U,W=h;t:for(;;)switch(x.mode){case p:if(x.wrap===0){x.mode=13;break}for(;z<16;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(2&x.wrap&&N===35615){H[x.check=0]=255&N,H[1]=N>>>8&255,x.check=a(x.check,H,2,0),z=N=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&N)<<8)+(N>>8))%31){D.msg="incorrect header check",x.mode=30;break}if((15&N)!=8){D.msg="unknown compression method",x.mode=30;break}if(z-=4,F=8+(15&(N>>>=4)),x.wbits===0)x.wbits=F;else if(F>x.wbits){D.msg="invalid window size",x.mode=30;break}x.dmax=1<<F,D.adler=x.check=1,x.mode=512&N?10:12,z=N=0;break;case 2:for(;z<16;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(x.flags=N,(255&x.flags)!=8){D.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){D.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=N>>8&1),512&x.flags&&(H[0]=255&N,H[1]=N>>>8&255,x.check=a(x.check,H,2,0)),z=N=0,x.mode=3;case 3:for(;z<32;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}x.head&&(x.head.time=N),512&x.flags&&(H[0]=255&N,H[1]=N>>>8&255,H[2]=N>>>16&255,H[3]=N>>>24&255,x.check=a(x.check,H,4,0)),z=N=0,x.mode=4;case 4:for(;z<16;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}x.head&&(x.head.xflags=255&N,x.head.os=N>>8),512&x.flags&&(H[0]=255&N,H[1]=N>>>8&255,x.check=a(x.check,H,2,0)),z=N=0,x.mode=5;case 5:if(1024&x.flags){for(;z<16;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}x.length=N,x.head&&(x.head.extra_len=N),512&x.flags&&(H[0]=255&N,H[1]=N>>>8&255,x.check=a(x.check,H,2,0)),z=N=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(R<(K=x.length)&&(K=R),K&&(x.head&&(F=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),s.arraySet(x.head.extra,O,C,K,F)),512&x.flags&&(x.check=a(x.check,O,K,C)),R-=K,C+=K,x.length-=K),x.length))break t;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(R===0)break t;for(K=0;F=O[C+K++],x.head&&F&&x.length<65536&&(x.head.name+=String.fromCharCode(F)),F&&K<R;);if(512&x.flags&&(x.check=a(x.check,O,K,C)),R-=K,C+=K,F)break t}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(R===0)break t;for(K=0;F=O[C+K++],x.head&&F&&x.length<65536&&(x.head.comment+=String.fromCharCode(F)),F&&K<R;);if(512&x.flags&&(x.check=a(x.check,O,K,C)),R-=K,C+=K,F)break t}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;z<16;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(N!==(65535&x.check)){D.msg="header crc mismatch",x.mode=30;break}z=N=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),D.adler=x.check=0,x.mode=12;break;case 10:for(;z<32;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}D.adler=x.check=y(N),z=N=0,x.mode=11;case 11:if(x.havedict===0)return D.next_out=L,D.avail_out=U,D.next_in=C,D.avail_in=R,x.hold=N,x.bits=z,2;D.adler=x.check=1,x.mode=12;case 12:if(k===5||k===6)break t;case 13:if(x.last){N>>>=7&z,z-=7&z,x.mode=27;break}for(;z<3;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}switch(x.last=1&N,z-=1,3&(N>>>=1)){case 0:x.mode=14;break;case 1:if(P(x),x.mode=20,k!==6)break;N>>>=2,z-=2;break t;case 2:x.mode=17;break;case 3:D.msg="invalid block type",x.mode=30}N>>>=2,z-=2;break;case 14:for(N>>>=7&z,z-=7&z;z<32;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if((65535&N)!=(N>>>16^65535)){D.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&N,z=N=0,x.mode=15,k===6)break t;case 15:x.mode=16;case 16:if(K=x.length){if(R<K&&(K=R),U<K&&(K=U),K===0)break t;s.arraySet(A,O,C,K,L),R-=K,C+=K,U-=K,L+=K,x.length-=K;break}x.mode=12;break;case 17:for(;z<14;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(x.nlen=257+(31&N),N>>>=5,z-=5,x.ndist=1+(31&N),N>>>=5,z-=5,x.ncode=4+(15&N),N>>>=4,z-=4,286<x.nlen||30<x.ndist){D.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;z<3;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}x.lens[X[x.have++]]=7&N,N>>>=3,z-=3}for(;x.have<19;)x.lens[X[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,V={bits:x.lenbits},W=c(0,x.lens,0,19,x.lencode,0,x.work,V),x.lenbits=V.bits,W){D.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;ht=(j=x.lencode[N&(1<<x.lenbits)-1])>>>16&255,bt=65535&j,!((at=j>>>24)<=z);){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(bt<16)N>>>=at,z-=at,x.lens[x.have++]=bt;else{if(bt===16){for($=at+2;z<$;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(N>>>=at,z-=at,x.have===0){D.msg="invalid bit length repeat",x.mode=30;break}F=x.lens[x.have-1],K=3+(3&N),N>>>=2,z-=2}else if(bt===17){for($=at+3;z<$;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}z-=at,F=0,K=3+(7&(N>>>=at)),N>>>=3,z-=3}else{for($=at+7;z<$;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}z-=at,F=0,K=11+(127&(N>>>=at)),N>>>=7,z-=7}if(x.have+K>x.nlen+x.ndist){D.msg="invalid bit length repeat",x.mode=30;break}for(;K--;)x.lens[x.have++]=F}}if(x.mode===30)break;if(x.lens[256]===0){D.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,V={bits:x.lenbits},W=c(l,x.lens,0,x.nlen,x.lencode,0,x.work,V),x.lenbits=V.bits,W){D.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,V={bits:x.distbits},W=c(f,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,V),x.distbits=V.bits,W){D.msg="invalid distances set",x.mode=30;break}if(x.mode=20,k===6)break t;case 20:x.mode=21;case 21:if(6<=R&&258<=U){D.next_out=L,D.avail_out=U,D.next_in=C,D.avail_in=R,x.hold=N,x.bits=z,u(D,G),L=D.next_out,A=D.output,U=D.avail_out,C=D.next_in,O=D.input,R=D.avail_in,N=x.hold,z=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;ht=(j=x.lencode[N&(1<<x.lenbits)-1])>>>16&255,bt=65535&j,!((at=j>>>24)<=z);){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(ht&&(240&ht)==0){for(dt=at,_t=ht,At=bt;ht=(j=x.lencode[At+((N&(1<<dt+_t)-1)>>dt)])>>>16&255,bt=65535&j,!(dt+(at=j>>>24)<=z);){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}N>>>=dt,z-=dt,x.back+=dt}if(N>>>=at,z-=at,x.back+=at,x.length=bt,ht===0){x.mode=26;break}if(32&ht){x.back=-1,x.mode=12;break}if(64&ht){D.msg="invalid literal/length code",x.mode=30;break}x.extra=15&ht,x.mode=22;case 22:if(x.extra){for($=x.extra;z<$;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}x.length+=N&(1<<x.extra)-1,N>>>=x.extra,z-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;ht=(j=x.distcode[N&(1<<x.distbits)-1])>>>16&255,bt=65535&j,!((at=j>>>24)<=z);){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if((240&ht)==0){for(dt=at,_t=ht,At=bt;ht=(j=x.distcode[At+((N&(1<<dt+_t)-1)>>dt)])>>>16&255,bt=65535&j,!(dt+(at=j>>>24)<=z);){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}N>>>=dt,z-=dt,x.back+=dt}if(N>>>=at,z-=at,x.back+=at,64&ht){D.msg="invalid distance code",x.mode=30;break}x.offset=bt,x.extra=15&ht,x.mode=24;case 24:if(x.extra){for($=x.extra;z<$;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}x.offset+=N&(1<<x.extra)-1,N>>>=x.extra,z-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){D.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(U===0)break t;if(K=G-U,x.offset>K){if((K=x.offset-K)>x.whave&&x.sane){D.msg="invalid distance too far back",x.mode=30;break}ut=K>x.wnext?(K-=x.wnext,x.wsize-K):x.wnext-K,K>x.length&&(K=x.length),yt=x.window}else yt=A,ut=L-x.offset,K=x.length;for(U<K&&(K=U),U-=K,x.length-=K;A[L++]=yt[ut++],--K;);x.length===0&&(x.mode=21);break;case 26:if(U===0)break t;A[L++]=x.length,U--,x.mode=21;break;case 27:if(x.wrap){for(;z<32;){if(R===0)break t;R--,N|=O[C++]<<z,z+=8}if(G-=U,D.total_out+=G,x.total+=G,G&&(D.adler=x.check=x.flags?a(x.check,A,G,L-G):o(x.check,A,G,L-G)),G=U,(x.flags?N:y(N))!==x.check){D.msg="incorrect data check",x.mode=30;break}z=N=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;z<32;){if(R===0)break t;R--,N+=O[C++]<<z,z+=8}if(N!==(4294967295&x.total)){D.msg="incorrect length check",x.mode=30;break}z=N=0}x.mode=29;case 29:W=1;break t;case 30:W=-3;break t;case 31:return-4;case 32:default:return d}return D.next_out=L,D.avail_out=U,D.next_in=C,D.avail_in=R,x.hold=N,x.bits=z,(x.wsize||G!==D.avail_out&&x.mode<30&&(x.mode<27||k!==4))&&B(D,D.output,D.next_out,G-D.avail_out)?(x.mode=31,-4):(Y-=D.avail_in,G-=D.avail_out,D.total_in+=Y,D.total_out+=G,x.total+=G,x.wrap&&G&&(D.adler=x.check=x.flags?a(x.check,A,G,D.next_out-G):o(x.check,A,G,D.next_out-G)),D.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(Y==0&&G===0||k===4)&&W===h&&(W=-5),W)},i.inflateEnd=function(D){if(!D||!D.state)return d;var k=D.state;return k.window&&(k.window=null),D.state=null,h},i.inflateGetHeader=function(D,k){var x;return D&&D.state?(2&(x=D.state).wrap)==0?d:((x.head=k).done=!1,h):d},i.inflateSetDictionary=function(D,k){var x,O=k.length;return D&&D.state?(x=D.state).wrap!==0&&x.mode!==11?d:x.mode===11&&o(1,k,O,0)!==x.check?-3:B(D,k,O,O)?(x.mode=31,-4):(x.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,f,h,d,p,m,g,y){var _,b,w,v,S,E,T,I,P,B=y.bits,D=0,k=0,x=0,O=0,A=0,C=0,L=0,R=0,U=0,N=0,z=null,Y=0,G=new s.Buf16(16),K=new s.Buf16(16),ut=null,yt=0;for(D=0;D<=15;D++)G[D]=0;for(k=0;k<d;k++)G[f[h+k]]++;for(A=B,O=15;1<=O&&G[O]===0;O--);if(O<A&&(A=O),O===0)return p[m++]=20971520,p[m++]=20971520,y.bits=1,0;for(x=1;x<O&&G[x]===0;x++);for(A<x&&(A=x),D=R=1;D<=15;D++)if(R<<=1,(R-=G[D])<0)return-1;if(0<R&&(l===0||O!==1))return-1;for(K[1]=0,D=1;D<15;D++)K[D+1]=K[D]+G[D];for(k=0;k<d;k++)f[h+k]!==0&&(g[K[f[h+k]]++]=k);if(E=l===0?(z=ut=g,19):l===1?(z=o,Y-=257,ut=a,yt-=257,256):(z=u,ut=c,-1),D=x,S=m,L=k=N=0,w=-1,v=(U=1<<(C=A))-1,l===1&&852<U||l===2&&592<U)return 1;for(;;){for(T=D-L,P=g[k]<E?(I=0,g[k]):g[k]>E?(I=ut[yt+g[k]],z[Y+g[k]]):(I=96,0),_=1<<D-L,x=b=1<<C;p[S+(N>>L)+(b-=_)]=T<<24|I<<16|P|0,b!==0;);for(_=1<<D-1;N&_;)_>>=1;if(_!==0?(N&=_-1,N+=_):N=0,k++,--G[D]==0){if(D===O)break;D=f[h+g[k]]}if(A<D&&(N&v)!==w){for(L===0&&(L=A),S+=x,R=1<<(C=D-L);C+L<O&&!((R-=G[C+L])<=0);)C++,R<<=1;if(U+=1<<C,l===1&&852<U||l===2&&592<U)return 1;p[w=N&v]=A<<24|C<<16|S-m|0}}return N!==0&&(p[S+N]=D-L<<24|64<<16|0),y.bits=A,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),o=0,a=1;function u(j){for(var H=j.length;0<=--H;)j[H]=0}var c=0,l=29,f=256,h=f+1+l,d=30,p=19,m=2*h+1,g=15,y=16,_=7,b=256,w=16,v=17,S=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(h+2));u(B);var D=new Array(2*d);u(D);var k=new Array(512);u(k);var x=new Array(256);u(x);var O=new Array(l);u(O);var A,C,L,R=new Array(d);function U(j,H,X,Q,q){this.static_tree=j,this.extra_bits=H,this.extra_base=X,this.elems=Q,this.max_length=q,this.has_stree=j&&j.length}function N(j,H){this.dyn_tree=j,this.max_code=0,this.stat_desc=H}function z(j){return j<256?k[j]:k[256+(j>>>7)]}function Y(j,H){j.pending_buf[j.pending++]=255&H,j.pending_buf[j.pending++]=H>>>8&255}function G(j,H,X){j.bi_valid>y-X?(j.bi_buf|=H<<j.bi_valid&65535,Y(j,j.bi_buf),j.bi_buf=H>>y-j.bi_valid,j.bi_valid+=X-y):(j.bi_buf|=H<<j.bi_valid&65535,j.bi_valid+=X)}function K(j,H,X){G(j,X[2*H],X[2*H+1])}function ut(j,H){for(var X=0;X|=1&j,j>>>=1,X<<=1,0<--H;);return X>>>1}function yt(j,H,X){var Q,q,et=new Array(g+1),it=0;for(Q=1;Q<=g;Q++)et[Q]=it=it+X[Q-1]<<1;for(q=0;q<=H;q++){var rt=j[2*q+1];rt!==0&&(j[2*q]=ut(et[rt]++,rt))}}function at(j){var H;for(H=0;H<h;H++)j.dyn_ltree[2*H]=0;for(H=0;H<d;H++)j.dyn_dtree[2*H]=0;for(H=0;H<p;H++)j.bl_tree[2*H]=0;j.dyn_ltree[2*b]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function ht(j){8<j.bi_valid?Y(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function bt(j,H,X,Q){var q=2*H,et=2*X;return j[q]<j[et]||j[q]===j[et]&&Q[H]<=Q[X]}function dt(j,H,X){for(var Q=j.heap[X],q=X<<1;q<=j.heap_len&&(q<j.heap_len&&bt(H,j.heap[q+1],j.heap[q],j.depth)&&q++,!bt(H,Q,j.heap[q],j.depth));)j.heap[X]=j.heap[q],X=q,q<<=1;j.heap[X]=Q}function _t(j,H,X){var Q,q,et,it,rt=0;if(j.last_lit!==0)for(;Q=j.pending_buf[j.d_buf+2*rt]<<8|j.pending_buf[j.d_buf+2*rt+1],q=j.pending_buf[j.l_buf+rt],rt++,Q===0?K(j,q,H):(K(j,(et=x[q])+f+1,H),(it=E[et])!==0&&G(j,q-=O[et],it),K(j,et=z(--Q),X),(it=T[et])!==0&&G(j,Q-=R[et],it)),rt<j.last_lit;);K(j,b,H)}function At(j,H){var X,Q,q,et=H.dyn_tree,it=H.stat_desc.static_tree,rt=H.stat_desc.has_stree,ct=H.stat_desc.elems,vt=-1;for(j.heap_len=0,j.heap_max=m,X=0;X<ct;X++)et[2*X]!==0?(j.heap[++j.heap_len]=vt=X,j.depth[X]=0):et[2*X+1]=0;for(;j.heap_len<2;)et[2*(q=j.heap[++j.heap_len]=vt<2?++vt:0)]=1,j.depth[q]=0,j.opt_len--,rt&&(j.static_len-=it[2*q+1]);for(H.max_code=vt,X=j.heap_len>>1;1<=X;X--)dt(j,et,X);for(q=ct;X=j.heap[1],j.heap[1]=j.heap[j.heap_len--],dt(j,et,1),Q=j.heap[1],j.heap[--j.heap_max]=X,j.heap[--j.heap_max]=Q,et[2*q]=et[2*X]+et[2*Q],j.depth[q]=(j.depth[X]>=j.depth[Q]?j.depth[X]:j.depth[Q])+1,et[2*X+1]=et[2*Q+1]=q,j.heap[1]=q++,dt(j,et,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],function(gt,Vt){var tr,Wt,ne,St,Me,_r,ie=Vt.dyn_tree,Ur=Vt.max_code,di=Vt.stat_desc.static_tree,wn=Vt.stat_desc.has_stree,er=Vt.stat_desc.extra_bits,Hr=Vt.stat_desc.extra_base,Ne=Vt.stat_desc.max_length,yr=0;for(St=0;St<=g;St++)gt.bl_count[St]=0;for(ie[2*gt.heap[gt.heap_max]+1]=0,tr=gt.heap_max+1;tr<m;tr++)Ne<(St=ie[2*ie[2*(Wt=gt.heap[tr])+1]+1]+1)&&(St=Ne,yr++),ie[2*Wt+1]=St,Ur<Wt||(gt.bl_count[St]++,Me=0,Hr<=Wt&&(Me=er[Wt-Hr]),_r=ie[2*Wt],gt.opt_len+=_r*(St+Me),wn&&(gt.static_len+=_r*(di[2*Wt+1]+Me)));if(yr!==0){do{for(St=Ne-1;gt.bl_count[St]===0;)St--;gt.bl_count[St]--,gt.bl_count[St+1]+=2,gt.bl_count[Ne]--,yr-=2}while(0<yr);for(St=Ne;St!==0;St--)for(Wt=gt.bl_count[St];Wt!==0;)Ur<(ne=gt.heap[--tr])||(ie[2*ne+1]!==St&&(gt.opt_len+=(St-ie[2*ne+1])*ie[2*ne],ie[2*ne+1]=St),Wt--)}}(j,H),yt(et,vt,j.bl_count)}function F(j,H,X){var Q,q,et=-1,it=H[1],rt=0,ct=7,vt=4;for(it===0&&(ct=138,vt=3),H[2*(X+1)+1]=65535,Q=0;Q<=X;Q++)q=it,it=H[2*(Q+1)+1],++rt<ct&&q===it||(rt<vt?j.bl_tree[2*q]+=rt:q!==0?(q!==et&&j.bl_tree[2*q]++,j.bl_tree[2*w]++):rt<=10?j.bl_tree[2*v]++:j.bl_tree[2*S]++,et=q,vt=(rt=0)===it?(ct=138,3):q===it?(ct=6,3):(ct=7,4))}function W(j,H,X){var Q,q,et=-1,it=H[1],rt=0,ct=7,vt=4;for(it===0&&(ct=138,vt=3),Q=0;Q<=X;Q++)if(q=it,it=H[2*(Q+1)+1],!(++rt<ct&&q===it)){if(rt<vt)for(;K(j,q,j.bl_tree),--rt!=0;);else q!==0?(q!==et&&(K(j,q,j.bl_tree),rt--),K(j,w,j.bl_tree),G(j,rt-3,2)):rt<=10?(K(j,v,j.bl_tree),G(j,rt-3,3)):(K(j,S,j.bl_tree),G(j,rt-11,7));et=q,vt=(rt=0)===it?(ct=138,3):q===it?(ct=6,3):(ct=7,4)}}u(R);var V=!1;function $(j,H,X,Q){G(j,(c<<1)+(Q?1:0),3),function(q,et,it,rt){ht(q),Y(q,it),Y(q,~it),s.arraySet(q.pending_buf,q.window,et,it,q.pending),q.pending+=it}(j,H,X)}i._tr_init=function(j){V||(function(){var H,X,Q,q,et,it=new Array(g+1);for(q=Q=0;q<l-1;q++)for(O[q]=Q,H=0;H<1<<E[q];H++)x[Q++]=q;for(x[Q-1]=q,q=et=0;q<16;q++)for(R[q]=et,H=0;H<1<<T[q];H++)k[et++]=q;for(et>>=7;q<d;q++)for(R[q]=et<<7,H=0;H<1<<T[q]-7;H++)k[256+et++]=q;for(X=0;X<=g;X++)it[X]=0;for(H=0;H<=143;)B[2*H+1]=8,H++,it[8]++;for(;H<=255;)B[2*H+1]=9,H++,it[9]++;for(;H<=279;)B[2*H+1]=7,H++,it[7]++;for(;H<=287;)B[2*H+1]=8,H++,it[8]++;for(yt(B,h+1,it),H=0;H<d;H++)D[2*H+1]=5,D[2*H]=ut(H,5);A=new U(B,E,f+1,h,g),C=new U(D,T,0,d,g),L=new U(new Array(0),I,0,p,_)}(),V=!0),j.l_desc=new N(j.dyn_ltree,A),j.d_desc=new N(j.dyn_dtree,C),j.bl_desc=new N(j.bl_tree,L),j.bi_buf=0,j.bi_valid=0,at(j)},i._tr_stored_block=$,i._tr_flush_block=function(j,H,X,Q){var q,et,it=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=function(rt){var ct,vt=4093624447;for(ct=0;ct<=31;ct++,vt>>>=1)if(1&vt&&rt.dyn_ltree[2*ct]!==0)return o;if(rt.dyn_ltree[18]!==0||rt.dyn_ltree[20]!==0||rt.dyn_ltree[26]!==0)return a;for(ct=32;ct<f;ct++)if(rt.dyn_ltree[2*ct]!==0)return a;return o}(j)),At(j,j.l_desc),At(j,j.d_desc),it=function(rt){var ct;for(F(rt,rt.dyn_ltree,rt.l_desc.max_code),F(rt,rt.dyn_dtree,rt.d_desc.max_code),At(rt,rt.bl_desc),ct=p-1;3<=ct&&rt.bl_tree[2*P[ct]+1]===0;ct--);return rt.opt_len+=3*(ct+1)+5+5+4,ct}(j),q=j.opt_len+3+7>>>3,(et=j.static_len+3+7>>>3)<=q&&(q=et)):q=et=X+5,X+4<=q&&H!==-1?$(j,H,X,Q):j.strategy===4||et===q?(G(j,2+(Q?1:0),3),_t(j,B,D)):(G(j,4+(Q?1:0),3),function(rt,ct,vt,gt){var Vt;for(G(rt,ct-257,5),G(rt,vt-1,5),G(rt,gt-4,4),Vt=0;Vt<gt;Vt++)G(rt,rt.bl_tree[2*P[Vt]+1],3);W(rt,rt.dyn_ltree,ct-1),W(rt,rt.dyn_dtree,vt-1)}(j,j.l_desc.max_code+1,j.d_desc.max_code+1,it+1),_t(j,j.dyn_ltree,j.dyn_dtree)),at(j),Q&&ht(j)},i._tr_tally=function(j,H,X){return j.pending_buf[j.d_buf+2*j.last_lit]=H>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&H,j.pending_buf[j.l_buf+j.last_lit]=255&X,j.last_lit++,H===0?j.dyn_ltree[2*X]++:(j.matches++,H--,j.dyn_ltree[2*(x[X]+f+1)]++,j.dyn_dtree[2*z(H)]++),j.last_lit===j.lit_bufsize-1},i._tr_align=function(j){G(j,2,3),K(j,b,B),function(H){H.bi_valid===16?(Y(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(j)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(o,a){if(!o.setImmediate){var u,c,l,f,h=1,d={},p=!1,m=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,u={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){_(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,v=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=v,w}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(w){o.postMessage(f+w,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(w){_(w.data)},function(w){l.port2.postMessage(w)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(w){var v=m.createElement("script");v.onreadystatechange=function(){_(w),v.onreadystatechange=null,c.removeChild(v),v=null},c.appendChild(v)}):function(w){setTimeout(_,0,w)},g.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var v=new Array(arguments.length-1),S=0;S<v.length;S++)v[S]=arguments[S+1];var E={callback:w,args:v};return d[h]=E,u(h),h++},g.clearImmediate=y}function y(w){delete d[w]}function _(w){if(p)setTimeout(_,0,w);else{var v=d[w];if(v){p=!0;try{(function(S){var E=S.callback,T=S.args;switch(T.length){case 0:E();break;case 1:E(T[0]);break;case 2:E(T[0],T[1]);break;case 3:E(T[0],T[1],T[2]);break;default:E.apply(a,T)}})(v)}finally{y(w),p=!1}}}}function b(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(f)===0&&_(+w.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof vn<"u"?vn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Di)),Di.exports}var Bp=Rp();const g2=Nr(Bp);var $n={exports:{}},Mp=$n.exports,oa;function Np(){return oa||(oa=1,function(e,t){(function(r,n){e.exports=n()})(Mp,()=>(()=>{var r={d:(h,d)=>{for(var p in d)r.o(d,p)&&!r.o(h,p)&&Object.defineProperty(h,p,{enumerable:!0,get:d[p]})},o:(h,d)=>Object.prototype.hasOwnProperty.call(h,d)},n={};function i(h){return Array.isArray(h)?"array":h instanceof Date?"date":h instanceof Error?"error":h instanceof RegExp?"regexp":h===null?"null":typeof h=="object"&&Object.prototype.toString.call(h)==="[object Object]"?"object":typeof h}r.d(n,{default:()=>f});var s={base:o,date:o,error:o,symbol:o,string:o,number:o,boolean:o,regexp:o,null:o,undefined:o};function o(h){return h}var a={indent:" ",prefix:`
`,postfix:"",errorToString:function(h,d){return Error.prototype.toString.call(h)},dateToString:function(h){return"new Date(".concat(Date.prototype.toISOString.call(h),")")},colors:s};function u(h){return h===void 0&&(h={}),Object.assign({},a,h,{colors:Object.assign({},s,h.colors)})}function c(h,d){h===void 0&&(h=1),d===void 0&&(d="  ");for(var p="",m=0;m<h;m+=1)p+=d;return p}var l=["object","array"];function f(h,d){var p=u(d),m=p.colors,g=p.prefix,y=p.postfix,_=p.dateToString,b=p.errorToString,w=p.indent,v=new Map;function S(B,D,k){if(D===void 0&&(D=1),k===void 0&&(k=0),Object.keys(B).length===0)return" ".concat(m.base("{}"));var x=`
`,O=c(D,w);return Object.keys(B).forEach(function(A){var C=B[A],L=i(C),R=c(k,"  "),U=l.includes(L)?"":" ",N=I(C)?" ".concat(m.base("[Circular]")):T(L,C,D+1,k);x+="".concat(R).concat(O).concat(m.base("".concat(A,":"))).concat(U).concat(N,`
`)}),x.substring(0,x.length-1)}function E(B,D,k){if(D===void 0&&(D=1),k===void 0&&(k=0),B.length===0)return" ".concat(m.base("[]"));var x=`
`,O=c(D,w);return B.forEach(function(A){var C=i(A),L=c(k,"  "),R=I(A)?m.base("[Circular]"):T(C,A,D,k+1).toString().trimLeft();x+="".concat(L).concat(O).concat("".concat(m.base("-")," ")).concat(R,`
`)}),x.substring(0,x.length-1)}function T(B,D,k,x){switch(B){case"array":return E(D,k,x);case"object":return S(D,k,x);case"string":return m.string(D);case"symbol":return m.symbol(D.toString());case"number":return m.number(D);case"boolean":return m.boolean(D);case"null":return m.null("null");case"undefined":return m.undefined("undefined");case"date":return m.date(_(D));case"error":return m.error(b(D,c(k,w)));case"regexp":return m.regexp(D.toString());default:return D&&D.toString?D.toString():Object.prototype.toString.call(D)}}function I(B){return!(!["object","array"].includes(i(B))||!v.has(B)&&(v.set(B,!0),1))}var P="";return v.set(h,!0),i(h)==="object"&&Object.keys(h).length>0?P=S(h):i(h)==="array"&&h.length>0&&(P=E(h)),P.length===0?"":"".concat(g).concat(P.slice(1)).concat(y)}return n.default})())}($n)),$n.exports}var jp=Np();const b2=Nr(jp),aa={};function $p(e){let t=aa[e];if(t)return t;t=aa[e]=[];for(let r=0;r<128;r++){const n=String.fromCharCode(r);t.push(n)}for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);t[n]="%"+("0"+n.toString(16).toUpperCase()).slice(-2)}return t}function Rr(e,t){typeof t!="string"&&(t=Rr.defaultChars);const r=$p(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(n){let i="";for(let s=0,o=n.length;s<o;s+=3){const a=parseInt(n.slice(s+1,s+3),16);if(a<128){i+=r[a];continue}if((a&224)===192&&s+3<o){const u=parseInt(n.slice(s+4,s+6),16);if((u&192)===128){const c=a<<6&1984|u&63;c<128?i+="��":i+=String.fromCharCode(c),s+=3;continue}}if((a&240)===224&&s+6<o){const u=parseInt(n.slice(s+4,s+6),16),c=parseInt(n.slice(s+7,s+9),16);if((u&192)===128&&(c&192)===128){const l=a<<12&61440|u<<6&4032|c&63;l<2048||l>=55296&&l<=57343?i+="���":i+=String.fromCharCode(l),s+=6;continue}}if((a&248)===240&&s+9<o){const u=parseInt(n.slice(s+4,s+6),16),c=parseInt(n.slice(s+7,s+9),16),l=parseInt(n.slice(s+10,s+12),16);if((u&192)===128&&(c&192)===128&&(l&192)===128){let f=a<<18&1835008|u<<12&258048|c<<6&4032|l&63;f<65536||f>1114111?i+="����":(f-=65536,i+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),s+=9;continue}}i+="�"}return i})}Rr.defaultChars=";/?:@&=+$,#";Rr.componentChars="";const ua={};function zp(e){let t=ua[e];if(t)return t;t=ua[e]=[];for(let r=0;r<128;r++){const n=String.fromCharCode(r);/^[0-9a-z]$/i.test(n)?t.push(n):t.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<e.length;r++)t[e.charCodeAt(r)]=e[r];return t}function gn(e,t,r){typeof t!="string"&&(r=t,t=gn.defaultChars),typeof r>"u"&&(r=!0);const n=zp(t);let i="";for(let s=0,o=e.length;s<o;s++){const a=e.charCodeAt(s);if(r&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(s+1,s+3))){i+=e.slice(s,s+3),s+=2;continue}if(a<128){i+=n[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const u=e.charCodeAt(s+1);if(u>=56320&&u<=57343){i+=encodeURIComponent(e[s]+e[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[s])}return i}gn.defaultChars=";/?:@&=+$,-_.!~*'()#";gn.componentChars="-_.!~*'()";function Us(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Yn(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Up=/^([a-z0-9.+-]+:)/i,Hp=/:[0-9]*$/,qp=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Vp=["<",">",'"',"`"," ","\r",`
`,"	"],Wp=["{","}","|","\\","^","`"].concat(Vp),Gp=["'"].concat(Wp),ca=["%","/","?",";","#"].concat(Gp),la=["/","?","#"],Zp=255,ha=/^[+a-z0-9A-Z_-]{0,63}$/,Kp=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,fa={javascript:!0,"javascript:":!0},da={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Hs(e,t){if(e&&e instanceof Yn)return e;const r=new Yn;return r.parse(e,t),r}Yn.prototype.parse=function(e,t){let r,n,i,s=e;if(s=s.trim(),!t&&e.split("#").length===1){const c=qp.exec(s);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=Up.exec(s);if(o&&(o=o[0],r=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(t||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&fa[o])&&(s=s.substr(2),this.slashes=!0)),!fa[o]&&(i||o&&!da[o])){let c=-1;for(let p=0;p<la.length;p++)n=s.indexOf(la[p]),n!==-1&&(c===-1||n<c)&&(c=n);let l,f;c===-1?f=s.lastIndexOf("@"):f=s.lastIndexOf("@",c),f!==-1&&(l=s.slice(0,f),s=s.slice(f+1),this.auth=l),c=-1;for(let p=0;p<ca.length;p++)n=s.indexOf(ca[p]),n!==-1&&(c===-1||n<c)&&(c=n);c===-1&&(c=s.length),s[c-1]===":"&&c--;const h=s.slice(0,c);s=s.slice(c),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let m=0,g=p.length;m<g;m++){const y=p[m];if(y&&!y.match(ha)){let _="";for(let b=0,w=y.length;b<w;b++)y.charCodeAt(b)>127?_+="x":_+=y[b];if(!_.match(ha)){const b=p.slice(0,m),w=p.slice(m+1),v=y.match(Kp);v&&(b.push(v[1]),w.unshift(v[2])),w.length&&(s=w.join(".")+s),this.hostname=b.join(".");break}}}}this.hostname.length>Zp&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const u=s.indexOf("?");return u!==-1&&(this.search=s.substr(u),s=s.slice(0,u)),s&&(this.pathname=s),da[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Yn.prototype.parseHost=function(e){let t=Hp.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Jp=Object.freeze(Object.defineProperty({__proto__:null,decode:Rr,encode:gn,format:Us,parse:Hs},Symbol.toStringTag,{value:"Module"})),xh=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kh=/[\0-\x1F\x7F-\x9F]/,Yp=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,qs=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Eh=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Ah=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Xp=Object.freeze(Object.defineProperty({__proto__:null,Any:xh,Cc:kh,Cf:Yp,P:qs,S:Eh,Z:Ah},Symbol.toStringTag,{value:"Module"})),Qp=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),t1=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var Ti;const e1=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),r1=(Ti=String.fromCodePoint)!==null&&Ti!==void 0?Ti:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function n1(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=e1.get(e))!==null&&t!==void 0?t:e}var jt;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(jt||(jt={}));const i1=32;var Ke;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ke||(Ke={}));function gs(e){return e>=jt.ZERO&&e<=jt.NINE}function s1(e){return e>=jt.UPPER_A&&e<=jt.UPPER_F||e>=jt.LOWER_A&&e<=jt.LOWER_F}function o1(e){return e>=jt.UPPER_A&&e<=jt.UPPER_Z||e>=jt.LOWER_A&&e<=jt.LOWER_Z||gs(e)}function a1(e){return e===jt.EQUALS||o1(e)}var Mt;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Mt||(Mt={}));var Ge;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ge||(Ge={}));class u1{constructor(t,r,n){this.decodeTree=t,this.emitCodePoint=r,this.errors=n,this.state=Mt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ge.Strict}startEntity(t){this.decodeMode=t,this.state=Mt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case Mt.EntityStart:return t.charCodeAt(r)===jt.NUM?(this.state=Mt.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=Mt.NamedEntity,this.stateNamedEntity(t,r));case Mt.NumericStart:return this.stateNumericStart(t,r);case Mt.NumericDecimal:return this.stateNumericDecimal(t,r);case Mt.NumericHex:return this.stateNumericHex(t,r);case Mt.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|i1)===jt.LOWER_X?(this.state=Mt.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=Mt.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,n,i){if(r!==n){const s=n-r;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(r,s),i),this.consumed+=s}}stateNumericHex(t,r){const n=r;for(;r<t.length;){const i=t.charCodeAt(r);if(gs(i)||s1(i))r+=1;else return this.addToNumericResult(t,n,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,n,r,16),-1}stateNumericDecimal(t,r){const n=r;for(;r<t.length;){const i=t.charCodeAt(r);if(gs(i))r+=1;else return this.addToNumericResult(t,n,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,n,r,10),-1}emitNumericEntity(t,r){var n;if(this.consumed<=r)return(n=this.errors)===null||n===void 0||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===jt.SEMI)this.consumed+=1;else if(this.decodeMode===Ge.Strict)return 0;return this.emitCodePoint(n1(this.result),this.consumed),this.errors&&(t!==jt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:n}=this;let i=n[this.treeIndex],s=(i&Ke.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const o=t.charCodeAt(r);if(this.treeIndex=c1(n,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ge.Attribute&&(s===0||a1(o))?0:this.emitNotTerminatedNamedEntity();if(i=n[this.treeIndex],s=(i&Ke.VALUE_LENGTH)>>14,s!==0){if(o===jt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Ge.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:n}=this,i=(n[r]&Ke.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,n){const{decodeTree:i}=this;return this.emitCodePoint(r===1?i[t]&~Ke.VALUE_LENGTH:i[t+1],n),r===3&&this.emitCodePoint(i[t+2],n),n}end(){var t;switch(this.state){case Mt.NamedEntity:return this.result!==0&&(this.decodeMode!==Ge.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Mt.NumericDecimal:return this.emitNumericEntity(0,2);case Mt.NumericHex:return this.emitNumericEntity(0,3);case Mt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Mt.EntityStart:return 0}}}function Sh(e){let t="";const r=new u1(e,n=>t+=r1(n));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),r.startEntity(s);const c=r.write(i,a+1);if(c<0){o=a+r.end();break}o=a+c,a=c===0?o+1:o}const u=t+i.slice(o);return t="",u}}function c1(e,t,r,n){const i=(t&Ke.BRANCH_LENGTH)>>7,s=t&Ke.JUMP_TABLE;if(i===0)return s!==0&&n===s?r:-1;if(s){const u=n-s;return u<0||u>=i?-1:e[r+u]-1}let o=r,a=o+i-1;for(;o<=a;){const u=o+a>>>1,c=e[u];if(c<n)o=u+1;else if(c>n)a=u-1;else return e[u+i]}return-1}const l1=Sh(Qp);Sh(t1);function Ch(e,t=Ge.Legacy){return l1(e,t)}function h1(e){return Object.prototype.toString.call(e)}function Vs(e){return h1(e)==="[object String]"}const f1=Object.prototype.hasOwnProperty;function d1(e,t){return f1.call(e,t)}function ui(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){e[n]=r[n]})}}),e}function Dh(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))}function Ws(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Xn(e){if(e>65535){e-=65536;const t=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(t,r)}return String.fromCharCode(e)}const Th=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,p1=/&([a-z#][a-z0-9]{1,31});/gi,m1=new RegExp(Th.source+"|"+p1.source,"gi"),g1=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function b1(e,t){if(t.charCodeAt(0)===35&&g1.test(t)){const n=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Ws(n)?Xn(n):e}const r=Ch(e);return r!==e?r:e}function _1(e){return e.indexOf("\\")<0?e:e.replace(Th,"$1")}function Br(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(m1,function(t,r,n){return r||b1(t,n)})}const y1=/[&<>"]/,w1=/[&<>"]/g,v1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function x1(e){return v1[e]}function Xe(e){return y1.test(e)?e.replace(w1,x1):e}const k1=/[.?*+^$[\]\\(){}|-]/g;function E1(e){return e.replace(k1,"\\$&")}function Et(e){switch(e){case 9:case 32:return!0}return!1}function un(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function cn(e){return qs.test(e)||Eh.test(e)}function ln(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function ci(e){return e=e.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}const A1={mdurl:Jp,ucmicro:Xp},S1=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Dh,assign:ui,escapeHtml:Xe,escapeRE:E1,fromCodePoint:Xn,has:d1,isMdAsciiPunct:ln,isPunctChar:cn,isSpace:Et,isString:Vs,isValidEntityCode:Ws,isWhiteSpace:un,lib:A1,normalizeReference:ci,unescapeAll:Br,unescapeMd:_1},Symbol.toStringTag,{value:"Module"}));function C1(e,t,r){let n,i,s,o;const a=e.posMax,u=e.pos;for(e.pos=t+1,n=1;e.pos<a;){if(s=e.src.charCodeAt(e.pos),s===93&&(n--,n===0)){i=!0;break}if(o=e.pos,e.md.inline.skipToken(e),s===91){if(o===e.pos-1)n++;else if(r)return e.pos=u,-1}}let c=-1;return i&&(c=e.pos),e.pos=u,c}function D1(e,t,r){let n,i=t;const s={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<r;){if(n=e.charCodeAt(i),n===10||n===60)return s;if(n===62)return s.pos=i+1,s.str=Br(e.slice(t+1,i)),s.ok=!0,s;if(n===92&&i+1<r){i+=2;continue}i++}return s}let o=0;for(;i<r&&(n=e.charCodeAt(i),!(n===32||n<32||n===127));){if(n===92&&i+1<r){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(n===40&&(o++,o>32))return s;if(n===41){if(o===0)break;o--}i++}return t===i||o!==0||(s.str=Br(e.slice(t,i)),s.pos=i,s.ok=!0),s}function T1(e,t,r,n){let i,s=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(n)o.str=n.str,o.marker=n.marker;else{if(s>=r)return o;let a=e.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;t++,s++,a===40&&(a=41),o.marker=a}for(;s<r;){if(i=e.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=Br(e.slice(t,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<r&&s++,s++}return o.can_continue=!0,o.str+=Br(e.slice(t,s)),o}const F1=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:D1,parseLinkLabel:C1,parseLinkTitle:T1},Symbol.toStringTag,{value:"Module"})),ve={};ve.code_inline=function(e,t,r,n,i){const s=e[t];return"<code"+i.renderAttrs(s)+">"+Xe(s.content)+"</code>"};ve.code_block=function(e,t,r,n,i){const s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+Xe(e[t].content)+`</code></pre>
`};ve.fence=function(e,t,r,n,i){const s=e[t],o=s.info?Br(s.info).trim():"";let a="",u="";if(o){const l=o.split(/(\s+)/g);a=l[0],u=l.slice(2).join("")}let c;if(r.highlight?c=r.highlight(s.content,a,u)||Xe(s.content):c=Xe(s.content),c.indexOf("<pre")===0)return c+`
`;if(o){const l=s.attrIndex("class"),f=s.attrs?s.attrs.slice():[];l<0?f.push(["class",r.langPrefix+a]):(f[l]=f[l].slice(),f[l][1]+=" "+r.langPrefix+a);const h={attrs:f};return`<pre><code${i.renderAttrs(h)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${c}</code></pre>
`};ve.image=function(e,t,r,n,i){const s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,r,n),i.renderToken(e,t,r)};ve.hardbreak=function(e,t,r){return r.xhtmlOut?`<br />
`:`<br>
`};ve.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};ve.text=function(e,t){return Xe(e[t].content)};ve.html_block=function(e,t){return e[t].content};ve.html_inline=function(e,t){return e[t].content};function $r(){this.rules=ui({},ve)}$r.prototype.renderAttrs=function(t){let r,n,i;if(!t.attrs)return"";for(i="",r=0,n=t.attrs.length;r<n;r++)i+=" "+Xe(t.attrs[r][0])+'="'+Xe(t.attrs[r][1])+'"';return i};$r.prototype.renderToken=function(t,r,n){const i=t[r];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&r&&t[r-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&n.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&r+1<t.length)){const a=t[r+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};$r.prototype.renderInline=function(e,t,r){let n="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;typeof i[a]<"u"?n+=i[a](e,s,t,r,this):n+=this.renderToken(e,s,t)}return n};$r.prototype.renderInlineAsText=function(e,t,r){let n="";for(let i=0,s=e.length;i<s;i++)switch(e[i].type){case"text":n+=e[i].content;break;case"image":n+=this.renderInlineAsText(e[i].children,t,r);break;case"html_inline":case"html_block":n+=e[i].content;break;case"softbreak":case"hardbreak":n+=`
`;break}return n};$r.prototype.render=function(e,t,r){let n="";const i=this.rules;for(let s=0,o=e.length;s<o;s++){const a=e[s].type;a==="inline"?n+=this.renderInline(e[s].children,t,r):typeof i[a]<"u"?n+=i[a](e,s,t,r,this):n+=this.renderToken(e,s,t,r)}return n};function Gt(){this.__rules__=[],this.__cache__=null}Gt.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Gt.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){t.indexOf(n)<0&&t.push(n)})}),e.__cache__={},t.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||e.__cache__[r].push(n.fn))})})};Gt.prototype.at=function(e,t,r){const n=this.__find__(e),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Gt.prototype.before=function(e,t,r,n){const i=this.__find__(e),s=n||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:r,alt:s.alt||[]}),this.__cache__=null};Gt.prototype.after=function(e,t,r,n){const i=this.__find__(e),s=n||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:r,alt:s.alt||[]}),this.__cache__=null};Gt.prototype.push=function(e,t,r){const n=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null};Gt.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(n){const i=this.__find__(n);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Gt.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(e,t)};Gt.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(n){const i=this.__find__(n);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Gt.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function he(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}he.prototype.attrIndex=function(t){if(!this.attrs)return-1;const r=this.attrs;for(let n=0,i=r.length;n<i;n++)if(r[n][0]===t)return n;return-1};he.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};he.prototype.attrSet=function(t,r){const n=this.attrIndex(t),i=[t,r];n<0?this.attrPush(i):this.attrs[n]=i};he.prototype.attrGet=function(t){const r=this.attrIndex(t);let n=null;return r>=0&&(n=this.attrs[r][1]),n};he.prototype.attrJoin=function(t,r){const n=this.attrIndex(t);n<0?this.attrPush([t,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};function Fh(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}Fh.prototype.Token=he;const O1=/\r\n?|\n/g,I1=/\0/g;function P1(e){let t;t=e.src.replace(O1,`
`),t=t.replace(I1,"�"),e.src=t}function L1(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function R1(e){const t=e.tokens;for(let r=0,n=t.length;r<n;r++){const i=t[r];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function B1(e){return/^<a[>\s]/i.test(e)}function M1(e){return/^<\/a\s*>/i.test(e)}function N1(e){const t=e.tokens;if(e.md.options.linkify)for(let r=0,n=t.length;r<n;r++){if(t[r].type!=="inline"||!e.md.linkify.pretest(t[r].content))continue;let i=t[r].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(B1(a.content)&&s>0&&s--,M1(a.content)&&s++),!(s>0)&&a.type==="text"&&e.md.linkify.test(a.content)){const u=a.content;let c=e.md.linkify.match(u);const l=[];let f=a.level,h=0;c.length>0&&c[0].index===0&&o>0&&i[o-1].type==="text_special"&&(c=c.slice(1));for(let d=0;d<c.length;d++){const p=c[d].url,m=e.md.normalizeLink(p);if(!e.md.validateLink(m))continue;let g=c[d].text;c[d].schema?c[d].schema==="mailto:"&&!/^mailto:/i.test(g)?g=e.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=e.md.normalizeLinkText(g):g=e.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const y=c[d].index;if(y>h){const v=new e.Token("text","",0);v.content=u.slice(h,y),v.level=f,l.push(v)}const _=new e.Token("link_open","a",1);_.attrs=[["href",m]],_.level=f++,_.markup="linkify",_.info="auto",l.push(_);const b=new e.Token("text","",0);b.content=g,b.level=f,l.push(b);const w=new e.Token("link_close","a",-1);w.level=--f,w.markup="linkify",w.info="auto",l.push(w),h=c[d].lastIndex}if(h<u.length){const d=new e.Token("text","",0);d.content=u.slice(h),d.level=f,l.push(d)}t[r].children=i=Dh(i,o,l)}}}}const Oh=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,j1=/\((c|tm|r)\)/i,$1=/\((c|tm|r)\)/ig,z1={c:"©",r:"®",tm:"™"};function U1(e,t){return z1[t.toLowerCase()]}function H1(e){let t=0;for(let r=e.length-1;r>=0;r--){const n=e[r];n.type==="text"&&!t&&(n.content=n.content.replace($1,U1)),n.type==="link_open"&&n.info==="auto"&&t--,n.type==="link_close"&&n.info==="auto"&&t++}}function q1(e){let t=0;for(let r=e.length-1;r>=0;r--){const n=e[r];n.type==="text"&&!t&&Oh.test(n.content)&&(n.content=n.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),n.type==="link_open"&&n.info==="auto"&&t--,n.type==="link_close"&&n.info==="auto"&&t++}}function V1(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(j1.test(e.tokens[t].content)&&H1(e.tokens[t].children),Oh.test(e.tokens[t].content)&&q1(e.tokens[t].children))}const W1=/['"]/,pa=/['"]/g,ma="’";function Fn(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}function G1(e,t){let r;const n=[];for(let i=0;i<e.length;i++){const s=e[i],o=e[i].level;for(r=n.length-1;r>=0&&!(n[r].level<=o);r--);if(n.length=r+1,s.type!=="text")continue;let a=s.content,u=0,c=a.length;t:for(;u<c;){pa.lastIndex=u;const l=pa.exec(a);if(!l)break;let f=!0,h=!0;u=l.index+1;const d=l[0]==="'";let p=32;if(l.index-1>=0)p=a.charCodeAt(l.index-1);else for(r=i-1;r>=0&&!(e[r].type==="softbreak"||e[r].type==="hardbreak");r--)if(e[r].content){p=e[r].content.charCodeAt(e[r].content.length-1);break}let m=32;if(u<c)m=a.charCodeAt(u);else for(r=i+1;r<e.length&&!(e[r].type==="softbreak"||e[r].type==="hardbreak");r++)if(e[r].content){m=e[r].content.charCodeAt(0);break}const g=ln(p)||cn(String.fromCharCode(p)),y=ln(m)||cn(String.fromCharCode(m)),_=un(p),b=un(m);if(b?f=!1:y&&(_||g||(f=!1)),_?h=!1:g&&(b||y||(h=!1)),m===34&&l[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=g,h=y),!f&&!h){d&&(s.content=Fn(s.content,l.index,ma));continue}if(h)for(r=n.length-1;r>=0;r--){let w=n[r];if(n[r].level<o)break;if(w.single===d&&n[r].level===o){w=n[r];let v,S;d?(v=t.md.options.quotes[2],S=t.md.options.quotes[3]):(v=t.md.options.quotes[0],S=t.md.options.quotes[1]),s.content=Fn(s.content,l.index,S),e[w.token].content=Fn(e[w.token].content,w.pos,v),u+=S.length-1,w.token===i&&(u+=v.length-1),a=s.content,c=a.length,n.length=r;continue t}}f?n.push({token:i,pos:l.index,single:d,level:o}):h&&d&&(s.content=Fn(s.content,l.index,ma))}}}function Z1(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!W1.test(e.tokens[t].content)||G1(e.tokens[t].children,e)}function K1(e){let t,r;const n=e.tokens,i=n.length;for(let s=0;s<i;s++){if(n[s].type!=="inline")continue;const o=n[s].children,a=o.length;for(t=0;t<a;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=r=0;t<a;t++)o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==r&&(o[r]=o[t]),r++);t!==r&&(o.length=r)}}const Fi=[["normalize",P1],["block",L1],["inline",R1],["linkify",N1],["replacements",V1],["smartquotes",Z1],["text_join",K1]];function Gs(){this.ruler=new Gt;for(let e=0;e<Fi.length;e++)this.ruler.push(Fi[e][0],Fi[e][1])}Gs.prototype.process=function(e){const t=this.ruler.getRules("");for(let r=0,n=t.length;r<n;r++)t[r](e)};Gs.prototype.State=Fh;function xe(e,t,r,n){this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,u=0,c=i.length,l=!1;o<c;o++){const f=i.charCodeAt(o);if(!l)if(Et(f)){a++,f===9?u+=4-u%4:u++;continue}else l=!0;(f===10||o===c-1)&&(f!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(u),this.bsCount.push(0),l=!1,a=0,u=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}xe.prototype.push=function(e,t,r){const n=new he(e,t,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};xe.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};xe.prototype.skipEmptyLines=function(t){for(let r=this.lineMax;t<r&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};xe.prototype.skipSpaces=function(t){for(let r=this.src.length;t<r;t++){const n=this.src.charCodeAt(t);if(!Et(n))break}return t};xe.prototype.skipSpacesBack=function(t,r){if(t<=r)return t;for(;t>r;)if(!Et(this.src.charCodeAt(--t)))return t+1;return t};xe.prototype.skipChars=function(t,r){for(let n=this.src.length;t<n&&this.src.charCodeAt(t)===r;t++);return t};xe.prototype.skipCharsBack=function(t,r,n){if(t<=n)return t;for(;t>n;)if(r!==this.src.charCodeAt(--t))return t+1;return t};xe.prototype.getLines=function(t,r,n,i){if(t>=r)return"";const s=new Array(r-t);for(let o=0,a=t;a<r;a++,o++){let u=0;const c=this.bMarks[a];let l=c,f;for(a+1<r||i?f=this.eMarks[a]+1:f=this.eMarks[a];l<f&&u<n;){const h=this.src.charCodeAt(l);if(Et(h))h===9?u+=4-(u+this.bsCount[a])%4:u++;else if(l-c<this.tShift[a])u++;else break;l++}u>n?s[o]=new Array(u-n+1).join(" ")+this.src.slice(l,f):s[o]=this.src.slice(l,f)}return s.join("")};xe.prototype.Token=he;const J1=65536;function Oi(e,t){const r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.slice(r,n)}function ga(e){const t=[],r=e.length;let n=0,i=e.charCodeAt(n),s=!1,o=0,a="";for(;n<r;)i===124&&(s?(a+=e.substring(o,n-1),o=n):(t.push(a+e.substring(o,n)),a="",o=n+1)),s=i===92,n++,i=e.charCodeAt(n);return t.push(a+e.substring(o)),t}function Y1(e,t,r,n){if(t+2>r)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let s=e.bMarks[i]+e.tShift[i];if(s>=e.eMarks[i])return!1;const o=e.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=e.eMarks[i])return!1;const a=e.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!Et(a)||o===45&&Et(a))return!1;for(;s<e.eMarks[i];){const w=e.src.charCodeAt(s);if(w!==124&&w!==45&&w!==58&&!Et(w))return!1;s++}let u=Oi(e,t+1),c=u.split("|");const l=[];for(let w=0;w<c.length;w++){const v=c[w].trim();if(!v){if(w===0||w===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;v.charCodeAt(v.length-1)===58?l.push(v.charCodeAt(0)===58?"center":"right"):v.charCodeAt(0)===58?l.push("left"):l.push("")}if(u=Oi(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=ga(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const f=c.length;if(f===0||f!==l.length)return!1;if(n)return!0;const h=e.parentType;e.parentType="table";const d=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m;const g=e.push("thead_open","thead",1);g.map=[t,t+1];const y=e.push("tr_open","tr",1);y.map=[t,t+1];for(let w=0;w<c.length;w++){const v=e.push("th_open","th",1);l[w]&&(v.attrs=[["style","text-align:"+l[w]]]);const S=e.push("inline","",0);S.content=c[w].trim(),S.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,b=0;for(i=t+2;i<r&&!(e.sCount[i]<e.blkIndent);i++){let w=!1;for(let S=0,E=d.length;S<E;S++)if(d[S](e,i,r,!0)){w=!0;break}if(w||(u=Oi(e,i).trim(),!u)||e.sCount[i]-e.blkIndent>=4||(c=ga(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),b+=f-c.length,b>J1))break;if(i===t+2){const S=e.push("tbody_open","tbody",1);S.map=_=[t+2,0]}const v=e.push("tr_open","tr",1);v.map=[i,i+1];for(let S=0;S<f;S++){const E=e.push("td_open","td",1);l[S]&&(E.attrs=[["style","text-align:"+l[S]]]);const T=e.push("inline","",0);T.content=c[S]?c[S].trim():"",T.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=i),e.push("table_close","table",-1),m[1]=i,e.parentType=h,e.line=i,!0}function X1(e,t,r){if(e.sCount[t]-e.blkIndent<4)return!1;let n=t+1,i=n;for(;n<r;){if(e.isEmpty(n)){n++;continue}if(e.sCount[n]-e.blkIndent>=4){n++,i=n;continue}break}e.line=i;const s=e.push("code_block","code",0);return s.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,s.map=[t,e.line],!0}function Q1(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>s)return!1;const o=e.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=e.skipChars(i,o);let u=i-a;if(u<3)return!1;const c=e.src.slice(a,i),l=e.src.slice(i,s);if(o===96&&l.indexOf(String.fromCharCode(o))>=0)return!1;if(n)return!0;let f=t,h=!1;for(;f++,!(f>=r||(i=a=e.bMarks[f]+e.tShift[f],s=e.eMarks[f],i<s&&e.sCount[f]<e.blkIndent));)if(e.src.charCodeAt(i)===o&&!(e.sCount[f]-e.blkIndent>=4)&&(i=e.skipChars(i,o),!(i-a<u)&&(i=e.skipSpaces(i),!(i<s)))){h=!0;break}u=e.sCount[t],e.line=f+(h?1:0);const d=e.push("fence","code",0);return d.info=l,d.content=e.getLines(t+1,f,u,!0),d.markup=c,d.map=[t,e.line],!0}function tm(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(n)return!0;const a=[],u=[],c=[],l=[],f=e.md.block.ruler.getRules("blockquote"),h=e.parentType;e.parentType="blockquote";let d=!1,p;for(p=t;p<r;p++){const b=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],s=e.eMarks[p],i>=s)break;if(e.src.charCodeAt(i++)===62&&!b){let v=e.sCount[p]+1,S,E;e.src.charCodeAt(i)===32?(i++,v++,E=!1,S=!0):e.src.charCodeAt(i)===9?(S=!0,(e.bsCount[p]+v)%4===3?(i++,v++,E=!1):E=!0):S=!1;let T=v;for(a.push(e.bMarks[p]),e.bMarks[p]=i;i<s;){const I=e.src.charCodeAt(i);if(Et(I))I===9?T+=4-(T+e.bsCount[p]+(E?1:0))%4:T++;else break;i++}d=i>=s,u.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(S?1:0),c.push(e.sCount[p]),e.sCount[p]=T-v,l.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(d)break;let w=!1;for(let v=0,S=f.length;v<S;v++)if(f[v](e,p,r,!0)){w=!0;break}if(w){e.lineMax=p,e.blkIndent!==0&&(a.push(e.bMarks[p]),u.push(e.bsCount[p]),l.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}a.push(e.bMarks[p]),u.push(e.bsCount[p]),l.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const y=[t,0];g.map=y,e.md.block.tokenize(e,t,p);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=o,e.parentType=h,y[1]=e.line;for(let b=0;b<l.length;b++)e.bMarks[b+t]=a[b],e.tShift[b+t]=l[b],e.sCount[b+t]=c[b],e.bsCount[b+t]=u[b];return e.blkIndent=m,!0}function em(e,t,r,n){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const c=e.src.charCodeAt(s++);if(c!==o&&!Et(c))return!1;c===o&&a++}if(a<3)return!1;if(n)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(a+1).join(String.fromCharCode(o)),!0}function ba(e,t){const r=e.eMarks[t];let n=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(n++);if(i!==42&&i!==45&&i!==43)return-1;if(n<r){const s=e.src.charCodeAt(n);if(!Et(s))return-1}return n}function _a(e,t){const r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];let i=r;if(i+1>=n)return-1;let s=e.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=n)return-1;if(s=e.src.charCodeAt(i++),s>=48&&s<=57){if(i-r>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<n&&(s=e.src.charCodeAt(i),!Et(s))?-1:i}function rm(e,t){const r=e.level+2;for(let n=t+2,i=e.tokens.length-2;n<i;n++)e.tokens[n].level===r&&e.tokens[n].type==="paragraph_open"&&(e.tokens[n+2].hidden=!0,e.tokens[n].hidden=!0,n+=2)}function nm(e,t,r,n){let i,s,o,a,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let l=!1;n&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(l=!0);let f,h,d;if((d=_a(e,u))>=0){if(f=!0,o=e.bMarks[u]+e.tShift[u],h=Number(e.src.slice(o,d-1)),l&&h!==1)return!1}else if((d=ba(e,u))>=0)f=!1;else return!1;if(l&&e.skipSpaces(d)>=e.eMarks[u])return!1;if(n)return!0;const p=e.src.charCodeAt(d-1),m=e.tokens.length;f?(a=e.push("ordered_list_open","ol",1),h!==1&&(a.attrs=[["start",h]])):a=e.push("bullet_list_open","ul",1);const g=[u,0];a.map=g,a.markup=String.fromCharCode(p);let y=!1;const _=e.md.block.ruler.getRules("list"),b=e.parentType;for(e.parentType="list";u<r;){s=d,i=e.eMarks[u];const w=e.sCount[u]+d-(e.bMarks[u]+e.tShift[u]);let v=w;for(;s<i;){const O=e.src.charCodeAt(s);if(O===9)v+=4-(v+e.bsCount[u])%4;else if(O===32)v++;else break;s++}const S=s;let E;S>=i?E=1:E=v-w,E>4&&(E=1);const T=w+E;a=e.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const I=[u,0];a.map=I,f&&(a.info=e.src.slice(o,d-1));const P=e.tight,B=e.tShift[u],D=e.sCount[u],k=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=T,e.tight=!0,e.tShift[u]=S-e.bMarks[u],e.sCount[u]=v,S>=i&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,u,r,!0),(!e.tight||y)&&(c=!1),y=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=k,e.tShift[u]=B,e.sCount[u]=D,e.tight=P,a=e.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),u=e.line,I[1]=u,u>=r||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let x=!1;for(let O=0,A=_.length;O<A;O++)if(_[O](e,u,r,!0)){x=!0;break}if(x)break;if(f){if(d=_a(e,u),d<0)break;o=e.bMarks[u]+e.tShift[u]}else if(d=ba(e,u),d<0)break;if(p!==e.src.charCodeAt(d-1))break}return f?a=e.push("ordered_list_close","ol",-1):a=e.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),g[1]=u,e.line=u,e.parentType=b,c&&rm(e,m),!0}function im(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function a(_){const b=e.lineMax;if(_>=b||e.isEmpty(_))return null;let w=!1;if(e.sCount[_]-e.blkIndent>3&&(w=!0),e.sCount[_]<0&&(w=!0),!w){const E=e.md.block.ruler.getRules("reference"),T=e.parentType;e.parentType="reference";let I=!1;for(let P=0,B=E.length;P<B;P++)if(E[P](e,_,b,!0)){I=!0;break}if(e.parentType=T,I)return null}const v=e.bMarks[_]+e.tShift[_],S=e.eMarks[_];return e.src.slice(v,S+1)}let u=e.src.slice(i,s+1);s=u.length;let c=-1;for(i=1;i<s;i++){const _=u.charCodeAt(i);if(_===91)return!1;if(_===93){c=i;break}else if(_===10){const b=a(o);b!==null&&(u+=b,s=u.length,o++)}else if(_===92&&(i++,i<s&&u.charCodeAt(i)===10)){const b=a(o);b!==null&&(u+=b,s=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(i=c+2;i<s;i++){const _=u.charCodeAt(i);if(_===10){const b=a(o);b!==null&&(u+=b,s=u.length,o++)}else if(!Et(_))break}const l=e.md.helpers.parseLinkDestination(u,i,s);if(!l.ok)return!1;const f=e.md.normalizeLink(l.str);if(!e.md.validateLink(f))return!1;i=l.pos;const h=i,d=o,p=i;for(;i<s;i++){const _=u.charCodeAt(i);if(_===10){const b=a(o);b!==null&&(u+=b,s=u.length,o++)}else if(!Et(_))break}let m=e.md.helpers.parseLinkTitle(u,i,s);for(;m.can_continue;){const _=a(o);if(_===null)break;u+=_,i=s,s=u.length,o++,m=e.md.helpers.parseLinkTitle(u,i,s,m)}let g;for(i<s&&p!==i&&m.ok?(g=m.str,i=m.pos):(g="",i=h,o=d);i<s;){const _=u.charCodeAt(i);if(!Et(_))break;i++}if(i<s&&u.charCodeAt(i)!==10&&g)for(g="",i=h,o=d;i<s;){const _=u.charCodeAt(i);if(!Et(_))break;i++}if(i<s&&u.charCodeAt(i)!==10)return!1;const y=ci(u.slice(1,c));return y?(n||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:g,href:f}),e.line=o),!0):!1}const sm=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],om="[a-zA-Z_:][a-zA-Z0-9:._-]*",am="[^\"'=<>`\\x00-\\x20]+",um="'[^']*'",cm='"[^"]*"',lm="(?:"+am+"|"+um+"|"+cm+")",hm="(?:\\s+"+om+"(?:\\s*=\\s*"+lm+")?)",Ih="<[A-Za-z][A-Za-z0-9\\-]*"+hm+"*\\s*\\/?>",Ph="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",fm="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",dm="<[?][\\s\\S]*?[?]>",pm="<![A-Za-z][^>]*>",mm="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",gm=new RegExp("^(?:"+Ih+"|"+Ph+"|"+fm+"|"+dm+"|"+pm+"|"+mm+")"),bm=new RegExp("^(?:"+Ih+"|"+Ph+")"),kr=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+sm.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(bm.source+"\\s*$"),/^$/,!1]];function _m(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let o=e.src.slice(i,s),a=0;for(;a<kr.length&&!kr[a][0].test(o);a++);if(a===kr.length)return!1;if(n)return kr[a][2];let u=t+1;if(!kr[a][1].test(o)){for(;u<r&&!(e.sCount[u]<e.blkIndent);u++)if(i=e.bMarks[u]+e.tShift[u],s=e.eMarks[u],o=e.src.slice(i,s),kr[a][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function ym(e,t,r,n){let i=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=e.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=e.src.charCodeAt(++i);if(a>6||i<s&&!Et(o))return!1;if(n)return!0;s=e.skipSpacesBack(s,i);const u=e.skipCharsBack(s,35,i);u>i&&Et(e.src.charCodeAt(u-1))&&(s=u),e.line=t+1;const c=e.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[t,e.line];const l=e.push("inline","",0);l.content=e.src.slice(i,s).trim(),l.map=[t,e.line],l.children=[];const f=e.push("heading_close","h"+String(a),-1);return f.markup="########".slice(0,a),!0}function wm(e,t,r){const n=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let s=0,o,a=t+1;for(;a<r&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3)continue;if(e.sCount[a]>=e.blkIndent){let d=e.bMarks[a]+e.tShift[a];const p=e.eMarks[a];if(d<p&&(o=e.src.charCodeAt(d),(o===45||o===61)&&(d=e.skipChars(d,o),d=e.skipSpaces(d),d>=p))){s=o===61?1:2;break}}if(e.sCount[a]<0)continue;let h=!1;for(let d=0,p=n.length;d<p;d++)if(n[d](e,a,r,!0)){h=!0;break}if(h)break}if(!s)return!1;const u=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a+1;const c=e.push("heading_open","h"+String(s),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const l=e.push("inline","",0);l.content=u,l.map=[t,e.line-1],l.children=[];const f=e.push("heading_close","h"+String(s),-1);return f.markup=String.fromCharCode(o),e.parentType=i,!0}function vm(e,t,r){const n=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let s=t+1;for(e.parentType="paragraph";s<r&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)continue;let c=!1;for(let l=0,f=n.length;l<f;l++)if(n[l](e,s,r,!0)){c=!0;break}if(c)break}const o=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s;const a=e.push("paragraph_open","p",1);a.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const On=[["table",Y1,["paragraph","reference"]],["code",X1],["fence",Q1,["paragraph","reference","blockquote","list"]],["blockquote",tm,["paragraph","reference","blockquote","list"]],["hr",em,["paragraph","reference","blockquote","list"]],["list",nm,["paragraph","reference","blockquote"]],["reference",im],["html_block",_m,["paragraph","reference","blockquote"]],["heading",ym,["paragraph","reference","blockquote"]],["lheading",wm],["paragraph",vm]];function li(){this.ruler=new Gt;for(let e=0;e<On.length;e++)this.ruler.push(On[e][0],On[e][1],{alt:(On[e][2]||[]).slice()})}li.prototype.tokenize=function(e,t,r){const n=this.ruler.getRules(""),i=n.length,s=e.md.options.maxNesting;let o=t,a=!1;for(;o<r&&(e.line=o=e.skipEmptyLines(o),!(o>=r||e.sCount[o]<e.blkIndent));){if(e.level>=s){e.line=r;break}const u=e.line;let c=!1;for(let l=0;l<i;l++)if(c=n[l](e,o,r,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),o=e.line,o<r&&e.isEmpty(o)&&(a=!0,o++,e.line=o)}};li.prototype.parse=function(e,t,r,n){if(!e)return;const i=new this.State(e,t,r,n);this.tokenize(i,i.line,i.lineMax)};li.prototype.State=xe;function bn(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}bn.prototype.pushPending=function(){const e=new he("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};bn.prototype.push=function(e,t,r){this.pending&&this.pushPending();const n=new he(e,t,r);let i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};bn.prototype.scanDelims=function(e,t){const r=this.posMax,n=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let s=e;for(;s<r&&this.src.charCodeAt(s)===n;)s++;const o=s-e,a=s<r?this.src.charCodeAt(s):32,u=ln(i)||cn(String.fromCharCode(i)),c=ln(a)||cn(String.fromCharCode(a)),l=un(i),f=un(a),h=!f&&(!c||l||u),d=!l&&(!u||f||c);return{can_open:h&&(t||!d||u),can_close:d&&(t||!h||c),length:o}};bn.prototype.Token=he;function xm(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function km(e,t){let r=e.pos;for(;r<e.posMax&&!xm(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}const Em=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Am(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const r=e.pos,n=e.posMax;if(r+3>n||e.src.charCodeAt(r)!==58||e.src.charCodeAt(r+1)!==47||e.src.charCodeAt(r+2)!==47)return!1;const i=e.pending.match(Em);if(!i)return!1;const s=i[1],o=e.md.linkify.matchAtStart(e.src.slice(r-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const u=e.md.normalizeLink(a);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-s.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(a);const f=e.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return e.pos+=a.length-s.length,!0}function Sm(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==10)return!1;const n=e.pending.length-1,i=e.posMax;if(!t)if(n>=0&&e.pending.charCodeAt(n)===32)if(n>=1&&e.pending.charCodeAt(n-1)===32){let s=n-1;for(;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(r++;r<i&&Et(e.src.charCodeAt(r));)r++;return e.pos=r,!0}const Zs=[];for(let e=0;e<256;e++)Zs.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Zs[e.charCodeAt(0)]=1});function Cm(e,t){let r=e.pos;const n=e.posMax;if(e.src.charCodeAt(r)!==92||(r++,r>=n))return!1;let i=e.src.charCodeAt(r);if(i===10){for(t||e.push("hardbreak","br",0),r++;r<n&&(i=e.src.charCodeAt(r),!!Et(i));)r++;return e.pos=r,!0}let s=e.src[r];if(i>=55296&&i<=56319&&r+1<n){const a=e.src.charCodeAt(r+1);a>=56320&&a<=57343&&(s+=e.src[r+1],r++)}const o="\\"+s;if(!t){const a=e.push("text_special","",0);i<256&&Zs[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return e.pos=r+1,!0}function Dm(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==96)return!1;const i=r;r++;const s=e.posMax;for(;r<s&&e.src.charCodeAt(r)===96;)r++;const o=e.src.slice(i,r),a=o.length;if(e.backticksScanned&&(e.backticks[a]||0)<=i)return t||(e.pending+=o),e.pos+=a,!0;let u=r,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<s&&e.src.charCodeAt(u)===96;)u++;const l=u-c;if(l===a){if(!t){const f=e.push("code_inline","code",0);f.markup=o,f.content=e.src.slice(r,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[l]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=a,!0}function Tm(e,t){const r=e.pos,n=e.src.charCodeAt(r);if(t||n!==126)return!1;const i=e.scanDelims(e.pos,!0);let s=i.length;const o=String.fromCharCode(n);if(s<2)return!1;let a;s%2&&(a=e.push("text","",0),a.content=o,s--);for(let u=0;u<s;u+=2)a=e.push("text","",0),a.content=o+o,e.delimiters.push({marker:n,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function ya(e,t){let r;const n=[],i=t.length;for(let s=0;s<i;s++){const o=t[s];if(o.marker!==126||o.end===-1)continue;const a=t[o.end];r=e.tokens[o.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=e.tokens[a.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",e.tokens[a.token-1].type==="text"&&e.tokens[a.token-1].content==="~"&&n.push(a.token-1)}for(;n.length;){const s=n.pop();let o=s+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,s!==o&&(r=e.tokens[o],e.tokens[o]=e.tokens[s],e.tokens[s]=r)}}function Fm(e){const t=e.tokens_meta,r=e.tokens_meta.length;ya(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&ya(e,t[n].delimiters)}const Lh={tokenize:Tm,postProcess:Fm};function Om(e,t){const r=e.pos,n=e.src.charCodeAt(r);if(t||n!==95&&n!==42)return!1;const i=e.scanDelims(e.pos,n===42);for(let s=0;s<i.length;s++){const o=e.push("text","",0);o.content=String.fromCharCode(n),e.delimiters.push({marker:n,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function wa(e,t){const r=t.length;for(let n=r-1;n>=0;n--){const i=t[n];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=t[i.end],o=n>0&&t[n-1].end===i.end+1&&t[n-1].marker===i.marker&&t[n-1].token===i.token-1&&t[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),u=e.tokens[i.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?a+a:a,u.content="";const c=e.tokens[s.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?a+a:a,c.content="",o&&(e.tokens[t[n-1].token].content="",e.tokens[t[i.end+1].token].content="",n--)}}function Im(e){const t=e.tokens_meta,r=e.tokens_meta.length;wa(e,e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&wa(e,t[n].delimiters)}const Rh={tokenize:Om,postProcess:Im};function Pm(e,t){let r,n,i,s,o="",a="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const l=e.pos,f=e.posMax,h=e.pos+1,d=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&e.src.charCodeAt(p)===40){for(c=!1,p++;p<f&&(r=e.src.charCodeAt(p),!(!Et(r)&&r!==10));p++);if(p>=f)return!1;if(u=p,i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),i.ok){for(o=e.md.normalizeLink(i.str),e.md.validateLink(o)?p=i.pos:o="",u=p;p<f&&(r=e.src.charCodeAt(p),!(!Et(r)&&r!==10));p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<f&&u!==p&&i.ok)for(a=i.str,p=i.pos;p<f&&(r=e.src.charCodeAt(p),!(!Et(r)&&r!==10));p++);}(p>=f||e.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<f&&e.src.charCodeAt(p)===91?(u=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?n=e.src.slice(u,p++):p=d+1):p=d+1,n||(n=e.src.slice(h,d)),s=e.env.references[ci(n)],!s)return e.pos=l,!1;o=s.href,a=s.title}if(!t){e.pos=h,e.posMax=d;const m=e.push("link_open","a",1),g=[["href",o]];m.attrs=g,a&&g.push(["title",a]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=f,!0}function Lm(e,t){let r,n,i,s,o,a,u,c,l="";const f=e.pos,h=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const d=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(s=p+1,s<h&&e.src.charCodeAt(s)===40){for(s++;s<h&&(r=e.src.charCodeAt(s),!(!Et(r)&&r!==10));s++);if(s>=h)return!1;for(c=s,a=e.md.helpers.parseLinkDestination(e.src,s,e.posMax),a.ok&&(l=e.md.normalizeLink(a.str),e.md.validateLink(l)?s=a.pos:l=""),c=s;s<h&&(r=e.src.charCodeAt(s),!(!Et(r)&&r!==10));s++);if(a=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<h&&c!==s&&a.ok)for(u=a.str,s=a.pos;s<h&&(r=e.src.charCodeAt(s),!(!Et(r)&&r!==10));s++);else u="";if(s>=h||e.src.charCodeAt(s)!==41)return e.pos=f,!1;s++}else{if(typeof e.env.references>"u")return!1;if(s<h&&e.src.charCodeAt(s)===91?(c=s+1,s=e.md.helpers.parseLinkLabel(e,s),s>=0?i=e.src.slice(c,s++):s=p+1):s=p+1,i||(i=e.src.slice(d,p)),o=e.env.references[ci(i)],!o)return e.pos=f,!1;l=o.href,u=o.title}if(!t){n=e.src.slice(d,p);const m=[];e.md.inline.parse(n,e.md,e.env,m);const g=e.push("image","img",0),y=[["src",l],["alt",""]];g.attrs=y,g.children=m,g.content=n,u&&y.push(["title",u])}return e.pos=s,e.posMax=h,!0}const Rm=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Bm=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Mm(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==60)return!1;const n=e.pos,i=e.posMax;for(;;){if(++r>=i)return!1;const o=e.src.charCodeAt(r);if(o===60)return!1;if(o===62)break}const s=e.src.slice(n+1,r);if(Bm.test(s)){const o=e.md.normalizeLink(s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(s);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=s.length+2,!0}if(Rm.test(s)){const o=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(o))return!1;if(!t){const a=e.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(s);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=s.length+2,!0}return!1}function Nm(e){return/^<a[>\s]/i.test(e)}function jm(e){return/^<\/a\s*>/i.test(e)}function $m(e){const t=e|32;return t>=97&&t<=122}function zm(e,t){if(!e.md.options.html)return!1;const r=e.posMax,n=e.pos;if(e.src.charCodeAt(n)!==60||n+2>=r)return!1;const i=e.src.charCodeAt(n+1);if(i!==33&&i!==63&&i!==47&&!$m(i))return!1;const s=e.src.slice(n).match(gm);if(!s)return!1;if(!t){const o=e.push("html_inline","",0);o.content=s[0],Nm(o.content)&&e.linkLevel++,jm(o.content)&&e.linkLevel--}return e.pos+=s[0].length,!0}const Um=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Hm=/^&([a-z][a-z0-9]{1,31});/i;function qm(e,t){const r=e.pos,n=e.posMax;if(e.src.charCodeAt(r)!==38||r+1>=n)return!1;if(e.src.charCodeAt(r+1)===35){const s=e.src.slice(r).match(Um);if(s){if(!t){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=e.push("text_special","",0);a.content=Ws(o)?Xn(o):Xn(65533),a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}else{const s=e.src.slice(r).match(Hm);if(s){const o=Ch(s[0]);if(o!==s[0]){if(!t){const a=e.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return e.pos+=s[0].length,!0}}}return!1}function va(e){const t={},r=e.length;if(!r)return;let n=0,i=-2;const s=[];for(let o=0;o<r;o++){const a=e[o];if(s.push(0),(e[n].marker!==a.marker||i!==a.token-1)&&(n=o),i=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[a.marker][(a.open?3:0)+a.length%3];let c=n-s[n]-1,l=c;for(;c>u;c-=s[c]+1){const f=e[c];if(f.marker===a.marker&&f.open&&f.end<0){let h=!1;if((f.close||a.open)&&(f.length+a.length)%3===0&&(f.length%3!==0||a.length%3!==0)&&(h=!0),!h){const d=c>0&&!e[c-1].open?s[c-1]+1:0;s[o]=o-c+d,s[c]=d,a.open=!1,f.end=o,f.close=!1,l=-1,i=-2;break}}}l!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=l)}}function Vm(e){const t=e.tokens_meta,r=e.tokens_meta.length;va(e.delimiters);for(let n=0;n<r;n++)t[n]&&t[n].delimiters&&va(t[n].delimiters)}function Wm(e){let t,r,n=0;const i=e.tokens,s=e.tokens.length;for(t=r=0;t<s;t++)i[t].nesting<0&&n--,i[t].level=n,i[t].nesting>0&&n++,i[t].type==="text"&&t+1<s&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==r&&(i[r]=i[t]),r++);t!==r&&(i.length=r)}const Ii=[["text",km],["linkify",Am],["newline",Sm],["escape",Cm],["backticks",Dm],["strikethrough",Lh.tokenize],["emphasis",Rh.tokenize],["link",Pm],["image",Lm],["autolink",Mm],["html_inline",zm],["entity",qm]],Pi=[["balance_pairs",Vm],["strikethrough",Lh.postProcess],["emphasis",Rh.postProcess],["fragments_join",Wm]];function _n(){this.ruler=new Gt;for(let e=0;e<Ii.length;e++)this.ruler.push(Ii[e][0],Ii[e][1]);this.ruler2=new Gt;for(let e=0;e<Pi.length;e++)this.ruler2.push(Pi[e][0],Pi[e][1])}_n.prototype.skipToken=function(e){const t=e.pos,r=this.ruler.getRules(""),n=r.length,i=e.md.options.maxNesting,s=e.cache;if(typeof s[t]<"u"){e.pos=s[t];return}let o=!1;if(e.level<i){for(let a=0;a<n;a++)if(e.level++,o=r[a](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,s[t]=e.pos};_n.prototype.tokenize=function(e){const t=this.ruler.getRules(""),r=t.length,n=e.posMax,i=e.md.options.maxNesting;for(;e.pos<n;){const s=e.pos;let o=!1;if(e.level<i){for(let a=0;a<r;a++)if(o=t[a](e,!1),o){if(s>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=n)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};_n.prototype.parse=function(e,t,r,n){const i=new this.State(e,t,r,n);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};_n.prototype.State=bn;function Gm(e){const t={};e=e||{},t.src_Any=xh.source,t.src_Cc=kh.source,t.src_Z=Ah.source,t.src_P=qs.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const r="[><｜]";return t.src_pseudo_letter="(?:(?!"+r+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+r+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function bs(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(n){e[n]=r[n]})}),e}function hi(e){return Object.prototype.toString.call(e)}function Zm(e){return hi(e)==="[object String]"}function Km(e){return hi(e)==="[object Object]"}function Jm(e){return hi(e)==="[object RegExp]"}function xa(e){return hi(e)==="[object Function]"}function Ym(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Bh={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Xm(e){return Object.keys(e||{}).reduce(function(t,r){return t||Bh.hasOwnProperty(r)},!1)}const Qm={"http:":{validate:function(e,t,r){const n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){const n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){const n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},tg="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",eg="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function rg(e){e.__index__=-1,e.__text_cache__=""}function ng(e){return function(t,r){const n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}function ka(){return function(e,t){t.normalize(e)}}function Qn(e){const t=e.re=Gm(e.__opts__),r=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||r.push(tg),r.push(t.src_xn),t.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function s(a,u){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+u)}Object.keys(e.__schemas__).forEach(function(a){const u=e.__schemas__[a];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[a]=c,Km(u)){Jm(u.validate)?c.validate=ng(u.validate):xa(u.validate)?c.validate=u.validate:s(a,u),xa(u.normalize)?c.normalize=u.normalize:u.normalize?s(a,u):c.normalize=ka();return}if(Zm(u)){i.push(a);return}s(a,u)}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:ka()};const o=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(Ym).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),rg(e)}function ig(e,t){const r=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function _s(e,t){const r=new ig(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Xt(e,t){if(!(this instanceof Xt))return new Xt(e,t);t||Xm(e)&&(t=e,e={}),this.__opts__=bs({},Bh,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=bs({},Qm,e),this.__compiled__={},this.__tlds__=eg,this.__tlds_replaced__=!1,this.re={},Qn(this)}Xt.prototype.add=function(t,r){return this.__schemas__[t]=r,Qn(this),this};Xt.prototype.set=function(t){return this.__opts__=bs(this.__opts__,t),this};Xt.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let r,n,i,s,o,a,u,c,l;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(r=u.exec(t))!==null;)if(s=this.testSchemaAt(t,r[2],u.lastIndex),s){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=t.indexOf("@"),l>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};Xt.prototype.pretest=function(t){return this.re.pretest.test(t)};Xt.prototype.testSchemaAt=function(t,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(t,n,this):0};Xt.prototype.match=function(t){const r=[];let n=0;this.__index__>=0&&this.__text_cache__===t&&(r.push(_s(this,n)),n=this.__last_index__);let i=n?t.slice(n):t;for(;this.test(i);)r.push(_s(this,n)),i=i.slice(this.__last_index__),n+=this.__last_index__;return r.length?r:null};Xt.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const r=this.re.schema_at_start.exec(t);if(!r)return null;const n=this.testSchemaAt(t,r[2],r[0].length);return n?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n,_s(this,0)):null};Xt.prototype.tlds=function(t,r){return t=Array.isArray(t)?t:[t],r?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(n,i,s){return n!==s[i-1]}).reverse(),Qn(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Qn(this),this)};Xt.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Xt.prototype.onCompile=function(){};const Or=2147483647,ye=36,Ks=1,hn=26,sg=38,og=700,Mh=72,Nh=128,jh="-",ag=/^xn--/,ug=/[^\0-\x7F]/,cg=/[\x2E\u3002\uFF0E\uFF61]/g,lg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Li=ye-Ks,we=Math.floor,Ri=String.fromCharCode;function Ve(e){throw new RangeError(lg[e])}function hg(e,t){const r=[];let n=e.length;for(;n--;)r[n]=t(e[n]);return r}function $h(e,t){const r=e.split("@");let n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(cg,".");const i=e.split("."),s=hg(i,t).join(".");return n+s}function zh(e){const t=[];let r=0;const n=e.length;for(;r<n;){const i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){const s=e.charCodeAt(r++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),r--)}else t.push(i)}return t}const fg=e=>String.fromCodePoint(...e),dg=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ye},Ea=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Uh=function(e,t,r){let n=0;for(e=r?we(e/og):e>>1,e+=we(e/t);e>Li*hn>>1;n+=ye)e=we(e/Li);return we(n+(Li+1)*e/(e+sg))},Hh=function(e){const t=[],r=e.length;let n=0,i=Nh,s=Mh,o=e.lastIndexOf(jh);o<0&&(o=0);for(let a=0;a<o;++a)e.charCodeAt(a)>=128&&Ve("not-basic"),t.push(e.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){const u=n;for(let l=1,f=ye;;f+=ye){a>=r&&Ve("invalid-input");const h=dg(e.charCodeAt(a++));h>=ye&&Ve("invalid-input"),h>we((Or-n)/l)&&Ve("overflow"),n+=h*l;const d=f<=s?Ks:f>=s+hn?hn:f-s;if(h<d)break;const p=ye-d;l>we(Or/p)&&Ve("overflow"),l*=p}const c=t.length+1;s=Uh(n-u,c,u==0),we(n/c)>Or-i&&Ve("overflow"),i+=we(n/c),n%=c,t.splice(n++,0,i)}return String.fromCodePoint(...t)},qh=function(e){const t=[];e=zh(e);const r=e.length;let n=Nh,i=0,s=Mh;for(const u of e)u<128&&t.push(Ri(u));const o=t.length;let a=o;for(o&&t.push(jh);a<r;){let u=Or;for(const l of e)l>=n&&l<u&&(u=l);const c=a+1;u-n>we((Or-i)/c)&&Ve("overflow"),i+=(u-n)*c,n=u;for(const l of e)if(l<n&&++i>Or&&Ve("overflow"),l===n){let f=i;for(let h=ye;;h+=ye){const d=h<=s?Ks:h>=s+hn?hn:h-s;if(f<d)break;const p=f-d,m=ye-d;t.push(Ri(Ea(d+p%m,0))),f=we(p/m)}t.push(Ri(Ea(f,0))),s=Uh(i,c,a===o),i=0,++a}++i,++n}return t.join("")},pg=function(e){return $h(e,function(t){return ag.test(t)?Hh(t.slice(4).toLowerCase()):t})},mg=function(e){return $h(e,function(t){return ug.test(t)?"xn--"+qh(t):t})},Vh={version:"2.3.1",ucs2:{decode:zh,encode:fg},decode:Hh,encode:qh,toASCII:mg,toUnicode:pg},gg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},bg={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},_g={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},yg={default:gg,zero:bg,commonmark:_g},wg=/^(vbscript|javascript|file|data):/,vg=/^data:image\/(gif|png|jpeg|webp);/;function xg(e){const t=e.trim().toLowerCase();return wg.test(t)?vg.test(t):!0}const Wh=["http:","https:","mailto:"];function kg(e){const t=Hs(e,!0);if(t.hostname&&(!t.protocol||Wh.indexOf(t.protocol)>=0))try{t.hostname=Vh.toASCII(t.hostname)}catch{}return gn(Us(t))}function Eg(e){const t=Hs(e,!0);if(t.hostname&&(!t.protocol||Wh.indexOf(t.protocol)>=0))try{t.hostname=Vh.toUnicode(t.hostname)}catch{}return Rr(Us(t),Rr.defaultChars+"%")}function le(e,t){if(!(this instanceof le))return new le(e,t);t||Vs(e)||(t=e||{},e="default"),this.inline=new _n,this.block=new li,this.core=new Gs,this.renderer=new $r,this.linkify=new Xt,this.validateLink=xg,this.normalizeLink=kg,this.normalizeLinkText=Eg,this.utils=S1,this.helpers=ui({},F1),this.options={},this.configure(e),t&&this.set(t)}le.prototype.set=function(e){return ui(this.options,e),this};le.prototype.configure=function(e){const t=this;if(Vs(e)){const r=e;if(e=yg[r],!e)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this};le.prototype.enable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));const n=e.filter(function(i){return r.indexOf(i)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};le.prototype.disable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));const n=e.filter(function(i){return r.indexOf(i)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};le.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};le.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const r=new this.core.State(e,this,t);return this.core.process(r),r.tokens};le.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};le.prototype.parseInline=function(e,t){const r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens};le.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var Bi,Aa;function Ag(){if(Aa)return Bi;Aa=1;function e(t,r){r=r||{};let n=typeof r.externalClassName=="string"||r.externalClassName===null?r.externalClassName:"external-link",i=typeof r.internalClassName=="string"||r.internalClassName===null?r.internalClassName:null,s=Array.isArray(r.internalDomains)?r.internalDomains.map(d=>d.toLowerCase()):[],o=r.externalTarget||"_self",a=r.internalTarget||"_self",u=r.externalRel||null,c=r.internalRel||null;if(n===null&&i===null&&o==="_self"&&a==="_self"&&u===null&&c===null)return;function l(d){function p(m){if(m.children&&m.children.map(p),m.type==="link_open"){let g=m.attrGet("href"),y=f(g),_=y?i:n;if(_){let v=m.attrGet("class")||"";v!==""&&(_=v+" "+_),m.attrSet("class",_)}let b=y?a:o;b!=="_self"&&m.attrSet("target",b);let w=y?c:u;if(w){let v=m.attrGet("rel")||"";v!==""&&(w=v+" "+w),m.attrSet("rel",w)}}}d.tokens.map(p)}function f(d){let p=h(d);return p===null||s.indexOf(p)!==-1}function h(d){let p=d.split("//")[1];return p?(p=p.split("/")[0].toLowerCase(),p||null):null}t.core.ruler.push("external_links",l)}return Bi=e,Bi}var Sg=Ag();const _2=Nr(Sg),hr=Cr.room;Yt(null);const pt=xt({pub:Re("current-room",hr.pub),isRoot:Lt(()=>pt.pub==hr.pub),hosts:{},features:{},profile:{}});Of(()=>{const e=Tt();pt.pub==hr.pub?(pt.hosts=hr.hosts,pt.features=hr.features):(pt.features={},pt.hosts={},e.user(pt.pub).get("hosts").map().once((t,r)=>{pt.hosts[r]=t}),e.user(pt.pub).get("features").map().once((t,r)=>{pt.features[r]=t}))});function y2(e=pt.pub){const t=xt({pub:e,isFavourite:!1,isRoot:Lt(()=>e==hr.pub),hosts:{},features:{},profile:{}}),r=Tt(),{user:n}=br();return r.user(e).get("profile").map().on((i,s)=>{t.profile[s]=i}),r.user(e).get("hosts").map().once((i,s)=>{t.hosts[s]=i}),r.user(e).get("features").map().once((i,s)=>{t.features[s]=i}),r.user().get("rooms").get(`${e}@${n==null?void 0:n.pub}`).on(i=>{t.isFavourite=i}),{room:t,submitRoom:Dg,enterRoom:Tg,createRoom:Gh,leaveRoom:Fg,updateRoomProfile:Cg}}function Cg(e,t){var s,o;const r=Tt(),{user:n}=br();let i=(o=(s=pt.hosts)==null?void 0:s[n.pub])==null?void 0:o.profile;if(!i){console.warn("Profile certificate not found");return}r.user(pt.pub).get("profile").get(e).put(t,null,{opt:{cert:i}})}async function Gh({pair:e,name:t,featureList:r=Object.keys(Cr==null?void 0:Cr.features),publish:n=!0}={}){var h;const{user:i}=br();if(!e)return;const s=e.pub,o=await Yo({pair:e,list:[{tag:"profile",users:[i.pub]},{tag:"features",users:[i.pub]},{tag:"hosts",users:[i.pub]}]}),a=await Yo({pair:e,list:r.map(d=>({tag:d,personal:!0}))}),u=await i.encrypt(e),c=await i.encrypt(s),l={...Cr,relay:Dt.peer,room:{pub:e.pub,hosts:{[i.pub]:{enc:u,...o}},features:a}};console.log("COPY THIS ROOM INFO TO USE IT AS A ROOT",l,"STORE THIS KEY PAIR IN A SAFE PLACE",e);const f=Tt();await f.user().get("rooms").get(`${s}@${i.pub}`).put(!0).then(),await f.user().get("my_rooms").get(c).put(u).then(),await f.user(s).get("hosts").get(i.pub).put({enc:u,...o},null,{opt:{cert:o.hosts}}).then(),await f.user(s).get("features").put(a,null,{opt:{cert:o.features}}).then(),t&&await f.user(s).get("profile").put({name:t},null,{opt:{cert:o.profile}}).then(),n&&await f.user(pt.pub).get("rooms").get(`${s}@${i.pub}`).put(!0,null,{opt:{cert:(h=pt==null?void 0:pt.features)==null?void 0:h.rooms}}).then(),na(JSON.stringify(l),"application/json","gun.config.json"),na(JSON.stringify(e),"application/json",`room_${t||s}.webkey`)}async function w2(e,t){const r=await kt.decrypt(e);Gh({pair:r,name:t})}async function Dg(e){var n;const t=Tt(),r=await t.user(pt.pub).get("rooms").get(`${e}@${kt.pub}`).then();t.user(pt.pub).get("rooms").get(`${e}@${kt.pub}`).put(!r,null,{opt:{cert:(n=pt.features)==null?void 0:n.rooms}})}function Tg(e){pt.pub=e}function Fg(){pt.pub=hr.pub}var Mi,Er,Og={61:()=>{},405:e=>{e.exports=async function*(t){for(let r of t)typeof r=="function"&&(r=r()),yield*r}},580:e=>{var t=/["'&<>]/;e.exports=function(r){var n,i=""+r,s=t.exec(i);if(!s)return i;var o="",a=0,u=0;for(a=s.index;a<i.length;a++){switch(i.charCodeAt(a)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}u!==a&&(o+=i.substring(u,a)),u=a+1,o+=n}return u!==a?o+i.substring(u,a):o}},717:(e,t,r)=>{r.r(t),r.d(t,{addListener:()=>h,argv:()=>a,binding:()=>T,browser:()=>s,chdir:()=>I,cwd:()=>S,emit:()=>y,env:()=>o,listeners:()=>v,nextTick:()=>w,off:()=>p,on:()=>f,once:()=>d,prependListener:()=>_,prependOnceListener:()=>b,removeAllListeners:()=>g,removeListener:()=>m,title:()=>i,umask:()=>E,version:()=>u,versions:()=>c});var n=r(9596);const i="browser",s=!0,o={},a=[],u="",c={};function l(){}const f=l,h=l,d=l,p=l,m=l,g=l,y=l,_=l,b=l,w=(P,...B)=>n(()=>P(...B)),v=P=>[],S=()=>"/",E=()=>0,T=P=>{throw new Error("process.binding is not supported")},I=P=>{throw new Error("process.chdir is not supported")}},736:(e,t,r)=>{e.exports=function(n){function i(a){let u,c,l,f=null;function h(...d){if(!h.enabled)return;const p=h,m=Number(new Date),g=m-(u||m);p.diff=g,p.prev=u,p.curr=m,u=m,d[0]=i.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let y=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(_,b)=>{if(_==="%%")return"%";y++;const w=i.formatters[b];if(typeof w=="function"){const v=d[y];_=w.call(p,v),d.splice(y,1),y--}return _}),i.formatArgs.call(p,d),(p.log||i.log).apply(p,d)}return h.namespace=a,h.useColors=i.useColors(),h.color=i.selectColor(a),h.extend=s,h.destroy=i.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(c!==i.namespaces&&(c=i.namespaces,l=i.enabled(a)),l),set:d=>{f=d}}),typeof i.init=="function"&&i.init(h),h}function s(a,u){const c=i(this.namespace+(u===void 0?":":u)+a);return c.log=this.log,c}function o(a,u){let c=0,l=0,f=-1,h=0;for(;c<a.length;)if(l<u.length&&(u[l]===a[c]||u[l]==="*"))u[l]==="*"?(f=l,h=c,l++):(c++,l++);else{if(f===-1)return!1;l=f+1,h++,c=h}for(;l<u.length&&u[l]==="*";)l++;return l===u.length}return i.debug=i,i.default=i,i.coerce=function(a){return a instanceof Error?a.stack||a.message:a},i.disable=function(){const a=[...i.names,...i.skips.map(u=>"-"+u)].join(",");return i.enable(""),a},i.enable=function(a){i.save(a),i.namespaces=a,i.names=[],i.skips=[];const u=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(const c of u)c[0]==="-"?i.skips.push(c.slice(1)):i.names.push(c)},i.enabled=function(a){for(const u of i.skips)if(o(a,u))return!1;for(const u of i.names)if(o(a,u))return!0;return!1},i.humanize=r(6585),i.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(n).forEach(a=>{i[a]=n[a]}),i.names=[],i.skips=[],i.formatters={},i.selectColor=function(a){let u=0;for(let c=0;c<a.length;c++)u=(u<<5)-u+a.charCodeAt(c),u|=0;return i.colors[Math.abs(u)%i.colors.length]},i.enable(i.load()),i}},815:(e,t,r)=>{var n,i=r(717),s=r(3519),o=r(6611);try{n=r(2376)}catch{}var a=function(){},u=/^v?\.0/.test(i.version),c=function(d){return typeof d=="function"},l=function(d,p,m,g){g=s(g);var y=!1;d.on("close",function(){y=!0}),o(d,{readable:p,writable:m},function(b){if(b)return g(b);y=!0,g()});var _=!1;return function(b){if(!y&&!_)return _=!0,function(w){return!!u&&!!n&&(w instanceof(n.ReadStream||a)||w instanceof(n.WriteStream||a))&&c(w.close)}(d)?d.close(a):function(w){return w.setHeader&&c(w.abort)}(d)?d.abort():c(d.destroy)?d.destroy():void g(b||new Error("stream was destroyed"))}},f=function(d){d()},h=function(d,p){return d.pipe(p)};e.exports=function(){var d,p=Array.prototype.slice.call(arguments),m=c(p[p.length-1]||a)&&p.pop()||a;if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new Error("pump requires two streams per minimum");var g=p.map(function(y,_){var b=_<p.length-1;return l(y,b,_>0,function(w){d||(d=w),w&&g.forEach(f),b||(g.forEach(f),m(d))})});return p.reduce(h)}},826:()=>{},988:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(9639);function i(m){const g=m<0?1:0;return m=Math.abs(Number(m||1)),Math.floor(Math.log10(m))+1+g}function s(m){return ArrayBuffer.isView(m)?"arraybufferview":Array.isArray(m)?"array":m instanceof Number?"number":m instanceof Boolean?"boolean":m instanceof Set?"set":m instanceof Map?"map":m instanceof String?"string":m instanceof ArrayBuffer?"arraybuffer":typeof m}function o(m,g,y){const _=[];let b=null;return o._encode(_,m),b=(0,n.xW)(_),o.bytes=b.length,ArrayBuffer.isView(g)?(g.set(b,y),g):b}o.bytes=-1,o._floatConversionDetected=!1,o._encode=function(m,g){if(g!=null)switch(s(g)){case"object":o.dict(m,g);break;case"map":o.dictMap(m,g);break;case"array":o.list(m,g);break;case"set":o.listSet(m,g);break;case"string":o.string(m,g);break;case"number":case"boolean":o.number(m,g);break;case"arraybufferview":o.buffer(m,new Uint8Array(g.buffer,g.byteOffset,g.byteLength));break;case"arraybuffer":o.buffer(m,new Uint8Array(g))}};const a=new Uint8Array([101]),u=new Uint8Array([100]),c=new Uint8Array([108]);o.buffer=function(m,g){m.push((0,n.L0)(g.length+":"),g)},o.string=function(m,g){m.push((0,n.L0)((0,n.L0)(g).byteLength+":"+g))},o.number=function(m,g){if(Number.isInteger(g))return m.push((0,n.L0)("i"+BigInt(g)+"e"));const y=2147483648,_=(g/y|0)*y+(g%y|0);m.push((0,n.L0)("i"+_+"e")),_===g||o._floatConversionDetected||(o._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+g+'":','Bencoding only defines support for integers, value was converted to "'+_+'"'),console.trace())},o.dict=function(m,g){m.push(u);let y,_=0;const b=Object.keys(g).sort(),w=b.length;for(;_<w;_++)y=b[_],g[y]!=null&&(o.string(m,y),o._encode(m,g[y]));m.push(a)},o.dictMap=function(m,g){m.push(u);const y=Array.from(g.keys()).sort();for(const _ of y)g.get(_)!=null&&(ArrayBuffer.isView(_)?o._encode(m,_):o.string(m,String(_)),o._encode(m,g.get(_)));m.push(a)},o.list=function(m,g){let y=0;const _=g.length;for(m.push(c);y<_;y++)g[y]!=null&&o._encode(m,g[y]);m.push(a)},o.listSet=function(m,g){m.push(c);for(const y of g)y!=null&&o._encode(m,y);m.push(a)};const l=o;function f(m,g,y){let _=0,b=1;for(let w=g;w<y;w++){const v=m[w];if(v<58&&v>=48)_=10*_+(v-48);else if(w!==g||v!==43){if(w!==g||v!==45){if(v===46)break;throw new Error("not a number: buffer["+w+"] = "+v)}b=-1}}return _*b}function h(m,g,y,_){return m==null||m.length===0?null:(typeof g!="number"&&_==null&&(_=g,g=void 0),typeof y!="number"&&_==null&&(_=y,y=void 0),h.position=0,h.encoding=_||null,h.data=ArrayBuffer.isView(m)?new Uint8Array(m.slice(g,y)):(0,n.L0)(m),h.bytes=h.data.length,h.next())}h.bytes=0,h.position=0,h.data=null,h.encoding=null,h.next=function(){switch(h.data[h.position]){case 100:return h.dictionary();case 108:return h.list();case 105:return h.integer();default:return h.buffer()}},h.find=function(m){let g=h.position;const y=h.data.length,_=h.data;for(;g<y;){if(_[g]===m)return g;g++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(m)+'" [0x'+m.toString(16)+"]")},h.dictionary=function(){h.position++;const m={};for(;h.data[h.position]!==101;){const g=h.buffer();let y=(0,n.dU)(g);y.includes("�")&&(y=(0,n.V5)(g)),m[y]=h.next()}return h.position++,m},h.list=function(){h.position++;const m=[];for(;h.data[h.position]!==101;)m.push(h.next());return h.position++,m},h.integer=function(){const m=h.find(101),g=f(h.data,h.position+1,m);return h.position+=m+1-h.position,g},h.buffer=function(){let m=h.find(58);const g=f(h.data,h.position,m),y=++m+g;return h.position=y,h.encoding?(0,n.dU)(h.data.slice(m,y)):h.data.slice(m,y)};function d(m){if(m==null)return 0;const g=s(m);switch(g){case"arraybufferview":return function(y){const _=y.byteLength-y.byteOffset;return i(_)+1+_}(m);case"string":return function(y){const _=(0,n.L0)(y).byteLength;return i(_)+1+_}(m);case"array":case"set":return function(y){let _=2;for(const b of y)_+=d(b);return _}(m);case"number":return 1+i(Math.floor(m))+1;case"bigint":return 1+m.toString().length+1;case"object":return function(y){let _=2;const b=Object.keys(y);for(let w=0;w<b.length;w++){const v=(0,n.L0)(b[w]).byteLength;_+=i(v)+1+v,_+=d(y[b[w]])}return _}(m);case"map":return function(y){let _=2;for(const[b,w]of y){const v=(0,n.L0)(b).byteLength;_+=i(v)+1+v,_+=d(w)}return _}(m);default:throw new TypeError(`Unsupported value of type "${g}"`)}}const p={encode:l,decode:h,byteLength:d,encodingLength:d}},1035:e=>{function t(r){return(+Date.now()-r)/100&65535}e.exports=function(r){const n=+Date.now(),i=10*(r||5),s=[0];let o=1,a=t(n)-1&65535;return function(u){const c=t(n);let l=c-a&65535;for(l>i&&(l=i),a=c;l--;)o===i&&(o=0),s[o]=s[o===0?i-1:o-1],o++;u&&(s[o-1]+=u);const f=s[o-1],h=s.length<i?0:s[o===i?0:o];return s.length<10?f:10*(f-h)/s.length}}},1133:(e,t,r)=>{let n=r(8673);e.exports=new n(r(8446))},1314:e=>{e.exports=function(t,r){if(!(r>=t.length||r<0)){var n=t.pop();if(r<t.length){var i=t[r];return t[r]=n,i}return n}}},1467:e=>{function t(r,n){if(typeof r[0]=="string")return r.join("");if(typeof r[0]=="number")return new Uint8Array(r);const i=new Uint8Array(n);let s=0;for(let o=0,a=r.length;o<a;o++){const u=r[o];i.set(u,s),s+=u.byteLength||u.length}return i}e.exports=async function*(r,n=512,i={}){typeof n=="object"&&(n=(i=n).size);let{nopad:s,zeroPadding:o=!0}=i;s&&(o=!1);let a=[],u=0;for await(const c of r)if(u+=c.byteLength||c.length||1,a.push(c),u>=n){const l=t(a,u);let f=0;for(;u>=n;)yield l.slice(f,f+n),u-=n,f+=n;a=[l.slice(f,l.length)]}u&&(yield t(a,o?n:u))}},1551:()=>{},1827:()=>{},2072:e=>{e.exports={wait:function(t){return new Promise(r=>setTimeout(r,t))}}},2123:()=>{},2376:()=>{},2532:()=>{},2701:()=>{},2799:()=>{},2878:e=>{function t(s,o){return{start:s.start,end:s.end,index:o}}function r(s){return{start:s.start,end:s.end}}function n(s,o){return s.index-o.index}function i(s,o){return s.start-o.start}e.exports=function(s,o,a){if(typeof o!="string")throw new TypeError("argument str must be a string");var u=o.indexOf("=");if(u===-1)return-2;var c=o.slice(u+1).split(","),l=[];l.type=o.slice(0,u);for(var f=0;f<c.length;f++){var h=c[f].split("-"),d=parseInt(h[0],10),p=parseInt(h[1],10);isNaN(d)?(d=s-p,p=s-1):isNaN(p)&&(p=s-1),p>s-1&&(p=s-1),isNaN(d)||isNaN(p)||d>p||d<0||l.push({start:d,end:p})}return l.length<1?-1:a&&a.combine?function(m){for(var g=m.map(t).sort(i),y=0,_=1;_<g.length;_++){var b=g[_],w=g[y];b.start>w.end+1?g[++y]=b:b.end>w.end&&(w.end=b.end,w.index=Math.min(w.index,b.index))}g.length=y+1;var v=g.sort(n).map(r);return v.type=m.type,v}(l):l}},3033:(e,t,r)=>{function n(s){return(s>>3)+ +(s%8!=0)}r.d(t,{A:()=>i});class i{get length(){return this.buffer.length<<3}constructor(o=0,a){const u=a==null?void 0:a.grow;this.grow=u?Number.isFinite(u)?n(u):u:0,this.buffer=typeof o=="number"?new Uint8Array(n(o)):o}get(o){const a=o>>3;return a<this.buffer.length&&!!(this.buffer[a]&128>>o%8)}set(o,a=!0){const u=o>>3;if(a){if(u>=this.buffer.length){const c=Math.max(u+1,Math.min(2*this.buffer.length,this.grow));if(c<=this.grow){const l=new Uint8Array(c);l.set(this.buffer),this.buffer=l}}this.buffer[u]|=128>>o%8}else u<this.buffer.length&&(this.buffer[u]&=~(128>>o%8))}setAll(o,a=0){const u=Math.min(n(a+o.length),this.grow);if(this.buffer.length<u){const f=new Uint8Array(u);f.set(this.buffer),this.buffer=f}let c=a>>3,l=128>>a%8;for(let f=0;f<o.length;f++)if(o[f]?this.buffer[c]|=l:this.buffer[c]&=~l,l===1){if(c+=1,c>=this.buffer.length)break;l=128}else l>>=1}forEach(o,a=0,u=8*this.buffer.length){let c=a>>3,l=128>>a%8;for(let f=a;f<u;f++)o(!!(this.buffer[c]&l),f),l===1?(c+=1,l=128):l>>=1}isEmpty(){for(let o=0;o<this.buffer.length;o++)if(this.buffer[o]!==0)return!1;return!0}}},3065:(e,t,r)=>{var n=r(717),i=r(5472),s=r(3085),o=function(a,u,c){this.tokenBucket=new i(a,a,u,null),this.tokenBucket.content=a,this.curIntervalStart=s(),this.tokensThisInterval=0,this.fireImmediately=c};o.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(a,u){if(a>this.tokenBucket.bucketSize)return n.nextTick(u.bind(null,"Requested tokens "+a+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var c=this,l=s();if((l<this.curIntervalStart||l-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=l,this.tokensThisInterval=0),a>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)n.nextTick(u.bind(null,null,-1));else{var f=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-l);setTimeout(function(){c.tokenBucket.removeTokens(a,h)},f)}return!1}return this.tokenBucket.removeTokens(a,h);function h(d,p){if(d)return u(d,null);c.tokensThisInterval+=a,u(null,p)}},tryRemoveTokens:function(a){if(a>this.tokenBucket.bucketSize)return!1;var u=s();if((u<this.curIntervalStart||u-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=u,this.tokensThisInterval=0),a>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var c=this.tokenBucket.tryRemoveTokens(a);return c&&(this.tokensThisInterval+=a),c},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},e.exports=o},3085:(e,t,r)=>{var n=r(717);e.exports=function(){if(n!==void 0&&n.hrtime){var i=n.hrtime(),s=i[0],o=i[1];return 1e3*s+Math.floor(o/1e6)}return new Date().getTime()}},3198:e=>{e.exports=class{constructor(t){this.decoder=new TextDecoder(t==="utf16le"?"utf16-le":t)}get remaining(){return-1}decode(t){return this.decoder.decode(t,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}},3208:()=>{},3278:()=>{},3468:()=>{typeof ReadableStream<"u"&&(ReadableStream.prototype[Symbol.asyncIterator]||(ReadableStream.prototype[Symbol.asyncIterator]=function({preventCancel:e}={}){const t=this.getReader(),r=this;let n=t.read();return{next(){const i=n;return n=t.read(),i},return:async i=>(await n,t.releaseLock(),e||r.cancel(),{done:!0,value:i}),async throw(i){throw await this.return(),i},[Symbol.asyncIterator](){return this}}}),ReadableStream.prototype.getIterator||(ReadableStream.prototype.getIterator=function({preventCancel:e}={}){return this[Symbol.asyncIterator]({preventCancel:e})}))},3519:(e,t,r)=>{var n=r(6587);function i(o){var a=function(){return a.called?a.value:(a.called=!0,a.value=o.apply(this,arguments))};return a.called=!1,a}function s(o){var a=function(){if(a.called)throw new Error(a.onceError);return a.called=!0,a.value=o.apply(this,arguments)},u=o.name||"Function wrapped with `once`";return a.onceError=u+" shouldn't be called more than once",a.called=!1,a}e.exports=n(i),e.exports.strict=n(s),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})})},3714:(e,t,r)=>{const n=r(9596);e.exports=class{constructor(i){if(this.store=i,this.chunkLength=i.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(i,s,o=()=>{}){this.mem[i]=s,this.store.put(i,s,a=>{this.mem[i]=null,o(a)})}get(i,s,o=()=>{}){if(typeof s=="function")return this.get(i,null,s);let a=this.mem[i];if(!a)return this.store.get(i,s,o);s||(s={});const u=s.offset||0,c=s.length||a.length-u;u===0&&c===a.length||(a=a.slice(u,c+u)),n(()=>o(null,a))}close(i=()=>{}){this.store.close(i)}destroy(i=()=>{}){this.store.destroy(i)}}},3970:()=>{},4018:e=>{e.exports=function(){for(var t=navigator.hardwareConcurrency||1,r=[],n=0;n<t;n++)r.push({model:"",speed:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}});return r}},4043:()=>{},4343:()=>{},4497:(e,t,r)=>{const n=r(8454),i=r(9596);e.exports=class{constructor(s,o){if(this.store=s,this.chunkLength=s.chunkLength,this.inProgressGets=new Map,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.cache=new n(o)}put(s,o,a=()=>{}){if(!this.cache)return i(()=>a(new Error("CacheStore closed")));this.cache.remove(s),this.store.put(s,o,a)}get(s,o,a=()=>{}){if(typeof o=="function")return this.get(s,null,o);if(!this.cache)return i(()=>a(new Error("CacheStore closed")));o||(o={});let u=this.cache.get(s);if(u){const f=o.offset||0,h=o.length||u.length-f;return f===0&&h===u.length||(u=u.slice(f,h+f)),i(()=>a(null,u))}let c=this.inProgressGets.get(s);const l=!!c;c||(c=[],this.inProgressGets.set(s,c)),c.push({opts:o,cb:a}),l||this.store.get(s,(f,h)=>{f||this.cache==null||this.cache.set(s,h);const d=this.inProgressGets.get(s);this.inProgressGets.delete(s);for(const{opts:p,cb:m}of d)if(f)m(f);else{const g=p.offset||0,y=p.length||h.length-g;let _=h;g===0&&y===h.length||(_=h.slice(g,y+g)),m(null,_)}})}close(s=()=>{}){if(!this.cache)return i(()=>s(new Error("CacheStore closed")));this.cache=null,this.store.close(s)}destroy(s=()=>{}){if(!this.cache)return i(()=>s(new Error("CacheStore closed")));this.cache=null,this.store.destroy(s)}}},4862:(e,t,r)=>{e.exports=i;const n=r(9596);function i(s,o){if(!(this instanceof i))return new i(s,o);if(o||(o={}),this.chunkLength=Number(s),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(o.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}i.prototype.put=function(s,o,a=()=>{}){if(this.closed)return n(()=>a(new Error("Storage is closed")));const u=s===this.lastChunkIndex;return u&&o.length!==this.lastChunkLength?n(()=>a(new Error("Last chunk length must be "+this.lastChunkLength))):u||o.length===this.chunkLength?(this.chunks[s]=o,void n(()=>a(null))):n(()=>a(new Error("Chunk length must be "+this.chunkLength)))},i.prototype.get=function(s,o,a=()=>{}){if(typeof o=="function")return this.get(s,null,o);if(this.closed)return n(()=>a(new Error("Storage is closed")));let u=this.chunks[s];if(!u){const f=new Error("Chunk not found");return f.notFound=!0,n(()=>a(f))}o||(o={});const c=o.offset||0,l=o.length||u.length-c;c===0&&l===u.length||(u=u.slice(c,l+c)),n(()=>a(null,u))},i.prototype.close=i.prototype.destroy=function(s=()=>{}){if(this.closed)return n(()=>s(new Error("Storage is closed")));this.closed=!0,this.chunks=null,n(()=>s(null))}},5335:(e,t,r)=>{const n=r(3198),i=r(3198);e.exports=class{constructor(s="utf8"){switch(this.encoding=function(o){switch(o=o.toLowerCase()){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:throw new Error("Unknown encoding: "+o)}}(s),this.encoding){case"utf8":this.decoder=new i;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new n(this.encoding)}}get remaining(){return this.decoder.remaining}push(s){return typeof s=="string"?s:this.decoder.decode(s)}write(s){return this.push(s)}end(s){let o="";return s&&(o=this.push(s)),o+=this.decoder.flush(),o}}},5372:(e,t,r)=>{e.exports=function(i,s,o){if(typeof s!="number")throw new Error("second argument must be a Number");let a,u,c,l,f,h,d=!0;Array.isArray(i)?(a=[],c=u=i.length):(l=Object.keys(i),a={},c=u=l.length);function p(g){function y(){o&&o(g,a),o=null}d?n(y):y()}function m(g,y,_){if(a[g]=_,y&&(f=!0),--c==0||y)p(y);else if(!f&&h<u){let b;l?(b=l[h],h+=1,i[b](function(w,v){m(b,w,v)})):(b=h,h+=1,i[b](function(w,v){m(b,w,v)}))}}h=s,c?l?l.some(function(g,y){return i[g](function(_,b){m(g,_,b)}),y===s-1}):i.some(function(g,y){return g(function(_,b){m(y,_,b)}),y===s-1}):p(null),d=!1};const n=r(9596)},5472:(e,t,r)=>{var n=r(717),i=function(s,o,a,u){if(this.bucketSize=s,this.tokensPerInterval=o,typeof a=="string")switch(a){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+a)}else this.interval=a;this.parentBucket=u,this.content=0,this.lastDrip=+new Date};i.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(s,o){var a=this;return this.bucketSize?s>this.bucketSize?(n.nextTick(o.bind(null,"Requested tokens "+s+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),s>this.content?u():this.parentBucket?this.parentBucket.removeTokens(s,function(c,l){return c?o(c,null):s>a.content?u():(a.content-=s,void o(null,Math.min(l,a.content)))}):(this.content-=s,n.nextTick(o.bind(null,null,this.content)),!0)):(n.nextTick(o.bind(null,null,s,Number.POSITIVE_INFINITY)),!0);function u(){var c=Math.ceil((s-a.content)*(a.interval/a.tokensPerInterval));return setTimeout(function(){a.removeTokens(s,o)},c),!1}},tryRemoveTokens:function(s){return!this.bucketSize||!(s>this.bucketSize)&&(this.drip(),!(s>this.content)&&!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(s))&&(this.content-=s,!0))},drip:function(){if(this.tokensPerInterval){var s=+new Date,o=Math.max(s-this.lastDrip,0);this.lastDrip=s;var a=o*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+a,this.bucketSize)}else this.content=this.bucketSize}},e.exports=i},5658:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g,enableSecure:()=>m});var n=r(7007),i=r(8179),s=r(1314),o=r(7833),a=r(6458);const u="tcpIncoming",c="tcpOutgoing",l="utpIncoming",f="utpOutgoing",h="webSeed",d=o("webtorrent:peer");let p=!1;const m=()=>{p=!0};class g extends n{constructor(_,b){super(),this.id=_,this.type=b,d("new %s Peer %s",b,_),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.source=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentPe1=!1,this.sentPe2=!1,this.sentPe3=!1,this.sentPe4=!1,this.sentHandshake=!1}onConnect(){if(this.destroyed)return;this.connected=!0,d("Peer %s connected",this.id),clearTimeout(this.connectTimeout);const _=this.conn;_.once("end",()=>{this.destroy()}),_.once("close",()=>{this.destroy()}),_.once("finish",()=>{this.destroy()}),_.once("error",w=>{this.destroy(w)});const b=this.wire=new a.A(this.type,this.retries,p);b.once("end",()=>{this.destroy()}),b.once("close",()=>{this.destroy()}),b.once("finish",()=>{this.destroy()}),b.once("error",w=>{this.destroy(w)}),b.once("pe1",()=>{this.onPe1()}),b.once("pe2",()=>{this.onPe2()}),b.once("pe3",()=>{this.onPe3()}),b.once("pe4",()=>{this.onPe4()}),b.once("handshake",(w,v)=>{this.onHandshake(w,v)}),this.startHandshakeTimeout(),this.setThrottlePipes(),this.swarm&&(this.type==="tcpOutgoing"?p&&this.retries===0&&!this.sentPe1?this.sendPe1():this.sentHandshake||this.handshake():this.type==="tcpIncoming"||this.sentHandshake||this.handshake())}sendPe1(){this.wire.sendPe1(),this.sentPe1=!0}onPe1(){this.sendPe2()}sendPe2(){this.wire.sendPe2(),this.sentPe2=!0}onPe2(){this.sendPe3()}sendPe3(){this.wire.sendPe3(this.swarm.infoHash),this.sentPe3=!0}onPe3(_){this.swarm&&(this.swarm.infoHashHash!==_&&this.destroy(new Error("unexpected crypto handshake info hash for this swarm")),this.sendPe4())}sendPe4(){this.wire.sendPe4(this.swarm.infoHash),this.sentPe4=!0}onPe4(){this.sentHandshake||this.handshake()}clearPipes(){this.conn.unpipe(),this.wire.unpipe()}setThrottlePipes(){const _=this;(0,i.pipeline)(this.conn,this.throttleGroups.down.throttle(),new i.Transform({transform(b,w){_.emit("download",b.length),_.destroyed||w(null,b)}}),this.wire,this.throttleGroups.up.throttle(),new i.Transform({transform(b,w){_.emit("upload",b.length),_.destroyed||w(null,b)}}),this.conn)}onHandshake(_,b){if(!this.swarm||this.destroyed)return;if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(_!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(b===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));d("Peer %s got handshake %s",this.id,_),clearTimeout(this.handshakeTimeout),this.retries=0;let w=this.addr;!w&&this.conn.remoteAddress&&this.conn.remotePort&&(w=`${this.conn.remoteAddress}:${this.conn.remotePort}`),this.swarm._onWire(this.wire,w),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}handshake(){const _={dht:!this.swarm.private&&!!this.swarm.client.dht,fast:!0};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,_),this.sentHandshake=!0}startConnectTimeout(){clearTimeout(this.connectTimeout);const _={webrtc:25e3,tcpOutgoing:5e3,utpOutgoing:5e3};this.connectTimeout=setTimeout(()=>{this.destroy(new Error("connect timeout"))},_[this.type]),this.connectTimeout.unref&&this.connectTimeout.unref()}startHandshakeTimeout(){clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(()=>{this.destroy(new Error("handshake timeout"))},25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}destroy(_){if(this.destroyed)return;this.destroyed=!0,this.connected=!1,d("destroy %s %s (error: %s)",this.type,this.id,_&&(_.message||_)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);const b=this.swarm,w=this.conn,v=this.wire;this.swarm=null,this.conn=null,this.wire=null,b&&v&&s(b.wires,b.wires.indexOf(v)),w&&(w.on("error",()=>{}),w.destroy()),v&&v.destroy(),b&&b.removePeer(this.id)}}g.TYPE_TCP_INCOMING=u,g.TYPE_TCP_OUTGOING=c,g.TYPE_UTP_INCOMING=l,g.TYPE_UTP_OUTGOING=f,g.TYPE_WEBRTC="webrtc",g.TYPE_WEBSEED=h,g.SOURCE_MANUAL="manual",g.SOURCE_TRACKER="tracker",g.SOURCE_DHT="dht",g.SOURCE_LSD="lsd",g.SOURCE_UT_PEX="ut_pex",g.createWebRTCPeer=(y,_,b,w=null)=>{const v=new g(y.id,"webrtc");if(v.conn=y,v.swarm=_,v.throttleGroups=b,v.source=w,v.conn.connected)v.onConnect();else{const S=()=>{v.conn.removeListener("connect",E),v.conn.removeListener("error",T)},E=()=>{S(),v.onConnect()},T=I=>{S(),v.destroy(I)};v.conn.once("connect",E),v.conn.once("error",T),v.startConnectTimeout()}return v},g.createTCPIncomingPeer=(y,_)=>g._createIncomingPeer(y,u,_),g.createUTPIncomingPeer=(y,_)=>g._createIncomingPeer(y,l,_),g.createTCPOutgoingPeer=(y,_,b,w)=>g._createOutgoingPeer(y,_,c,b,w),g.createUTPOutgoingPeer=(y,_,b,w)=>g._createOutgoingPeer(y,_,f,b,w),g._createIncomingPeer=(y,_,b)=>{const w=`${y.remoteAddress}:${y.remotePort}`,v=new g(w,_);return v.conn=y,v.addr=w,v.throttleGroups=b,v.onConnect(),v},g._createOutgoingPeer=(y,_,b,w,v=null)=>{const S=new g(y,b);return S.addr=y,S.swarm=_,S.throttleGroups=w,S.source=v,S},g.createWebSeedPeer=(y,_,b,w)=>{const v=new g(_,h);return v.swarm=b,v.conn=y,v.throttleGroups=w,v.onConnect(),v}},5809:e=>{e.exports=class{constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(t){return this.buffer[this.top]===void 0&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}},6080:(e,t,r)=>{const n=r(5809);e.exports=class{constructor(i){this.hwm=i||16,this.head=new n(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(i){if(this.length++,!this.head.push(i)){const s=this.head;this.head=s.next=new n(2*this.head.buffer.length),this.head.push(i)}}shift(){this.length!==0&&this.length--;const i=this.tail.shift();if(i===void 0&&this.tail.next){const s=this.tail.next;return this.tail.next=null,this.tail=s,this.tail.shift()}return i}peek(){const i=this.tail.peek();return i===void 0&&this.tail.next?this.tail.next.peek():i}isEmpty(){return this.length===0}}},6310:e=>{function t(r,n){for(const i in n)Object.defineProperty(r,i,{value:n[i],enumerable:!0,configurable:!0});return r}e.exports=function(r,n,i){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof n=="object"&&(i=n,n=""),n&&(i.code=n);try{return t(r,i)}catch{i.message=r.message,i.stack=r.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),t(new o,i)}}},6458:(e,t,r)=>{r.d(t,{A:()=>x});var n=r(988),i=r(3033),s=r(7264),o=r(7833),a=r(8727),u=r(8179),c=r(9639),l=r(1035),f=r(1314);const h=o("bittorrent-protocol"),d=(0,c.L0)("BitTorrent protocol"),p=new Uint8Array([0,0,0,0]),m=new Uint8Array([0,0,0,1,0]),g=new Uint8Array([0,0,0,1,1]),y=new Uint8Array([0,0,0,1,2]),_=new Uint8Array([0,0,0,1,3]),b=[0,0,0,0,0,0,0,0],w=[0,0,0,3,9,0,0],v=new Uint8Array([0,0,0,1,14]),S=new Uint8Array([0,0,0,1,15]),E=new Uint8Array([0,0,0,0,0,0,0,0]),T=new Uint8Array([0,0,1,2]),I=new Uint8Array([0,0,0,2]);function P(O,A){for(let C=O.length;C--;)O[C]^=A[C];return O}class B{constructor(A,C,L,R){this.piece=A,this.offset=C,this.length=L,this.callback=R}}class D{constructor(){this.buffer=new Uint8Array}get(A){return!0}set(A){}}class k extends u.Duplex{constructor(A=null,C=0,L=!1){super(),this._debugId=(0,c.V5)((0,c.po)(4)),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=A,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new i.A(0,{grow:4e5}),this.extensions={},this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this.hasFast=!1,this.allowedFastSet=[],this.peerAllowedFastSet=[],this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=l(),this.downloadSpeed=l(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this._timeoutExpiresAt=null,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this._peEnabled=L,L?(this._dh=s.createDiffieHellman("ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a36210000000000090563","hex",2),this._myPubKey=this._dh.generateKeys("hex")):this._myPubKey=null,this._peerPubKey=null,this._sharedSecret=null,this._peerCryptoProvide=[],this._cryptoHandshakeDone=!1,this._cryptoSyncPattern=null,this._waitMaxBytes=null,this._encryptionMethod=null,this._encryptGenerator=null,this._decryptGenerator=null,this._setGenerators=!1,this.once("finish",()=>this._onFinish()),this.on("finish",this._onFinish),this._debug("type:",this.type),this.type==="tcpIncoming"&&this._peEnabled?this._determineHandshakeType():this.type==="tcpOutgoing"&&this._peEnabled&&C===0?this._parsePe2():this._parseHandshake(null)}setKeepAlive(A){this._debug("setKeepAlive %s",A),clearInterval(this._keepAliveInterval),A!==!1&&(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},55e3))}setTimeout(A,C){this._debug("setTimeout ms=%d unref=%s",A,C),this._timeoutMs=A,this._timeoutUnref=!!C,this._resetTimeout(!0)}destroy(){if(!this.destroyed)return this._debug("destroy"),this.end(),this}end(A){if(!this.destroyed&&!this.destroying)return this._debug("end"),this._onUninterested(),this._onChoke(),super.end(A)}use(A){const C=A.prototype.name;if(!C)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",C);const L=this._nextExt,R=new A(this);function U(){}typeof R.onHandshake!="function"&&(R.onHandshake=U),typeof R.onExtendedHandshake!="function"&&(R.onExtendedHandshake=U),typeof R.onMessage!="function"&&(R.onMessage=U),this.extendedMapping[L]=C,this._ext[C]=R,this[C]=R,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(p)}sendPe1(){if(this._peEnabled){const A=Math.floor(513*Math.random()),C=(0,c.po)(A);this._push((0,c.xW)([(0,c.fk)(this._myPubKey),C]))}}sendPe2(){const A=Math.floor(513*Math.random()),C=(0,c.po)(A);this._push((0,c.xW)([(0,c.fk)(this._myPubKey),C]))}async sendPe3(A){await this.setEncrypt(this._sharedSecret,A);const C=await(0,c.tW)((0,c.fk)(this._utfToHex("req1")+this._sharedSecret)),L=P(await(0,c.tW)((0,c.fk)(this._utfToHex("req2")+A)),await(0,c.tW)((0,c.fk)(this._utfToHex("req3")+this._sharedSecret))),R=new DataView((0,c.po)(2).buffer).getUint16(0)%512,U=(0,c.po)(R);let N=new Uint8Array(14+R+2);N.set(E),N.set(T,8);const z=new DataView(N.buffer);z.setInt16(12,R),U.copy(N,14),z.setInt16(14+R,0),N=this._encryptHandshake(N),this._push((0,c.xW)([C,L,N]))}async sendPe4(A){await this.setEncrypt(this._sharedSecret,A);const C=new DataView((0,c.po)(2).buffer).getUint16(0)%512,L=(0,c.po)(C);let R=new Uint8Array(14+C);const U=new DataView(R.buffer);R.set(E),R.set(I,8),U.setInt16(12,C),R.set(L,14),R=this._encryptHandshake(R),this._push(R),this._cryptoHandshakeDone=!0,this._debug("completed crypto handshake")}handshake(A,C,L){let R,U;if(typeof A=="string"?(A=A.toLowerCase(),R=(0,c.fk)(A)):(R=A,A=(0,c.V5)(R)),typeof C=="string"?U=(0,c.fk)(C):(U=C,C=(0,c.V5)(U)),this._infoHash=R,R.length!==20||U.length!==20)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",A,C,L);const N=new Uint8Array(b);this.extensions={extended:!0,dht:!(!L||!L.dht),fast:!(!L||!L.fast)},N[5]|=16,this.extensions.dht&&(N[7]|=1),this.extensions.fast&&(N[7]|=4),this.extensions.fast&&this.peerExtensions.fast&&(this._debug("fast extension is enabled"),this.hasFast=!0),this._push((0,c.xW)([d,N,R,U])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const A=Object.assign({},this.extendedHandshake);A.m={};for(const C in this.extendedMapping){const L=this.extendedMapping[C];A.m[L]=Number(C)}this.extended(0,n.A.encode(A)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking)if(this.amChoking=!0,this._debug("choke"),this._push(m),this.hasFast){let A=0;for(;this.peerRequests.length>A;){const C=this.peerRequests[A];this.allowedFastSet.includes(C.piece)?++A:this.reject(C.piece,C.offset,C.length)}}else for(;this.peerRequests.length;)this.peerRequests.pop()}unchoke(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(g))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(y))}uninterested(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(_))}have(A){this._debug("have %d",A),this._message(4,[A],null)}bitfield(A){this._debug("bitfield"),ArrayBuffer.isView(A)||(A=A.buffer),this._message(5,[],A)}request(A,C,L,R){return R||(R=()=>{}),this._finished?R(new Error("wire is closed")):!this.peerChoking||this.hasFast&&this.peerAllowedFastSet.includes(A)?(this._debug("request index=%d offset=%d length=%d",A,C,L),this.requests.push(new B(A,C,L,R)),this._timeout||this._resetTimeout(!0),void this._message(6,[A,C,L],null)):R(new Error("peer is choking"))}piece(A,C,L){this._debug("piece index=%d offset=%d",A,C),this._message(7,[A,C],L),this.uploaded+=L.length,this.uploadSpeed(L.length),this.emit("upload",L.length)}cancel(A,C,L){this._debug("cancel index=%d offset=%d length=%d",A,C,L),this._callback(this._pull(this.requests,A,C,L),new Error("request was cancelled"),null),this._message(8,[A,C,L],null)}port(A){this._debug("port %d",A);const C=new Uint8Array(w);new DataView(C.buffer).setUint16(5,A),this._push(C)}suggest(A){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("suggest %d",A),this._message(13,[A],null)}haveAll(){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("have-all"),this._push(v)}haveNone(){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("have-none"),this._push(S)}reject(A,C,L){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("reject index=%d offset=%d length=%d",A,C,L),this._pull(this.peerRequests,A,C,L),this._message(16,[A,C,L],null)}allowedFast(A){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("allowed-fast %d",A),this.allowedFastSet.includes(A)||this.allowedFastSet.push(A),this._message(17,[A],null)}extended(A,C){if(this._debug("extended ext=%s",A),typeof A=="string"&&this.peerExtendedMapping[A]&&(A=this.peerExtendedMapping[A]),typeof A!="number")throw new Error(`Unrecognized extension: ${A}`);{const L=new Uint8Array([A]),R=ArrayBuffer.isView(C)?C:n.A.encode(C);this._message(20,[],(0,c.xW)([L,R]))}}async setEncrypt(A,C){let L,R,U,N;switch(this.type){case"tcpIncoming":L=await(0,c.tW)((0,c.fk)(this._utfToHex("keyB")+A+C)),U=await(0,c.tW)((0,c.fk)(this._utfToHex("keyA")+A+C)),R=[];for(const z of L.values())R.push(z);N=[];for(const z of U.values())N.push(z);this._encryptGenerator=new a(R),this._decryptGenerator=new a(N);break;case"tcpOutgoing":L=await(0,c.tW)((0,c.fk)(this._utfToHex("keyA")+A+C)),U=await(0,c.tW)((0,c.fk)(this._utfToHex("keyB")+A+C)),R=[];for(const z of L.values())R.push(z);N=[];for(const z of U.values())N.push(z);this._encryptGenerator=new a(R),this._decryptGenerator=new a(N);break;default:return!1}for(let z=0;z<1024;z++)this._encryptGenerator.randomByte(),this._decryptGenerator.randomByte();return this._setGenerators=!0,!0}_message(A,C,L){const R=L?L.length:0,U=new Uint8Array(5+4*C.length),N=new DataView(U.buffer);N.setUint32(0,U.length+R-4),U[4]=A;for(let z=0;z<C.length;z++)N.setUint32(5+4*z,C[z]);this._push(U),L&&this._push(L)}_push(A){if(!this._finished)return this._encryptionMethod===2&&this._cryptoHandshakeDone&&(A=this._encrypt(A)),this.push(A)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onPe1(A){this._peerPubKey=(0,c.V5)(A),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe1")}_onPe2(A){this._peerPubKey=(0,c.V5)(A),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe2")}async _onPe3(A){const C=await(0,c.V5)(this._utfToHex("req3")+this._sharedSecret),L=(0,c.V5)(P(C,A));this.emit("pe3",L)}_onPe3Encrypted(A,C){if(!(0,c.LC)(A,E))return this._debug("Error: verification constant did not match"),void this.destroy();for(const L of C.values())L!==0&&this._peerCryptoProvide.push(L);this._peerCryptoProvide.includes(2)?this._encryptionMethod=2:(this._debug("Error: RC4 encryption method not provided by peer"),this.destroy())}_onPe4(A){this._encryptionMethod=A[3],T.includes(this._encryptionMethod)||(this._debug("Error: peer selected invalid crypto method"),this.destroy()),this._cryptoHandshakeDone=!0,this._debug("crypto handshake done"),this.emit("pe4")}_onHandshake(A,C,L){const R=(0,c.V5)(A),U=(0,c.V5)(C);this._debug("got handshake i=%s p=%s exts=%o",R,U,L),this.peerId=U,this.peerIdBuffer=C,this.peerExtensions=L,this.extensions.fast&&this.peerExtensions.fast&&(this._debug("fast extension is enabled"),this.hasFast=!0),this.emit("handshake",R,U,L);for(const N in this._ext)this._ext[N].onHandshake(R,U,L);L.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){if(this.peerChoking=!0,this._debug("got choke"),this.emit("choke"),!this.hasFast)for(;this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(A){this.peerPieces.get(A)||(this._debug("got have %d",A),this.peerPieces.set(A,!0),this.emit("have",A))}_onBitField(A){this.peerPieces=new i.A(A),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(A,C,L){if(this.amChoking&&(!this.hasFast||!this.allowedFastSet.includes(A)))return void(this.hasFast&&this.reject(A,C,L));this._debug("got request index=%d offset=%d length=%d",A,C,L);const R=(N,z)=>{if(U===this._pull(this.peerRequests,A,C,L))return N?(this._debug("error satisfying request index=%d offset=%d length=%d (%s)",A,C,L,N.message),void(this.hasFast&&this.reject(A,C,L))):void this.piece(A,C,z)},U=new B(A,C,L,R);this.peerRequests.push(U),this.emit("request",A,C,L,R)}_onPiece(A,C,L){this._debug("got piece index=%d offset=%d",A,C),this._callback(this._pull(this.requests,A,C,L.length),null,L),this.downloaded+=L.length,this.downloadSpeed(L.length),this.emit("download",L.length),this.emit("piece",A,C,L)}_onCancel(A,C,L){this._debug("got cancel index=%d offset=%d length=%d",A,C,L),this._pull(this.peerRequests,A,C,L),this.emit("cancel",A,C,L)}_onPort(A){this._debug("got port %d",A),this.emit("port",A)}_onSuggest(A){if(!this.hasFast)return this._debug("Error: got suggest whereas fast extension is disabled"),void this.destroy();this._debug("got suggest %d",A),this.emit("suggest",A)}_onHaveAll(){if(!this.hasFast)return this._debug("Error: got have-all whereas fast extension is disabled"),void this.destroy();this._debug("got have-all"),this.peerPieces=new D,this.emit("have-all")}_onHaveNone(){if(!this.hasFast)return this._debug("Error: got have-none whereas fast extension is disabled"),void this.destroy();this._debug("got have-none"),this.emit("have-none")}_onReject(A,C,L){if(!this.hasFast)return this._debug("Error: got reject whereas fast extension is disabled"),void this.destroy();this._debug("got reject index=%d offset=%d length=%d",A,C,L),this._callback(this._pull(this.requests,A,C,L),new Error("request was rejected"),null),this.emit("reject",A,C,L)}_onAllowedFast(A){if(!this.hasFast)return this._debug("Error: got allowed-fast whereas fast extension is disabled"),void this.destroy();this._debug("got allowed-fast %d",A),this.peerAllowedFastSet.includes(A)||this.peerAllowedFastSet.push(A),this.peerAllowedFastSet.length>100&&this.peerAllowedFastSet.shift(),this.emit("allowed-fast",A)}_onExtended(A,C){if(A===0){let L;try{L=n.A.decode(C)}catch(R){this._debug("ignoring invalid extended handshake: %s",R.message||R)}if(!L)return;if(this.peerExtendedHandshake=L,typeof L.m=="object")for(const R in L.m)this.peerExtendedMapping[R]=Number(L.m[R].toString());for(const R in this._ext)this.peerExtendedMapping[R]&&this._ext[R].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[A]&&(A=this.extendedMapping[A],this._ext[A]&&this._ext[A].onMessage(C)),this._debug("got extended message ext=%s",A),this.emit("extended",A,C)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(A,C){if(this._encryptionMethod===2&&this._cryptoHandshakeDone&&(A=this._decrypt(A)),this._bufferSize+=A.length,this._buffer.push(A),this._buffer.length>1&&(this._buffer=[(0,c.xW)(this._buffer,this._bufferSize)]),this._cryptoSyncPattern){const L=this._buffer[0].indexOf(this._cryptoSyncPattern);if(L!==-1)this._buffer[0]=this._buffer[0].slice(L+this._cryptoSyncPattern.length),this._bufferSize-=L+this._cryptoSyncPattern.length,this._cryptoSyncPattern=null;else if(this._bufferSize+A.length>this._waitMaxBytes+this._cryptoSyncPattern.length)return this._debug("Error: could not resynchronize"),void this.destroy()}for(;this._bufferSize>=this._parserSize&&!this._cryptoSyncPattern;)if(this._parserSize===0)this._parser(new Uint8Array);else{const L=this._buffer[0];this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[L.slice(this._parserSize)]:[],this._parser(L.slice(0,this._parserSize))}C(null)}_callback(A,C,L){A&&(this._resetTimeout(!this.peerChoking&&!this._finished),A.callback(C,L))}_resetTimeout(A){if(!A||!this._timeoutMs||!this.requests.length)return clearTimeout(this._timeout),this._timeout=null,void(this._timeoutExpiresAt=null);const C=Date.now()+this._timeoutMs;if(this._timeout){if(C-this._timeoutExpiresAt<.05*this._timeoutMs)return;clearTimeout(this._timeout)}this._timeoutExpiresAt=C,this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref()}_parse(A,C){this._parserSize=A,this._parser=C}_parseUntil(A,C){this._cryptoSyncPattern=A,this._waitMaxBytes=C}_onMessageLength(A){const C=new DataView(A.buffer,A.byteOffset,A.byteLength).getUint32(0);C>0?this._parse(C,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(A){this._parse(4,this._onMessageLength);const C=new DataView(A.buffer,A.byteOffset,A.byteLength);switch(A[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(C.getUint32(1));case 5:return this._onBitField(A.slice(1));case 6:return this._onRequest(C.getUint32(1),C.getUint32(5),C.getUint32(9));case 7:return this._onPiece(C.getUint32(1),C.getUint32(5),A.slice(9));case 8:return this._onCancel(C.getUint32(1),C.getUint32(5),C.getUint32(9));case 9:return this._onPort(C.getUint16(1));case 13:return this._onSuggest(C.getUint32(1));case 14:return this._onHaveAll();case 15:return this._onHaveNone();case 16:return this._onReject(C.getUint32(1),C.getUint32(5),C.getUint32(9));case 17:return this._onAllowedFast(C.getUint32(1));case 20:return this._onExtended(A[1],A.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",A)}}_determineHandshakeType(){this._parse(1,A=>{const C=A[0];C===19?this._parse(C+48,this._onHandshakeBuffer):this._parsePe1(A)})}_parsePe1(A){this._parse(95,C=>{this._onPe1((0,c.xW)([A,C])),this._parsePe3()})}_parsePe2(){this._parse(96,A=>{for(this._onPe2(A);!this._setGenerators;);this._parsePe4()})}async _parsePe3(){const A=await(0,c.tW)((0,c.fk)(this._utfToHex("req1")+this._sharedSecret));this._parseUntil(A,512),this._parse(20,C=>{for(this._onPe3(C);!this._setGenerators;);this._parsePe3Encrypted()})}_parsePe3Encrypted(){this._parse(14,A=>{const C=this._decryptHandshake(A.slice(0,8)),L=this._decryptHandshake(A.slice(8,12)),R=new DataView(this._decryptHandshake(A.slice(12,14)).buffer).getUint16(0);this._parse(R,U=>{U=this._decryptHandshake(U),this._parse(2,N=>{const z=new DataView(this._decryptHandshake(N).buffer).getUint16(0);this._parse(z,Y=>{Y=this._decryptHandshake(Y),this._onPe3Encrypted(C,L,U,Y);const G=z?Y[0]:null,K=z?Y.slice(1,20):null;G===19&&(0,c.dU)(K)==="BitTorrent protocol"?this._onHandshakeBuffer(Y.slice(1)):this._parseHandshake()})})})})}_parsePe4(){const A=this._decryptHandshake(E);this._parseUntil(A,512),this._parse(6,C=>{const L=this._decryptHandshake(C.slice(0,4)),R=new DataView(this._decryptHandshake(C.slice(4,6)).buffer).getUint16(0);this._parse(R,U=>{this._decryptHandshake(U),this._onPe4(L),this._parseHandshake(null)})})}_parseHandshake(){this._parse(1,A=>{const C=A[0];if(C!==19)return this._debug("Error: wire not speaking BitTorrent protocol (%s)",C.toString()),void this.end();this._parse(C+48,this._onHandshakeBuffer)})}_onHandshakeBuffer(A){const C=A.slice(0,19);if((0,c.dU)(C)!=="BitTorrent protocol")return this._debug("Error: wire not speaking BitTorrent protocol (%s)",(0,c.dU)(C)),void this.end();A=A.slice(19),this._onHandshake(A.slice(8,28),A.slice(28,48),{dht:!!(1&A[7]),fast:!!(4&A[7]),extended:!!(16&A[5])}),this._parse(4,this._onMessageLength)}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...A){A[0]=`[${this._debugId}] ${A[0]}`,h(...A)}_pull(A,C,L,R){for(let U=0;U<A.length;U++){const N=A[U];if(N.piece===C&&N.offset===L&&N.length===R)return f(A,U),N}return null}_encryptHandshake(A){const C=new Uint8Array(A);if(!this._encryptGenerator)return this._debug("Warning: Encrypting without any generator"),C;for(let L=0;L<A.length;L++){const R=this._encryptGenerator.randomByte();C[L]=C[L]^R}return C}_encrypt(A){const C=new Uint8Array(A);if(!this._encryptGenerator||this._encryptionMethod!==2)return C;for(let L=0;L<A.length;L++){const R=this._encryptGenerator.randomByte();C[L]=C[L]^R}return C}_decryptHandshake(A){const C=new Uint8Array(A);if(!this._decryptGenerator)return this._debug("Warning: Decrypting without any generator"),C;for(let L=0;L<A.length;L++){const R=this._decryptGenerator.randomByte();C[L]=C[L]^R}return C}_decrypt(A){const C=new Uint8Array(A);if(!this._decryptGenerator||this._encryptionMethod!==2)return C;for(let L=0;L<A.length;L++){const R=this._decryptGenerator.randomByte();C[L]=C[L]^R}return C}_utfToHex(A){return(0,c.V5)((0,c.L0)(A))}}const x=k},6585:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,s=7*i,o=365.25*i;function a(u,c,l,f){var h=c>=1.5*l;return Math.round(u/l)+" "+f+(h?"s":"")}e.exports=function(u,c){c=c||{};var l=typeof u;if(l==="string"&&u.length>0)return function(f){if(!((f=String(f)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(h){var d=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return d*o;case"weeks":case"week":case"w":return d*s;case"days":case"day":case"d":return d*i;case"hours":case"hour":case"hrs":case"hr":case"h":return d*n;case"minutes":case"minute":case"mins":case"min":case"m":return d*r;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}(u);if(l==="number"&&isFinite(u))return c.long?function(f){var h=Math.abs(f);return h>=i?a(f,h,i,"day"):h>=n?a(f,h,n,"hour"):h>=r?a(f,h,r,"minute"):h>=t?a(f,h,t,"second"):f+" ms"}(u):function(f){var h=Math.abs(f);return h>=i?Math.round(f/i)+"d":h>=n?Math.round(f/n)+"h":h>=r?Math.round(f/r)+"m":h>=t?Math.round(f/t)+"s":f+"ms"}(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}},6587:e=>{e.exports=function t(r,n){if(r&&n)return t(r)(n);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(s){i[s]=r[s]}),i;function i(){for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];var a=r.apply(this,s),u=s[s.length-1];return typeof a=="function"&&a!==u&&Object.keys(u).forEach(function(c){a[c]=u[c]}),a}}},6611:(e,t,r)=>{var n=r(717),i=r(3519),s=function(){},o=function(a,u,c){if(typeof u=="function")return o(a,null,u);u||(u={}),c=i(c||s);var l=a._writableState,f=a._readableState,h=u.readable||u.readable!==!1&&a.readable,d=u.writable||u.writable!==!1&&a.writable,p=!1,m=function(){a.writable||g()},g=function(){d=!1,h||c.call(a)},y=function(){h=!1,d||c.call(a)},_=function(E){c.call(a,E?new Error("exited with error code: "+E):null)},b=function(E){c.call(a,E)},w=function(){n.nextTick(v)},v=function(){if(!p)return(!h||f&&f.ended&&!f.destroyed)&&(!d||l&&l.ended&&!l.destroyed)?void 0:c.call(a,new Error("premature close"))},S=function(){a.req.on("finish",g)};return function(E){return E.setHeader&&typeof E.abort=="function"}(a)?(a.on("complete",g),a.on("abort",w),a.req?S():a.on("request",S)):d&&!l&&(a.on("end",m),a.on("close",m)),function(E){return E.stdio&&Array.isArray(E.stdio)&&E.stdio.length===3}(a)&&a.on("exit",_),a.on("end",y),a.on("finish",g),u.error!==!1&&a.on("error",b),a.on("close",w),function(){p=!0,a.removeListener("complete",g),a.removeListener("abort",w),a.removeListener("request",S),a.req&&a.req.removeListener("finish",g),a.removeListener("end",m),a.removeListener("close",m),a.removeListener("finish",g),a.removeListener("exit",_),a.removeListener("end",y),a.removeListener("error",b),a.removeListener("close",w)}};e.exports=o},6664:()=>{},6686:()=>{},6698:e=>{typeof Object.create=="function"?e.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}},6819:(e,t,r)=>{e.exports=r(8330).version},6889:()=>{},7007:e=>{var t=Object.create||function(m){var g=function(){};return g.prototype=m,new g},r=Object.keys||function(m){var g=[];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&g.push(y);return y},n=Function.prototype.bind||function(m){var g=this;return function(){return g.apply(m,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=t(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var s,o=10;try{var a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0}),s=a.x===0}catch{s=!1}function u(m){return m._maxListeners===void 0?i.defaultMaxListeners:m._maxListeners}function c(m,g,y,_){var b,w,v;if(typeof y!="function")throw new TypeError('"listener" argument must be a function');if((w=m._events)?(w.newListener&&(m.emit("newListener",g,y.listener?y.listener:y),w=m._events),v=w[g]):(w=m._events=t(null),m._eventsCount=0),v){if(typeof v=="function"?v=w[g]=_?[y,v]:[v,y]:_?v.unshift(y):v.push(y),!v.warned&&(b=u(m))&&b>0&&v.length>b){v.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+v.length+' "'+String(g)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');S.name="MaxListenersExceededWarning",S.emitter=m,S.type=g,S.count=v.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",S.name,S.message)}}else v=w[g]=y,++m._eventsCount;return m}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var m=new Array(arguments.length),g=0;g<m.length;++g)m[g]=arguments[g];this.listener.apply(this.target,m)}}function f(m,g,y){var _={fired:!1,wrapFn:void 0,target:m,type:g,listener:y},b=n.call(l,_);return b.listener=y,_.wrapFn=b,b}function h(m,g,y){var _=m._events;if(!_)return[];var b=_[g];return b?typeof b=="function"?y?[b.listener||b]:[b]:y?function(w){for(var v=new Array(w.length),S=0;S<v.length;++S)v[S]=w[S].listener||w[S];return v}(b):p(b,b.length):[]}function d(m){var g=this._events;if(g){var y=g[m];if(typeof y=="function")return 1;if(y)return y.length}return 0}function p(m,g){for(var y=new Array(g),_=0;_<g;++_)y[_]=m[_];return y}s?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(m){if(typeof m!="number"||m<0||m!=m)throw new TypeError('"defaultMaxListeners" must be a positive number');o=m}}):i.defaultMaxListeners=o,i.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||isNaN(m))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=m,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(m){var g,y,_,b,w,v,S=m==="error";if(v=this._events)S=S&&v.error==null;else if(!S)return!1;if(S){if(arguments.length>1&&(g=arguments[1]),g instanceof Error)throw g;var E=new Error('Unhandled "error" event. ('+g+")");throw E.context=g,E}if(!(y=v[m]))return!1;var T=typeof y=="function";switch(_=arguments.length){case 1:(function(I,P,B){if(P)I.call(B);else for(var D=I.length,k=p(I,D),x=0;x<D;++x)k[x].call(B)})(y,T,this);break;case 2:(function(I,P,B,D){if(P)I.call(B,D);else for(var k=I.length,x=p(I,k),O=0;O<k;++O)x[O].call(B,D)})(y,T,this,arguments[1]);break;case 3:(function(I,P,B,D,k){if(P)I.call(B,D,k);else for(var x=I.length,O=p(I,x),A=0;A<x;++A)O[A].call(B,D,k)})(y,T,this,arguments[1],arguments[2]);break;case 4:(function(I,P,B,D,k,x){if(P)I.call(B,D,k,x);else for(var O=I.length,A=p(I,O),C=0;C<O;++C)A[C].call(B,D,k,x)})(y,T,this,arguments[1],arguments[2],arguments[3]);break;default:for(b=new Array(_-1),w=1;w<_;w++)b[w-1]=arguments[w];(function(I,P,B,D){if(P)I.apply(B,D);else for(var k=I.length,x=p(I,k),O=0;O<k;++O)x[O].apply(B,D)})(y,T,this,b)}return!0},i.prototype.addListener=function(m,g){return c(this,m,g,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(m,g){return c(this,m,g,!0)},i.prototype.once=function(m,g){if(typeof g!="function")throw new TypeError('"listener" argument must be a function');return this.on(m,f(this,m,g)),this},i.prototype.prependOnceListener=function(m,g){if(typeof g!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(m,f(this,m,g)),this},i.prototype.removeListener=function(m,g){var y,_,b,w,v;if(typeof g!="function")throw new TypeError('"listener" argument must be a function');if(!(_=this._events))return this;if(!(y=_[m]))return this;if(y===g||y.listener===g)--this._eventsCount==0?this._events=t(null):(delete _[m],_.removeListener&&this.emit("removeListener",m,y.listener||g));else if(typeof y!="function"){for(b=-1,w=y.length-1;w>=0;w--)if(y[w]===g||y[w].listener===g){v=y[w].listener,b=w;break}if(b<0)return this;b===0?y.shift():function(S,E){for(var T=E,I=T+1,P=S.length;I<P;T+=1,I+=1)S[T]=S[I];S.pop()}(y,b),y.length===1&&(_[m]=y[0]),_.removeListener&&this.emit("removeListener",m,v||g)}return this},i.prototype.removeAllListeners=function(m){var g,y,_;if(!(y=this._events))return this;if(!y.removeListener)return arguments.length===0?(this._events=t(null),this._eventsCount=0):y[m]&&(--this._eventsCount==0?this._events=t(null):delete y[m]),this;if(arguments.length===0){var b,w=r(y);for(_=0;_<w.length;++_)(b=w[_])!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=t(null),this._eventsCount=0,this}if(typeof(g=y[m])=="function")this.removeListener(m,g);else if(g)for(_=g.length-1;_>=0;_--)this.removeListener(m,g[_]);return this},i.prototype.listeners=function(m){return h(this,m,!0)},i.prototype.rawListeners=function(m){return h(this,m,!1)},i.listenerCount=function(m,g){return typeof m.listenerCount=="function"?m.listenerCount(g):d.call(m,g)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},7264:()=>{},7373:e=>{e.exports=function(t){var r=0;return function(){if(r===t.length)return null;var n=t.length-r,i=Math.random()*n|0,s=t[r+i],o=t[r];return t[r]=s,t[r+i]=o,r++,s}}},7541:(e,t,r)=>{const n=r(8765),i=r(8499);e.exports={Throttle:n,ThrottleGroup:i}},7828:()=>{},7833:(e,t,r)=>{var n=r(717);t.formatArgs=function(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;s.splice(1,0,o,"color: inherit");let a=0,u=0;s[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(a++,c==="%c"&&(u=a))}),s.splice(u,0,o)},t.save=function(s){try{s?t.storage.setItem("debug",s):t.storage.removeItem("debug")}catch{}},t.load=function(){let s;try{s=t.storage.getItem("debug")}catch{}return!s&&n!==void 0&&"env"in n&&(s=n.env.DEBUG),s},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let s;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(s=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(s[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(736)(t);const{formatters:i}=e.exports;i.j=function(s){try{return JSON.stringify(s)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}},7936:()=>{},8179:(e,t,r)=>{const{EventEmitter:n}=r(7007),i=new Error("Stream was destroyed"),s=new Error("Premature close"),o=r(6080),a=r(5335),u=536870911,c=1^u,l=2^u,f=32,h=64,d=128,p=256,m=1024,g=2048,y=4096,_=8192,b=16384,w=32768,v=131072,S=131328,E=16^u,T=536805375,I=768^u,P=536838143,B=536739839,D=1<<18,k=2<<18,x=4<<18,O=8<<18,A=16<<18,C=32<<18,L=64<<18,R=128<<18,U=256<<18,N=512<<18,z=1024<<18,Y=535822335,G=503316479,K=268435455,ut=262160,yt=536608751,at=8404992,ht=14,bt=15,dt=8405006,_t=33587200,At=33587215,F=2359296,W=270794767,V=Symbol.asyncIterator||Symbol("asyncIterator");class ${constructor(M,{highWaterMark:tt=16384,map:lt=null,mapWritable:mt,byteLength:wt,byteLengthWritable:Ft}={}){this.stream=M,this.queue=new o,this.highWaterMark=tt,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=Ft||wt||Hr,this.map=mt||lt,this.afterWrite=it.bind(this),this.afterUpdateNextTick=vt.bind(this)}get ended(){return!!(this.stream._duplexState&C)}push(M){return!(142606350&this.stream._duplexState)&&(this.map!==null&&(M=this.map(M)),this.buffered+=this.byteLength(M),this.queue.push(M),this.buffered<this.highWaterMark?(this.stream._duplexState|=O,!0):(this.stream._duplexState|=6291456,!1))}shift(){const M=this.queue.shift();return this.buffered-=this.byteLength(M),this.buffered===0&&(this.stream._duplexState&=534773759),M}end(M){typeof M=="function"?this.stream.once("finish",M):M!=null&&this.push(M),this.stream._duplexState=(this.stream._duplexState|N)&Y}autoBatch(M,tt){const lt=[],mt=this.stream;for(lt.push(M);(mt._duplexState&W)===F;)lt.push(mt._writableState.shift());if(mt._duplexState&bt)return tt(null);mt._writev(lt,tt)}update(){const M=this.stream;M._duplexState|=k;do{for(;(M._duplexState&W)===O;){const tt=this.shift();M._duplexState|=67371008,M._write(tt,this.afterWrite)}1310720&M._duplexState||this.updateNonPrimary()}while(this.continueUpdate()===!0);M._duplexState&=536346623}updateNonPrimary(){const M=this.stream;if((144965647&M._duplexState)===N)return M._duplexState=M._duplexState|D,void M._final(q.bind(this));(M._duplexState&ht)!=4?(M._duplexState&At)==1&&(M._duplexState=(M._duplexState|ut)&c,M._open(gt.bind(this))):M._duplexState&_t||(M._duplexState|=ut,M._destroy(et.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&R)&&(this.stream._duplexState&=G,!0)}updateCallback(){(35127311&this.stream._duplexState)===x?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&R||(this.stream._duplexState|=R,this.stream._duplexState&k||queueMicrotask(this.afterUpdateNextTick))}}class j{constructor(M,{highWaterMark:tt=16384,map:lt=null,mapReadable:mt,byteLength:wt,byteLengthReadable:Ft}={}){this.stream=M,this.queue=new o,this.highWaterMark=tt===0?1:tt,this.buffered=0,this.readAhead=tt>0,this.error=null,this.pipeline=null,this.byteLength=Ft||wt||Hr,this.map=mt||lt,this.pipeTo=null,this.afterRead=rt.bind(this),this.afterUpdateNextTick=ct.bind(this)}get ended(){return!!(this.stream._duplexState&b)}pipe(M,tt){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof tt!="function"&&(tt=null),this.stream._duplexState|=512,this.pipeTo=M,this.pipeline=new X(this.stream,M,tt),tt&&this.stream.on("error",Ne),er(M))M._writableState.pipeline=this.pipeline,tt&&M.on("error",Ne),M.on("finish",this.pipeline.finished.bind(this.pipeline));else{const lt=this.pipeline.done.bind(this.pipeline,M),mt=this.pipeline.done.bind(this.pipeline,M,null);M.on("error",lt),M.on("close",mt),M.on("finish",this.pipeline.finished.bind(this.pipeline))}M.on("drain",Q.bind(this)),this.stream.emit("piping",M),M.emit("pipe",this.stream)}push(M){const tt=this.stream;return M===null?(this.highWaterMark=0,tt._duplexState=536805311&tt._duplexState|1024,!1):this.map!==null&&(M=this.map(M))===null?(tt._duplexState&=T,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(M),this.queue.push(M),tt._duplexState=(tt._duplexState|d)&T,this.buffered<this.highWaterMark)}shift(){const M=this.queue.shift();return this.buffered-=this.byteLength(M),this.buffered===0&&(this.stream._duplexState&=536862591),M}unshift(M){const tt=[this.map!==null?this.map(M):M];for(;this.buffered>0;)tt.push(this.shift());for(let lt=0;lt<tt.length-1;lt++){const mt=tt[lt];this.buffered+=this.byteLength(mt),this.queue.push(mt)}this.push(tt[tt.length-1])}read(){const M=this.stream;if((16527&M._duplexState)===d){const tt=this.shift();return this.pipeTo!==null&&this.pipeTo.write(tt)===!1&&(M._duplexState&=I),M._duplexState&g&&M.emit("data",tt),tt}return this.readAhead===!1&&(M._duplexState|=v,this.updateNextTick()),null}drain(){const M=this.stream;for(;(16527&M._duplexState)===d&&768&M._duplexState;){const tt=this.shift();this.pipeTo!==null&&this.pipeTo.write(tt)===!1&&(M._duplexState&=I),M._duplexState&g&&M.emit("data",tt)}}update(){const M=this.stream;M._duplexState|=f;do{for(this.drain();this.buffered<this.highWaterMark&&(214047&M._duplexState)===v;)M._duplexState|=65552,M._read(this.afterRead),this.drain();(12431&M._duplexState)==4224&&(M._duplexState|=_,M.emit("readable")),80&M._duplexState||this.updateNonPrimary()}while(this.continueUpdate()===!0);M._duplexState&=536870879}updateNonPrimary(){const M=this.stream;(1167&M._duplexState)===m&&(M._duplexState=536869887&M._duplexState|16384,M.emit("end"),(M._duplexState&dt)===at&&(M._duplexState|=4),this.pipeTo!==null&&this.pipeTo.end()),(M._duplexState&ht)!=4?(M._duplexState&At)==1&&(M._duplexState=(M._duplexState|ut)&c,M._open(gt.bind(this))):M._duplexState&_t||(M._duplexState|=ut,M._destroy(et.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&w)&&(this.stream._duplexState&=P,!0)}updateCallback(){(32879&this.stream._duplexState)===h?this.update():this.updateNextTick()}updateNextTickIfOpen(){32769&this.stream._duplexState||(this.stream._duplexState|=w,this.stream._duplexState&f||queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){this.stream._duplexState&w||(this.stream._duplexState|=w,this.stream._duplexState&f||queueMicrotask(this.afterUpdateNextTick))}}class H{constructor(M){this.data=null,this.afterTransform=Vt.bind(M),this.afterFinal=null}}class X{constructor(M,tt,lt){this.from=M,this.to=tt,this.afterPipe=lt,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(M,tt){tt&&(this.error=tt),M!==this.to||(this.to=null,this.from===null)?M!==this.from||(this.from=null,this.to===null)?(this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):M._duplexState&b||this.to.destroy(this.error||new Error("Readable stream closed before ending")):this.from._duplexState&b&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function Q(){this.stream._duplexState|=512,this.updateCallback()}function q(ot){const M=this.stream;ot&&M.destroy(ot),M._duplexState&ht||(M._duplexState|=C,M.emit("finish")),(M._duplexState&dt)===at&&(M._duplexState|=4),M._duplexState&=402391039,M._duplexState&k?this.updateNextTick():this.update()}function et(ot){const M=this.stream;ot||this.error===i||(ot=this.error),ot&&M.emit("error",ot),M._duplexState|=8,M.emit("close");const tt=M._readableState,lt=M._writableState;if(tt!==null&&tt.pipeline!==null&&tt.pipeline.done(M,ot),lt!==null){for(;lt.drains!==null&&lt.drains.length>0;)lt.drains.shift().resolve(!1);lt.pipeline!==null&&lt.pipeline.done(M,ot)}}function it(ot){const M=this.stream;ot&&M.destroy(ot),M._duplexState&=469499903,this.drains!==null&&function(tt){for(let lt=0;lt<tt.length;lt++)--tt[lt].writes==0&&(tt.shift().resolve(!0),lt--)}(this.drains),(6553615&M._duplexState)===A&&(M._duplexState&=532676607,(M._duplexState&L)===L&&M.emit("drain")),this.updateCallback()}function rt(ot){ot&&this.stream.destroy(ot),this.stream._duplexState&=E,this.readAhead!==!1||this.stream._duplexState&p||(this.stream._duplexState&=B),this.updateCallback()}function ct(){this.stream._duplexState&f||(this.stream._duplexState&=P,this.update())}function vt(){this.stream._duplexState&k||(this.stream._duplexState&=G,this.update())}function gt(ot){const M=this.stream;ot&&M.destroy(ot),4&M._duplexState||(17423&M._duplexState||(M._duplexState|=h),142606351&M._duplexState||(M._duplexState|=x),M.emit("open")),M._duplexState&=yt,M._writableState!==null&&M._writableState.updateCallback(),M._readableState!==null&&M._readableState.updateCallback()}function Vt(ot,M){M!=null&&this.push(M),this._writableState.afterWrite(ot)}function tr(ot){this._readableState!==null&&(ot==="data"&&(this._duplexState|=133376,this._readableState.updateNextTick()),ot==="readable"&&(this._duplexState|=y,this._readableState.updateNextTick())),this._writableState!==null&&ot==="drain"&&(this._duplexState|=L,this._writableState.updateNextTick())}class Wt extends n{constructor(M){super(),this._duplexState=0,this._readableState=null,this._writableState=null,M&&(M.open&&(this._open=M.open),M.destroy&&(this._destroy=M.destroy),M.predestroy&&(this._predestroy=M.predestroy),M.signal&&M.signal.addEventListener("abort",yr.bind(this))),this.on("newListener",tr)}_open(M){M(null)}_destroy(M){M(null)}_predestroy(){}get readable(){return this._readableState!==null||void 0}get writable(){return this._writableState!==null||void 0}get destroyed(){return!!(8&this._duplexState)}get destroying(){return!!(this._duplexState&ht)}destroy(M){this._duplexState&ht||(M||(M=i),this._duplexState=535822271&this._duplexState|4,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=M),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=M),this._duplexState|=2,this._predestroy(),this._duplexState&=l,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}class ne extends Wt{constructor(M){super(M),this._duplexState|=8519681,this._readableState=new j(this,M),M&&(this._readableState.readAhead===!1&&(this._duplexState&=B),M.read&&(this._read=M.read),M.eagerOpen&&this._readableState.updateNextTick(),M.encoding&&this.setEncoding(M.encoding))}setEncoding(M){const tt=new a(M),lt=this._readableState.map||di;return this._readableState.map=function(mt){const wt=tt.push(mt);return wt===""&&(mt.byteLength!==0||tt.remaining>0)?null:lt(wt)},this}_read(M){M(null)}pipe(M,tt){return this._readableState.updateNextTick(),this._readableState.pipe(M,tt),M}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(M){return this._readableState.updateNextTickIfOpen(),this._readableState.push(M)}unshift(M){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(M)}resume(){return this._duplexState|=S,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?536739583:536870655,this}static _fromAsyncIterator(M,tt){let lt;const mt=new ne({...tt,read(Ft){M.next().then(wt).then(Ft.bind(null,null)).catch(Ft)},predestroy(){lt=M.return()},destroy(Ft){if(!lt)return Ft(null);lt.then(Ft.bind(null,null)).catch(Ft)}});return mt;function wt(Ft){Ft.done?mt.push(null):mt.push(Ft.value)}}static from(M,tt){if(er(lt=M)&&lt.readable)return M;var lt;if(M[V])return this._fromAsyncIterator(M[V](),tt);Array.isArray(M)||(M=M===void 0?[]:[M]);let mt=0;return new ne({...tt,read(wt){this.push(mt===M.length?null:M[mt++]),wt(null)}})}static isBackpressured(M){return!!(17422&M._duplexState)||M._readableState.buffered>=M._readableState.highWaterMark}static isPaused(M){return!(M._duplexState&p)}[V](){const M=this;let tt=null,lt=null,mt=null;return this.on("error",Ht=>{tt=Ht}),this.on("readable",function(){lt!==null&&wt(M.read())}),this.on("close",function(){lt!==null&&wt(null)}),{[V](){return this},next:()=>new Promise(function(Ht,rr){lt=Ht,mt=rr;const Ot=M.read();Ot!==null?wt(Ot):8&M._duplexState&&wt(null)}),return:()=>Ft(null),throw:Ht=>Ft(Ht)};function wt(Ht){mt!==null&&(tt?mt(tt):Ht!==null||M._duplexState&b?lt({value:Ht,done:Ht===null}):mt(i),mt=lt=null)}function Ft(Ht){return M.destroy(Ht),new Promise((rr,Ot)=>{if(8&M._duplexState)return rr({value:void 0,done:!0});M.once("close",function(){Ht?Ot(Ht):rr({value:void 0,done:!0})})})}}}class St extends Wt{constructor(M){super(M),this._duplexState|=16385,this._writableState=new $(this,M),M&&(M.writev&&(this._writev=M.writev),M.write&&(this._write=M.write),M.final&&(this._final=M.final),M.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=z}uncork(){this._duplexState&=K,this._writableState.updateNextTick()}_writev(M,tt){tt(null)}_write(M,tt){this._writableState.autoBatch(M,tt)}_final(M){M(null)}static isBackpressured(M){return!!(146800654&M._duplexState)}static drained(M){if(M.destroyed)return Promise.resolve(!1);const tt=M._writableState;var lt;const mt=((lt=M)._writev!==St.prototype._writev&&lt._writev!==Me.prototype._writev?Math.min(1,tt.queue.length):tt.queue.length)+(M._duplexState&U?1:0);return mt===0?Promise.resolve(!0):(tt.drains===null&&(tt.drains=[]),new Promise(wt=>{tt.drains.push({writes:mt,resolve:wt})}))}write(M){return this._writableState.updateNextTick(),this._writableState.push(M)}end(M){return this._writableState.updateNextTick(),this._writableState.end(M),this}}class Me extends ne{constructor(M){super(M),this._duplexState=1|this._duplexState&v,this._writableState=new $(this,M),M&&(M.writev&&(this._writev=M.writev),M.write&&(this._write=M.write),M.final&&(this._final=M.final))}cork(){this._duplexState|=z}uncork(){this._duplexState&=K,this._writableState.updateNextTick()}_writev(M,tt){tt(null)}_write(M,tt){this._writableState.autoBatch(M,tt)}_final(M){M(null)}write(M){return this._writableState.updateNextTick(),this._writableState.push(M)}end(M){return this._writableState.updateNextTick(),this._writableState.end(M),this}}class _r extends Me{constructor(M){super(M),this._transformState=new H(this),M&&(M.transform&&(this._transform=M.transform),M.flush&&(this._flush=M.flush))}_write(M,tt){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=M:this._transform(M,this._transformState.afterTransform)}_read(M){if(this._transformState.data!==null){const tt=this._transformState.data;this._transformState.data=null,M(null),this._transform(tt,this._transformState.afterTransform)}else M(null)}destroy(M){super.destroy(M),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(M,tt){tt(null,M)}_flush(M){M(null)}_final(M){this._transformState.afterFinal=M,this._flush(ie.bind(this))}}function ie(ot,M){const tt=this._transformState.afterFinal;if(ot)return tt(ot);M!=null&&this.push(M),this.push(null),tt(null)}function Ur(ot,...M){const tt=Array.isArray(ot)?[...ot,...M]:[ot,...M],lt=tt.length&&typeof tt[tt.length-1]=="function"?tt.pop():null;if(tt.length<2)throw new Error("Pipeline requires at least 2 streams");let mt=tt[0],wt=null,Ft=null;for(let Ot=1;Ot<tt.length;Ot++)wt=tt[Ot],er(mt)?mt.pipe(wt,rr):(Ht(mt,!0,Ot>1,rr),mt.pipe(wt)),mt=wt;if(lt){let Ot=!1;const qr=er(wt)||!(!wt._writableState||!wt._writableState.autoDestroy);wt.on("error",pi=>{Ft===null&&(Ft=pi)}),wt.on("finish",()=>{Ot=!0,qr||lt(Ft)}),qr&&wt.on("close",()=>lt(Ft||(Ot?null:s)))}return wt;function Ht(Ot,qr,pi,mi){Ot.on("error",mi),Ot.on("close",function(){if(Ot._readableState&&!Ot._readableState.ended||pi&&Ot._writableState&&!Ot._writableState.ended)return mi(s)})}function rr(Ot){if(Ot&&!Ft){Ft=Ot;for(const qr of tt)qr.destroy(Ot)}}}function di(ot){return ot}function wn(ot){return!!ot._readableState||!!ot._writableState}function er(ot){return typeof ot._duplexState=="number"&&wn(ot)}function Hr(ot){return function(M){return typeof M=="object"&&M!==null&&typeof M.byteLength=="number"}(ot)?ot.byteLength:1024}function Ne(){}function yr(){this.destroy(new Error("Stream aborted."))}e.exports={pipeline:Ur,pipelinePromise:function(...ot){return new Promise((M,tt)=>Ur(...ot,lt=>{if(lt)return tt(lt);M()}))},isStream:wn,isStreamx:er,isEnded:function(ot){return!!ot._readableState&&ot._readableState.ended},isFinished:function(ot){return!!ot._writableState&&ot._writableState.ended},isDisturbed:function(ot){return!!(1&~ot._duplexState)||!!(ot._duplexState&_t)},getStreamError:function(ot,M={}){const tt=ot._readableState&&ot._readableState.error||ot._writableState&&ot._writableState.error;return M.all||tt!==i?tt:null},Stream:Wt,Writable:St,Readable:ne,Duplex:Me,Transform:_r,PassThrough:class extends _r{}}},8190:(e,t,r)=>{e.exports=function(i,s){let o,a,u,c=!0;Array.isArray(i)?(o=[],a=i.length):(u=Object.keys(i),o={},a=u.length);function l(h){function d(){s&&s(h,o),s=null}c?n(d):d()}function f(h,d,p){o[h]=p,(--a==0||d)&&l(d)}a?u?u.forEach(function(h){i[h](function(d,p){f(h,d,p)})}):i.forEach(function(h,d){h(function(p,m){f(d,p,m)})}):l(null),c=!1};const n=r(9596)},8271:()=>{},8330:e=>{e.exports={version:"2.6.3"}},8444:e=>{e.exports=function(t){return Math.max(16384,1<<Math.log2(t<1024?1:t/1024)+.5)}},8446:e=>{e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},8454:(e,t,r)=>{var n=r(7007),i=r(6698);function s(o){if(!(this instanceof s))return new s(o);typeof o=="number"&&(o={max:o}),o||(o={}),n.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=o.max||1e3,this.maxAge=o.maxAge||0}e.exports=s,i(s,n.EventEmitter),Object.defineProperty(s.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),s.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},s.prototype.remove=function(o){if(typeof o!="string"&&(o=""+o),this.cache.hasOwnProperty(o)){var a=this.cache[o];return delete this.cache[o],this._unlink(o,a.prev,a.next),a.value}},s.prototype._unlink=function(o,a,u){this.length--,this.length===0?this.head=this.tail=null:this.head===o?(this.head=a,this.cache[this.head].next=null):this.tail===o?(this.tail=u,this.cache[this.tail].prev=null):(this.cache[a].next=u,this.cache[u].prev=a)},s.prototype.peek=function(o){if(this.cache.hasOwnProperty(o)){var a=this.cache[o];if(this._checkAge(o,a))return a.value}},s.prototype.set=function(o,a){var u;if(typeof o!="string"&&(o=""+o),this.cache.hasOwnProperty(o)){if((u=this.cache[o]).value=a,this.maxAge&&(u.modified=Date.now()),o===this.head)return a;this._unlink(o,u.prev,u.next)}else u={value:a,modified:0,next:null,prev:null},this.maxAge&&(u.modified=Date.now()),this.cache[o]=u,this.length===this.max&&this.evict();return this.length++,u.next=null,u.prev=this.head,this.head&&(this.cache[this.head].next=o),this.head=o,this.tail||(this.tail=o),a},s.prototype._checkAge=function(o,a){return!(this.maxAge&&Date.now()-a.modified>this.maxAge)||(this.remove(o),this.emit("evict",{key:o,value:a.value}),!1)},s.prototype.get=function(o){if(typeof o!="string"&&(o=""+o),this.cache.hasOwnProperty(o)){var a=this.cache[o];if(this._checkAge(o,a))return this.head!==o&&(o===this.tail?(this.tail=a.next,this.cache[this.tail].prev=null):this.cache[a.prev].next=a.next,this.cache[a.next].prev=a.prev,this.cache[this.head].next=o,a.prev=this.head,a.next=null,this.head=o),a.value}},s.prototype.evict=function(){if(this.tail){var o=this.tail,a=this.remove(this.tail);this.emit("evict",{key:o,value:a})}}},8499:(e,t,r)=>{const{TokenBucket:n}=r(9439),i=r(8765);e.exports=class{constructor(s={}){if(typeof s!="object")throw new Error("Options must be an object");this.throttles=[],this.setEnabled(s.enabled),this.setRate(s.rate,s.chunksize)}getEnabled(){return this._enabled}getRate(){return this.bucket.tokensPerInterval}getChunksize(){return this.chunksize}setEnabled(s=!0){if(typeof s!="boolean")throw new Error("Enabled must be a boolean");this._enabled=s;for(const o of this.throttles)o.setEnabled(s)}setRate(s,o=null){if(!Number.isInteger(s)||s<0)throw new Error("Rate must be an integer bigger than zero");if(s=parseInt(s),o&&(typeof o!="number"||o<=0))throw new Error("Chunksize must be bigger than zero");if(o=o||Math.max(parseInt(s/10),1),o=parseInt(o),s>0&&o>s)throw new Error("Chunk size must be smaller than rate");this.bucket||(this.bucket=new n(s,s,"second",null)),this.bucket.bucketSize=s,this.bucket.tokensPerInterval=s,this.chunksize=o}setChunksize(s){if(!Number.isInteger(s)||s<=0)throw new Error("Chunk size must be an integer bigger than zero");const o=this.getRate();if(s=parseInt(s),o>0&&s>o)throw new Error("Chunk size must be smaller than rate");this.chunksize=s}throttle(s={}){if(typeof s!="object")throw new Error("Options must be an object");return new i({...s,group:this})}destroy(){for(const s of this.throttles)s.destroy();this.throttles=[]}_addThrottle(s){if(!(s instanceof i))throw new Error("Throttle must be an instance of Throttle");this.throttles.push(s)}_removeThrottle(s){const o=this.throttles.indexOf(s);o>-1&&this.throttles.splice(o,1)}}},8673:e=>{function t(){this._types=Object.create(null),this._extensions=Object.create(null);for(let r=0;r<arguments.length;r++)this.define(arguments[r]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}t.prototype.define=function(r,n){for(let i in r){let s=r[i].map(function(o){return o.toLowerCase()});i=i.toLowerCase();for(let o=0;o<s.length;o++){const a=s[o];if(a[0]!=="*"){if(!n&&a in this._types)throw new Error('Attempt to change mapping for "'+a+'" extension from "'+this._types[a]+'" to "'+i+'". Pass `force=true` to allow this, otherwise remove "'+a+'" from the list of extensions for "'+i+'".');this._types[a]=i}}if(n||!this._extensions[i]){const o=s[0];this._extensions[i]=o[0]!=="*"?o:o.substr(1)}}},t.prototype.getType=function(r){let n=(r=String(r)).replace(/^.*[/\\]/,"").toLowerCase(),i=n.replace(/^.*\./,"").toLowerCase(),s=n.length<r.length;return(i.length<n.length-1||!s)&&this._types[i]||null},t.prototype.getExtension=function(r){return(r=/^\s*([^;\s]*)/.test(r)&&RegExp.$1)&&this._extensions[r.toLowerCase()]||null},e.exports=t},8727:e=>{function t(c){return parseInt(c,10)===c}function r(c){function l(h){if(h===void 0){h=new Array(c);for(var d=0;d<c;d++)h[d]=Math.floor(Math.random()*c)}else if(typeof h=="string")h=(h=""+h).split("").map(function(b){return b.charCodeAt(0)%c});else{if(!Array.isArray(h))throw new TypeError("invalid seed key specified");if(!h.every(function(b){return typeof b=="number"&&b===(0|b)}))throw new TypeError("invalid seed key specified: not array of integers")}for(var p=h.length,m=function(){for(var b=new Array(c),w=0;w<c;w++)b[w]=w;return b}(),g=0,y=0;y<c;y++){g=(g+m[y]+h[y%p])%c;var _=m[y];m[y]=m[g],m[g]=_}return m}function f(h){this.s=l(h),this.i=0,this.j=0}return f.prototype.randomNative=function(){this.i=(this.i+1)%c,this.j=(this.j+this.s[this.i])%c;var h=this.s[this.i];return this.s[this.i]=this.s[this.j],this.s[this.j]=h,this.s[(this.s[this.i]+this.s[this.j])%c]},f.prototype.randomUInt32=function(){return 256*(256*(256*this.randomByte()+this.randomByte())+this.randomByte())+this.randomByte()},f.prototype.randomFloat=function(){return this.randomUInt32()/4294967296},f.prototype.random=function(){var h,d;if(arguments.length===1)h=0,d=arguments[0];else{if(arguments.length!==2)throw new TypeError("random takes one or two integer arguments");h=arguments[0],d=arguments[1]}if(!t(h)||!t(d))throw new TypeError("random takes one or two integer arguments");return h+this.randomUInt32()%(d-h+1)},f.prototype.currentState=function(){return{i:this.i,j:this.j,s:this.s.slice()}},f.prototype.setState=function(h){var d=h.s,p=h.i,m=h.j;if(!(p===(0|p)&&0<=p&&p<c))throw new Error("state.i should be integer [0, "+(c-1)+"]");if(!(m===(0|m)&&0<=m&&m<c))throw new Error("state.j should be integer [0, "+(c-1)+"]");if(!Array.isArray(d)||d.length!==c)throw new Error("state should be array of length "+c);for(var g=0;g<c;g++)if(d.indexOf(g)===-1)throw new Error("state should be permutation of 0.."+(c-1)+": "+g+" is missing");this.i=p,this.j=m,this.s=d.slice()},f}var n=r(256);n.prototype.randomByte=n.prototype.randomNative;var i=r(16);i.prototype.randomByte=function(){return 16*this.randomNative()+this.randomNative()};var s=97,o=48;function a(c){return c<10?String.fromCharCode(o+c):String.fromCharCode(s+c-10)}function u(c){return parseInt(c,16)}i.prototype.currentStateString=function(){var c=this.currentState();return a(c.i)+a(c.j)+c.s.map(a).join("")},i.prototype.setStateString=function(c){if(!c.match(/^[0-9a-f]{18}$/))throw new TypeError("RC4small stateString should be 18 hex character string");var l=u(c[0]),f=u(c[1]),h=c.split("").slice(2).map(u);this.setState({i:l,j:f,s:h})},n.RC4small=i,e.exports=n},8765:(e,t,r)=>{const{EventEmitter:n}=r(7007),{Transform:i}=r(8179),{wait:s}=r(2072);e.exports=class extends i{constructor(a={}){if(super(),typeof a!="object")throw new Error("Options must be an object");const u=Object.assign({},a);if(u.group&&!(u.group instanceof o))throw new Error("Group must be an instanece of ThrottleGroup");u.group||(u.group=new o(u)),this._setEnabled(u.enabled||u.group.enabled),this._group=u.group,this._emitter=new n,this._destroyed=!1,this._group._addThrottle(this)}getEnabled(){return this._enabled}getGroup(){return this._group}_setEnabled(a=!0){if(typeof a!="boolean")throw new Error("Enabled must be a boolean");this._enabled=a}setEnabled(a){this._setEnabled(a),this._enabled?this._emitter.emit("enabled"):this._emitter.emit("disabled")}_transform(a,u){this._processChunk(a,u)}async _waitForTokens(a){return new Promise((u,c)=>{let l=!1;const f=this;function h(d){if(f._emitter.removeListener("disabled",h),f._emitter.removeListener("destroyed",h),!l){if(l=!0,d)return c(d);u()}}this._emitter.once("disabled",h),this._emitter.once("destroyed",h),this._group.bucket.removeTokens(a,h)})}_areBothEnabled(){return this._enabled&&this._group.getEnabled()}async _processChunk(a,u){if(!this._areBothEnabled())return u(null,a);let c=0,l=this._group.getChunksize(),f=a.slice(c,c+l);for(;f.length>0;){if(this._areBothEnabled())try{for(;this._group.getRate()===0&&!this._destroyed&&this._areBothEnabled();)if(await s(1e3),this._destroyed)return;if(this._areBothEnabled()&&!this._group.bucket.tryRemoveTokens(f.length)&&(await this._waitForTokens(f.length),this._destroyed))return}catch(h){return u(h)}this.push(f),c+=l,l=this._areBothEnabled()?this._group.getChunksize():a.length-c,f=a.slice(c,c+l)}return u()}destroy(...a){this._group._removeThrottle(this),this._destroyed=!0,this._emitter.emit("destroyed"),super.destroy(...a)}};const o=r(8499)},8878:()=>{},9439:(e,t,r)=>{t.RateLimiter=r(3065),t.TokenBucket=r(5472)},9596:e=>{let t;e.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(t||(t=Promise.resolve())).then(r).catch(n=>setTimeout(()=>{throw n},0))},9639:(e,t,r)=>{r.d(t,{NJ:()=>y,V5:()=>o,dU:()=>p,HB:()=>_,xW:()=>u,LC:()=>c,tW:()=>T,fk:()=>a,Ht:()=>b,po:()=>I,L0:()=>g});const n="0123456789abcdef",i=[],s=[];for(let P=0;P<256;P++)i[P]=n[P>>4&15]+n[15&P],P<16&&(P<10?s[48+P]=P:s[87+P]=P);const o=P=>{const B=P.length;let D="",k=0;for(;k<B;)D+=i[P[k++]];return D},a=P=>{const B=P.length>>1,D=B<<1,k=new Uint8Array(B);let x=0,O=0;for(;O<D;)k[x++]=s[P.charCodeAt(O++)]<<4|s[P.charCodeAt(O++)];return k},u=(P,B=0)=>{const D=P.length||0;if(!B){let A=D;for(;A--;)B+=P[A].length}const k=new Uint8Array(B);let x=B,O=D;for(;O--;)x-=P[O].length,k.set(P[O],x);return k},c=(P,B)=>{if(P.length!==B.length)return!1;for(let D=P.length;D>-1;D-=1)if(P[D]!==B[D])return!1;return!0};for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=typeof Uint8Array>"u"?[]:new Uint8Array(256),h=0;h<64;h++)f[l.charCodeAt(h)]=h;const d=new TextDecoder,p=(P,B)=>B?new TextDecoder(B).decode(P):d.decode(P),m=new TextEncoder,g=P=>m.encode(P),y=P=>function(B){var D,k=new Uint8Array(B),x=k.length,O="";for(D=0;D<x;D+=3)O+=l[k[D]>>2],O+=l[(3&k[D])<<4|k[D+1]>>4],O+=l[(15&k[D+1])<<2|k[D+2]>>6],O+=l[63&k[D+2]];return x%3==2?O=O.substring(0,O.length-1)+"=":x%3==1&&(O=O.substring(0,O.length-2)+"=="),O}(P),_=P=>{let B,D="",k=0;const x=P.length;for(;k<x;)B=P.charCodeAt(k++),D+=n[B>>4]+n[15&B];return D},b=P=>{const B=a(P);if(B.length<=65536)return String.fromCharCode(...B);let D="",k=0;for(;k<B.length;)D+=String.fromCharCode(...B.subarray(k,k+=65536));return D},w=typeof window<"u"?window:self,v=w.crypto||w.msCrypto||{},S=v.subtle||v.webkitSubtle,E={hex:o,base64:y},T=async(P,B,D="sha-1")=>{if(!S)throw new Error("no web crypto support");typeof P=="string"&&(P=g(P));const k=new Uint8Array(await S.digest(D,P));return B?E[B](k):k},I=P=>{const B=new Uint8Array(P);return v.getRandomValues(B)}}},Sa={};function st(e){var t=Sa[e];if(t!==void 0)return t.exports;var r=Sa[e]={exports:{}};return Og[e](r,r.exports,st),r.exports}Er=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,st.t=function(e,t){if(1&t&&(e=this(e)),8&t||typeof e=="object"&&e&&(4&t&&e.__esModule||16&t&&typeof e.then=="function"))return e;var r=Object.create(null);st.r(r);var n={};Mi=Mi||[null,Er({}),Er([]),Er(Er)];for(var i=2&t&&e;typeof i=="object"&&!~Mi.indexOf(i);i=Er(i))Object.getOwnPropertyNames(i).forEach(s=>n[s]=()=>e[s]);return n.default=()=>e,st.d(r,n),r},st.d=(e,t)=>{for(var r in t)st.o(t,r)&&!st.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},st.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),st.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var Be=st(7007);function ti(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Ig(e,t){let r,n="",i=0,s=-1,o=0;for(let a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(r===47)break;r=47}if(r===47){if(!(s===a-1||o===1))if(s!==a-1&&o===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const u=n.lastIndexOf("/");if(u!==n.length-1){u===-1?(n="",i=0):(n=n.slice(0,u),i=n.length-1-n.lastIndexOf("/")),s=a,o=0;continue}}else if(n.length===2||n.length===1){n="",i=0,s=a,o=0;continue}}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(s+1,a):n=e.slice(s+1,a),i=a-s-1;s=a,o=0}else r===46&&o!==-1?++o:o=-1}return n}function fn(){if(arguments.length===0)return".";let e;for(let t=0;t<arguments.length;++t){const r=arguments[t];ti(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":function(t){if(ti(t),t.length===0)return".";const r=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return(t=Ig(t,!r)).length!==0||r||(t="."),t.length>0&&n&&(t+="/"),r?"/"+t:t}(e)}st(717);const Pg="/";var be=st(988),Zh=st(1467),Lg=st(8444),Rg=st(2123);const Bg=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^[Dd]esktop\\.ini$","@eaDir$"].join("|"));function Mg(e){return Bg.test(e)}var Kh=st(405),Ye=st(8190),qt=st(9596),nt=st(9639),In=(st(3468),st(2532));const Ng=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.webtorrent.dev"]],Qt=Symbol("itemPath");function Jh(e,t,r){var n;if(n=e,typeof FileList<"u"&&n instanceof FileList&&(e=Array.from(e)),Array.isArray(e)||(e=[e]),e.length===0)throw new Error("invalid input type");e.forEach(u=>{if(u==null)throw new Error(`invalid input type: ${u}`)}),(e=e.map(u=>Ca(u)&&typeof u.path=="string"&&typeof In=="function"?u.path:u)).length!==1||typeof e[0]=="string"||e[0].name||(e[0].name=t.name);let i=null;e.forEach((u,c)=>{if(typeof u=="string")return;let l=u.fullPath||u.name;l||(l=`Unknown File ${c+1}`,u.unknownName=!0),u[Qt]=l.split("/"),u[Qt][0]||u[Qt].shift(),u[Qt].length<2?i=null:c===0&&e.length>1?i=u[Qt][0]:u[Qt][0]!==i&&(i=null)}),(t.filterJunkFiles===void 0||t.filterJunkFiles)&&(e=e.filter(u=>typeof u=="string"||!function(c){const l=c[c.length-1];return l[0]==="."&&Mg(l)}(u[Qt]))),i&&e.forEach(u=>{const c=(ArrayBuffer.isView(u)||Da(u))&&!u[Qt];typeof u=="string"||c||u[Qt].shift()}),!t.name&&i&&(t.name=i),t.name||e.some(u=>typeof u=="string"?(t.name=function(c,l){ti(c);let f,h=0,d=-1,p=!0;for(f=c.length-1;f>=0;--f)if(c.charCodeAt(f)===47){if(!p){h=f+1;break}}else d===-1&&(p=!1,d=f+1);return d===-1?"":c.slice(h,d)}(u),!0):!u.unknownName&&(t.name=u[Qt][u[Qt].length-1],!0)),t.name||(t.name=`Unnamed Torrent ${Date.now()}`),t.maxPieceLength||(t.maxPieceLength=4194304);const s=e.reduce((u,c)=>u+ +(typeof c=="string"),0);let o=e.length===1;if(e.length===1&&typeof e[0]=="string"){if(typeof In!="function")throw new Error("filesystem paths do not work in the browser");Rg(e[0],(u,c)=>{if(u)return r(u);o=c,a()})}else qt(a);function a(){Ye(e.map(u=>c=>{const l={};if(Ca(u))l.getStream=u.stream(),l.length=u.size;else if(ArrayBuffer.isView(u))l.getStream=[u],l.length=u.length;else{if(!Da(u)){if(typeof u=="string"){if(typeof In!="function")throw new Error("filesystem paths do not work in the browser");return void In(u,s>1||o,c)}throw new Error("invalid input type")}l.getStream=async function*(f,h){for await(const d of f)h.length+=d.length,yield d}(u,l),l.length=0}l.path=u[Qt],c(null,l)}),(u,c)=>{if(u)return r(u);c=c.flat(),r(null,c,o)})}}const jg=5;function $g(e,t){return e+t.length}function Ca(e){return typeof Blob<"u"&&e instanceof Blob}function Da(e){return typeof e=="object"&&e!=null&&typeof e.pipe=="function"}const zg=function(e,t,r){typeof t=="function"&&([t,r]=[r,t]),Jh(e,t=t?Object.assign({},t):{},(n,i,s)=>{if(n)return r(n);t.singleFileTorrent=s,function(o,a,u){let c=a.announceList;c||(typeof a.announce=="string"?c=[[a.announce]]:Array.isArray(a.announce)&&(c=a.announce.map(d=>[d]))),c||(c=[]),globalThis.WEBTORRENT_ANNOUNCE&&(typeof globalThis.WEBTORRENT_ANNOUNCE=="string"?c.push([[globalThis.WEBTORRENT_ANNOUNCE]]):Array.isArray(globalThis.WEBTORRENT_ANNOUNCE)&&(c=c.concat(globalThis.WEBTORRENT_ANNOUNCE.map(d=>[d])))),a.announce===void 0&&a.announceList===void 0&&(c=c.concat(Ng)),typeof a.urlList=="string"&&(a.urlList=[a.urlList]);const l={info:{name:a.name},"creation date":Math.ceil((Number(a.creationDate)||Date.now())/1e3),encoding:"UTF-8"};c.length!==0&&(l.announce=c[0][0],l["announce-list"]=c),a.comment!==void 0&&(l.comment=a.comment),a.createdBy!==void 0&&(l["created by"]=a.createdBy),a.private!==void 0&&(l.info.private=Number(a.private)),a.info!==void 0&&Object.assign(l.info,a.info),a.sslCert!==void 0&&(l.info["ssl-cert"]=a.sslCert),a.urlList!==void 0&&(l["url-list"]=a.urlList);const f=o.reduce($g,0),h=a.pieceLength||Math.min(Lg(f),a.maxPieceLength);l.info["piece length"]=h,async function(d,p,m,g,y){const _=[];let b=0,w=0;const v=d.map(B=>B.getStream),S=g.onProgress;let E=0,T=0,I=!1;const P=Zh(Kh(v),p,{zeroPadding:!1});try{for await(const B of P)await new Promise(D=>{b+=B.length;const k=T;++T,++E<jg&&D(),(0,nt.tW)(B,"hex").then(x=>{_[k]=x,--E,w+=B.length,S&&S(w,m),D(),I&&E===0&&y(null,(0,nt.fk)(_.join("")),b)})});if(E===0)return y(null,(0,nt.fk)(_.join("")),b);I=!0}catch(B){y(B)}}(o,h,f,a,(d,p,m)=>{if(d)return u(d);l.info.pieces=p,o.forEach(g=>{delete g.getStream}),a.singleFileTorrent?l.info.length=m:l.info.files=o,u(null,be.A.encode(l))})}(i,t,r)})};var fe=st(7833),Ta=st(6664),Fa=st(1827),Oa=st(3208);const Js=self.fetch||(()=>{throw new Error("global fetch is not available!")}),Ia=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255],Ug=function(e){if(!ArrayBuffer.isView(e)&&typeof e!="string")throw new TypeError("base32.decode only takes Buffer or string as parameter");let t,r=0,n=0,i=0;ArrayBuffer.isView(e)||(e=(0,nt.L0)(e));const s=new Uint8Array(Math.ceil(5*e.length/8));for(let o=0;o<e.length&&e[o]!==61;o++){const a=e[o]-48;if(!(a<Ia.length))throw new Error("Invalid input - it is not base32 encoded string");n=Ia[a],r<=3?(r=(r+5)%8,r===0?(t|=n,s[i]=t,i++,t=0):t|=255&n<<8-r):(r=(r+5)%8,t|=255&n>>>r,s[i]=t,i++,t=255&n<<8-r)}return s.subarray(0,i)};function Hg(e){return e.reduce((t,r,n,i)=>{const s=r.split("-").map(o=>parseInt(o));return t.concat(((o,a=o)=>Array.from({length:a-o+1},(u,c)=>c+o))(...s))},[])}const Ni=function(e){const t={},r=e.split("magnet:?")[1];let n;return(r&&r.length>=0?r.split("&"):[]).forEach(i=>{const s=i.split("=");if(s.length!==2)return;const o=s[0];let a=s[1];o==="dn"&&(a=decodeURIComponent(a).replace(/\+/g," ")),o!=="tr"&&o!=="xs"&&o!=="as"&&o!=="ws"||(a=decodeURIComponent(a)),o==="kt"&&(a=decodeURIComponent(a).split("+")),o==="ix"&&(a=Number(a)),o==="so"&&(a=Hg(decodeURIComponent(a).split(","))),t[o]?(Array.isArray(t[o])||(t[o]=[t[o]]),t[o].push(a)):t[o]=a}),t.xt&&(Array.isArray(t.xt)?t.xt:[t.xt]).forEach(i=>{(n=i.match(/^urn:btih:(.{40})/))?t.infoHash=n[1].toLowerCase():(n=i.match(/^urn:btih:(.{32})/))?t.infoHash=(0,nt.V5)(Ug(n[1])):(n=i.match(/^urn:btmh:1220(.{64})/))&&(t.infoHashV2=n[1].toLowerCase())}),t.xs&&(Array.isArray(t.xs)?t.xs:[t.xs]).forEach(i=>{(n=i.match(/^urn:btpk:(.{64})/))&&(t.publicKey=n[1].toLowerCase())}),t.infoHash&&(t.infoHashBuffer=(0,nt.fk)(t.infoHash)),t.infoHashV2&&(t.infoHashV2Buffer=(0,nt.fk)(t.infoHashV2)),t.publicKey&&(t.publicKeyBuffer=(0,nt.fk)(t.publicKey)),t.dn&&(t.name=t.dn),t.kt&&(t.keywords=t.kt),t.announce=[],(typeof t.tr=="string"||Array.isArray(t.tr))&&(t.announce=t.announce.concat(t.tr)),t.urlList=[],(typeof t.as=="string"||Array.isArray(t.as))&&(t.urlList=t.urlList.concat(t.as)),(typeof t.ws=="string"||Array.isArray(t.ws))&&(t.urlList=t.urlList.concat(t.ws)),t.peerAddresses=[],(typeof t["x.pe"]=="string"||Array.isArray(t["x.pe"]))&&(t.peerAddresses=t.peerAddresses.concat(t["x.pe"])),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList)),t.peerAddresses=Array.from(new Set(t.peerAddresses)),t};async function ys(e){if(typeof e=="string"&&/^(stream-)?magnet:/.test(e)){const t=Ni(e);if(!t.infoHash)throw new Error("Invalid torrent identifier");return t}if(typeof e=="string"&&(/^[a-f0-9]{40}$/i.test(e)||/^[a-z2-7]{32}$/i.test(e)))return Ni(`magnet:?xt=urn:btih:${e}`);if(ArrayBuffer.isView(e)&&e.length===20)return Ni(`magnet:?xt=urn:btih:${(0,nt.V5)(e)}`);if(ArrayBuffer.isView(e))return await async function(t){ArrayBuffer.isView(t)&&(t=be.A.decode(t)),nr(t.info,"info"),nr(t.info["name.utf-8"]||t.info.name,"info.name"),nr(t.info["piece length"],"info['piece length']"),nr(t.info.pieces,"info.pieces"),t.info.files?t.info.files.forEach(s=>{nr(typeof s.length=="number","info.files[0].length"),nr(s["path.utf-8"]||s.path,"info.files[0].path")}):nr(typeof t.info.length=="number","info.length");const r={info:t.info,infoBuffer:be.A.encode(t.info),name:(0,nt.dU)(t.info["name.utf-8"]||t.info.name),announce:[]};r.infoHashBuffer=await(0,nt.tW)(r.infoBuffer),r.infoHash=(0,nt.V5)(r.infoHashBuffer),t.info.private!==void 0&&(r.private=!!t.info.private),t["creation date"]&&(r.created=new Date(1e3*t["creation date"])),t["created by"]&&(r.createdBy=(0,nt.dU)(t["created by"])),ArrayBuffer.isView(t.comment)&&(r.comment=(0,nt.dU)(t.comment)),Array.isArray(t["announce-list"])&&t["announce-list"].length>0?t["announce-list"].forEach(s=>{s.forEach(o=>{r.announce.push((0,nt.dU)(o))})}):t.announce&&r.announce.push((0,nt.dU)(t.announce)),ArrayBuffer.isView(t["url-list"])&&(t["url-list"]=t["url-list"].length>0?[t["url-list"]]:[]),r.urlList=(t["url-list"]||[]).map(s=>(0,nt.dU)(s)),r.announce=Array.from(new Set(r.announce)),r.urlList=Array.from(new Set(r.urlList));const n=t.info.files||[t.info];r.files=n.map((s,o)=>{const a=[].concat(r.name,s["path.utf-8"]||s.path||[]).map(u=>ArrayBuffer.isView(u)?(0,nt.dU)(u):u);return{path:fn.apply(null,[Pg].concat(a)).slice(1),name:a[a.length-1],length:s.length,offset:n.slice(0,o).reduce(Pa,0)}}),r.length=n.reduce(Pa,0);const i=r.files[r.files.length-1];return r.pieceLength=t.info["piece length"],r.lastPieceLength=(i.offset+i.length)%r.pieceLength||r.pieceLength,r.pieces=function(s){const o=[];for(let a=0;a<s.length;a+=20)o.push((0,nt.V5)(s.slice(a,a+20)));return o}(t.info.pieces),r}(e);if(e&&e.infoHash)return e.infoHash=e.infoHash.toLowerCase(),e.announce||(e.announce=[]),typeof e.announce=="string"&&(e.announce=[e.announce]),e.urlList||(e.urlList=[]),e;throw new Error("Invalid torrent identifier")}async function Yh(e,t,r){if(typeof t=="function")return Yh(e,{},t);if(typeof r!="function")throw new Error("second argument must be a Function");let n;try{n=await ys(e)}catch{}if(n&&n.infoHash)qt(()=>{r(null,n)});else if(i=e,typeof Blob<"u"&&i instanceof Blob)try{s(new Uint8Array(await e.arrayBuffer()))}catch(o){return r(new Error(`Error converting Blob: ${o.message}`))}else if(/^https?:/.test(e))try{const o=await Js(e,{headers:{"user-agent":"WebTorrent (https://webtorrent.io)"},signal:AbortSignal.timeout(3e4),...t});s(new Uint8Array(await o.arrayBuffer()))}catch(o){return r(new Error(`Error downloading torrent: ${o.message}`))}else typeof Oa.readFile=="function"&&typeof e=="string"?Oa.readFile(e,(o,a)=>{if(o)return r(new Error("Invalid torrent identifier"));s(a)}):qt(()=>{r(new Error("Invalid torrent identifier"))});var i;async function s(o){try{n=await ys(o)}catch(a){return r(a)}n&&n.infoHash?r(null,n):r(new Error("Invalid torrent identifier"))}}function Pa(e,t){return e+t.length}function nr(e,t){if(!e)throw new Error(`Torrent is missing required field: ${t}`)}const zn=ys,qg=function(e){e=Object.assign({},e);let t=new Set;e.xt&&typeof e.xt=="string"&&t.add(e.xt),e.xt&&Array.isArray(e.xt)&&(t=new Set(e.xt)),e.infoHashBuffer&&t.add(`urn:btih:${(0,nt.V5)(e.infoHashBuffer)}`),e.infoHash&&t.add(`urn:btih:${e.infoHash}`),e.infoHashV2Buffer&&t.add(e.xt=`urn:btmh:1220${(0,nt.V5)(e.infoHashV2Buffer)}`),e.infoHashV2&&t.add(`urn:btmh:1220${e.infoHashV2}`);const r=Array.from(t);r.length===1&&(e.xt=r[0]),r.length>1&&(e.xt=r),e.publicKeyBuffer&&(e.xs=`urn:btpk:${(0,nt.V5)(e.publicKeyBuffer)}`),e.publicKey&&(e.xs=`urn:btpk:${e.publicKey}`),e.name&&(e.dn=e.name),e.keywords&&(e.kt=e.keywords),e.announce&&(e.tr=e.announce),e.urlList&&(e.ws=e.urlList,delete e.as),e.peerAddresses&&(e["x.pe"]=e.peerAddresses);let n="magnet:?";return Object.keys(e).filter(i=>i.length===2||i==="x.pe").forEach((i,s)=>{const o=Array.isArray(e[i])?e[i]:[e[i]];var a;o.forEach((u,c)=>{(s>0||c>0)&&(i!=="kt"&&i!=="so"||c===0)&&(n+="&"),i==="dn"&&(u=encodeURIComponent(u).replace(/%20/g,"+")),i!=="tr"&&i!=="as"&&i!=="ws"||(u=encodeURIComponent(u)),i!=="xs"||u.startsWith("urn:btpk:")||(u=encodeURIComponent(u)),i==="kt"&&(u=encodeURIComponent(u)),i!=="so"&&(n+=i==="kt"&&c>0?`+${u}`:`${i}=${u}`)}),i==="so"&&(n+=`${i}=${a=o,a.reduce((u,c,l,f)=>(l!==0&&c===f[l-1]+1||u.push([]),u[u.length-1].push(c),u),[]).map(u=>u.length>1?`${u[0]}-${u[u.length-1]}`:`${u[0]}`)}`)}),n},Pe=typeof window<"u"?window:self,ws=Pe.RTCPeerConnection||Pe.mozRTCPeerConnection||Pe.webkitRTCPeerConnection,Vg=Pe.RTCSessionDescription||Pe.mozRTCSessionDescription||Pe.webkitRTCSessionDescription,Wg=Pe.RTCIceCandidate||Pe.mozRTCIceCandidate||Pe.webkitRTCIceCandidate;var fi=st(8179),It=st(6310);const Gg=fe("simple-peer"),ji=65536;function La(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class fr extends fi.Duplex{constructor(r){super(r=Object.assign({allowHalfOpen:!1},r));Zt(this,"_pc");if(this.__objectMode=!!r.objectMode,this._id=(0,nt.V5)((0,nt.po)(4)).slice(0,7),this._debug("new peer %o",r),this.channelName=r.initiator?r.channelName||(0,nt.V5)((0,nt.po)(20)):null,this.initiator=r.initiator||!1,this.channelConfig=r.channelConfig||fr.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},fr.config,r.config),this.offerOptions=r.offerOptions||{},this.answerOptions=r.answerOptions||{},this.sdpTransform=r.sdpTransform||(n=>n),this.trickle=r.trickle===void 0||r.trickle,this.allowHalfTrickle=r.allowHalfTrickle!==void 0&&r.allowHalfTrickle,this.iceCompleteTimeout=r.iceCompleteTimeout||5e3,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!ws)throw It(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new ws(this.config)}catch(n){return void this.__destroy(It(n,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=n=>{this._onIceCandidate(n)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(n=>{this.__destroy(It(n,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=n=>{this._setupData(n)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(r){if(!this._destroying){if(this.destroyed)throw It(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof r=="string")try{r=JSON.parse(r)}catch{r={}}this._debug("signal()"),r.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),r.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(r.transceiverRequest.kind,r.transceiverRequest.init)),r.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(r.candidate):this._pendingCandidates.push(r.candidate)),r.sdp&&this._pc.setRemoteDescription(new Vg(r)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(n=>{this._addIceCandidate(n)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(n=>{this.__destroy(It(n,"ERR_SET_REMOTE_DESCRIPTION"))}),r.sdp||r.candidate||r.renegotiate||r.transceiverRequest||this.__destroy(It(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(r){const n=new Wg(r);this._pc.addIceCandidate(n).catch(i=>{var s;!n.address||n.address.endsWith(".local")?(s="Ignoring unsupported ICE candidate.",console.warn(s)):this.__destroy(It(i,"ERR_ADD_ICE_CANDIDATE"))})}send(r){if(!this._destroying){if(this.destroyed)throw It(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(r)}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,queueMicrotask(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this._destroying){if(this.destroyed)throw It(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}_final(r){this._readableState.ended||this.push(null),r(null)}__destroy(r){this.end(),this._destroy(()=>{},r)}_destroy(r,n){this.destroyed||this._destroying||(this._destroying=!0,this._debug("destroying (error: %s)",n&&(n.message||n)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,n&&this.emit("error",n),r()},0))}_setupData(r){if(!r.channel)return this.__destroy(It(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=r.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=ji),this.channelName=this._channel.label,this._channel.onmessage=i=>{this._onChannelMessage(i)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=i=>{const s=i.error instanceof Error?i.error:new Error(`Datachannel error: ${i.message} ${i.filename}:${i.lineno}:${i.colno}`);this.__destroy(It(s,"ERR_DATA_CHANNEL"))};let n=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(n&&this._onChannelClose(),n=!0):n=!1},5e3)}_write(r,n){if(this.destroyed)return n(It(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(r)}catch(i){return this.__destroy(It(i,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>ji?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=r,this._cb=n}_onFinish(){if(this.destroyed)return;const r=()=>{setTimeout(()=>this.__destroy(),1e3)};this._connected?r():this.once("connect",r)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(r=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(r.sdp=La(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const n=()=>{if(this.destroyed)return;const i=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:i.type,sdp:i.sdp})};this._pc.setLocalDescription(r).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?n():this.once("_iceComplete",n))}).catch(i=>{this.__destroy(It(i,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(r=>{this.__destroy(It(r,"ERR_CREATE_OFFER"))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(r=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(r.sdp=La(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const n=()=>{var s;if(this.destroyed)return;const i=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:i.type,sdp:i.sdp}),this.initiator||((s=this._requestMissingTransceivers)==null||s.call(this))};this._pc.setLocalDescription(r).then(()=>{this.destroyed||(this.trickle||this._iceComplete?n():this.once("_iceComplete",n))}).catch(i=>{this.__destroy(It(i,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(r=>{this.__destroy(It(r,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._destroying||this._pc.connectionState==="failed"&&this.__destroy(It(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const r=this._pc.iceConnectionState,n=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",r,n),this.emit("iceStateChange",r,n),r!=="connected"&&r!=="completed"||(this._pcReady=!0,this._maybeReady()),r==="failed"&&this.__destroy(It(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),r==="closed"&&this.__destroy(It(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(r){const n=i=>(Object.prototype.toString.call(i.values)==="[object Array]"&&i.values.forEach(s=>{Object.assign(i,s)}),i);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{const s=[];i.forEach(o=>{s.push(n(o))}),r(null,s)},i=>r(i)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(this.destroyed)return;const s=[];i.result().forEach(o=>{const a={};o.names().forEach(u=>{a[u]=o.stat(u)}),a.id=o.id,a.type=o.type,a.timestamp=o.timestamp,s.push(n(a))}),r(null,s)},i=>r(i)):r(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const r=()=>{this.destroyed||this._destroying||this.getStats((n,i)=>{if(this.destroyed||this._destroying)return;n&&(i=[]);const s={},o={},a={};let u=!1;i.forEach(l=>{l.type!=="remotecandidate"&&l.type!=="remote-candidate"||(s[l.id]=l),l.type!=="localcandidate"&&l.type!=="local-candidate"||(o[l.id]=l),l.type!=="candidatepair"&&l.type!=="candidate-pair"||(a[l.id]=l)});const c=l=>{u=!0;let f=o[l.localCandidateId];f&&(f.ip||f.address)?(this.localAddress=f.ip||f.address,this.localPort=Number(f.port)):f&&f.ipAddress?(this.localAddress=f.ipAddress,this.localPort=Number(f.portNumber)):typeof l.googLocalAddress=="string"&&(f=l.googLocalAddress.split(":"),this.localAddress=f[0],this.localPort=Number(f[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let h=s[l.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof l.googRemoteAddress=="string"&&(h=l.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(l=>{l.type==="transport"&&l.selectedCandidatePairId&&c(a[l.selectedCandidatePairId]),(l.type==="googCandidatePair"&&l.googActiveConnection==="true"||(l.type==="candidatepair"||l.type==="candidate-pair")&&l.selected)&&c(l)}),u||Object.keys(a).length&&!Object.keys(o).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(f){return this.__destroy(It(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const l=this._cb;this._cb=null,l(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(r,100)})};r()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>ji||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(r=>{this._pc.removeTrack(r),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(r){this.destroyed||(r.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:r.candidate.candidate,sdpMLineIndex:r.candidate.sdpMLineIndex,sdpMid:r.candidate.sdpMid}}):r.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),r.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(r){if(this.destroyed)return;let n=r.data;n instanceof ArrayBuffer?n=new Uint8Array(n):this.__objectMode===!1&&(n=(0,nt.L0)(n)),this.push(n)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const r=this._cb;this._cb=null,r(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.__destroy())}_debug(){const r=[].slice.call(arguments);r[0]="["+this._id+"] "+r[0],Gg.apply(null,r)}}fr.WEBRTC_SUPPORT=!!ws,fr.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},fr.channelConfig={};const Ys=fr;var ei=st(1035),Ra=st(7541),Ba=st(3278),vs=st(8271),Xh=st(6686),Ma=st(7828),Na=st(6889);const Zg=/^\[?([^\]]+)]?:(\d+)$/;let Wr=new Map;function Gr(e){if(Wr.size===1e5&&Wr.clear(),!Wr.has(e)){const t=Zg.exec(e);if(!t)throw new Error(`invalid addr: ${e}`);Wr.set(e,[t[1],Number(t[2])])}return Wr.get(e)}var ri=st(3033),Kg=st(4497);async function*Jg(e,t={}){if(e!=null&&e[Symbol.asyncIterator])return void(yield*e[Symbol.asyncIterator](t.offset));if(!(e!=null&&e.get))throw new Error("First argument must be an abstract-chunk-store compliant store");const r=t.chunkLength||e.chunkLength;if(!r)throw new Error("missing required `chunkLength` property");let n=t.length||e.length;if(!Number.isFinite(n))throw new Error("missing required `length` property");const i=t.offset||0,s=(u,c,l)=>new Promise((f,h)=>{e.get(u,{offset:l,length:c},(d,p)=>{d&&h(d),f(p)})});let o=Math.floor(i/r);const a=i%r;if(i){const u=Math.min(n,r-a);n-=u,yield s(o++,u,a)}for(let u=n;u>0;++o,u-=r)yield s(o,Math.min(u,r))}async function Yg(e,t,r={}){if(!(e!=null&&e.put))throw new Error("First argument must be an abstract-chunk-store compliant store");const n=r.chunkLength||e.chunkLength;if(!n)throw new Error("missing required `chunkLength` property");const i=r.storeMaxOutstandingPuts||16;let s=0,o=0,a=()=>{},u=!1;for await(const c of Zh(t,n,{zeroPadding:r.zeroPadding||!1}))await new Promise((l,f)=>{s++<=i&&l(),e.put(o++,c,h=>{if(h)return f(h);--s,l(),u&&s===0&&a()})});s!==0&&(u=new Promise(c=>{a=c}),await u)}var Xg=st(4018),ja=st(3970),Qh=st(3519),Qg=st(1551);const xs={DEFAULT_ANNOUNCE_PEERS:50,MAX_ANNOUNCE_PEERS:82,parseUrl:e=>{const t=new URL(e.replace(/^udp:/,"http:"));return e.match(/^udp:/)&&Object.defineProperties(t,{href:{value:t.href.replace(/^http/,"udp")},protocol:{value:t.protocol.replace(/^http/,"udp")},origin:{value:t.origin.replace(/^http/,"udp")}}),t},...st.t(Qg,2)};var $a=st(826),za=st(61),rn=st(2701);const tb=fe("simple-websocket"),Qr=typeof rn!="function"?WebSocket:rn;class tf extends fi.Duplex{constructor(t={}){if(typeof t=="string"&&(t={url:t}),super(t=Object.assign({allowHalfOpen:!1},t)),this.__objectMode=!!t.objectMode,t.objectMode!=null&&delete t.objectMode,t.url==null&&t.socket==null)throw new Error("Missing required `url` or `socket` option");if(t.url!=null&&t.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=(0,nt.V5)((0,nt.po)(4)).slice(0,7),this._debug("new websocket: %o",t),this.connected=!1,this._chunk=null,this._cb=null,this._interval=null,t.socket)this.url=t.socket.url,this._ws=t.socket,this.connected=t.socket.readyState===Qr.OPEN;else{this.url=t.url;try{this._ws=typeof rn=="function"?new Qr(t.url,{...t,encoding:void 0}):new Qr(t.url)}catch(r){return void qt(()=>this.destroy(r))}}this._ws.binaryType="arraybuffer",t.socket&&this.connected?qt(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=r=>this._handleMessage(r),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=r=>this._handleError(r),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(t){this._ws.send(t)}_final(t){this._readableState.ended||this.push(null),t(null)}_destroy(t){if(!this.destroyed){if(this._writableState.ended||this.end(),this.connected=!1,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){const r=this._ws,n=()=>{r.onclose=null};if(r.readyState===Qr.CLOSED)n();else try{r.onclose=n,r.close()}catch{n()}r.onopen=null,r.onmessage=null,r.onerror=()=>{}}this._ws=null,t()}}_write(t,r){if(this.destroyed)return r(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(t)}catch(n){return this.destroy(n)}typeof rn!="function"&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=t,this._cb=r}_handleOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(r){return this.destroy(r)}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}typeof rn!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(t){if(this.destroyed)return;let r=t.data;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),this.__objectMode===!1&&(r=(0,nt.L0)(r)),this.push(r)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(t){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?t():this.once("connect",t)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>65536)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],tb.apply(null,t)}}tf.WEBSOCKET_SUPPORT=!!Qr;const eb=class extends Be{constructor(e,t){super(),this.client=e,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(e){e==null&&(e=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),e&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},e),this.interval.unref&&this.interval.unref())}},se=fe("bittorrent-tracker:websocket-tracker"),Ce={};class ks extends eb{constructor(t,r){super(t,r),se("new websocket tracker %s",r),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(t){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.announce(t)});const r=Object.assign({},t,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(r.trackerid=this._trackerId),t.event==="stopped"||t.event==="completed")this._send(r);else{const n=Math.min(t.numwant,5);this._generateOffers(n,i=>{r.numwant=n,r.offers=i,this._send(r)})}}scrape(t){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.scrape(t)});const r={action:"scrape",info_hash:Array.isArray(t.infoHash)&&t.infoHash.length>0?t.infoHash.map(n=>(0,nt.Ht)(n)):t.infoHash&&(0,nt.Ht)(t.infoHash)||this.client._infoHashBinary};this._send(r)}destroy(t=Ua){if(this.destroyed)return t(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(const s in this.peers){const o=this.peers[s];clearTimeout(o.trackerTimeout),o.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,Ce[this.announceUrl]&&(Ce[this.announceUrl].consumers-=1),Ce[this.announceUrl].consumers>0)return t();let r,n=Ce[this.announceUrl];if(delete Ce[this.announceUrl],n.on("error",Ua),n.once("close",t),!this.expectingResponse)return i();function i(){r&&(clearTimeout(r),r=null),n.removeListener("data",i),n.destroy(),n=null}r=setTimeout(i,xs.DESTROY_TIMEOUT),n.once("data",i)}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=t=>{this._onSocketError(t)},this._onSocketDataBound=t=>{this._onSocketData(t)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=Ce[this.announceUrl],this.socket)Ce[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{const t=new URL(this.announceUrl);let r;this.client._proxyOpts&&(r=t.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!r&&this.client._proxyOpts.socksProxy&&(r=this.client._proxyOpts.socksProxy)),this.socket=Ce[this.announceUrl]=new tf({url:this.announceUrl,agent:r}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(t){if(!this.destroyed){this.expectingResponse=!1;try{t=JSON.parse((0,nt.dU)(t))}catch{return void this.client.emit("warning",new Error("Invalid tracker response"))}t.action==="announce"?this._onAnnounceResponse(t):t.action==="scrape"?this._onScrapeResponse(t):this._onSocketError(new Error(`invalid action in WS response: ${t.action}`))}}_onAnnounceResponse(t){if(t.info_hash!==this.client._infoHashBinary)return void se("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,(0,nt.HB)(t.info_hash),this.client.infoHash);if(t.peer_id&&t.peer_id===this.client._peerIdBinary)return;se("received %s from %s for %s",JSON.stringify(t),this.announceUrl,this.client.infoHash);const r=t["failure reason"];if(r)return this.client.emit("warning",new Error(r));const n=t["warning message"];n&&this.client.emit("warning",new Error(n));const i=t.interval||t["min interval"];i&&this.setInterval(1e3*i);const s=t["tracker id"];if(s&&(this._trackerId=s),t.complete!=null){const a=Object.assign({},t,{announce:this.announceUrl,infoHash:(0,nt.HB)(t.info_hash)});this.client.emit("update",a)}let o;if(t.offer&&t.peer_id&&(se("creating peer (from remote offer)"),o=this._createPeer(),o.id=(0,nt.HB)(t.peer_id),o.once("signal",a=>{const u={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:t.peer_id,answer:a,offer_id:t.offer_id};this._trackerId&&(u.trackerid=this._trackerId),this._send(u)}),this.client.emit("peer",o),o.signal(t.offer)),t.answer&&t.peer_id){const a=(0,nt.HB)(t.offer_id);o=this.peers[a],o?(o.id=(0,nt.HB)(t.peer_id),this.client.emit("peer",o),o.signal(t.answer),clearTimeout(o.trackerTimeout),o.trackerTimeout=null,delete this.peers[a]):se(`got unexpected answer: ${JSON.stringify(t.answer)}`)}}_onScrapeResponse(t){t=t.files||{};const r=Object.keys(t);r.length!==0?r.forEach(n=>{const i=Object.assign(t[n],{announce:this.announceUrl,infoHash:(0,nt.HB)(n)});this.client.emit("scrape",i)}):this.client.emit("warning",new Error("invalid scrape response"))}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(t){this.destroyed||(this.destroy(),this.client.emit("warning",t),this._startReconnectTimer())}_startReconnectTimer(){const t=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},t),this.reconnectTimer.unref&&this.reconnectTimer.unref(),se("reconnecting socket in %s ms",t)}_send(t){if(this.destroyed)return;this.expectingResponse=!0;const r=JSON.stringify(t);se("send %s",r),this.socket.send(r)}_generateOffers(t,r){const n=this,i=[];se("generating %s offers",t);for(let a=0;a<t;++a)s();function s(){const a=(0,nt.V5)((0,nt.po)(20));se("creating peer (from _generateOffers)");const u=n.peers[a]=n._createPeer({initiator:!0});u.once("signal",c=>{i.push({offer:c,offer_id:(0,nt.Ht)(a)}),o()}),u.trackerTimeout=setTimeout(()=>{se("tracker timeout: destroying peer"),u.trackerTimeout=null,delete n.peers[a],u.destroy()},5e4),u.trackerTimeout.unref&&u.trackerTimeout.unref()}function o(){i.length===t&&(se("generated %s offers",t),r(i))}o()}_createPeer(t){const r=this;t=Object.assign({trickle:!1,config:r.client._rtcConfig,wrtc:r.client._wrtc},t);const n=new Ys(t);return n.once("error",i),n.once("connect",function s(){n.removeListener("error",i),n.removeListener("connect",s)}),n;function i(s){r.client.emit("warning",new Error(`Connection error: ${s.message}`)),n.destroy()}}}function Ua(){}ks.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,ks._socketPool=Ce;const rb=ks;var nb=st(717);const He=fe("bittorrent-tracker:client");class Es extends Be{constructor(t={}){if(super(),!t.peerId)throw new Error("Option `peerId` is required");if(!t.infoHash)throw new Error("Option `infoHash` is required");if(!t.announce)throw new Error("Option `announce` is required");if(!nb.browser&&!t.port)throw new Error("Option `port` is required");this.peerId=typeof t.peerId=="string"?t.peerId:(0,nt.V5)(t.peerId),this._peerIdBuffer=(0,nt.fk)(this.peerId),this._peerIdBinary=(0,nt.Ht)(this.peerId),this.infoHash=typeof t.infoHash=="string"?t.infoHash.toLowerCase():(0,nt.V5)(t.infoHash),this._infoHashBuffer=(0,nt.fk)(this.infoHash),this._infoHashBinary=(0,nt.Ht)(this.infoHash),He("new client %s",this.infoHash),this.destroyed=!1,this._port=t.port,this._getAnnounceOpts=t.getAnnounceOpts,this._rtcConfig=t.rtcConfig,this._userAgent=t.userAgent,this._proxyOpts=t.proxyOpts,this._wrtc=typeof t.wrtc=="function"?t.wrtc():t.wrtc;let r=typeof t.announce=="string"?[t.announce]:t.announce==null?[]:t.announce;r=r.map(s=>(ArrayBuffer.isView(s)&&(s=(0,nt.dU)(s)),s[s.length-1]==="/"&&(s=s.substring(0,s.length-1)),s)),r=Array.from(new Set(r));const n=this._wrtc!==!1&&(!!this._wrtc||Ys.WEBRTC_SUPPORT),i=s=>{qt(()=>{this.emit("warning",s)})};this._trackers=r.map(s=>{let o;try{o=xs.parseUrl(s)}catch{return i(new Error(`Invalid tracker URL: ${s}`)),null}const a=o.port;if(a<0||a>65535)return i(new Error(`Invalid tracker port: ${s}`)),null;const u=o.protocol;return u!=="http:"&&u!=="https:"||typeof $a!="function"?u==="udp:"&&typeof za=="function"?new za(this,s):u!=="ws:"&&u!=="wss:"||!n||u==="ws:"&&typeof window<"u"&&window.location.protocol==="https:"?(i(new Error(`Unsupported tracker protocol: ${s}`)),null):new rb(this,s):new $a(this,s)}).filter(Boolean)}start(t){(t=this._defaultAnnounceOpts(t)).event="started",He("send `start` %o",t),this._announce(t),this._trackers.forEach(r=>{r.setInterval()})}stop(t){(t=this._defaultAnnounceOpts(t)).event="stopped",He("send `stop` %o",t),this._announce(t)}complete(t){t||(t={}),(t=this._defaultAnnounceOpts(t)).event="completed",He("send `complete` %o",t),this._announce(t)}update(t){(t=this._defaultAnnounceOpts(t)).event&&delete t.event,He("send `update` %o",t),this._announce(t)}_announce(t){this._trackers.forEach(r=>{r.announce(t)})}scrape(t){He("send `scrape`"),t||(t={}),this._trackers.forEach(r=>{r.scrape(t)})}setInterval(t){He("setInterval %d",t),this._trackers.forEach(r=>{r.setInterval(t)})}destroy(t){if(this.destroyed)return;this.destroyed=!0,He("destroy");const r=this._trackers.map(n=>i=>{n.destroy(i)});Ye(r,t),this._trackers=[],this._getAnnounceOpts=null}_defaultAnnounceOpts(t={}){return t.numwant==null&&(t.numwant=xs.DEFAULT_ANNOUNCE_PEERS),t.uploaded==null&&(t.uploaded=0),t.downloaded==null&&(t.downloaded=0),this._getAnnounceOpts&&(t=Object.assign({},t,this._getAnnounceOpts())),t}}Es.scrape=(e,t)=>{if(t=Qh(t),!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");const r=Object.assign({},e,{infoHash:Array.isArray(e.infoHash)?e.infoHash[0]:e.infoHash,peerId:(0,nt.L0)("01234567890123456789"),port:6881}),n=new Es(r);n.once("error",t),n.once("warning",t);let i=Array.isArray(e.infoHash)?e.infoHash.length:1;const s={};return n.on("scrape",o=>{if(i-=1,s[o.infoHash]=o,i===0){n.destroy();const a=Object.keys(s);a.length===1?t(null,s[a[0]]):t(null,s)}}),n.scrape({infoHash:e.infoHash}),n};const ib=Es;st(7936);var Ha=st(2799),sb=st(717);const qa=fe("torrent-discovery");class ob extends Be.EventEmitter{constructor(t){if(super(),!t.peerId)throw new Error("Option `peerId` is required");if(!t.infoHash)throw new Error("Option `infoHash` is required");if(!sb.browser&&!t.port)throw new Error("Option `port` is required");this.peerId=typeof t.peerId=="string"?t.peerId:t.peerId.toString("hex"),this.infoHash=typeof t.infoHash=="string"?t.infoHash.toLowerCase():t.infoHash.toString("hex"),this._port=t.port,this._userAgent=t.userAgent,this.destroyed=!1,this._announce=t.announce||[],this._intervalMs=t.intervalMs||9e5,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=n=>{this.emit("warning",n)},this._onError=n=>{this.emit("error",n)},this._onDHTPeer=(n,i)=>{i.toString("hex")===this.infoHash&&this.emit("peer",`${n.host}:${n.port}`,"dht")},this._onTrackerPeer=n=>{this.emit("peer",n,"tracker")},this._onTrackerAnnounce=()=>{this.emit("trackerAnnounce")},this._onLSDPeer=(n,i)=>{this.emit("peer",n,"lsd")};const r=(n,i)=>{const s=new ja.Client(i);return s.on("warning",this._onWarning),s.on("error",this._onError),s.listen(n),this._internalDHT=!0,s};t.tracker===!1?this.tracker=null:t.tracker&&typeof t.tracker=="object"?(this._trackerOpts=Object.assign({},t.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),t.dht===!1||typeof ja.Client!="function"?this.dht=null:t.dht&&typeof t.dht.addNode=="function"?this.dht=t.dht:t.dht&&typeof t.dht=="object"?this.dht=r(t.dhtPort,t.dht):this.dht=r(t.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce()),t.lsd===!1||typeof Ha!="function"?this.lsd=null:this.lsd=this._createLSD()}updatePort(t){t!==this._port&&(this._port=t,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(t){this.tracker&&this.tracker.complete(t)}destroy(t){if(this.destroyed)return;this.destroyed=!0,clearTimeout(this._dhtTimeout);const r=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),r.push(n=>{this.tracker.destroy(n)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),r.push(n=>{this.dht.destroy(n)})),this.lsd&&(this.lsd.removeListener("warning",this._onWarning),this.lsd.removeListener("error",this._onError),this.lsd.removeListener("peer",this._onLSDPeer),r.push(n=>{this.lsd.destroy(n)})),Ye(r,t),this.dht=null,this.tracker=null,this.lsd=null,this._announce=null}_createTracker(){const t=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),r=new ib(t);return r.on("warning",this._onWarning),r.on("error",this._onError),r.on("peer",this._onTrackerPeer),r.on("update",this._onTrackerAnnounce),r.setInterval(this._intervalMs),r.start(),r}_dhtAnnounce(){this._dhtAnnouncing||(qa("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,t=>{this._dhtAnnouncing=!1,qa("dht announce complete"),t&&this.emit("warning",t),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+Math.floor(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}_createLSD(){const t=Object.assign({},{infoHash:this.infoHash,peerId:this.peerId,port:this._port}),r=new Ha(t);return r.on("warning",this._onWarning),r.on("error",this._onError),r.on("peer",this._onLSDPeer),r.start(),r}}const ab=ob,ub=["seeking position failed.","InvalidStateError"],cb=["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],$i=e=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${e}`,"SyntaxError"];class Pn extends WritableStream{constructor(t){super(t),Object.setPrototypeOf(this,FileSystemWritableFileStream.prototype),this._closed=!1}async close(){this._closed=!0;const t=this.getWriter(),r=t.close();return t.releaseLock(),r}seek(t){return this.write({type:"seek",position:t})}truncate(t){return this.write({type:"truncate",size:t})}write(t){if(this._closed)return Promise.reject(new TypeError("Cannot write to a CLOSED writable stream"));const r=this.getWriter(),n=r.write(t);return r.releaseLock(),n}}if(Object.defineProperty(Pn.prototype,Symbol.toStringTag,{value:"FileSystemWritableFileStream",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Pn.prototype,{close:{enumerable:!0},seek:{enumerable:!0},truncate:{enumerable:!0},write:{enumerable:!0}}),!globalThis.FileSystemFileHandle||globalThis.FileSystemFileHandle.prototype.createWritable||globalThis.FileSystemWritableFileStream||(globalThis.FileSystemWritableFileStream=Pn),globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable){const e=new WeakMap;let t;const r=()=>{let i,s;onmessage=async o=>{const a=o.ports[0],u=o.data;switch(u.type){case"open":{const c=u.name;let l=await navigator.storage.getDirectory();for(const f of u.path)l=await l.getDirectoryHandle(f);i=await l.getFileHandle(c),s=await i.createSyncAccessHandle();break}case"write":s.write(u.data,{at:u.position}),s.flush();break;case"truncate":s.truncate(u.size);break;case"abort":case"close":s.close()}a.postMessage(0)}};globalThis.FileSystemFileHandle.prototype.createWritable=async function(i){if(!t){const d=`(${r.toString()})()`,p=new Blob([d],{type:"text/javascript"});t=URL.createObjectURL(p)}const s=new Worker(t,{type:"module"});let o=0;const a=new TextEncoder;let u=await this.getFile().then(d=>d.size);const c=d=>new Promise((p,m)=>{const g=new MessageChannel;g.port1.onmessage=y=>{y.data instanceof Error?m(y.data):p(y.data),g.port1.close(),g.port2.close(),g.port1.onmessage=null},s.postMessage(d,[g.port2])}),l=await navigator.storage.getDirectory(),f=await e.get(this),h=await l.resolve(f);if(h===null)throw new DOMException(...cb);return await c({type:"open",path:h,name:this.name}),(i==null?void 0:i.keepExistingData)===!1&&(await c({type:"truncate",size:0}),u=0),new Pn({async write(d){if((d=(d==null?void 0:d.constructor)===Object?{...d}:{type:"write",data:d,position:o}).type==="write"){if(!("data"in d))throw await c({type:"close"}),new DOMException(...$i("write requires a data argument"));if(d.position??(d.position=o),typeof d.data=="string")d.data=a.encode(d.data);else if(d.data instanceof ArrayBuffer)d.data=new Uint8Array(d.data);else if(d.data instanceof Uint8Array||!ArrayBuffer.isView(d.data)){if(!(d.data instanceof Uint8Array)){const p=await new Response(d.data).arrayBuffer();d.data=new Uint8Array(p)}}else d.data=new Uint8Array(d.data.buffer,d.data.byteOffset,d.data.byteLength);Number.isInteger(d.position)&&d.position>=0&&(o=d.position),o+=d.data.byteLength,u+=d.data.byteLength}else{if(d.type==="seek"){if(Number.isInteger(d.position)&&d.position>=0){if(u<d.position)throw new DOMException(...ub);return void(o=d.position)}throw await c({type:"close"}),new DOMException(...$i("seek requires a position argument"))}if(d.type==="truncate"){if(!(Number.isInteger(d.size)&&d.size>=0))throw await c({type:"close"}),new DOMException(...$i("truncate requires a size argument"));u=d.size,o>u&&(o=u)}}await c(d)},async close(){await c({type:"close"}),s.terminate()},async abort(d){await c({type:"abort",reason:d}),s.terminate()}})};const n=FileSystemDirectoryHandle.prototype.getFileHandle;FileSystemDirectoryHandle.prototype.getFileHandle=async function(...i){const s=await n.call(this,...i);return e.set(s,this),s}}const lb=/[<>:"/\\|?*\u0000-\u001F]/g;var Cu,Du;(Du=(Cu=globalThis.navigator)==null?void 0:Cu.storage)!=null&&Du.getDirectory&&navigator.storage.getDirectory().then(e=>{e.removeEntry("chunks",{recursive:!0}).catch(()=>{})});const Zr=(e,t)=>{};class ef{constructor(t,r={}){Zt(this,"name","");Zt(this,"chunks",[]);Zt(this,"chunkMap",[]);Zt(this,"directoryMap",{});Zt(this,"files");Zt(this,"rootDirPromise");Zt(this,"storageDirPromise");Zt(this,"chunksDirPromise");Zt(this,"closing",!1);Zt(this,"closed",!1);var n,i;if(this.chunkLength=Number(t),!this.chunkLength)throw new Error("First argument must be a chunk length");if(!((i=(n=globalThis.navigator)==null?void 0:n.storage)!=null&&i.getDirectory))throw new Error("FSA API is not supported");if(this.closed=!1,this.name=r.name||crypto.randomUUID(),this.rootDirPromise=r.rootDir||navigator.storage.getDirectory(),this.storageDirPromise=(async()=>(await this.rootDirPromise).getDirectoryHandle(this.name,{create:!0}))(),this.chunksDirPromise=this.storageDirPromise,r.files&&r.rootDir){if(this.chunksDirPromise=this._getChunksDirHandle(),this.files=r.files.map((s,o,a)=>{if(s.path==null)throw new Error("File is missing `path` property");if(s.length==null)throw new Error("File is missing `length` property");if(s.offset==null)if(o===0)s.offset=0;else{const h=a[o-1];s.offset=h.offset+h.length}s.handle==null&&(s.handle=this._createFileHandle({path:s.path})),s.blob=this._createBlobReference(s.handle);const u=s.offset,c=s.offset+s.length,l=Math.floor(u/this.chunkLength),f=Math.floor((c-1)/this.chunkLength);for(let h=l;h<=f;++h){const d=h*this.chunkLength,p=u<d?0:u-d,m=c>d+this.chunkLength?this.chunkLength:c-d,g=u>d?0:d-u;this.chunkMap[h]||(this.chunkMap[h]=[]),this.chunkMap[h].push({from:p,to:m,offset:g,file:s})}return s}),window.addEventListener("pagehide",()=>this.cleanup()),this.length=this.files.reduce((s,o)=>s+o.length,0),r.length!=null&&r.length!==this.length)throw new Error("total `files` length is not equal to explicit `length` option")}else this.length=Number(r.length)||1/0;this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}async _getChunkHandle(t){let r=this.chunks[t];if(!r){const n=await this.chunksDirPromise;this.chunks[t]=r=await n.getFileHandle(t,{create:!0})}return r}async _createFileHandle(t){const r=t.path.slice(t.path.lastIndexOf("/")+1);return(await this._getDirectoryHandle(t)).getFileHandle(r.replace(lb,""),{create:!0})}async _createBlobReference(t){return(await t).getFile()}async _getDirectoryHandle(t){const r=t.path.lastIndexOf("/");if(r===-1||r===0)return this.storageDirPromise;const n=t.path=t.path.slice(0,r);return this.directoryMap[n]||(this.directoryMap[n]=(async()=>(await this._getDirectoryHandle(t)).getDirectoryHandle(n.slice(n.lastIndexOf("/")+1),{create:!0}))()),this.directoryMap[n]}async _getChunksDirHandle(){return(await(await navigator.storage.getDirectory()).getDirectoryHandle("chunks",{create:!0})).getDirectoryHandle(this.name,{create:!0})}async put(t,r,n=Zr){try{return await this._put(t,r),n(null),null}catch(i){return queueMicrotask(()=>n(i)),i}}async getStreamForHandle(t){return(await t).createWritable({keepExistingData:!0})}async _put(t,r){if(this.closed)throw new Error("Storage is closed");const n=t===this.lastChunkIndex;if(n&&r.length!==this.lastChunkLength)throw new Error(`Last chunk length must be ${this.lastChunkLength}`);if(!n&&r.length!==this.chunkLength)throw new Error(`Chunk length must be ${this.chunkLength}`);const i=(async()=>{const a=await this._getChunkHandle(t),u=await a.createWritable({keepExistingData:!1});await u.write(r),await u.close()})();if(!this.files)return i;const s=this.chunkMap[t];if(!s)throw new Error("No files matching the request range");const o=s.map(async({file:a,offset:u,from:c,to:l})=>{a.stream||(a.stream=this.getStreamForHandle(a.handle)),await(await a.stream).write({type:"write",position:u,data:r.slice(c,l)})});o.push(i),await Promise.all(o)}async get(t,r,n=Zr){r==null&&(r={});try{const i=await this._get(t,r);return n(null,i),i}catch(i){return n(i),i}}async _get(t,r){if(typeof r=="function")return this.get(t,void 0,r);if(this.closed)throw new Error("Storage is closed");const n=t===this.lastChunkIndex?this.lastChunkLength:this.chunkLength,i=r.offset||0,s=r.length?i+r.length:n,o=r.length||n-i;if(i<0||i<0||s>n)throw new Error("Invalid offset and/or length");if(i===s)return new Uint8Array(0);if(!this.files||this.chunks[t]){let h=await(await this._getChunkHandle(t)).getFile();i===0&&o===n||(h=h.slice(i,o+i));const d=await h.arrayBuffer();if(d.byteLength===0)throw new Error(`Index ${t} does not exist`);return new Uint8Array(d)}let a=this.chunkMap[t];if(!a)throw new Error("No files matching the request range");if(r&&(a=a.filter(({from:f,to:h})=>h>i&&f<s),a.length===0))throw new Error("No files matching the request range");const u=a.map(async({from:f,to:h,offset:d,file:p})=>(r&&(h>s&&(h=s),f<i&&(d+=i-f,f=i)),(await p.blob).slice(d,d+h-f))),c=await Promise.all(u),l=c.length===1?await c[0].arrayBuffer():await new Blob(c).arrayBuffer();if(l.byteLength===0)throw new Error(`Index ${t} does not exist`);return new Uint8Array(l)}async close(t=Zr){if(this.closing)return((r=Zr,n)=>queueMicrotask(()=>r(new Error(n))))(t,"Storage is closed");this.closing=!0,this.chunkMap=void 0,this.directoryMap=void 0,this.files&&await this.cleanup(),this.closed=!0,queueMicrotask(()=>t(null))}async cleanup(){if(this.closed||!this.files)return;const t=[];for(const n of this.files)n.stream&&(t.push(n.stream.then(i=>i.close())),n.stream=void 0);const r=(async()=>{const n=await this.chunksDirPromise;this.chunks=[];for await(const i of n.keys())await n.removeEntry(i,{recursive:!0});this.chunksDirPromise=this._getChunksDirHandle(),await this.chunksDirPromise})();await Promise.all(t);for(const n of this.files)n.blob=this._createBlobReference(n.handle);await r}async destroy(t=Zr){this.close(async r=>{if(r)return t(r);try{await(await this.rootDirPromise).removeEntry(this.name,{recursive:!0})}catch(n){return t(n)}t(null)})}}var hb=st(3714),fb=st(1314);const Va=fe("lt_donthave"),rf=()=>{class e extends Be.EventEmitter{constructor(r){super(),this._peerSupports=!1,this._wire=r}onExtendedHandshake(){this._peerSupports=!0}onMessage(r){let n;try{n=new DataView(r.buffer).getUint32(0)}catch{return}this._wire.peerPieces.get(n)&&(Va("got donthave %d",n),this._wire.peerPieces.set(n,!1),this.emit("donthave",n),this._failRequests(n))}donthave(r){if(!this._peerSupports)return;Va("donthave %d",r);const n=new Uint8Array(4);new DataView(n.buffer).setUint32(0,r),this._wire.extended("lt_donthave",n)}_failRequests(r){const n=this._wire.requests;for(let i=0;i<n.length;i++){const s=n[i];s.piece===r&&(fb(n,i),i-=1,this._wire._callback(s,new Error("peer sent donthave"),null))}}}return e.prototype.name="lt_donthave",e};var nf=st(4862),Wa=st(5372);const me=16384;class Oe{constructor(t){this.length=t,this.missing=t,this.sources=null,this._chunks=Math.ceil(t/me),this._remainder=t%me||me,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(t){return t===this._chunks-1?this._remainder:me}chunkLengthRemaining(t){return this.length-t*me}chunkOffset(t){return t*me}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._cancellations.length||this._reservations<this._chunks){let t=this._reservations;for(;this._cancellations.length;)t=Math.min(t,this._cancellations.pop());return this._reservations=this._chunks,t}return-1}cancel(t){this.init()&&this._cancellations.push(t)}cancelRemaining(t){this.init()&&(this._reservations=t)}get(t){return this.init()?this._buffer[t]:null}set(t,r,n){if(!this.init())return!1;const i=r.length,s=Math.ceil(i/me);for(let o=0;o<s;o++)if(!this._buffer[t+o]){const a=o*me,u=r.slice(a,a+me);this._buffered++,this._buffer[t+o]=u,this.missing-=u.length,this.sources.includes(n)||this.sources.push(n)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const t=(0,nt.xW)(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,t}init(){return!this._flushed&&(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)}}Oe.BLOCK_LENGTH=me;var db=st(7373);const pb=fe("ut_metadata"),Kr=16384,mb=e=>{class t extends Be.EventEmitter{constructor(n){super(),this._wire=n,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new ri.A(0,{grow:1e3}),ArrayBuffer.isView(e)&&this.setMetadata(e)}onHandshake(n,i,s){this._infoHash=n}onExtendedHandshake(n){return n.m&&n.m.ut_metadata?n.metadata_size?typeof n.metadata_size!="number"||1e7<n.metadata_size||n.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=n.metadata_size,this._numPieces=Math.ceil(this._metadataSize/Kr),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(n){let i,s;try{const o=(0,nt.dU)(n),a=o.indexOf("ee")+2;i=be.A.decode(o.substring(0,a)),s=n.slice(a)}catch{return}switch(i.msg_type){case 0:this._onRequest(i.piece);break;case 1:this._onData(i.piece,s,i.total_size);break;case 2:this._onReject(i.piece)}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}async setMetadata(n){if(this._metadataComplete)return!0;pb("set metadata");try{const i=be.A.decode(n).info;i&&(n=be.A.encode(i))}catch{}return(!this._infoHash||this._infoHash===await(0,nt.tW)(n,"hex"))&&(this.cancel(),this.metadata=n,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",be.A.encode({info:be.A.decode(this.metadata)})),!0)}_send(n,i){let s=be.A.encode(n);ArrayBuffer.isView(i)&&(s=(0,nt.xW)([s,i])),this._wire.extended("ut_metadata",s)}_request(n){this._send({msg_type:0,piece:n})}_data(n,i,s){const o={msg_type:1,piece:n};typeof s=="number"&&(o.total_size=s),this._send(o,i)}_reject(n){this._send({msg_type:2,piece:n})}_onRequest(n){if(!this._metadataComplete)return void this._reject(n);const i=n*Kr;let s=i+Kr;s>this._metadataSize&&(s=this._metadataSize);const o=this.metadata.slice(i,s);this._data(n,o,this._metadataSize)}_onData(n,i,s){i.length>Kr||!this._fetching||(this.metadata.set(i,n*Kr),this._bitfield.set(n),this._checkDone())}_onReject(n){this._remainingRejects>0&&this._fetching?(this._request(n),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=new Uint8Array(this._metadataSize);for(let n=0;n<this._numPieces;n++)this._request(n)}}async _checkDone(){let n=!0;for(let i=0;i<this._numPieces;i++)if(!this._bitfield.get(i)){n=!1;break}n&&(await this.setMetadata(this.metadata)||this._failedMetadata())}_failedMetadata(){this._bitfield=new ri.A(0,{grow:1e3}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return t.prototype.name="ut_metadata",t};var zi=st(8878),gb=st(1133);const bb=fe("webtorrent:file-iterator");class _b extends Be{constructor(t,{start:r,end:n}){super(),this._torrent=t._torrent,this._pieceLength=t._torrent.pieceLength,this._startPiece=(r+t.offset)/this._pieceLength|0,this._endPiece=(n+t.offset)/this._pieceLength|0,this._piece=this._startPiece,this._offset=r+t.offset-this._startPiece*this._pieceLength,this._missing=n-r+1,this._criticalLength=Math.min(1048576/this._pieceLength|0,2),this._torrent._select(this._startPiece,this._endPiece,1,null,!0),this.destroyed=!1}[Symbol.asyncIterator](){return this}next(){return new Promise((t,r)=>{if(this._missing===0||this.destroyed)return t({done:!0}),this.destroy();const n=(s,o)=>{if(!this._torrent.bitfield.get(s)){const a=u=>{(u===s||this.destroyed)&&(this._torrent.removeListener("verified",a),n(s,o))};return this._torrent.on("verified",a),this._torrent.critical(s,s+this._criticalLength)}if(this._torrent.destroyed)return r(new Error("Torrent removed"));this._torrent.store.get(s,o,(a,u)=>this.destroyed?t({done:!0}):(bb("read %s and yielding (length %s) (err %s)",s,u==null?void 0:u.length,a==null?void 0:a.message),a?r(a):void t({value:u,done:!1})))},i=Math.min(this._missing,this._pieceLength-this._offset);n(this._piece++,{length:i,offset:this._offset}),this._missing-=i,this._offset=0})}async return(){return this.destroy(),{done:!0}}async throw(t){throw t}destroy(t=()=>{},r){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent._deselect(this._startPiece,this._endPiece,!0),this.emit("return"),t(r))}}class Ga extends Be{constructor(t,r){super(),this._torrent=t,this._destroyed=!1,this._fileStreams=new Set,this._iterators=new Set,this.name=r.name,this.path=r.path,this.length=r.length,this.size=r.length,this.type=gb.getType(this.name)||"application/octet-stream",this.offset=r.offset,this.done=!1;const n=r.offset,i=n+r.length-1;this._startPiece=n/this._torrent.pieceLength|0,this._endPiece=i/this._torrent.pieceLength|0,this.length===0&&(this.done=!0,this.emit("done")),this._client=t.client}get downloaded(){if(this._destroyed||!this._torrent.bitfield)return 0;const{pieces:t,bitfield:r,pieceLength:n,lastPieceLength:i}=this._torrent,{_startPiece:s,_endPiece:o}=this,a=c=>{const l=c===t.length-1?i:n;return r.get(c)?l:l-t[c].missing};let u=0;for(let c=s;c<=o;c+=1){const l=a(c);if(u+=l,c===s){const f=this.offset%n;u-=Math.min(f,l)}if(c===o){const f=(o===t.length-1?i:n)-(this.offset+this.length)%n;u-=Math.min(f,l)}}return u}get progress(){return this.length?this.downloaded/this.length:0}select(t){this.length!==0&&this._torrent.select(this._startPiece,this._endPiece,t)}deselect(){this.length!==0&&this._torrent.deselect(this._startPiece,this._endPiece)}[Symbol.asyncIterator](t={}){if(this.length===0)return async function*(){}();const{start:r=0}=t??{},n=t!=null&&t.end&&t.end<this.length?t.end:this.length-1;if(this.done)return Jg(this._torrent.store,{offset:r+this.offset,length:n-r+1});const i=new _b(this,{start:r,end:n});return this._iterators.add(i),i.once("return",()=>{this._iterators.delete(i)}),i}createReadStream(t){const r=this[Symbol.asyncIterator](t),n=fi.Readable.from(r);return this._fileStreams.add(n),n.once("close",()=>{this._fileStreams.delete(n)}),n}async arrayBuffer(t={}){const{start:r=0}=t,n=t!=null&&t.end&&t.end<this.length?t.end:this.length-1,i=new Uint8Array(n-r+1);let s=0;for await(const o of this[Symbol.asyncIterator]({start:r,end:n}))i.set(o,s),s+=o.length;return i.buffer}async blob(t){return new Blob([await this.arrayBuffer(t)],{type:this.type})}stream(t){let r;return new ReadableStream({start:()=>{r=this[Symbol.asyncIterator](t)},async pull(n){const{value:i,done:s}=await r.next();s?n.close():n.enqueue(i)},cancel(){r.return()}})}get streamURL(){if(!this._client._server)throw new Error("No server created");return`${this._client._server.pathname}/${this._torrent.infoHash}/${this.path}`}streamTo(t){return t.src=this.streamURL,t}includes(t){return this._startPiece<=t&&this._endPiece>=t}_destroy(){this._destroyed=!0,this._torrent=null;for(const t of this._fileStreams)t.destroy();this._fileStreams.clear();for(const t of this._iterators)t.destroy();this._iterators.clear()}}var oe=st(5658);class yb{constructor(t){this._torrent=t,this._numPieces=t.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=r=>{this.recalculate(),this._initWire(r)},this._onWireHave=r=>{this._pieces[r]+=1},this._onWireBitfield=()=>{this.recalculate()},this._torrent.wires.forEach(r=>{this._initWire(r)}),this._torrent.on("wire",this._onWire),this.recalculate()}getRarestPiece(t){let r=[],n=1/0;for(let i=0;i<this._numPieces;++i){if(t&&!t(i))continue;const s=this._pieces[i];s===n?r.push(i):s<n&&(r=[i],n=s)}return r.length?r[Math.random()*r.length|0]:-1}destroy(){this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(t=>{this._cleanupWireEvents(t)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}_initWire(t){t._onClose=()=>{this._cleanupWireEvents(t);for(let r=0;r<this._numPieces;++r)this._pieces[r]-=t.peerPieces.get(r)},t.on("have",this._onWireHave),t.on("bitfield",this._onWireBitfield),t.once("close",t._onClose)}recalculate(){this._pieces.fill(0);for(const t of this._torrent.wires)for(let r=0;r<this._numPieces;++r)this._pieces[r]+=t.peerPieces.get(r)}_cleanupWireEvents(t){t.removeListener("have",this._onWireHave),t.removeListener("bitfield",this._onWireBitfield),t._onClose&&t.removeListener("close",t._onClose),t._onClose=null}}var wb=st(4343),vb=st(6458),yn=st(6819);const Ae=fe("webtorrent:webconn");class xb extends vb.A{constructor(t,r){super(),this.url=t,this.connId=t,this._torrent=r,this._init(t)}_init(t){this.setKeepAlive(!0),this.use(rf()),this.once("handshake",async(r,n)=>{const i=await(0,nt.tW)(t,"hex");if(this.destroyed)return;this.handshake(r,i);const s=this._torrent.pieces.length,o=new ri.A(s);for(let a=0;a<=s;a++)o.set(a,!0);this.bitfield(o)}),this.once("interested",()=>{Ae("interested"),this.unchoke()}),this.on("uninterested",()=>{Ae("uninterested")}),this.on("choke",()=>{Ae("choke")}),this.on("unchoke",()=>{Ae("unchoke")}),this.on("bitfield",()=>{Ae("bitfield")}),this.lt_donthave.on("donthave",()=>{Ae("donthave")}),this.on("request",(r,n,i,s)=>{Ae("request pieceIndex=%d offset=%d length=%d",r,n,i),this.httpRequest(r,n,i,(o,a)=>{if(o){this.lt_donthave.donthave(r);const u=setTimeout(()=>{this.destroyed||this.have(r)},1e4);u.unref&&u.unref()}s(o,a)})})}async httpRequest(t,r,n,i){i=Qh(i);const s=t*this._torrent.pieceLength+r,o=s+n-1,a=this._torrent.files;let u,c;if(a.length<=1)u=[{url:this.url,start:s,end:o}];else{const l=a.filter(f=>f.offset<=o&&f.offset+f.length>s);if(l.length<1)return i(new Error("Could not find file corresponding to web seed range request"));u=l.map(f=>{const h=f.offset+f.length-1;return{url:this.url+(this.url[this.url.length-1]==="/"?"":"/")+f.path.replace(this._torrent.path,""),fileOffsetInRange:Math.max(f.offset-s,0),start:Math.max(s-f.offset,0),end:Math.min(h,o-f.offset)}})}try{c=await Promise.all(u.map(async({start:l,end:f,url:h})=>{Ae("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",h,t,r,n,l,f);const d=await Js(h,{cache:"no-store",method:"GET",headers:{"Cache-Control":"no-store","user-agent":`WebTorrent/${yn} (https://webtorrent.io)`,range:`bytes=${l}-${f}`},signal:AbortSignal.timeout(6e4)});if(!d.ok)throw new Error(`Unexpected HTTP status code ${d.status}`);const p=new Uint8Array(await d.arrayBuffer());return Ae("Got data of length %d",p.length),p}))}catch(l){return i(l)}i(null,(0,nt.xW)(c))}destroy(){super.destroy(),this._torrent=null}}class kb{constructor(){Zt(this,"_items",[])}remove(t){for(let r=0;r<this._items.length;r++){const n=this._items[r];if(n.isStreamSelection){if(!t.isStreamSelection)continue;if(n.from===t.from&&n.to===t.to){this._items.splice(r,1);break}}else if(sf(t,n))n.to=Math.max(t.from-1,0);else if(of(t,n))n.from=t.to+1;else if(af(t,n)){const i=[],s={...n,to:Math.max(t.from-1,0)};s.to-s.from>=0&&t.from!==0&&i.push(s);const o={...n,from:t.to+1};o.to-o.from>=0&&i.push(o),this._items.splice(r,1,...i),r=r-1+i.length}else uf(t,n)&&(this._items.splice(r,1),r--)}}insert(t){if(t.from>t.to)throw new Error("Invalid interval");if(!t.isStreamSelection){const{notify:r}=t,n=[];for(const i of this._items)i.notify&&Eb(t,i)&&n.push(i.notify);n.length>0&&(t.notify=()=>{n.forEach(i=>i()),r==null||r()}),this.remove(t)}this._items.push(t)}sort(t=(r,n)=>r.from-n.from){this._items.sort(t)}get length(){return this._items.length}get(t){return this._items[t]}swap(t,r){const n=this._items[t];this._items[t]=this._items[r],this._items[r]=n}clear(){this._items.length=0}*[Symbol.iterator](){for(let t=0;t<this._items.length;t++){const r=this._items[t];r.remove=()=>{this._items.splice(t,1),t--},yield r,delete r.remove}}}function sf(e,t){return e.from<=t.to&&e.from>t.from&&e.to>t.to}function of(e,t){return e.to>=t.from&&e.to<t.to&&e.from<t.from}function af(e,t){const r=t.to-t.from,n=e.to-e.from;return e.from>=t.from&&e.to<=t.to&&n<r}function uf(e,t){return e.from<=t.from&&e.to>=t.to}const Eb=(e,t)=>()=>sf(e,t)||of(e,t)||af(e,t)||uf(e,t);var cf=st(717);const Ab=fe("webtorrent:torrent"),Ui=5e3,Hi=3*Oe.BLOCK_LENGTH,Za=cf.browser?Xg().length:2,qi=[1e3,5e3,15e3],Ka=`WebTorrent/${yn} (https://webtorrent.io)`;var Tu,Fu,Ou,Iu;const Sb=((Fu=(Tu=globalThis.navigator)==null?void 0:Tu.storage)==null?void 0:Fu.getDirectory)&&((Iu=(Ou=globalThis.FileSystemFileHandle)==null?void 0:Ou.prototype)==null?void 0:Iu.createWritable),Cb=!cf.browser||Sb?ef:nf;let As;try{As=fn(Xh.statSync("/tmp")&&"/tmp","webtorrent")}catch{As=fn(typeof Na.tmpdir=="function"?Na.tmpdir():"/","webtorrent")}const Ja=typeof window<"u"&&typeof window.requestIdleCallback=="function"&&window.requestIdleCallback;class Ya extends Be{constructor(t,r,n){super(),this._debugId="unknown infohash",this.client=r,this.announce=n.announce,this.urlList=n.urlList,this.path=n.path||As,this.addUID=n.addUID||!1,this.rootDir=n.rootDir||null,this.skipVerify=!!n.skipVerify,this._startupBitfield=n.bitfield,this._store=n.store||Cb,this._preloadedStore=n.preloadedStore||null,this._storeCacheSlots=n.storeCacheSlots!==void 0?n.storeCacheSlots:20,this._destroyStoreOnDestroy=n.destroyStoreOnDestroy||!1,this.store=null,this.storeOpts=n.storeOpts,this.alwaysChokeSeeders=n.alwaysChokeSeeders??!0,this._getAnnounceOpts=n.getAnnounceOpts,typeof n.private=="boolean"&&(this.private=n.private),this.strategy=n.strategy||"sequential",this.maxWebConns=n.maxWebConns||4,this._rechokeNumSlots=n.uploads===!1||n.uploads===0?0:+n.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this._noPeersIntervalId=null,this._noPeersIntervalTime=n.noPeersIntervalTime?1e3*n.noPeersIntervalTime:3e4,this._startAsDeselected=n.deselect||!1,this.ready=!1,this.destroyed=!1,this.paused=n.paused||!1,this.done=!1,this.metadata=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=new kb,this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=ei(),this._uploadSpeed=ei(),this._servers=[],this._xsRequests=[],this._fileModtimes=n.fileModtimes,t!==null&&this._onTorrentId(t),this._debug("new torrent")}get timeRemaining(){return this.done?0:this.downloadSpeed===0?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}get downloaded(){if(!this.bitfield)return 0;let t=0;for(let r=0,n=this.pieces.length;r<n;++r)if(this.bitfield.get(r))t+=r===n-1?this.lastPieceLength:this.pieceLength;else{const i=this.pieces[r];t+=i.length-i.missing}return t}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){return this.length?this.downloaded/this.length:0}get ratio(){return this.uploaded/(this.received||this.length)}get numPeers(){return this.wires.length}get torrentFileBlob(){return this.torrentFile?new Blob([this.torrentFile],{type:"application/x-bittorrent"}):null}get _numQueued(){return this._queue.length+(this._peersLength-this._numConns)}get _numConns(){let t=0;for(const r in this._peers)this._peers[r].connected&&(t+=1);return t}async _onTorrentId(t){if(this.destroyed)return;let r;try{r=await zn(t)}catch{}r?(this.infoHash=r.infoHash,this._debugId=(0,nt.V5)(r.infoHash).substring(0,7),qt(()=>{this.destroyed||this._onParsedTorrent(r)})):Yh(t,(n,i)=>{if(!this.destroyed)return n?this._destroy(n):void this._onParsedTorrent(i)})}_onParsedTorrent(t){if(!this.destroyed){if(this._processParsedTorrent(t),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this._rechokeIntervalId=setInterval(()=>{this._rechoke()},1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),this.destroyed||(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",()=>{this._onListening()})))}}_processParsedTorrent(t){this._debugId=(0,nt.V5)(t.infoHash).substring(0,7),this.private!==void 0&&(t.private=this.private),Array.isArray(this.announce)&&(t.announce=t.announce.concat(this.announce)),this.client.tracker&&Array.isArray(this.client.tracker.announce)&&!t.private&&(t.announce=t.announce.concat(this.client.tracker.announce)),this.client.tracker&&globalThis.WEBTORRENT_ANNOUNCE&&!t.private&&(t.announce=t.announce.concat(globalThis.WEBTORRENT_ANNOUNCE)),this.urlList&&(t.urlList=t.urlList.concat(this.urlList)),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList)),Object.assign(this,t),this.magnetURI=qg(t),this.torrentFile=function(r){const n={info:r.info};return n["announce-list"]=(r.announce||[]).map(i=>(n.announce||(n.announce=i),[i=(0,nt.L0)(i)])),n["url-list"]=r.urlList||[],r.private!==void 0&&(n.private=Number(r.private)),r.created&&(n["creation date"]=r.created.getTime()/1e3|0),r.createdBy&&(n["created by"]=r.createdBy),r.comment&&(n.comment=r.comment),be.A.encode(n)}(t)}_onListening(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}_startDiscovery(){if(this.discovery||this.destroyed)return;let t=this.client.tracker;t&&(t=Object.assign({},this.client.tracker,{getAnnounceOpts:()=>{if(this.destroyed)return;const r={uploaded:this.uploaded,downloaded:this.downloaded,left:Math.max(this.length-this.downloaded,0)};return this.client.tracker.getAnnounceOpts&&Object.assign(r,this.client.tracker.getAnnounceOpts()),this._getAnnounceOpts&&Object.assign(r,this._getAnnounceOpts()),r}})),this.peerAddresses&&this.peerAddresses.forEach(r=>this.addPeer(r,oe.default.SOURCE_MANUAL)),this.discovery=new ab({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:t,port:this.client.torrentPort,userAgent:Ka,lsd:this.client.lsd}),this.discovery.on("error",r=>{this._destroy(r)}),this.discovery.on("peer",(r,n)=>{this._debug("peer %s discovered via %s",r,n),this.client.seedOutgoingConnections||!this.done?this.addPeer(r,n):this._debug("discovery ignoring peer %s: torrent is done and seedOutgoingConnections is false",r)}),this.discovery.on("trackerAnnounce",()=>{this.emit("trackerAnnounce")}),this.discovery.on("dhtAnnounce",()=>{this.emit("dhtAnnounce")}),this.discovery.on("warning",r=>{this.emit("warning",r)}),this._noPeersIntervalId=setInterval(()=>{if(this.destroyed)return;const r={[oe.default.SOURCE_TRACKER]:{enabled:!!this.client.tracker,numPeers:0},[oe.default.SOURCE_DHT]:{enabled:!!this.client.dht,numPeers:0},[oe.default.SOURCE_LSD]:{enabled:!!this.client.lsd,numPeers:0},[oe.default.SOURCE_UT_PEX]:{enabled:this.client.utPex&&typeof zi=="function",numPeers:0}};for(const n of Object.values(this._peers)){const i=r[n.source];i!==void 0&&i.numPeers++}for(const n of Object.keys(r)){const i=r[n];i.enabled&&i.numPeers===0&&this.emit("noPeers",n)}},this._noPeersIntervalTime),this._noPeersIntervalId.unref&&this._noPeersIntervalId.unref()}_getMetadataFromServer(){const t=this,r=Array.isArray(this.xs)?this.xs:[this.xs];t._xsRequestsController=new AbortController;const n=t._xsRequestsController.signal,i=r.map(s=>o=>{(async function(a,u){if(a.indexOf("http://")!==0&&a.indexOf("https://")!==0)return t.emit("warning",new Error(`skipping non-http xs param: ${a}`)),u(null);const c={method:"GET",headers:{"user-agent":Ka},signal:n};let l,f,h;try{l=await Js(a,c)}catch{return t.emit("warning",new Error(`http error from xs param: ${a}`)),u(null)}if(t.destroyed||t.metadata)return u(null);if(l.status!==200)return t.emit("warning",new Error(`non-200 status code ${l.status} from xs param: ${a}`)),u(null);try{f=new Uint8Array(await l.arrayBuffer())}catch(d){return t.emit("warning",d),u(null)}try{h=await zn(f)}catch{}if(!h)return t.emit("warning",new Error(`got invalid torrent file from xs param: ${a}`)),u(null);if(h.infoHash!==t.infoHash)return t.emit("warning",new Error(`got torrent file with incorrect info hash from xs param: ${a}`)),u(null);t._onMetadata(h),u(null)})(s,o)});Ye(i)}async _onMetadata(t){var i;if(this.metadata||this.destroyed)return;let r;if(this._debug("got metadata"),(i=this._xsRequestsController)==null||i.abort(),this._xsRequestsController=null,t&&t.infoHash)r=t;else try{r=await zn(t)}catch(s){return this._destroy(s)}this._processParsedTorrent(r),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(s=>{this.addWebSeed(s)}),this._rarityMap=new yb(this),this.files=this.files.map(s=>new Ga(this,s));let n=this._preloadedStore;if(n||(n=new this._store(this.pieceLength,{...this.storeOpts,torrent:this,path:this.path,files:this.files,length:this.length,name:this.name+" - "+this.infoHash.slice(0,8),addUID:this.addUID,rootDir:this.rootDir,max:this._storeCacheSlots})),this._storeCacheSlots>0&&!(n instanceof nf)&&(n=new Kg(n,{max:this._storeCacheSlots})),this.store=new hb(n),this.so&&!this._startAsDeselected?this.files.forEach((s,o)=>{this.so.includes(o)&&this.files[o].select()}):this.pieces.length===0||this._startAsDeselected||this.select(0,this.pieces.length-1,0),this._hashes=this.pieces,this._hasStartupBitfield=this._startupBitfield&&this._startupBitfield.length===Math.ceil(this.pieces.length/8)&&!this.skipVerify,this.bitfield=new ri.A(this._hasStartupBitfield?new Uint8Array(this._startupBitfield):this.pieces.length),this._reservations=this._hasStartupBitfield?this.pieces.map((s,o)=>this.bitfield.get(o)?null:[]):this.pieces.map(()=>[]),this.pieces=this.pieces.map((s,o)=>{if(this._hasStartupBitfield&&this.bitfield.get(o))return null;const a=o===this.pieces.length-1?this.lastPieceLength:this.pieceLength;return new Oe(a)}),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{const s=o=>{if(o)return this._destroy(o);this._debug("done verifying"),this._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===ef?this.getFileModtimes((o,a)=>{if(o)return this._destroy(o);this.files.map((u,c)=>a[c]===this._fileModtimes[c]).every(u=>u)?(this._markAllVerified(),this._onStore()):this._verifyPieces(s)}):this._verifyPieces(s)}}getFileModtimes(t){const r=[];Wa(this.files.map((n,i)=>s=>{const o=this.addUID?fn(this.name+" - "+this.infoHash.slice(0,8)):fn(this.path,n.path);Xh.stat(o,(a,u)=>{if(a&&a.code!=="ENOENT")return s(a);r[i]=u&&u.mtime.getTime(),s(null)})}),Za,n=>{this._debug("done getting file modtimes"),t(n,r)})}_verifyPiece(t,r){if(this.destroyed)return r(new Error("torrent is destroyed"));const n={};t===this.pieces.length-1&&(n.length=this.lastPieceLength),this.store.get(t,n,async(i,s)=>{if(this.destroyed)return r(new Error("torrent is destroyed"));if(i)return qt(()=>r(null,!1));const o=await(0,nt.tW)(s,"hex");if(this.destroyed)return r(new Error("torrent is destroyed"));r(null,o===this._hashes[t])})}_verifyPiecesUsingBitfield(t){const r=new Set,n=new Map;for(const i of this.files){let s=2,o=null;for(let a=i._startPiece;a<=i._endPiece;++a)this.bitfield.get(a)&&(s&&(o=a,s--),n.has(a)||n.set(a,[]),n.get(a).push(i));o!==null&&r.add(o)}this._verifyPiecesUsingHash([...r],i=>{if(i)return t(i);const s=new Set;for(const o of r)if(!this.bitfield.get(o)){const a=n.get(o);for(const u of a)s.add(u)}if(s.size){const o=[];for(const a of s)for(let u=a._startPiece;u<=a._endPiece;++u)o.indexOf(u)===-1&&o.push(u);return this._verifyPiecesUsingHash(o,t)}t(null)})}_verifyPiecesUsingHash(t,r){Wa(t.map((n,i)=>s=>{const o=Number.isInteger(n)?n:i;this._verifyPiece(o,(a,u)=>{if(a)return s(a);u?(this._debug("piece verified %s",o),this._markVerified(o)):(this._markUnverified(o),this._debug("piece invalid %s",o)),s(null)})}),Za,r)}_verifyPieces(t){if(this._hasStartupBitfield)return this._verifyPiecesUsingBitfield(t);this._verifyPiecesUsingHash(this.pieces,t)}rescanFiles(t){if(this.destroyed)throw new Error("torrent is destroyed");t||(t=Xa),this._verifyPiecesUsingHash(this.pieces,r=>{if(r)return this._destroy(r),t(r);this._checkDone(),t(null)})}_markAllVerified(){for(let t=0;t<this.pieces.length;t++)this._markVerified(t)}_markVerified(t){this.pieces[t]=null,this._reservations[t]=null,this.bitfield.set(t,!0),this.emit("verified",t)}_markUnverified(t){const r=t===this.pieces.length-1?this.lastPieceLength:this.pieceLength;this.pieces[t]=new Oe(r),this.bitfield.set(t,!1),this._startAsDeselected||this.select(t,t,1);for(const n of this.files)n.done&&n.includes(t)&&(n.done=!1)}_hasAllPieces(){for(let t=0;t<this.pieces.length;t++)if(!this.bitfield.get(t))return!1;return!0}_hasNoPieces(){return!this._hasMorePieces(0)}_hasMorePieces(t){let r=0;for(let n=0;n<this.pieces.length;n++)if(this.bitfield.get(n)&&(r+=1,r>t))return!0;return!1}_onStore(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections(),this.wires.forEach(t=>{t.ut_metadata&&t.ut_metadata.setMetadata(this.metadata),this._onWireWithMetadata(t)}))}destroy(t,r){if(typeof t=="function")return this.destroy(null,t);this._destroy(null,t,r)}_destroy(t,r,n){var s;if(typeof r=="function")return this._destroy(t,null,r);if(this.destroyed)return;this.destroyed=!0,this._debug("destroy"),this.client._remove(this),this._selections.clear(),clearInterval(this._rechokeIntervalId),clearInterval(this._noPeersIntervalId),(s=this._xsRequestsController)==null||s.abort(),this._rarityMap&&this._rarityMap.destroy();for(const o in this._peers)this.removePeer(o);for(const o of this.files)o instanceof Ga&&o._destroy();const i=this._servers.map(o=>a=>{o.destroy(a)});if(this.discovery&&i.push(o=>{this.discovery.destroy(o)}),this.store){let o=this._destroyStoreOnDestroy;r&&r.destroyStore!==void 0&&(o=r.destroyStore),i.push(a=>{o?this.store.destroy(a):this.store.close(a)})}Ye(i,n),t&&(this.listenerCount("error")===0?this.client.emit("error",t):this.emit("error",t)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null,this._queue=null}addPeer(t,r){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");let n;if(typeof t=="string"){let o;try{o=Gr(t)}catch{return this._debug("ignoring peer: invalid %s",t),this.emit("invalidPeer",t),!1}n=o[0]}else typeof t.remoteAddress=="string"&&(n=t.remoteAddress);if(this.client.blocked&&n&&this.client.blocked.contains(n))return this._debug("ignoring peer: blocked %s",t),typeof t!="string"&&t.destroy(),this.emit("blockedPeer",t),!1;const i=this.client.utp&&this._isIPv4(n)?"utp":"tcp",s=!!this._addPeer(t,i,r);return s?this.emit("peer",t):this.emit("invalidPeer",t),s}_addPeer(t,r,n){if(this.destroyed)return typeof t!="string"&&t.destroy(),null;if(typeof t=="string"&&!this._validAddr(t))return this._debug("ignoring peer: invalid %s",t),null;const i=t&&t.id||t;if(this._peers[i])return this._debug("ignoring peer: duplicate (%s)",i),typeof t!="string"&&t.destroy(),null;if(this.paused)return this._debug("ignoring peer: torrent is paused"),typeof t!="string"&&t.destroy(),null;let s;return this._debug("add peer %s",i),s=typeof t=="string"?r==="utp"?oe.default.createUTPOutgoingPeer(t,this,this.client.throttleGroups,n):oe.default.createTCPOutgoingPeer(t,this,this.client.throttleGroups,n):oe.default.createWebRTCPeer(t,this,this.client.throttleGroups,n),this._registerPeer(s),typeof t=="string"&&(this._queue.push(s),this._drain()),s}addWebSeed(t){if(this.destroyed)throw new Error("torrent is destroyed");let r,n;if(typeof t=="string"){if(r=t,!/^https?:\/\/.+/.test(r))return this.emit("warning",new Error(`ignoring invalid web seed: ${r}`)),void this.emit("invalidPeer",r);if(this._peers[r])return this.emit("warning",new Error(`ignoring duplicate web seed: ${r}`)),void this.emit("invalidPeer",r);n=new xb(r,this)}else{if(!t||typeof t.connId!="string")return void this.emit("warning",new Error("addWebSeed must be passed a string or connection object with id property"));if(n=t,r=n.connId,this._peers[r])return this.emit("warning",new Error(`ignoring duplicate web seed: ${r}`)),void this.emit("invalidPeer",r)}this._debug("add web seed %s",r);const i=oe.default.createWebSeedPeer(n,r,this,this.client.throttleGroups);this._registerPeer(i),this.emit("peer",r)}_addIncomingPeer(t){return this.destroyed?t.destroy(new Error("torrent is destroyed")):this.paused?t.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",t.id),void this._registerPeer(t))}_registerPeer(t){t.on("download",r=>{this.destroyed||(this.received+=r,this._downloadSpeed(r),this.client._downloadSpeed(r),this.emit("download",r),this.destroyed||this.client.emit("download",r))}),t.on("upload",r=>{this.destroyed||(this.uploaded+=r,this._uploadSpeed(r),this.client._uploadSpeed(r),this.emit("upload",r),this.destroyed||this.client.emit("upload",r))}),this._peers[t.id]=t,this._peersLength+=1}removePeer(t){var n;const r=(t==null?void 0:t.id)||t;t&&!t.id&&(t=(n=this._peers)==null?void 0:n[r]),t&&(t.destroy(),this.destroyed||(this._debug("removePeer %s",r),delete this._peers[r],this._peersLength-=1,this._drain()))}_select(t=0,r=this.pieces.length-1,n,i,s=!1){if(this.destroyed)throw new Error("torrent is destroyed");if(t<0||r<t||this.pieces.length<=r)throw new Error(`invalid selection ${t} : ${r}`);n=Number(n)||0,this._debug("select %s-%s (priority %s)",t,r,n),this._selections.insert({from:t,to:r,offset:0,priority:n,notify:i,isStreamSelection:s}),this._selections.sort((o,a)=>a.priority-o.priority),this._updateSelections()}select(t,r,n,i){this._select(t,r,n,i,!1)}_deselect(t,r,n=!1){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("deselect %s-%s",t,r),this._selections.remove({from:t,to:r,isStreamSelection:n}),this._updateSelections()}deselect(t,r){this._deselect(t,r,!1)}critical(t,r){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",t,r);for(let n=t;n<=r;++n)this._critical[n]=!0;this._updateSelections()}_onWire(t,r){if(this._debug("got wire %s (%s)",t._debugId,r||"Unknown"),this.wires.push(t),r){const n=Gr(r);t.remoteAddress=n[0],t.remotePort=n[1]}this.client.dht&&this.client.dht.listening&&t.on("port",n=>{if(!this.destroyed&&!this.client.dht.destroyed){if(!t.remoteAddress)return this._debug("ignoring PORT from peer with no address");if(n===0||n>65536)return this._debug("ignoring invalid PORT from peer");this._debug("port: %s (from %s)",n,r),this.client.dht.addNode({host:t.remoteAddress,port:n})}}),t.on("timeout",()=>{this._debug("wire timeout (%s)",r),t.destroy()}),t.type!=="webSeed"&&t.setTimeout(3e4,!0),t.setKeepAlive(!0),t.use(mb(this.metadata)),t.ut_metadata.on("warning",n=>{this._debug("ut_metadata warning: %s",n.message)}),this.metadata||(t.ut_metadata.on("metadata",n=>{this._debug("got metadata via ut_metadata"),this._onMetadata(n)}),t.ut_metadata.fetch()),this.client.utPex&&typeof zi=="function"&&!this.private&&(t.use(zi()),t.ut_pex.on("peer",n=>{this.client.seedOutgoingConnections||!this.done?(this._debug("ut_pex: got peer: %s (from %s)",n,r),this.addPeer(n,oe.default.SOURCE_UT_PEX)):this._debug("ut_pex ignoring peer %s: torrent is done and seedOutgoingConnections is false",n)}),t.ut_pex.on("dropped",n=>{const i=this._peers[n];i&&!i.connected&&(this._debug("ut_pex: dropped peer: %s (from %s)",n,r),this.removePeer(n))}),t.once("close",()=>{t.ut_pex.reset()})),t.use(rf()),this.emit("wire",t,r),this.ready&&qt(()=>{this._onWireWithMetadata(t)})}_onWireWithMetadata(t){let r=null;const n=()=>{this.destroyed||t.destroyed||(this._numQueued>2*(this._numConns-this.numPeers)&&t.amInterested?t.destroy():(r=setTimeout(n,Ui),r.unref&&r.unref()))};let i;const s=()=>{if(t.peerPieces.buffer.length===this.bitfield.buffer.length){for(i=0;i<this.pieces.length;++i)if(!t.peerPieces.get(i))return;t.isSeeder=!0,this.alwaysChokeSeeders&&t.choke()}};t.on("bitfield",()=>{s(),this._update(),this._updateWireInterest(t)}),t.on("have",()=>{s(),this._update(),this._updateWireInterest(t)}),t.lt_donthave.on("donthave",()=>{s(),this._update(),this._updateWireInterest(t)}),t.on("have-all",()=>{t.isSeeder=!0,this.alwaysChokeSeeders&&t.choke(),this._update(),this._updateWireInterest(t)}),t.on("have-none",()=>{t.isSeeder=!1,this._update(),this._updateWireInterest(t)}),t.on("allowed-fast",o=>{this._update()}),t.once("interested",()=>{t.unchoke()}),t.once("close",()=>{clearTimeout(r)}),t.on("choke",()=>{clearTimeout(r),r=setTimeout(n,Ui),r.unref&&r.unref()}),t.on("unchoke",()=>{clearTimeout(r),this._update()}),t.on("request",(o,a,u,c)=>{if(u>131072)return t.destroy();this.pieces[o]||this.store.get(o,{offset:a,length:u},c)}),t.hasFast&&this._hasAllPieces()?t.haveAll():t.hasFast&&this._hasNoPieces()?t.haveNone():t.bitfield(this.bitfield),this._updateWireInterest(t),t.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&t.port(this.client.dht.address().port),t.type!=="webSeed"&&(r=setTimeout(n,Ui),r.unref&&r.unref()),t.isSeeder=!1,s()}_updateSelections(){this.ready&&!this.destroyed&&(qt(()=>{this._gcSelections()}),this._updateInterest(),this._update())}_gcSelections(){var t,r;for(const n of this._selections){const i=n.offset;for(;this.bitfield.get(n.from+n.offset)&&n.from+n.offset<n.to;)n.offset+=1;i!==n.offset&&((t=n.notify)==null||t.call(n)),n.to===n.from+n.offset&&this.bitfield.get(n.from+n.offset)&&(n.remove(),(r=n.notify)==null||r.call(n),this._updateInterest())}this._selections.length||this.emit("idle")}_updateInterest(){const t=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(r=>this._updateWireInterest(r)),t!==this._amInterested&&(this._amInterested?this.emit("interested"):this.emit("uninterested"))}_updateWireInterest(t){let r=!1;for(let n=0;n<this.pieces.length;++n)if(this.pieces[n]&&t.peerPieces.get(n)){r=!0;break}r?t.interested():t.uninterested()}_update(){Ja?Ja(()=>this._updateWireWrapper(),{timeout:250}):this._updateWireWrapper()}_updateWireWrapper(){if(this.destroyed)return;const t=db(this.wires);let r;for(;r=t();)this._updateWire(r)}_updateWire(t){if(t.destroyed)return!1;const r=this,n=Vi(t,.5);if(t.requests.length>=n)return;const i=Vi(t,1);if(t.peerChoking)t.hasFast&&t.peerAllowedFastSet.length>0&&!this._hasMorePieces(t.peerAllowedFastSet.length-1)&&function(){if(t.requests.length>=i)return!1;for(const u of t.peerAllowedFastSet){if(t.peerPieces.get(u)&&!r.bitfield.get(u))for(;r._request(t,u,!1)&&t.requests.length<i;);if(!(t.requests.length<i))return!0}}();else{if(!t.downloaded)return function(){if(t.requests.length)return;let u=r._selections.length;for(;u--;){const c=r._selections.get(u);let l;if(r.strategy==="rarest"){const f=c.from+c.offset,h=c.to,d=h-f+1,p={};let m=0;const g=s(f,h,p);for(;m<d&&(l=r._rarityMap.getRarestPiece(g),!(l<0));){if(r._request(t,l,!1))return;p[l]=!0,m+=1}}else for(l=c.to;l>=c.from+c.offset;--l)if(t.peerPieces.get(l)&&r._request(t,l,!1))return}}();a(!1)||a(!0)}function s(u,c,l,f){return h=>h>=u&&h<=c&&!(h in l)&&t.peerPieces.get(h)&&(!f||f(h))}function o(u){let c=u;for(let l=u;l<r._selections.length&&r._selections.get(l).priority;l++)c=l;r._selections.swap(u,c)}function a(u){if(t.requests.length>=i)return!0;const c=function(){const l=t.downloadSpeed()||1;if(l>Hi)return()=>!0;const f=Math.max(1,t.requests.length)*Oe.BLOCK_LENGTH/l;let h=10,d=0;return p=>{if(!h||r.bitfield.get(p))return!0;let m=r.pieces[p].missing;for(;d<r.wires.length;d++){const g=r.wires[d],y=g.downloadSpeed();if(!(y<Hi)&&!(y<=l)&&g.peerPieces.get(p)&&!((m-=y*f)>0))return h--,!1}return!0}}();for(let l=0;l<r._selections.length;l++){const f=r._selections.get(l);let h;if(r.strategy==="rarest"){const d=f.from+f.offset,p=f.to,m=p-d+1,g={};let y=0;const _=s(d,p,g,c);for(;y<m&&(h=r._rarityMap.getRarestPiece(_),!(h<0));){for(;r._request(t,h,r._critical[h]||u)&&t.requests.length<i;);if(!(t.requests.length<i))return f.priority&&o(l),!0;g[h]=!0,y++}}else for(h=f.from+f.offset;h<=f.to;h++)if(t.peerPieces.get(h)&&c(h)){for(;r._request(t,h,r._critical[h]||u)&&t.requests.length<i;);if(!(t.requests.length<i))return f.priority&&o(l),!0}}return!1}}_rechoke(){if(!this.ready)return;const t=this.wires.map(i=>({wire:i,random:Math.random()})).sort((i,s)=>{const o=i.wire,a=s.wire;return o.downloadSpeed()!==a.downloadSpeed()?o.downloadSpeed()-a.downloadSpeed():o.uploadSpeed()!==a.uploadSpeed()?o.uploadSpeed()-a.uploadSpeed():o.amChoking!==a.amChoking?o.amChoking?-1:1:i.random-s.random}).map(i=>i.wire);this._rechokeOptimisticTime<=0?this._rechokeOptimisticWire=null:this._rechokeOptimisticTime-=1;let r=0;for(;t.length>0&&r<this._rechokeNumSlots-1;){const i=t.pop();i.isSeeder||i===this._rechokeOptimisticWire||(i.unchoke(),i.peerInterested&&r++)}if(this._rechokeOptimisticWire===null&&this._rechokeNumSlots>0){const i=t.filter(s=>s.peerInterested);if(i.length>0){const s=i[n=i.length,Math.random()*n|0];s.unchoke(),this._rechokeOptimisticWire=s,this._rechokeOptimisticTime=2}}var n;t.filter(i=>i!==this._rechokeOptimisticWire).forEach(i=>i.choke())}_hotswap(t,r){const n=t.downloadSpeed();if(n<Oe.BLOCK_LENGTH||!this._reservations[r])return!1;const i=this._reservations[r];if(!i)return!1;let s,o,a=1/0;for(o=0;o<i.length;o++){const u=i[o];if(!u||u===t)continue;const c=u.downloadSpeed();c>=Hi||2*c>n||c>a||(s=u,a=c)}if(!s)return!1;for(o=0;o<i.length;o++)i[o]===s&&(i[o]=null);for(o=0;o<s.requests.length;o++){const u=s.requests[o];u.piece===r&&this.pieces[r].cancel(u.offset/Oe.BLOCK_LENGTH|0)}return this.emit("hotswap",s,t,r),!0}_request(t,r,n){const i=this,s=t.requests.length,o=t.type==="webSeed";if(i.bitfield.get(r))return!1;const a=o?Math.min(function(m,g,y){return 1+Math.ceil(g*m.downloadSpeed()/y)}(t,1,i.pieceLength),i.maxWebConns):Vi(t,1);if(s>=a)return!1;const u=i.pieces[r];let c=o?u.reserveRemaining():u.reserve();if(c===-1&&n&&i._hotswap(t,r)&&(c=o?u.reserveRemaining():u.reserve()),c===-1)return!1;let l=i._reservations[r];l||(l=i._reservations[r]=[]);let f=l.indexOf(null);f===-1&&(f=l.length),l[f]=t;const h=u.chunkOffset(c),d=o?u.chunkLengthRemaining(c):u.chunkLength(c);function p(){qt(()=>{i._update()})}return t.request(r,h,d,async function m(g,y){if(i.destroyed)return;if(!i.ready)return i.once("ready",()=>{m(g,y)});if(l[f]===t&&(l[f]=null),u!==i.pieces[r])return p();if(g)return i._debug("error getting piece %s (offset: %s length: %s) from %s: %s",r,h,d,`${t.remoteAddress}:${t.remotePort}`,g.message),o?u.cancelRemaining(c):u.cancel(c),void p();if(i._debug("got piece %s (offset: %s length: %s) from %s",r,h,d,`${t.remoteAddress}:${t.remotePort}`),!u.set(c,y,t))return p();const _=u.flush(),b=await(0,nt.tW)(_,"hex");i.destroyed||(b===i._hashes[r]?(i._debug("piece verified %s",r),i.store.put(r,_,w=>{w?i._destroy(w):(i.pieces[r]=null,i._markVerified(r),i.wires.forEach(v=>{v.have(r)}),i._checkDone(),p())})):(i.pieces[r]=new Oe(u.length),i.emit("warning",new Error(`Piece ${r} failed verification`)),p()))}),!0}_checkDone(){var r;if(this.destroyed)return;this.files.forEach(n=>{if(!n.done){for(let i=n._startPiece;i<=n._endPiece;++i)if(!this.bitfield.get(i))return;n.done=!0,n.emit("done"),this._debug(`file done: ${n.name}`)}});const t=this.files.every(n=>n.done);return!this.done&&t?(this.done=!0,this._debug(`torrent done: ${this.infoHash}`),this.emit("done"),this.destroyed||this.discovery.complete()):this.done&&!t&&(this.done=!1,(r=this.discovery.tracker)==null||r.start()),this._gcSelections(),t}async load(t,r){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",()=>{this.load(t,r)});Array.isArray(t)||(t=[t]),r||(r=Xa);try{await Yg(this.store,Kh(t),{chunkLength:this.pieceLength}),this._markAllVerified(),this._checkDone(),r(null)}catch(n){return r(n),n}}pause(){this.destroyed||(this._debug("pause"),this.paused=!0)}resume(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}_debug(){const t=[].slice.call(arguments);t[0]=`[${this.client?this.client._debugId:"No Client"}] [${this._debugId}] ${t[0]}`,Ab(...t)}_drain(){if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),typeof Ma.connect!="function"||this.destroyed||this.paused||this._numConns>=this.client.maxConns)return;this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);const t=this._queue.shift();if(!t)return;this._debug("%s connect attempt to %s",t.type,t.addr);const r=Gr(t.addr),n={host:r[0],port:r[1]};this.client.utp&&t.type===oe.default.TYPE_UTP_OUTGOING?t.conn=wb.connect(n.port,n.host):t.conn=Ma.connect(n);const i=t.conn;i.once("connect",()=>{this.destroyed||t.onConnect()}),i.once("error",s=>{t.destroy(s)}),t.startConnectTimeout(),i.on("close",()=>{if(this.destroyed)return;if(t.retries>=qi.length){if(this.client.utp){const a=this._addPeer(t.addr,"tcp",t.source);a&&(a.retries=0)}else this._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,qi.length);return}const s=qi[t.retries];this._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,s,t.retries+1);const o=setTimeout(()=>{if(this.destroyed)return;const a=Gr(t.addr)[0],u=this.client.utp&&this._isIPv4(a)?"utp":"tcp",c=this._addPeer(t.addr,u,t.source);c&&(c.retries=t.retries+1)},s);o.unref&&o.unref()})}_validAddr(t){let r;try{r=Gr(t)}catch{return!1}const n=r[0],i=r[1];return i>0&&i<65535&&!(n==="127.0.0.1"&&i===this.client.torrentPort)}_isIPv4(t){return/^((?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])[.]){3}(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/.test(t)}}function Vi(e,t){let r=2+Math.ceil(t*e.downloadSpeed()/Oe.BLOCK_LENGTH);if(e.peerExtendedHandshake){const n=e.peerExtendedHandshake.reqq;typeof n=="number"&&n>0&&(r=Math.min(r,n))}return r}function Xa(){}var Db=st(4043),Se=st(580),lf=st(815),Tb=st(2878);class te{constructor(t,r={}){this.client=t,r.origin||(r.origin="*"),this.opts=r,this.pendingReady=new Set}static serveIndexPage(t,r,n){const i=r.map(s=>`<li>
        <a href="${Se(n)}/${s.infoHash}">
          ${Se(s.name)}
        </a>
        (${Se(s.length)} bytes)
      </li>`).join("<br>");return t.status=200,t.headers["Content-Type"]="text/html",t.body=Ln("WebTorrent",`<h1>WebTorrent</h1>
       <ol>${i}</ol>`),t}isOriginAllowed(t){return this.opts.origin!==!1&&(this.opts.origin==="*"||t.headers.origin===this.opts.origin)}static serveMethodNotAllowed(t){return t.status=405,t.headers["Content-Type"]="text/html",t.body=Ln("405 - Method Not Allowed","<h1>405 - Method Not Allowed</h1>"),t}static serve404Page(t){return t.status=404,t.headers["Content-Type"]="text/html",t.body=Ln("404 - Not Found","<h1>404 - Not Found</h1>"),t}static serveTorrentPage(t,r,n){const i=t.files.map(s=>`<li>
        <a href="${Se(n)}/${t.infoHash}/${Se(s.path)}">
          ${Se(s.path)}
        </a>
        (${Se(s.length)} bytes)
      </li>`).join("<br>");return r.status=200,r.headers["Content-Type"]="text/html",r.body=Ln(`${Se(t.name)} - WebTorrent`,`<h1>${Se(t.name)}</h1>
      <ol>${i}</ol>`),r}static serveOptionsRequest(t,r){return r.status=204,r.headers["Access-Control-Max-Age"]="600",r.headers["Access-Control-Allow-Methods"]="GET,HEAD",t.headers["access-control-request-headers"]&&(r.headers["Access-Control-Allow-Headers"]=t.headers["access-control-request-headers"]),r}static serveFile(t,r,n){n.status=200,n.headers.Expires="0",n.headers["Cache-Control"]="no-cache, no-store, must-revalidate, max-age=0",n.headers["Accept-Ranges"]="bytes",n.headers["Content-Type"]=t.type,n.headers["transferMode.dlna.org"]="Streaming",n.headers["contentFeatures.dlna.org"]="DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000",r.destination==="document"?(n.headers["Content-Type"]="application/octet-stream",n.headers["Content-Disposition"]=`attachment; filename*=UTF-8''${Qa(t.name)}`,n.body="DOWNLOAD"):n.headers["Content-Disposition"]=`inline; filename*=UTF-8''${Qa(t.name)}`;let i=Tb(t.length,r.headers.range||"");if(Array.isArray(i)?(n.status=206,i=i[0],n.headers["Content-Range"]=`bytes ${i.start}-${i.end}/${t.length}`,n.headers["Content-Length"]=i.end-i.start+1):(n.statusCode=200,i=null,n.headers["Content-Length"]=t.length),r.method==="GET"){const s=t[Symbol.asyncIterator](i);let o=null;t.emit("iterator",{iterator:s,req:r,file:t},c=>{o=c});const a=fi.Readable.from(o||s);let u=null;t.emit("stream",{stream:a,req:r,file:t},c=>{u=lf(a,c)}),n.body=u||a}else n.body=!1;return n}async onRequest(t,r){let n=new URL(t.url,"http://example.com").pathname;n=n.slice(n.indexOf(this.pathname)+this.pathname.length+1);const i={headers:{"X-Content-Type-Options":"nosniff","Content-Security-Policy":"base-uri 'none'; frame-ancestors 'none'; form-action 'none';"}};if(this.isOriginAllowed(t)&&(i.headers["Access-Control-Allow-Origin"]=this.opts.origin==="*"?"*":t.headers.origin),n==="favicon.ico")return r(te.serve404Page(i));if(t.method==="OPTIONS")return this.isOriginAllowed(t)?r(te.serveOptionsRequest(t,i)):r(te.serveMethodNotAllowed(i));const s=async()=>{this.pendingReady.delete(s);const a=await o();r(a)},o=async()=>{if(n==="")return te.serveIndexPage(i,this.client.torrents,this.pathname);let[a,...u]=n.split("/");u=decodeURI(u.join("/"));const c=await this.client.get(a);if(!a||!c)return te.serve404Page(i);if(!u)return te.serveTorrentPage(c,i,this.pathname);const l=c.files.find(f=>f.path.replace(/\\/g,"/")===u);return l?te.serveFile(l,t,i):te.serve404Page(i)};if(t.method==="GET"||t.method==="HEAD"){if(this.client.ready){const a=await o();return r(a)}return this.pendingReady.add(s),void this.client.once("ready",s)}return r(te.serveMethodNotAllowed(i))}close(t=()=>{}){this.closed=!0,this.pendingReady.forEach(r=>{this.client.removeListener("ready",r)}),this.pendingReady.clear(),qt(t)}destroy(t=()=>{}){this.closed?qt(t):this.close(t),this.client=null}}class Fb extends te{constructor(t,r){super(t,r),this.server=Db.createServer(),this._listen=this.server.listen,this.server.listen=this.listen.bind(this),this._close=this.server.close,this.server.close=this.close.bind(this),this.sockets=new Set,this.closed=!1,this.pathname=(r==null?void 0:r.pathname)||"/webtorrent"}wrapRequest(t,r){return this.opts.hostname&&t.headers.host!==`${this.opts.hostname}:${this.server.address().port}`?t.destroy():new URL(t.url,"http://example.com").pathname.startsWith(this.pathname)?void this.onRequest(t,({status:n,headers:i,body:s})=>{r.writeHead(n,i),s!=null&&s._readableState||s!=null&&s._writableState?lf(s,r):r.end(s)}):t.destroy()}onConnection(t){t.setTimeout(36e6),this.sockets.add(t),t.once("close",()=>{this.sockets.delete(t)})}address(){return this.server.address()}listen(...t){return this.closed=!1,this.server.on("connection",this.onConnection.bind(this)),this.server.on("request",this.wrapRequest.bind(this)),this._listen.apply(this.server,t)}close(t=()=>{}){this.server.removeAllListeners("connection"),this.server.removeAllListeners("request"),this.server.removeAllListeners("listening"),super.close(),this._close.call(this.server,t)}destroy(t){this.sockets.forEach(r=>{r.destroy()}),super.destroy(t)}}class Ob extends te{constructor(t,r){super(t,r),this.registration=r.controller,this.workerKeepAliveInterval=null,this.workerPortCount=0;const n=new URL(r.controller.scope);this.pathname=n.pathname+"webtorrent",this._address={port:n.port,family:"IPv4",address:n.hostname},this.boundHandler=this.wrapRequest.bind(this),navigator.serviceWorker.addEventListener("message",this.boundHandler),fetch(`${this.pathname}/cancel/`).then(i=>{i.body.cancel()})}wrapRequest(t){const r=t.data;if(!(r!=null&&r.type)==="webtorrent"||!r.url)return null;const[n]=t.ports;this.onRequest(r,({status:i,headers:s,body:o})=>{var c;const a=(c=o[Symbol.asyncIterator])==null?void 0:c.call(o),u=()=>{n.onmessage=null,o!=null&&o.destroy&&o.destroy(),this.workerPortCount--,this.workerPortCount||(clearInterval(this.workerKeepAliveInterval),this.workerKeepAliveInterval=null)};n.onmessage=async l=>{if(l.data){let f;try{f=(await a.next()).value}catch{}n.postMessage(f),f||u(),this.workerKeepAliveInterval||(this.workerKeepAliveInterval=setInterval(()=>fetch(`${this.pathname}/keepalive/`),2e4))}else u()},this.workerPortCount++,n.postMessage({status:i,headers:s,body:a?"STREAM":o})})}listen(t,r){r()}address(){return this._address}close(t){navigator.serviceWorker.removeEventListener("message",this.boundHandler),super.close(t)}destroy(t){super.destroy(t)}}function Ln(e,t){return`
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8">
        <title>${e}</title>
      </head>
      <body>
        ${t}
      </body>
    </html>
  `}function Qa(e){return encodeURIComponent(e).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape)}const Wi=fe("webtorrent"),hf=yn.replace(/\d*./g,e=>("0"+e%100).slice(-2)).slice(0,4),Ib=`-WW${hf}-`;class Ir extends Be{constructor(t={}){super(),typeof t.peerId=="string"?this.peerId=t.peerId:ArrayBuffer.isView(t.peerId)?this.peerId=(0,nt.V5)(t.peerId):this.peerId=(0,nt.V5)((0,nt.L0)(Ib+(0,nt.NJ)((0,nt.po)(9)))),this.peerIdBuffer=(0,nt.fk)(this.peerId),typeof t.nodeId=="string"?this.nodeId=t.nodeId:ArrayBuffer.isView(t.nodeId)?this.nodeId=(0,nt.V5)(t.nodeId):this.nodeId=(0,nt.V5)((0,nt.po)(20)),this.nodeIdBuffer=(0,nt.fk)(this.nodeId),this._debugId=this.peerId.substring(0,7),this.destroyed=!1,this.listening=!1,this.torrentPort=t.torrentPort||0,this.dhtPort=t.dhtPort||0,this.tracker=t.tracker!==void 0?t.tracker:{},this.lsd=t.lsd!==!1,this.utPex=t.utPex!==!1,this.natUpnp=t.natUpnp??!0,this.natPmp=t.natPmp??!0,this.torrents=[],this.maxConns=Number(t.maxConns)||55,this.utp=Ir.UTP_SUPPORT&&t.utp!==!1,this.seedOutgoingConnections=t.seedOutgoingConnections??!0,this._downloadLimit=Math.max(typeof t.downloadLimit=="number"?t.downloadLimit:-1,-1),this._uploadLimit=Math.max(typeof t.uploadLimit=="number"?t.uploadLimit:-1,-1),(this.natUpnp||this.natPmp)&&typeof Ba=="function"&&(this.natTraversal=new Ba({enableUPNP:this.natUpnp,enablePMP:this.natPmp,upnpPermanentFallback:t.natUpnp==="permanent"})),t.secure===!0&&Promise.resolve().then(st.bind(st,5658)).then(({enableSecure:n})=>n()),this._debug("new webtorrent (peerId %s, nodeId %s, port %s)",this.peerId,this.nodeId,this.torrentPort),this.throttleGroups={down:new Ra.ThrottleGroup({rate:Math.max(this._downloadLimit,0),enabled:this._downloadLimit>=0}),up:new Ra.ThrottleGroup({rate:Math.max(this._uploadLimit,0),enabled:this._uploadLimit>=0})},this.tracker&&(typeof this.tracker!="object"&&(this.tracker={}),globalThis.WRTC&&!this.tracker.wrtc&&(this.tracker.wrtc=globalThis.WRTC)),typeof vs=="function"?this._connPool=new vs(this):qt(()=>{this._onListening()}),this._downloadSpeed=ei(),this._uploadSpeed=ei(),t.dht!==!1&&typeof Ta.Client=="function"?(this.dht=new Ta.Client(Object.assign({},{nodeId:this.nodeId},t.dht)),this.dht.once("error",n=>{this._destroy(n)}),this.dht.once("listening",()=>{const n=this.dht.address();n&&(this.dhtPort=n.port,this.natTraversal&&this.natTraversal.map({publicPort:this.dhtPort,privatePort:this.dhtPort,protocol:"udp",description:"WebTorrent DHT"}).catch(i=>{Wi("error mapping DHT port via UPnP/PMP: %o",i)}))}),this.dht.setMaxListeners(0),this.dht.listen(this.dhtPort)):this.dht=!1,this.enableWebSeeds=t.webSeeds!==!1;const r=()=>{this.destroyed||(this.ready=!0,this.emit("ready"))};typeof Fa=="function"&&t.blocklist!=null?Fa(t.blocklist,{headers:{"user-agent":`WebTorrent/${yn} (https://webtorrent.io)`}},(n,i)=>{if(n)return console.error(`Failed to load blocklist: ${n.message}`);this.blocked=i,r()}):qt(r)}createServer(t,r){if(this.destroyed)throw new Error("torrent is destroyed");if(this._server)throw new Error("server already created");if(typeof window<"u"&&r!=="node"||r==="browser"){if(!((t==null?void 0:t.controller)instanceof ServiceWorkerRegistration))throw new Error("Invalid worker registration");if(t.controller.active.state!=="activated")throw new Error("Worker isn't activated");return this._server=new Ob(this,t),this._server}return this._server=new Fb(this,t),this._server}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){const t=this.torrents.filter(r=>r.progress!==1);return t.reduce((r,n)=>r+n.downloaded,0)/(t.reduce((r,n)=>r+(n.length||0),0)||1)}get ratio(){return this.torrents.reduce((t,r)=>t+r.uploaded,0)/(this.torrents.reduce((t,r)=>t+r.received,0)||1)}async get(t){if(t instanceof Ya){if(this.torrents.includes(t))return t}else{const r=this.torrents;let n;try{n=await zn(t)}catch{}if(!n)return null;if(!n.infoHash)throw new Error("Invalid torrent identifier");for(const i of r)if(i.infoHash===n.infoHash)return i}return null}add(t,r={},n=()=>{}){if(this.destroyed)throw new Error("client is destroyed");typeof r=="function"&&([r,n]=[{},r]);const i=()=>{if(!this.destroyed){for(const a of this.torrents)if(a.infoHash===o.infoHash&&a!==o)return o._destroy(new Error(`Cannot add duplicate torrent ${o.infoHash}`)),void n(a)}},s=()=>{this.destroyed||(n(o),this.emit("torrent",o))};this._debug("add"),r=r?Object.assign({},r):{};const o=new Ya(t,this,r);return this.torrents.push(o),o.once("_infoHash",i),o.once("ready",s),o.once("close",function a(){o.removeListener("_infoHash",i),o.removeListener("ready",s),o.removeListener("close",a)}),this.emit("add",o),o}seed(t,r,n){if(this.destroyed)throw new Error("client is destroyed");typeof r=="function"&&([r,n]=[{},r]),this._debug("seed"),(r=r?Object.assign({},r):{}).skipVerify=!0;const i=typeof t=="string";i&&(r.path=function(c){if(ti(c),c.length===0)return".";let l=c.charCodeAt(0);const f=l===47;let h=-1,d=!0;for(let p=c.length-1;p>=1;--p)if(l=c.charCodeAt(p),l===47){if(!d){h=p;break}}else d=!1;return h===-1?f?"/":".":f&&h===1?"//":c.slice(0,h)}(t)),r.createdBy||(r.createdBy=`WebTorrent/${hf}`);const s=c=>{this._debug("on seed"),typeof n=="function"&&n(c),c.emit("seed"),this.emit("seed",c)},o=this.add(null,r,c=>{const l=[f=>{if(i||r.preloadedStore)return f();c.load(a,f)}];this.dht&&l.push(f=>{c.once("dhtAnnounce",f)}),Ye(l,f=>{if(!this.destroyed)return f?c._destroy(f):void s(c)})});let a;var u;return u=t,typeof FileList<"u"&&u instanceof FileList?t=Array.from(t):Array.isArray(t)||(t=[t]),Ye(t.map(c=>async l=>{if(!r.preloadedStore&&function(f){return typeof f=="object"&&f!=null&&typeof f.pipe=="function"}(c)){const f=[];try{for await(const d of c)f.push(d)}catch(d){return l(d)}const h=(0,nt.xW)(f);h.name=c.name,l(null,h)}else l(null,c)}),(c,l)=>{if(!this.destroyed)return c?o._destroy(c):void function(f,h,d){typeof h=="function"&&([h,d]=[d,h]),Jh(f,h=h?Object.assign({},h):{},d)}(l,r,(f,h)=>{if(!this.destroyed){if(f)return o._destroy(f);a=h.map(d=>d.getStream),zg(l,r,async(d,p)=>{if(this.destroyed)return;if(d)return o._destroy(d);const m=await this.get(p);m?(console.warn("A torrent with the same id is already being seeded"),o._destroy(),typeof n=="function"&&n(m)):o._onTorrentId(p)})}})}),o}async remove(t,r,n){if(typeof r=="function")return this.remove(t,null,r);this._debug("remove");const i=await this.get(t);if(!i)throw new Error(`No torrent with id ${t}`);this._remove(i,r,n)}_remove(t,r,n){if(!t)return;if(typeof r=="function")return this._remove(t,null,r);const i=this.torrents.indexOf(t);i!==-1&&(this.torrents.splice(i,1),t.destroy(r,n),this.dht&&this.dht._tables.remove(t.infoHash),this.emit("remove",t))}address(){return this.listening?this._connPool?this._connPool.tcpServer.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}throttleDownload(t){return t=Number(t),!(isNaN(t)||!isFinite(t)||t<-1)&&(this._downloadLimit=t,this._downloadLimit<0?this.throttleGroups.down.setEnabled(!1):(this.throttleGroups.down.setEnabled(!0),void this.throttleGroups.down.setRate(this._downloadLimit)))}throttleUpload(t){return t=Number(t),!(isNaN(t)||!isFinite(t)||t<-1)&&(this._uploadLimit=t,this._uploadLimit<0?this.throttleGroups.up.setEnabled(!1):(this.throttleGroups.up.setEnabled(!0),void this.throttleGroups.up.setRate(this._uploadLimit)))}destroy(t){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,t)}_destroy(t,r){this._debug("client destroy"),this.destroyed=!0;const n=this.torrents.map(i=>s=>{i.destroy(s)});this._connPool&&n.push(i=>{this._connPool.destroy(i)}),this.dht&&n.push(i=>{this.dht.destroy(i)}),this._server&&n.push(i=>{this._server.destroy(i)}),this.natTraversal&&n.push(i=>{this.natTraversal.destroy().then(()=>i())}),Ye(n,r),t&&this.emit("error",t),this.torrents=[],this._connPool=null,this.dht=null,this.throttleGroups.down.destroy(),this.throttleGroups.up.destroy()}_onListening(){if(this._debug("listening"),this.listening=!0,this._connPool){const t=this._connPool.tcpServer.address();t&&(this.torrentPort=t.port,this.natTraversal&&this.natTraversal.map({publicPort:this.torrentPort,privatePort:this.torrentPort,protocol:this.utp?null:"tcp",description:"WebTorrent Torrent"}).catch(r=>{Wi("error mapping WebTorrent port via UPnP/PMP: %o",r)}))}this.emit("listening")}_debug(){const t=[].slice.call(arguments);t[0]=`[${this._debugId}] ${t[0]}`,Wi(...t)}async _getByHash(t){for(const r of this.torrents)if(r.infoHashHash||(r.infoHashHash=await(0,nt.tW)((0,nt.fk)("72657132"+r.infoHash),"hex")),t===r.infoHashHash)return r;return null}}Ir.WEBRTC_SUPPORT=Ys.WEBRTC_SUPPORT,Ir.UTP_SUPPORT=vs.UTP_SUPPORT,Ir.VERSION=yn;class Pb{constructor(){this.files=new Map,this.metadata=new Map}async getDirectoryHandle(){return this}async getFileHandle(t,r={}){return!this.files.has(t)&&r.create&&this.files.set(t,null),{createWritable:async()=>({write:async n=>{this.files.set(t,n)},close:async()=>{}}),getFile:async()=>{const n=this.files.get(t);return new File([n],t)}}}async removeEntry(t){this.files.delete(t),this.metadata.delete(t)}entries(){return Array.from(this.files.keys()).map(t=>[t])}}const Lb=["udp://tracker.leechers-paradise.org:6969","udp://tracker.coppersurfer.tk:6969","udp://tracker.opentrackr.org:1337","udp://explodie.org:6969","udp://tracker.empire-js.us:1337","wss://tracker.btorrent.xyz","wss://tracker.openwebtorrent.com"],tu=Re("trackers",Lb),v2=Yt(),ir=xt(new Map),Rn=Yt(!1),eu=xt({done:!1,progress:0,downloadSpeed:0,downloaded:0});let qe=null,sr=null,Pt=null;function x2(){async function e(){try{await navigator.storage.persist()||console.warn("Storage persistence denied");const w=await navigator.storage.estimate();return console.log(`Storage quota: ${w.quota} bytes`),console.log(`Storage usage: ${w.usage} bytes`),!0}catch(b){return console.error("Storage permission error:",b),!1}}async function t(){try{if(!(await navigator.storage.estimate()).quota)throw new Error("Storage quota is 0, likely in private mode");if("storage"in navigator&&"getDirectory"in navigator.storage){const w=await navigator.permissions.query({name:"persistent-storage"});if(w.state==="granted"||w.state==="prompt")return await e(),qe=await navigator.storage.getDirectory(),Pt=await r(),!0}throw new Error("Storage API not available or permission denied")}catch(b){return console.warn("OPFS not available, falling back to in-memory storage:",b),qe=new Pb,Pt=qe,!0}}async function r(){return await qe.getDirectoryHandle("files",{create:!0})}function n(b){const w=tu.value.map(v=>`&tr=${encodeURIComponent(v)}`).join("");return`magnet:?xt=urn:btih:${b}${w}`}function i(b){return b.replace(/[^a-zA-Z0-9.-]/g,"_")}async function s(b){try{const S=await(await(await Pt.getFileHandle(`${b}.meta.json`)).getFile()).text();return JSON.parse(S)}catch{return null}}async function o(b,w){const S=await(await Pt.getFileHandle(`${b}.meta.json`,{create:!0})).createWritable();await S.write(JSON.stringify(w)),await S.close()}async function a(){try{await t(),sr=new Ir,sr.on("download",b=>{const w=sr.torrents[sr.torrents.length-1];w&&Object.assign(eu,{done:w.done,progress:w.progress,downloaded:w.downloaded,downloadSpeed:w.downloadSpeed})}),Rn.value=!0,await c()}catch(b){return console.error("Torrent system initialization failed:",b),!1}}async function u(b,w){const v=i(b.name);try{const E=await(await Pt.getFileHandle(v,{create:!0})).createWritable(),T=await b.arrayBuffer();return await E.write(T),await E.close(),await o(v,{originalName:b.name,type:b.type||"application/octet-stream",lastModified:Date.now(),infoHash:w}),v}catch(S){return console.error("Error caching downloaded file:",S),null}}async function c(){if(Pt)for await(const[b]of Pt.entries()){if(b.endsWith(".meta.json"))continue;const w=await s(b);if(!w)continue;const v=await p(b);if(v){const S=new File([v],w.originalName,{type:w.type}),E=w.infoHash?{infoHash:w.infoHash}:void 0;await l(S,b,E)}}}async function l(b,w,v={}){return new Promise(S=>{sr.seed([b],v,E=>{ir.set(w,{file:b,torrent:E,info:{infoHash:E.infoHash,magnetURI:E.magnetURI,name:E.name,length:E.length}}),S(ir.get(w))})})}async function f(b){Rn.value||await a();const w=[];for(const v of b){const S=await d(v);if(S){const E=await l(v,S);w.push(E)}}return w}async function h(b){const w=ir.get(b);w!=null&&w.torrent&&w.torrent.destroy(),await(Pt==null?void 0:Pt.removeEntry(b)),await(Pt==null?void 0:Pt.removeEntry(`${b}.meta.json`).catch(()=>{})),ir.delete(b)}async function d(b){if(!Pt)return null;try{const w=i(b.name),S=await(await Pt.getFileHandle(w,{create:!0})).createWritable();return await S.write(b),await S.close(),await o(w,{originalName:b.name,type:b.type,lastModified:b.lastModified}),w}catch(w){return console.error("Error saving to OPFS:",w),null}}async function p(b){if(!Pt)return null;try{return await(await Pt.getFileHandle(b)).getFile()}catch(w){return console.error("Error loading from OPFS:",w),null}}async function m(b){if(!Pt)return null;for await(const[w]of Pt.entries()){if(w.endsWith(".meta.json"))continue;const v=await s(w);if((v==null?void 0:v.infoHash)===b){const S=await p(w);if(S){const E=new File([S],v.originalName,{type:v.type});return E.path=v.originalName,E.length=S.size,E.progress=1,E.downloaded=S.size,E.blob=async()=>new Blob([await E.arrayBuffer()],{type:E.type}),E}}}return null}async function g(b){Rn.value||await a();const w=await m(b);return w?(console.log("File found in cache, returning without download"),[w]):new Promise(async v=>{function S(T){const I=T.files.map(P=>(P.blob=()=>new Promise((B,D)=>{const k=[],x=P.createReadStream();x.on("data",O=>k.push(O)),x.on("end",()=>{const O=new Blob(k,{type:P.type||"application/octet-stream"});B(O)}),x.on("error",D)}),P));T.on("done",async()=>{for(const P of I)await u(P,T.infoHash)}),v(I)}let E=await sr.get(b);if(E)S(E);else{const T=n(b);sr.add(T,S)}})}async function y(){if(Pt){for(const[b,w]of ir)w!=null&&w.torrent&&w.torrent.destroy();ir.clear();try{for await(const[b]of Pt.entries())await Pt.removeEntry(b);console.log("Files directory cleared successfully")}catch(b){throw console.error("Error clearing files directory:",b),b}}}async function _(){if(qe){await y();try{for await(const[b,w]of qe.entries())w.kind==="file"?await qe.removeEntry(b):w.kind==="directory"&&await qe.removeEntry(b,{recursive:!0});console.log("OPFS cleared successfully")}catch(b){throw console.error("Error clearing OPFS:",b),b}}}return{files:ir,initialized:Rn,downloadStatus:eu,init:a,upload:f,download:g,deleteFile:h,trackers:tu,clearFiles:y,clearOPFS:_}}const k2=xt({pub:""}),kt=xt({initiated:!1,auth:!1,is:null,name:"",pub:Lt(()=>{var e;return(e=kt==null?void 0:kt.is)==null?void 0:e.pub}),color:Lt(()=>"gray"),pulse:0,pulser:null,blink:!1,safe:{saved:!1,password:"",enc:"",pass:""},rooms:{},db:void 0,pair(){return console.warn("User pair read externally"),tn()},async encrypt(e){return await Fr.encrypt(e,tn())},async decrypt(e){return await Fr.decrypt(e,tn())},async secret(e){return await Fr.secret(e,tn())}});let Rb=0;function tn(){var t,r;return console.log("User pair read",++Rb),(r=(t=Tt().user())==null?void 0:t._)==null?void 0:r.sea}function br(){if(!kt.initiated){const e=Tt();kt.db=e.user(),e.user().recall({sessionStorage:!0},()=>{console.log("user was recalled")}),e.on("auth",()=>{const t=Tt();kt.is=t.user().is,kt.pulser&&clearInterval(kt.pulser),kt.pulser=setInterval(()=>{t.user().get("pulse").put(Date.now())},1e3),t.user().get("epub").put(kt.is.epub),t.user().get("pulse").on(r=>{kt.blink=!kt.blink,kt.pulse=r}),t.user().get("safe").map().on((r,n)=>{kt.safe[n]=r}),t.user().get("profile").get("name").on(r=>kt.name=r),t.user().get("my_rooms").map().on(async(r,n)=>{let i=await Fr.decrypt(n,kt.pair());kt.rooms[i]=r})}),kt.initiated=!0}return{user:kt,auth:Bb,leave:Mb}}async function Bb(e,t=r=>{}){const r=Tt();if(!Nb(e)){console.log("incorrect pair",e);return}r.user().auth(e,async()=>{t(e),console.log("user is authenticated")})}function Mb(){var r;const e=Tt();let t=!!((r=kt.is)!=null&&r.pub);kt.initiated=!1,clearInterval(kt.pulser),e.user().leave(),setTimeout(()=>{t&&!tn()&&(kt.is=null,console.info("User logged out"))},500)}function E2(e){Tt().user().get("profile").get(e).put("")}function A2(e,t){e&&t!==void 0&&Tt().user().get("profile").get(e).put(t)}function Nb(e){return!!(e&&typeof e=="object"&&e.pub&&e.epub&&e.priv&&e.epriv)}const S2=xt({dark:If()});var jb=Object.defineProperty,ru=Object.getOwnPropertySymbols,$b=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,nu=(e,t,r)=>t in e?jb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ss=(e,t)=>{for(var r in t||(t={}))$b.call(t,r)&&nu(e,r,t[r]);if(ru)for(var r of ru(t))zb.call(t,r)&&nu(e,r,t[r]);return e},Ub=()=>({emit(e,...t){for(let r=this.events[e]||[],n=0,i=r.length;n<i;n++)r[n](...t)},events:{},on(e,t){var r;return((r=this.events)[e]||(r[e]=[])).push(t),()=>{var n;this.events[e]=(n=this.events[e])==null?void 0:n.filter(i=>t!==i)}}});function ni(e,t){return e-t}function Hb(e){return e<0?-1:1}function ii(e){return[Math.abs(e),Hb(e)]}function ff(){const e=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}var qb=2,De=qb;function df(e,t){const r=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("fill",t),n.setAttribute("id",e),n.setAttribute("viewBox","0 -5 10 10"),n.setAttribute("refX","5"),n.setAttribute("refY","0"),n.setAttribute("markerWidth","4"),n.setAttribute("markerHeight","4"),n.setAttribute("orient","auto"),i.setAttribute("d","M0,-5L10,0L0,5"),n.appendChild(i),r.appendChild(n),r}function Vb(e,t){const r=e.x-t.x,n=e.y-t.y;return r*r+n*n}function Wb(e,t,r){let n=t.x,i=t.y,s=r.x-n,o=r.y-i;if(s!==0||o!==0){const a=((e.x-n)*s+(e.y-i)*o)/(s*s+o*o);a>1?(n=r.x,i=r.y):a>0&&(n+=s*a,i+=o*a)}return s=e.x-n,o=e.y-i,s*s+o*o}function Gb(e,t){let r=e[0];const n=[r];let i;for(let s=1,o=e.length;s<o;s++)i=e[s],Vb(i,r)>t&&(n.push(i),r=i);return r!==i&&i&&n.push(i),n}function Cs(e,t,r,n,i){let s=n,o=0;for(let a=t+1;a<r;a++){const u=Wb(e[a],e[t],e[r]);u>s&&(o=a,s=u)}s>n&&(o-t>1&&Cs(e,t,o,n,i),i.push(e[o]),r-o>1&&Cs(e,o,r,n,i))}function Zb(e,t){const r=e.length-1,n=[e[0]];return Cs(e,0,r,t,n),n.push(e[r]),n}function iu(e,t,r=!1){if(e.length<=2)return e;const n=t*t;return e=r?e:Gb(e,n),e=Zb(e,n),e}var zr=class{constructor(e){this.drauu=e,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(e){}onUnselected(){}onStart(e){}onMove(e){return!1}onEnd(e){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(e){var t,r,n,i;const s=this.drauu.el,o=(t=this.drauu.options.cssZoom)!=null?t:1,a=(r=this.drauu.options.coordinateScale)!=null?r:1,u=(n=this.drauu.options.offset)!=null?n:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const c=this.drauu.el.getBoundingClientRect();return{x:(e.pageX/o-c.left+u.x)*a,y:(e.pageY/o-c.top+u.y)*a,pressure:e.pressure}}else{const c=this.drauu.svgPoint;c.x=e.clientX/o+u.x,c.y=e.clientY/o+u.y;const l=c.matrixTransform((i=s.getScreenCTM())==null?void 0:i.inverse());return{x:l.x*a,y:l.y*a,pressure:e.pressure}}}createElement(e,t){var r;const n=document.createElementNS("http://www.w3.org/2000/svg",e),i=t?Ss(Ss({},this.brush),t):this.brush;return n.setAttribute("fill",(r=i.fill)!=null?r:"transparent"),n.setAttribute("stroke",i.color),n.setAttribute("stroke-width",i.size.toString()),n.setAttribute("stroke-linecap","round"),i.dasharray&&n.setAttribute("stroke-dasharray",i.dasharray),n}attr(e,t){this.el.setAttribute(e,typeof t=="string"?t:t.toFixed(De))}_setEvent(e){this.event=e,this.point=this.getMousePosition(e)}_eventDown(e){return this._setEvent(e),this.start=this.point,this.onStart(this.point)}_eventMove(e){return this._setEvent(e),this.onMove(this.point)}_eventUp(e){return this._setEvent(e),this.onEnd(this.point)}},Kb=class or extends zr{constructor(){super(...arguments),this.points=[],this.count=0}onStart(t){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[t],this.brush.arrowEnd){this.arrowId=ff();const r=df(this.arrowId,this.brush.color);this.el.appendChild(r)}return this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&(this.points.push(t),this.count+=1),this.count>5&&(this.points=iu(this.points,1,!0),this.count=0),this.attr("d",or.toSvgData(this.points)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;if(t.setAttribute("d",or.toSvgData(iu(this.points,1,!0))),!t.getTotalLength()){const{x:r,y:n}=this.points[0],i=this.brush.size/2;t.setAttribute("d",`M ${r-i} ${n} a ${i},${i} 0 1,0 ${i*2},0 a ${i},${i} 0 1,0 ${-i*2},0`),t.setAttribute("fill",this.brush.color),t.setAttribute("stroke-width","0")}return!0}static line(t,r){const n=r.x-t.x,i=r.y-t.y;return{length:Math.sqrt(n**2+i**2),angle:Math.atan2(i,n)}}static controlPoint(t,r,n,i){const s=r||t,o=n||t,a=.2,u=or.line(s,o),c=u.angle+(i?Math.PI:0),l=u.length*a,f=t.x+Math.cos(c)*l,h=t.y+Math.sin(c)*l;return{x:f,y:h}}static bezierCommand(t,r,n){const i=or.controlPoint(n[r-1],n[r-2],t),s=or.controlPoint(t,n[r-1],n[r+1],!0);return`C ${i.x.toFixed(De)},${i.y.toFixed(De)} ${s.x.toFixed(De)},${s.y.toFixed(De)} ${t.x.toFixed(De)},${t.y.toFixed(De)}`}static toSvgData(t){return t.reduce((r,n,i,s)=>i===0?`M ${n.x.toFixed(De)},${n.y.toFixed(De)}`:`${r} ${or.bezierCommand(n,i,s)}`,"")}},Jb=class extends zr{onStart(e){return this.el=this.createElement("ellipse"),this.attr("cx",e.x),this.attr("cy",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,r]=ii(e.x-this.start.x),[n,i]=ii(e.y-this.start.y);if(this.shiftPressed){const s=Math.min(t,n);t=s,n=s}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",t),this.attr("ry",n);else{const[s,o]=[this.start.x,this.start.x+t*r].sort(ni),[a,u]=[this.start.y,this.start.y+n*i].sort(ni);this.attr("cx",(s+o)/2),this.attr("cy",(a+u)/2),this.attr("rx",(o-s)/2),this.attr("ry",(u-a)/2)}return!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(!e.getTotalLength())return!1}catch{return!1}return!0}},Yb=class extends zr{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(e){const t=(r,n)=>{if(r&&r.length)for(let i=0;i<r.length;i++){const s=r[i];if(s.getTotalLength){const o=s.getTotalLength();for(let a=0;a<this.pathSubFactor;a++){const u=s.getPointAtLength(o*a/this.pathSubFactor),c=s.getPointAtLength(o*(a+1)/this.pathSubFactor);this.pathFragments.push({x1:u.x,x2:c.x,y1:u.y,y2:c.y,segment:a,element:n||s})}}else s.children&&t(s.children,s)}};e&&t(e.children)}onUnselected(){this.pathFragments=[]}onStart(e){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=e.x,this.svgPointPrevious.y=e.y}onMove(e){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=e.x,this.svgPointCurrent.y=e.y;const t=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,t}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const e=this._erased;return this._erased=[],{undo:()=>e.forEach(t=>this.drauu._restoreNode(t)),redo:()=>e.forEach(t=>this.drauu._removeNode(t))}}checkAndEraseElement(){if(this.pathFragments.length)for(let e=0;e<this.pathFragments.length;e++){const t=this.pathFragments[e];if(this.svgPointPrevious&&this.svgPointCurrent){const r={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(t,r)&&(this.drauu._removeNode(t.element),this._erased.push(t.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(e=>!this._erased.includes(e.element))),this._erased.length>0}lineLineIntersect(e,t){const r=e.x1,n=e.x2,i=t.x1,s=t.x2,o=e.y1,a=e.y2,u=t.y1,c=t.y2,l=(r-n)*(u-c)-(o-a)*(i-s),f=(r*a-o*n)*(i-s)-(r-n)*(i*c-u*s),h=(r*a-o*n)*(u-c)-(o-a)*(i*c-u*s),d=(p,m,g)=>p>=m&&p<=g?!0:p>=g&&p<=m;if(l===0)return!1;{const p={x:f/l,y:h/l};return d(p.x,r,n)&&d(p.y,o,a)&&d(p.x,i,s)&&d(p.y,u,c)}}},Xb=class extends zr{onStart(e){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",e.x),this.attr("y1",e.y),this.attr("x2",e.x),this.attr("y2",e.y),this.brush.arrowEnd){const t=ff(),r=document.createElementNS("http://www.w3.org/2000/svg","g");return r.append(df(t,this.brush.color)),r.append(this.el),this.attr("marker-end",`url(#${t})`),r}return this.el}onMove(e){if(!this.el)return!1;let{x:t,y:r}=e;if(this.shiftPressed){const n=e.x-this.start.x,i=e.y-this.start.y;if(i!==0){let s=n/i;s=Math.round(s),Math.abs(s)<=1?(t=this.start.x+i*s,r=this.start.y+i):(t=this.start.x+n,r=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-t),this.attr("y1",this.start.y*2-r),this.attr("x2",t),this.attr("y2",r)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",t),this.attr("y2",r)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(e.getTotalLength()<5)return!1}catch{return!1}return!0}},Qb=class extends zr{onStart(e){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",e.x),this.attr("y",e.y),this.el}onMove(e){if(!this.el||!this.start)return!1;let[t,r]=ii(e.x-this.start.x),[n,i]=ii(e.y-this.start.y);if(this.shiftPressed){const s=Math.min(t,n);t=s,n=s}if(this.altPressed)this.attr("x",this.start.x-t),this.attr("y",this.start.y-n),this.attr("width",t*2),this.attr("height",n*2);else{const[s,o]=[this.start.x,this.start.x+t*r].sort(ni),[a,u]=[this.start.y,this.start.y+n*i].sort(ni);this.attr("x",s),this.attr("y",a),this.attr("width",o-s),this.attr("height",u-a)}return!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;try{if(!e.getTotalLength())return!1}catch{return!1}return!0}};function su(e,t,r,n=i=>i){return e*n(.5-t*(.5-r))}function t_(e){return[-e[0],-e[1]]}function ce(e,t){return[e[0]+t[0],e[1]+t[1]]}function ee(e,t){return[e[0]-t[0],e[1]-t[1]]}function ae(e,t){return[e[0]*t,e[1]*t]}function e_(e,t){return[e[0]/t,e[1]/t]}function Jr(e){return[e[1],-e[0]]}function ou(e,t){return e[0]*t[0]+e[1]*t[1]}function r_(e,t){return e[0]===t[0]&&e[1]===t[1]}function n_(e){return Math.hypot(e[0],e[1])}function i_(e){return e[0]*e[0]+e[1]*e[1]}function au(e,t){return i_(ee(e,t))}function pf(e){return e_(e,n_(e))}function s_(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function Yr(e,t,r){let n=Math.sin(r),i=Math.cos(r),s=e[0]-t[0],o=e[1]-t[1],a=s*i-o*n,u=s*n+o*i;return[a+t[0],u+t[1]]}function Ds(e,t,r){return ce(e,ae(ee(t,e),r))}function uu(e,t,r){return ce(e,ae(t,r))}var{min:Ar,PI:o_}=Math,cu=.275,Xr=o_+1e-4;function a_(e,t={}){let{size:r=16,smoothing:n=.5,thinning:i=.5,simulatePressure:s=!0,easing:o=C=>C,start:a={},end:u={},last:c=!1}=t,{cap:l=!0,easing:f=C=>C*(2-C)}=a,{cap:h=!0,easing:d=C=>--C*C*C+1}=u;if(e.length===0||r<=0)return[];let p=e[e.length-1].runningLength,m=a.taper===!1?0:a.taper===!0?Math.max(r,p):a.taper,g=u.taper===!1?0:u.taper===!0?Math.max(r,p):u.taper,y=Math.pow(r*n,2),_=[],b=[],w=e.slice(0,10).reduce((C,L)=>{let R=L.pressure;if(s){let U=Ar(1,L.distance/r),N=Ar(1,1-U);R=Ar(1,C+(N-C)*(U*cu))}return(C+R)/2},e[0].pressure),v=su(r,i,e[e.length-1].pressure,o),S,E=e[0].vector,T=e[0].point,I=T,P=T,B=I,D=!1;for(let C=0;C<e.length;C++){let{pressure:L}=e[C],{point:R,vector:U,distance:N,runningLength:z}=e[C];if(C<e.length-1&&p-z<3)continue;if(i){if(s){let bt=Ar(1,N/r),dt=Ar(1,1-bt);L=Ar(1,w+(dt-w)*(bt*cu))}v=su(r,i,L,o)}else v=r/2;S===void 0&&(S=v);let Y=z<m?f(z/m):1,G=p-z<g?d((p-z)/g):1;v=Math.max(.01,v*Math.min(Y,G));let K=(C<e.length-1?e[C+1]:e[C]).vector,ut=C<e.length-1?ou(U,K):1,yt=ou(U,E)<0&&!D,at=ut!==null&&ut<0;if(yt||at){let bt=ae(Jr(E),v);for(let dt=1/13,_t=0;_t<=1;_t+=dt)P=Yr(ee(R,bt),R,Xr*_t),_.push(P),B=Yr(ce(R,bt),R,Xr*-_t),b.push(B);T=P,I=B,at&&(D=!0);continue}if(D=!1,C===e.length-1){let bt=ae(Jr(U),v);_.push(ee(R,bt)),b.push(ce(R,bt));continue}let ht=ae(Jr(Ds(K,U,ut)),v);P=ee(R,ht),(C<=1||au(T,P)>y)&&(_.push(P),T=P),B=ce(R,ht),(C<=1||au(I,B)>y)&&(b.push(B),I=B),w=L,E=U}let k=e[0].point.slice(0,2),x=e.length>1?e[e.length-1].point.slice(0,2):ce(e[0].point,[1,1]),O=[],A=[];if(e.length===1){if(!(m||g)||c){let C=uu(k,pf(Jr(ee(k,x))),-(S||v)),L=[];for(let R=1/13,U=R;U<=1;U+=R)L.push(Yr(C,k,Xr*2*U));return L}}else{if(!(m||g&&e.length===1))if(l)for(let L=1/13,R=L;R<=1;R+=L){let U=Yr(b[0],k,Xr*R);O.push(U)}else{let L=ee(_[0],b[0]),R=ae(L,.5),U=ae(L,.51);O.push(ee(k,R),ee(k,U),ce(k,U),ce(k,R))}let C=Jr(t_(e[e.length-1].vector));if(g||m&&e.length===1)A.push(x);else if(h){let L=uu(x,C,v);for(let R=1/29,U=R;U<1;U+=R)A.push(Yr(L,x,Xr*3*U))}else A.push(ce(x,ae(C,v)),ce(x,ae(C,v*.99)),ee(x,ae(C,v*.99)),ee(x,ae(C,v)))}return _.concat(A,b.reverse(),O)}function u_(e,t={}){var r;let{streamline:n=.5,size:i=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-n)*.85,a=Array.isArray(e[0])?e:e.map(({x:d,y:p,pressure:m=.5})=>[d,p,m]);if(a.length===2){let d=a[1];a=a.slice(0,-1);for(let p=1;p<5;p++)a.push(Ds(a[0],d,p/4))}a.length===1&&(a=[...a,[...ce(a[0],[1,1]),...a[0].slice(2)]]);let u=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,l=0,f=u[0],h=a.length-1;for(let d=1;d<a.length;d++){let p=s&&d===h?a[d].slice(0,2):Ds(f.point,a[d],o);if(r_(f.point,p))continue;let m=s_(p,f.point);if(l+=m,d<h&&!c){if(l<i)continue;c=!0}f={point:p,pressure:a[d][2]>=0?a[d][2]:.5,vector:pf(ee(f.point,p)),distance:m,runningLength:l},u.push(f)}return u[0].vector=((r=u[1])==null?void 0:r.vector)||[0,0],u}function c_(e,t={}){return a_(u_(e,t),t)}var l_=class mf extends zr{constructor(){super(...arguments),this.points=[]}onStart(t){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[t],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&this.points.push(t),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!!t}getSvgData(t){return mf.getSvgData(t,this.brush)}static getSvgData(t,r){const n=c_(t,Ss({size:r.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},r.stylusOptions));if(!n.length)return"";const i=n.reduce((s,[o,a],u,c)=>{const[l,f]=c[(u+1)%c.length];return s.push(o,a,(o+l)/2,(a+f)/2),s},["M",...n[0],"Q"]);return i.push("Z"),i.map(s=>typeof s=="number"?s.toFixed(2):s).join(" ")}};function h_(e){return{draw:new Kb(e),stylus:new l_(e),line:new Xb(e),rectangle:new Qb(e),ellipse:new Jb(e),eraseLine:new Yb(e)}}var f_=class{constructor(e={}){this.options=e,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=Ub(),this._originalPointerId=null,this._models=h_(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),e.el&&this.mount(e.el,e.eventTarget,e.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(e){this._models[this.mode].onUnselected(),this.options.brush.mode=e,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(e){this.options.brush=e}resolveSelector(e){return typeof e=="string"?document.querySelector(e):e||null}mount(e,t,r=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(e),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const n=this.resolveSelector(t)||this.el,i=this.eventStart.bind(this),s=this.eventMove.bind(this),o=this.eventEnd.bind(this),a=this.eventKeyboard.bind(this);n.addEventListener("pointerdown",i,{passive:!1}),r.addEventListener("pointermove",s,{passive:!1}),r.addEventListener("pointerup",o,{passive:!1}),r.addEventListener("pointercancel",o,{passive:!1}),r.addEventListener("keydown",a,!1),r.addEventListener("keyup",a,!1),this._disposables.push(()=>{n.removeEventListener("pointerdown",i),r.removeEventListener("pointermove",s),r.removeEventListener("pointerup",o),r.removeEventListener("pointercancel",o),r.removeEventListener("keydown",a,!1),r.removeEventListener("keyup",a,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(e=>e()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(e,t){return this._emitter.on(e,t)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(e){!this.acceptsInput(e)||!this.drawing||this.model._eventMove(e)&&(e.stopPropagation(),e.preventDefault(),this._emitter.emit("changed"))}eventStart(e){this.acceptsInput(e)&&(e.stopPropagation(),e.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=e.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(e),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(e){if(!this.acceptsInput(e)||!this.drawing)return;const t=this.model._eventUp(e);if(!t)this.cancel();else if(t===!0){const r=this._currentNode;r&&(this._appendNode(r),this.commit({undo:()=>this._removeNode(r),redo:()=>this._restoreNode(r)}))}else this.commit(t);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(e){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(e.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==e.pointerId)}eventKeyboard(e){this.shiftPressed===e.shiftKey&&this.altPressed===e.altKey||(this.shiftPressed=e.shiftKey,this.altPressed=e.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(e){this._opStack.length=this._opIndex,this._opStack.push(e),this._opIndex++;const t=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",t)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(e){this.clear(),this.el.innerHTML=e}_appendNode(e){const t=this._elements.at(-1);t?t.after(e):this.el.append(e);const r=this._elements.push(e)-1;e.dataset.drauu_index=r.toString()}_removeNode(e){e.remove(),this._elements[+e.dataset.drauu_index]=null}_restoreNode(e){const t=+e.dataset.drauu_index;this._elements[t]=e;for(let r=t-1;r>=0;r--){const n=this._elements[r];if(n){n.after(e);return}}this.el.prepend(e)}};function d_(e){return new f_(e)}const Rt=xt({colors:["#000000",...new Array(12).fill(!0).map((e,t)=>`hsl(${t*30}, 100%,50%)`),"#ffffff"],sizes:Mf([4,8,16,24]),modes:["line","arrow","stylus","rectangle","ellipse"],mode:Lt({get(){return lu.value},set(e){lu.value=e,e==="arrow"?(cr.mode="line",cr.arrowEnd=!0):(cr.mode=e,cr.arrowEnd=!1)}}),enabled:!1,pinned:Re("drawing-pinned",!1),canUndo:!1,canRedo:!1,canClear:!1,ing:!1,initiated:!1,content:"",clear:()=>{}}),cr=Bf(Re("drawing-brush",{color:Rt.colors[0],size:10,mode:"stylus",arrowEnd:!1})),lu=Yt("stylus");let Ts=!1;const p_=xt({brush:cr,acceptsInputTypes:Lt(()=>Rt.enabled?void 0:["pen"])}),Bt=Pf(d_(p_));function Bn(){Ts=!0,Rt.content!=null?Bt.load(Rt.content):Bt==null||Bt.clear(),Ts=!1}function m_(){var e;Rt.canRedo=Bt.canRedo(),Rt.canUndo=Bt.canUndo(),Rt.canClear=!!((e=Bt.el)!=null&&e.children.length)}function C2(){if(!Rt.initiated){const e=Tt(),{user:t}=br(),r=e.user(pt.pub).get("space").get(t.pub).get("draw");r.on(s=>{Rt.ing||(Rt.content=s,Bn())});const n=Lf(()=>{var s;if(m_(),!Ts){let o=Bt.dump();Rt.content=o,r.put(o,void 0,{opt:{cert:(s=pt.features)==null?void 0:s.space}})}},200);Bt.on("changed",n),Rf(()=>{Pu(()=>{Bn()})}),nn(()=>pt.pub,s=>{Bt==null||Bt.clear(),Rt.content="",Bn()}),Bt.on("start",()=>Rt.ing=!0),Bt.on("end",()=>Rt.ing=!1),Rt.clear=()=>{var s;Bt==null||Bt.clear(),Rt.content="",r.put("",void 0,{opt:{cert:(s=pt.features)==null?void 0:s.space}})};const i=[];window.addEventListener("keydown",s=>{if(!Rt.enabled)return;const o=!s.ctrlKey&&!s.altKey&&!s.shiftKey&&!s.metaKey;let a=!0;s.code==="KeyZ"&&(s.ctrlKey||s.metaKey)?s.shiftKey?Bt.redo():Bt.undo():s.code==="Escape"?Rt.enabled=!1:s.code==="KeyC"&&(s.ctrlKey||s.metaKey)?Rt.clear():s.code.startsWith("Digit")&&o&&+s.code[5]<=i.length?cr.color=i[+s.code[5]-1]:a=!1,a&&(s.preventDefault(),s.stopPropagation())},!1)}return Rt.initiated=!0,{brush:cr,draw:Rt,drauu:Bt,loadCanvas:Bn}}const gf={trie:"ABAOAAAAAAAQmQAAAYAIf/ftmwuoFUUYx+d4z7nnHO+rUiF8gFHRBQ00CyQpJEtMUiwSSjLkViBlIqUhXnuoEXXpaWVkJFFWpj3EQCN6UdiVIKw0C4QSxbDkhkSKlUL/ZXe709yZ2XnvUfeDHzM7M/t937xn9+yZ3kTIDWAO6ALLwEoqzTbsAavBk2CNQvl14A1J/kawBXwIPgdfge/Aj2AfVe4g6AN/gL8BKRNSA1XQAYaCkeBF8ApYX47vTdkDLkDa2+BdsBV8Ar4EvWAn+AH8DPaBQ6CPuj4KTiblKxVC2irx/cMQvoNwVCW2cyHCOq4vrvTrn4D4pOR6CsJrwFjKfnTfDKSNq8Xx2YjfUun3fR7i85PrBQjvTeLdCFeBHjCUKr8a8bXgVbCx8v92uLHWz9yE28CSBLqsjDcVy7lmSyXmr3JMlPYBrj9L6jmf6ffxSN/OtMHXFbH+3UneXoQHkvgjYEii9zDSfgfHwAlQbiaktTnOG5KEw5sH6h2NtE5Oeko0r8ZJ8lVZCD8XR+MMumZS6VEdnkjq8zjVz88ivlaj319G2fVU+TT+FsL3JHq2SfI+Rt520At2gt0Ue5nr/eBXcAQcB/+AprpeG7Volqc5J7l3uIGOiUz/7uKMAdv+j7iSsjPVckyNtmirgoKCgoKCgoKCgoKCggIVZjTH79LS64WS9zYps3HPXOqZt7dKyGU1Qu5A2t1J+hKEy8HsWvw+cAXiVyD+WJL/FMIXwEvJ9WsIjyHclPEs/T7yH4CeB8FDYAVYCVaBh2tFXpFX5BV5RZ7rvLvAPeC+Wv57VkFBwenLNge/0clY09T/uzpLFyeNPh8vL/vxSYcNbTGHwDQFOtsJmdg+MH0pk7YB14dAZwch8zritOcQ7gDkLEJGgllgcgshi8D+OiHnDSbk+VLMzVScZVOLOI+mm9KxGfHDuG9MK54twOvgYKuanoKCgoKC048j2BcI9oUDOCccx35YKsffeUTfCV2C+OXJHj0I4W9IuxrPLEea4/yj4CpqDz/JOWtEuirV/u/I2hAfVuXvxSOQfj6VNwbxCYKyERORN5nKn1bt/+4pYhaVF33/dZNE11xJXsRU6J3JnFduxz0LwOLoXuR1JzrmGJxrVlL2exB/mvFnDa67Er3rMnylWa9R1ierGuCsx7IDbXN9QHs9aINvYHMPp09+apB+0iX6XreHYhlDj4RnygPLn2nYtP2nGc92Q5g51+v5WdCEnfBpl8Cv8Qq/n6jwrWa993LKd3hevzYm839zA6wDW+HDddjnP6J8+cKBX9Gc/6Uah30I/wQnGqC+qpTRJq0Z72xN++/sU+BdMFu3c08Bn02gv9/mcVE9/n48KjsW8UvBpHqc1wmmID49+g65nq2LZbRiue/BnAz9t9b59aHrOoK67kr03ZnctygJlyK8n7I1Kvo9A9ePGtSPtW/S/j6J2vXaptJ/lOO/7mTSRMUHKd6jQiH5SdH+7saxz/HfzvGZTTOVyhmOSwllp9Ek7z407Xc6FMVPdykJUBXdNm/kPacR15dQY1BWh1JGGVYHr6wPof3KSxpprDSynAnt4KpuvDlVUtTvmqqgDlUK9ppeM1TraSqsXdZ3Oj0Vnf2NJ7b305K2n2zfFbW/q/2lyoEwcdoPuo+rVJj33JWNYd784YnoPGQ7d3R9LmXc50No+z7OaeVEdxtx9/7H9bslV8/VqYR+H+bCBm/dp4W31qZjRoaL/ahR3zfy1hbR/q9aLpTI7LLrWV5Cj0lC5Pu+6BxAl6f3Ntm9Ov7ltf+x9Qltm/VB1Iasj3R5HVuqZUP2R4WJ5zVfZPODV5bnN1vWZTva6hfNd1o3e371MQ58jy/b9cilH7Q/Pua36Xqbh4jW2qznYVXdOvbzeObi7adpuuxMk6Uzz/6MhD0X8M4IvP51XT/2zJKnsP2p449ov+GdEejyvHcRrsc62+ema23WudOVqPprYjfvfSaEPXaM8ey5nG8qfcRD5Wxja8/GP1fYimq7sfXVWbNtRfXs7aM9THVEovrO0kZ8tH2otUtlzNFjTbaXqb6/0K2bzzaQ1ZGXzgqv/iI9IfvS51marq/K2kyHJOMe1XZUGVMi3SElq56i+tLpeYmPvS+vfqCFN5Z4c97nvGVt8Pqe55+uqKzbKnPRx97OXqui+5wj85vOUz0rhEBky0ZcjmeR3ya/N7r+jTJLfLUBL810jOqOYxfCWwN9+yBaj0KJy/lqYtvULx+iuwa73sNpvSJ7KvZDjp/UnqyNRNcmdlTK5H1m9KGPN/Zl7WjSxqrjy/TZSvSszL6HDz1+eZKnDyFs66ypoj1eRa9v0TlTqOpyKfQYz1tEa3Qee23qj0vRfVdi+zwp2ut03rnq+OxDaN/ZNV90rdpuOj6zelXbIeR4TcXm/QE9PnyKK/2yMylbH9EcyOO5hieyuqQieh7Lqw6ubZqOXZMxKxobsjGk6r/qPuZaTPaYkH2YCtuHdHlWV2hRabcQ80zVhs7abiMq73Vt54+qqPYRz8esevheV1XGE9uehFNGJrzfElh9tutnlrDj0KVOX/PQ53xn290EHd9tfFQVH+8ZdUW0/rD5Iddw33ZC7kMiu65xZUulDjr19SUi3122oQufXPmmOy+z7PqQ0O3pWtoDwquTqGxzIFyJr33N9Z4fQkL6YXM2ckGtAaClnjODPdPKoCsu68qK77qrwEoLGdhmPgltLxWf3xz51s3DREdIUbUZ0i9XtnTONLJ7Q/hqKrpjRrVs3vWihddXsn7UPc+a3OML0zaxtWfSXoTIfTbN45U1WUtltmT+i+qqY9u0X21E156NX3ndK9Np0095+6KiUyXNh5jOA54eV21ju36yemz8yPLJ1Vrgep8JtU/Zim4b88qp2vFFHjZ9rW8mvtvq9u2rrZ5Q9m3t+BpbJnk+x/e/",classes:{Other:0,Prepend:1,CR:2,LF:3,Control:4,Extend:5,Regional_Indicator:6,SpacingMark:7,L:8,V:9,T:10,LV:11,LVT:12,ZWJ:13,ExtPict:14}};var Xs=0,bf=-3;function dn(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g_(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new dn,this.dtree=new dn}var _f=new dn,yf=new dn,Qs=new Uint8Array(30),to=new Uint16Array(30),wf=new Uint8Array(30),vf=new Uint16Array(30),b_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hu=new dn,pe=new Uint8Array(320);function xf(e,t,r,n){var i,s;for(i=0;i<r;++i)e[i]=0;for(i=0;i<30-r;++i)e[i+r]=i/r|0;for(s=n,i=0;i<30;++i)t[i]=s,s+=1<<e[i]}function __(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}var fu=new Uint16Array(16);function Gi(e,t,r,n){var i,s;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<n;++i)e.table[t[r+i]]++;for(e.table[0]=0,s=0,i=0;i<16;++i)fu[i]=s,s+=e.table[i];for(i=0;i<n;++i)t[r+i]&&(e.trans[fu[t[r+i]]++]=i)}function y_(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function ge(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function Fs(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,i=0,s=e.tag;do n=2*n+(s&1),s>>>=1,++i,r+=t.table[i],n-=t.table[i];while(n>=0);return e.tag=s,e.bitcount-=i,t.trans[r+n]}function w_(e,t,r){var n,i,s,o,a,u;for(n=ge(e,5,257),i=ge(e,5,1),s=ge(e,4,4),o=0;o<19;++o)pe[o]=0;for(o=0;o<s;++o){var c=ge(e,3,0);pe[b_[o]]=c}for(Gi(hu,pe,0,19),a=0;a<n+i;){var l=Fs(e,hu);switch(l){case 16:var f=pe[a-1];for(u=ge(e,2,3);u;--u)pe[a++]=f;break;case 17:for(u=ge(e,3,3);u;--u)pe[a++]=0;break;case 18:for(u=ge(e,7,11);u;--u)pe[a++]=0;break;default:pe[a++]=l;break}}Gi(t,pe,0,n),Gi(r,pe,n,i)}function du(e,t,r){for(;;){var n=Fs(e,t);if(n===256)return Xs;if(n<256)e.dest[e.destLen++]=n;else{var i,s,o,a;for(n-=257,i=ge(e,Qs[n],to[n]),s=Fs(e,r),o=e.destLen-ge(e,wf[s],vf[s]),a=o;a<o+i;++a)e.dest[e.destLen++]=e.dest[a]}}}function v_(e){for(var t,r,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(~r&65535))return bf;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,Xs}function pu(e,t){var r=new g_(e,t),n,i,s;do{switch(n=y_(r),i=ge(r,2,0),i){case 0:s=v_(r);break;case 1:s=du(r,_f,yf);break;case 2:w_(r,r.ltree,r.dtree),s=du(r,r.ltree,r.dtree);break;default:s=bf}if(s!==Xs)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}__(_f,yf);xf(Qs,to,4,3);xf(wf,vf,2,1);Qs[28]=0;to[28]=258;const x_=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,mu=(e,t,r)=>{let n=e[t];e[t]=e[r],e[r]=n},k_=e=>{const t=e.length;for(let r=0;r<t;r+=4)mu(e,r,r+3),mu(e,r+1,r+2)},E_=e=>{x_&&k_(e)},A_={swap32LE:E_},S_=A_.swap32LE,eo=11,dr=5,C_=eo-dr,D_=65536>>eo,T_=1<<C_,F_=T_-1,Un=2,O_=1<<dr,Zi=O_-1,kf=65536>>dr,I_=1024>>dr,P_=kf+I_,L_=P_,R_=32,B_=L_+R_,M_=1<<Un;class N_{constructor(t){const r=typeof t.readUInt32BE=="function"&&typeof t.slice=="function";if(r||t instanceof Uint8Array){let n;if(r)this.highStart=t.readUInt32LE(0),this.errorValue=t.readUInt32LE(4),n=t.readUInt32LE(8),t=t.slice(12);else{const i=new DataView(t.buffer);this.highStart=i.getUint32(0,!0),this.errorValue=i.getUint32(4,!0),n=i.getUint32(8,!0),t=t.subarray(12)}t=pu(t,new Uint8Array(n)),t=pu(t,new Uint8Array(n)),S_(t),this.data=new Uint32Array(t.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=t)}get(t){let r;return t<0||t>1114111?this.errorValue:t<55296||t>56319&&t<=65535?(r=(this.data[t>>dr]<<Un)+(t&Zi),this.data[r]):t<=65535?(r=(this.data[kf+(t-55296>>dr)]<<Un)+(t&Zi),this.data[r]):t<this.highStart?(r=this.data[B_-D_+(t>>eo)],r=this.data[r+(t>>dr&F_)],r=(r<<Un)+(t&Zi),this.data[r]):this.data[this.data.length-M_]}}const gu=gf.trie,{Other:bu,Prepend:_u,CR:Ki,LF:Ji,Control:yu,Extend:Mn,Regional_Indicator:Te,SpacingMark:j_,L:wu,V:Yi,T:Xi,LV:vu,LVT:xu,ZWJ:Sr,ExtPict:Nn}=gf.classes;let Hn=null;if(globalThis.window){const e=window.atob(gu);Hn=new Uint8Array(e.length);for(let t=0;t<e.length;t++)Hn[t]=e.charCodeAt(t)}else Hn=Buffer.from(gu,"base64");const si=new N_(Hn),ku=function(e,t){const r=e.charCodeAt(t);if(55296<=r&&r<=56319){const n=r,i=e.charCodeAt(t+1);return 56320<=i&&i<=57343?(n-55296)*1024+(i-56320)+65536:n}if(56320<=r&&r<=57343){const n=e.charCodeAt(t-1),i=r;return 55296<=n&&n<=56319?(n-55296)*1024+(i-56320)+65536:i}return r},ro=function(e,t){let r,n;return 55296<=(r=e.charCodeAt(t))&&r<=56319&&56320<=(n=e.charCodeAt(t+1))&&n<=57343},Ct={NotBreak:0,BreakStart:1,Break:2,BreakLastRegional:3,BreakPenultimateRegional:4},Ef=function(e,t,r,n){const i=[t].concat(r).concat([n]),s=e?t:i[i.length-2],o=e?i[1]:n;let a=i.lastIndexOf(Te);if(a>0&&i.slice(1,a).every(u=>u===Te)&&s!==_u&&s!==Te)return i.filter(u=>u===Te).length%2===1?Ct.BreakLastRegional:Ct.BreakPenultimateRegional;if(s===Ki&&o===Ji)return Ct.NotBreak;if(s===yu||s===Ki||s===Ji)return o!==Mn&&r.every(u=>u===Mn)?Ct.Break:Ct.BreakStart;if(o===yu||o===Ki||o===Ji)return Ct.BreakStart;if(s===wu&&(o===wu||o===Yi||o===vu||o===xu)||(s===vu||s===Yi)&&(o===Yi||o===Xi)||(s===xu||s===Xi)&&o===Xi)return Ct.NotBreak;if(e){if(o===Mn)return Ct.NotBreak;if(o===Sr)return s==bu&&r.length>0&&r[0]==Sr?n!=Nn?Ct.BreakStart:Ct.Break:Ct.NotBreak}else if(o===Mn||o===Sr)return Ct.NotBreak;if(o===j_||s===_u)return Ct.NotBreak;if(e){if(s==Sr&&o==Nn&&(t==Sr||t==bu))return Ct.NotBreak}else if(t==Nn&&s==Sr&&o==Nn)return Ct.NotBreak;return!e&&r.indexOf(Te)>=0?Ct.Break:s===Te&&o===Te?Ct.NotBreak:Ct.BreakStart},Eu=function(e,t,r){for(;r--;)t+=ro(e,t)?2:1;return t},Mr={};Mr.nextBreak=function(e,t=0){if(t<0)return 0;if(t>=e.length-1)return e.length;const r=si.get(e.codePointAt(t)),n=[];let i,s,o;for(i=s=t+1,o=e.length;s<o;i=s+=1){if(ro(e,i-1))continue;const a=si.get(e.codePointAt(i));if(Ef(!1,r,n,a))return i;n.push(a)}return e.length};Mr.previousBreak=function(e,t=e.length){if(t>e.length)return e.length;if(t<=1)return 0;t--;let r=[],n=si.get(ku(e,t)),i,s;for(i=s=t-1;s>=-1;i=s+=-1){if(ro(e,i))continue;let o=si.get(ku(e,i));switch(Ef(!0,o,r,n)){case Ct.Break:return i+r.length+1;case Ct.BreakStart:return i+1;case Ct.BreakLastRegional:return Eu(e,i,r.concat(n).lastIndexOf(Te)+1);case Ct.BreakPenultimateRegional:return Eu(e,i,r.concat(n).lastIndexOf(Te))}r.unshift(o)}};Mr.break=function(e){const t=[];let r=0,n;for(;(n=Mr.nextBreak(e,r))<e.length;)t.push(e.slice(r,n)),r=n;return r<e.length&&t.push(e.slice(r)),t};Mr.countBreaks=function(e){let t=0,r=0,n;for(;(n=Mr.nextBreak(e,r))<e.length;)r=n,t++;return r<e.length&&t++,t};const $_={install(e){for(const t in Qi)e.component(t,Qi[t])}},D2=Object.freeze(Object.defineProperty({__proto__:null,AccountAvatar:$u,AccountBadge:ju,AccountHome:Lu,AccountPetname:Ru,AccountProfile:Nu,AccountReactions:Bu,AccountSelect:Mu,AuthCreate:Uu,AuthCredentials:qu,AuthForm:zu,AuthPanel:Hu,ChatInput:Vu,ChatMessage:Wu,ChatMessages:Gu,ChatRoom:Ku,ChatTopics:Zu,DictAuthors:Xu,DictBy:Ju,DictDefCard:Qu,DictDefList:tc,DictDefPage:ec,DictLinkButton:oc,DictLinkList:sc,DictPanel:Yu,DictWordCard:rc,DictWordList:nc,DictWordPage:ic,EmbedYoutube:ac,FileCard:lc,FileHash:hc,FileInfo:dc,FileList:pc,FileShare:fc,FormLink:mc,FormPicture:gc,FormText:bc,FormTitle:yc,FormYoutube:_c,GiftButton:kc,GiftCard:wc,GiftForm:xc,GiftList:vc,GiftStatus:Sc,GiftWallet:Ac,GiftWallets:Ec,GuestList:ml,GunGraph:Cc,GunRelay:Dc,GunRelayList:Tc,GunSettings:Oc,GunTools:Fc,GunVuePlugin:$_,MateButton:Ic,MateLink:Lc,MateList:Pc,MessageExchange:Zc,MessageList:Jc,MessagesCount:Kc,PostActionBan:qc,PostActionReact:Vc,PostActionStar:Uc,PostActionUpdate:Hc,PostCard:Rc,PostForm:Bc,PostGraph:Mc,PostLine:Nc,PostLink:jc,PostList:$c,PostPage:zc,PostReactionButton:Wc,PostReactionTabs:Gc,ProjectCard:Xc,ProjectForm:el,ProjectFunding:tl,ProjectList:Yc,ProjectPage:Qc,QrLoad:rl,QrShare:il,QrShow:nl,RoomActions:pl,RoomButton:dl,RoomCard:sl,RoomFeature:ol,RoomFeatureIcon:al,RoomForm:ul,RoomList:ll,RoomLogo:cl,RoomPage:hl,RoomProfile:fl,SpaceArrow:_l,SpaceDraw:yl,SpaceGuest:bl,SpacePlane:gl,SpaceStatus:wl,TorrentDownload:cc,TorrentUpload:uc,UiButton:vl,UiComponents:Cl,UiDark:Sl,UiLayer:xl,UiLink:kl,UiModal:El,UiPanel:Al,UserAvatar:Dl,UserGraph:Tl,UserHome:Fl,UserIcon:Ol,UserListOverlay:Il,UserProfile:Pl,UserProfileField:Ll,UserRooms:Rl,components:Qi},Symbol.toStringTag,{value:"Module"}));export{Lp as $,$u as A,Gu as B,Fr as C,Vu as D,u2 as E,gr as F,V_ as G,l2 as H,ms as I,c2 as J,a2 as K,sc as L,Ic as M,Ze as N,oc as O,Xc as P,o2 as Q,rc as R,Qu as S,cc as T,Dl as U,s2 as V,vh as W,i2 as X,q_ as Y,J_ as Z,x2 as _,Kc as a,pc as a$,xl as a0,lc as a1,v2 as a2,nl as a3,f2 as a4,h2 as a5,ac as a6,Sc as a7,q0 as a8,Q_ as a9,Nc as aA,Hc as aB,$c as aC,Wc as aD,yc as aE,tl as aF,el as aG,kc as aH,y2 as aI,Cg as aJ,al as aK,Gh as aL,sl as aM,L0 as aN,cl as aO,pl as aP,ol as aQ,ml as aR,Cr as aS,w2 as aT,C2 as aU,_l as aV,bl as aW,wl as aX,Qi as aY,Pl as aZ,Jc as a_,t2 as aa,wc as ab,dl as ac,xc as ad,Ac as ae,X_ as af,Tc as ag,e2 as ah,Cc as ai,tu as aj,Lb as ak,Lc as al,kl as am,Vc as an,n2 as ao,g2 as ap,na as aq,d2 as ar,p2 as as,gc as at,mc as au,_c as av,bc as aw,il as ax,Bc as ay,m2 as az,Ru as b,Rl as b0,Fl as b1,Al as b2,Ll as b3,E2 as b4,Tg as b5,D2 as b6,vn as c,Nu as d,Pc as e,Bu as f,Nr as g,Tt as h,pt as i,r2 as j,Gc as k,Rc as l,$f as m,ju as n,U0 as o,hh as p,A2 as q,le as r,k2 as s,S2 as t,br as u,_2 as v,Mr as w,kt as x,b2 as y,Y_ as z};
