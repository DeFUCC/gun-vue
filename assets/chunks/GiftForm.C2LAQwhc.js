var K=Object.defineProperty;var X=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t,n)=>X(e,typeof t!="symbol"?t+"":t,n);import{d as Z,x as M,h as _,z as Y,aV as ee,aE as T,c as g,o as d,ak as te,I as A,j as f,b as O,e as $,k as a,w as I,t as C,G as F,H as B,J as Q,M as ie,aU as se,aF as ne,a as re,O as le,aj as z}from"./framework.DMS09ad0.js";import{u as ae,n as L,P as oe,an as ue,h as pe}from"./components.BfuT3X--.js";import{u as ce}from"./useGuests.CEsCBifw.js";import{a as me}from"./useGift.OYI2RabE.js";import{u as fe}from"./useProject.CwKOXBze.js";import{u as de}from"./useProjects.B8PMqVCy.js";import"./theme.Cz5CPBav.js";import{c as he}from"./currencies.G9pkebxG.js";import"./useAccount.CqQPoUYf.js";import"./composables.C5gdUWiU.js";/**
 * Vue Number Format 3.34.1
 * (c) 2021-2025 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var G={prefix:"",suffix:"",separator:",",decimal:".",inputmode:"numeric",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function ve(e){return t=0,n=e,l=20,Math.max(t,Math.min(n,l));var t,n,l}class U{constructor(t){v(this,"options");v(this,"input");v(this,"number");v(this,"isClean");v(this,"isCustomDecimal");v(this,"noPreSuffix");v(this,"hasPreOrSuffix");v(this,"prefix");v(this,"preSufRegExp");v(this,"prefixRegExp");v(this,"suffixRegExp");v(this,"numberRegExp");v(this,"cleanRegExp");v(this,"negativeRegExp");this.options=Object.assign(J(G),t);const{prefix:n,suffix:l,decimal:p,reverseFill:s}=this.options;this.input="",this.number="",this.isClean=!s;const o=n,i=l,c=o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");c&&(this.prefixRegExp=new RegExp(`^${c}`)),u&&(this.suffixRegExp=new RegExp(`${u}$`)),this.prefix=n,this.numberRegExp=new RegExp(`[^0-9\\${p||"."}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=p!==".",this.noPreSuffix=!o&&!i,this.hasPreOrSuffix=!this.noPreSuffix}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(t=!1){return this.isClean=t,this}sign(){if(this.input===null||this.input===void 0)return"";const t=this.input.toString().indexOf(R)>=0;return this.isClean?t&&this.realNumber()>0?R:"":t?R:""}toFixed(){const t=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/t||0).toFixed(ve(this.options.precision))}toNumber(t){return Number(t)}numberOnly(t){var l;let n=(l=this.input)==null?void 0:l.toString();return this.prefixRegExp&&(n=n.replace(this.prefixRegExp,"")),this.suffixRegExp&&(n=n.replace(this.suffixRegExp,"")),n.replace(t||this.numberRegExp,"")}inputWithPreOrSuffix(){return this.input&&this.prefixRegExp?this.prefixRegExp.test(this.input.toString()):!this.input||!this.suffixRegExp||this.suffixRegExp.test(this.input.toString())}isNegative(){return this.sign()===R}isNumber(t){return!isNaN(this.toNumber(t||this.input))}numbers(){var p;const{reverseFill:t,decimal:n,separator:l}=this.options;if(t)this.number=this.toFixed().replace(".",n);else{const s=(p=this.input)==null?void 0:p.toString().replace(this.prefixRegExp??"","").replace(this.suffixRegExp??"","").replace(new RegExp(R,"g"),""),o=this.input.toString().indexOf(n)>=0&&this.isCustomDecimal;let i=s;l&&(i=i.replace(new RegExp(`\\${l}`,"g"),"")),i=i.replace(n,"."),typeof this.input=="number"||this.isNumber()&&!o&&!this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(s,".").join(n):this.isNumber(i)&&!o&&this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(i,".").join(n):this.number=this.parts(this.numberOnly()).join(n)}return this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(t,n){const{precision:l,minimumFractionDigits:p,decimal:s}=this.options;let o=t.toString().split(n||s);if(o.length>1&&(o[0]=this.toNumber(o[0])||0,o[1]=o.slice(1,o.length).join(""),o=o.slice(0,2)),this.isClean){const i=this.toNumber(o.join(".")).toFixed(l),c=this.toNumber(i),u=c.toFixed(p);o=p>=0&&c.toString().length<u.length?u.toString().split("."):c.toString().split(".")}return o.slice(0,2)}addSeparator(){const{decimal:t,separator:n}=this.options,l=this.numbers().split(t);return l[0]=l[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${n}`),l.join(t)}format(t){this.input=t;const{reverseFill:n,nullValue:l,prefix:p,suffix:s}=this.options;return this.isNull()&&!n?l:this.sign()+p+this.addSeparator()+s}unformat(t){this.input=t;const{reverseFill:n,nullValue:l}=this.options,p=this.realNumber(),s=this.unformatNumber();return this.isNull()||n&&p===0?l:this.sign()+s}}const R="-";function J(e){return JSON.parse(JSON.stringify(e))}function W(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function P(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function H(e,t){const n=()=>{e.setSelectionRange(t,t)};n(),setTimeout(n,1)}function V(e,t,{emit:n=!0,force:l=!1,clean:p=!1}={}){var x;const{options:s,oldValue:o}=e,{reverseFill:i,max:c,min:u}=s,h=((x=t==null?void 0:t.props)==null?void 0:x.value)||e.value;if(l||o!==h){const y=new U(s).clean(p&&!i);let k=y.format(h),w=y.clean(!i).unformat(h);p&&(Number(c)===c&&Number(w)>c?(k=y.format(c),w=c.toString()):Number(u)===u&&Number(w)<u&&(k=y.format(u),w=u.toString())),e.oldValue=k,e.unmasked=w,e.value!==k&&(e.value=k)}return n&&e.dispatchEvent(W("input"))}var ge={beforeMount:(e,{value:t,modifiers:n},l)=>{var u;e=P(e);const p=Object.assign(J(G),t,n),{reverseFill:s,precision:o,decimal:i,inputmode:c}=p;e.options=p,e.setAttribute("inputmode",c),s&&e.value?(e.value=parseFloat(new U({...p,reverseFill:!1}).unformat(e.value)).toFixed(o),(u=l==null?void 0:l.props)!=null&&u.value&&(l.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",i)),V(e,l,{force:p.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=P(e)).parentElement||e,n=s=>{s.target===e&&function(o){const{target:i,detail:c}=o;if(c!=null&&c.facade)return!1;o.stopPropagation();let u=i.value.length;const{oldValue:h,options:x}=i;i.selectionEnd&&(u=i.value.length-i.selectionEnd),V(i,null,{clean:!x.precision,emit:!1}),x.suffix&&(u=Math.max(u,x.suffix.length)),u=i.value.length-u,x.prefix&&(u=Math.max(u,x.prefix.length)),H(i,u),h!==i.value&&i.dispatchEvent(W("input"))}(s)},l=s=>{s.target===e&&function(o){const{target:i}=o,{oldValue:c}=i;V(i,null,{force:!0,clean:!0,emit:!1}),c!==i.value&&i.dispatchEvent(W("input"))}(s)},p=s=>{s.target===e&&function(o,i){const{options:c}=i,{prefix:u,suffix:h,decimal:x,min:y,separator:k}=c,{key:w}=o,D=new RegExp(`${u}|${h}`,"g"),b=i.value.replace(D,""),r=y===void 0||Number(y)<0||Number(y)!==y;if(w===x)b.includes(x)?o.preventDefault():b||(i.value="0",i.dispatchEvent(new Event("input")));else if(w!==R||r){if(w==="Backspace"){const N=i.selectionEnd||0,j=i.value.slice(N-1,N),m=i.value.slice(N-2,N);let S=i.value.length-N;[u,R,k].includes(j)&&(o.preventDefault(),i.value=j===k?i.value.replace(m,""):i.value.replace(new RegExp(`[${u}${R}]`,"g"),""),S=Math.max(S,h.length),S=i.value.length-S,S=Math.max(S,u.length),H(i,S),i.dispatchEvent(new Event("input")))}}else o.preventDefault()}(s,e)};t.addEventListener("input",n,!0),t.addEventListener("blur",l,!0),t.addEventListener("keydown",p,!0),e.cleanup=()=>{t.removeEventListener("input",n,!0),t.removeEventListener("blur",l,!0),t.removeEventListener("keydown",p,!0)}},updated:(e,{value:t,oldValue:n,modifiers:l},p)=>{if(e=P(e),t!==n){const s=e.options;e.options=Object.assign(s,t,l),V(e,p,{force:!0,clean:!1,emit:!1})}else V(e,p,{emit:!1})},unmounted:e=>{var t;(t=P(e))==null||t.cleanup()}};const E=J(G);var q=Z({name:"VueNumber",directives:{number:ge},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:E.nullValue},masked:Boolean,readonly:Boolean,disabled:Boolean,reverseFill:{type:Boolean,default:E.reverseFill},prefill:{type:Boolean,default:E.prefill},precision:{type:Number,default:()=>E.precision},minimumFractionDigits:{type:Number,default:()=>E.minimumFractionDigits},decimal:{type:String,default:()=>E.decimal},min:{type:Number,default:()=>E.min},max:{type:Number,default:()=>E.max},separator:{type:String,default:()=>E.separator},prefix:{type:String,default:()=>E.prefix},suffix:{type:String,default:()=>E.suffix},inputmode:{type:String,default:()=>E.inputmode}},emits:["update:model-value","input:model-value"],setup(e,{emit:t}){const n=M(e.modelValue),l=M(!1),p=M(""),s=_(()=>({...e})),o=new U(s.value),i=_(()=>e.masked?o.format(n.value):p.value),c=()=>{t("update:model-value",i.value)};return Y(()=>e.modelValue,u=>{i.value!==u&&(n.value=o.format(u))}),{config:s,maskedValue:n,unmaskedValue:p,input:u=>{const{target:h}=u;n.value=h.value,p.value=h.unmasked,l.value=!0,t("input:model-value",i.value)},blur:()=>{l.value&&i.value!==e.modelValue&&c()},change:c}}});const xe=["value","readonly","disabled"];q.render=function(e,t,n,l,p,s){const o=ee("number");return T((d(),g("input",{type:"text",autocomplete:"off",value:e.maskedValue,readonly:e.readonly,disabled:e.disabled,class:"v-number vue-number-format",onChange:t[0]||(t[0]=(...i)=>e.change&&e.change(...i)),onInput:t[1]||(t[1]=(...i)=>e.input&&e.input(...i)),onBlur:t[2]||(t[2]=(...i)=>e.blur&&e.blur(...i))},null,40,xe)),[[o,e.config]])},q.__file="src/component.vue";const be={class:"flex flex-col max-w-140"},Ee={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},ye={class:"flex-1"},ke={key:1,class:"flex flex-col"},we={class:"font-bold"},Ne={class:"flex flex-wrap gap-3"},Se=["value"],Re={class:"p-2 text-right"},Oe={key:0,class:"w-full"},je={key:1,class:"flex flex-wrap gap-1"},Ce=["onClick"],Fe={class:"font-bold"},Ve={key:2,class:"flex"},$e={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},Pe={class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition"},Ie={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(e,{emit:t}){const n={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},l=e,{user:p}=ae(),{gift:s,cleanGift:o,propose:i,hash:c,valid:u}=me(l.gift),{guests:h,count:x}=ce(),{project:y}=fe(te(s,"project")),{projects:k}=de();Y(()=>s.wallet,b=>{b&&(s.ql=b.currency)});const w=_(()=>{const b=pe(),r=z({});return Object.keys(h).forEach(N=>{b.user(N).get("wallets").on((j,m)=>{r[N]=h[N]})}),r}),D=_(()=>{const b=z({});return Object.keys(k).forEach(r=>{r.includes(s.to)&&(b[r]=k[r])}),b});return(b,r)=>{const N=A("auth-form"),j=A("gift-wallets");return d(),g("div",be,[f("div",Ee,[r[15]||(r[15]=f("div",{class:"p-2 text-right"},"FROM",-1)),f("div",ye,[a(p).pub?(d(),O(a(L),{key:0,pub:a(p).pub},null,8,["pub"])):(d(),O(N,{key:1}))]),r[16]||(r[16]=f("div",{class:"p-2 text-right"},"TO ",-1)),a(s).to?(d(),O(a(L),{key:0,pub:a(s).to},{default:I(()=>[r[8]||(r[8]=f("div",{class:"flex-1"},null,-1)),f("div",{class:"i-la-times mr-2",onClick:r[0]||(r[0]=m=>{a(s).to="",a(s).wallet=null})})]),_:1,__:[8]},8,["pub"])):(d(),g("div",ke,[f("div",we,"USER SELECT OF "+C(Object.keys(w.value).length),1),f("div",Ne,[(d(!0),g(F,null,B(a(h),m=>(d(),O(a(L),{key:m,pub:m.pub,onClick:S=>a(s).to=m.pub},null,8,["pub","onClick"]))),128))])])),a(s).to?(d(),g(F,{key:2},[r[14]||(r[14]=f("div",{class:"p-2 text-right"},"WALLET",-1)),(d(),O(j,{key:a(s).to,pub:a(s).to,"active-wallet":a(s).wallet,onWallet:r[1]||(r[1]=m=>a(s).wallet=m),onClear:r[2]||(r[2]=m=>a(s).wallet=null)},null,8,["pub","active-wallet"])),a(s).wallet?(d(),g(F,{key:0},[r[10]||(r[10]=f("div",{class:"p-2 text-right"},"Quantity",-1)),Q(a(q),ie({modelValue:a(s).qn,"onUpdate:modelValue":r[3]||(r[3]=m=>a(s).qn=m)},n,{placeholder:"Quantity"}),null,16,["modelValue"]),r[11]||(r[11]=f("div",{class:"p-2 text-right"},"Quality",-1)),T(f("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":r[4]||(r[4]=m=>a(s).ql=m),placeholder:"Your account currency"},[(d(!0),g(F,null,B(a(he),m=>(d(),g("option",{key:m,value:m},C(m),9,Se))),128))],512),[[se,a(s).ql]]),r[12]||(r[12]=f("div",{class:"p-2 text-right self-start"},"Wish ",-1)),T(f("textarea",{class:"p-2","onUpdate:modelValue":r[5]||(r[5]=m=>a(s).wish=m),placeholder:"Wish"},null,512),[[ne,a(s).wish]]),f("div",Re,[r[9]||(r[9]=re("PROJECT ")),a(s).project?$("",!0):(d(),g("div",Oe,"SELECT"))]),a(s).project?(d(),O(a(oe),{key:0,project:a(y),path:a(s).project},{default:I(()=>[f("div",{class:"i-la-times",onClick:r[6]||(r[6]=m=>a(s).project=null)})]),_:1},8,["project","path"])):(d(),g("div",je,[(d(!0),g(F,null,B(D.value,(m,S)=>(d(),g("div",{class:"p-2 rounded-xl cursor-pointer",key:S,style:le({backgroundColor:m.color}),onClick:_e=>a(s).project=m.path},[f("div",Fe,C(m.title),1)],12,Ce))),128))])),r[13]||(r[13]=f("div",{class:"p-2 text-right"},"ROOM",-1)),Q(a(ue)),a(u)?(d(),g("div",Ve,[f("button",{class:"button w-full justify-center",onClick:r[7]||(r[7]=m=>{a(i)(),b.$emit("sent",a(c))})},"Propose")])):$("",!0),f("pre",$e,C(a(o)),1),f("div",Pe,C(a(c)),1)],64)):$("",!0)],64)):$("",!0)])])}}};export{Ie as default};
