import{d as q,p as U,h as w,c as l,e as v,k as o,o as i,j as t,G as y,r as F,t as g,N as I,n as m,w as L,T as P,F as V,B as A}from"./framework.Cn0LGHOD.js";import{a as J,E as M,G as O,H as Q,D as z,I as W,J as Y}from"./components.BfEIn4ly.js";import"./theme.Bxy6czLB.js";const H={key:0,class:"flex p-4 items-center bg-dark-100 bg-opacity-20 mt-2 shadow-inset"},K={key:0,class:"i-la-lock"},X={key:1,class:"i-la-unlock"},Z={class:"text-sm"},ee={class:"flex flex-wrap gap-2 p-2"},te=["href"],se={key:1,class:"flex w-full justify-center mt-4"},ne={class:"p-2 flex flex-col w-full items-start",key:"text"},le={class:"flex gap-2 items-center mx-4"},oe={key:0,class:"px-2"},ie={key:1,class:"px-2"},ae={class:"w-full p-4 text-sm flex-1 rounded-xl break-all select-all",key:"text"},re={class:"p-2 flex flex-col items-center",key:"png"},ue=["src"],de={class:"p-4 flex flex-col gap-2",key:"link"},ce={class:"flex flex-wrap gap-2 items-center mx-4"},pe={key:0,class:"px-2"},ve={key:1,class:"px-2"},xe=["onClick"],me={class:"px-2"},fe=["href"],ke={class:"px-2 font-normal font-mono text-xs"},ye={class:"p-4 flex flex-col gap-2 items-center",key:"qr"},Se=q({__name:"AuthCredentials",emits:["close"],setup(we,{emit:ge}){const a=U("pass"),{user:u}=J();function f(s){a.value!=s?a.value=s:a.value=null}const{pass:c}=M(),{text:be,copy:S,copied:h,isSupported:D}=O(),{share:b,isSupported:C}=Q(),p=U(!0),k=w(()=>{var s;return p.value?(s=c==null?void 0:c.safe)==null?void 0:s.enc:JSON.stringify(u.pair())}),x=w(()=>p.value?c.links.pass:c.links.pair),E=w(()=>z({pub:u.pub,embed:k.value})),B=w(()=>G(x.value));function T(s,e){const r=document.createElement("a");r.href=s,r.download=e,r.target="_blank",r.dispatchEvent(new MouseEvent("click"))||window.open(s,"_blank")}function $(s,e,r="text/plain"){try{if(s.startsWith("data:")){T(s,e);return}const d=btoa(unescape(encodeURIComponent(s))),n=`data:${r};charset=utf-8;base64,${d}`;T(n,e)}catch(d){if(console.warn("Download failed, trying share...",d),C)b({title:e,text:s});else{const n=new Blob([s],{type:r});window.open(URL.createObjectURL(n),"_blank")}}}function _(s){!(s!=null&&s.content)||!(s!=null&&s.extension)||$(s.content,`${u.name||"account"}${s.extension}`,s.mime)}function R(s){$(s,`${u.name||"avatar"}.png`)}function N(s){$(s,`${u.name||"account"}.json`,"application/json")}function G(s,e="Bookmark"){const r=`[InternetShortcut]
URL=`+s,d=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>URL</key>
  <string>`+s+`</string>
</dict>
</plist>`,n=`[Desktop Entry]
Encoding=UTF-8
Type=Link
Name=`+e+`
URL=`+s;return{Win:{content:r,extension:".url",mime:"application/internet-shortcut"},Mac:{content:d,extension:".webloc",mime:"application/x-apple-plist"},Linux:{content:n,extension:".desktop",mime:"application/x-desktop"}}}return(s,e)=>{var r,d;return o(u).is?(i(),l("div",{class:"flex flex-col items-stretch pb-4 border-1 border-dark-100 border-opacity-10 max-w-120 mx-auto dark-bg-dark-200",key:o(u).is},[e[26]||(e[26]=t("div",{class:"mt-4 mx-6"},"Please make sure to safely store your cryptographic keypair to be able to use it again later",-1)),y(o(W)),(d=(r=o(c))==null?void 0:r.safe)!=null&&d.enc?(i(),l("div",H,[t("div",{class:"flex flex-col w-34 items-center",style:I({color:p.value?"green":"red"})},[t("button",{class:"m-2 button text-2xl",onClick:e[0]||(e[0]=n=>p.value=!p.value)},[p.value?(i(),l("div",K)):(i(),l("div",X))]),t("div",Z,g(p.value?"Encrypted":"Plain Text"),1),e[12]||(e[12]=t("div",{class:"text-m"},"Key Pair",-1))],4),t("div",ee,[t("button",{class:m(["button items-center",{active:a.value=="key"}]),onClick:e[1]||(e[1]=n=>f("key"))},e[13]||(e[13]=[t("div",{class:"i-la-envelope-open-text"},null,-1),t("div",{class:"px-2"},"Text",-1)]),2),t("button",{class:m(["button items-center",{active:a.value=="link"}]),href:x.value,target:"_blank",onClick:e[2]||(e[2]=n=>f("link"))},e[14]||(e[14]=[t("div",{class:"i-la-link"},null,-1),t("div",{class:"px-2"},"Link",-1)]),10,te),t("button",{class:m(["button items-center",{active:a.value=="qr"}]),onClick:e[3]||(e[3]=n=>f("qr"))},e[15]||(e[15]=[t("div",{class:"i-la-qrcode"},null,-1),t("div",{class:"px-2"},"QR",-1)]),2),t("button",{class:m(["button items-center",{active:a.value=="png"}]),onClick:e[4]||(e[4]=n=>f("png"))},e[16]||(e[16]=[t("div",{class:"i-la-user-circle"},null,-1),t("div",{class:"px-2"},"PNG",-1)]),2)])])):v("",!0),a.value?(i(),l("div",se,[y(P,{name:"fade",mode:"out-in"},{default:L(()=>[a.value=="key"?(i(),l("div",ne,[t("div",le,[o(D)?(i(),l("button",{key:0,class:"button items-center",onClick:e[5]||(e[5]=n=>o(S)(k.value))},[e[17]||(e[17]=t("div",{class:"i-la-copy"},null,-1)),y(P,{name:"fade",mode:"out-in",appear:""},{default:L(()=>[o(h)?(i(),l("div",oe,"Copied!")):(i(),l("div",ie,"Copy"))]),_:1})])):v("",!0),o(C)?(i(),l("button",{key:1,class:m(["button items-center",{active:a.value=="pass"}]),onClick:e[6]||(e[6]=n=>o(b)({title:o(u).name||"Gun-Vue keypair",text:k.value}))},e[18]||(e[18]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):v("",!0),t("button",{class:"button items-center",onClick:e[7]||(e[7]=n=>{N(k.value),a.value=null})},e[19]||(e[19]=[t("div",{class:"i-la-download"},null,-1),t("div",{class:"px-2"},"Download",-1)]))]),t("div",ae,g(k.value),1)])):a.value=="png"?(i(),l("div",re,[t("img",{class:"cursor-pointer shadow-lg rounded-full hover-lightness-120 hover-shadow-2xl -hover-translate-y-1 transition active-translate-y-1",src:E.value,onClick:e[8]||(e[8]=n=>R(E.value))},null,8,ue),e[20]||(e[20]=t("div",{class:"text-sm op-50 text-center m-4 max-w-50"},"Click the image to download the PNG file with your key embedded. You can use to login later. ",-1))])):a.value=="link"?(i(),l("div",de,[t("div",ce,[o(D)?(i(),l("button",{key:0,class:"button items-center",onClick:e[9]||(e[9]=n=>o(S)(x.value))},[e[21]||(e[21]=t("div",{class:"i-la-copy"},null,-1)),y(P,{name:"fade",mode:"out-in",appear:""},{default:L(()=>[o(h)?(i(),l("div",pe,"Copied!")):(i(),l("div",ve,"Copy"))]),_:1})])):v("",!0),o(C)?(i(),l("button",{key:1,class:m(["button items-center",{active:a.value=="pass"}]),onClick:e[10]||(e[10]=n=>o(b)({title:o(u).name||"Gun-Vue Login link",text:x.value}))},e[22]||(e[22]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):v("",!0),(i(!0),l(V,null,A(B.value,(n,j)=>(i(),l("button",{class:"button items-center",key:n==null?void 0:n.content,onClick:Ce=>_(n)},[e[23]||(e[23]=t("div",{class:"i-la-download"},null,-1)),t("div",me,g(j),1)],8,xe))),128))]),t("a",{class:"m-2 button items-center break-all",href:x.value,target:"_blank",onClick:e[11]||(e[11]=n=>f("links"))},[e[24]||(e[24]=t("div",{class:"i-la-link"},null,-1)),t("div",ke,g(x.value),1)],8,fe)])):a.value=="qr"?(i(),l("div",ye,[y(o(Y),{class:"max-w-600px",data:p.value?o(c).links.pass:o(c).links.pair},null,8,["data"]),e[25]||(e[25]=t("div",{class:"text-sm op-50 text-center mx-4 max-w-80"},"Make a screenshot to save the QR code for logging in later.",-1))])):v("",!0)]),_:1})])):v("",!0),F(s.$slots,"default")])):v("",!0)}}});export{Se as default};
