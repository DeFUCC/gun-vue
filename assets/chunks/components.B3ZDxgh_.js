const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/AccountHome.B4UfLTpl.js","assets/chunks/useProjects.DNsSbKLG.js","assets/chunks/framework.BoVd_Pm6.js","assets/chunks/useBackground.C4YY4yao.js","assets/chunks/theme.D6aLXOYj.js","assets/chunks/AccountPetname.CnY6JTWa.js","assets/chunks/AccountReactions.CfC1biFh.js","assets/chunks/useReactions.BtrFikxK.js","assets/chunks/AccountSelect.D5N1j3Sf.js","assets/chunks/useGuests.DhYLe88y.js","assets/chunks/AccountProfile.BBgl2Q3n.js","assets/chunks/AccountBadge.DpPTO6QB.js","assets/chunks/AccountAvatar.BmPvGWlD.js","assets/chunks/useAvatar.DrbeoNA1.js","assets/chunks/AuthLogin.EjwFs1FU.js","assets/chunks/AuthForm.Cy1oU5LE.js","assets/chunks/useQR.DBpbnkDX.js","assets/chunks/usePassKeys.CTxM7HAV.js","assets/chunks/AuthCreate.B_BiOhsx.js","assets/chunks/AuthDerive.vue_vue_type_script_setup_true_lang.BL05K6i_.js","assets/chunks/AuthCredentials.B0_1iubu.js","assets/chunks/AuthPass.CwI71-jt.js","assets/chunks/AuthDerive.D0v-VV1_.js","assets/chunks/ChatInput.BCrrdrY5.js","assets/chunks/ChatMessage.C2zR7XzT.js","assets/chunks/useMd.CQ-eG4C-.js","assets/chunks/useMates.B_r6y9q_.js","assets/chunks/ChatMessages.BdqeM1cX.js","assets/chunks/ChatTopics.CkOPRmwt.js","assets/chunks/ChatRoom.CiU9pnNv.js","assets/chunks/DictBy.B3C-H5CT.js","assets/chunks/DictPanel.9iJ9K3Db.js","assets/chunks/langs.CLi14XB-.js","assets/chunks/DictAuthors.Dn3dcTPH.js","assets/chunks/DictDefCard.XvEQ-274.js","assets/chunks/DictDefList.11UkGCMR.js","assets/chunks/DictDefPage.CiWV2BBw.js","assets/chunks/DictWordCard.B-WllXVy.js","assets/chunks/DictWordList.B8wbns7C.js","assets/chunks/DictWordPage.wrxcABw2.js","assets/chunks/DictLinkList.XUacWjWV.js","assets/chunks/DictLinkButton.AWBdlDSP.js","assets/chunks/EmbedYoutube.B5pqLKhR.js","assets/chunks/TorrentUpload.CpQQOYTq.js","assets/chunks/TorrentDownload.B2mX17wY.js","assets/chunks/FileCard.CDDPmHWr.js","assets/chunks/FileHash.BHN7GcwN.js","assets/chunks/FileShare.oKp9YHeA.js","assets/chunks/FileInfo.DzZKtfGX.js","assets/chunks/FileList.CJhSyB6S.js","assets/chunks/FormLink.BS4khNxt.js","assets/chunks/FormPicture.CqchAg1m.js","assets/chunks/FormText.CcfPWCnC.js","assets/chunks/FormYoutube.CxSKrBSs.js","assets/chunks/FormTitle.Cco4tqKn.js","assets/chunks/GiftCard.D7cqJw2K.js","assets/chunks/useGift.C4jJrmA7.js","assets/chunks/composables.DhCny5Of.js","assets/chunks/useProject.B6uT3i6E.js","assets/chunks/GiftList.C21T7fbj.js","assets/chunks/useGifts.DaA836G1.js","assets/chunks/GiftForm.DepR0xP1.js","assets/chunks/currencies.G9pkebxG.js","assets/chunks/GiftButton.CTW1IQQu.js","assets/chunks/GiftWallets.CXKrEDNn.js","assets/chunks/GiftWallet.Dkwis9D9.js","assets/chunks/GiftStatus.CKzCHZ7y.js","assets/chunks/GunGraph.CgNNALHE.js","assets/chunks/GunRelay.CRi1UCTp.js","assets/chunks/GunRelayList.Crwdkz_k.js","assets/chunks/GunTools.B04d7R0S.js","assets/chunks/GunSettings.BNT2cX_P.js","assets/chunks/MateButton.CZhcNRY2.js","assets/chunks/MateList.DtFz5gxC.js","assets/chunks/MateLink.Gj2yyS-a.js","assets/chunks/PostCard.G2LwmhcN.js","assets/chunks/useZip.C-9RKBe6.js","assets/chunks/PostForm.DGzLSdsG.js","assets/chunks/PostGraph.B9b1-rLM.js","assets/chunks/force-graph.DFXwfBP0.js","assets/chunks/PostLine.pDsBEpiP.js","assets/chunks/PostLink.BFyAJpp3.js","assets/chunks/PostList.vr9L0Sj9.js","assets/chunks/usePosts.WHJsyud0.js","assets/chunks/PostPage.DVto0Z4w.js","assets/chunks/PostActionStar.B-l8zMXG.js","assets/chunks/PostActionUpdate.Chq6_DxO.js","assets/chunks/PostActionBan.3cp2j_tK.js","assets/chunks/PostActionReact.BNA1gC9O.js","assets/chunks/PostReactionButton.CMYwKpqa.js","assets/chunks/PostReactionTabs.Yc9hSx81.js","assets/chunks/MessageExchange.Cjcy6AdU.js","assets/chunks/useMessages.C2IJUo5P.js","assets/chunks/MessagesCount.BY-Ol5YK.js","assets/chunks/MessageList.DxDasc7g.js","assets/chunks/ProjectList.D4Qeo7Zi.js","assets/chunks/ProjectForm.Ddn6J3pa.js","assets/chunks/ProjectCard.cFTyH2AG.js","assets/chunks/ProjectPage.BLQiTzvN.js","assets/chunks/ProjectFunding.pTEZhJzM.js","assets/chunks/QrLoad.DofyE1Oi.js","assets/chunks/QrShow.DRuAo8Xs.js","assets/chunks/QrShare.C44Nf-oK.js","assets/chunks/RoomCard.DaZzKrbg.js","assets/chunks/useRoomLogo.iuoJIT0s.js","assets/chunks/RoomFeature.BCfECJYR.js","assets/chunks/RoomFeatureIcon.8cSRalsI.js","assets/chunks/RoomForm.pK5fhjqp.js","assets/chunks/RoomLogo.BweACW5Z.js","assets/chunks/RoomList.BlbjOv7q.js","assets/chunks/useRooms.DST0Ahte.js","assets/chunks/RoomPage.D81jYDYS.js","assets/chunks/RoomProfile.DXaGW0Km.js","assets/chunks/RoomButton.Cc7h6XRG.js","assets/chunks/RoomActions.pzstqyhJ.js","assets/chunks/GuestList.DoiUY9HR.js","assets/chunks/SpacePlane.Cn0gQOFH.js","assets/chunks/SpaceGuest.D8k9nWUi.js","assets/chunks/SpaceArrow.CntEwFn-.js","assets/chunks/SpaceDraw.CsLI1vXs.js","assets/chunks/SpaceStatus.63aUEUTv.js","assets/chunks/UiButton.DXx4x6i0.js","assets/chunks/UiLayer.dJ1Demys.js","assets/chunks/UiLink.DwY-6QWj.js","assets/chunks/UiModal.AQq_OYTH.js","assets/chunks/UiPanel.BdQA_2tK.js","assets/chunks/UiDark.Cfbl3UUN.js","assets/chunks/UiComponents.AKl5uSvv.js","assets/chunks/UserAvatar.D5zwvfjm.js","assets/chunks/UserGraph.DsdHHRTA.js","assets/chunks/UserHome.DYXyXTfO.js","assets/chunks/UserIcon.Bnn57b4x.js","assets/chunks/UserListOverlay.Ci8A_t1p.js","assets/chunks/UserPanel.NBnQAPEg.js","assets/chunks/UserProfile.hb8_Dlwy.js","assets/chunks/UserProfileField._Ni4haXh.js","assets/chunks/UserRooms.fEMJv8YR.js"])))=>i.map(i=>d[i]);
var l0=Object.defineProperty;var h0=(t,e,r)=>e in t?l0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var _t=(t,e,r)=>h0(t,typeof e!="symbol"?e+"":e,r);import"./theme.D6aLXOYj.js";import{U as Q,V as Y,S as Rn,D as ke,q as it,p as Je,ah as Cn,ai as Ie,k as hf,v as df,P as Ci,aj as d0,ak as p0,al as Ua,am as pf,L as b0,an as Xe,ao as m0,ap as g0,s as Di,h as we,aq as bf,ar as _0,as as v0}from"./framework.BoVd_Pm6.js";const mf=Q(()=>Y(()=>import("./AccountHome.B4UfLTpl.js"),__vite__mapDeps([0,1,2,3,4]))),gf=Q(()=>Y(()=>import("./AccountPetname.CnY6JTWa.js"),__vite__mapDeps([5,2,4]))),_f=Q(()=>Y(()=>import("./AccountReactions.CfC1biFh.js"),__vite__mapDeps([6,2,7,4]))),vf=Q(()=>Y(()=>import("./AccountSelect.D5N1j3Sf.js"),__vite__mapDeps([8,2,9,4]))),yf=Q(()=>Y(()=>import("./AccountProfile.BBgl2Q3n.js"),__vite__mapDeps([10,2,4]))),wf=Q(()=>Y(()=>import("./AccountBadge.DpPTO6QB.js"),__vite__mapDeps([11,4,2]))),xf=Q(()=>Y(()=>import("./AccountAvatar.BmPvGWlD.js"),__vite__mapDeps([12,13,2,4]))),kf=Q(()=>Y(()=>import("./AuthLogin.EjwFs1FU.js"),__vite__mapDeps([14,4,2]))),Af=Q(()=>Y(()=>import("./AuthForm.Cy1oU5LE.js"),__vite__mapDeps([15,2,16,4,17]))),Sf=Q(()=>Y(()=>import("./AuthCreate.B_BiOhsx.js"),__vite__mapDeps([18,2,4,19,17]))),Ef=Q(()=>Y(()=>import("./AuthCredentials.B0_1iubu.js"),__vite__mapDeps([20,2,4]))),Cf=Q(()=>Y(()=>import("./AuthPass.CwI71-jt.js"),__vite__mapDeps([21,2,4]))),Df=Q(()=>Y(()=>import("./AuthDerive.D0v-VV1_.js"),__vite__mapDeps([22,19,2,17,4]))),Tf=Q(()=>Y(()=>import("./ChatInput.BCrrdrY5.js"),__vite__mapDeps([23,2,4]))),Mf=Q(()=>Y(()=>import("./ChatMessage.C2zR7XzT.js"),__vite__mapDeps([24,2,25,26,4]))),If=Q(()=>Y(()=>import("./ChatMessages.BdqeM1cX.js"),__vite__mapDeps([27,2,24,25,26,4]))),Pf=Q(()=>Y(()=>import("./ChatTopics.CkOPRmwt.js"),__vite__mapDeps([28,2,4]))),Of=Q(()=>Y(()=>import("./ChatRoom.CiU9pnNv.js"),__vite__mapDeps([29,4,2,3]))),Ff=Q(()=>Y(()=>import("./DictBy.B3C-H5CT.js"),__vite__mapDeps([30,2,4]))),Rf=Q(()=>Y(()=>import("./DictPanel.9iJ9K3Db.js"),__vite__mapDeps([31,2,32,4]))),Lf=Q(()=>Y(()=>import("./DictAuthors.Dn3dcTPH.js"),__vite__mapDeps([33,4,2]))),Bf=Q(()=>Y(()=>import("./DictDefCard.XvEQ-274.js"),__vite__mapDeps([34,2,32,4]))),Nf=Q(()=>Y(()=>import("./DictDefList.11UkGCMR.js"),__vite__mapDeps([35,2,32,4]))),zf=Q(()=>Y(()=>import("./DictDefPage.CiWV2BBw.js"),__vite__mapDeps([36,2,32,4]))),jf=Q(()=>Y(()=>import("./DictWordCard.B-WllXVy.js"),__vite__mapDeps([37,2,4]))),qf=Q(()=>Y(()=>import("./DictWordList.B8wbns7C.js"),__vite__mapDeps([38,2,4]))),Uf=Q(()=>Y(()=>import("./DictWordPage.wrxcABw2.js"),__vite__mapDeps([39,2,4]))),$f=Q(()=>Y(()=>import("./DictLinkList.XUacWjWV.js"),__vite__mapDeps([40,2,4]))),Hf=Q(()=>Y(()=>import("./DictLinkButton.AWBdlDSP.js"),__vite__mapDeps([41,2,4]))),Wf=Q(()=>Y(()=>import("./EmbedYoutube.B5pqLKhR.js"),__vite__mapDeps([42,2]))),Vf=Q(()=>Y(()=>import("./TorrentUpload.CpQQOYTq.js"),__vite__mapDeps([43,2,4]))),Gf=Q(()=>Y(()=>import("./TorrentDownload.B2mX17wY.js"),__vite__mapDeps([44,4,2]))),Zf=Q(()=>Y(()=>import("./FileCard.CDDPmHWr.js"),__vite__mapDeps([45,2,4]))),Kf=Q(()=>Y(()=>import("./FileHash.BHN7GcwN.js"),__vite__mapDeps([46,2,4]))),Jf=Q(()=>Y(()=>import("./FileShare.oKp9YHeA.js"),__vite__mapDeps([47,2,4]))),Xf=Q(()=>Y(()=>import("./FileInfo.DzZKtfGX.js"),__vite__mapDeps([48,2,4]))),Yf=Q(()=>Y(()=>import("./FileList.CJhSyB6S.js"),__vite__mapDeps([49,2,4]))),Qf=Q(()=>Y(()=>import("./FormLink.BS4khNxt.js"),__vite__mapDeps([50,2,4]))),el=Q(()=>Y(()=>import("./FormPicture.CqchAg1m.js"),__vite__mapDeps([51,4,2]))),tl=Q(()=>Y(()=>import("./FormText.CcfPWCnC.js"),__vite__mapDeps([52,2,25,4]))),rl=Q(()=>Y(()=>import("./FormYoutube.CxSKrBSs.js"),__vite__mapDeps([53,2,4]))),nl=Q(()=>Y(()=>import("./FormTitle.Cco4tqKn.js"),__vite__mapDeps([54,2]))),il=Q(()=>Y(()=>import("./GiftCard.D7cqJw2K.js"),__vite__mapDeps([55,2,56,57,58,4]))),sl=Q(()=>Y(()=>import("./GiftList.C21T7fbj.js"),__vite__mapDeps([59,60,57,2,4]))),al=Q(()=>Y(()=>import("./GiftForm.DepR0xP1.js"),__vite__mapDeps([61,2,9,56,57,58,1,4,62]))),ol=Q(()=>Y(()=>import("./GiftButton.CTW1IQQu.js"),__vite__mapDeps([63,4,2]))),ul=Q(()=>Y(()=>import("./GiftWallets.CXKrEDNn.js"),__vite__mapDeps([64,2,4,62]))),cl=Q(()=>Y(()=>import("./GiftWallet.Dkwis9D9.js"),__vite__mapDeps([65,2,4]))),fl=Q(()=>Y(()=>import("./GiftStatus.CKzCHZ7y.js"),__vite__mapDeps([66,2]))),ll=Q(()=>Y(()=>import("./GunGraph.CgNNALHE.js"),__vite__mapDeps([67,2,4]))),hl=Q(()=>Y(()=>import("./GunRelay.CRi1UCTp.js"),__vite__mapDeps([68,2,4]))),dl=Q(()=>Y(()=>import("./GunRelayList.Crwdkz_k.js"),__vite__mapDeps([69,2,4]))),pl=Q(()=>Y(()=>import("./GunTools.B04d7R0S.js"),__vite__mapDeps([70,4,2]))),bl=Q(()=>Y(()=>import("./GunSettings.BNT2cX_P.js"),__vite__mapDeps([71,2,4]))),ml=Q(()=>Y(()=>import("./MateButton.CZhcNRY2.js"),__vite__mapDeps([72,2,26,4]))),gl=Q(()=>Y(()=>import("./MateList.DtFz5gxC.js"),__vite__mapDeps([73,2,26,4]))),_l=Q(()=>Y(()=>import("./MateLink.Gj2yyS-a.js"),__vite__mapDeps([74,26,2,4]))),vl=Q(()=>Y(()=>import("./PostCard.G2LwmhcN.js"),__vite__mapDeps([75,76,25,56,57,2,4]))),yl=Q(()=>Y(()=>import("./PostForm.DGzLSdsG.js"),__vite__mapDeps([77,2,76,25,56,57,4]))),wl=Q(()=>Y(()=>import("./PostGraph.B9b1-rLM.js"),__vite__mapDeps([78,79,2,4]))),xl=Q(()=>Y(()=>import("./PostLine.pDsBEpiP.js"),__vite__mapDeps([80,76,25,56,57,2,4]))),kl=Q(()=>Y(()=>import("./PostLink.BFyAJpp3.js"),__vite__mapDeps([81,2,4]))),Al=Q(()=>Y(()=>import("./PostList.vr9L0Sj9.js"),__vite__mapDeps([82,2,83,76,25,56,57,7,4]))),Sl=Q(()=>Y(()=>import("./PostPage.DVto0Z4w.js"),__vite__mapDeps([84,25,76,56,57,2,83,4]))),El=Q(()=>Y(()=>import("./PostActionStar.B-l8zMXG.js"),__vite__mapDeps([85,2,4]))),Cl=Q(()=>Y(()=>import("./PostActionUpdate.Chq6_DxO.js"),__vite__mapDeps([86,2,76,25,56,57,4]))),Dl=Q(()=>Y(()=>import("./PostActionBan.3cp2j_tK.js"),__vite__mapDeps([87,2,4]))),Tl=Q(()=>Y(()=>import("./PostActionReact.BNA1gC9O.js"),__vite__mapDeps([88,2,26,7,4]))),Ml=Q(()=>Y(()=>import("./PostReactionButton.CMYwKpqa.js"),__vite__mapDeps([89,2,4]))),Il=Q(()=>Y(()=>import("./PostReactionTabs.Yc9hSx81.js"),__vite__mapDeps([90,2,26,4]))),Pl=Q(()=>Y(()=>import("./MessageExchange.Cjcy6AdU.js"),__vite__mapDeps([91,92,2,4,47]))),Ol=Q(()=>Y(()=>import("./MessagesCount.BY-Ol5YK.js"),__vite__mapDeps([93,92,2,4]))),Fl=Q(()=>Y(()=>import("./MessageList.DxDasc7g.js"),__vite__mapDeps([94,2,92,4]))),Rl=Q(()=>Y(()=>import("./ProjectList.D4Qeo7Zi.js"),__vite__mapDeps([95,2,1,4,96,58]))),Ll=Q(()=>Y(()=>import("./ProjectCard.cFTyH2AG.js"),__vite__mapDeps([97,2,58,4]))),Bl=Q(()=>Y(()=>import("./ProjectPage.BLQiTzvN.js"),__vite__mapDeps([98,2,25,58,4]))),Nl=Q(()=>Y(()=>import("./ProjectFunding.pTEZhJzM.js"),__vite__mapDeps([99,2,60,57,4]))),zl=Q(()=>Y(()=>import("./ProjectForm.Ddn6J3pa.js"),__vite__mapDeps([96,2,58,4]))),jl=Q(()=>Y(()=>import("./QrLoad.DofyE1Oi.js"),__vite__mapDeps([100,16,2]))),ql=Q(()=>Y(()=>import("./QrShow.DRuAo8Xs.js"),__vite__mapDeps([101,2,4]))),Ul=Q(()=>Y(()=>import("./QrShare.C44Nf-oK.js"),__vite__mapDeps([102,2,4]))),$l=Q(()=>Y(()=>import("./RoomCard.DaZzKrbg.js"),__vite__mapDeps([103,104,2,3,4]))),Hl=Q(()=>Y(()=>import("./RoomFeature.BCfECJYR.js"),__vite__mapDeps([105,4,2]))),Wl=Q(()=>Y(()=>import("./RoomFeatureIcon.8cSRalsI.js"),__vite__mapDeps([106,2]))),Vl=Q(()=>Y(()=>import("./RoomForm.pK5fhjqp.js"),__vite__mapDeps([107,2,3,4]))),Gl=Q(()=>Y(()=>import("./RoomLogo.BweACW5Z.js"),__vite__mapDeps([108,2,104,4]))),Zl=Q(()=>Y(()=>import("./RoomList.BlbjOv7q.js"),__vite__mapDeps([109,110,2,4]))),Kl=Q(()=>Y(()=>import("./RoomPage.D81jYDYS.js"),__vite__mapDeps([111,25,110,2,3,4]))),Jl=Q(()=>Y(()=>import("./RoomProfile.DXaGW0Km.js"),__vite__mapDeps([112,25,110,2,3,4]))),Xl=Q(()=>Y(()=>import("./RoomButton.Cc7h6XRG.js"),__vite__mapDeps([113,104,2,3,4]))),Yl=Q(()=>Y(()=>import("./RoomActions.pzstqyhJ.js"),__vite__mapDeps([114,2,4]))),Ql=Q(()=>Y(()=>import("./GuestList.DoiUY9HR.js"),__vite__mapDeps([115,2,110,9,4]))),eh=Q(()=>Y(()=>import("./SpacePlane.Cn0gQOFH.js"),__vite__mapDeps([116,2,26,4]))),th=Q(()=>Y(()=>import("./SpaceGuest.D8k9nWUi.js"),__vite__mapDeps([117,13,2,4]))),rh=Q(()=>Y(()=>import("./SpaceArrow.CntEwFn-.js"),__vite__mapDeps([118,2,4]))),nh=Q(()=>Y(()=>import("./SpaceDraw.CsLI1vXs.js"),__vite__mapDeps([119,2,4]))),ih=Q(()=>Y(()=>import("./SpaceStatus.63aUEUTv.js"),__vite__mapDeps([120,2]))),sh=Q(()=>Y(()=>import("./UiButton.DXx4x6i0.js"),__vite__mapDeps([121,2]))),ah=Q(()=>Y(()=>import("./UiLayer.dJ1Demys.js"),__vite__mapDeps([122,2]))),oh=Q(()=>Y(()=>import("./UiLink.DwY-6QWj.js"),__vite__mapDeps([123,2]))),uh=Q(()=>Y(()=>import("./UiModal.AQq_OYTH.js"),__vite__mapDeps([124,2]))),ch=Q(()=>Y(()=>import("./UiPanel.BdQA_2tK.js"),__vite__mapDeps([125,2]))),fh=Q(()=>Y(()=>import("./UiDark.Cfbl3UUN.js"),__vite__mapDeps([126,2,4]))),lh=Q(()=>Y(()=>import("./UiComponents.AKl5uSvv.js"),__vite__mapDeps([127,4,2]))),hh=Q(()=>Y(()=>import("./UserAvatar.D5zwvfjm.js"),__vite__mapDeps([128,2,13,4]))),dh=Q(()=>Y(()=>import("./UserGraph.DsdHHRTA.js"),__vite__mapDeps([129,26,2,79,4]))),ph=Q(()=>Y(()=>import("./UserHome.DYXyXTfO.js"),__vite__mapDeps([130,2,110,4,113,104,3,47,48]))),bh=Q(()=>Y(()=>import("./UserIcon.Bnn57b4x.js"),__vite__mapDeps([131,4,2]))),mh=Q(()=>Y(()=>import("./UserListOverlay.Ci8A_t1p.js"),__vite__mapDeps([132,2,110,9,4]))),gh=Q(()=>Y(()=>import("./UserPanel.NBnQAPEg.js"),__vite__mapDeps([133,4,2,3]))),_h=Q(()=>Y(()=>import("./UserProfile.hb8_Dlwy.js"),__vite__mapDeps([134,2,4]))),vh=Q(()=>Y(()=>import("./UserProfileField._Ni4haXh.js"),__vite__mapDeps([135,2,4]))),yh=Q(()=>Y(()=>import("./UserRooms.fEMJv8YR.js"),__vite__mapDeps([136,2,4]))),ha=Object.freeze(Object.defineProperty({__proto__:null,AccountAvatar:xf,AccountBadge:wf,AccountHome:mf,AccountPetname:gf,AccountProfile:yf,AccountReactions:_f,AccountSelect:vf,AuthCreate:Sf,AuthCredentials:Ef,AuthDerive:Df,AuthForm:Af,AuthLogin:kf,AuthPass:Cf,ChatInput:Tf,ChatMessage:Mf,ChatMessages:If,ChatRoom:Of,ChatTopics:Pf,DictAuthors:Lf,DictBy:Ff,DictDefCard:Bf,DictDefList:Nf,DictDefPage:zf,DictLinkButton:Hf,DictLinkList:$f,DictPanel:Rf,DictWordCard:jf,DictWordList:qf,DictWordPage:Uf,EmbedYoutube:Wf,FileCard:Zf,FileHash:Kf,FileInfo:Xf,FileList:Yf,FileShare:Jf,FormLink:Qf,FormPicture:el,FormText:tl,FormTitle:nl,FormYoutube:rl,GiftButton:ol,GiftCard:il,GiftForm:al,GiftList:sl,GiftStatus:fl,GiftWallet:cl,GiftWallets:ul,GuestList:Ql,GunGraph:ll,GunRelay:hl,GunRelayList:dl,GunSettings:bl,GunTools:pl,MateButton:ml,MateLink:_l,MateList:gl,MessageExchange:Pl,MessageList:Fl,MessagesCount:Ol,PostActionBan:Dl,PostActionReact:Tl,PostActionStar:El,PostActionUpdate:Cl,PostCard:vl,PostForm:yl,PostGraph:wl,PostLine:xl,PostLink:kl,PostList:Al,PostPage:Sl,PostReactionButton:Ml,PostReactionTabs:Il,ProjectCard:Ll,ProjectForm:zl,ProjectFunding:Nl,ProjectList:Rl,ProjectPage:Bl,QrLoad:jl,QrShare:Ul,QrShow:ql,RoomActions:Yl,RoomButton:Xl,RoomCard:$l,RoomFeature:Hl,RoomFeatureIcon:Wl,RoomForm:Vl,RoomList:Zl,RoomLogo:Gl,RoomPage:Kl,RoomProfile:Jl,SpaceArrow:rh,SpaceDraw:nh,SpaceGuest:th,SpacePlane:eh,SpaceStatus:ih,TorrentDownload:Gf,TorrentUpload:Vf,UiButton:sh,UiComponents:lh,UiDark:fh,UiLayer:ah,UiLink:oh,UiModal:uh,UiPanel:ch,UserAvatar:hh,UserGraph:dh,UserHome:ph,UserIcon:bh,UserListOverlay:mh,UserPanel:gh,UserProfile:_h,UserProfileField:vh,UserRooms:yh},Symbol.toStringTag,{value:"Module"}));function Tr(t){return m0()?(g0(t),!0):!1}const rs=new WeakMap,y0=(...t)=>{var e;const r=t[0],s=(e=Ua())==null?void 0:e.proxy;if(s==null&&!pf())throw new Error("injectLocal must be called in setup");return s&&rs.has(s)&&r in rs.get(s)?rs.get(s)[r]:b0(...t)};function w0(t){if(!Cn(t))return Ie(t);const e=new Proxy({},{get(r,s,i){return hf(Reflect.get(t.value,s,i))},set(r,s,i){return Cn(t.value[s])&&!Cn(i)?t.value[s].value=i:t.value[s]=i,!0},deleteProperty(r,s){return Reflect.deleteProperty(t.value,s)},has(r,s){return Reflect.has(t.value,s)},ownKeys(){return Object.keys(t.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return Ie(e)}const Wr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const x0=t=>t!=null,k0=Object.prototype.toString,A0=t=>k0.call(t)==="[object Object]",da=()=>+Date.now(),$_=(t,e,r)=>Math.min(r,Math.max(e,t)),Gt=()=>{},S0=E0();function E0(){var t,e;return Wr&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function $a(...t){if(t.length!==1)return d0(...t);const e=t[0];return typeof e=="function"?Rn(p0(()=>({get:e,set:Gt}))):Je(e)}function Ha(t,e){function r(...s){return new Promise((i,n)=>{Promise.resolve(t(()=>e.apply(this,s),{fn:e,thisArg:this,args:s})).then(i).catch(n)})}return r}const Wa=t=>t();function wh(t,e={}){let r,s,i=Gt;const n=c=>{clearTimeout(c),i(),i=Gt};let a;return c=>{const u=Xe(t),f=Xe(e.maxWait);return r&&n(r),u<=0||f!==void 0&&f<=0?(s&&(n(s),s=null),Promise.resolve(c())):new Promise((l,h)=>{i=e.rejectOnCancel?h:l,a=c,f&&!s&&(s=setTimeout(()=>{r&&n(r),s=null,l(a())},f)),r=setTimeout(()=>{s&&n(s),s=null,l(c())},u)})}}function xh(t=Wa,e={}){const{initialState:r="active"}=e,s=$a(r==="active");function i(){s.value=!1}function n(){s.value=!0}const a=(...o)=>{s.value&&t(...o)};return{isActive:Rn(s),pause:i,resume:n,eventFilter:a}}function C0(t){let e;function r(){return e||(e=t()),e}return r.reset=async()=>{const s=e;e=void 0,s&&await s},r}function go(t){return t.endsWith("rem")?Number.parseFloat(t)*16:Number.parseFloat(t)}function D0(t){return Object.entries(t)}function ii(t){return Array.isArray(t)?t:[t]}function T0(t){return Ua()}function kh(t,e=200,r={}){return Ha(wh(e,r),t)}function M0(t,e=200,r={}){const s=Je(t.value),i=kh(()=>{s.value=t.value},e,r);return it(t,()=>i()),s}function Ah(t,e,r={}){const{eventFilter:s=Wa,...i}=r;return it(t,Ha(s,e),i)}function I0(t,e,r={}){const{eventFilter:s,initialState:i="active",...n}=r,{eventFilter:a,pause:o,resume:c,isActive:u}=xh(s,{initialState:i});return{stop:Ah(t,e,{...n,eventFilter:a}),pause:o,resume:c,isActive:u}}function Va(t,e=!0,r){T0()?df(t,r):e?t():Ci(t)}function Sh(t,e=1e3,r={}){const{immediate:s=!0,immediateCallback:i=!1}=r;let n=null;const a=ke(!1);function o(){n&&(clearInterval(n),n=null)}function c(){a.value=!1,o()}function u(){const f=Xe(e);f<=0||(a.value=!0,i&&t(),o(),a.value&&(n=setInterval(t,f)))}if(s&&Wr&&u(),Cn(e)||typeof e=="function"){const f=it(e,()=>{a.value&&Wr&&u()});Tr(f)}return Tr(c),{isActive:a,pause:c,resume:u}}function P0(t,e,r={}){const{immediate:s=!0,immediateCallback:i=!1}=r,n=ke(!1);let a=null;function o(){a&&(clearTimeout(a),a=null)}function c(){n.value=!1,o()}function u(...f){i&&t(),o(),n.value=!0,a=setTimeout(()=>{n.value=!1,a=null,t(...f)},Xe(e))}return s&&(n.value=!0,Wr&&u()),Tr(c),{isPending:Rn(n),start:u,stop:c}}function H_(t,e,r={}){const{debounce:s=0,maxWait:i=void 0,...n}=r;return Ah(t,e,{...n,eventFilter:wh(s,{maxWait:i})})}function O0(t,e,r={}){const{eventFilter:s=Wa,...i}=r,n=Ha(s,e);let a,o,c;if(i.flush==="sync"){const u=ke(!1);o=()=>{},a=f=>{u.value=!0,f(),u.value=!1},c=it(t,(...f)=>{u.value||n(...f)},i)}else{const u=[],f=ke(0),l=ke(0);o=()=>{f.value=l.value},u.push(it(t,()=>{l.value++},{...i,flush:"sync"})),a=h=>{const p=l.value;h(),f.value+=l.value-p},u.push(it(t,(...h)=>{const p=f.value>0&&f.value===l.value;f.value=0,l.value=0,!p&&n(...h)},i)),c=()=>{u.forEach(h=>h())}}return{stop:c,ignoreUpdates:a,ignorePrevAsyncUpdates:o}}function F0(t,e,r){return it(t,e,{...r,immediate:!0})}function W_(t,e,r){let s;Cn(r)?s={evaluating:r}:s=r||{};const{lazy:i=!1,evaluating:n=void 0,shallow:a=!0,onError:o=Gt}=s,c=ke(!i),u=a?ke(e):Je(e);let f=0;return Di(async l=>{if(!c.value)return;f++;const h=f;let p=!1;n&&Promise.resolve().then(()=>{n.value=!0});try{const b=await t(m=>{l(()=>{n&&(n.value=!1),p||m()})});h===f&&(u.value=b)}catch(b){o(b)}finally{n&&h===f&&(n.value=!1),p=!0}}),i?we(()=>(c.value=!0,u.value)):u}const mt=Wr?window:void 0,R0=Wr?window.document:void 0,Ti=Wr?window.navigator:void 0;function yt(t){var e;const r=Xe(t);return(e=r==null?void 0:r.$el)!=null?e:r}function Fe(...t){const e=[],r=()=>{e.forEach(o=>o()),e.length=0},s=(o,c,u,f)=>(o.addEventListener(c,u,f),()=>o.removeEventListener(c,u,f)),i=we(()=>{const o=ii(Xe(t[0])).filter(c=>c!=null);return o.every(c=>typeof c!="string")?o:void 0}),n=F0(()=>{var o,c;return[(c=(o=i.value)==null?void 0:o.map(u=>yt(u)))!=null?c:[mt].filter(u=>u!=null),ii(Xe(i.value?t[1]:t[0])),ii(hf(i.value?t[2]:t[1])),Xe(i.value?t[3]:t[2])]},([o,c,u,f])=>{if(r(),!(o!=null&&o.length)||!(c!=null&&c.length)||!(u!=null&&u.length))return;const l=A0(f)?{...f}:f;e.push(...o.flatMap(h=>c.flatMap(p=>u.map(b=>s(h,p,b,l)))))},{flush:"post"}),a=()=>{n(),r()};return Tr(r),a}let _o=!1;function V_(t,e,r={}){const{window:s=mt,ignore:i=[],capture:n=!0,detectIframe:a=!1,controls:o=!1}=r;if(!s)return o?{stop:Gt,cancel:Gt,trigger:Gt}:Gt;if(S0&&!_o){_o=!0;const v={passive:!0};Array.from(s.document.body.children).forEach(x=>Fe(x,"click",Gt,v)),Fe(s.document.documentElement,"click",Gt,v)}let c=!0;const u=v=>Xe(i).some(x=>{if(typeof x=="string")return Array.from(s.document.querySelectorAll(x)).some(_=>_===v.target||v.composedPath().includes(_));{const _=yt(x);return _&&(v.target===_||v.composedPath().includes(_))}});function f(v){const x=Xe(v);return x&&x.$.subTree.shapeFlag===16}function l(v,x){const _=Xe(v),y=_.$.subTree&&_.$.subTree.children;return y==null||!Array.isArray(y)?!1:y.some(k=>k.el===x.target||x.composedPath().includes(k.el))}const h=v=>{const x=yt(t);if(v.target!=null&&!(!(x instanceof Element)&&f(t)&&l(t,v))&&!(!x||x===v.target||v.composedPath().includes(x))){if("detail"in v&&v.detail===0&&(c=!u(v)),!c){c=!0;return}e(v)}};let p=!1;const b=[Fe(s,"click",v=>{p||(p=!0,setTimeout(()=>{p=!1},0),h(v))},{passive:!0,capture:n}),Fe(s,"pointerdown",v=>{const x=yt(t);c=!u(v)&&!!(x&&!v.composedPath().includes(x))},{passive:!0}),a&&Fe(s,"blur",v=>{setTimeout(()=>{var x;const _=yt(t);((x=s.document.activeElement)==null?void 0:x.tagName)==="IFRAME"&&!(_!=null&&_.contains(s.document.activeElement))&&e(v)},0)},{passive:!0})].filter(Boolean),m=()=>b.forEach(v=>v());return o?{stop:m,cancel:()=>{c=!1},trigger:v=>{c=!0,h(v),c=!1}}:m}function L0(){const t=ke(!1),e=Ua();return e&&df(()=>{t.value=!0},e),t}function Vr(t){const e=L0();return we(()=>(e.value,!!t()))}function B0(t,e,r={}){const{window:s=mt,...i}=r;let n;const a=Vr(()=>s&&"MutationObserver"in s),o=()=>{n&&(n.disconnect(),n=void 0)},c=we(()=>{const h=Xe(t),p=ii(h).map(yt).filter(x0);return new Set(p)}),u=it(()=>c.value,h=>{o(),a.value&&h.size&&(n=new MutationObserver(e),h.forEach(p=>n.observe(p,i)))},{immediate:!0,flush:"post"}),f=()=>n==null?void 0:n.takeRecords(),l=()=>{u(),o()};return Tr(l),{isSupported:a,stop:l,takeRecords:f}}function N0(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function z0(...t){let e,r,s={};t.length===3?(e=t[0],r=t[1],s=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,r=t[0],s=t[1]):(e=t[0],r=t[1]):(e=!0,r=t[0]);const{target:i=mt,eventName:n="keydown",passive:a=!1,dedupe:o=!1}=s,c=N0(e);return Fe(i,n,f=>{f.repeat&&Xe(o)||c(f)&&r(f)},a)}function G_(t,e,r={}){return z0(t,e,{...r,eventName:"keydown"})}function Eh(t,e={}){const{immediate:r=!0,fpsLimit:s=void 0,window:i=mt,once:n=!1}=e,a=ke(!1),o=we(()=>s?1e3/Xe(s):null);let c=0,u=null;function f(p){if(!a.value||!i)return;c||(c=p);const b=p-c;if(o.value&&b<o.value){u=i.requestAnimationFrame(f);return}if(c=p,t({delta:b,timestamp:p}),n){a.value=!1,u=null;return}u=i.requestAnimationFrame(f)}function l(){!a.value&&i&&(a.value=!0,c=0,u=i.requestAnimationFrame(f))}function h(){a.value=!1,u!=null&&i&&(i.cancelAnimationFrame(u),u=null)}return r&&l(),Tr(h),{isActive:Rn(a),pause:h,resume:l}}const j0=Symbol("vueuse-ssr-width");function q0(){const t=pf()?y0(j0,null):null;return typeof t=="number"?t:void 0}function U0(t,e={}){const{window:r=mt,ssrWidth:s=q0()}=e,i=Vr(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function"),n=ke(typeof s=="number"),a=ke(),o=ke(!1),c=u=>{o.value=u.matches};return Di(()=>{if(n.value){n.value=!i.value;const u=Xe(t).split(",");o.value=u.some(f=>{const l=f.includes("not all"),h=f.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),p=f.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let b=!!(h||p);return h&&b&&(b=s>=go(h[1])),p&&b&&(b=s<=go(p[1])),l?!b:b});return}i.value&&(a.value=r.matchMedia(Xe(t)),o.value=a.value.matches)}),Fe(a,"change",c,{passive:!0}),we(()=>o.value)}const vo=["hash","host","hostname","href","pathname","port","protocol","search"];function Z_(t={}){const{window:e=mt}=t,r=Object.fromEntries(vo.map(n=>[n,Je()]));for(const[n,a]of D0(r))it(a,o=>{!(e!=null&&e.location)||e.location[n]===o||(e.location[n]=o)});const s=n=>{var a;const{state:o,length:c}=(e==null?void 0:e.history)||{},{origin:u}=(e==null?void 0:e.location)||{};for(const f of vo)r[f].value=(a=e==null?void 0:e.location)==null?void 0:a[f];return Ie({trigger:n,state:o,length:c,origin:u,...r})},i=Je(s("load"));if(e){const n={passive:!0};Fe(e,"popstate",()=>i.value=s("popstate"),n),Fe(e,"hashchange",()=>i.value=s("hashchange"),n)}return i}function pa(t,e={}){const{controls:r=!1,navigator:s=Ti}=e,i=Vr(()=>s&&"permissions"in s),n=ke(),a=typeof t=="string"?{name:t}:t,o=ke(),c=()=>{var f,l;o.value=(l=(f=n.value)==null?void 0:f.state)!=null?l:"prompt"};Fe(n,"change",c,{passive:!0});const u=C0(async()=>{if(i.value){if(!n.value)try{n.value=await s.permissions.query(a)}catch{n.value=void 0}finally{c()}if(r)return _0(n.value)}});return u(),r?{state:o,isSupported:i,query:u}:o}function K_(t={}){const{navigator:e=Ti,read:r=!1,source:s,copiedDuring:i=1500,legacy:n=!1}=t,a=Vr(()=>e&&"clipboard"in e),o=pa("clipboard-read"),c=pa("clipboard-write"),u=we(()=>a.value||n),f=ke(""),l=ke(!1),h=P0(()=>l.value=!1,i,{immediate:!1});async function p(){let _=!(a.value&&x(o.value));if(!_)try{f.value=await e.clipboard.readText()}catch{_=!0}_&&(f.value=v())}u.value&&r&&Fe(["copy","cut"],p,{passive:!0});async function b(_=Xe(s)){if(u.value&&_!=null){let y=!(a.value&&x(c.value));if(!y)try{await e.clipboard.writeText(_)}catch{y=!0}y&&m(_),f.value=_,l.value=!0,h.start()}}function m(_){const y=document.createElement("textarea");y.value=_??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function v(){var _,y,k;return(k=(y=(_=document==null?void 0:document.getSelection)==null?void 0:_.call(document))==null?void 0:y.toString())!=null?k:""}function x(_){return _==="granted"||_==="prompt"}return{isSupported:u,text:f,copied:l,copy:b}}function Ch(t){return JSON.parse(JSON.stringify(t))}const qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Un="__vueuse_ssr_handlers__",$0=H0();function H0(){return Un in qn||(qn[Un]=qn[Un]||{}),qn[Un]}function Dh(t,e){return $0[t]||e}function W0(t){return U0("(prefers-color-scheme: dark)",t)}function V0(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const G0={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},yo="vueuse-storage";function Yt(t,e,r,s={}){var i;const{flush:n="pre",deep:a=!0,listenToStorageChanges:o=!0,writeDefaults:c=!0,mergeDefaults:u=!1,shallow:f,window:l=mt,eventFilter:h,onError:p=I=>{console.error(I)},initOnMounted:b}=s,m=(f?ke:Je)(typeof e=="function"?e():e),v=we(()=>Xe(t));if(!r)try{r=Dh("getDefaultStorage",()=>{var I;return(I=mt)==null?void 0:I.localStorage})()}catch(I){p(I)}if(!r)return m;const x=Xe(e),_=V0(x),y=(i=s.serializer)!=null?i:G0[_],{pause:k,resume:A}=I0(m,()=>P(m.value),{flush:n,deep:a,eventFilter:h});it(v,()=>L(),{flush:n}),l&&o&&Va(()=>{r instanceof Storage?Fe(l,"storage",L,{passive:!0}):Fe(l,yo,N),b&&L()}),b||L();function M(I,d){if(l){const g={key:v.value,oldValue:I,newValue:d,storageArea:r};l.dispatchEvent(r instanceof Storage?new StorageEvent("storage",g):new CustomEvent(yo,{detail:g}))}}function P(I){try{const d=r.getItem(v.value);if(I==null)M(d,null),r.removeItem(v.value);else{const g=y.write(I);d!==g&&(r.setItem(v.value,g),M(d,g))}}catch(d){p(d)}}function R(I){const d=I?I.newValue:r.getItem(v.value);if(d==null)return c&&x!=null&&r.setItem(v.value,y.write(x)),x;if(!I&&u){const g=y.read(d);return typeof u=="function"?u(g,x):_==="object"&&!Array.isArray(g)?{...x,...g}:g}else return typeof d!="string"?d:y.read(d)}function L(I){if(!(I&&I.storageArea!==r)){if(I&&I.key==null){m.value=x;return}if(!(I&&I.key!==v.value)){k();try{(I==null?void 0:I.newValue)!==y.write(m.value)&&(m.value=R(I))}catch(d){p(d)}finally{I?Ci(A):A()}}}}function N(I){L(I.detail)}return m}const Z0="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function K0(t={}){const{selector:e="html",attribute:r="class",initialValue:s="auto",window:i=mt,storage:n,storageKey:a="vueuse-color-scheme",listenToStorageChanges:o=!0,storageRef:c,emitAuto:u,disableTransition:f=!0}=t,l={auto:"",light:"light",dark:"dark",...t.modes||{}},h=W0({window:i}),p=we(()=>h.value?"dark":"light"),b=c||(a==null?$a(s):Yt(a,s,n,{window:i,listenToStorageChanges:o})),m=we(()=>b.value==="auto"?p.value:b.value),v=Dh("updateHTMLAttrs",(k,A,M)=>{const P=typeof k=="string"?i==null?void 0:i.document.querySelector(k):yt(k);if(!P)return;const R=new Set,L=new Set;let N=null;if(A==="class"){const d=M.split(/\s/g);Object.values(l).flatMap(g=>(g||"").split(/\s/g)).filter(Boolean).forEach(g=>{d.includes(g)?R.add(g):L.add(g)})}else N={key:A,value:M};if(R.size===0&&L.size===0&&N===null)return;let I;f&&(I=i.document.createElement("style"),I.appendChild(document.createTextNode(Z0)),i.document.head.appendChild(I));for(const d of R)P.classList.add(d);for(const d of L)P.classList.remove(d);N&&P.setAttribute(N.key,N.value),f&&(i.getComputedStyle(I).opacity,document.head.removeChild(I))});function x(k){var A;v(e,r,(A=l[k])!=null?A:k)}function _(k){t.onChanged?t.onChanged(k,x):x(k)}it(m,_,{flush:"post",immediate:!0}),Va(()=>_(m.value));const y=we({get(){return u?b.value:m.value},set(k){b.value=k}});return Object.assign(y,{store:b,system:p,state:m})}function J0(t,e){const r=ke(u()),s=$a(t),i=we({get(){var f;let h=s.value.indexOf(r.value);return h<0&&(h=(f=void 0)!=null?f:0),h},set(f){n(f)}});function n(f){const l=s.value,h=l.length,p=(f%h+h)%h,b=l[p];return r.value=b,b}function a(f=1){return n(i.value+f)}function o(f=1){return a(f)}function c(f=1){return a(-f)}function u(){var f,l;return(l=Xe((f=void 0)!=null?f:Xe(t)[0]))!=null?l:void 0}return it(s,()=>n(i.value)),{state:r,index:i,next:o,prev:c,go:n}}function X0(t={}){const{valueDark:e="dark",valueLight:r=""}=t,s=K0({...t,onChanged:(a,o)=>{var c;t.onChanged?(c=t.onChanged)==null||c.call(t,a==="dark",o,a):o(a)},modes:{dark:e,light:r}}),i=we(()=>s.system.value);return we({get(){return s.value==="dark"},set(a){const o=a?"dark":"light";i.value===o?s.value="auto":s.value=o}})}function Th(t){return t}function Y0(t,e){return t.value=e}function Q0(t){return t?typeof t=="function"?t:Ch:Th}function ep(t){return t?typeof t=="function"?t:Ch:Th}function tp(t,e={}){const{clone:r=!1,dump:s=Q0(r),parse:i=ep(r),setSource:n=Y0}=e;function a(){return bf({snapshot:s(t.value),timestamp:da()})}const o=Je(a()),c=Je([]),u=Je([]),f=y=>{n(t,i(y.snapshot)),o.value=y},l=()=>{c.value.unshift(o.value),o.value=a(),e.capacity&&c.value.length>e.capacity&&c.value.splice(e.capacity,Number.POSITIVE_INFINITY),u.value.length&&u.value.splice(0,u.value.length)},h=()=>{c.value.splice(0,c.value.length),u.value.splice(0,u.value.length)},p=()=>{const y=c.value.shift();y&&(u.value.unshift(o.value),f(y))},b=()=>{const y=u.value.shift();y&&(c.value.unshift(o.value),f(y))},m=()=>{f(o.value)},v=we(()=>[o.value,...c.value]),x=we(()=>c.value.length>0),_=we(()=>u.value.length>0);return{source:t,undoStack:c,redoStack:u,last:o,history:v,canUndo:x,canRedo:_,clear:h,commit:l,reset:m,undo:p,redo:b}}function J_(t,e={}){const{deep:r=!1,flush:s="pre",eventFilter:i}=e,{eventFilter:n,pause:a,resume:o,isActive:c}=xh(i),{ignoreUpdates:u,ignorePrevAsyncUpdates:f,stop:l}=O0(t,v,{deep:r,flush:s,eventFilter:n});function h(k,A){f(),u(()=>{k.value=A})}const p=tp(t,{...e,clone:e.clone||r,setSource:h}),{clear:b,commit:m}=p;function v(){f(),m()}function x(k){o(),k&&v()}function _(k){let A=!1;const M=()=>A=!0;u(()=>{k(M)}),A||v()}function y(){l(),b()}return{...p,isTracking:c,pause:a,resume:x,commit:v,batch:_,dispose:y}}function rp(t={}){const{navigator:e=Ti,requestPermissions:r=!1,constraints:s={audio:!0,video:!0},onUpdated:i}=t,n=Je([]),a=we(()=>n.value.filter(b=>b.kind==="videoinput")),o=we(()=>n.value.filter(b=>b.kind==="audioinput")),c=we(()=>n.value.filter(b=>b.kind==="audiooutput")),u=Vr(()=>e&&e.mediaDevices&&e.mediaDevices.enumerateDevices),f=ke(!1);let l;async function h(){u.value&&(n.value=await e.mediaDevices.enumerateDevices(),i==null||i(n.value),l&&(l.getTracks().forEach(b=>b.stop()),l=null))}async function p(){const b=s.video?"camera":"microphone";if(!u.value)return!1;if(f.value)return!0;const{state:m,query:v}=pa(b,{controls:!0});if(await v(),m.value!=="granted"){let x=!0;try{l=await e.mediaDevices.getUserMedia(s)}catch{l=null,x=!1}h(),f.value=x}else f.value=!0;return f.value}return u.value&&(r&&p(),Fe(e.mediaDevices,"devicechange",h,{passive:!0}),h()),{devices:n,ensurePermissions:p,permissionGranted:f,videoInputs:a,audioInputs:o,audioOutputs:c,isSupported:u}}function np(t,e,r={}){const{window:s=mt,...i}=r;let n;const a=Vr(()=>s&&"ResizeObserver"in s),o=()=>{n&&(n.disconnect(),n=void 0)},c=we(()=>{const l=Xe(t);return Array.isArray(l)?l.map(h=>yt(h)):[yt(l)]}),u=it(c,l=>{if(o(),a.value&&s){n=new ResizeObserver(e);for(const h of l)h&&n.observe(h,i)}},{immediate:!0,flush:"post"}),f=()=>{o(),u()};return Tr(f),{isSupported:a,stop:f}}function X_(t,e={}){const{reset:r=!0,windowResize:s=!0,windowScroll:i=!0,immediate:n=!0,updateTiming:a="sync"}=e,o=ke(0),c=ke(0),u=ke(0),f=ke(0),l=ke(0),h=ke(0),p=ke(0),b=ke(0);function m(){const x=yt(t);if(!x){r&&(o.value=0,c.value=0,u.value=0,f.value=0,l.value=0,h.value=0,p.value=0,b.value=0);return}const _=x.getBoundingClientRect();o.value=_.height,c.value=_.bottom,u.value=_.left,f.value=_.right,l.value=_.top,h.value=_.width,p.value=_.x,b.value=_.y}function v(){a==="sync"?m():a==="next-frame"&&requestAnimationFrame(()=>m())}return np(t,v),it(()=>yt(t),x=>!x&&v()),B0(t,v,{attributeFilter:["style","class"]}),i&&Fe("scroll",v,{capture:!0,passive:!0}),s&&Fe("resize",v,{passive:!0}),Va(()=>{n&&v()}),{height:o,bottom:c,left:u,right:f,top:l,width:h,x:p,y:b,update:v}}const ip=["mousedown","mouseup","keydown","keyup"];function Y_(t,e={}){const{events:r=ip,document:s=R0,initial:i=null}=e,n=ke(i);return s&&r.forEach(a=>{Fe(s,a,o=>{typeof o.getModifierState=="function"&&(n.value=o.getModifierState(t))},{passive:!0})}),n}const sp={page:t=>[t.pageX,t.pageY],client:t=>[t.clientX,t.clientY],screen:t=>[t.screenX,t.screenY],movement:t=>t instanceof MouseEvent?[t.movementX,t.movementY]:null};function ap(t={}){const{type:e="page",touch:r=!0,resetOnTouchEnds:s=!1,initialValue:i={x:0,y:0},window:n=mt,target:a=n,scroll:o=!0,eventFilter:c}=t;let u=null,f=0,l=0;const h=ke(i.x),p=ke(i.y),b=ke(null),m=typeof e=="function"?e:sp[e],v=P=>{const R=m(P);u=P,R&&([h.value,p.value]=R,b.value="mouse"),n&&(f=n.scrollX,l=n.scrollY)},x=P=>{if(P.touches.length>0){const R=m(P.touches[0]);R&&([h.value,p.value]=R,b.value="touch")}},_=()=>{if(!u||!n)return;const P=m(u);u instanceof MouseEvent&&P&&(h.value=P[0]+n.scrollX-f,p.value=P[1]+n.scrollY-l)},y=()=>{h.value=i.x,p.value=i.y},k=c?P=>c(()=>v(P),{}):P=>v(P),A=c?P=>c(()=>x(P),{}):P=>x(P),M=c?()=>c(()=>_(),{}):()=>_();if(a){const P={passive:!0};Fe(a,["mousemove","dragover"],k,P),r&&e!=="movement"&&(Fe(a,["touchstart","touchmove"],A,P),s&&Fe(a,"touchend",y,P)),o&&e==="page"&&Fe(n,"scroll",M,P)}return{x:h,y:p,sourceType:b}}function Q_(t,e={}){const{handleOutside:r=!0,window:s=mt}=e,i=e.type||"page",{x:n,y:a,sourceType:o}=ap(e),c=ke(t??(s==null?void 0:s.document.body)),u=ke(0),f=ke(0),l=ke(0),h=ke(0),p=ke(0),b=ke(0),m=ke(!0);let v=()=>{};return s&&(v=it([c,n,a],()=>{const x=yt(c);if(!x||!(x instanceof Element))return;const{left:_,top:y,width:k,height:A}=x.getBoundingClientRect();l.value=_+(i==="page"?s.pageXOffset:0),h.value=y+(i==="page"?s.pageYOffset:0),p.value=A,b.value=k;const M=n.value-l.value,P=a.value-h.value;m.value=k===0||A===0||M<0||P<0||M>k||P>A,(r||!m.value)&&(u.value=M,f.value=P)},{immediate:!0}),Fe(document,"mouseleave",()=>m.value=!0,{passive:!0})),{x:n,y:a,sourceType:o,elementX:u,elementY:f,elementPositionX:l,elementPositionY:h,elementHeight:p,elementWidth:b,isOutside:m,stop:v}}function ev(t={}){const{touch:e=!0,drag:r=!0,capture:s=!1,initialValue:i=!1,window:n=mt}=t,a=ke(i),o=ke(null);if(!n)return{pressed:a,sourceType:o};const c=h=>p=>{var b;a.value=!0,o.value=h,(b=t.onPressed)==null||b.call(t,p)},u=h=>{var p;a.value=!1,o.value=null,(p=t.onReleased)==null||p.call(t,h)},f=we(()=>yt(t.target)||n),l={passive:!0,capture:s};return Fe(f,"mousedown",c("mouse"),l),Fe(n,"mouseleave",u,l),Fe(n,"mouseup",u,l),r&&(Fe(f,"dragstart",c("mouse"),l),Fe(n,"drop",u,l),Fe(n,"dragend",u,l)),e&&(Fe(f,"touchstart",c("touch"),l),Fe(n,"touchend",u,l),Fe(n,"touchcancel",u,l)),{pressed:a,sourceType:o}}function tv(t={}){const{controls:e=!1,interval:r="requestAnimationFrame"}=t,s=Je(new Date),i=()=>s.value=new Date,n=r==="requestAnimationFrame"?Eh(i,{immediate:!0}):Sh(i,r,{immediate:!0});return e?{now:s,...n}:s}function rv(t){const e=ke(),r=()=>{e.value&&URL.revokeObjectURL(e.value),e.value=void 0};return it(()=>Xe(t),s=>{r(),s&&(e.value=URL.createObjectURL(s))},{immediate:!0}),Tr(r),Rn(e)}function nv(t={},e={}){const{navigator:r=Ti}=e,s=r,i=Vr(()=>s&&"canShare"in s);return{isSupported:i,share:async(a={})=>{if(i.value){const o={...Xe(t),...Xe(a)};let c=!0;if(o.files&&s.canShare&&(c=s.canShare({files:o.files})),c)return s.share(o)}}}}function op(t={}){const{controls:e=!1,offset:r=0,immediate:s=!0,interval:i="requestAnimationFrame",callback:n}=t,a=ke(da()+r),o=()=>a.value=da()+r,c=n?()=>{o(),n(a.value)}:o,u=i==="requestAnimationFrame"?Eh(c,{immediate:s}):Sh(c,i,{immediate:s});return e?{timestamp:a,...u}:a}var Se=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},ue=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},vr,Br,Tt,rn,An,Bt,Nt,zt,jt,qt,Ut,$t,Ht,Nr,nn,yr,si,wr;const up=function(t){var e=131,r=137,s=0;t+="x";var i=Math.floor(9007199254740991/r);for(let n=0;n<t.length;n++)s>i&&(s=Math.floor(s/r)),s=s*e+t.charCodeAt(n);return s},fe="0123456789abcdef".split(""),cp=[-2147483648,8388608,32768,128],Et=[24,16,8,0],$n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ft=[];class fp{constructor(e=!1,r=!1){vr.set(this,void 0),Br.set(this,void 0),Tt.set(this,void 0),rn.set(this,void 0),An.set(this,void 0),Bt.set(this,void 0),Nt.set(this,void 0),zt.set(this,void 0),jt.set(this,void 0),qt.set(this,void 0),Ut.set(this,void 0),$t.set(this,void 0),Ht.set(this,void 0),Nr.set(this,void 0),nn.set(this,void 0),yr.set(this,void 0),si.set(this,0),wr.set(this,void 0),this.init(e,r)}init(e,r){r?(ft[0]=ft[16]=ft[1]=ft[2]=ft[3]=ft[4]=ft[5]=ft[6]=ft[7]=ft[8]=ft[9]=ft[10]=ft[11]=ft[12]=ft[13]=ft[14]=ft[15]=0,Se(this,Br,ft)):Se(this,Br,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e?(Se(this,Bt,3238371032),Se(this,Nt,914150663),Se(this,zt,812702999),Se(this,jt,4144912697),Se(this,qt,4290775857),Se(this,Ut,1750603025),Se(this,$t,1694076839),Se(this,Ht,3204075428)):(Se(this,Bt,1779033703),Se(this,Nt,3144134277),Se(this,zt,1013904242),Se(this,jt,2773480762),Se(this,qt,1359893119),Se(this,Ut,2600822924),Se(this,$t,528734635),Se(this,Ht,1541459225)),Se(this,vr,Se(this,wr,Se(this,Tt,Se(this,nn,0)))),Se(this,rn,Se(this,Nr,!1)),Se(this,An,!0),Se(this,yr,e)}update(e){if(ue(this,rn))return this;let r;e instanceof ArrayBuffer?r=new Uint8Array(e):r=e;let s=0;const i=r.length,n=ue(this,Br);for(;s<i;){let a;if(ue(this,Nr)&&(Se(this,Nr,!1),n[0]=ue(this,vr),n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),typeof r!="string")for(a=ue(this,wr);s<i&&a<64;++s)n[a>>2]|=r[s]<<Et[a++&3];else for(a=ue(this,wr);s<i&&a<64;++s){let o=r.charCodeAt(s);o<128?n[a>>2]|=o<<Et[a++&3]:o<2048?(n[a>>2]|=(192|o>>6)<<Et[a++&3],n[a>>2]|=(128|o&63)<<Et[a++&3]):o<55296||o>=57344?(n[a>>2]|=(224|o>>12)<<Et[a++&3],n[a>>2]|=(128|o>>6&63)<<Et[a++&3],n[a>>2]|=(128|o&63)<<Et[a++&3]):(o=65536+((o&1023)<<10|r.charCodeAt(++s)&1023),n[a>>2]|=(240|o>>18)<<Et[a++&3],n[a>>2]|=(128|o>>12&63)<<Et[a++&3],n[a>>2]|=(128|o>>6&63)<<Et[a++&3],n[a>>2]|=(128|o&63)<<Et[a++&3])}Se(this,si,a),Se(this,Tt,ue(this,Tt)+(a-ue(this,wr))),a>=64?(Se(this,vr,n[16]),Se(this,wr,a-64),this.hash(),Se(this,Nr,!0)):Se(this,wr,a)}return ue(this,Tt)>4294967295&&(Se(this,nn,ue(this,nn)+(ue(this,Tt)/4294967296<<0)),Se(this,Tt,ue(this,Tt)%4294967296)),this}finalize(){if(ue(this,rn))return;Se(this,rn,!0);const e=ue(this,Br),r=ue(this,si);e[16]=ue(this,vr),e[r>>2]|=cp[r&3],Se(this,vr,e[16]),r>=56&&(ue(this,Nr)||this.hash(),e[0]=ue(this,vr),e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=ue(this,nn)<<3|ue(this,Tt)>>>29,e[15]=ue(this,Tt)<<3,this.hash()}hash(){let e=ue(this,Bt),r=ue(this,Nt),s=ue(this,zt),i=ue(this,jt),n=ue(this,qt),a=ue(this,Ut),o=ue(this,$t),c=ue(this,Ht);const u=ue(this,Br);let f,l,h,p,b,m,v,x,_,y;for(let k=16;k<64;++k)p=u[k-15],f=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=u[k-2],l=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,u[k]=u[k-16]+f+u[k-7]+l<<0;y=r&s;for(let k=0;k<64;k+=4)ue(this,An)?(ue(this,yr)?(v=300032,p=u[0]-1413257819,c=p-150054599<<0,i=p+24177077<<0):(v=704751109,p=u[0]-210244248,c=p-1521486534<<0,i=p+143694565<<0),Se(this,An,!1)):(f=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),l=(n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7),v=e&r,h=v^e&s^y,m=n&a^~n&o,p=c+l+m+$n[k]+u[k],b=f+h,c=i+p<<0,i=p+b<<0),f=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),l=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),x=i&e,h=x^i&r^v,m=c&n^~c&a,p=o+l+m+$n[k+1]+u[k+1],b=f+h,o=s+p<<0,s=p+b<<0,f=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),l=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),_=s&i,h=_^s&e^x,m=o&c^~o&n,p=a+l+m+$n[k+2]+u[k+2],b=f+h,a=r+p<<0,r=p+b<<0,f=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),l=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),y=r&s,h=y^r&i^_,m=a&o^~a&c,p=n+l+m+$n[k+3]+u[k+3],b=f+h,n=e+p<<0,e=p+b<<0;Se(this,Bt,ue(this,Bt)+e<<0),Se(this,Nt,ue(this,Nt)+r<<0),Se(this,zt,ue(this,zt)+s<<0),Se(this,jt,ue(this,jt)+i<<0),Se(this,qt,ue(this,qt)+n<<0),Se(this,Ut,ue(this,Ut)+a<<0),Se(this,$t,ue(this,$t)+o<<0),Se(this,Ht,ue(this,Ht)+c<<0)}hex(){this.finalize();const e=ue(this,Bt),r=ue(this,Nt),s=ue(this,zt),i=ue(this,jt),n=ue(this,qt),a=ue(this,Ut),o=ue(this,$t),c=ue(this,Ht);let u=fe[e>>28&15]+fe[e>>24&15]+fe[e>>20&15]+fe[e>>16&15]+fe[e>>12&15]+fe[e>>8&15]+fe[e>>4&15]+fe[e&15]+fe[r>>28&15]+fe[r>>24&15]+fe[r>>20&15]+fe[r>>16&15]+fe[r>>12&15]+fe[r>>8&15]+fe[r>>4&15]+fe[r&15]+fe[s>>28&15]+fe[s>>24&15]+fe[s>>20&15]+fe[s>>16&15]+fe[s>>12&15]+fe[s>>8&15]+fe[s>>4&15]+fe[s&15]+fe[i>>28&15]+fe[i>>24&15]+fe[i>>20&15]+fe[i>>16&15]+fe[i>>12&15]+fe[i>>8&15]+fe[i>>4&15]+fe[i&15]+fe[n>>28&15]+fe[n>>24&15]+fe[n>>20&15]+fe[n>>16&15]+fe[n>>12&15]+fe[n>>8&15]+fe[n>>4&15]+fe[n&15]+fe[a>>28&15]+fe[a>>24&15]+fe[a>>20&15]+fe[a>>16&15]+fe[a>>12&15]+fe[a>>8&15]+fe[a>>4&15]+fe[a&15]+fe[o>>28&15]+fe[o>>24&15]+fe[o>>20&15]+fe[o>>16&15]+fe[o>>12&15]+fe[o>>8&15]+fe[o>>4&15]+fe[o&15];return ue(this,yr)||(u+=fe[c>>28&15]+fe[c>>24&15]+fe[c>>20&15]+fe[c>>16&15]+fe[c>>12&15]+fe[c>>8&15]+fe[c>>4&15]+fe[c&15]),u}toString(){return this.hex()}digest(){this.finalize();const e=ue(this,Bt),r=ue(this,Nt),s=ue(this,zt),i=ue(this,jt),n=ue(this,qt),a=ue(this,Ut),o=ue(this,$t),c=ue(this,Ht),u=[e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,s>>24&255,s>>16&255,s>>8&255,s&255,i>>24&255,i>>16&255,i>>8&255,i&255,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255];return ue(this,yr)||u.push(c>>24&255,c>>16&255,c>>8&255,c&255),u}array(){return this.digest()}arrayBuffer(){this.finalize();const e=new ArrayBuffer(ue(this,yr)?28:32),r=new DataView(e);return r.setUint32(0,ue(this,Bt)),r.setUint32(4,ue(this,Nt)),r.setUint32(8,ue(this,zt)),r.setUint32(12,ue(this,jt)),r.setUint32(16,ue(this,qt)),r.setUint32(20,ue(this,Ut)),r.setUint32(24,ue(this,$t)),ue(this,yr)||r.setUint32(28,ue(this,Ht)),e}}vr=new WeakMap,Br=new WeakMap,Tt=new WeakMap,rn=new WeakMap,An=new WeakMap,Bt=new WeakMap,Nt=new WeakMap,zt=new WeakMap,jt=new WeakMap,qt=new WeakMap,Ut=new WeakMap,$t=new WeakMap,Ht=new WeakMap,Nr=new WeakMap,nn=new WeakMap,yr=new WeakMap,si=new WeakMap,wr=new WeakMap;function lp(t){const e=new fp;return e.update(t),parseInt(e.hex().substring(0,8),16)}const hp=function(t){var e="#";return t.forEach(function(r){r<16&&(e+=0),e+=r.toString(16)}),e},dp=function(t,e,r){t/=360;var s=r<.5?r*(1+e):r+e-r*e,i=2*r-s;return[t+1/3,t,t-1/3].map(function(n){return n<0&&n++,n>1&&n--,n<1/6?n=i+(s-i)*6*n:n<.5?n=s:n<2/3?n=i+(s-i)*6*(2/3-n):n=i,Math.round(n*255)})};class sn{constructor(e={}){const[r,s]=[e.lightness,e.saturation].map(function(i){return i=i!==void 0?i:[.35,.5,.65],Array.isArray(i)?i.concat():[i]});this.L=r,this.S=s,typeof e.hue=="number"&&(e.hue={min:e.hue,max:e.hue}),typeof e.hue=="object"&&!Array.isArray(e.hue)&&(e.hue=[e.hue]),typeof e.hue>"u"&&(e.hue=[]),this.hueRanges=e.hue.map(function(i){return{min:typeof i.min>"u"?0:i.min,max:typeof i.max>"u"?360:i.max}}),this.hash=lp,typeof e.hash=="function"&&(this.hash=e.hash),e.hash==="bkdr"&&(this.hash=up)}hsl(e){var r,s,i,n=this.hash(e),a=727;if(this.hueRanges.length){const o=this.hueRanges[n%this.hueRanges.length];r=n/this.hueRanges.length%a*(o.max-o.min)/a+o.min}else r=n%359;return n=Math.ceil(n/360),s=this.S[n%this.S.length],n=Math.ceil(n/this.S.length),i=this.L[n%this.L.length],[r,s,i]}rgb(e){var r=this.hsl(e);return dp.apply(this,r)}hex(e){var r=this.rgb(e);return hp(r)}}const pp={light:new sn({saturation:[.05,.08,.22],lightness:[.85,.87,.9]}),pale:new sn({saturation:[.05,.42,.52],lightness:[.75,.77,.9]}),regular:new sn({saturation:[.1,.5,.7],lightness:[.3,.5,.7]}),deep:new sn({saturation:[.5,.6,.7],lightness:[.2,.35,.4]}),dark:new sn({saturation:[.02,.5,.6],lightness:[.18,.2,.5]})};function Mh(t="deep"){return typeof t=="object"?new sn(t):pp[t]}const iv=Ie({dark:X0()});var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ir(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),r}var ns,wo;function mp(){if(wo)return ns;wo=1;var t=1e3,e=t*60,r=e*60,s=r*24,i=s*7,n=s*365.25;ns=function(f,l){l=l||{};var h=typeof f;if(h==="string"&&f.length>0)return a(f);if(h==="number"&&isFinite(f))return l.long?c(f):o(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(l){var h=parseFloat(l[1]),p=(l[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*n;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*s;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(f){var l=Math.abs(f);return l>=s?Math.round(f/s)+"d":l>=r?Math.round(f/r)+"h":l>=e?Math.round(f/e)+"m":l>=t?Math.round(f/t)+"s":f+"ms"}function c(f){var l=Math.abs(f);return l>=s?u(f,l,s,"day"):l>=r?u(f,l,r,"hour"):l>=e?u(f,l,e,"minute"):l>=t?u(f,l,t,"second"):f+" ms"}function u(f,l,h,p){var b=l>=h*1.5;return Math.round(f/h)+" "+p+(b?"s":"")}return ns}var gp=mp();const Ih=Ir(gp),_p=Mh("deep"),vp=1e4;function sv(t){const e=Be(),r=Je(t),{user:s}=br();return{account:we(()=>{const n=Ie({pub:r.value,color:we(()=>r.value?_p.hex(r.value):"gray"),profile:{name:""},pulse:0,lastSeen:we(()=>{const a=Date.now()-n.pulse;return a>vp?Ih(a):"online"}),blink:!1,db:e.user(r.value)});return s.is&&e.user().get("petnames").get(r.value).on(async a=>{n.petname=await s.decrypt(a)}),e.user(r.value).get("pulse").on(a=>{n.blink=!n.blink,n.pulse=a}).back().get("profile").map().on((a,o)=>{n.profile[o]=a}),n}),setPetname:yp}}async function yp(t,e){const{user:r}=br();if(!r.is)return;const s=Be(),i=await r.encrypt(e);s.user().get("petnames").get(t).put(i)}const rt=Ie({input:"",show:!1,safePair:!1,minLength:5,safe:{saved:!1,password:"",enc:"",pass:""},dec:{},links:Ie({pass:we(()=>{var t;return xo((t=rt.safe)==null?void 0:t.enc)}),pair:we(()=>xo(JSON.stringify(Oe.pair())))}),set(){Ph(rt.input),rt.input="",rt.show=!1}});function xo(t="",e="#/auth/"){let r=encodeURIComponent(t);return window.location.origin+window.location.pathname+e+r}function av(t,e="#/auth/"){let r=t.indexOf(e),s=t.substring(r+e.length);return decodeURIComponent(s)}function ov(){return Be().user().get("safe").map().on((e,r)=>{rt.safe[r]=e}),Di(async()=>{var e,r;if(!rt.show){rt.dec={};return}(e=rt==null?void 0:rt.safe)!=null&&e.pass&&(rt.dec.pass=await Oe.decrypt(rt.safe.pass),rt.input=rt.dec.pass||""),(r=rt==null?void 0:rt.safe)!=null&&r.enc&&(rt.dec.pair=await fr.decrypt(rt.safe.enc,rt.dec.pass))}),{pass:rt,setPass:Ph,authWithPass:wp}}async function wp(t,e){let s=await Be().get(`~${t}`).get("safe").get("enc").then(),i=await fr.decrypt(s,e);Hd(i)}async function Ph(t){const e=Be();let r=await fr.encrypt(Oe.pair(),t),s=await Oe.encrypt(t);e.user().get("safe").get("enc").put(r),e.user().get("safe").get("pass").put(s)}const kr=Yt("cast-camera","default"),on=Yt("cast-mic","default"),xp=Je(""),ko=Je(!0),Ao=Yt("slidev-record-mimetype","video/webm"),kp={"video/webm":"webm","video/webm;codecs=h264":"mp4","video/x-matroska;codecs=avc1":"mkv"};function bi(t,e){const r=new Date,s=a=>`${a}`.padStart(2,"0"),i=`${s(r.getMonth()+1)}${s(r.getDate())}-${s(r.getHours())}${s(r.getMinutes())}`,n=e?kp[e]:"webm";return`${[i,t,xp.value].filter(a=>!!a).join("-")}.${n}`}Ie({screen:we(()=>bi("screen",Ao.value)),camera:we(()=>bi("camera",Ao.value))});const{videoInputs:So,audioInputs:Eo,ensurePermissions:Co}=rp({onUpdated:function(){var t,e;kr.value!=="none"&&(So.value.find(r=>r.deviceId===kr.value)||(kr.value=((t=So.value[0])==null?void 0:t.deviceId)||"default")),on.value!=="none"&&(Eo.value.find(r=>r.deviceId===on.value)||(on.value=((e=Eo.value[0])==null?void 0:e.deviceId)||"default"))}});function Do(t,e){const r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function Ap(){const t=Je(!1),e=Je(0),r=op();it(t,x=>x?e.value=Date.now():e.value=0);const s=we(()=>e.value?r.value-e.value:0),i=Je(!1),n=ke(),a=ke(),o=ke(),c=ke(),u=ke(),f={type:"video",bitsPerSecond:4*256*8*1024,timeSlice:24*60*60*1e3};async function l(){kr.value!=="none"&&(i.value?(i.value=!1,t.value||m(o)):(await h(),o.value&&(i.value=!!o.value)))}async function h(){if(await Co(),await Ci(),!o.value){if(kr.value==="none"&&on.value==="none")return;o.value=await navigator.mediaDevices.getUserMedia({video:kr.value==="none"||ko.value!==!0?!1:{deviceId:kr.value},audio:on.value==="none"?!1:{deviceId:on.value}})}}it(kr,async x=>{if(x==="none")m(o);else{if(t.value)return;o.value&&(m(o),await h())}});async function p(x={}){var y;await Co();const{default:_}=await Y(async()=>{const{default:k}=await import("./RecordRTC.FwPHcM9V.js").then(A=>A.R);return{default:k}},[]);if(await h(),c.value=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:30,width:3840,height:2160}}),c.value.addEventListener("inactive",b),u.value=new MediaStream,c.value.getVideoTracks().forEach(k=>u.value.addTrack(k)),Object.assign(f,x),o.value){const k=(y=o.value.getAudioTracks())==null?void 0:y[0];k&&u.value.addTrack(k),n.value=new _(o.value,f),n.value.startRecording()}a.value=new _(u.value,f),a.value.startRecording(),t.value=!0}async function b(){var x,_;t.value=!1,(x=n.value)==null||x.stopRecording(()=>{if(ko.value){const y=n.value.getBlob(),k=URL.createObjectURL(y);Do(bi("camera",f.mimeType),k),window.URL.revokeObjectURL(k)}n.value=void 0,i.value||m(o)}),(_=a.value)==null||_.stopRecording(()=>{const y=a.value.getBlob(),k=URL.createObjectURL(y);Do(bi("screen",f.mimeType),k),window.URL.revokeObjectURL(k),m(c),m(u),a.value=void 0})}function m(x){const _=x.value;_&&(_.getTracks().forEach(y=>{y.stop(),_.removeTrack(y)}),x.value=void 0)}function v(){t.value?b():p()}return Fe("beforeunload",x=>{t.value&&(confirm("Recording is not saved yet, do you want to leave?")||(x.preventDefault(),x.returnValue=""))}),{recording:t,recordingTime:s,showAvatar:i,toggleRecording:v,startRecording:p,stopRecording:b,toggleAvatar:l,recorderCamera:n,recorderSlides:a,streamCamera:o,streamCapture:c,streamSlides:u}}Ap();var ai={exports:{}},Sp=ai.exports,To;function Ep(){return To||(To=1,function(t,e){(function(r,s,i){t.exports=i(),t.exports.default=i()})("slugify",Sp,function(){var r=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),s=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function i(n,a){if(typeof n!="string")throw new Error("slugify: string argument expected");a=typeof a=="string"?{replacement:a}:a||{};var o=s[a.locale]||{},c=a.replacement===void 0?"-":a.replacement,u=a.trim===void 0?!0:a.trim,f=n.normalize().split("").reduce(function(l,h){var p=o[h];return p===void 0&&(p=r[h]),p===void 0&&(p=h),p===c&&(p=" "),l+p.replace(a.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return a.strict&&(f=f.replace(/[^A-Za-z0-9\s]/g,"")),u&&(f=f.trim()),f=f.replace(/\s+/g,c),a.lower&&(f=f.toLowerCase()),f}return i.extend=function(n){Object.assign(r,n)},i})}(ai)),ai.exports}var Cp=Ep();const Mo=Ir(Cp),Hn=Je("general"),ba="chat";function uv(t="general"){const e=Be(),{user:r}=br();Hn.value=t;const s=Ie({}),i=Ie({}),n=Ie({});e.user(De.pub).get(ba).map().once((f,l)=>{const[h,p]=l.split("@");s[h]||(s[h]={upvotes:new Set,downvotes:new Set}),s[h].upvotes.delete(p),s[h].downvotes.delete(p),f===!0?(s[h].upvotes.add(p),p==r.pub&&(delete i[h],n[h]=!0)):f===!1?(s[h].downvotes.add(p),p==r.pub&&(i[h]=!0,delete n[h])):f===null&&p==r.pub&&(delete i[h],delete n[h])});const a=we(()=>Object.entries(s).map(([f,l])=>({title:f,authors:Array.from(l.upvotes),rating:l.upvotes.size-l.downvotes.size,my:l.upvotes.has(r.pub)?1:l.downvotes.has(r.pub)?-1:0})).filter(f=>f.title=="general"||n[f.title]||!i[f.title]&&f.rating>=0).sort((f,l)=>l.rating-f.rating)),o=we(()=>{const f=Ie({});return e.user(De.pub).get("chat/"+Hn.value).map().on((l,h)=>{const p=h.substring(0,13),b=h.substring(14);l?f[h]={timestamp:p,author:b,text:l}:delete f[h]}),f}),c=we(()=>M0(we(()=>Object.values(o.value||{}))).value.sort((f,l)=>f.timestamp>l.timestamp?1:-1));function u(f){if(!f)return;const l=Date.now();e.user(De.pub).get("chat/"+Hn.value).get(`${l}@${r.pub}`).put(f,void 0,{opt:{cert:De.features.chat}})}return{send:u,addChat:f=>Io(f,!0),removeChat:f=>Io(f,!1),currentChat:Hn,chats:a,messages:o,sorted:c}}async function Io(t,e=!0){const r=Be(),{user:s}=br(),n=await r.user(De.pub).get(ba).get(`${Mo(t)}@${s.pub}`).then()===e?null:e;r.user(De.pub).get(ba).get(`${Mo(t)}@${s.pub}`).put(n,void 0,{opt:{cert:De.features.chat}})}function qr(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oi={exports:{}};oi.exports;var Po;function dn(){return Po||(Po=1,function(t){(function(){function e(s,i){return i?qr(s):s.slice?e[n(s)]:function(a,o){s(a={exports:{}}),e[n(o)]=a.exports};function n(a){return a.split("/").slice(-1).toString().replace(".js","")}}var r=t;e(function(s){String.random=function(n,a){var o="";for(n=n||24,a=a||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";n-- >0;)o+=a.charAt(Math.floor(Math.random()*a.length));return o},String.match=function(n,a){var o,c;return typeof n!="string"?!1:(typeof a=="string"&&(a={"=":a}),a=a||{},o=a["="]||a["*"]||a[">"]||a["<"],n===o?!0:c!==a["="]?!1:(o=a["*"]||a[">"],n.slice(0,(o||"").length)===o?!0:c!==a["*"]?!1:c!==a[">"]&&c!==a["<"]?n>=a[">"]&&n<=a["<"]:c!==a[">"]&&n>=a[">"]||c!==a["<"]&&n<=a["<"]))},String.hash=function(n,a){if(typeof n=="string"){if(a=a||0,!n.length)return a;for(var o=0,c=n.length,u;o<c;++o)u=n.charCodeAt(o),a=(a<<5)-a+u,a|=0;return a}};var i=Object.prototype.hasOwnProperty;Object.plain=function(n){return n?n instanceof Object&&n.constructor===Object||Object.prototype.toString.call(n).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(n,a){for(var o in n)if(i.call(n,o)&&(!a||a.indexOf(o)==-1))return!1;return!0},Object.keys=Object.keys||function(n){var a=[];for(var o in n)i.call(n,o)&&a.push(o);return a},function(){var n,a=setTimeout,o=0,c=0,u=typeof setImmediate!=""+n&&setImmediate||function(l,h){return typeof MessageChannel==""+n?a:((l=new MessageChannel).port1.onmessage=function(p){p.data==""&&h()},function(p){h=p,l.port2.postMessage("")})}(),f=a.check=a.check||typeof performance!=""+n&&performance||{now:function(){return+new Date}};a.hold=a.hold||9,a.poll=a.poll||function(l){if(a.hold>=f.now()-o&&c++<3333){l();return}u(function(){o=f.now(),l()},c=0)}}(),function(){var n=setTimeout,a=n.turn=n.turn||function(h){o.push(h)==1&&c(l)},o=a.s=[],c=n.poll,u=0,f,l=function(){(f=o[u++])&&f(),(u==o.length||u==99)&&(o=a.s=o.slice(u),u=0),o.length&&c(l)}}(),function(){var n,a=setTimeout,o=a.turn;(a.each=a.each||function(c,u,f,l){l=l||9,function h(p,b,m){if(b=(p=(c||[]).splice(0,l)).length){for(var v=0;v<b&&n===(m=u(p[v]));v++);if(n===m){o(h);return}}f&&f(m)}()})()}()})(e,"./shim"),e(function(s){s.exports=function i(f,a,o){if(!f)return{to:i};var c,u=typeof a=="function",f=(this.tag||(this.tag={}))[f]||u&&(this.tag[f]={tag:f,to:i._={next:function(h){var p;(p=this.to)&&p.next(h)}}});if(u){var l={off:i.off||(i.off=function(){if(this.next===i._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=i._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:i._,next:a,the:f,on:this,as:o};return(l.back=f.last||f).to=l,f.last=l}return(f=f.to)&&c!==a&&f.next(a),f}})(e,"./onto"),e(function(s){s.exports=function(i){return i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"&&i!=1/0&&i!=-1/0&&i===i||!!i&&typeof i["#"]=="string"&&Object.keys(i).length===1&&i["#"]}})(e,"./valid"),e(function(s){e("./shim");function i(){var f=+new Date;return c<f?(a=0,c=f+i.drift):c=f+(a+=1)/o+i.drift}i.drift=0;var n=-1/0,a=0,o=999,c=n,u;i.is=function(f,l,h){var p=l&&f&&f._&&f._[">"]||h;if(p)return typeof(p=p[l])=="number"?p:n},i.ify=function(f,l,h,p,b){(f=f||{})._=f._||{},b&&(f._["#"]=b);var m=f._[">"]||(f._[">"]={});return u!==l&&l!=="_"&&(typeof h=="number"&&(m[l]=h),u!==p&&(f[l]=p)),f},s.exports=i})(e,"./state"),e(function(s){e("./shim");function i(n){var a={s:{}},o=a.s;n=n||{max:999,age:1e3*9},a.check=function(u){return o[u]?c(u):!1};var c=a.track=function(u){var f=o[u]||(o[u]={});return f.was=a.now=+new Date,a.to||(a.to=setTimeout(a.drop,n.age+9)),c.ed&&c.ed(u),f};return a.drop=function(u){a.to=null,a.now=+new Date;var f=Object.keys(o);console.STAT&&console.STAT(a.now,+new Date-a.now,"dup drop keys"),setTimeout.each(f,function(l){var h=o[l];h&&(u||n.age)>a.now-h.was||delete o[l]},0,99)},a}s.exports=i})(e,"./dup"),e(function(s){e("./onto"),s.exports=function(a,o){if(this.on){var c=(this.opt||{}).lack||9e3;if(typeof a!="function"){if(!a)return;var f=a["#"]||a,u=(this.tag||"")[f];return u?(o&&(u=this.on(f,o),clearTimeout(u.err),u.err=setTimeout(function(){u.off()},c)),!0):void 0}var f=o&&o["#"]||i(9);if(!a)return f;var l=this.on(f,a,o);return l.err=l.err||setTimeout(function(){l.off(),l.next({err:"Error: No ACK yet.",lack:!0})},c),f}};var i=String.random||function(){return Math.random().toString(36).slice(2)}})(e,"./ask"),e(function(s){function i(b){return b instanceof i?(this._={$:this}).$:this instanceof i?i.create(this._={$:this,opt:b}):new i(b)}i.is=function(b){return b instanceof i||b&&b._&&b===b._.$||!1},i.version=.202,i.chain=i.prototype,i.chain.toJSON=function(){},e("./shim"),i.valid=e("./valid"),i.state=e("./state"),i.on=e("./onto"),i.dup=e("./dup"),i.ask=e("./ask"),function(){i.create=function(g){g.root=g.root||g,g.graph=g.graph||{},g.on=g.on||i.on,g.ask=g.ask||i.ask,g.dup=g.dup||i.dup();var w=g.$.opt(g.opt);return g.once||(g.on("in",b,g),g.on("out",b,g),g.on("put",x,g),i.on("create",g),g.on("create",g)),g.once=1,w};function b(g){if(g){if(g.out===b){this.to.next(g);return}var w=this,D=w.as,S=D.at||D,E=S.$,O=S.dup,T,C=g.DBG;if((T=g["#"])||(T=g["#"]=a(9)),!O.check(T)){if(O.track(T),T=g._,g._=typeof T=="function"?T:function(){},g.$&&g.$===(g.$._||"").$||(g.$=E),g["@"]&&!g.put&&y(g),!S.ask(g["@"],g))if(C&&(C.u=+new Date),g.put){m(g);return}else g.get&&i.on.get(g,E);C&&(C.uc=+new Date),w.to.next(g),C&&(C.ua=+new Date),!(g.nts||g.NTS)&&(g.out=b,S.on("out",g),C&&(C.ue=+new Date))}}}function m(g){if(g){var w=g._||"",D=w.root=((w.$=g.$||"")._||"").root;if(g["@"]&&w.faith&&!w.miss){g.out=b,D.on("out",g);return}w.latch=D.hatch,w.match=D.hatch=[];var S=g.put,E=w.DBG=g.DBG,O=+new Date;if(I=I||O,!(S["#"]&&S["."])){E&&(E.p=O),w["#"]=g["#"],w.msg=g,w.all=0,w.stun=1;var T=Object.keys(S);console.STAT&&console.STAT(O,((E||w).pk=+new Date)-O,"put sort");var C=0,F,j,W,V,Z,ie,pe;(function le(se){if(F!=C){if(F=C,!(W=T[C])){console.STAT&&console.STAT(O,((E||w).pd=+new Date)-O,"put"),_(w);return}(V=S[W])?(pe=V._)?W!==pe["#"]?ie=A+M(W)+"soul not same.":(Z=pe[">"])||(ie=A+M(W)+"no state."):ie=A+M(W)+"no meta.":ie=A+M(W)+"no node.",j=Object.keys(V||{})}if(ie){g.err=w.err=ie,_(w);return}var he=0,Ce;for(se=se||0;se++<9&&(Ce=j[he++]);)if(Ce!=="_"){var ye=V[Ce],Ee=Z[Ce];if(l===Ee){ie=A+M(Ce)+"on"+M(W)+"no state.";break}if(!c(ye)){ie=A+M(Ce)+"on"+M(W)+"bad "+typeof ye+M(ye);break}v(ye,Ce,W,Ee,g),++N}if((j=j.slice(he)).length){o(le);return}++C,j=null,le(se)})()}}}i.on.put=m;function v(g,w,D,S,E){var O=E._||"",T=O.root,C=T.graph,F,j=C[D]||h,W=u(j,w,1),V=j[w],Z=O.DBG;(F=console.STAT)&&(!C[D]||!V)&&(F.has=(F.has||0)+1);var ie=L();if(S>ie){setTimeout(function(){v(g,w,D,S,E)},(F=S-ie)>R?R:F),console.STAT&&console.STAT((Z||O).Hf=+new Date,F,"future");return}if(!(S<W)&&!(!O.faith&&S===W&&(g===V||P(g)<=P(V))&&!O.miss)){O.stun++;var pe=E["#"]+O.all++,le={toString:function(){return pe},_:O};le.toJSON=le.toString,T.dup.track(le)["#"]=E["#"],Z&&(Z.ph=Z.ph||+new Date),T.on("put",{"#":le,"@":E["@"],put:{"#":D,".":w,":":g,">":S},ok:E.ok,_:O})}}function x(g){var w;(w=(g._||"").DBG)&&(w.pa=+new Date,w.pm=w.pm||+new Date);var D=this,S=D.as,E=S.graph,O=g._,T=g.put,C=T["#"],F=T["."],j=T[":"],W=T[">"];g["#"];var V;(V=O.msg)&&(V=V.put)&&(V=V[C])&&f(V,F,W,j,C),E[C]=f(E[C],F,W,j,C),(V=(S.next||"")[C])&&V.on("in",g),_(O),D.to.next(g)}function _(g,w){var D;if(!g.stop&&!(!g.err&&0<--g.stun)&&(g.stop=1,!!(D=g.root))){var S=g.match;S.end=1,S===D.hatch&&(!(S=g.latch)||S.end?delete D.hatch:D.hatch=S),g.hatch&&g.hatch(),setTimeout.each(g.match,function(E){E&&E()}),!(!(w=g.msg)||g.err||w.err)&&(w.out=b,g.root.on("out",w),d())}}function y(g){var w=g["@"]||"",D;if(!(D=w._)){var S=(S=g.$)&&(S=S._)&&(S=S.root)&&(S=S.dup);if(!(S=S.check(w)))return;g["@"]=S["#"]||g["@"];return}D.acks=(D.acks||0)+1,(D.err=g.err)&&(g["@"]=D["#"],_(D)),D.ok=g.ok||D.ok,!D.stop&&!D.crack&&(D.crack=D.match&&D.match.push(function(){k(D)})),k(D)}function k(g){!g||!g.root||g.stun||g.acks!==g.all||g.root.on("in",{"@":g["#"],err:g.err,ok:g.err?l:g.ok||{"":1}})}var A="Error: Invalid graph!",M=function(g){return" '"+(""+g).slice(0,9)+"...' "},P=JSON.stringify,R=2147483647,L=i.state,N=0,I,d=function(){N>999&&N/-(I-(I=+new Date))>1&&(i.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),d=function(){N=0})}}(),function(){i.on.get=function(m,v){var x=v._,_=m.get,y=_["#"],k=x.graph[y],A=_["."],M=x.next||(x.next={}),P=M[y],R=m._||{},L=R.DBG=m.DBG;if(L&&(L.g=+new Date),!k)return x.on("get",m);if(A){if((typeof A!="string"||l===k[A])&&!((P||"").next||"")[A]){x.on("get",m);return}k=f({},A,u(k,A),k[A],y)}k&&b(m,k),x.on("get",m)};function b(m,v){var x=+new Date,_=m._||{},y=_.DBG=m.DBG,k=m["#"],A=a(9),M=Object.keys(v||"").sort(),P=((v||"")._||"")["#"];M.length;var R=m.$._.root,L=v===R.graph[P];console.STAT&&console.STAT(x,((y||_).gk=+new Date)-x,"got keys"),v&&function N(){x=+new Date;for(var I=0,d,g={},w;I<9&&(d=M[I++]);)f(g,d,u(v,d),v[d],P);M=M.slice(I),(w={})[P]=g,g=w;var D;L&&(D=function(){},D.ram=D.faith=!0),w=M.length,console.STAT&&console.STAT(x,-(x-(x=+new Date)),"got copied some"),y&&(y.ga=+new Date),R.on("in",{"@":k,"#":A,put:g,"%":w?A=a(9):l,$:R.$,_:D,DBG:y,FOO:1}),console.STAT&&console.STAT(x,+new Date-x,"got in"),w&&setTimeout.turn(N)}(),v||R.on("in",{"@":m["#"]})}i.on.get.ack=b}(),function(){i.chain.opt=function(b){b=b||{};var m=this,v=m._,x=b.peers||b;return Object.plain(b)||(b={}),Object.plain(v.opt)||(v.opt=b),typeof x=="string"&&(x=[x]),Object.plain(v.opt.peers)||(v.opt.peers={}),x instanceof Array&&(b.peers={},x.forEach(function(_){var y={};y.id=y.url=_,b.peers[_]=v.opt.peers[_]=v.opt.peers[_]||y})),n(b,function _(y){var k=this[y];if(this&&this.hasOwnProperty(y)||typeof k=="string"||Object.empty(k)){this[y]=k;return}k&&k.constructor!==Object&&!(k instanceof Array)||n(k,_)}),v.opt.from=b,i.on("opt",v),v.opt.uuid=v.opt.uuid||function(y){return i.state().toString(36).replace(".","")+String.random(y||12)},m}}();var n=function(b,m){Object.keys(b).forEach(m,b)},a=String.random,o=setTimeout.turn,c=i.valid,u=i.state.is,f=i.state.ify,l,h={},p;i.log=function(){return!i.log.off&&p.log.apply(p,arguments),[].slice.call(arguments).join(" ")},i.log.once=function(b,m,v){return(v=i.log.once)[b]=v[b]||0,v[b]++||i.log(m)},typeof window<"u"&&((window.GUN=window.Gun=i).window=window);try{typeof r<"u"&&(r.exports=i)}catch{}s.exports=i,(i.window||{}).console=(i.window||{}).console||{log:function(){}},(p=console).only=function(b,m){return p.only.i&&b===p.only.i&&p.only.i++&&(p.log.apply(p,arguments)||m)},i.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(e,"./root"),e(function(s){var i=e("./root");i.chain.back=function(o,c){var u;if(o=o||1,o===-1||o===1/0)return this._.root.$;if(o===1)return(this._.back||this._).$;var f=this,l=f._;if(typeof o=="string"&&(o=o.split(".")),o instanceof Array){var h=0,p=o.length,u=l;for(h;h<p;h++)u=(u||n)[o[h]];return a!==u?c?f:u:(u=l.back)?u.$.back(o,c):void 0}if(typeof o=="function"){for(var b,u={back:l};(u=u.back)&&a===(b=o(u,c)););return b}return typeof o=="number"?(l.back||l).$.back(o-1):this};var n={},a})(e,"./back"),e(function(s){var i=e("./root");i.chain.chain=function(_){var y=this,k=y._,A=new(_||y).constructor(y),M=A._,P;return M.root=P=k.root,M.id=++P.once,M.back=y._,M.on=i.on,M.on("in",i.on.in,M),M.on("out",i.on.out,M),A};function n(_){var y,k=this.as,A=k.back,M=k.root,P;if(_.$||(_.$=k.$),this.to.next(_),k.err){k.on("in",{put:k.put=l,$:k.$});return}if(y=_.get){if(M.pass&&(M.pass[k.id]=k),k.lex&&Object.keys(k.lex).forEach(function(R){P[R]=k.lex[R]},P=_.get=_.get||{}),y["#"]||k.soul){if(y["#"]=y["#"]||k.soul,_["#"]||(_["#"]=h(9)),A=M.$.get(y["#"])._,y=y["."]){if(b(A.put,y)&&(P=A.ask&&A.ask[y],(A.ask||(A.ask={}))[y]=A.$.get(y)._,A.on("in",{get:y,put:{"#":A.soul,".":y,":":A.put[y],">":v(M.graph[A.soul],y)}}),P))return}else{if(P=A.ask&&A.ask[""],(A.ask||(A.ask={}))[""]=A,l!==A.put&&(A.on("in",A),P))return;_.$=A.$}return M.ask(u,_),M.on("in",_)}if(y["."])return k.get?(_={get:{".":k.get},$:k.$},(A.ask||(A.ask={}))[k.get]=_.$._,A.on("out",_)):(_={get:k.lex?_.get:{},$:k.$},A.on("out",_));if((k.ask||(k.ask={}))[""]=k,k.get)return y["."]=k.get,(A.ask||(A.ask={}))[k.get]=_.$._,A.on("out",_)}return A.on("out",_)}i.on.out=n;function a(_,y){y=y||this.as;var k=y.root,A=_.$||(_.$=y.$),M=(A||"")._||f,P=_.put||"",R=P["#"],L=P["."],N=l!==P["="]?P["="]:P[":"],I=P[">"]||-1/0,d;if(l!==_.put&&(l===P["#"]||l===P["."]||l===P[":"]&&l===P["="]||l===P[">"])){if(!p(P)){if(!(R=((P||"")._||"")["#"])){console.log("chain not yet supported for",P,"...",_,y);return}return A=y.root.$.get(R),setTimeout.each(Object.keys(P).sort(),function(g){g=="_"||l===(I=v(P,g))||y.on("in",{$:A,put:{"#":R,".":g,"=":P[g],">":I},VIA:_})})}y.on("in",{$:M.back.$,put:{"#":R=M.back.soul,".":L=M.has||M.get,"=":P,">":v(M.back.put,L)},via:_});return}(_.seen||"")[y.id]||((_.seen||(_.seen=function(){}))[y.id]=y,y!==M&&(Object.keys(_).forEach(function(g){P[g]=_[g]},P={}),P.get=y.get||P.get,!y.soul&&!y.has?P.$$$=P.$$$||y.$:M.soul&&(P.$=y.$,P.$$=P.$$||M.$),_=P),c(_,y),(y.soul||_.$$)&&I>=v(k.graph[R],L)&&((P=k.$.get(R)._).put=x(P.put,L,I,N,R)),!M.soul&&I>=v(k.graph[R],L)&&(d=(k.$.get(R)._.next||"")[L])&&(d.put=N,typeof(P=p(N))=="string"&&(d.put=k.$.get(P)._.put||N)),this.to&&this.to.next(_),y.any&&setTimeout.each(Object.keys(y.any),function(g){(g=y.any[g])&&g(_)},0,99),y.echo&&setTimeout.each(Object.keys(y.echo),function(g){(g=y.echo[g])&&g.on("in",_)},0,99),((_.$$||"")._||M).soul&&(d=y.next)&&(d=d[L])&&(P={},Object.keys(_).forEach(function(g){P[g]=_[g]}),P.$=(_.$$||_.$).get(P.get=L),delete P.$$,delete P.$$$,d.on("in",P)),o(_,y))}i.on.in=a;function o(_,y){if(y=y||this.as||_.$._,!(_.$$&&this!==i.on)&&!(!_.put||y.soul)){var k=_.put||"",A=k["="]||k[":"],L,M=y.root,P=M.$.get(k["#"]).get(k["."])._;if(typeof(A=p(A))!="string"){this===i.on&&((P.echo||(P.echo={}))[y.id]=y);return}if(!((P.echo||(P.echo={}))[y.id]&&!(M.pass||"")[y.id])){if(L=M.pass){if(L[A+y.id])return;L[A+y.id]=1}(P.echo||(P.echo={}))[y.id]=y,y.has&&(y.link=A);var R=M.$.get(P.link=A)._;(R.echo||(R.echo={}))[P.id]=P;var L=y.ask||"";(L[""]||y.lex)&&R.on("out",{get:{"#":A}}),setTimeout.each(Object.keys(L),function(N,I){!N||!(I=L[N])||I.on("out",{get:{"#":A,".":N}})},0,99)}}}i.on.link=o;function c(_,y){var k=_.put||"",A=l!==k["="]?k["="]:k[":"],M=y.root,P,R;if(l===A){if(y.soul&&l!==y.put||(R=(_.$$||_.$||"")._||"",_["@"]&&(l!==R.put||l!==y.put)))return;(P=y.link||_.linked)&&delete(M.$.get(P)._.echo||"")[y.id],y.has&&(y.link=null),y.put=l,setTimeout.each(Object.keys(y.next||""),function(L,N){(N=y.next[L])&&(P&&delete(M.$.get(P).get(L)._.echo||"")[N.id],N.on("in",{get:L,put:l,$:N.$}))},0,99);return}y.soul||_.$$||(P=p(A),R=_.$._||"",!((P===R.link||y.has&&!R.link)&&!((M.pass||"")[y.id]&&typeof P!="string"))&&(delete(R.echo||"")[y.id],c({get:y.get,put:l,$:_.$,linked:_.linked=_.linked||R.link},y)))}i.on.unlink=c;function u(_,y){var k=this.as,A=k.$._;A.root;var M=k.get||"",P=(_.put||"")[M["#"]]||"";if(!_.put||typeof M["."]=="string"&&l===P[M["."]]){if(l!==A.put||!A.soul&&!A.has)return;A.ack=(A.ack||0)+1,A.on("in",{get:A.get,put:A.put=l,$:A.$,"@":_["@"]});return}(_._||{}).miss=1,i.on.put(_)}var f={},l,h=String.random,p=i.valid,b=function(_,y){return _&&Object.prototype.hasOwnProperty.call(_,y)},m=i.state,v=m.is,x=m.ify})(e,"./chain"),e(function(s){var i=e("./root");i.chain.get=function(l,h,p){var b,m;if(typeof l=="string"){if(l.length==0)return(b=this.chain())._.err={err:i.log("0 length key!",l)},h&&h.call(b,b._.err),b;var v=this,x=v._,_=x.next||c;(b=_[l])||(b=l&&n(l,v)),b=b&&b.$}else if(typeof l=="function"){let R=function(L,N,I){if(!R.stun&&!((E=k.pass)&&!E[A])){var d=L.$._,g=(L.$$||"")._,w=(g||d).put,D=!d.has&&!d.soul,S={},E;if((D||f===w)&&(w=f===((E=L.put)||"")["="]?f===(E||"")[":"]?E:E[":"]:E["="]),typeof(E=i.valid(w))=="string"&&(w=f===(E=k.$.get(E)._.put)?y.not?f:w:E),!(y.not&&f===w)){if(f===y.stun){if((E=k.stun)&&E.on&&(x.$.back(function(O){if(E.on(""+O.id,S={}),(S.run||0)<R.id)return S}),!S.run&&E.on(""+d.id,S={}),!S.run&&g&&E.on(""+g.id,S={}),R.id>S.run&&((!S.stun||S.stun.end)&&(S.stun=E.on("stun"),S.stun=S.stun&&S.stun.last),S.stun&&!S.stun.end))){(S.stun.add||(S.stun.add={}))[A]=function(){R(L,N,1)};return}if(f===w&&(I=0),(E=k.hatch)&&!E.end&&f===y.hatch&&!I){if(M[d.$._.id])return;M[d.$._.id]=1,E.push(function(){R(L,N,1)});return}M={}}if(k.pass){if(k.pass[A+d.id])return;k.pass[A+d.id]=1}if(y.on){y.ok.call(d.$,w,d.get,L,N||R);return}if(y.v2020){y.ok(L,N||R);return}Object.keys(L).forEach(function(O){E[O]=L[O]},E={}),L=E,L.put=w,y.ok.call(y.as,L,N||R)}}};if(h===!0)return a(this,l,h,p),this;b=this;var x=b._,y=h||{},k=x.root,A;y.at=x,y.ok=l;var M={};return R.at=x,(x.any||(x.any={}))[A=String.random(7)]=R,R.off=function(){R.stun=1,x.any&&delete x.any[A]},R.rid=o,R.id=y.run||++k.once,m=k.pass,(k.pass={})[A]=1,y.out=y.out||{get:{}},x.on("out",y.out),k.pass=m,b}else{if(typeof l=="number")return this.get(""+l,h,p);if(typeof(m=u(l))=="string")return this.get(m,h,p);(m=this.get.next)&&(b=m(this,l))}return b?(h&&typeof h=="function"&&b.get(h,p),b):((b=this.chain())._.err={err:i.log("Invalid get request!",l)},h&&h.call(b,b._.err),b)};function n(l,h){var p=h._,b=p.next,m=h.chain(),v=m._;return b||(b=p.next={}),b[v.get=l]=v,h===p.root.$?v.soul=l:(p.soul||p.has)&&(v.has=l),v}function a(l,h,p,b){var m=l._,v=0,x;return(x=m.soul||m.link)?h(x,b,m):m.jam?m.jam.push([h,b]):(m.jam=[[h,b]],l.get(function(y,k){if(!(f===y.put&&!m.root.opt.super&&(x=Object.keys(m.root.opt.peers).length)&&++v<=x)){k.rid(y);var A=(A=y.$)&&A._||{},M=0,P;for(x=m.jam,delete m.jam;P=x[M++];){var R=P[0];P=P[1],R&&R(A.link||A.soul||i.valid(y.put)||((y.put||{})._||{})["#"],P,y,k)}}},{out:{get:{".":!0}}}),l)}function o(l){var h=this.at||this.on;if(!l||h.soul||h.has)return this.off();if(l=(l=(l=l.$||l)._||l).id){h.map;var p;if((p=this.seen||(this.seen={}))[l])return!0;p[l]=!0}}var c={},u=i.valid,f})(e,"./get"),e(function(s){var i=e("./root");i.chain.put=function(b,m,v){var x=this,_=x._,y=_.root;v=v||{},v.root=_.root,v.run||(v.run=y.once),n(v,_.id),v.ack=v.ack||m,v.via=v.via||x,v.data=v.data||b,v.soul||(v.soul=_.soul||typeof m=="string"&&m);var k=v.state=v.state||i.state();return typeof b=="function"?(b(function(A){v.data=A,x.put(u,u,v)}),x):v.soul?(v.$=y.$.get(v.soul),v.todo=[{it:v.data,ref:v.$}],v.turn=v.turn||l,v.ran=v.ran||a,function A(){var M=v.todo,P=M.pop(),R=P.it;P.ref&&P.ref._.id;var L,N,I,d,g;if(n(v,P.ref),(d=P.todo)&&(N=d.pop(),R=R[N],d.length&&M.push(P)),N&&(M.path||(M.path=[])).push(N),!(L=h(R))&&!(g=i.is(R))){if(!Object.plain(R)){a.err(v,"Invalid data: "+c(R)+" at "+(v.via.back(function(E){E.get&&d.push(E.get)},d=[])||d.join("."))+"."+(M.path||[]).join("."));return}for(var w=v.seen||(v.seen=[]),D=w.length;D--;)if(R===(d=w[D]).it){L=R=d.link;break}}if(N&&L)P.node=p(P.node,N,k,R);else{let E=function(O,T){var C=I.link["#"];T&&(T.off(),T.rid(O));var F=C||O.soul||(d=(O.$$||O.$)._||"").soul||d.link||((d=d.put||"")._||"")["#"]||d["#"]||((d=O.put||"")&&O.$$?d["#"]:(d["="]||d[":"]||"")["#"]);if(!C&&n(v,O.$),!F&&!P.link["#"]){(P.wait||(P.wait=[])).push(function(){E(O,T)});return}F||(F=[],(O.$$||O.$).back(function(j){if(d=j.soul||j.link)return F.push(d);F.push(j.get)}),F=F.reverse().join("/")),I.link["#"]=F,!g&&(((v.graph||(v.graph={}))[F]=I.node||(I.node={_:{}}))._["#"]=F),delete v.wait[S],I.wait&&setTimeout.each(I.wait,function(j){j&&j()}),v.ran(v)};if(!v.seen){a.err(v,"Data at root of graph must be a node (an object).");return}v.seen.push(I={it:R,link:{},todo:g?[]:Object.keys(R).sort().reverse(),path:(M.path||[]).slice(),up:P}),P.node=p(P.node,N,k,I.link),!g&&I.todo.length&&M.push(I);var S=v.seen.length;(v.wait||(v.wait={}))[S]="",d=(I.ref=g?R:N?P.ref.get(N):P.ref)._,(d=R&&(R._||"")["#"]||d.soul||d.link)?E({soul:d}):I.ref.get(E,{run:v.run,v2020:1,out:{get:{".":" "}}})}if(!M.length)return v.ran(v);v.turn(A)}(),x):(o(v),x)};function n(b,m){if(m){m=(m._||"").id||m;var v=b.root.stun||(b.root.stun={on:i.on}),x={},_;b.stun||(b.stun=v.on("stun",function(){})),(_=v.on(""+m))&&_.the.last.next(x),!(x.run>=b.run)&&v.on(""+m,function(y){if(b.stun.end){this.off(),this.to.next(y);return}y.run=y.run||b.run,y.stun=y.stun||b.stun})}}function a(b){if(b.err){a.end(b.stun,b.root);return}if(!(b.todo.length||b.end||!Object.empty(b.wait))){b.end=1;var m=b.$.back(-1)._,v=m.root,x=m.ask(function(A){v.on("ack",A),A.err&&!A.lack&&i.log(A),++_>(b.acks||0)&&this.off(),b.ack&&b.ack(A,this)},b.opt),_=0,y=b.stun,k;(k=function(){y&&(a.end(y,v),setTimeout.each(Object.keys(y=y.add||""),function(A){(A=y[A])&&A()}))}).hatch=k,b.ack&&!b.ok&&(b.ok=b.acks||9),b.via._.on("out",{put:b.out=b.graph,ok:b.ok&&{"@":b.ok+1},opt:b.opt,"#":x,_:k})}}a.end=function(b,m){b.end=f,b.the.to===b&&b===b.the.last&&delete m.stun,b.off()},a.err=function(b,m){(b.ack||f).call(b,b.out={err:b.err=i.log(m)}),b.ran(b)};function o(b){var m=b.via._,v;b.via=b.via.back(function(x){if(x.soul||!x.get)return x.$;v=b.data,(b.data={})[x.get]=v}),(!b.via||!b.via._.soul)&&(b.via=m.root.$.get(((b.data||"")._||"")["#"]||m.$.back("opt.uuid")())),b.via.put(b.data,b.ack,b)}function c(b,m){return b&&(m=b.constructor)&&m.name||typeof b}var u,f=function(){},l=setTimeout.turn,h=i.valid,p=i.state.ify})(e,"./put"),e(function(s){var i=e("./root");e("./chain"),e("./back"),e("./put"),e("./get"),s.exports=i})(e,"./index"),e(function(s){var i=e("./index");i.chain.on=function(o,c,u,f){var l=this,h=l._;h.root;var p;if(typeof o=="string")return c?(p=h.on(o,c,u||h,f),u&&u.$&&(u.subs||(u.subs=[])).push(p),l):h.on(o);var b=c;return(b=b===!0?{change:!0}:b||{}).not=1,b.on=1,l.get(o,b),l},i.chain.once=function(o,c){if(c=c||{},!o)return n(this);var u=this,f=u._,l=f.root;f.put;var h=String.random(7),p;return u.get(function(b,m,v,x){var _=this,y=_._,k=y.one||(y.one={});if(x.stun||k[h]==="")return;if((p=i.valid(b))===!0){A();return}if(typeof p=="string")return;clearTimeout((f.one||"")[h]),clearTimeout(k[h]),k[h]=setTimeout(A,c.wait||99);function A(M){if(!y.has&&!y.soul&&(y={put:b,get:m}),a===(p=y.put)&&(p=((v.$$||"")._||"").put),typeof i.valid(p)=="string"&&(p=l.$.get(p)._.put,p===a&&!M)){k[h]=setTimeout(function(){A(1)},c.wait||99);return}x.stun||k[h]!==""&&(k[h]="",(f.soul||f.has)&&x.off(),o.call(_,p,y.get),clearTimeout(k[h]))}},{on:1}),u};function n(o,c,u){return i.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(u=o.chain())._.nix=o.once(function(f,l){u._.on("in",this._)}),u._.lex=o._.lex,u}i.chain.off=function(){var o=this,c=o._,u,f=c.back;if(f)return c.ack=0,(u=f.next)&&u[c.get]&&delete u[c.get],(u=f.any)&&(delete f.any,f.any={}),(u=f.ask)&&delete u[c.get],(u=f.put)&&delete u[c.get],(u=c.soul)&&delete f.root.graph[u],(u=c.map)&&Object.keys(u).forEach(function(l,h){h=u[l],h.link&&f.root.$.get(h.link).off()}),(u=c.next)&&Object.keys(u).forEach(function(l,h){h=u[l],h.$.off()}),c.on("off",{}),o};var a})(e,"./on"),e(function(s){var i=e("./index"),n=i.chain.get.next;i.chain.get.next=function(u,f){var l;return Object.plain(f)?(l=((l=f["#"])||"")["="]||l)?u.get(l):((l=u.chain()._).lex=f,u.on("in",function(h){String.match(h.get||(h.put||"")["."],f["."]||f["#"]||f)&&l.on("in",h),this.to.next(h)}),l.$):(n||o)(u,f)},i.chain.map=function(u,f,l){var h=this,p=h._,b,m;return Object.plain(u)&&(b=u["."]?u:{".":u},u=c),u?(i.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),m=h.chain(),h.map().on(function(v,x,_,y){var k=(u||o).call(this,v,x,_,y);if(c!==k){if(v===k)return m._.on("in",_);if(i.is(k))return m._.on("in",k._);var A={};Object.keys(_.put).forEach(function(M){A[M]=_.put[M]},A),A["="]=k,m._.on("in",{get:x,put:A})}}),m):((m=p.each)||((p.each=m=h.chain())._.lex=b||m._.lex||p.lex,m._.nix=h.back("nix"),h.on("in",a,m._)),m)};function a(u){this.to.next(u);var f=this.as,l=u.$,h=l._,p=u.put,b;!h.soul&&!u.$$||(b=f.lex)&&!String.match(u.get||(p||"")["."],b["."]||b["#"]||b)||i.on.link(u,f)}var o=function(){},c})(e,"./map"),e(function(s){var i=e("./index");i.chain.set=function(n,a,o){var c=this,u=c.back(-1),f,l;return a=a||function(){},o=o||{},o.item=o.item||n,(f=((n||"")._||"")["#"])&&((n={})["#"]=f),typeof(l=i.valid(n))=="string"?c.get(f=l).put(n,a,o):i.is(n)?(c.put(function(h){n.get(function(p,b,m){if(!p)return a.call(c,{err:i.log('Only a node can be linked! Not "'+m.put+'"!')});(l={})[p]={"#":p},h(l)},!0)}),n):(Object.plain(n)&&(n=u.get(f=c.back("opt.uuid")()).put(n)),c.get(f||u.back("opt.uuid")(7)).put(n,a,o))}})(e,"./set"),e(function(s){e("./shim");var i=function(){},n=JSON.parseAsync||function(u,f,l){var h,p=+new Date;try{f(h,JSON.parse(u,l),a.sucks(+new Date-p))}catch(b){f(b)}},a=JSON.stringifyAsync||function(u,f,l,h){var p,b=+new Date;try{f(p,JSON.stringify(u,l,h),a.sucks(+new Date-b))}catch(m){f(m)}};a.sucks=function(u){u>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),a.sucks=i)};function o(u){var f=function(){},l=u.opt||{};l.log=l.log||console.log,l.gap=l.gap||l.wait||0,l.max=l.max||(l.memory?l.memory*999*999:3e8)*.3,l.pack=l.pack||l.max*.01*.01,l.puff=l.puff||9;var h=setTimeout.turn||setTimeout,p=u.dup,b=p.check,m=p.track,v=f.hear=function(y,k){if(y){if(l.max<=y.length)return f.say({dam:"!",err:"Message too big!"},k);f===this&&(v.d+=y.length||0,++v.c);var A=k.SH=+new Date,M=y[0],P;if(M==="["){n(y,function(R,L){if(R||!L)return f.say({dam:"!",err:"DAM JSON parse error."},k);console.STAT&&console.STAT(+new Date,L.length,"# on hear batch");var N=l.puff;(function I(){for(var d=+new Date,g=0,w;g<N&&(w=L[g++]);)f.hear(w,k);L=L.slice(g),console.STAT&&console.STAT(d,+new Date-d,"hear loop"),x(k),L.length&&h(I,0)})()}),y="";return}if(M==="{"||(y["#"]||Object.plain(y))&&(P=y)){if(P)return v.one(P,k,A);n(y,function(R,L){if(R||!L)return f.say({dam:"!",err:"DAM JSON parse error."},k);v.one(L,k,A)});return}}};v.one=function(y,k,I){var M,P,R,L,N;if(y.DBG&&(y.DBG=N={DBG:y.DBG}),N&&(N.h=I),N&&(N.hp=+new Date),(M=y["#"])||(M=y["#"]=String.random(9)),!(R=b(M))&&(P=y["##"],!(P&&(R=y["@"]||y.get&&M)&&p.check(L=R+P)))){if((y._=function(){}).via=f.leap=k,(R=y["><"])&&typeof R=="string"&&R.slice(0,99).split(",").forEach(function(d){this[d]=1},y._.yo={}),R=y.dam){(R=f.hear[R])&&R(y,k,u),m(M);return}(R=y.ok)&&(y._.near=R["/"]);var I=+new Date;N&&(N.is=I),k.SI=M,m.ed=function(d){M===d&&(m.ed=0,(d=p.s[M])&&(d.via=k,y.get&&(d.it=y)))},u.on("in",f.last=y),N&&(N.hd=+new Date),console.STAT&&console.STAT(I,+new Date-I,y.get?"msg get":y.put?"msg put":"msg"),m(M),L&&m(L),f.leap=f.last=null}},v.c=v.d=0,function(){var y=0,k;f.hash=function(P,R){var L,N,I,d=+new Date;a(P.put,function g(w,D){var S=(N||(N=I=D||"")).slice(0,32768);if(L=String.hash(S,L),N=N.slice(32768),N){h(g,0);return}console.STAT&&console.STAT(d,+new Date-d,"say json+hash"),P._.$put=I,P["##"]=L,f.say(P,R),delete P._.$put},A)};function A(P,R){var L;return R instanceof Object?(Object.keys(R).sort().forEach(M,{to:L={},on:R}),L):R}function M(P){this.to[P]=this.on[P]}f.say=function(P,R){var L;if((L=this)&&(L=L.to)&&L.next&&L.next(P),!P)return!1;var N,I,d,g=P["@"],w=P._||(P._=function(){}),D=P.DBG,S=+new Date;if(w.y=w.y||S,R||D&&(D.y=S),(N=P["#"])||(N=P["#"]=String.random(9)),!k&&m(N),!(I=P["##"])&&c!==P.put&&!w.via&&g){f.hash(P,R);return}if(!R&&g&&(R=(L=p.s[g])&&(L.via||(L=L.it)&&(L=L._)&&L.via)||(L=f.last)&&g===L["#"]&&f.leap),!R&&g)return p.s[g]?void 0:(console.STAT&&console.STAT(+new Date,++y,"total no peer to ack to"),!1);if(g&&!P.put&&!I&&((p.s[g]||"").it||"")["##"])return!1;if(!R&&f.way)return f.way(P);if(D&&(D.yh=+new Date),!(d=w.raw)){f.raw(P,R);return}if(D&&(D.yr=+new Date),!R||!R.id){if(!Object.plain(R||l.peers))return!1;var S=+new Date;l.puff;var E=l.peers,O=Object.keys(R||l.peers||{});console.STAT&&console.STAT(S,+new Date-S,"peer keys"),function F(){var j=+new Date;k=1;var W=w.raw;w.raw=d;for(var V=0,Z;V<9&&(Z=(O||"")[V++]);)(Z=E[Z]||(R||"")[Z])&&f.say(P,Z);w.raw=W,k=0,O=O.slice(V),console.STAT&&console.STAT(j,+new Date-j,"say loop"),O.length&&(h(F,0),g&&m(g))}();return}if(!R.wire&&f.wire&&f.wire(R),N!==R.last){if(R.last=N,R===w.via||(L=w.yo)&&(L[R.url]||L[R.pid]||L[R.id]))return!1;if(console.STAT&&console.STAT(S,((D||w).yp=+new Date)-(w.y||S),"say prep"),!k&&g&&m(g),R.batch){if(R.tail=(L=R.tail||0)+d.length,R.tail<=l.pack){R.batch+=(L?",":"")+d;return}x(R)}R.batch="[";var T=+new Date;setTimeout(function(){console.STAT&&console.STAT(T,+new Date-T,"0ms TO"),x(R)},l.gap),_(d,R),console.STAT&&g===R.SI&&console.STAT(S,+new Date-R.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(P,R){if(!P)return"";var L=P._||{},N,I;if(I=L.raw)return I;if(typeof P=="string")return P;var d=P["##"],g=P["@"];if(d&&g){if(!L.via&&b(g+d))return!1;if(I=(p.s[g]||"").it){if(d===I["##"])return!1;I["##"]||(I["##"]=d)}}if(!P.dam&&!P["@"]){var w=0,D=[];I=l.peers;for(var S in I){var E=I[S];if(D.push(E.url||E.pid||E.id),++w>6)break}w>1&&(P["><"]=D.join())}if(P.put&&(I=P.ok)&&(P.ok={"@":(I["@"]||1)-1,"/":I["/"]==P._.near?f.near:I["/"]}),N=L.$put){I={},Object.keys(P).forEach(function(T){I[T]=P[T]}),I.put=":])([:",a(I,function(T,C){if(!T){var F=+new Date;I=C.indexOf('"put":":])([:"'),O(c,C=C.slice(0,I+6)+N+C.slice(I+14)),console.STAT&&console.STAT(F,+new Date-F,"say slice")}});return}a(P,O);function O(T,C){T||(L.raw=C,f.say(P,R))}}}();function x(y){var k=y.batch,A=typeof k=="string";if(A&&(k+="]"),y.batch=y.tail=null,!!k&&!(A?3>k.length:!k.length)){if(!A)try{k=k.length===1?k[0]:JSON.stringify(k)}catch(M){return l.log("DAM JSON stringify error",M)}k&&_(k,y)}}function _(y,k){try{var A=k.wire;k.say?k.say(y):A.send&&A.send(y),f.say.d+=y.length||0,++f.say.c}catch{(k.queue=k.queue||[]).push(y)}}return f.near=0,f.hi=function(y){var k=y.wire,A;if(!k){f.wire(y.length&&{url:y,id:y}||y);return}y.id?l.peers[y.url||y.id]=y:(A=y.id=y.id||y.url||String.random(9),f.say({dam:"?",pid:u.opt.pid},l.peers[A]=y),delete p.s[y.last]),y.met||(f.near++,y.met=+new Date,u.on("hi",y)),A=y.queue,y.queue=[],setTimeout.each(A||[],function(M){_(M,y)},0,9)},f.bye=function(y){y.met&&--f.near,delete y.met,u.on("bye",y);var k=+new Date;k=k-(y.met||k),f.bye.time=((f.bye.time||k)+k)/2},f.hear["!"]=function(y,k){l.log("Error:",y.err)},f.hear["?"]=function(y,k){y.pid&&(k.pid||(k.pid=y.pid),y["@"])||(f.say({dam:"?",pid:l.pid,"@":y["#"]},k),delete p.s[k.last])},f.hear.mob=function(y,k){if(y.peers){var A=Object.keys(y.peers),M=A[Math.random()*A.length>>0];M&&(f.bye(k),f.hi(M))}},u.on("create",function(y){y.opt.pid=y.opt.pid||String.random(9),this.to.next(y),y.on("out",f.say)}),u.on("bye",function(y,k){y=l.peers[y.id||y]||y,this.to.next(y),y.bye?y.bye():(k=y.wire)&&k.close&&k.close(),delete l.peers[y.id],y.wire=null}),u.on("bye",function(y,k){this.to.next(y),(k=console.STAT)&&(k.peers=f.near),(k=y.url)&&setTimeout(function(){},l.lack||9e3)}),u.on("hi",function(y,k){if(this.to.next(y),(k=console.STAT)&&(k.peers=f.near),!l.super){var A=Object.keys(u.next||"");A.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(A,function(M){var P=u.next[M];if(l.super||(P.ask||"")[""]){f.say({get:{"#":M}},y);return}setTimeout.each(Object.keys(P.ask||""),function(R){R&&f.say({"##":String.hash((u.graph[M]||"")[R]),get:{"#":M,".":R}},y)})})}}),f}var c;try{s.exports=o}catch{}})(e,"./mesh"),e(function(s){var i=e("./index");i.Mesh=e("./mesh"),i.on("opt",function(a){if(this.to.next(a),a.once)return;var o=a.opt;if(o.WebSocket===!1)return;var c=i.window||{},u=o.WebSocket||c.WebSocket||c.webkitWebSocket||c.mozWebSocket;if(!u)return;o.WebSocket=u;var f=o.mesh=o.mesh||i.Mesh(a);f.wire||o.wire,f.wire=o.wire=l;function l(m){try{if(!m||!m.url)return x&&x(m);var v=m.url.replace(/^http/,"ws"),x=m.wire=new o.WebSocket(v);return x.onclose=function(){p(m),o.mesh.bye(m)},x.onerror=function(_){p(m)},x.onopen=function(){o.mesh.hi(m)},x.onmessage=function(_){_&&o.mesh.hear(_.data||_,m)},x}catch{o.mesh.bye(m)}}setTimeout(function(){!o.super&&a.on("out",{dam:"hi"})},1);var h=2*999;function p(m){clearTimeout(m.defer),o.peers[m.url]&&(b&&m.retry<=0||(m.retry=(m.retry||o.retry+1||60)-(-m.tried+(m.tried=+new Date)<h*4?1:0),m.defer=setTimeout(function v(){if(b&&b.hidden)return setTimeout(v,h);l(m)},h)))}var b=""+n!=typeof document&&document});var n})(e,"./websocket"),e(function(s){if(!(typeof Gun>"u")){var i=function(){},n;try{n=(Gun.window||i).localStorage}catch{}n||(Gun.log("Warning: No localStorage exists to persist data to!"),n={setItem:function(o,c){this[o]=c},removeItem:function(o){delete this[o]},getItem:function(o){return this[o]}});var a=JSON.stringifyAsync||function(o,c,u,f){var l;try{c(l,JSON.stringify(o,u,f))}catch(h){c(h)}};Gun.on("create",function o(c){this.to.next(c);var u=c.opt;c.graph;var f=[],l,h,p,b;if(u.localStorage===!1)return;u.prefix=u.file||"gun/";try{l=o[u.prefix]=o[u.prefix]||JSON.parse(p=n.getItem(u.prefix))||{}}catch{l=o[u.prefix]={}}p=(p||"").length,c.on("get",function(v){this.to.next(v);var x=v.get,_,y,k,A;!x||!(_=x["#"])||(y=l[_]||A,y&&(k=x["."])&&!Object.plain(k)&&(y=Gun.state.ify({},k,Gun.state.is(y,k),y[k],_)),Gun.on.get.ack(v,y))}),c.on("put",function(v){this.to.next(v);var x=v.put,_=x["#"],y=x["."],k=v["#"],A=v.ok||"";if(l[_]=Gun.state.ify(l[_],y,x[">"],x[":"],_),b&&p>4999880){c.on("in",{"@":k,err:"localStorage max!"});return}!v["@"]&&(!v._.via||Math.random()<A["@"]/A["/"])&&f.push(k),!h&&(h=setTimeout(m,9+p/333))});function m(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(m,99);return}var v=f;clearTimeout(h),h=!1,f=[],a(l,function(x,_){try{!x&&n.setItem(u.prefix,_)}catch(y){x=b=y||"localStorage failure"}x&&(Gun.log(x+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),c.on("localStorage:error",{err:x,get:u.prefix,put:l})),p=_.length,setTimeout.each(v,function(y){c.on("in",{"@":y,err:x,ok:0})},0,99)})}})}})(e,"./localStorage")})(),function(){var I;if(""+I!=typeof Gun){var e=function(d){console.warn("Warning! Deprecated internal utility will break in next version:",d)},r=Gun;r.fn=r.fn||{is:function(d){return e("fn"),!!d&&typeof d=="function"}},r.bi=r.bi||{is:function(d){return e("bi"),d instanceof Boolean||typeof d=="boolean"}},r.num=r.num||{is:function(d){return e("num"),!s(d)&&(d-parseFloat(d)+1>=0||d===1/0||d===-1/0)}},r.text=r.text||{is:function(d){return e("text"),typeof d=="string"}},r.text.ify=r.text.ify||function(d){return e("text.ify"),r.text.is(d)?d:typeof JSON<"u"?JSON.stringify(d):d&&d.toString?d.toString():d},r.text.random=r.text.random||function(d,g){e("text.random");var w="";for(d=d||24,g=g||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";d>0;)w+=g.charAt(Math.floor(Math.random()*g.length)),d--;return w},r.text.match=r.text.match||function(d,g){var w,D;return e("text.match"),typeof d!="string"?!1:(typeof g=="string"&&(g={"=":g}),g=g||{},w=g["="]||g["*"]||g[">"]||g["<"],d===w?!0:D!==g["="]?!1:(w=g["*"]||g[">"]||g["<"],d.slice(0,(w||"").length)===w?!0:D!==g["*"]?!1:D!==g[">"]&&D!==g["<"]?d>=g[">"]&&d<=g["<"]:D!==g[">"]&&d>=g[">"]||D!==g["<"]&&d<=g["<"]))},r.text.hash=r.text.hash||function(d,g){if(e("text.hash"),typeof d=="string"){if(g=g||0,!d.length)return g;for(var w=0,D=d.length,S;w<D;++w)S=d.charCodeAt(w),g=(g<<5)-g+S,g|=0;return g}},r.list=r.list||{is:function(d){return e("list"),d instanceof Array}},r.list.slit=r.list.slit||Array.prototype.slice,r.list.sort=r.list.sort||function(d){return e("list.sort"),function(g,w){return!g||!w?0:(g=g[d],w=w[d],g<w?-1:g>w?1:0)}},r.list.map=r.list.map||function(d,g,w){return e("list.map"),L(d,g,w)},r.list.index=1,r.obj=r.boj||{is:function(d){return e("obj"),d?d instanceof Object&&d.constructor===Object||Object.prototype.toString.call(d).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},r.obj.put=r.obj.put||function(d,g,w){return e("obj.put"),(d||{})[g]=w,d},r.obj.has=r.obj.has||function(d,g){return e("obj.has"),d&&Object.prototype.hasOwnProperty.call(d,g)},r.obj.del=r.obj.del||function(d,g){if(e("obj.del"),!!d)return d[g]=null,delete d[g],d},r.obj.as=r.obj.as||function(d,g,w,D){return e("obj.as"),d[g]=d[g]||(D===w?{}:w)},r.obj.ify=r.obj.ify||function(d){if(e("obj.ify"),k(d))return d;try{d=JSON.parse(d)}catch{d={}}return d},function(){var d;function g(w,D){M(this,D)&&d!==this[D]||(this[D]=w)}r.obj.to=r.obj.to||function(w,D){return e("obj.to"),D=D||{},L(w,g,D),D}}(),r.obj.copy=r.obj.copy||function(d){return e("obj.copy"),d&&JSON.parse(JSON.stringify(d))},function(){function d(g,w){var D=this.n,S;if(!(D&&(w===D||k(D)&&M(D,w)))&&S!==w)return!0}r.obj.empty=r.obj.empty||function(g,w){return e("obj.empty"),g?!L(g,d,{n:w}):!0}}(),function(){function d(D,S){if(arguments.length===2){d.r=d.r||{},d.r[D]=S;return}d.r=d.r||[],d.r.push(D)}var g=Object.keys,w;Object.keys=Object.keys||function(D){return w(D,function(S,E,O){O(E)})},r.obj.map=w=r.obj.map||function(D,S,E){e("obj.map");var O,T=0,C,F,j,W,V=typeof S=="function";if(d.r=O,g&&k(D)&&(j=g(D),W=!0),E=E||{},s(D)||j)for(C=(j||D).length;T<C;T++){var Z=T+r.list.index;if(V){if(F=W?S.call(E,D[j[T]],j[T],d):S.call(E,D[T],Z,d),F!==O)return F}else if(S===D[W?j[T]:T])return j?j[T]:Z}else for(T in D)if(V){if(M(D,T)&&(F=E?S.call(E,D[T],T,d):S(D[T],T,d),F!==O))return F}else if(S===D[T])return T;return V?d.r:r.list.index?0:-1}}(),r.time=r.time||{},r.time.is=r.time.is||function(d){return e("time"),d?d instanceof Date:+new Date().getTime()};var _=r.fn.is,s=r.list.is,y=r.obj,k=y.is,M=y.has,L=y.map,i={};i.is=function(d){return e("val.is"),d===I?!1:d===null?!0:d===1/0?!1:o(d)||a(d)||b(d)?!0:i.link.is(d)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(g){if(e("val.link.is"),g&&g[n]&&!g._&&k(g)){var w={};if(L(g,d,w),w.id)return w.id}return!1};function d(g,w){var D=this;if(D.id)return D.id=!1;if(w==n&&o(g))D.id=g;else return D.id=!1}}(),i.link.ify=function(d){return e("val.link.ify"),R({},n,d)},r.obj.has._=".";var n=i.link._,I,a=r.bi.is,b=r.num.is,o=r.text.is,y=r.obj,k=y.is,R=y.put,L=y.map;r.val=r.val||i;var c={_:"_"};c.soul=function(d,g){return e("node.soul"),d&&d._&&d._[g||l]},c.soul.ify=function(d,g){return e("node.soul.ify"),g=typeof g=="string"?{soul:g}:g||{},d=d||{},d._=d._||{},d._[l]=g.soul||d._[l]||f(),d},c.soul._=i.link._,function(){c.is=function(g,w,D){e("node.is");var S;return k(g)&&(S=c.soul(g))?!L(g,d,{as:D,cb:w,s:S,n:g}):!1};function d(g,w){if(w!==c._){if(!i.is(g))return!0;this.cb&&this.cb.call(this.as,g,w,this.n,this.s)}}}(),function(){c.ify=function(g,w,D){return e("node.ify"),w?typeof w=="string"?w={soul:w}:typeof w=="function"&&(w={map:w}):w={},w.map&&(w.node=w.map.call(D,g,I,w.node||{})),(w.node=c.soul.ify(w.node||{},w))&&L(g,d,{o:w,as:D}),w.node};function d(g,w){var D=this.o,S,E;if(D.map){S=D.map.call(this.as,g,""+w,D.node),E===S?A(D.node,w):D.node&&(D.node[w]=S);return}i.is(g)&&(D.node[w]=g)}}();var y=r.obj,k=y.is,A=y.del,L=y.map,u=r.text,f=u.random,l=c.soul._,I;r.node=r.node||c;var h=r.state;h.lex=function(){return e("state.lex"),h().toString(36).replace(".","")},h.to=function(d,g,w){e("state.to");var D=(d||{})[g];return k(D)&&(D=N(D)),h.ify(w,g,h.is(d,g),D,c.soul(d))},function(){h.map=function(g,w,D){e("state.map");var S,E=k(E=g||w)?E:null;return g=_(g=g||w)?g:null,E&&!g?(w=b(w)?w:h(),E[v]=E[v]||{},L(E,d,{o:E,s:w}),E):(D=D||k(w)?w:S,w=b(w)?w:h(),function(O,T,C,F){if(!g)return d.call({o:C,s:w},O,T),O;g.call(D||this||{},O,T,C,F),!(M(C,T)&&S===C[T])&&d.call({o:C,s:w},O,T)})};function d(g,w){v!==w&&h.ify(this.o,w,this.s)}}();var y=r.obj;y.as;var M=y.has,k=y.is,L=y.map,N=y.copy,p=r.num,b=p.is,m=r.fn,_=m.is,v=c._,I,x={};(function(){x.is=function(w,D,S,E){return e("graph.is"),!w||!k(w)||P(w)?!1:!L(w,d,{cb:D,fn:S,as:E})};function d(w,D){if(!w||D!==c.soul(w)||!c.is(w,this.fn,this.as))return!0;this.cb&&(g.n=w,g.as=this.as,this.cb.call(g.as,w,D,g))}function g(w){w&&c.is(g.n,w,g.as)}})(),function(){x.ify=function(E,O,T){e("graph.ify");var C={path:[],obj:E};return O?typeof O=="string"?O={soul:O}:typeof O=="function"&&(O.map=O):O={},typeof T=="string"&&(O.soul=O.soul||T,T=I),O.soul&&(C.link=i.link.ify(O.soul)),O.shell=(T||{}).shell,O.graph=O.graph||{},O.seen=O.seen||[],O.as=O.as||T,d(O,C),O.root=C.node,O.graph};function d(E,O){var T;return(T=S(E,O))?T:(O.env=E,O.soul=w,c.ify(O.obj,g,O)&&(O.link=O.link||i.link.ify(c.soul(O.node)),O.obj!==E.shell&&(E.graph[i.link.is(O.link)]=O.node)),O)}function g(E,O,T){var C=this,F=C.env,j,W;if(c._===O&&M(E,i.link._))return T._;if(j=D(E,O,T,C,F)){if(O||(C.node=C.node||T||{},M(E,c._)&&c.soul(E)&&(C.node._=N(E._)),C.node=c.soul.ify(C.node,i.link.is(C.link)),C.link=C.link||i.link.ify(c.soul(C.node))),(W=F.map)&&(W.call(F.as||{},E,O,T,C),M(T,O))){if(E=T[O],I===E){A(T,O);return}if(!(j=D(E,O,T,C,F)))return}if(!O)return C.node;if(j===!0)return E;if(W=d(F,{obj:E,path:C.path.concat(O)}),!!W.node)return W.link}}function w(E){var O=this,T=i.link.is(O.link),C=O.env.graph;O.link=O.link||i.link.ify(E),O.link[i.link._]=E,O.node&&O.node[c._]&&(O.node[c._][i.link._]=E),M(C,T)&&(C[E]=C[T],A(C,T))}function D(E,O,T,C,F){var j;if(i.is(E))return!0;if(k(E))return 1;if(j=F.invalid)return E=j.call(F.as||{},E,O,T),D(E,O,T,C,F);F.err="Invalid value at '"+C.path.concat(O).join(".")+"'!",r.list.is(E)&&(F.err+=" Use `.set(item)` instead of an Array.")}function S(E,O){for(var T=E.seen,C=T.length,F;C--;)if(F=T[C],O.obj===F.obj)return F;T.push(O)}}(),x.node=function(d){e("graph.node");var g=c.soul(d);if(g)return R({},g,d)},function(){x.to=function(g,w,D){if(e("graph.to"),!!g){var S={};return D=D||{seen:{}},L(g[w],d,{obj:S,graph:g,opt:D}),S}};function d(g,w){var D,S;if(c._===w){if(P(g,i.link._))return;this.obj[w]=N(g);return}if(!(D=i.link.is(g))){this.obj[w]=g;return}if(S=this.opt.seen[D]){this.obj[w]=S;return}this.obj[w]=this.opt.seen[D]=x.to(this.graph,D,this.opt)}}();var _=r.fn.is,y=r.obj,k=y.is,A=y.del,M=y.has,P=y.empty,R=y.put,L=y.map,N=y.copy,I;r.graph=r.graph||x}}()}(oi)),oi.exports}var Dp=dn();const Cr=Ir(Dp);var Oo={},Fo;function Tp(){if(Fo)return Oo;Fo=1;var t=typeof window<"u"?window.Gun:dn();return t.chain.promise=function(s){var r=this,s=s||function(i){return i};return new Promise(function(i,n){r.once(function(a,o){i({put:a,get:o,gun:this})})}).then(s)},t.chain.then=function(e){var r=this,s=new Promise((i,n)=>{r.once(function(a,o){i(a,o)})});return e?s.then(e):s},Oo}Tp();var is={exports:{}},Ro;function Ga(){return Ro||(Ro=1,function(){function t(){var n=function(a,o,c){if(n.unit=0,!c&&s!==o&&(n.last=""+a<n.last?n.last:""+a,delete(n.$||{})[i]),c=c||n.$||(n.$={}),!a&&Object.keys(c).length)return c;a=""+a;for(var u=0,f=a.length-1,l=a[u],h,p;!(h=c[l])&&u<f;)l+=a[++u];if(h)if(u==f){if(s===o)return s===(p=h[""])?h:(n.unit=1)&&p;h[""]=o}else return s!==o&&delete h[i],n(a.slice(++u),o,h||(h={}));else{if(!e(c,function(b,m){var v=0,x="";if((m||"").length)for(;m[v]==a[v];)x+=m[v++];if(x){if(s===o)return v<=f?void 0:((p||(p={}))[m.slice(v)]=b,b);var _={};if(_[m.slice(v)]=b,v=a.slice(v),v===""?_[""]=o:(_[v]={})[""]=o,c[x]=_,t.debug&&""+x=="undefined"){console.log(0,x);debugger}return delete c[m],!0}})){if(s===o)return;if((c[l]||(c[l]={}))[""]=o,t.debug&&""+l=="undefined"){console.log(1,l);debugger}}if(s===o)return p}};return n}if(t.map=function n(a,o,c,u){try{u=u||[];var f=typeof a=="function"?a.$||{}:a;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!f)return;if(typeof f=="string"){if(t.debug)throw["BUG:",a,o,c,u];return}var l=(f[i]||r).sort||(f[i]=function R(){return R.sort=Object.keys(f).sort(),R}()).sort,h;c=c===!0?{branch:!0}:c||{},(h=c.reverse)&&(l=l.slice(0).reverse());for(var p=c.start,b=c.end,m="",v=0,x=l.length;v<x;v++){var _=l[v],y=f[_],k,A,M;if(!(!y||_===""||i===_||_==="undefined")&&(A=u.slice(0),A.push(_),M=A.join(""),!(s!==p&&M<(p||"").slice(0,M.length))&&!(s!==b&&(b||m)<M))){if(h&&(k=n(y,o,c,A),s!==k))return k;if(s!==(k=y[""])){var P=1;if(s!==p&&M<(p||"")&&(P=0),s!==b&&M>(b||m)&&(P=0),P&&(k=o(k,M,_,u),s!==k))return k}else if(c.branch&&(k=o(s,M,_,u),s!==k))return k;if(u=A,!h&&(k=n(y,o,c,u),s!==k))return k;u.pop()}}}catch(R){console.error(R)}},typeof window<"u")window.Radix=t;else try{is.exports=t}catch{}var e=t.object=function(n,a,o){for(var c in n)if(n.hasOwnProperty(c)&&(o=a(n[c],c))!==s)return o},r={},s,i=""}()),is.exports}Ga();var ss={exports:{}},as={exports:{}},Lo;function Mp(){return Lo||(Lo=1,function(t){(function(){var e={},r,s=setTimeout.turn||typeof setImmediate!=""+r&&setImmediate||setTimeout;e.parseAsync=function(n,a,o,c){if(typeof n!="string"){try{a(r,JSON.parse(n))}catch(l){a(l)}return}var u={i:0,text:n,done:a,l:n.length,up:[]};c=c||1024*32,f();function f(){for(var l=u.text,h=u.i,p=u.l,b=0,m=u.w,v,x;b++<c;){var _=l[h++];if(h>p){u.end=!0;break}if(m){for(h=l.indexOf('"',h-1),_=l[h],x=0;l[h-++x]=="\\";);x=!(x%2),v=v||x,_=='"'&&!x&&(m=r,x=u.s,u.a?(x=l.slice(u.sl,h),(v||1+x.indexOf("\\"))&&(x=JSON.parse('"'+x+'"')),u.at instanceof Array?u.at.push(u.s=x):(u.at||(u.end=b=c,x=r),(u.at||{})[u.s]=u.s=x),u.s=r):(u.s=l.slice(u.sl,h),(v||1+u.s.indexOf("\\"))&&(u.s=JSON.parse('"'+u.s+'"'))),u.a=v=r),++h}else switch(_){case'"':u.sl=h,m=!0;break;case":":u.ai=h,u.a=!0;break;case",":(u.a||u.at instanceof Array)&&(x=l.slice(u.ai,h-1))&&r!==(x=i(x))&&(u.at instanceof Array?u.at.push(x):u.at[u.s]=x),u.a=r,u.at instanceof Array&&(u.a=!0,u.ai=h);break;case"{":u.up.push(u.at||(u.at={})),u.at instanceof Array?u.at.push(u.at={}):r!==(x=u.s)&&(u.at[x]=u.at={}),u.a=r;break;case"}":u.a&&(x=l.slice(u.ai,h-1))&&r!==(x=i(x))&&(u.at instanceof Array?u.at.push(x):(u.at||(u.end=b=c,x=r),(u.at||{})[u.s]=x)),u.a=r,u.at=u.up.pop();break;case"[":r!==(x=u.s)?(u.up.push(u.at),u.at[x]=u.at=[]):u.at||u.up.push(u.at=[]),u.a=!0,u.ai=h;break;case"]":u.a&&(x=l.slice(u.ai,h-1))&&r!==(x=i(x))&&(u.at instanceof Array?u.at.push(x):u.at[u.s]=x),u.a=r,u.at=u.up.pop();break}}if(u.s=r,u.i=h,u.w=m,u.end){if(x=u.at,r===x)try{x=JSON.parse(n)}catch(y){return u.done(y)}u.done(r,x)}else s(f)}};function i(n){var a=parseFloat(n);if(!isNaN(a))return a;if(n=n.trim(),n=="true")return!0;if(n=="false")return!1;if(n=="null")return null}e.stringifyAsync=function(n,a,o,c,u){u=u||{},u.text=u.text||"",u.up=[u.at={d:n}],u.done=a,u.i=0;var f=0;l();function l(){var h=u.at,p=h.d,b="",m;switch(h.i&&h.i-h.j>0&&(b+=","),r!==(m=h.k)&&(b+=JSON.stringify(m)+":"),typeof p){case"boolean":b+=""+p;break;case"string":b+=JSON.stringify(p);break;case"number":b+=isNaN(p)?"null":p;break;case"object":if(!p){b+="null";break}if(p instanceof Array){b+="[",h={i:-1,as:p,up:h,j:0},h.l=p.length,u.up.push(u.at=h);break}if(typeof(p||"").toJSON!="function"){b+="{",h={i:-1,ok:Object.keys(p).sort(),as:p,up:h,j:0},h.l=h.ok.length,u.up.push(u.at=h);break}if(m=p.toJSON()){b+=m;break}case"function":if(h.as instanceof Array){b+="null";break}default:b="",h.j++}for(u.text+=b;1+h.i>=h.l;)u.text+=h.ok?"}":"]",h=u.at=h.up;if(++h.i<h.l){if((m=h.ok)?h.d=h.as[h.k=m[h.i]]:h.d=h.as[h.i],++f<9)return l();f=0,s(l);return}u.done(r,u.text)}},typeof window!=""+r&&(window.YSON=e);try{""+r!="object"&&(t.exports=e)}catch{}typeof JSON!=""+r&&(JSON.parseAsync=e.parseAsync,JSON.stringifyAsync=e.stringifyAsync)})()}(as)),as.exports}var os,Bo;function Ip(){return Bo||(Bo=1,os=function(t){var e=Ga();t.find("a",function(){var r=[];e.map(t.list,function(n,a){a.indexOf("%1B")+1&&n&&r.push([a,n])}),r.length&&console.log(`
! ! ! WARNING ! ! !
RAD v0.2020.x has detected OLD v0.2019.x data & automatically migrating. Automatic migration will be turned OFF in future versions! If you are just developing/testing, we recommend you reset your data. Please contact us if you have any concerns.
This message should only log once.`);var s,i;r.forEach(function(n){s=n[0],i=n[1],t.list(decodeURIComponent(s),i),t.list(s,0)}),s&&t.find.bad(s)})}),os}var No;function Oh(){return No||(No=1,function(){function t(s){s=s||{},s.log=s.log||console.log,s.file=String(s.file||"radata");var i=(t.has||(t.has={}))[s.file];if(i)return i;s.max=s.max||(s.memory?s.memory*999*999:3e8)*.3,s.until=s.until||s.wait||250,s.batch=s.batch||10*1e3,s.chunk=s.chunk||1024*1024*1,s.code=s.code||{},s.code.from=s.code.from||"!",s.jsonify=!0;function n(v){return encodeURIComponent(v).replace(/\*/g,"%2A")}function a(v){return m!==v&&(!v||typeof v!="object")}var o=""+m==typeof setImmediate?setTimeout:setImmediate,c=setTimeout.turn||o,m,u=r.object,f=0;if(!s.store)return s.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!s.store.put)return s.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!s.store.get)return s.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");s.store.list,""+m!=typeof qr&&Mp();var l=JSON.parseAsync||function(v,x,_){var y;try{x(y,JSON.parse(v,_))}catch(k){x(k)}},h=function(v,x,_,y,k){if(typeof x=="function"){var A=_||{};_=x,h.read(v,_,A,k||y);return}h.save(v,x,_,y,k)};h.save=function(v,x,_,y,k){var A={key:v},M,P;A.find=function(R){var L;if(A.file=R||(R=s.code.from),k&&(k=k[R]=k[R]||{}),k&&(k.sf=k.sf||+new Date),L=h.disk[R]){A.mix(m,L);return}h.parse(R,A.mix,m,k)},A.mix=function(R,L){if(k&&(k.sml=+new Date),k&&(k.sm=k.sm||+new Date),A.err=R||A.err){_(R);return}var N=A.file=(L||"").file||A.file,I;if(!L&&N!==s.code.from){h.find.bad(N),h.save(v,x,_,y);return}if((L=h.disk[N]||(h.disk[N]=L||r())).file||(L.file=N),s.compare&&(x=s.compare(L(v),x,v,N),m===x)){_(R,-1);return}if((A.disk=L)(v,x),y&&((I=(I=L.tags||(L.tags={}))[y]||(I[y]=h.tags[y]||(h.tags[y]={})))[N]||(I[N]=h.one[y]||(h.one[y]=_)),_=null),k&&(k.st=k.st||+new Date),L.Q){_&&L.Q.push(_);return}L.Q=_?[_]:[],L.to=setTimeout(A.write,s.until)},A.write=function(){k&&(k.sto=k.sto||+new Date);var R=M=A.file,L=A.disk;P=A.q=L.Q,A.tags=L.tags,delete L.Q,delete h.disk[R],delete L.tags,h.write(R,L,A.ack,m,k)},A.ack=function(R,L){k&&(k.sa=k.sa||+new Date),k&&(k.sal=P.length);var N,I;for(var d in h.tags)if(h.tags.hasOwnProperty(d)){var g=h.tags[d];if(!((I=h.disk[M])&&(I=I.tags)&&I[g])){N=g[M],delete g[M];var w;for(var D in g)if(g.hasOwnProperty(D)){w=!0;break}w||(delete h.tags[g],N&&N(R,L))}}!P&&(P="");for(var S=P.length,E=0,O=+new Date;E<S;E++)(N=P[E])&&N(R,L);console.STAT&&console.STAT(O,+new Date-O,"rad acks",n(A.file)),console.STAT&&console.STAT(O,P.length,"rad acks #",n(A.file))},_||(_=function(R,L){}),h.find(v,A.find)},h.disk={},h.one={},h.tags={};var p=0;h.write=function(v,x,_,y,k){if(!x){_("No radix!");return}y=typeof y=="object"?y:{force:y};var A=function(){},M,P;if(A.text="",A.file=v=x.file||(x.file=v),!v){_("What file?");return}if(A.write=function(){var R=x.raw=A.text;h.disk[v=x.file||A.file||v]=x;var L=+new Date;k&&(k.wd=L),h.find.add(v,function(I){if(k&&(k.wa=+new Date),I){_(I);return}s.store.put(n(v),R,function(g,w){k&&(k.wp=+new Date),console.STAT&&console.STAT(L,f=+new Date-L,"wrote disk",JSON.stringify(v),++p,"total all writes."),_(g,w||1),x.Q||delete h.disk[v]})})},A.split=function(){var R=+new Date;k&&(k.wf=R),A.text="",A.count||(A.count=0,r.map(x,function(){A.count++})),k&&(k.wfc=A.count),A.limit=Math.ceil(A.count/2);var L=A.count;return A.count=0,k&&(k.wf1=+new Date),A.sub=r(),r.map(x,A.slice,{reverse:1}),k&&(k.wf2=+new Date),h.write(A.end,A.sub,A.both,y),k&&(k.wf3=+new Date),A.hub=r(),r.map(x,A.stop),k&&(k.wf4=+new Date),h.write(x.file,A.hub,A.both,y),k&&(k.wf5=+new Date),console.STAT&&console.STAT(R,+new Date-R,"rad split",n(x.file),L),!0},A.slice=function(R,L){if(A.sub(A.end=L,R),A.limit<=++A.count)return!0},A.stop=function(R,L){if(L>=A.end)return!0;A.hub(L,R)},A.both=function(R,L){if(k&&(k.wfd=+new Date),P){_(R||P);return}if(M){_(R,L);return}M=!0,P=R},A.each=function(R,L,N,I){if(m!==R&&A.count++,s.max<=(R||"").length)return _("Data too big!"),!0;var d=t.encode(I.length)+"#"+t.encode(N)+(m===R?"":":"+t.encode(R))+`
`;if(s.chunk<A.text.length+d.length&&1<A.count&&!y.force)return A.split();A.text+=d},s.jsonify){h.write.jsonify(A,x,_,y,k);return}r.map(x,A.each,!0)||A.write()},h.write.jsonify=function(v,x,_,y,k){var A,M=+new Date;k&&(k.w=M);try{A=JSON.stringify(x.$)}catch{_("Cannot radisk!");return}if(k&&(k.ws=+new Date),console.STAT&&console.STAT(M,+new Date-M,"rad stringified JSON"),s.chunk<A.length&&!y.force){var P=0;if(r.map(x,function(){if(P++)return!0}),P>1)return v.split()}v.text=A,v.write()},h.range=function(v,x){if(!(!v||!x)){if(m===x.start&&m===x.end||a(v))return v;var _=r();return r.map(v,function(y,k){_(k,y)},x),_("")}},function(){h.read=function(v,x,_,y){_=_||{};var k={key:v};k.find=function(A){var M;if(k.file=A||(A=s.code.from),y&&(y=y[A]=y[A]||{}),y&&(y.rf=y.rf||+new Date),M=h.disk[k.file=A]){k.check(m,M);return}h.parse(A,k.check,m,y)},k.get=function(A,M,P){if(y&&(y.rgl=+new Date),y&&(y.rg=y.rg||+new Date),k.err=A||k.err){x(A);return}var R=k.file=(M||"").file||k.file;if(!M&&R!==s.code.from){h.find.bad(R),h.read(v,x,_);return}if(M=h.disk[R]||(h.disk[R]=M),!M){x(R===s.code.from?m:"No file!");return}M.file||(M.file=R);var L=h.range(M(v),_);if(y&&(y.rr=+new Date),_.unit=M.unit,_.chunks=(_.chunks||0)+1,_.parsed=(_.parsed||0)+((P||"").parsed||_.chunks*s.chunk),_.more=1,_.next=m,r.map(h.list,function(g,w){if(!(!g||R===w))return _.next=w,1},_.reverse?{reverse:1,end:R}:{start:R}),y&&(y.rl=+new Date),_.next||(_.more=0),_.next&&(!_.reverse&&(v<_.next&&_.next.indexOf(v)!=0||m!==_.end&&(_.end||"")<_.next)&&(_.more=0),_.reverse&&(v>_.next&&v.indexOf(_.next)!=0||m!==_.start&&(_.start||"")>_.next&&R<=_.start)&&(_.more=0)),!_.more){x(k.err,L,_);return}if(L&&x(k.err,L,_),!(_.parsed>=_.limit)){var N=+new Date;y&&(y.rm=N);var I=_.next;o(function(){console.STAT&&console.STAT(N,+new Date-N,"rad more"),h.parse(I,k.check)},0)}},k.check=function(A,M,P){if(k.get(A,M,P),!(!M||M.check)){M.check=1;var R=+new Date;(P||(P={})).file||(P.file=k.file),r.map(M,function(L,N){h.find(N,function(I){if((I||(I=s.code.from))!==P.file){var d=(""+Math.random()).slice(-3);c(function(){h.save(N,L,function g(w,D){if(w){h.save(N,L,g);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",d,n(N),n(P.file),n(I))})},0)}})}),console.STAT&&console.STAT(R,+new Date-R,"rad check")}},h.find(v||(_.reverse?_.end||"":_.start||""),k.find)}}(),function(){var v=0,x={},_="";h.parse=function(y,k,A,M){var P;if(!y)return k();if(P=x[y]){P.push(k);return}P=x[y]=[k];var R=function(){},L={file:y};(R.disk=r()).file=y,R.read=function(I,d){if(M&&(M.rpg=+new Date),console.STAT&&console.STAT(N,+new Date-N,"read disk",JSON.stringify(y),++v,"total all parses."),(R.err=I)||(R.not=!d)){delete x[y],R.map(P,R.ack);return}if(typeof d!="string"){try{s.max<=d.length?R.err="Chunk too big!":d=d.toString()}catch(g){R.err=g}if(R.err){delete x[y],R.map(P,R.ack);return}}if(L.parsed=d.length,M&&(M.rpl=L.parsed),M&&(M.rpa=P.length),N=+new Date,!(s.jsonify||d[0]==="{")){R.radec(I,d);return}l(d,function(g,w){if(!g){delete x[y],R.disk.$=w,console.STAT&&(f=+new Date-N)>9&&console.STAT(N,f,"rad parsed JSON"),M&&(M.rpd=+new Date),R.map(P,R.ack);return}if(d[0]==="{"){delete x[y],R.err="JSON error!",R.map(P,R.ack);return}R.radec(g,d)})},R.map=function(){if(!(!P||!P.length)){for(var I=+new Date,d=R.err,g=R.not?m:R.disk,w=0,D;w<9&&(D=P[w++]);)D(d,g,L);console.STAT&&console.STAT(I,+new Date-I,"rad packs",n(y)),console.STAT&&console.STAT(I,w,"rad packs #",n(y)),(P=P.slice(w)).length&&c(R.map,0)}},R.ack=function(I){if(I){if(R.err||R.not){I(R.err,m,L);return}I(m,R.disk,L)}},R.radec=function(I,d){delete x[y],N=+new Date;var g=R.split(d),w=[],D,S,E;if(!g||g[1]!==0){R.err="File '"+y+"' does not have root radix! ",R.map(P,R.ack);return}for(;g;)S=E=m,D=g[1],g=R.split(g[2])||"",g[0]=="#"&&(S=g[1],w=w.slice(0,D),D<=w.length&&w.push(S)),g=R.split(g[2])||"",g[0]!=`
`&&((g[0]=="="||g[0]==":")&&(E=g[1]),m!==S&&m!==E&&R.disk(w.join(""),E),g=R.split(g[2]));console.STAT&&console.STAT(N,+new Date-N,"parsed RAD"),R.map(P,R.ack)},R.split=function(I){if(I){var d=[],g={},w=-1,D="";if(w=I.indexOf(_),!!I[w])return D=I.slice(0,w),d[0]=D,d[1]=t.decode(I.slice(w),g),d[2]=I.slice(w+g.i),d}},h.disk&&(A||(A=(h.disk[y]||"").raw));var N=+new Date;if(M&&(M.rp=N),A)return c(function(){R.read(m,A)},0);s.store.get(n(y),R.read)}}(),function(){var v,x="",_;h.find=function(A,M){if(!v){if(_){_.push([A,M]);return}_=[[A,M]],h.parse(x,y);return}r.map(h.list=v,function(P,R){if(P)return M(R)||!0},{reverse:1,end:A})||M(s.code.from)},h.find.add=function(A,M){var P=v(A);if(P||A===x){M(m,1);return}v(A,1),M.found=(M.found||0)+1,h.write(x,v,function(R,L){if(R){M(R);return}M.found=(M.found||0)-1,M.found===0&&M(m,1)},!0)},h.find.bad=function(A,M){v(A,0),h.write(x,v,M||b)};function y(A,M){if(A){s.log("list",A),setTimeout(function(){h.parse(x,y)},1e3);return}if(M){k(M);return}if(v=v||M||r(),!s.store.list){k(v);return}s.store.list(function(P){if(!P){k(v);return}h.find.add(P,b)})}function k(A,M){v=v||A,v.file=x,M=_,_=null,u(M,function(P){h.find(P[0],P[1])})}}();try{!e.window&&Ip()(h)}catch{}var b=function(){},m;return t.has[s.file]=h,h}if(function(){var s="";t.encode=function(i,n,a){a=a||s;var o=a,c;if(typeof i=="string"){for(var u=i.indexOf(a);u!=-1;)o+=a,u=i.indexOf(a,u+1);return o+'"'+i+a}else{if(i&&i["#"]&&Object.keys(i).length==1)return o+"#"+c+o;if(typeof i=="number")return o+"+"+(i||0)+o;if(i===null)return o+" "+o;if(i===!0)return o+"+"+o;if(i===!1)return o+"-"+o}},t.decode=function(i,n,a){a=a||s;var o="",c=-1,u=0,f,l;if(a===i[0]){for(;a===i[++c];)++u;for(l=i[f=u]||!0;--u>=0;)c=i.indexOf(a,c+1);if(c==-1&&(c=i.length),o=i.slice(f+1,c),n&&(n.i=c+1),l==='"')return o;if(l==="#")return{"#":o};if(l==="+")return o.length===0?!0:parseFloat(o);if(l===" ")return null;if(l==="-")return!1}}}(),typeof window<"u"){var e=window.Gun,r=window.Radix;window.Radisk=t}else{var e=dn(),r=Ga();try{ss.exports=t}catch{}}t.Radix=r}()),ss.exports}Oh();var zo={},jo;function Pp(){if(jo)return zo;jo=1;var t={},e=typeof window<"u"?window.Gun:dn();return e.on("create",function(r){e.TESTING&&(r.opt.file="radatatest"),this.to.next(r);var s=r.opt,i;if(!(s.rad===!1||s.radisk===!1)&&!(i+""!=typeof process&&""+(t||"").RAD=="false")){var n=e.window&&e.window.Radisk||Oh(),a=n.Radix,o=n(s),c="\x1B",u=0;r.on("put",function(l){if(this.to.next(l),!(l._||"").rad){var h=l["#"],p=l.put,b=p["#"],m=p["."],v=p[":"],x=p[">"],_=(l._||"").DBG;_&&(_.sp=_.sp||+new Date);var y=(l._||"").RPS||((l._||"").RPS=+new Date);o(b+c+m,{":":v,">":x},function(k,A){if(_&&(_.spd=_.spd||+new Date),console.STAT&&console.STAT(y,+new Date-y,"put"),k){r.on("in",{"@":h,err:k,DBG:_});return}r.on("in",{"@":h,ok:A,DBG:_})},!1,_&&(_.r=_.r||{})),_&&(_.sps=_.sps||+new Date)}}),r.on("get",function(l){this.to.next(l);var h=l._||"",p=h.DBG=l.DBG;p&&(p.sg=+new Date);var b=l["#"],m=l.get,v=l.get["#"],x=l.get["."]||"",_={},y,k,A,M;if(typeof v=="string"?k=v:v&&(i!==(A=v["*"])&&(_.limit=M=1),i!==v[">"]&&(_.start=v[">"]),i!==v["<"]&&(_.end=v["<"]),k=M?""+A:A||v["="],M=null),k&&!_.limit&&(typeof x=="string"?k=k+c+(_.atom=x):x&&(i!==x[">"]&&(_.start=x[">"],_.limit=1),i!==x["<"]&&(_.end=x["<"],_.limit=1),i!==(A=x["*"])&&(_.limit=M=1),k&&(k=k+c+(M?""+(A||""):A||(_.atom=x["="]||""))))),((A=m["%"])||_.limit)&&(_.limit=A<=(_.pack||1e3*100)?A:1),(x["-"]||(v||{})["-"]||m["-"])&&(_.reverse=!0),(A=(r.next||"")[v])&&A.put){if(_.atom){if(A=(A.next||"")[_.atom],A&&A.root&&A.root.graph&&A.root.graph[v]&&A.root.graph[v][_.atom])return}else if(A&&A.rad)return}var P=e.state(),R=+new Date,L=0;p&&(p.sgm=R),o(k||"",function(I,d,g){p&&(p.sgr=+new Date),p&&(p.sgi=g);try{s.store.stats.get.time[f%50]=+new Date-R,++f,s.store.stats.get.count++,I&&(s.store.stats.get.err=I)}catch{}console.STAT&&console.STAT(R,+new Date-R,"got",JSON.stringify(k)),R=+new Date,g=g||"";var w,D;if(g.unit&&d&&i!==(w=d[":"])&&i!==(D=d[">"])){var S=k.split(c),E=S[0],O=S[1];(y=y||{})[E]=e.state.ify(y[E],O,D,w,E),r.$.get(E).get(O)._.rad=P}else d&&(typeof d!="string"&&(_.atom?d=i:a.map(d,N,_)),!y&&d&&N(d,""),!_.atom&&!x&typeof v=="string"&&!_.limit&&!_.more&&(r.$.get(v)._.rad=P));p&&(p.sgp=+new Date),console.STAT&&(u=+new Date-R)>9&&(console.STAT(R,u,"got prep time"),console.STAT(R,L,"got prep #")),L=0,R=+new Date;var T=function(){};T.faith=!0,T.rad=m,r.on("in",{"@":b,put:y,"%":g.more?1:i,err:I||i,_:T,DBG:p}),console.STAT&&(u=+new Date-R)>9&&console.STAT(R,u,"got emit",Object.keys(y||{}).length),y=i},_,p&&(p.r=p.r||{})),p&&(p.sgd=+new Date),console.STAT&&(u=+new Date-R)>9&&console.STAT(R,u,"get call");function N(I,d,g,w){if(L++,!!I){d=(k+d).split(c);var D=d.slice(0,1)[0];if(d=d.slice(-1)[0],_.limit&&_.limit<=_.count)return!0;var S,E,O=D,T=d;if(typeof I!="string"){S=I[":"],E=I[">"],(y=y||{})[O]=e.state.ify(y[O],T,E,S,O),_.count=(_.count||0)+((S||"").length||9);return}_.count=(_.count||0)+I.length;var C=I.lastIndexOf(">"),F=n.decode(I.slice(C+1),null,c);I=n.decode(I.slice(0,C),null,c),(y=y||{})[D]=e.state.ify(y[D],d,F,I,D)}}}),e.valid,(s.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var f=0}}),zo}Pp();var us={exports:{}},qo;function Op(){return qo||(qo=1,function(){function t(r){r=r||{},r.file=String(r.file||"radata");var s=t[r.file],i=null,n;if(s)return console.log("Warning: reusing same IndexedDB store and options as 1st."),t[r.file];s=t[r.file]=function(){};try{r.indexedDB=r.indexedDB||t.indexedDB||indexedDB}catch{}try{if(!r.indexedDB||location.protocol=="file:"){var a=s.d||(s.d={});return s.put=function(o,c,u){a[o]=c,setTimeout(function(){u(null,1)},250)},s.get=function(o,c){setTimeout(function(){c(null,a[o]||n)},5)},console.log("Warning: No indexedDB exists to persist data to!"),s}}catch{}return s.start=function(){var o=indexedDB.open(r.file,1);o.onupgradeneeded=function(c){c.target.result.createObjectStore(r.file)},o.onsuccess=function(){i=o.result},o.onerror=function(c){console.log(c||1)}},s.start(),s.put=function(o,c,u){if(!i){setTimeout(function(){s.put(o,c,u)},1);return}var f=i.transaction([r.file],"readwrite"),l=f.objectStore(r.file),h=l.put(c,""+o);h.onsuccess=l.onsuccess=f.onsuccess=function(){u(null,1)},h.onabort=l.onabort=f.onabort=function(p){u(p||"put.tx.abort")},h.onerror=l.onerror=f.onerror=function(p){u(p||"put.tx.error")}},s.get=function(o,c){if(!i){setTimeout(function(){s.get(o,c)},9);return}var u=i.transaction([r.file],"readonly"),f=u.objectStore(r.file),l=f.get(""+o);l.onsuccess=function(){c(null,l.result)},l.onabort=function(h){c(h||4)},l.onerror=function(h){c(h||5)}},setInterval(function(){i&&i.close(),i=null,s.start()},1e3*15),s}if(typeof window<"u")(t.window=window).RindexedDB=t,t.indexedDB=window.indexedDB;else try{us.exports=t}catch{}try{var e=t.window.Gun||dn();e.on("create",function(r){this.to.next(r),r.opt.store=r.opt.store||t(r.opt)})}catch{}}()),us.exports}Op();var Uo={},$o;function Fp(){return $o||($o=1,function(){var t=typeof window<"u"?window.Gun:dn();t.on("opt",function(e){this.to.next(e);var r=e.opt;if(e.once||!t.Mesh||r.RTCPeerConnection===!1)return;var s;typeof window<"u"&&(s=window),typeof cr<"u"&&(s=cr),s=s||{};var i=r.RTCPeerConnection||s.RTCPeerConnection||s.webkitRTCPeerConnection||s.mozRTCPeerConnection,n=r.RTCSessionDescription||s.RTCSessionDescription||s.webkitRTCSessionDescription||s.mozRTCSessionDescription,a=r.RTCIceCandidate||s.RTCIceCandidate||s.webkitRTCIceCandidate||s.mozRTCIceCandidate;if(!i||!n||!a)return;r.RTCPeerConnection=i,r.RTCSessionDescription=n,r.RTCIceCandidate=a,r.rtc=r.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},r.rtc.dataChannel=r.rtc.dataChannel||{ordered:!1,maxRetransmits:2},r.rtc.sdp=r.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},r.rtc.max=r.rtc.max||55,r.rtc.room=r.rtc.room||t.window&&(location.hash.slice(1)||location.pathname.slice(1)),r.announce=function(u){r.rtc.start=+new Date,e.$.get("/RTC/"+r.rtc.room+"<?99").get("+").put(r.pid,function(f){!f.ok||!f.ok.rtc||c(f)},{acks:r.rtc.max}).on(function(f,l,h){f===r.pid||r.rtc.start>h.put[">"]||c({"#":""+h["#"],ok:{rtc:{id:f}}})})};var o=r.mesh=r.mesh||t.Mesh(e);e.on("create",function(u){this.to.next(u),setTimeout(r.announce,1)});function c(u){if(this&&this.off&&this.off(),!!u.ok){var f=u.ok.rtc,l,h;if(!(!f||!f.id||f.id===r.pid)){if(h=f.answer)return!(l=r.peers[f.id]||c[f.id])||l.remoteSet?void 0:(h.sdp=h.sdp.replace(/\\r\\n/g,`\r
`),l.setRemoteDescription(l.remoteSet=new r.RTCSessionDescription(h)));if(h=f.candidate)return l=r.peers[f.id]||c[f.id]||c({ok:{rtc:{id:f.id}}}),l.addIceCandidate(new r.RTCIceCandidate(h));if(!c[f.id]){(l=new r.RTCPeerConnection(r.rtc)).id=f.id;var p=l.wire=l.createDataChannel("dc",r.rtc.dataChannel);if(c[f.id]=l,p.to=setTimeout(function(){delete c[f.id]},1e3*60),p.onclose=function(){o.bye(l)},p.onerror=function(b){},p.onopen=function(b){delete c[f.id],o.hi(l)},p.onmessage=function(b){b&&o.hear(b.data||b,l)},l.onicecandidate=function(b){b.candidate&&e.on("out",{"@":u["#"],ok:{rtc:{candidate:b.candidate,id:r.pid}}})},l.ondatachannel=function(b){var m=b.channel;m.onmessage=p.onmessage,m.onopen=p.onopen,m.onclose=p.onclose},h=f.offer){f.offer.sdp=f.offer.sdp.replace(/\\r\\n/g,`\r
`),l.setRemoteDescription(new r.RTCSessionDescription(h)),l.createAnswer(function(b){l.setLocalDescription(b),e.on("out",{"@":u["#"],ok:{rtc:{answer:b,id:r.pid}}})},function(){},r.rtc.sdp);return}return l.createOffer(function(b){l.setLocalDescription(b),e.on("out",{"@":u["#"],"#":e.ask(c),ok:{rtc:{offer:b,id:r.pid}}})},function(){},r.rtc.sdp),l}}}}})}()),Uo}Fp();const Rp="https://peer.wallie.io/gun",Lp={space:"Space",chat:"Chat",posts:"Posts",rooms:"Rooms",files:"Files"},Bp={pub:"McUmKdO7NtwX1vUrZiNvzgnPVPwgqKGV1PNATxIxTuM.iXExKjIByXeVGosHHeUzaJyrcthdc83O9HuX6rYX0gs",hosts:{"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo":{enc:'SEA{"ct":"169OGBU2H9XKmaZLO+s8Pc5+fSaTrrSB4OVFm33CGh+VwxhEu0x9U7ir8m0LxXbcBEVt6MZ7CEPYtIL12Stwi0LCG6a139JEDSWwUZFxE/b/y6HZtn/V2gr9G4xL/TcdWHF2D+r+bBMHqJMBXKoIofz3DH/eArW8IgAIWm+VBmJYkejZ1w8WW9/1qx3RFVIITXeMB5FI8VzY7y9DGCyIDwMNVSeHDbjenK3oDz2qS48Gem13lHv/behM+vZNug7eL7WaF07sf962p0oX9mF0Y0fMLossIFOT8QPjeV9ZcdkMl4ngc+W2HN+WvxldE5dy2yock/15N77X6VQ5111ITDwJHkhXjp4Ro94NeKujb3yh4H8vXbQOeJPPJyQTZ3G4yF4Nw65PKIghIwdBNdsiRQ1QtjxQvaetaK5j5+0=","iv":"dc92+kgMorDWh4I0ntGb","s":"MV6T397GhmNe"}',profile:'SEA{"m":{"c":"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo","w":{"*":"profile"}},"s":"j5LkQNRO7KX/PAwK4vvg/SGg2zHp6np2Bq6Ge9RgJrkSBmXPMxRJbsZncBqrlwWYbaUFtb4vcUlzDq9onzVSLA=="}',features:'SEA{"m":{"c":"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo","w":{"*":"features"}},"s":"lUXJ84tvirAhnSwWgZGg2QfT0S8D7Xe7D0Bbae24pcX6D/GZuiq/lYPFnr+4ym/6bteJgdWV2U+E2q/1AMblsA=="}',hosts:'SEA{"m":{"c":"TjJboYZipmwZ59ebrbIfL34nh1TJcOUU8-0XYCZjLbk.5ULMwx29866hdlG-3xM-g-m33QtcZopGOzA85mDDiPo","w":{"*":"hosts"}},"s":"Aq15hOjPHe2Q73pPa3OasqzflU1b41tmVC7mZwX2GQJujI7VYLR85W4zszeu9oEnLfcRf5bgu0aOngJrvLT9KA=="}'}},features:{space:'SEA{"m":{"c":"*","w":{"*":"space","+":"*"}},"s":"7N0iKUMsr2LMVyu7WWBknTDUZSTJjsz9vFFkUwNpjdhiAWfga/GIL2HJg6YfbAnCcWKdZCi4fQYLPsoR9LILIg=="}',chat:'SEA{"m":{"c":"*","w":{"*":"chat","+":"*"}},"s":"2Nv9jI4I1ixSuGZnLFesGoveoioftd2yjIDOLwCGTmqAoX5KJs9f8REj1lAvYwZqm8jX6v36wew7XOwlBG1/IA=="}',posts:'SEA{"m":{"c":"*","w":{"*":"posts","+":"*"}},"s":"iDKLG8/PkTrhb4uO+aMA5SB6kt/GdOnrnlbEG79OL66v+miHo/Pa1YO+/4yF5f5Y5YSJcskTnoNqi3KW0pFJuA=="}',rooms:'SEA{"m":{"c":"*","w":{"*":"rooms","+":"*"}},"s":"wIwGepdJmjNOZHA4ujL624PLGu+hLRjgkg2vSm5mRCqN208sKWRqEsMrM44TFfVz6p0wNkmQvdH6kb2037zRwg=="}',files:'SEA{"m":{"c":"*","w":{"*":"files","+":"*"}},"s":"rni6jM8eMk9lSDmNtroe4pqknBaXTUGHRR/9tEf2nnyx/v+qO465qk+pJJdeKlul0hanLujtL3TH+AE3e5W03A=="}'}},an={relay:Rp,features:Lp,room:Bp},Fh=an.relay,Qe=Ie({list:[],peer:Yt("peer",Fh),hostname:we(()=>{var t;return((t=new URL(Qe.peer))==null?void 0:t.hostname)||""}),status:"offline",started:0,pulse:0,lag:0,diff:we(()=>Qe.pulse-Qe.started),age:we(()=>Ih(Qe.diff)),delay:we(()=>Date.now()-Qe.pulse),blink:!1});it(()=>Qe.pulse,(t,e)=>{Qe.blink=!Qe.blink,Qe.lag=t-e-500});function Np(t){Qe.peer=t,setTimeout(()=>{window.location.reload()})}function zp(){Qe.peer=Fh,setTimeout(()=>{window.location.reload()})}function cv(){const t=Be();return Qe.pulse==0&&(Qe!=null&&Qe.hostname)&&t.get(Qe==null?void 0:Qe.hostname).map().on((e,r)=>{try{Qe[r]=e}catch(s){console.log(s)}}),{relay:Qe,setPeer:Np,resetPeer:zp}}var ui={exports:{}};ui.exports;var Ho;function jp(){return Ho||(Ho=1,function(t){(function(){function e(s,i){return i?qr(s):s.slice?e[n(s)]:function(a,o){s(a={exports:{}}),e[n(o)]=a.exports};function n(a){return a.split("/").slice(-1).toString().replace(".js","")}}var r=t;e(function(s){typeof self<"u"&&(s.window=self),typeof window<"u"&&(s.window=window);var i=s.window||s,n,a=i.SEA||{};(a.window=s.window)&&(a.window.SEA=a);try{n+""!=typeof r&&(r.exports=a)}catch{}s.exports=a})(e,"./root"),e(function(s){var i=e("./root");try{i.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(e,"./https"),e(function(s){var i;if(i+""==typeof btoa){if(i+""==typeof Buffer)try{cr.Buffer=e("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}cr.btoa=function(n){return Buffer.from(n,"binary").toString("base64")},cr.atob=function(n){return Buffer.from(n,"base64").toString("binary")}}})(e,"./base64"),e(function(s){e("./base64");function i(){}Object.assign(i,{from:Array.from}),i.prototype=Object.create(Array.prototype),i.prototype.toString=function(n,a,o){n=n||"utf8",a=a||0;const c=this.length;if(n==="hex"){const u=new Uint8Array(this);return[...Array((o&&o+1||c)-a).keys()].map(f=>u[f+a].toString(16).padStart(2,"0")).join("")}if(n==="utf8")return Array.from({length:(o||c)-a},(u,f)=>String.fromCharCode(this[f+a])).join("");if(n==="base64")return btoa(this)},s.exports=i})(e,"./array"),e(function(s){e("./base64");var i=e("./array");function n(...a){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),n.from(...a)}n.prototype=Object.create(Array.prototype),Object.assign(n,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const a=arguments[0];let o;if(typeof a=="string"){const u=arguments[1]||"utf8";if(u==="hex"){const f=a.match(/([\da-fA-F]{2})/g).map(l=>parseInt(l,16));if(!f||!f.length)throw new TypeError("Invalid first argument for type 'hex'.");o=i.from(f)}else if(u==="utf8"||u==="binary"){const f=a.length,l=new Uint16Array(f);Array.from({length:f},(h,p)=>l[p]=a.charCodeAt(p)),o=i.from(l)}else if(u==="base64"){const f=atob(a),l=f.length,h=new Uint8Array(l);Array.from({length:l},(p,b)=>h[b]=f.charCodeAt(b)),o=i.from(h)}else u==="binary"?o=i.from(a):console.info("SafeBuffer.from unknown encoding: "+u);return o}if(a.byteLength,a.byteLength?a.byteLength:a.length){let u;return a instanceof ArrayBuffer&&(u=new Uint8Array(a)),i.from(u||a)}},alloc(a,o=0){return i.from(new Uint8Array(Array.from({length:a},()=>o)))},allocUnsafe(a){return i.from(new Uint8Array(Array.from({length:a})))},concat(a){if(!Array.isArray(a))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return i.from(a.reduce((o,c)=>o.concat(Array.from(c)),[]))}}),n.prototype.from=n.from,n.prototype.toString=i.prototype.toString,s.exports=n})(e,"./buffer"),e(function(s){const i=e("./root"),n={Buffer:e("./buffer")};var a={},o;if(JSON.parseAsync=JSON.parseAsync||function(u,f,l){var h;try{f(h,JSON.parse(u,l))}catch(p){f(p)}},JSON.stringifyAsync=JSON.stringifyAsync||function(u,f,l,h){var p;try{f(p,JSON.stringify(u,l,h))}catch(b){f(b)}},n.parse=function(u,f){return new Promise(function(l,h){JSON.parseAsync(u,function(p,b){p?h(p):l(b)},f)})},n.stringify=function(u,f,l){return new Promise(function(h,p){JSON.stringifyAsync(u,function(b,m){b?p(b):h(m)},f,l)})},i.window&&(n.crypto=i.window.crypto||i.window.msCrypto,n.subtle=(n.crypto||a).subtle||(n.crypto||a).webkitSubtle,n.TextEncoder=i.window.TextEncoder,n.TextDecoder=i.window.TextDecoder,n.random=u=>n.Buffer.from(n.crypto.getRandomValues(new Uint8Array(n.Buffer.alloc(u))))),!n.TextDecoder){const{TextEncoder:u,TextDecoder:f}=e((o+""==typeof r?".":"")+"./lib/text-encoding",1);n.TextDecoder=f,n.TextEncoder=u}if(!n.crypto)try{var c=e("crypto",1);Object.assign(n,{crypto:c,random:f=>n.Buffer.from(c.randomBytes(f))});const{Crypto:u}=e("@peculiar/webcrypto",1);n.ossl=n.subtle=new u({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}s.exports=n})(e,"./shim"),e(function(s){var i=e("./root"),n=e("./shim"),a={};a.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},a.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},a.ecdh={name:"ECDH",namedCurve:"P-256"},a.jwk=function(o,c){o=o.split(".");var u=o[0],f=o[1],l={kty:"EC",crv:"P-256",x:u,y:f,ext:!0};return l.key_ops=c?["sign"]:["verify"],c&&(l.d=c),l},a.keyToJwk=function(o){return{kty:"oct",k:o.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},a.recall={validity:12*60*60,hook:function(o){return o}},a.check=function(o){return typeof o=="string"&&o.slice(0,4)==="SEA{"},a.parse=async function(c){try{var u=typeof c=="string";return u&&c.slice(0,4)==="SEA{"&&(c=c.slice(3)),u?await n.parse(c):c}catch{}return c},i.opt=a,s.exports=a})(e,"./settings"),e(function(s){var i=e("./shim");s.exports=async function(n,a){var o=typeof n=="string"?n:await i.stringify(n),c=await i.subtle.digest({name:a||"SHA-256"},new i.TextEncoder().encode(o));return i.Buffer.from(c)}})(e,"./sha256"),e(function(s){const i=e("./shim"),n=i.subtle,a=i.ossl?i.ossl:n,o=c=>a.digest({name:"SHA-1"},new ArrayBuffer(c));s.exports=o})(e,"./sha1"),e(function(s){var i=e("./root"),n=e("./shim"),a=e("./settings"),o=e("./sha256"),c;i.work=i.work||(async(u,f,l,h)=>{try{var p=(f||{}).epub||f;if(h=h||{},p instanceof Function&&(l=p,p=c),u=typeof u=="string"?u:await n.stringify(u),(h.name||"").toLowerCase().slice(0,3)==="sha"){var b=n.Buffer.from(await o(u,h.name),"binary").toString(h.encode||"base64");if(l)try{l(b)}catch(_){console.log(_)}return b}p=p||n.random(9);var m=await(n.ossl||n.subtle).importKey("raw",new n.TextEncoder().encode(u),{name:h.name||"PBKDF2"},!1,["deriveBits"]),v=await(n.ossl||n.subtle).deriveBits({name:h.name||"PBKDF2",iterations:h.iterations||a.pbkdf2.iter,salt:new n.TextEncoder().encode(h.salt||p),hash:h.hash||a.pbkdf2.hash},m,h.length||a.pbkdf2.ks*8);u=n.random(u.length);var x=n.Buffer.from(v,"binary").toString(h.encode||"base64");if(l)try{l(x)}catch(_){console.log(_)}return x}catch(_){if(console.log(_),i.err=_,i.throw)throw _;l&&l();return}}),s.exports=i.work})(e,"./work"),e(function(s){var i=e("./root"),n=e("./shim");e("./settings"),i.name=i.name||(async(a,o)=>{try{if(a)try{a()}catch(c){console.log(c)}return}catch(c){if(console.log(c),i.err=c,i.throw)throw c;a&&a();return}}),i.pair=i.pair||(async(a,o)=>{try{var c=n.ossl||n.subtle,u=await n.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async h=>{var p={};p.priv=(await n.subtle.exportKey("jwk",h.privateKey)).d;var b=await n.subtle.exportKey("jwk",h.publicKey);return p.pub=b.x+"."+b.y,p});try{var f=await c.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async h=>{var p={};p.epriv=(await c.exportKey("jwk",h.privateKey)).d;var b=await c.exportKey("jwk",h.publicKey);return p.epub=b.x+"."+b.y,p})}catch(h){if(i.window)throw h;if(h=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw h}f=f||{};var l={pub:u.pub,priv:u.priv,epub:f.epub,epriv:f.epriv};if(a)try{a(l)}catch(h){console.log(h)}return l}catch(h){if(console.log(h),i.err=h,i.throw)throw h;a&&a();return}}),s.exports=i.pair})(e,"./pair"),e(function(s){var i=e("./root"),n=e("./shim"),a=e("./settings"),o=e("./sha256"),c;i.sign=i.sign||(async(u,f,l,h)=>{try{if(h=h||{},!(f||h).priv){if(!i.I)throw"No signing key.";f=await i.I(null,{what:u,how:"sign",why:h.why})}if(c===u)throw"`undefined` not allowed.";var p=await a.parse(u),b=h.check=h.check||p;if(i.verify&&(i.opt.check(b)||b&&b.s&&b.m)&&c!==await i.verify(b,f)){var k=await a.parse(b);if(h.raw||(k="SEA"+await n.stringify(k)),l)try{l(k)}catch(M){console.log(M)}return k}var m=f.pub,v=f.priv,x=a.jwk(m,v),_=await o(p),y=await(n.ossl||n.subtle).importKey("jwk",x,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(A=>(n.ossl||n.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},A,new Uint8Array(_))),k={m:p,s:n.Buffer.from(y,"binary").toString(h.encode||"base64")};if(h.raw||(k="SEA"+await n.stringify(k)),l)try{l(k)}catch(A){console.log(A)}return k}catch(A){if(console.log(A),i.err=A,i.throw)throw A;l&&l();return}}),s.exports=i.sign})(e,"./sign"),e(function(s){var i=e("./root"),n=e("./shim"),a=e("./settings"),o=e("./sha256"),c;i.verify=i.verify||(async(l,h,p,b)=>{try{var m=await a.parse(l);if(h===!1){var v=await a.parse(m.m);if(p)try{p(v)}catch(L){console.log(L)}return v}b=b||{};var x=h.pub||h,_=i.opt.slow_leak?await i.opt.slow_leak(x):await(n.ossl||n.subtle).importKey("jwk",a.jwk(x),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),y=await o(m.m),k,A,M,P;try{if(k=n.Buffer.from(m.s,b.encode||"base64"),A=new Uint8Array(k),M=await(n.ossl||n.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},_,A,new Uint8Array(y)),!M)throw"Signature did not match."}catch{if(i.opt.fallback)return await i.opt.fall_verify(l,h,p,b)}var R=M?await a.parse(m.m):c;if(p)try{p(R)}catch(L){console.log(L)}return R}catch(L){if(console.log(L),i.err=L,i.throw)throw L;p&&p();return}}),s.exports=i.verify;var u={};i.opt.slow_leak=l=>{if(u[l])return u[l];var h=a.jwk(l);return u[l]=(n.ossl||n.subtle).importKey("jwk",h,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),u[l]};var f=i.opt;i.opt.fall_verify=async function(l,h,p,b,m){if(m===i.opt.fallback)throw"Signature did not match";m=m||1;var v=l||"";l=i.opt.unpack(l)||l;var x=await a.parse(l),_=h.pub||h,y=await i.opt.slow_leak(_),k=m<=i.opt.fallback?n.Buffer.from(await n.subtle.digest({name:"SHA-256"},new n.TextEncoder().encode(await a.parse(x.m)))):await o(x.m),A,M,P;try{if(A=n.Buffer.from(x.s,b.encode||"base64"),M=new Uint8Array(A),P=await(n.ossl||n.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},y,M,new Uint8Array(k)),!P)throw"Signature did not match."}catch{try{A=n.Buffer.from(x.s,"utf8"),M=new Uint8Array(A),P=await(n.ossl||n.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},y,M,new Uint8Array(k))}catch{if(!P)throw"Signature did not match."}}var R=P?await a.parse(x.m):c;if(f.fall_soul=v["#"],f.fall_key=v["."],f.fall_val=l,f.fall_state=v[">"],p)try{p(R)}catch(L){console.log(L)}return R},i.opt.fallback=2})(e,"./verify"),e(function(s){var i=e("./shim"),n=e("./settings"),a=e("./sha256");const o=async(c,u,f)=>{const l=c+(u||i.random(8)).toString("utf8"),h=i.Buffer.from(await a(l),"binary"),p=n.keyToJwk(h);return await i.subtle.importKey("jwk",p,{name:"AES-GCM"},!1,["encrypt","decrypt"])};s.exports=o})(e,"./aeskey"),e(function(s){var i=e("./root"),n=e("./shim");e("./settings");var a=e("./aeskey"),o;i.encrypt=i.encrypt||(async(c,u,f,l)=>{try{l=l||{};var h=(u||l).epriv||u;if(o===c)throw"`undefined` not allowed.";if(!h){if(!i.I)throw"No encryption key.";u=await i.I(null,{what:c,how:"encrypt",why:l.why}),h=u.epriv||u}var p=typeof c=="string"?c:await n.stringify(c),b={s:n.random(9),iv:n.random(15)},m=await a(h,b.s,l).then(x=>n.subtle.encrypt({name:l.name||"AES-GCM",iv:new Uint8Array(b.iv)},x,new n.TextEncoder().encode(p))),v={ct:n.Buffer.from(m,"binary").toString(l.encode||"base64"),iv:b.iv.toString(l.encode||"base64"),s:b.s.toString(l.encode||"base64")};if(l.raw||(v="SEA"+await n.stringify(v)),f)try{f(v)}catch(x){console.log(x)}return v}catch(x){if(console.log(x),i.err=x,i.throw)throw x;f&&f();return}}),s.exports=i.encrypt})(e,"./encrypt"),e(function(s){var i=e("./root"),n=e("./shim"),a=e("./settings"),o=e("./aeskey");i.decrypt=i.decrypt||(async(c,u,f,l)=>{try{l=l||{};var h=(u||l).epriv||u;if(!h){if(!i.I)throw"No decryption key.";u=await i.I(null,{what:c,how:"decrypt",why:l.why}),h=u.epriv||u}var p=await a.parse(c),b,m,v;try{b=n.Buffer.from(p.s,l.encode||"base64"),m=n.Buffer.from(p.iv,l.encode||"base64"),v=n.Buffer.from(p.ct,l.encode||"base64");var x=await o(h,b,l).then(y=>n.subtle.decrypt({name:l.name||"AES-GCM",iv:new Uint8Array(m),tagLength:128},y,new Uint8Array(v)))}catch{if(l.encode==="utf8")throw"Could not decrypt";if(i.opt.fallback)return l.encode="utf8",await i.decrypt(c,u,f,l)}var _=await a.parse(new n.TextDecoder("utf8").decode(x));if(f)try{f(_)}catch(y){console.log(y)}return _}catch(y){if(console.log(y),i.err=y,i.throw)throw y;f&&f();return}}),s.exports=i.decrypt})(e,"./decrypt"),e(function(s){var i=e("./root"),n=e("./shim");e("./settings"),i.secret=i.secret||(async(o,c,u,f)=>{try{if(f=f||{},!c||!c.epriv||!c.epub){if(!i.I)throw"No secret mix.";c=await i.I(null,{what:o,how:"secret",why:f.why})}var l=o.epub||o,h=c.epub,p=c.epriv,b=n.ossl||n.subtle,m=a(l),v=Object.assign({public:await b.importKey(...m,!0,[])},{name:"ECDH",namedCurve:"P-256"}),x=a(h,p),_=await b.importKey(...x,!1,["deriveBits"]).then(async k=>{var A=await b.deriveBits(v,k,256),M=new Uint8Array(A),P=await b.importKey("raw",M,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return b.exportKey("jwk",P).then(({k:R})=>R)}),y=_;if(u)try{u(y)}catch(k){console.log(k)}return y}catch(k){if(console.log(k),i.err=k,i.throw)throw k;u&&u();return}});var a=(o,c)=>{var[u,f]=o.split("."),l=c?{d:c}:{};return["jwk",Object.assign(l,{x:u,y:f,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};s.exports=i.secret})(e,"./secret"),e(function(s){var i=e("./root");i.certify=i.certify||(async(n,a={},o,c,u={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),n=(()=>{var y=[];if(n){if((typeof n=="string"||Array.isArray(n))&&n.indexOf("*")>-1)return"*";if(typeof n=="string")return n;if(Array.isArray(n)){if(n.length===1&&n[0])return typeof n[0]=="object"&&n[0].pub?n[0].pub:typeof n[0]=="string"?n[0]:null;n.map(k=>{typeof k=="string"?y.push(k):typeof k=="object"&&k.pub&&y.push(k.pub)})}return typeof n=="object"&&n.pub?n.pub:y.length>0?y:null}})(),!n)return console.log("No certificant found.");const l=u.expiry&&(typeof u.expiry=="number"||typeof u.expiry=="string")?parseFloat(u.expiry):null,h=(a||{}).read?a.read:null,p=(a||{}).write?a.write:typeof a=="string"||Array.isArray(a)||a["+"]||a["#"]||a["."]||a["="]||a["*"]||a[">"]||a["<"]?a:null,b=(u||{}).block||(u||{}).blacklist||(u||{}).ban||{},m=b.read&&(typeof b.read=="string"||(b.read||{})["#"])?b.read:null,v=typeof b=="string"?b:b.write&&(typeof b.write=="string"||b.write["#"])?b.write:null;if(!h&&!p)return console.log("No policy found.");const x=JSON.stringify({c:n,...l?{e:l}:{},...h?{r:h}:{},...p?{w:p}:{},...m?{rb:m}:{},...v?{wb:v}:{}});var f=await i.sign(x,o,null,{raw:1});if(u.raw||(f="SEA"+JSON.stringify(f)),c)try{c(f)}catch(y){console.log(y)}return f}catch(l){if(i.err=l,i.throw)throw l;c&&c();return}}),s.exports=i.certify})(e,"./certify"),e(function(s){var i=e("./shim"),n=e("./root");n.work=e("./work"),n.sign=e("./sign"),n.verify=e("./verify"),n.encrypt=e("./encrypt"),n.decrypt=e("./decrypt"),n.certify=e("./certify"),n.random=n.random||i.random,n.Buffer=n.Buffer||e("./buffer"),n.keyid=n.keyid||(async a=>{try{const o=i.Buffer.concat(a.replace(/-/g,"+").replace(/_/g,"/").split(".").map(l=>i.Buffer.from(l,"base64"))),c=i.Buffer.concat([i.Buffer.from([153,o.length/256,o.length%256]),o]),u=await sha1hash(c),f=i.Buffer.from(u,"binary");return f.toString("hex",f.length-8)}catch(o){throw console.log(o),o}}),((n.window||{}).GUN||{}).SEA=n,s.exports=n})(e,"./sea"),e(function(s){var i=e("./sea"),n,a;i.window?n=i.window.GUN||{chain:{}}:n=e((a+""==typeof r?".":"")+"./gun",1),i.GUN=n;function o(u){this._={$:this}}o.prototype=function(){function u(){}return u.prototype=n.chain,new u}(),o.prototype.constructor=o,n.chain.user=function(u){var f=this,h=f.back(-1),l;if(u)return u=i.opt.pub((u._||"")["#"])||u,h.get("~"+u);if(l=h.back("user"))return l;var h=h._,p=h,b=p.opt.uuid||c;return(p=(l=p.user=f.chain(new o))._).opt={},p.opt.uuid=function(m){var v=b(),x=h.user;return!x||!(x=x.is)||!(x=x.pub)||(v="~"+x+"/"+v,m&&m.call&&m(null,v)),v},l};function c(){return n.state().toString(36).replace(".","")}n.User=o,o.GUN=n,o.SEA=n.SEA=i,s.exports=o})(e,"./user"),e(function(s){var i,n=""+i!=typeof GUN?GUN||{chain:{}}:e((""+i==typeof r?".":"")+"./gun",1);n.chain.then=function(a,o){var c=this,u=new Promise(function(f,l){c.once(f,o)});return a?u.then(a):u}})(e,"./then"),e(function(s){var i=e("./user"),n=i.SEA,a=i.GUN,o=function(){};i.prototype.create=function(...c){var u=typeof c[0]=="object"&&(c[0].pub||c[0].epub)?c[0]:typeof c[1]=="object"&&(c[1].pub||c[1].epub)?c[1]:null,f=u&&(u.pub||u.epub)?u.pub:typeof c[0]=="string"?c[0]:null,l=u&&(u.pub||u.epub)?u:f&&typeof c[1]=="string"?c[1]:null,h=c.filter(y=>typeof y=="function")[0]||null,p=c&&c.length>1&&typeof c[c.length-1]=="object"?c[c.length-1]:{},b=this,m=b._,v=b.back(-1);if(h=h||o,p=p||{},p.check!==!1){var x;if(f||(x="No user."),(l||"").length<8&&(x="Password too short!"),x)return h({err:a.log(x)}),b}if(m.ing)return(h||o)({err:a.log("User is already being created or authenticated!"),wait:!0}),b;m.ing=!0;var _={};return _.a=function(y){if(_.pubs=y,y&&!p.already){var k={err:a.log("User already created!")};m.ing=!1,(h||o)(k),b.leave();return}_.salt=String.random(64),n.work(l,_.salt,_.b)},_.b=function(y){_.proof=y,u?_.c(u):n.pair(_.c)},_.c=function(y){var k;_.pair=y||{},(k=m.root.user)&&(k._.sea=y,k.is={pub:y.pub,epub:y.epub,alias:f}),_.data={pub:y.pub},_.d()},_.d=function(){_.data.alias=f,_.e()},_.e=function(){_.data.epub=_.pair.epub,n.encrypt({priv:_.pair.priv,epriv:_.pair.epriv},_.proof,_.f,{raw:1})},_.f=function(y){_.data.auth=JSON.stringify({ek:y,s:_.salt}),_.g(_.data.auth)},_.g=function(y){var k;_.data.auth=_.data.auth||y,v.get(k="~"+_.pair.pub).put(_.data).on(_.h);var A={};A[k]={"#":k},v.get("~@"+f).put(A).get(k).on(_.i)},_.h=function(y,k,A,M){M.off(),_.h.ok=1,_.i()},_.i=function(y,k,A,M){M&&(_.i.ok=1,M.off()),!(!_.h.ok||!_.i.ok)&&(m.ing=!1,h({ok:0,pub:_.pair.pub}),o===h&&(u?b.auth(u):b.auth(f,l)))},v.get("~@"+f).once(_.a),b},i.prototype.leave=function(c,u){var f=this,l=f.back(-1)._.user;if(l&&(delete l.is,delete l._.is,delete l._.sea),n.window)try{var h={};h=n.window.sessionStorage,delete h.recall,delete h.pair}catch{}return f}})(e,"./create"),e(function(s){var i=e("./user"),n=i.SEA,a=i.GUN,o=function(){};i.prototype.auth=function(...u){var f=typeof u[0]=="object"&&(u[0].pub||u[0].epub)?u[0]:typeof u[1]=="object"&&(u[1].pub||u[1].epub)?u[1]:null,l=!f&&typeof u[0]=="string"?u[0]:null,h=(l||f&&!(f.priv&&f.epriv))&&typeof u[1]=="string"?u[1]:null,p=u.filter(A=>typeof A=="function")[0]||null,b=u&&u.length>1&&typeof u[u.length-1]=="object"?u[u.length-1]:{},m=this,v=m._,x=m.back(-1);if(v.ing)return(p||o)({err:a.log("User is already being created or authenticated!"),wait:!0}),m;v.ing=!0;var _={},y,k=9;return _.a=function(A){if(!A)return _.b();if(!A.pub){var M=[];return Object.keys(A).forEach(function(P){P!="_"&&M.push(A[P])}),_.b(M)}if(_.name)return _.f(A);_.c((_.data=A).auth)},_.b=function(A){var M=(_.list=(_.list||[]).concat(A||[])).shift();if(y===M){if(_.name)return _.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(l&&k--){x.get("~@"+l).once(_.a);return}return _.err("Wrong user or password.")}x.get(M).once(_.a)},_.c=function(A){if(y===A)return _.b();if(typeof A=="string")return _.c(c(A));n.work(h,(_.auth=A).s,_.d,_.enc)},_.d=function(A){n.decrypt(_.auth.ek,A,_.e,_.enc)},_.e=function(A){if(y===A)return _.enc?(_.enc=null,_.b()):(_.enc={encode:"utf8"},_.c(_.auth));_.half=A,_.f(_.data)},_.f=function(A){var M=_.half||{},P=_.data||{};_.g(_.lol={pub:A.pub||P.pub,epub:A.epub||P.epub,priv:A.priv||M.priv,epriv:A.epriv||M.epriv})},_.g=function(A){if(!A||!A.pub||!A.epub)return _.b();_.pair=A;var M=x._.user,P=M._;P.tag;var R=P.opt;P=M._=x.get("~"+A.pub)._,P.opt=R,M.is={pub:A.pub,epub:A.epub,alias:l||A.pub},P.sea=_.pair,v.ing=!1;try{h&&y==(c(v.root.graph["~"+A.pub].auth)||"")[":"]&&(b.shuffle=b.change=h)}catch{}if(b.change?_.z():(p||o)(P),n.window&&(m.back("user")._.opt||b).remember)try{var L={};L=n.window.sessionStorage,L.recall=!0,L.pair=JSON.stringify(A)}catch{}try{x._.tag.auth?x._.on("auth",P):setTimeout(function(){x._.on("auth",P)},1)}catch(N){a.log("Your 'auth' callback crashed with:",N)}},_.h=function(A){if(!A)return _.b();if(l=A.alias,l||(l=A.alias="~"+f.pub),!A.auth)return _.g(f);f=null,_.c((_.data=A).auth)},_.z=function(){_.salt=String.random(64),n.work(b.change,_.salt,_.y)},_.y=function(A){n.encrypt({priv:_.pair.priv,epriv:_.pair.epriv},A,_.x,{raw:1})},_.x=function(A){_.w(JSON.stringify({ek:A,s:_.salt}))},_.w=function(A){if(b.shuffle){console.log("migrate core account from UTF8 & shuffle");var M={};Object.keys(_.data).forEach(function(P){M[P]=_.data[P]}),delete M._,M.auth=A,x.get("~"+_.pair.pub).put(M)}x.get("~"+_.pair.pub).get("auth").put(A,p||o)},_.err=function(A){var M={err:a.log(A||"User cannot be found!")};v.ing=!1,(p||o)(M)},_.plugin=function(A){if(!(_.name=A))return _.err();var M=[A];A[0]!=="~"&&(M[1]="~"+A,M[2]="~@"+A),_.b(M)},f?f.priv&&f.epriv?_.g(f):x.get("~"+f.pub).once(_.h):l?x.get("~@"+l).once(_.a):!l&&!h&&n.name(_.plugin),m};function c(u){if(typeof u!="string")return u;try{u=JSON.parse(u)}catch{u={}}return u}})(e,"./auth"),e(function(s){var i=e("./user"),n=i.SEA;i.GUN,i.prototype.recall=function(a,o){var c=this,u=c.back(-1);if(a=a||{},a&&a.sessionStorage){if(n.window)try{var f={};f=n.window.sessionStorage,f&&(u._.opt.remember=!0,(c.back("user")._.opt||a).remember=!0,(f.recall||f.pair)&&u.user().auth(JSON.parse(f.pair),o))}catch{}return c}return c}})(e,"./recall"),e(function(s){var i=e("./user"),n=i.SEA,a=i.GUN,o=function(){};i.prototype.pair=function(){var c=this,u;try{u=new Proxy({DANGER:""},{get:function(f,l,h){if(!(!c.is||!(c._||"").sea))return c._.sea[l]}})}catch{}return u},i.prototype.delete=async function(c,u,f){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var l=this;l.back(-1);var h=l.back("user");try{h.auth(c,u,function(p){var b=(h.is||{}).pub;h.map().once(function(){this.put(null)}),h.leave(),(f||o)({ok:0})})}catch(p){a.log("User.delete failed! Error:",p)}return l},i.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const c=this.back(-1);try{return await authRecall(c),c._.user._}catch{const f="No session!";throw a.log(f),{err:f}}},i.prototype.trust=async function(c){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),a.is(c)&&c.get("pub").get((u,f)=>{console.log(u,f)}),c.get("trust").get(path).put(theirPubkey)},i.prototype.grant=function(c,u){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var f=this,l=f.back(-1).user(),h=l._.sea,p="";return f.back(function(b){b.is||(p+=b.get||"")}),async function(){var b,m=await l.get("grant").get(h.pub).get(p).then();m=await n.decrypt(m,h),m||(m=n.random(16).toString(),b=await n.encrypt(m,h),l.get("grant").get(h.pub).get(p).put(b));var v=c.get("pub").then(),x=c.get("epub").then();v=await v,x=await x;var _=await n.secret(x,h);b=await n.encrypt(m,_),l.get("grant").get(v).get(p).put(b,u)}(),f},i.prototype.secret=function(c,u){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var f=this,l=f.back(-1).user(),h=l.pair(),p="";return f.back(function(b){b.is||(p+=b.get||"")}),async function(){var b,m=await l.get("trust").get(h.pub).get(p).then();m=await n.decrypt(m,h),m||(m=n.random(16).toString(),b=await n.encrypt(m,h),l.get("trust").get(h.pub).get(p).put(b)),b=await n.encrypt(c,m),f.put(b,u)}(),f},s.exports=i})(e,"./share"),e(function(s){var i=e("./sea"),n=e("./settings"),a,o=(i.window||"").GUN||e((""+a==typeof r?".":"")+"./gun",1);o.on("opt",function(b){b.sea||(b.sea={own:{}},b.on("put",c,b)),this.to.next(b)});function c(b){var m=this,v=m.as,x=b.put,_=x["#"],y=x["."],k=x[":"],A=x[">"],M=b["#"],P;if(!(!_||!y)){if((b._||"").faith&&(v.opt||"").faith&&typeof b._=="function"){i.opt.pack(x,function(L){i.verify(L,!1,function(N){x["="]=i.opt.unpack(N),m.to.next(b)})});return}var R=function(L){v.on("in",{"@":M,err:b.err=L})};if((b._||"").DBG&&((b._||"").DBG.c=+new Date),0<=_.indexOf("<?")&&(P=parseFloat(_.split("<?")[1]||""),P&&A<o.state()-P*1e3)){(P=b._)&&P.stun&&P.stun--;return}if(_==="~@"){c.alias(m,b,k,y,_,v,R);return}if(_.slice(0,2)==="~@"){c.pubs(m,b,k,y,_,v,R);return}if(P=i.opt.pub(_)){c.pub(m,b,k,y,_,v,R,v.user||"",P);return}if(0<=_.indexOf("#")){c.hash(m,b,k,y,_,v,R);return}c.any(m,b,k,y,_,v,R,v.user||"")}}c.hash=function(b,m,v,x,_,y,k){i.work(v,null,function(A){function M(P){let R="";for(let L=0;L<P.length;L++)R+=L-1&1?"":String.fromCharCode(parseInt(P.substring(L-1,L+1),16));return btoa(R)}if(A&&A===x.split("#").slice(-1)[0])return b.to.next(m);if(A&&A===M(x.split("#").slice(-1)[0]))return b.to.next(m);k("Data hash not same as hash!")},{name:"SHA-256"})},c.alias=function(b,m,v,x,_,y,k){if(!v)return k("Data must exist!");if("~@"+x===f(v))return b.to.next(m);k("Alias not same!")},c.pubs=function(b,m,v,x,_,y,k){if(!v)return k("Alias must exist!");if(x===f(v))return b.to.next(m);k("Alias not same!")},c.pub=async function(b,m,v,x,_,y,k,A,M){var P;const R=await n.parse(v)||{},L=(N,I,d)=>{if(N.m&&N.s&&I&&M)return i.verify(N,M,g=>{if(a!==g&&a!==g.e&&m.put[">"]&&m.put[">"]>parseFloat(g.e))return k("Certificate expired.");if(a!==g&&g.c&&g.w&&(g.c===I||g.c.indexOf("*")>-1)){let D=_.indexOf("/")>-1?_.replace(_.substring(0,_.indexOf("/")+1),""):"";String.match=String.match||o.text.match;const S=Array.isArray(g.w)?g.w:typeof g.w=="object"||typeof g.w=="string"?[g.w]:[];for(const E of S)if(String.match(D,E["#"])&&String.match(x,E["."])||!E["."]&&String.match(D,E["#"])||!E["#"]&&String.match(x,E["."])||String.match(D?D+"/"+x:x,E["#"]||E)){if(E["+"]&&E["+"].indexOf("*")>-1&&D&&D.indexOf(I)==-1&&x.indexOf(I)==-1)return k(`Path "${D}" or key "${x}" must contain string "${I}".`);if(g.wb&&(typeof g.wb=="string"||(g.wb||{})["#"])){var w=b.as.root.$.back(-1);return typeof g.wb=="string"&&g.wb.slice(0,1)!=="~"&&(w=w.get("~"+M)),w.get(g.wb).get(I).once(O=>O&&(O===1||O===!0)?k(`Certificant ${I} blocked.`):d(g))}return d(g)}return k("Certificate verification fail.")}})};if(x==="pub"&&"~"+M===_)return v===M?b.to.next(m):k("Account not same!");if((P=A.is)&&P.pub&&!R["*"]&&!R["+"]&&(M===P.pub||M!==P.pub&&((m._.msg||{}).opt||{}).cert)){i.opt.pack(m.put,N=>{i.sign(N,A._.sea,async function(I){if(a===I)return k(i.err||"Signature fail.");if(m.put[":"]={":":P=i.opt.unpack(I.m),"~":I.s},m.put["="]=P,M===A.is.pub){(P=f(v))&&((y.sea.own[P]=y.sea.own[P]||{})[M]=1),JSON.stringifyAsync(m.put[":"],function(d,g){return d?k(d||"Stringify error."):(m.put[":"]=g,b.to.next(m))});return}if(M!==A.is.pub&&((m._.msg||{}).opt||{}).cert){const d=await n.parse(m._.msg.opt.cert);d&&d.m&&d.s&&L(d,A.is.pub,g=>{m.put[":"]["+"]=d,m.put[":"]["*"]=A.is.pub,JSON.stringifyAsync(m.put[":"],function(w,D){return w?k(w||"Stringify error."):(m.put[":"]=D,b.to.next(m))})})}},{raw:1})});return}i.opt.pack(m.put,N=>{i.verify(N,R["*"]||M,function(I){var d;if(I=i.opt.unpack(I),a===I)return k("Unverified data.");if((d=f(I))&&M===i.opt.pub(d)&&((y.sea.own[d]=y.sea.own[d]||{})[M]=1),R["+"]&&R["+"].m&&R["+"].s&&R["*"])L(R["+"],R["*"],g=>(m.put["="]=I,b.to.next(m)));else return m.put["="]=I,b.to.next(m)})})},c.any=function(b,m,v,x,_,y,k,A){if(y.opt.secure)return k("Soul missing public key at '"+x+"'.");y.on("secure",function(M){if(this.off(),!y.opt.secure)return b.to.next(M);k("Data cannot be changed.")}).on.on("secure",m)};var u=o.valid,f=function(b,m){return typeof(m=u(b))=="string"&&m};(o.state||"").ify;var l=/[^\w_-]/;i.opt.pub=function(b){if(b&&(b=b.split("~"),!(!b||!(b=b[1]))&&(b=b.split(l).slice(0,2),!(!b||b.length!=2)&&(b[0]||"")[0]!=="@")))return b=b.slice(0,2).join("."),b},i.opt.stringy=function(b){},i.opt.pack=function(b,m,v,x,_){var y,k;if(i.opt.check(b))return m(b);b&&b["#"]&&b["."]&&b[">"]&&(y=b[":"],k=1),JSON.parseAsync(k?y:b,function(A,M){var P=a!==(M||"")[":"]&&(M||"")["~"];if(!P){m(b);return}m({m:{"#":_||b["#"],".":v||b["."],":":(M||"")[":"],">":b[">"]||o.state.is(x,v)},s:P})})};var h=i.opt;i.opt.unpack=function(b,m,v){var x;if(a!==b){if(b&&a!==(x=b[":"]))return x;if(m=m||h.fall_key,!v&&h.fall_val&&(v={},v[m]=h.fall_val),!(!m||!v)){if(b===v[m]||!i.opt.check(v[m]))return b;var _=v&&v._&&v._["#"]||h.fall_soul,y=o.state.is(v,m)||h.fall_state;if(b&&b.length===4&&_===b[0]&&m===b[1]&&p(y)===p(b[3]))return b[2];if(y<i.opt.shuffle_attack)return b}}},i.opt.shuffle_attack=15463296e5;var p=Math.floor})(e,"./index")})()}(ui)),ui.exports}var qp=jp();const fr=Ir(qp);let cs;function Be(t={localStorage:!1}){if(!cs){const e={peers:[Qe.peer]};typeof t=="object"&&Object.assign(e,t),cs=Cr(e)}return cs}function fv(t={localStorage:!1}){return Cr({peers:[Qe.peer],...t})}var nf;(nf=Cr==null?void 0:Cr.node)==null||nf.soul;var sf;const lv=(sf=Cr==null?void 0:Cr.text)==null?void 0:sf.random;var fs,Wo;function Up(){if(Wo)return fs;Wo=1;const t="[a-fA-F\\d:]",e=u=>u&&u.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",i=`
(?:
(?:${s}:){7}(?:${s}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${s}:){6}(?:${r}|:${s}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${s}:){5}(?::${r}|(?::${s}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${s}:){4}(?:(?::${s}){0,1}:${r}|(?::${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${s}:){3}(?:(?::${s}){0,2}:${r}|(?::${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${s}:){2}(?:(?::${s}){0,3}:${r}|(?::${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${s}:){1}(?:(?::${s}){0,4}:${r}|(?::${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${s}){0,5}:${r}|(?::${s}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),n=new RegExp(`(?:^${r}$)|(?:^${i}$)`),a=new RegExp(`^${r}$`),o=new RegExp(`^${i}$`),c=u=>u&&u.exact?n:new RegExp(`(?:${e(u)}${r}${e(u)})|(?:${e(u)}${i}${e(u)})`,"g");return c.v4=u=>u&&u.exact?a:new RegExp(`${e(u)}${r}${e(u)}`,"g"),c.v6=u=>u&&u.exact?o:new RegExp(`${e(u)}${i}${e(u)}`,"g"),fs=c,fs}const $p=JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermgensberater","vermgensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]');var ls,Vo;function Hp(){if(Vo)return ls;Vo=1;const t=Up(),e=$p;return ls=r=>{r={strict:!0,...r};const s=`(?:(?:[a-z]+:)?//)${r.strict?"":"?"}`,i="(?:\\S+(?::\\S*)?@)?",n=t.v4().source,a="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",o="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",c=`(?:\\.${r.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${e.sort((h,p)=>p.length-h.length).join("|")})`})\\.?`,l=`(?:${s}|www\\.)${i}(?:localhost|${n}|${a}${o}${c})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return r.exact?new RegExp(`(?:^${l}$)`,"i"):new RegExp(l,"ig")},ls}var Wp=Hp();const Vp=Ir(Wp),ma=Ie({}),ga=Ie({});function hv(){return{relays:ma,errors:ga,loadRelays:Gp}}async function Gp({source:t="https://raw.githubusercontent.com/wiki/amark/gun/volunteer.dht.md"}={}){const s=(await(await fetch(t)).text()).match(Vp());return s.push(Qe.peer),Array.from(s).forEach(n=>{let a=new URL(n);if(a.pathname==="/gun"&&a.pathname.indexOf("~~")===-1){let o=performance.now();fetch(a.href,{method:"HEAD",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"}).then(c=>{let u=performance.now();if(c.ok){const f={host:a.hostname,ping:(u-o).toFixed(),url:a.href};ma[a.hostname]=f}else ga[a.hostname]=c}).catch(c=>{ga[a.hostname]=c})}}),ma}function dv(t){return typeof t=="string"&&t.length===44&&t.charAt(43)==="="}async function Rh(t){return await fr.work(t,null,null,{name:"SHA-256"})}async function Zp(t){let e=typeof t=="string"?t:JSON.stringify(t);return{hash:await Rh(e),hashed:e}}function pv(t){if(!t)return;const e=/[+=/]/g;return t.replace(e,Kp)}function Kp(t){switch(t){case"+":return"-";case"=":return".";case"/":return"_"}}function bv(t,e={}){if(t){if(typeof t=="object")return t}else return e;try{return JSON.parse(t)}catch{return e}}async function Jp({pair:t,tag:e="word",dot:r="",users:s="*",personal:i=!1}){let n={"*":`${e}`};r&&(n["."]=r),i&&(n["+"]="*");try{return await fr.certify(s,n,t,null)}catch(a){return console.log("cert error: ",a),""}}async function Go({pair:t,list:e=[]}){const r={};for(let s of e)r[s.tag]=await Jp({...s,pair:t});return r}var hs={};const Xp="6.6.1",Yp={version:Xp};var ds={},ci={exports:{}};const Qp={},e1=Object.freeze(Object.defineProperty({__proto__:null,default:Qp},Symbol.toStringTag,{value:"Module"})),Lh=bp(e1);var t1=ci.exports,Zo;function dr(){return Zo||(Zo=1,function(t){(function(e,r){function s(I,d){if(!I)throw new Error(d||"Assertion failed")}function i(I,d){I.super_=d;var g=function(){};g.prototype=d.prototype,I.prototype=new g,I.prototype.constructor=I}function n(I,d,g){if(n.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((d==="le"||d==="be")&&(g=d,d=10),this._init(I||0,d||10,g||"be"))}typeof e=="object"?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=Lh.Buffer}catch{}n.isBN=function(d){return d instanceof n?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===n.wordSize&&Array.isArray(d.words)},n.max=function(d,g){return d.cmp(g)>0?d:g},n.min=function(d,g){return d.cmp(g)<0?d:g},n.prototype._init=function(d,g,w){if(typeof d=="number")return this._initNumber(d,g,w);if(typeof d=="object")return this._initArray(d,g,w);g==="hex"&&(g=16),s(g===(g|0)&&g>=2&&g<=36),d=d.toString().replace(/\s+/g,"");var D=0;d[0]==="-"&&(D++,this.negative=1),D<d.length&&(g===16?this._parseHex(d,D,w):(this._parseBase(d,g,D),w==="le"&&this._initArray(this.toArray(),g,w)))},n.prototype._initNumber=function(d,g,w){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(s(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),g,w)},n.prototype._initArray=function(d,g,w){if(s(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var S,E,O=0;if(w==="be")for(D=d.length-1,S=0;D>=0;D-=3)E=d[D]|d[D-1]<<8|d[D-2]<<16,this.words[S]|=E<<O&67108863,this.words[S+1]=E>>>26-O&67108863,O+=24,O>=26&&(O-=26,S++);else if(w==="le")for(D=0,S=0;D<d.length;D+=3)E=d[D]|d[D+1]<<8|d[D+2]<<16,this.words[S]|=E<<O&67108863,this.words[S+1]=E>>>26-O&67108863,O+=24,O>=26&&(O-=26,S++);return this.strip()};function o(I,d){var g=I.charCodeAt(d);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function c(I,d,g){var w=o(I,g);return g-1>=d&&(w|=o(I,g-1)<<4),w}n.prototype._parseHex=function(d,g,w){this.length=Math.ceil((d.length-g)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var S=0,E=0,O;if(w==="be")for(D=d.length-1;D>=g;D-=2)O=c(d,g,D)<<S,this.words[E]|=O&67108863,S>=18?(S-=18,E+=1,this.words[E]|=O>>>26):S+=8;else{var T=d.length-g;for(D=T%2===0?g+1:g;D<d.length;D+=2)O=c(d,g,D)<<S,this.words[E]|=O&67108863,S>=18?(S-=18,E+=1,this.words[E]|=O>>>26):S+=8}this.strip()};function u(I,d,g,w){for(var D=0,S=Math.min(I.length,g),E=d;E<S;E++){var O=I.charCodeAt(E)-48;D*=w,O>=49?D+=O-49+10:O>=17?D+=O-17+10:D+=O}return D}n.prototype._parseBase=function(d,g,w){this.words=[0],this.length=1;for(var D=0,S=1;S<=67108863;S*=g)D++;D--,S=S/g|0;for(var E=d.length-w,O=E%D,T=Math.min(E,E-O)+w,C=0,F=w;F<T;F+=D)C=u(d,F,F+D,g),this.imuln(S),this.words[0]+C<67108864?this.words[0]+=C:this._iaddn(C);if(O!==0){var j=1;for(C=u(d,F,d.length,g),F=0;F<O;F++)j*=g;this.imuln(j),this.words[0]+C<67108864?this.words[0]+=C:this._iaddn(C)}this.strip()},n.prototype.copy=function(d){d.words=new Array(this.length);for(var g=0;g<this.length;g++)d.words[g]=this.words[g];d.length=this.length,d.negative=this.negative,d.red=this.red},n.prototype.clone=function(){var d=new n(null);return this.copy(d),d},n.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(d,g){d=d||10,g=g|0||1;var w;if(d===16||d==="hex"){w="";for(var D=0,S=0,E=0;E<this.length;E++){var O=this.words[E],T=((O<<D|S)&16777215).toString(16);S=O>>>24-D&16777215,D+=2,D>=26&&(D-=26,E--),S!==0||E!==this.length-1?w=f[6-T.length]+T+w:w=T+w}for(S!==0&&(w=S.toString(16)+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(d===(d|0)&&d>=2&&d<=36){var C=l[d],F=h[d];w="";var j=this.clone();for(j.negative=0;!j.isZero();){var W=j.modn(F).toString(d);j=j.idivn(F),j.isZero()?w=W+w:w=f[C-W.length]+W+w}for(this.isZero()&&(w="0"+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}s(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(d,g){return s(typeof a<"u"),this.toArrayLike(a,d,g)},n.prototype.toArray=function(d,g){return this.toArrayLike(Array,d,g)},n.prototype.toArrayLike=function(d,g,w){var D=this.byteLength(),S=w||Math.max(1,D);s(D<=S,"byte array longer than desired length"),s(S>0,"Requested array length <= 0"),this.strip();var E=g==="le",O=new d(S),T,C,F=this.clone();if(E){for(C=0;!F.isZero();C++)T=F.andln(255),F.iushrn(8),O[C]=T;for(;C<S;C++)O[C]=0}else{for(C=0;C<S-D;C++)O[C]=0;for(C=0;!F.isZero();C++)T=F.andln(255),F.iushrn(8),O[S-C-1]=T}return O},Math.clz32?n.prototype._countBits=function(d){return 32-Math.clz32(d)}:n.prototype._countBits=function(d){var g=d,w=0;return g>=4096&&(w+=13,g>>>=13),g>=64&&(w+=7,g>>>=7),g>=8&&(w+=4,g>>>=4),g>=2&&(w+=2,g>>>=2),w+g},n.prototype._zeroBits=function(d){if(d===0)return 26;var g=d,w=0;return(g&8191)===0&&(w+=13,g>>>=13),(g&127)===0&&(w+=7,g>>>=7),(g&15)===0&&(w+=4,g>>>=4),(g&3)===0&&(w+=2,g>>>=2),(g&1)===0&&w++,w},n.prototype.bitLength=function(){var d=this.words[this.length-1],g=this._countBits(d);return(this.length-1)*26+g};function p(I){for(var d=new Array(I.bitLength()),g=0;g<d.length;g++){var w=g/26|0,D=g%26;d[g]=(I.words[w]&1<<D)>>>D}return d}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,g=0;g<this.length;g++){var w=this._zeroBits(this.words[g]);if(d+=w,w!==26)break}return d},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},n.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var g=0;g<d.length;g++)this.words[g]=this.words[g]|d.words[g];return this.strip()},n.prototype.ior=function(d){return s((this.negative|d.negative)===0),this.iuor(d)},n.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},n.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},n.prototype.iuand=function(d){var g;this.length>d.length?g=d:g=this;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]&d.words[w];return this.length=g.length,this.strip()},n.prototype.iand=function(d){return s((this.negative|d.negative)===0),this.iuand(d)},n.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},n.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},n.prototype.iuxor=function(d){var g,w;this.length>d.length?(g=this,w=d):(g=d,w=this);for(var D=0;D<w.length;D++)this.words[D]=g.words[D]^w.words[D];if(this!==g)for(;D<g.length;D++)this.words[D]=g.words[D];return this.length=g.length,this.strip()},n.prototype.ixor=function(d){return s((this.negative|d.negative)===0),this.iuxor(d)},n.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},n.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},n.prototype.inotn=function(d){s(typeof d=="number"&&d>=0);var g=Math.ceil(d/26)|0,w=d%26;this._expand(g),w>0&&g--;for(var D=0;D<g;D++)this.words[D]=~this.words[D]&67108863;return w>0&&(this.words[D]=~this.words[D]&67108863>>26-w),this.strip()},n.prototype.notn=function(d){return this.clone().inotn(d)},n.prototype.setn=function(d,g){s(typeof d=="number"&&d>=0);var w=d/26|0,D=d%26;return this._expand(w+1),g?this.words[w]=this.words[w]|1<<D:this.words[w]=this.words[w]&~(1<<D),this.strip()},n.prototype.iadd=function(d){var g;if(this.negative!==0&&d.negative===0)return this.negative=0,g=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,g=this.isub(d),d.negative=1,g._normSign();var w,D;this.length>d.length?(w=this,D=d):(w=d,D=this);for(var S=0,E=0;E<D.length;E++)g=(w.words[E]|0)+(D.words[E]|0)+S,this.words[E]=g&67108863,S=g>>>26;for(;S!==0&&E<w.length;E++)g=(w.words[E]|0)+S,this.words[E]=g&67108863,S=g>>>26;if(this.length=w.length,S!==0)this.words[this.length]=S,this.length++;else if(w!==this)for(;E<w.length;E++)this.words[E]=w.words[E];return this},n.prototype.add=function(d){var g;return d.negative!==0&&this.negative===0?(d.negative=0,g=this.sub(d),d.negative^=1,g):d.negative===0&&this.negative!==0?(this.negative=0,g=d.sub(this),this.negative=1,g):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},n.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var g=this.iadd(d);return d.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var w=this.cmp(d);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,S;w>0?(D=this,S=d):(D=d,S=this);for(var E=0,O=0;O<S.length;O++)g=(D.words[O]|0)-(S.words[O]|0)+E,E=g>>26,this.words[O]=g&67108863;for(;E!==0&&O<D.length;O++)g=(D.words[O]|0)+E,E=g>>26,this.words[O]=g&67108863;if(E===0&&O<D.length&&D!==this)for(;O<D.length;O++)this.words[O]=D.words[O];return this.length=Math.max(this.length,O),D!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(d){return this.clone().isub(d)};function b(I,d,g){g.negative=d.negative^I.negative;var w=I.length+d.length|0;g.length=w,w=w-1|0;var D=I.words[0]|0,S=d.words[0]|0,E=D*S,O=E&67108863,T=E/67108864|0;g.words[0]=O;for(var C=1;C<w;C++){for(var F=T>>>26,j=T&67108863,W=Math.min(C,d.length-1),V=Math.max(0,C-I.length+1);V<=W;V++){var Z=C-V|0;D=I.words[Z]|0,S=d.words[V]|0,E=D*S+j,F+=E/67108864|0,j=E&67108863}g.words[C]=j|0,T=F|0}return T!==0?g.words[C]=T|0:g.length--,g.strip()}var m=function(d,g,w){var D=d.words,S=g.words,E=w.words,O=0,T,C,F,j=D[0]|0,W=j&8191,V=j>>>13,Z=D[1]|0,ie=Z&8191,pe=Z>>>13,le=D[2]|0,se=le&8191,he=le>>>13,Ce=D[3]|0,ye=Ce&8191,Ee=Ce>>>13,B=D[4]|0,K=B&8191,G=B>>>13,U=D[5]|0,q=U&8191,$=U>>>13,ee=D[6]|0,J=ee&8191,H=ee>>>13,re=D[7]|0,ne=re&8191,te=re>>>13,de=D[8]|0,_e=de&8191,me=de>>>13,dt=D[9]|0,Ne=dt&8191,Me=dt>>>13,bt=S[0]|0,Ae=bt&8191,Re=bt>>>13,rr=S[1]|0,Pe=rr&8191,$e=rr>>>13,Jr=S[2]|0,Ze=Jr&8191,ze=Jr>>>13,mr=S[3]|0,Le=mr&8191,Ue=mr>>>13,oe=S[4]|0,z=oe&8191,X=oe>>>13,ge=S[5]|0,be=ge&8191,ve=ge>>>13,He=S[6]|0,Te=He&8191,je=He>>>13,We=S[7]|0,Ve=We&8191,Ye=We>>>13,Xr=S[8]|0,st=Xr&8191,at=Xr>>>13,mo=S[9]|0,ot=mo&8191,ut=mo>>>13;w.negative=d.negative^g.negative,w.length=19,T=Math.imul(W,Ae),C=Math.imul(W,Re),C=C+Math.imul(V,Ae)|0,F=Math.imul(V,Re);var Bi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,T=Math.imul(ie,Ae),C=Math.imul(ie,Re),C=C+Math.imul(pe,Ae)|0,F=Math.imul(pe,Re),T=T+Math.imul(W,Pe)|0,C=C+Math.imul(W,$e)|0,C=C+Math.imul(V,Pe)|0,F=F+Math.imul(V,$e)|0;var Ni=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,T=Math.imul(se,Ae),C=Math.imul(se,Re),C=C+Math.imul(he,Ae)|0,F=Math.imul(he,Re),T=T+Math.imul(ie,Pe)|0,C=C+Math.imul(ie,$e)|0,C=C+Math.imul(pe,Pe)|0,F=F+Math.imul(pe,$e)|0,T=T+Math.imul(W,Ze)|0,C=C+Math.imul(W,ze)|0,C=C+Math.imul(V,Ze)|0,F=F+Math.imul(V,ze)|0;var zi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(zi>>>26)|0,zi&=67108863,T=Math.imul(ye,Ae),C=Math.imul(ye,Re),C=C+Math.imul(Ee,Ae)|0,F=Math.imul(Ee,Re),T=T+Math.imul(se,Pe)|0,C=C+Math.imul(se,$e)|0,C=C+Math.imul(he,Pe)|0,F=F+Math.imul(he,$e)|0,T=T+Math.imul(ie,Ze)|0,C=C+Math.imul(ie,ze)|0,C=C+Math.imul(pe,Ze)|0,F=F+Math.imul(pe,ze)|0,T=T+Math.imul(W,Le)|0,C=C+Math.imul(W,Ue)|0,C=C+Math.imul(V,Le)|0,F=F+Math.imul(V,Ue)|0;var ji=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(ji>>>26)|0,ji&=67108863,T=Math.imul(K,Ae),C=Math.imul(K,Re),C=C+Math.imul(G,Ae)|0,F=Math.imul(G,Re),T=T+Math.imul(ye,Pe)|0,C=C+Math.imul(ye,$e)|0,C=C+Math.imul(Ee,Pe)|0,F=F+Math.imul(Ee,$e)|0,T=T+Math.imul(se,Ze)|0,C=C+Math.imul(se,ze)|0,C=C+Math.imul(he,Ze)|0,F=F+Math.imul(he,ze)|0,T=T+Math.imul(ie,Le)|0,C=C+Math.imul(ie,Ue)|0,C=C+Math.imul(pe,Le)|0,F=F+Math.imul(pe,Ue)|0,T=T+Math.imul(W,z)|0,C=C+Math.imul(W,X)|0,C=C+Math.imul(V,z)|0,F=F+Math.imul(V,X)|0;var qi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(qi>>>26)|0,qi&=67108863,T=Math.imul(q,Ae),C=Math.imul(q,Re),C=C+Math.imul($,Ae)|0,F=Math.imul($,Re),T=T+Math.imul(K,Pe)|0,C=C+Math.imul(K,$e)|0,C=C+Math.imul(G,Pe)|0,F=F+Math.imul(G,$e)|0,T=T+Math.imul(ye,Ze)|0,C=C+Math.imul(ye,ze)|0,C=C+Math.imul(Ee,Ze)|0,F=F+Math.imul(Ee,ze)|0,T=T+Math.imul(se,Le)|0,C=C+Math.imul(se,Ue)|0,C=C+Math.imul(he,Le)|0,F=F+Math.imul(he,Ue)|0,T=T+Math.imul(ie,z)|0,C=C+Math.imul(ie,X)|0,C=C+Math.imul(pe,z)|0,F=F+Math.imul(pe,X)|0,T=T+Math.imul(W,be)|0,C=C+Math.imul(W,ve)|0,C=C+Math.imul(V,be)|0,F=F+Math.imul(V,ve)|0;var Ui=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,T=Math.imul(J,Ae),C=Math.imul(J,Re),C=C+Math.imul(H,Ae)|0,F=Math.imul(H,Re),T=T+Math.imul(q,Pe)|0,C=C+Math.imul(q,$e)|0,C=C+Math.imul($,Pe)|0,F=F+Math.imul($,$e)|0,T=T+Math.imul(K,Ze)|0,C=C+Math.imul(K,ze)|0,C=C+Math.imul(G,Ze)|0,F=F+Math.imul(G,ze)|0,T=T+Math.imul(ye,Le)|0,C=C+Math.imul(ye,Ue)|0,C=C+Math.imul(Ee,Le)|0,F=F+Math.imul(Ee,Ue)|0,T=T+Math.imul(se,z)|0,C=C+Math.imul(se,X)|0,C=C+Math.imul(he,z)|0,F=F+Math.imul(he,X)|0,T=T+Math.imul(ie,be)|0,C=C+Math.imul(ie,ve)|0,C=C+Math.imul(pe,be)|0,F=F+Math.imul(pe,ve)|0,T=T+Math.imul(W,Te)|0,C=C+Math.imul(W,je)|0,C=C+Math.imul(V,Te)|0,F=F+Math.imul(V,je)|0;var $i=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+($i>>>26)|0,$i&=67108863,T=Math.imul(ne,Ae),C=Math.imul(ne,Re),C=C+Math.imul(te,Ae)|0,F=Math.imul(te,Re),T=T+Math.imul(J,Pe)|0,C=C+Math.imul(J,$e)|0,C=C+Math.imul(H,Pe)|0,F=F+Math.imul(H,$e)|0,T=T+Math.imul(q,Ze)|0,C=C+Math.imul(q,ze)|0,C=C+Math.imul($,Ze)|0,F=F+Math.imul($,ze)|0,T=T+Math.imul(K,Le)|0,C=C+Math.imul(K,Ue)|0,C=C+Math.imul(G,Le)|0,F=F+Math.imul(G,Ue)|0,T=T+Math.imul(ye,z)|0,C=C+Math.imul(ye,X)|0,C=C+Math.imul(Ee,z)|0,F=F+Math.imul(Ee,X)|0,T=T+Math.imul(se,be)|0,C=C+Math.imul(se,ve)|0,C=C+Math.imul(he,be)|0,F=F+Math.imul(he,ve)|0,T=T+Math.imul(ie,Te)|0,C=C+Math.imul(ie,je)|0,C=C+Math.imul(pe,Te)|0,F=F+Math.imul(pe,je)|0,T=T+Math.imul(W,Ve)|0,C=C+Math.imul(W,Ye)|0,C=C+Math.imul(V,Ve)|0,F=F+Math.imul(V,Ye)|0;var Hi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,T=Math.imul(_e,Ae),C=Math.imul(_e,Re),C=C+Math.imul(me,Ae)|0,F=Math.imul(me,Re),T=T+Math.imul(ne,Pe)|0,C=C+Math.imul(ne,$e)|0,C=C+Math.imul(te,Pe)|0,F=F+Math.imul(te,$e)|0,T=T+Math.imul(J,Ze)|0,C=C+Math.imul(J,ze)|0,C=C+Math.imul(H,Ze)|0,F=F+Math.imul(H,ze)|0,T=T+Math.imul(q,Le)|0,C=C+Math.imul(q,Ue)|0,C=C+Math.imul($,Le)|0,F=F+Math.imul($,Ue)|0,T=T+Math.imul(K,z)|0,C=C+Math.imul(K,X)|0,C=C+Math.imul(G,z)|0,F=F+Math.imul(G,X)|0,T=T+Math.imul(ye,be)|0,C=C+Math.imul(ye,ve)|0,C=C+Math.imul(Ee,be)|0,F=F+Math.imul(Ee,ve)|0,T=T+Math.imul(se,Te)|0,C=C+Math.imul(se,je)|0,C=C+Math.imul(he,Te)|0,F=F+Math.imul(he,je)|0,T=T+Math.imul(ie,Ve)|0,C=C+Math.imul(ie,Ye)|0,C=C+Math.imul(pe,Ve)|0,F=F+Math.imul(pe,Ye)|0,T=T+Math.imul(W,st)|0,C=C+Math.imul(W,at)|0,C=C+Math.imul(V,st)|0,F=F+Math.imul(V,at)|0;var Wi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,T=Math.imul(Ne,Ae),C=Math.imul(Ne,Re),C=C+Math.imul(Me,Ae)|0,F=Math.imul(Me,Re),T=T+Math.imul(_e,Pe)|0,C=C+Math.imul(_e,$e)|0,C=C+Math.imul(me,Pe)|0,F=F+Math.imul(me,$e)|0,T=T+Math.imul(ne,Ze)|0,C=C+Math.imul(ne,ze)|0,C=C+Math.imul(te,Ze)|0,F=F+Math.imul(te,ze)|0,T=T+Math.imul(J,Le)|0,C=C+Math.imul(J,Ue)|0,C=C+Math.imul(H,Le)|0,F=F+Math.imul(H,Ue)|0,T=T+Math.imul(q,z)|0,C=C+Math.imul(q,X)|0,C=C+Math.imul($,z)|0,F=F+Math.imul($,X)|0,T=T+Math.imul(K,be)|0,C=C+Math.imul(K,ve)|0,C=C+Math.imul(G,be)|0,F=F+Math.imul(G,ve)|0,T=T+Math.imul(ye,Te)|0,C=C+Math.imul(ye,je)|0,C=C+Math.imul(Ee,Te)|0,F=F+Math.imul(Ee,je)|0,T=T+Math.imul(se,Ve)|0,C=C+Math.imul(se,Ye)|0,C=C+Math.imul(he,Ve)|0,F=F+Math.imul(he,Ye)|0,T=T+Math.imul(ie,st)|0,C=C+Math.imul(ie,at)|0,C=C+Math.imul(pe,st)|0,F=F+Math.imul(pe,at)|0,T=T+Math.imul(W,ot)|0,C=C+Math.imul(W,ut)|0,C=C+Math.imul(V,ot)|0,F=F+Math.imul(V,ut)|0;var Vi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,T=Math.imul(Ne,Pe),C=Math.imul(Ne,$e),C=C+Math.imul(Me,Pe)|0,F=Math.imul(Me,$e),T=T+Math.imul(_e,Ze)|0,C=C+Math.imul(_e,ze)|0,C=C+Math.imul(me,Ze)|0,F=F+Math.imul(me,ze)|0,T=T+Math.imul(ne,Le)|0,C=C+Math.imul(ne,Ue)|0,C=C+Math.imul(te,Le)|0,F=F+Math.imul(te,Ue)|0,T=T+Math.imul(J,z)|0,C=C+Math.imul(J,X)|0,C=C+Math.imul(H,z)|0,F=F+Math.imul(H,X)|0,T=T+Math.imul(q,be)|0,C=C+Math.imul(q,ve)|0,C=C+Math.imul($,be)|0,F=F+Math.imul($,ve)|0,T=T+Math.imul(K,Te)|0,C=C+Math.imul(K,je)|0,C=C+Math.imul(G,Te)|0,F=F+Math.imul(G,je)|0,T=T+Math.imul(ye,Ve)|0,C=C+Math.imul(ye,Ye)|0,C=C+Math.imul(Ee,Ve)|0,F=F+Math.imul(Ee,Ye)|0,T=T+Math.imul(se,st)|0,C=C+Math.imul(se,at)|0,C=C+Math.imul(he,st)|0,F=F+Math.imul(he,at)|0,T=T+Math.imul(ie,ot)|0,C=C+Math.imul(ie,ut)|0,C=C+Math.imul(pe,ot)|0,F=F+Math.imul(pe,ut)|0;var Gi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,T=Math.imul(Ne,Ze),C=Math.imul(Ne,ze),C=C+Math.imul(Me,Ze)|0,F=Math.imul(Me,ze),T=T+Math.imul(_e,Le)|0,C=C+Math.imul(_e,Ue)|0,C=C+Math.imul(me,Le)|0,F=F+Math.imul(me,Ue)|0,T=T+Math.imul(ne,z)|0,C=C+Math.imul(ne,X)|0,C=C+Math.imul(te,z)|0,F=F+Math.imul(te,X)|0,T=T+Math.imul(J,be)|0,C=C+Math.imul(J,ve)|0,C=C+Math.imul(H,be)|0,F=F+Math.imul(H,ve)|0,T=T+Math.imul(q,Te)|0,C=C+Math.imul(q,je)|0,C=C+Math.imul($,Te)|0,F=F+Math.imul($,je)|0,T=T+Math.imul(K,Ve)|0,C=C+Math.imul(K,Ye)|0,C=C+Math.imul(G,Ve)|0,F=F+Math.imul(G,Ye)|0,T=T+Math.imul(ye,st)|0,C=C+Math.imul(ye,at)|0,C=C+Math.imul(Ee,st)|0,F=F+Math.imul(Ee,at)|0,T=T+Math.imul(se,ot)|0,C=C+Math.imul(se,ut)|0,C=C+Math.imul(he,ot)|0,F=F+Math.imul(he,ut)|0;var Zi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,T=Math.imul(Ne,Le),C=Math.imul(Ne,Ue),C=C+Math.imul(Me,Le)|0,F=Math.imul(Me,Ue),T=T+Math.imul(_e,z)|0,C=C+Math.imul(_e,X)|0,C=C+Math.imul(me,z)|0,F=F+Math.imul(me,X)|0,T=T+Math.imul(ne,be)|0,C=C+Math.imul(ne,ve)|0,C=C+Math.imul(te,be)|0,F=F+Math.imul(te,ve)|0,T=T+Math.imul(J,Te)|0,C=C+Math.imul(J,je)|0,C=C+Math.imul(H,Te)|0,F=F+Math.imul(H,je)|0,T=T+Math.imul(q,Ve)|0,C=C+Math.imul(q,Ye)|0,C=C+Math.imul($,Ve)|0,F=F+Math.imul($,Ye)|0,T=T+Math.imul(K,st)|0,C=C+Math.imul(K,at)|0,C=C+Math.imul(G,st)|0,F=F+Math.imul(G,at)|0,T=T+Math.imul(ye,ot)|0,C=C+Math.imul(ye,ut)|0,C=C+Math.imul(Ee,ot)|0,F=F+Math.imul(Ee,ut)|0;var Ki=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,T=Math.imul(Ne,z),C=Math.imul(Ne,X),C=C+Math.imul(Me,z)|0,F=Math.imul(Me,X),T=T+Math.imul(_e,be)|0,C=C+Math.imul(_e,ve)|0,C=C+Math.imul(me,be)|0,F=F+Math.imul(me,ve)|0,T=T+Math.imul(ne,Te)|0,C=C+Math.imul(ne,je)|0,C=C+Math.imul(te,Te)|0,F=F+Math.imul(te,je)|0,T=T+Math.imul(J,Ve)|0,C=C+Math.imul(J,Ye)|0,C=C+Math.imul(H,Ve)|0,F=F+Math.imul(H,Ye)|0,T=T+Math.imul(q,st)|0,C=C+Math.imul(q,at)|0,C=C+Math.imul($,st)|0,F=F+Math.imul($,at)|0,T=T+Math.imul(K,ot)|0,C=C+Math.imul(K,ut)|0,C=C+Math.imul(G,ot)|0,F=F+Math.imul(G,ut)|0;var Ji=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,T=Math.imul(Ne,be),C=Math.imul(Ne,ve),C=C+Math.imul(Me,be)|0,F=Math.imul(Me,ve),T=T+Math.imul(_e,Te)|0,C=C+Math.imul(_e,je)|0,C=C+Math.imul(me,Te)|0,F=F+Math.imul(me,je)|0,T=T+Math.imul(ne,Ve)|0,C=C+Math.imul(ne,Ye)|0,C=C+Math.imul(te,Ve)|0,F=F+Math.imul(te,Ye)|0,T=T+Math.imul(J,st)|0,C=C+Math.imul(J,at)|0,C=C+Math.imul(H,st)|0,F=F+Math.imul(H,at)|0,T=T+Math.imul(q,ot)|0,C=C+Math.imul(q,ut)|0,C=C+Math.imul($,ot)|0,F=F+Math.imul($,ut)|0;var Xi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,T=Math.imul(Ne,Te),C=Math.imul(Ne,je),C=C+Math.imul(Me,Te)|0,F=Math.imul(Me,je),T=T+Math.imul(_e,Ve)|0,C=C+Math.imul(_e,Ye)|0,C=C+Math.imul(me,Ve)|0,F=F+Math.imul(me,Ye)|0,T=T+Math.imul(ne,st)|0,C=C+Math.imul(ne,at)|0,C=C+Math.imul(te,st)|0,F=F+Math.imul(te,at)|0,T=T+Math.imul(J,ot)|0,C=C+Math.imul(J,ut)|0,C=C+Math.imul(H,ot)|0,F=F+Math.imul(H,ut)|0;var Yi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,T=Math.imul(Ne,Ve),C=Math.imul(Ne,Ye),C=C+Math.imul(Me,Ve)|0,F=Math.imul(Me,Ye),T=T+Math.imul(_e,st)|0,C=C+Math.imul(_e,at)|0,C=C+Math.imul(me,st)|0,F=F+Math.imul(me,at)|0,T=T+Math.imul(ne,ot)|0,C=C+Math.imul(ne,ut)|0,C=C+Math.imul(te,ot)|0,F=F+Math.imul(te,ut)|0;var Qi=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,T=Math.imul(Ne,st),C=Math.imul(Ne,at),C=C+Math.imul(Me,st)|0,F=Math.imul(Me,at),T=T+Math.imul(_e,ot)|0,C=C+Math.imul(_e,ut)|0,C=C+Math.imul(me,ot)|0,F=F+Math.imul(me,ut)|0;var es=(O+T|0)+((C&8191)<<13)|0;O=(F+(C>>>13)|0)+(es>>>26)|0,es&=67108863,T=Math.imul(Ne,ot),C=Math.imul(Ne,ut),C=C+Math.imul(Me,ot)|0,F=Math.imul(Me,ut);var ts=(O+T|0)+((C&8191)<<13)|0;return O=(F+(C>>>13)|0)+(ts>>>26)|0,ts&=67108863,E[0]=Bi,E[1]=Ni,E[2]=zi,E[3]=ji,E[4]=qi,E[5]=Ui,E[6]=$i,E[7]=Hi,E[8]=Wi,E[9]=Vi,E[10]=Gi,E[11]=Zi,E[12]=Ki,E[13]=Ji,E[14]=Xi,E[15]=Yi,E[16]=Qi,E[17]=es,E[18]=ts,O!==0&&(E[19]=O,w.length++),w};Math.imul||(m=b);function v(I,d,g){g.negative=d.negative^I.negative,g.length=I.length+d.length;for(var w=0,D=0,S=0;S<g.length-1;S++){var E=D;D=0;for(var O=w&67108863,T=Math.min(S,d.length-1),C=Math.max(0,S-I.length+1);C<=T;C++){var F=S-C,j=I.words[F]|0,W=d.words[C]|0,V=j*W,Z=V&67108863;E=E+(V/67108864|0)|0,Z=Z+O|0,O=Z&67108863,E=E+(Z>>>26)|0,D+=E>>>26,E&=67108863}g.words[S]=O,w=E,E=D}return w!==0?g.words[S]=w:g.length--,g.strip()}function x(I,d,g){var w=new _;return w.mulp(I,d,g)}n.prototype.mulTo=function(d,g){var w,D=this.length+d.length;return this.length===10&&d.length===10?w=m(this,d,g):D<63?w=b(this,d,g):D<1024?w=v(this,d,g):w=x(this,d,g),w};function _(I,d){this.x=I,this.y=d}_.prototype.makeRBT=function(d){for(var g=new Array(d),w=n.prototype._countBits(d)-1,D=0;D<d;D++)g[D]=this.revBin(D,w,d);return g},_.prototype.revBin=function(d,g,w){if(d===0||d===w-1)return d;for(var D=0,S=0;S<g;S++)D|=(d&1)<<g-S-1,d>>=1;return D},_.prototype.permute=function(d,g,w,D,S,E){for(var O=0;O<E;O++)D[O]=g[d[O]],S[O]=w[d[O]]},_.prototype.transform=function(d,g,w,D,S,E){this.permute(E,d,g,w,D,S);for(var O=1;O<S;O<<=1)for(var T=O<<1,C=Math.cos(2*Math.PI/T),F=Math.sin(2*Math.PI/T),j=0;j<S;j+=T)for(var W=C,V=F,Z=0;Z<O;Z++){var ie=w[j+Z],pe=D[j+Z],le=w[j+Z+O],se=D[j+Z+O],he=W*le-V*se;se=W*se+V*le,le=he,w[j+Z]=ie+le,D[j+Z]=pe+se,w[j+Z+O]=ie-le,D[j+Z+O]=pe-se,Z!==T&&(he=C*W-F*V,V=C*V+F*W,W=he)}},_.prototype.guessLen13b=function(d,g){var w=Math.max(g,d)|1,D=w&1,S=0;for(w=w/2|0;w;w=w>>>1)S++;return 1<<S+1+D},_.prototype.conjugate=function(d,g,w){if(!(w<=1))for(var D=0;D<w/2;D++){var S=d[D];d[D]=d[w-D-1],d[w-D-1]=S,S=g[D],g[D]=-g[w-D-1],g[w-D-1]=-S}},_.prototype.normalize13b=function(d,g){for(var w=0,D=0;D<g/2;D++){var S=Math.round(d[2*D+1]/g)*8192+Math.round(d[2*D]/g)+w;d[D]=S&67108863,S<67108864?w=0:w=S/67108864|0}return d},_.prototype.convert13b=function(d,g,w,D){for(var S=0,E=0;E<g;E++)S=S+(d[E]|0),w[2*E]=S&8191,S=S>>>13,w[2*E+1]=S&8191,S=S>>>13;for(E=2*g;E<D;++E)w[E]=0;s(S===0),s((S&-8192)===0)},_.prototype.stub=function(d){for(var g=new Array(d),w=0;w<d;w++)g[w]=0;return g},_.prototype.mulp=function(d,g,w){var D=2*this.guessLen13b(d.length,g.length),S=this.makeRBT(D),E=this.stub(D),O=new Array(D),T=new Array(D),C=new Array(D),F=new Array(D),j=new Array(D),W=new Array(D),V=w.words;V.length=D,this.convert13b(d.words,d.length,O,D),this.convert13b(g.words,g.length,F,D),this.transform(O,E,T,C,D,S),this.transform(F,E,j,W,D,S);for(var Z=0;Z<D;Z++){var ie=T[Z]*j[Z]-C[Z]*W[Z];C[Z]=T[Z]*W[Z]+C[Z]*j[Z],T[Z]=ie}return this.conjugate(T,C,D),this.transform(T,C,V,E,D,S),this.conjugate(V,E,D),this.normalize13b(V,D),w.negative=d.negative^g.negative,w.length=d.length+g.length,w.strip()},n.prototype.mul=function(d){var g=new n(null);return g.words=new Array(this.length+d.length),this.mulTo(d,g)},n.prototype.mulf=function(d){var g=new n(null);return g.words=new Array(this.length+d.length),x(this,d,g)},n.prototype.imul=function(d){return this.clone().mulTo(d,this)},n.prototype.imuln=function(d){s(typeof d=="number"),s(d<67108864);for(var g=0,w=0;w<this.length;w++){var D=(this.words[w]|0)*d,S=(D&67108863)+(g&67108863);g>>=26,g+=D/67108864|0,g+=S>>>26,this.words[w]=S&67108863}return g!==0&&(this.words[w]=g,this.length++),this},n.prototype.muln=function(d){return this.clone().imuln(d)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(d){var g=p(d);if(g.length===0)return new n(1);for(var w=this,D=0;D<g.length&&g[D]===0;D++,w=w.sqr());if(++D<g.length)for(var S=w.sqr();D<g.length;D++,S=S.sqr())g[D]!==0&&(w=w.mul(S));return w},n.prototype.iushln=function(d){s(typeof d=="number"&&d>=0);var g=d%26,w=(d-g)/26,D=67108863>>>26-g<<26-g,S;if(g!==0){var E=0;for(S=0;S<this.length;S++){var O=this.words[S]&D,T=(this.words[S]|0)-O<<g;this.words[S]=T|E,E=O>>>26-g}E&&(this.words[S]=E,this.length++)}if(w!==0){for(S=this.length-1;S>=0;S--)this.words[S+w]=this.words[S];for(S=0;S<w;S++)this.words[S]=0;this.length+=w}return this.strip()},n.prototype.ishln=function(d){return s(this.negative===0),this.iushln(d)},n.prototype.iushrn=function(d,g,w){s(typeof d=="number"&&d>=0);var D;g?D=(g-g%26)/26:D=0;var S=d%26,E=Math.min((d-S)/26,this.length),O=67108863^67108863>>>S<<S,T=w;if(D-=E,D=Math.max(0,D),T){for(var C=0;C<E;C++)T.words[C]=this.words[C];T.length=E}if(E!==0)if(this.length>E)for(this.length-=E,C=0;C<this.length;C++)this.words[C]=this.words[C+E];else this.words[0]=0,this.length=1;var F=0;for(C=this.length-1;C>=0&&(F!==0||C>=D);C--){var j=this.words[C]|0;this.words[C]=F<<26-S|j>>>S,F=j&O}return T&&F!==0&&(T.words[T.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(d,g,w){return s(this.negative===0),this.iushrn(d,g,w)},n.prototype.shln=function(d){return this.clone().ishln(d)},n.prototype.ushln=function(d){return this.clone().iushln(d)},n.prototype.shrn=function(d){return this.clone().ishrn(d)},n.prototype.ushrn=function(d){return this.clone().iushrn(d)},n.prototype.testn=function(d){s(typeof d=="number"&&d>=0);var g=d%26,w=(d-g)/26,D=1<<g;if(this.length<=w)return!1;var S=this.words[w];return!!(S&D)},n.prototype.imaskn=function(d){s(typeof d=="number"&&d>=0);var g=d%26,w=(d-g)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(g!==0&&w++,this.length=Math.min(w,this.length),g!==0){var D=67108863^67108863>>>g<<g;this.words[this.length-1]&=D}return this.strip()},n.prototype.maskn=function(d){return this.clone().imaskn(d)},n.prototype.iaddn=function(d){return s(typeof d=="number"),s(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},n.prototype._iaddn=function(d){this.words[0]+=d;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},n.prototype.isubn=function(d){if(s(typeof d=="number"),s(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},n.prototype.addn=function(d){return this.clone().iaddn(d)},n.prototype.subn=function(d){return this.clone().isubn(d)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(d,g,w){var D=d.length+w,S;this._expand(D);var E,O=0;for(S=0;S<d.length;S++){E=(this.words[S+w]|0)+O;var T=(d.words[S]|0)*g;E-=T&67108863,O=(E>>26)-(T/67108864|0),this.words[S+w]=E&67108863}for(;S<this.length-w;S++)E=(this.words[S+w]|0)+O,O=E>>26,this.words[S+w]=E&67108863;if(O===0)return this.strip();for(s(O===-1),O=0,S=0;S<this.length;S++)E=-(this.words[S]|0)+O,O=E>>26,this.words[S]=E&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(d,g){var w=this.length-d.length,D=this.clone(),S=d,E=S.words[S.length-1]|0,O=this._countBits(E);w=26-O,w!==0&&(S=S.ushln(w),D.iushln(w),E=S.words[S.length-1]|0);var T=D.length-S.length,C;if(g!=="mod"){C=new n(null),C.length=T+1,C.words=new Array(C.length);for(var F=0;F<C.length;F++)C.words[F]=0}var j=D.clone()._ishlnsubmul(S,1,T);j.negative===0&&(D=j,C&&(C.words[T]=1));for(var W=T-1;W>=0;W--){var V=(D.words[S.length+W]|0)*67108864+(D.words[S.length+W-1]|0);for(V=Math.min(V/E|0,67108863),D._ishlnsubmul(S,V,W);D.negative!==0;)V--,D.negative=0,D._ishlnsubmul(S,1,W),D.isZero()||(D.negative^=1);C&&(C.words[W]=V)}return C&&C.strip(),D.strip(),g!=="div"&&w!==0&&D.iushrn(w),{div:C||null,mod:D}},n.prototype.divmod=function(d,g,w){if(s(!d.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var D,S,E;return this.negative!==0&&d.negative===0?(E=this.neg().divmod(d,g),g!=="mod"&&(D=E.div.neg()),g!=="div"&&(S=E.mod.neg(),w&&S.negative!==0&&S.iadd(d)),{div:D,mod:S}):this.negative===0&&d.negative!==0?(E=this.divmod(d.neg(),g),g!=="mod"&&(D=E.div.neg()),{div:D,mod:E.mod}):(this.negative&d.negative)!==0?(E=this.neg().divmod(d.neg(),g),g!=="div"&&(S=E.mod.neg(),w&&S.negative!==0&&S.isub(d)),{div:E.div,mod:S}):d.length>this.length||this.cmp(d)<0?{div:new n(0),mod:this}:d.length===1?g==="div"?{div:this.divn(d.words[0]),mod:null}:g==="mod"?{div:null,mod:new n(this.modn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new n(this.modn(d.words[0]))}:this._wordDiv(d,g)},n.prototype.div=function(d){return this.divmod(d,"div",!1).div},n.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},n.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},n.prototype.divRound=function(d){var g=this.divmod(d);if(g.mod.isZero())return g.div;var w=g.div.negative!==0?g.mod.isub(d):g.mod,D=d.ushrn(1),S=d.andln(1),E=w.cmp(D);return E<0||S===1&&E===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},n.prototype.modn=function(d){s(d<=67108863);for(var g=(1<<26)%d,w=0,D=this.length-1;D>=0;D--)w=(g*w+(this.words[D]|0))%d;return w},n.prototype.idivn=function(d){s(d<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var D=(this.words[w]|0)+g*67108864;this.words[w]=D/d|0,g=D%d}return this.strip()},n.prototype.divn=function(d){return this.clone().idivn(d)},n.prototype.egcd=function(d){s(d.negative===0),s(!d.isZero());var g=this,w=d.clone();g.negative!==0?g=g.umod(d):g=g.clone();for(var D=new n(1),S=new n(0),E=new n(0),O=new n(1),T=0;g.isEven()&&w.isEven();)g.iushrn(1),w.iushrn(1),++T;for(var C=w.clone(),F=g.clone();!g.isZero();){for(var j=0,W=1;(g.words[0]&W)===0&&j<26;++j,W<<=1);if(j>0)for(g.iushrn(j);j-- >0;)(D.isOdd()||S.isOdd())&&(D.iadd(C),S.isub(F)),D.iushrn(1),S.iushrn(1);for(var V=0,Z=1;(w.words[0]&Z)===0&&V<26;++V,Z<<=1);if(V>0)for(w.iushrn(V);V-- >0;)(E.isOdd()||O.isOdd())&&(E.iadd(C),O.isub(F)),E.iushrn(1),O.iushrn(1);g.cmp(w)>=0?(g.isub(w),D.isub(E),S.isub(O)):(w.isub(g),E.isub(D),O.isub(S))}return{a:E,b:O,gcd:w.iushln(T)}},n.prototype._invmp=function(d){s(d.negative===0),s(!d.isZero());var g=this,w=d.clone();g.negative!==0?g=g.umod(d):g=g.clone();for(var D=new n(1),S=new n(0),E=w.clone();g.cmpn(1)>0&&w.cmpn(1)>0;){for(var O=0,T=1;(g.words[0]&T)===0&&O<26;++O,T<<=1);if(O>0)for(g.iushrn(O);O-- >0;)D.isOdd()&&D.iadd(E),D.iushrn(1);for(var C=0,F=1;(w.words[0]&F)===0&&C<26;++C,F<<=1);if(C>0)for(w.iushrn(C);C-- >0;)S.isOdd()&&S.iadd(E),S.iushrn(1);g.cmp(w)>=0?(g.isub(w),D.isub(S)):(w.isub(g),S.isub(D))}var j;return g.cmpn(1)===0?j=D:j=S,j.cmpn(0)<0&&j.iadd(d),j},n.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var g=this.clone(),w=d.clone();g.negative=0,w.negative=0;for(var D=0;g.isEven()&&w.isEven();D++)g.iushrn(1),w.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;w.isEven();)w.iushrn(1);var S=g.cmp(w);if(S<0){var E=g;g=w,w=E}else if(S===0||w.cmpn(1)===0)break;g.isub(w)}while(!0);return w.iushln(D)},n.prototype.invm=function(d){return this.egcd(d).a.umod(d)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(d){return this.words[0]&d},n.prototype.bincn=function(d){s(typeof d=="number");var g=d%26,w=(d-g)/26,D=1<<g;if(this.length<=w)return this._expand(w+1),this.words[w]|=D,this;for(var S=D,E=w;S!==0&&E<this.length;E++){var O=this.words[E]|0;O+=S,S=O>>>26,O&=67108863,this.words[E]=O}return S!==0&&(this.words[E]=S,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(d){var g=d<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var w;if(this.length>1)w=1;else{g&&(d=-d),s(d<=67108863,"Number is too big");var D=this.words[0]|0;w=D===d?0:D<d?-1:1}return this.negative!==0?-w|0:w},n.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var g=this.ucmp(d);return this.negative!==0?-g|0:g},n.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var g=0,w=this.length-1;w>=0;w--){var D=this.words[w]|0,S=d.words[w]|0;if(D!==S){D<S?g=-1:D>S&&(g=1);break}}return g},n.prototype.gtn=function(d){return this.cmpn(d)===1},n.prototype.gt=function(d){return this.cmp(d)===1},n.prototype.gten=function(d){return this.cmpn(d)>=0},n.prototype.gte=function(d){return this.cmp(d)>=0},n.prototype.ltn=function(d){return this.cmpn(d)===-1},n.prototype.lt=function(d){return this.cmp(d)===-1},n.prototype.lten=function(d){return this.cmpn(d)<=0},n.prototype.lte=function(d){return this.cmp(d)<=0},n.prototype.eqn=function(d){return this.cmpn(d)===0},n.prototype.eq=function(d){return this.cmp(d)===0},n.red=function(d){return new L(d)},n.prototype.toRed=function(d){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},n.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(d){return this.red=d,this},n.prototype.forceRed=function(d){return s(!this.red,"Already a number in reduction context"),this._forceRed(d)},n.prototype.redAdd=function(d){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},n.prototype.redIAdd=function(d){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},n.prototype.redSub=function(d){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},n.prototype.redISub=function(d){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},n.prototype.redShl=function(d){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},n.prototype.redMul=function(d){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},n.prototype.redIMul=function(d){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},n.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(d){return s(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var y={k256:null,p224:null,p192:null,p25519:null};function k(I,d){this.name=I,this.p=new n(d,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var d=new n(null);return d.words=new Array(Math.ceil(this.n/13)),d},k.prototype.ireduce=function(d){var g=d,w;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),w=g.bitLength();while(w>this.n);var D=w<this.n?-1:g.ucmp(this.p);return D===0?(g.words[0]=0,g.length=1):D>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},k.prototype.split=function(d,g){d.iushrn(this.n,0,g)},k.prototype.imulK=function(d){return d.imul(this.k)};function A(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(A,k),A.prototype.split=function(d,g){for(var w=4194303,D=Math.min(d.length,9),S=0;S<D;S++)g.words[S]=d.words[S];if(g.length=D,d.length<=9){d.words[0]=0,d.length=1;return}var E=d.words[9];for(g.words[g.length++]=E&w,S=10;S<d.length;S++){var O=d.words[S]|0;d.words[S-10]=(O&w)<<4|E>>>22,E=O}E>>>=22,d.words[S-10]=E,E===0&&d.length>10?d.length-=10:d.length-=9},A.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var g=0,w=0;w<d.length;w++){var D=d.words[w]|0;g+=D*977,d.words[w]=g&67108863,g=D*64+(g/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function M(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(M,k);function P(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(P,k);function R(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(R,k),R.prototype.imulK=function(d){for(var g=0,w=0;w<d.length;w++){var D=(d.words[w]|0)*19+g,S=D&67108863;D>>>=26,d.words[w]=S,g=D}return g!==0&&(d.words[d.length++]=g),d},n._prime=function(d){if(y[d])return y[d];var g;if(d==="k256")g=new A;else if(d==="p224")g=new M;else if(d==="p192")g=new P;else if(d==="p25519")g=new R;else throw new Error("Unknown prime "+d);return y[d]=g,g};function L(I){if(typeof I=="string"){var d=n._prime(I);this.m=d.p,this.prime=d}else s(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}L.prototype._verify1=function(d){s(d.negative===0,"red works only with positives"),s(d.red,"red works only with red numbers")},L.prototype._verify2=function(d,g){s((d.negative|g.negative)===0,"red works only with positives"),s(d.red&&d.red===g.red,"red works only with red numbers")},L.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):d.umod(this.m)._forceRed(this)},L.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},L.prototype.add=function(d,g){this._verify2(d,g);var w=d.add(g);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},L.prototype.iadd=function(d,g){this._verify2(d,g);var w=d.iadd(g);return w.cmp(this.m)>=0&&w.isub(this.m),w},L.prototype.sub=function(d,g){this._verify2(d,g);var w=d.sub(g);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},L.prototype.isub=function(d,g){this._verify2(d,g);var w=d.isub(g);return w.cmpn(0)<0&&w.iadd(this.m),w},L.prototype.shl=function(d,g){return this._verify1(d),this.imod(d.ushln(g))},L.prototype.imul=function(d,g){return this._verify2(d,g),this.imod(d.imul(g))},L.prototype.mul=function(d,g){return this._verify2(d,g),this.imod(d.mul(g))},L.prototype.isqr=function(d){return this.imul(d,d.clone())},L.prototype.sqr=function(d){return this.mul(d,d)},L.prototype.sqrt=function(d){if(d.isZero())return d.clone();var g=this.m.andln(3);if(s(g%2===1),g===3){var w=this.m.add(new n(1)).iushrn(2);return this.pow(d,w)}for(var D=this.m.subn(1),S=0;!D.isZero()&&D.andln(1)===0;)S++,D.iushrn(1);s(!D.isZero());var E=new n(1).toRed(this),O=E.redNeg(),T=this.m.subn(1).iushrn(1),C=this.m.bitLength();for(C=new n(2*C*C).toRed(this);this.pow(C,T).cmp(O)!==0;)C.redIAdd(O);for(var F=this.pow(C,D),j=this.pow(d,D.addn(1).iushrn(1)),W=this.pow(d,D),V=S;W.cmp(E)!==0;){for(var Z=W,ie=0;Z.cmp(E)!==0;ie++)Z=Z.redSqr();s(ie<V);var pe=this.pow(F,new n(1).iushln(V-ie-1));j=j.redMul(pe),F=pe.redSqr(),W=W.redMul(F),V=ie}return j},L.prototype.invm=function(d){var g=d._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},L.prototype.pow=function(d,g){if(g.isZero())return new n(1).toRed(this);if(g.cmpn(1)===0)return d.clone();var w=4,D=new Array(1<<w);D[0]=new n(1).toRed(this),D[1]=d;for(var S=2;S<D.length;S++)D[S]=this.mul(D[S-1],d);var E=D[0],O=0,T=0,C=g.bitLength()%26;for(C===0&&(C=26),S=g.length-1;S>=0;S--){for(var F=g.words[S],j=C-1;j>=0;j--){var W=F>>j&1;if(E!==D[0]&&(E=this.sqr(E)),W===0&&O===0){T=0;continue}O<<=1,O|=W,T++,!(T!==w&&(S!==0||j!==0))&&(E=this.mul(E,D[O]),T=0,O=0)}C=26}return E},L.prototype.convertTo=function(d){var g=d.umod(this.m);return g===d?g.clone():g},L.prototype.convertFrom=function(d){var g=d.clone();return g.red=null,g},n.mont=function(d){return new N(d)};function N(I){L.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(N,L),N.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},N.prototype.convertFrom=function(d){var g=this.imod(d.mul(this.rinv));return g.red=null,g},N.prototype.imul=function(d,g){if(d.isZero()||g.isZero())return d.words[0]=0,d.length=1,d;var w=d.imul(g),D=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=w.isub(D).iushrn(this.shift),E=S;return S.cmp(this.m)>=0?E=S.isub(this.m):S.cmpn(0)<0&&(E=S.iadd(this.m)),E._forceRed(this)},N.prototype.mul=function(d,g){if(d.isZero()||g.isZero())return new n(0)._forceRed(this);var w=d.mul(g),D=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=w.isub(D).iushrn(this.shift),E=S;return S.cmp(this.m)>=0?E=S.isub(this.m):S.cmpn(0)<0&&(E=S.iadd(this.m)),E._forceRed(this)},N.prototype.invm=function(d){var g=this.imod(d._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,t1)}(ci)),ci.exports}var ps,Ko;function Gr(){if(Ko)return ps;Ko=1,ps=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,s,i){if(r!=s)throw new Error(i||"Assertion failed: "+r+" != "+s)},ps}var bs={},Jo;function Bh(){return Jo||(Jo=1,function(t){var e=t;function r(n,a){if(Array.isArray(n))return n.slice();if(!n)return[];var o=[];if(typeof n!="string"){for(var c=0;c<n.length;c++)o[c]=n[c]|0;return o}if(a==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var c=0;c<n.length;c+=2)o.push(parseInt(n[c]+n[c+1],16))}else for(var c=0;c<n.length;c++){var u=n.charCodeAt(c),f=u>>8,l=u&255;f?o.push(f,l):o.push(l)}return o}e.toArray=r;function s(n){return n.length===1?"0"+n:n}e.zero2=s;function i(n){for(var a="",o=0;o<n.length;o++)a+=s(n[o].toString(16));return a}e.toHex=i,e.encode=function(a,o){return o==="hex"?i(a):a}}(bs)),bs}var Xo;function St(){return Xo||(Xo=1,function(t){var e=t,r=dr(),s=Gr(),i=Bh();e.assert=s,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function n(f,l,h){var p=new Array(Math.max(f.bitLength(),h)+1),b;for(b=0;b<p.length;b+=1)p[b]=0;var m=1<<l+1,v=f.clone();for(b=0;b<p.length;b++){var x,_=v.andln(m-1);v.isOdd()?(_>(m>>1)-1?x=(m>>1)-_:x=_,v.isubn(x)):x=0,p[b]=x,v.iushrn(1)}return p}e.getNAF=n;function a(f,l){var h=[[],[]];f=f.clone(),l=l.clone();for(var p=0,b=0,m;f.cmpn(-p)>0||l.cmpn(-b)>0;){var v=f.andln(3)+p&3,x=l.andln(3)+b&3;v===3&&(v=-1),x===3&&(x=-1);var _;(v&1)===0?_=0:(m=f.andln(7)+p&7,(m===3||m===5)&&x===2?_=-v:_=v),h[0].push(_);var y;(x&1)===0?y=0:(m=l.andln(7)+b&7,(m===3||m===5)&&v===2?y=-x:y=x),h[1].push(y),2*p===_+1&&(p=1-p),2*b===y+1&&(b=1-b),f.iushrn(1),l.iushrn(1)}return h}e.getJSF=a;function o(f,l,h){var p="_"+l;f.prototype[l]=function(){return this[p]!==void 0?this[p]:this[p]=h.call(this)}}e.cachedProperty=o;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function u(f){return new r(f,"hex","le")}e.intFromLE=u}(ds)),ds}var Wn={exports:{}},Yo;function Nh(){if(Yo)return Wn.exports;Yo=1;var t;Wn.exports=function(i){return t||(t=new e(null)),t.generate(i)};function e(s){this.rand=s}if(Wn.exports.Rand=e,e.prototype.generate=function(i){return this._rand(i)},e.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var n=new Uint8Array(i),a=0;a<n.length;a++)n[a]=this.rand.getByte();return n},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(i){var n=new Uint8Array(i);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(i){var n=new Uint8Array(i);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=Lh;if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(i){return r.randomBytes(i)}}catch{}return Wn.exports}var ms={},gs,Qo;function Mi(){if(Qo)return gs;Qo=1;var t=dr(),e=St(),r=e.getNAF,s=e.getJSF,i=e.assert;function n(o,c){this.type=o,this.p=new t(c.p,16),this.red=c.prime?t.red(c.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=c.n&&new t(c.n,16),this.g=c.g&&this.pointFromJSON(c.g,c.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var u=this.n&&this.p.div(this.n);!u||u.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}gs=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(c,u){i(c.precomputed);var f=c._getDoubles(),l=r(u,1,this._bitLength),h=(1<<f.step+1)-(f.step%2===0?2:1);h/=3;var p=[],b,m;for(b=0;b<l.length;b+=f.step){m=0;for(var v=b+f.step-1;v>=b;v--)m=(m<<1)+l[v];p.push(m)}for(var x=this.jpoint(null,null,null),_=this.jpoint(null,null,null),y=h;y>0;y--){for(b=0;b<p.length;b++)m=p[b],m===y?_=_.mixedAdd(f.points[b]):m===-y&&(_=_.mixedAdd(f.points[b].neg()));x=x.add(_)}return x.toP()},n.prototype._wnafMul=function(c,u){var f=4,l=c._getNAFPoints(f);f=l.wnd;for(var h=l.points,p=r(u,f,this._bitLength),b=this.jpoint(null,null,null),m=p.length-1;m>=0;m--){for(var v=0;m>=0&&p[m]===0;m--)v++;if(m>=0&&v++,b=b.dblp(v),m<0)break;var x=p[m];i(x!==0),c.type==="affine"?x>0?b=b.mixedAdd(h[x-1>>1]):b=b.mixedAdd(h[-x-1>>1].neg()):x>0?b=b.add(h[x-1>>1]):b=b.add(h[-x-1>>1].neg())}return c.type==="affine"?b.toP():b},n.prototype._wnafMulAdd=function(c,u,f,l,h){var p=this._wnafT1,b=this._wnafT2,m=this._wnafT3,v=0,x,_,y;for(x=0;x<l;x++){y=u[x];var k=y._getNAFPoints(c);p[x]=k.wnd,b[x]=k.points}for(x=l-1;x>=1;x-=2){var A=x-1,M=x;if(p[A]!==1||p[M]!==1){m[A]=r(f[A],p[A],this._bitLength),m[M]=r(f[M],p[M],this._bitLength),v=Math.max(m[A].length,v),v=Math.max(m[M].length,v);continue}var P=[u[A],null,null,u[M]];u[A].y.cmp(u[M].y)===0?(P[1]=u[A].add(u[M]),P[2]=u[A].toJ().mixedAdd(u[M].neg())):u[A].y.cmp(u[M].y.redNeg())===0?(P[1]=u[A].toJ().mixedAdd(u[M]),P[2]=u[A].add(u[M].neg())):(P[1]=u[A].toJ().mixedAdd(u[M]),P[2]=u[A].toJ().mixedAdd(u[M].neg()));var R=[-3,-1,-5,-7,0,7,5,1,3],L=s(f[A],f[M]);for(v=Math.max(L[0].length,v),m[A]=new Array(v),m[M]=new Array(v),_=0;_<v;_++){var N=L[0][_]|0,I=L[1][_]|0;m[A][_]=R[(N+1)*3+(I+1)],m[M][_]=0,b[A]=P}}var d=this.jpoint(null,null,null),g=this._wnafT4;for(x=v;x>=0;x--){for(var w=0;x>=0;){var D=!0;for(_=0;_<l;_++)g[_]=m[_][x]|0,g[_]!==0&&(D=!1);if(!D)break;w++,x--}if(x>=0&&w++,d=d.dblp(w),x<0)break;for(_=0;_<l;_++){var S=g[_];S!==0&&(S>0?y=b[_][S-1>>1]:S<0&&(y=b[_][-S-1>>1].neg()),y.type==="affine"?d=d.mixedAdd(y):d=d.add(y))}}for(x=0;x<l;x++)b[x]=null;return h?d:d.toP()};function a(o,c){this.curve=o,this.type=c,this.precomputed=null}return n.BasePoint=a,a.prototype.eq=function(){throw new Error("Not implemented")},a.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(c,u){c=e.toArray(c,u);var f=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*f){c[0]===6?i(c[c.length-1]%2===0):c[0]===7&&i(c[c.length-1]%2===1);var l=this.point(c.slice(1,1+f),c.slice(1+f,1+2*f));return l}else if((c[0]===2||c[0]===3)&&c.length-1===f)return this.pointFromX(c.slice(1,1+f),c[0]===3);throw new Error("Unknown point format")},a.prototype.encodeCompressed=function(c){return this.encode(c,!0)},a.prototype._encode=function(c){var u=this.curve.p.byteLength(),f=this.getX().toArray("be",u);return c?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",u))},a.prototype.encode=function(c,u){return e.encode(this._encode(u),c)},a.prototype.precompute=function(c){if(this.precomputed)return this;var u={doubles:null,naf:null,beta:null};return u.naf=this._getNAFPoints(8),u.doubles=this._getDoubles(4,c),u.beta=this._getBeta(),this.precomputed=u,this},a.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var u=this.precomputed.doubles;return u?u.points.length>=Math.ceil((c.bitLength()+1)/u.step):!1},a.prototype._getDoubles=function(c,u){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],l=this,h=0;h<u;h+=c){for(var p=0;p<c;p++)l=l.dbl();f.push(l)}return{step:c,points:f}},a.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var u=[this],f=(1<<c)-1,l=f===1?null:this.dbl(),h=1;h<f;h++)u[h]=u[h-1].add(l);return{wnd:c,points:u}},a.prototype._getBeta=function(){return null},a.prototype.dblp=function(c){for(var u=this,f=0;f<c;f++)u=u.dbl();return u},gs}var Vn={exports:{}},eu;function Ii(){return eu||(eu=1,typeof Object.create=="function"?Vn.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Vn.exports=function(e,r){if(r){e.super_=r;var s=function(){};s.prototype=r.prototype,e.prototype=new s,e.prototype.constructor=e}}),Vn.exports}var _s,tu;function r1(){if(tu)return _s;tu=1;var t=St(),e=dr(),r=Ii(),s=Mi(),i=t.assert;function n(c){s.call(this,"short",c),this.a=new e(c.a,16).toRed(this.red),this.b=new e(c.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(c),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(n,s),_s=n,n.prototype._getEndomorphism=function(u){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var f,l;if(u.beta)f=new e(u.beta,16).toRed(this.red);else{var h=this._getEndoRoots(this.p);f=h[0].cmp(h[1])<0?h[0]:h[1],f=f.toRed(this.red)}if(u.lambda)l=new e(u.lambda,16);else{var p=this._getEndoRoots(this.n);this.g.mul(p[0]).x.cmp(this.g.x.redMul(f))===0?l=p[0]:(l=p[1],i(this.g.mul(l).x.cmp(this.g.x.redMul(f))===0))}var b;return u.basis?b=u.basis.map(function(m){return{a:new e(m.a,16),b:new e(m.b,16)}}):b=this._getEndoBasis(l),{beta:f,lambda:l,basis:b}}},n.prototype._getEndoRoots=function(u){var f=u===this.p?this.red:e.mont(u),l=new e(2).toRed(f).redInvm(),h=l.redNeg(),p=new e(3).toRed(f).redNeg().redSqrt().redMul(l),b=h.redAdd(p).fromRed(),m=h.redSub(p).fromRed();return[b,m]},n.prototype._getEndoBasis=function(u){for(var f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=u,h=this.n.clone(),p=new e(1),b=new e(0),m=new e(0),v=new e(1),x,_,y,k,A,M,P,R=0,L,N;l.cmpn(0)!==0;){var I=h.div(l);L=h.sub(I.mul(l)),N=m.sub(I.mul(p));var d=v.sub(I.mul(b));if(!y&&L.cmp(f)<0)x=P.neg(),_=p,y=L.neg(),k=N;else if(y&&++R===2)break;P=L,h=l,l=L,m=p,p=N,v=b,b=d}A=L.neg(),M=N;var g=y.sqr().add(k.sqr()),w=A.sqr().add(M.sqr());return w.cmp(g)>=0&&(A=x,M=_),y.negative&&(y=y.neg(),k=k.neg()),A.negative&&(A=A.neg(),M=M.neg()),[{a:y,b:k},{a:A,b:M}]},n.prototype._endoSplit=function(u){var f=this.endo.basis,l=f[0],h=f[1],p=h.b.mul(u).divRound(this.n),b=l.b.neg().mul(u).divRound(this.n),m=p.mul(l.a),v=b.mul(h.a),x=p.mul(l.b),_=b.mul(h.b),y=u.sub(m).sub(v),k=x.add(_).neg();return{k1:y,k2:k}},n.prototype.pointFromX=function(u,f){u=new e(u,16),u.red||(u=u.toRed(this.red));var l=u.redSqr().redMul(u).redIAdd(u.redMul(this.a)).redIAdd(this.b),h=l.redSqrt();if(h.redSqr().redSub(l).cmp(this.zero)!==0)throw new Error("invalid point");var p=h.fromRed().isOdd();return(f&&!p||!f&&p)&&(h=h.redNeg()),this.point(u,h)},n.prototype.validate=function(u){if(u.inf)return!0;var f=u.x,l=u.y,h=this.a.redMul(f),p=f.redSqr().redMul(f).redIAdd(h).redIAdd(this.b);return l.redSqr().redISub(p).cmpn(0)===0},n.prototype._endoWnafMulAdd=function(u,f,l){for(var h=this._endoWnafT1,p=this._endoWnafT2,b=0;b<u.length;b++){var m=this._endoSplit(f[b]),v=u[b],x=v._getBeta();m.k1.negative&&(m.k1.ineg(),v=v.neg(!0)),m.k2.negative&&(m.k2.ineg(),x=x.neg(!0)),h[b*2]=v,h[b*2+1]=x,p[b*2]=m.k1,p[b*2+1]=m.k2}for(var _=this._wnafMulAdd(1,h,p,b*2,l),y=0;y<b*2;y++)h[y]=null,p[y]=null;return _};function a(c,u,f,l){s.BasePoint.call(this,c,"affine"),u===null&&f===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(u,16),this.y=new e(f,16),l&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(a,s.BasePoint),n.prototype.point=function(u,f,l){return new a(this,u,f,l)},n.prototype.pointFromJSON=function(u,f){return a.fromJSON(this,u,f)},a.prototype._getBeta=function(){if(this.curve.endo){var u=this.precomputed;if(u&&u.beta)return u.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(u){var l=this.curve,h=function(p){return l.point(p.x.redMul(l.endo.beta),p.y)};u.beta=f,f.precomputed={beta:null,naf:u.naf&&{wnd:u.naf.wnd,points:u.naf.points.map(h)},doubles:u.doubles&&{step:u.doubles.step,points:u.doubles.points.map(h)}}}return f}},a.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},a.fromJSON=function(u,f,l){typeof f=="string"&&(f=JSON.parse(f));var h=u.point(f[0],f[1],l);if(!f[2])return h;function p(m){return u.point(m[0],m[1],l)}var b=f[2];return h.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[h].concat(b.doubles.points.map(p))},naf:b.naf&&{wnd:b.naf.wnd,points:[h].concat(b.naf.points.map(p))}},h},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.inf},a.prototype.add=function(u){if(this.inf)return u;if(u.inf)return this;if(this.eq(u))return this.dbl();if(this.neg().eq(u))return this.curve.point(null,null);if(this.x.cmp(u.x)===0)return this.curve.point(null,null);var f=this.y.redSub(u.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(u.x).redInvm()));var l=f.redSqr().redISub(this.x).redISub(u.x),h=f.redMul(this.x.redSub(l)).redISub(this.y);return this.curve.point(l,h)},a.prototype.dbl=function(){if(this.inf)return this;var u=this.y.redAdd(this.y);if(u.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,l=this.x.redSqr(),h=u.redInvm(),p=l.redAdd(l).redIAdd(l).redIAdd(f).redMul(h),b=p.redSqr().redISub(this.x.redAdd(this.x)),m=p.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,m)},a.prototype.getX=function(){return this.x.fromRed()},a.prototype.getY=function(){return this.y.fromRed()},a.prototype.mul=function(u){return u=new e(u,16),this.isInfinity()?this:this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve.endo?this.curve._endoWnafMulAdd([this],[u]):this.curve._wnafMul(this,u)},a.prototype.mulAdd=function(u,f,l){var h=[this,f],p=[u,l];return this.curve.endo?this.curve._endoWnafMulAdd(h,p):this.curve._wnafMulAdd(1,h,p,2)},a.prototype.jmulAdd=function(u,f,l){var h=[this,f],p=[u,l];return this.curve.endo?this.curve._endoWnafMulAdd(h,p,!0):this.curve._wnafMulAdd(1,h,p,2,!0)},a.prototype.eq=function(u){return this===u||this.inf===u.inf&&(this.inf||this.x.cmp(u.x)===0&&this.y.cmp(u.y)===0)},a.prototype.neg=function(u){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(u&&this.precomputed){var l=this.precomputed,h=function(p){return p.neg()};f.precomputed={naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(h)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(h)}}}return f},a.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var u=this.curve.jpoint(this.x,this.y,this.curve.one);return u};function o(c,u,f,l){s.BasePoint.call(this,c,"jacobian"),u===null&&f===null&&l===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(u,16),this.y=new e(f,16),this.z=new e(l,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(o,s.BasePoint),n.prototype.jpoint=function(u,f,l){return new o(this,u,f,l)},o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var u=this.z.redInvm(),f=u.redSqr(),l=this.x.redMul(f),h=this.y.redMul(f).redMul(u);return this.curve.point(l,h)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(u){if(this.isInfinity())return u;if(u.isInfinity())return this;var f=u.z.redSqr(),l=this.z.redSqr(),h=this.x.redMul(f),p=u.x.redMul(l),b=this.y.redMul(f.redMul(u.z)),m=u.y.redMul(l.redMul(this.z)),v=h.redSub(p),x=b.redSub(m);if(v.cmpn(0)===0)return x.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _=v.redSqr(),y=_.redMul(v),k=h.redMul(_),A=x.redSqr().redIAdd(y).redISub(k).redISub(k),M=x.redMul(k.redISub(A)).redISub(b.redMul(y)),P=this.z.redMul(u.z).redMul(v);return this.curve.jpoint(A,M,P)},o.prototype.mixedAdd=function(u){if(this.isInfinity())return u.toJ();if(u.isInfinity())return this;var f=this.z.redSqr(),l=this.x,h=u.x.redMul(f),p=this.y,b=u.y.redMul(f).redMul(this.z),m=l.redSub(h),v=p.redSub(b);if(m.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var x=m.redSqr(),_=x.redMul(m),y=l.redMul(x),k=v.redSqr().redIAdd(_).redISub(y).redISub(y),A=v.redMul(y.redISub(k)).redISub(p.redMul(_)),M=this.z.redMul(m);return this.curve.jpoint(k,A,M)},o.prototype.dblp=function(u){if(u===0)return this;if(this.isInfinity())return this;if(!u)return this.dbl();var f;if(this.curve.zeroA||this.curve.threeA){var l=this;for(f=0;f<u;f++)l=l.dbl();return l}var h=this.curve.a,p=this.curve.tinv,b=this.x,m=this.y,v=this.z,x=v.redSqr().redSqr(),_=m.redAdd(m);for(f=0;f<u;f++){var y=b.redSqr(),k=_.redSqr(),A=k.redSqr(),M=y.redAdd(y).redIAdd(y).redIAdd(h.redMul(x)),P=b.redMul(k),R=M.redSqr().redISub(P.redAdd(P)),L=P.redISub(R),N=M.redMul(L);N=N.redIAdd(N).redISub(A);var I=_.redMul(v);f+1<u&&(x=x.redMul(A)),b=R,v=I,_=N}return this.curve.jpoint(b,_.redMul(p),v)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){var u,f,l;if(this.zOne){var h=this.x.redSqr(),p=this.y.redSqr(),b=p.redSqr(),m=this.x.redAdd(p).redSqr().redISub(h).redISub(b);m=m.redIAdd(m);var v=h.redAdd(h).redIAdd(h),x=v.redSqr().redISub(m).redISub(m),_=b.redIAdd(b);_=_.redIAdd(_),_=_.redIAdd(_),u=x,f=v.redMul(m.redISub(x)).redISub(_),l=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),k=this.y.redSqr(),A=k.redSqr(),M=this.x.redAdd(k).redSqr().redISub(y).redISub(A);M=M.redIAdd(M);var P=y.redAdd(y).redIAdd(y),R=P.redSqr(),L=A.redIAdd(A);L=L.redIAdd(L),L=L.redIAdd(L),u=R.redISub(M).redISub(M),f=P.redMul(M.redISub(u)).redISub(L),l=this.y.redMul(this.z),l=l.redIAdd(l)}return this.curve.jpoint(u,f,l)},o.prototype._threeDbl=function(){var u,f,l;if(this.zOne){var h=this.x.redSqr(),p=this.y.redSqr(),b=p.redSqr(),m=this.x.redAdd(p).redSqr().redISub(h).redISub(b);m=m.redIAdd(m);var v=h.redAdd(h).redIAdd(h).redIAdd(this.curve.a),x=v.redSqr().redISub(m).redISub(m);u=x;var _=b.redIAdd(b);_=_.redIAdd(_),_=_.redIAdd(_),f=v.redMul(m.redISub(x)).redISub(_),l=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),k=this.y.redSqr(),A=this.x.redMul(k),M=this.x.redSub(y).redMul(this.x.redAdd(y));M=M.redAdd(M).redIAdd(M);var P=A.redIAdd(A);P=P.redIAdd(P);var R=P.redAdd(P);u=M.redSqr().redISub(R),l=this.y.redAdd(this.z).redSqr().redISub(k).redISub(y);var L=k.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L),f=M.redMul(P.redISub(u)).redISub(L)}return this.curve.jpoint(u,f,l)},o.prototype._dbl=function(){var u=this.curve.a,f=this.x,l=this.y,h=this.z,p=h.redSqr().redSqr(),b=f.redSqr(),m=l.redSqr(),v=b.redAdd(b).redIAdd(b).redIAdd(u.redMul(p)),x=f.redAdd(f);x=x.redIAdd(x);var _=x.redMul(m),y=v.redSqr().redISub(_.redAdd(_)),k=_.redISub(y),A=m.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var M=v.redMul(k).redISub(A),P=l.redAdd(l).redMul(h);return this.curve.jpoint(y,M,P)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var u=this.x.redSqr(),f=this.y.redSqr(),l=this.z.redSqr(),h=f.redSqr(),p=u.redAdd(u).redIAdd(u),b=p.redSqr(),m=this.x.redAdd(f).redSqr().redISub(u).redISub(h);m=m.redIAdd(m),m=m.redAdd(m).redIAdd(m),m=m.redISub(b);var v=m.redSqr(),x=h.redIAdd(h);x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var _=p.redIAdd(m).redSqr().redISub(b).redISub(v).redISub(x),y=f.redMul(_);y=y.redIAdd(y),y=y.redIAdd(y);var k=this.x.redMul(v).redISub(y);k=k.redIAdd(k),k=k.redIAdd(k);var A=this.y.redMul(_.redMul(x.redISub(_)).redISub(m.redMul(v)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var M=this.z.redAdd(m).redSqr().redISub(l).redISub(v);return this.curve.jpoint(k,A,M)},o.prototype.mul=function(u,f){return u=new e(u,f),this.curve._wnafMul(this,u)},o.prototype.eq=function(u){if(u.type==="affine")return this.eq(u.toJ());if(this===u)return!0;var f=this.z.redSqr(),l=u.z.redSqr();if(this.x.redMul(l).redISub(u.x.redMul(f)).cmpn(0)!==0)return!1;var h=f.redMul(this.z),p=l.redMul(u.z);return this.y.redMul(p).redISub(u.y.redMul(h)).cmpn(0)===0},o.prototype.eqXToP=function(u){var f=this.z.redSqr(),l=u.toRed(this.curve.red).redMul(f);if(this.x.cmp(l)===0)return!0;for(var h=u.clone(),p=this.curve.redN.redMul(f);;){if(h.iadd(this.curve.n),h.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(p),this.x.cmp(l)===0)return!0}},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return this.z.cmpn(0)===0},_s}var vs,ru;function n1(){if(ru)return vs;ru=1;var t=dr(),e=Ii(),r=Mi(),s=St();function i(a){r.call(this,"mont",a),this.a=new t(a.a,16).toRed(this.red),this.b=new t(a.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(i,r),vs=i,i.prototype.validate=function(o){var c=o.normalize().x,u=c.redSqr(),f=u.redMul(c).redAdd(u.redMul(this.a)).redAdd(c),l=f.redSqrt();return l.redSqr().cmp(f)===0};function n(a,o,c){r.BasePoint.call(this,a,"projective"),o===null&&c===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(o,16),this.z=new t(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(n,r.BasePoint),i.prototype.decodePoint=function(o,c){return this.point(s.toArray(o,c),1)},i.prototype.point=function(o,c){return new n(this,o,c)},i.prototype.pointFromJSON=function(o){return n.fromJSON(this,o)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(o,c){return new n(o,c[0],c[1]||o.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.z.cmpn(0)===0},n.prototype.dbl=function(){var o=this.x.redAdd(this.z),c=o.redSqr(),u=this.x.redSub(this.z),f=u.redSqr(),l=c.redSub(f),h=c.redMul(f),p=l.redMul(f.redAdd(this.curve.a24.redMul(l)));return this.curve.point(h,p)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(o,c){var u=this.x.redAdd(this.z),f=this.x.redSub(this.z),l=o.x.redAdd(o.z),h=o.x.redSub(o.z),p=h.redMul(u),b=l.redMul(f),m=c.z.redMul(p.redAdd(b).redSqr()),v=c.x.redMul(p.redISub(b).redSqr());return this.curve.point(m,v)},n.prototype.mul=function(o){for(var c=o.clone(),u=this,f=this.curve.point(null,null),l=this,h=[];c.cmpn(0)!==0;c.iushrn(1))h.push(c.andln(1));for(var p=h.length-1;p>=0;p--)h[p]===0?(u=u.diffAdd(f,l),f=f.dbl()):(f=u.diffAdd(f,l),u=u.dbl());return f},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(o){return this.getX().cmp(o.getX())===0},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()},vs}var ys,nu;function i1(){if(nu)return ys;nu=1;var t=St(),e=dr(),r=Ii(),s=Mi(),i=t.assert;function n(o){this.twisted=(o.a|0)!==1,this.mOneA=this.twisted&&(o.a|0)===-1,this.extended=this.mOneA,s.call(this,"edwards",o),this.a=new e(o.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(o.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(o.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(o.c|0)===1}r(n,s),ys=n,n.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},n.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},n.prototype.jpoint=function(c,u,f,l){return this.point(c,u,f,l)},n.prototype.pointFromX=function(c,u){c=new e(c,16),c.red||(c=c.toRed(this.red));var f=c.redSqr(),l=this.c2.redSub(this.a.redMul(f)),h=this.one.redSub(this.c2.redMul(this.d).redMul(f)),p=l.redMul(h.redInvm()),b=p.redSqrt();if(b.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");var m=b.fromRed().isOdd();return(u&&!m||!u&&m)&&(b=b.redNeg()),this.point(c,b)},n.prototype.pointFromY=function(c,u){c=new e(c,16),c.red||(c=c.toRed(this.red));var f=c.redSqr(),l=f.redSub(this.c2),h=f.redMul(this.d).redMul(this.c2).redSub(this.a),p=l.redMul(h.redInvm());if(p.cmp(this.zero)===0){if(u)throw new Error("invalid point");return this.point(this.zero,c)}var b=p.redSqrt();if(b.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==u&&(b=b.redNeg()),this.point(b,c)},n.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var u=c.x.redSqr(),f=c.y.redSqr(),l=u.redMul(this.a).redAdd(f),h=this.c2.redMul(this.one.redAdd(this.d.redMul(u).redMul(f)));return l.cmp(h)===0};function a(o,c,u,f,l){s.BasePoint.call(this,o,"projective"),c===null&&u===null&&f===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(c,16),this.y=new e(u,16),this.z=f?new e(f,16):this.curve.one,this.t=l&&new e(l,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(a,s.BasePoint),n.prototype.pointFromJSON=function(c){return a.fromJSON(this,c)},n.prototype.point=function(c,u,f,l){return new a(this,c,u,f,l)},a.fromJSON=function(c,u){return new a(c,u[0],u[1],u[2])},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},a.prototype._extDbl=function(){var c=this.x.redSqr(),u=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var l=this.curve._mulA(c),h=this.x.redAdd(this.y).redSqr().redISub(c).redISub(u),p=l.redAdd(u),b=p.redSub(f),m=l.redSub(u),v=h.redMul(b),x=p.redMul(m),_=h.redMul(m),y=b.redMul(p);return this.curve.point(v,x,y,_)},a.prototype._projDbl=function(){var c=this.x.redAdd(this.y).redSqr(),u=this.x.redSqr(),f=this.y.redSqr(),l,h,p,b,m,v;if(this.curve.twisted){b=this.curve._mulA(u);var x=b.redAdd(f);this.zOne?(l=c.redSub(u).redSub(f).redMul(x.redSub(this.curve.two)),h=x.redMul(b.redSub(f)),p=x.redSqr().redSub(x).redSub(x)):(m=this.z.redSqr(),v=x.redSub(m).redISub(m),l=c.redSub(u).redISub(f).redMul(v),h=x.redMul(b.redSub(f)),p=x.redMul(v))}else b=u.redAdd(f),m=this.curve._mulC(this.z).redSqr(),v=b.redSub(m).redSub(m),l=this.curve._mulC(c.redISub(b)).redMul(v),h=this.curve._mulC(b).redMul(u.redISub(f)),p=b.redMul(v);return this.curve.point(l,h,p)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},a.prototype._extAdd=function(c){var u=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),f=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),l=this.t.redMul(this.curve.dd).redMul(c.t),h=this.z.redMul(c.z.redAdd(c.z)),p=f.redSub(u),b=h.redSub(l),m=h.redAdd(l),v=f.redAdd(u),x=p.redMul(b),_=m.redMul(v),y=p.redMul(v),k=b.redMul(m);return this.curve.point(x,_,k,y)},a.prototype._projAdd=function(c){var u=this.z.redMul(c.z),f=u.redSqr(),l=this.x.redMul(c.x),h=this.y.redMul(c.y),p=this.curve.d.redMul(l).redMul(h),b=f.redSub(p),m=f.redAdd(p),v=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(l).redISub(h),x=u.redMul(b).redMul(v),_,y;return this.curve.twisted?(_=u.redMul(m).redMul(h.redSub(this.curve._mulA(l))),y=b.redMul(m)):(_=u.redMul(m).redMul(h.redSub(l)),y=this.curve._mulC(b).redMul(m)),this.curve.point(x,_,y)},a.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},a.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},a.prototype.mulAdd=function(c,u,f){return this.curve._wnafMulAdd(1,[this,u],[c,f],2,!1)},a.prototype.jmulAdd=function(c,u,f){return this.curve._wnafMulAdd(1,[this,u],[c,f],2,!0)},a.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},a.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},a.prototype.getY=function(){return this.normalize(),this.y.fromRed()},a.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},a.prototype.eqXToP=function(c){var u=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(u)===0)return!0;for(var f=c.clone(),l=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(u.redIAdd(l),this.x.cmp(u)===0)return!0}},a.prototype.toP=a.prototype.normalize,a.prototype.mixedAdd=a.prototype.add,ys}var iu;function zh(){return iu||(iu=1,function(t){var e=t;e.base=Mi(),e.short=r1(),e.mont=n1(),e.edwards=i1()}(ms)),ms}var ws={},xs={},qe={},su;function Qt(){if(su)return qe;su=1;var t=Gr(),e=Ii();qe.inherits=e;function r(d,g){return(d.charCodeAt(g)&64512)!==55296||g<0||g+1>=d.length?!1:(d.charCodeAt(g+1)&64512)===56320}function s(d,g){if(Array.isArray(d))return d.slice();if(!d)return[];var w=[];if(typeof d=="string")if(g){if(g==="hex")for(d=d.replace(/[^a-z0-9]+/ig,""),d.length%2!==0&&(d="0"+d),S=0;S<d.length;S+=2)w.push(parseInt(d[S]+d[S+1],16))}else for(var D=0,S=0;S<d.length;S++){var E=d.charCodeAt(S);E<128?w[D++]=E:E<2048?(w[D++]=E>>6|192,w[D++]=E&63|128):r(d,S)?(E=65536+((E&1023)<<10)+(d.charCodeAt(++S)&1023),w[D++]=E>>18|240,w[D++]=E>>12&63|128,w[D++]=E>>6&63|128,w[D++]=E&63|128):(w[D++]=E>>12|224,w[D++]=E>>6&63|128,w[D++]=E&63|128)}else for(S=0;S<d.length;S++)w[S]=d[S]|0;return w}qe.toArray=s;function i(d){for(var g="",w=0;w<d.length;w++)g+=o(d[w].toString(16));return g}qe.toHex=i;function n(d){var g=d>>>24|d>>>8&65280|d<<8&16711680|(d&255)<<24;return g>>>0}qe.htonl=n;function a(d,g){for(var w="",D=0;D<d.length;D++){var S=d[D];g==="little"&&(S=n(S)),w+=c(S.toString(16))}return w}qe.toHex32=a;function o(d){return d.length===1?"0"+d:d}qe.zero2=o;function c(d){return d.length===7?"0"+d:d.length===6?"00"+d:d.length===5?"000"+d:d.length===4?"0000"+d:d.length===3?"00000"+d:d.length===2?"000000"+d:d.length===1?"0000000"+d:d}qe.zero8=c;function u(d,g,w,D){var S=w-g;t(S%4===0);for(var E=new Array(S/4),O=0,T=g;O<E.length;O++,T+=4){var C;D==="big"?C=d[T]<<24|d[T+1]<<16|d[T+2]<<8|d[T+3]:C=d[T+3]<<24|d[T+2]<<16|d[T+1]<<8|d[T],E[O]=C>>>0}return E}qe.join32=u;function f(d,g){for(var w=new Array(d.length*4),D=0,S=0;D<d.length;D++,S+=4){var E=d[D];g==="big"?(w[S]=E>>>24,w[S+1]=E>>>16&255,w[S+2]=E>>>8&255,w[S+3]=E&255):(w[S+3]=E>>>24,w[S+2]=E>>>16&255,w[S+1]=E>>>8&255,w[S]=E&255)}return w}qe.split32=f;function l(d,g){return d>>>g|d<<32-g}qe.rotr32=l;function h(d,g){return d<<g|d>>>32-g}qe.rotl32=h;function p(d,g){return d+g>>>0}qe.sum32=p;function b(d,g,w){return d+g+w>>>0}qe.sum32_3=b;function m(d,g,w,D){return d+g+w+D>>>0}qe.sum32_4=m;function v(d,g,w,D,S){return d+g+w+D+S>>>0}qe.sum32_5=v;function x(d,g,w,D){var S=d[g],E=d[g+1],O=D+E>>>0,T=(O<D?1:0)+w+S;d[g]=T>>>0,d[g+1]=O}qe.sum64=x;function _(d,g,w,D){var S=g+D>>>0,E=(S<g?1:0)+d+w;return E>>>0}qe.sum64_hi=_;function y(d,g,w,D){var S=g+D;return S>>>0}qe.sum64_lo=y;function k(d,g,w,D,S,E,O,T){var C=0,F=g;F=F+D>>>0,C+=F<g?1:0,F=F+E>>>0,C+=F<E?1:0,F=F+T>>>0,C+=F<T?1:0;var j=d+w+S+O+C;return j>>>0}qe.sum64_4_hi=k;function A(d,g,w,D,S,E,O,T){var C=g+D+E+T;return C>>>0}qe.sum64_4_lo=A;function M(d,g,w,D,S,E,O,T,C,F){var j=0,W=g;W=W+D>>>0,j+=W<g?1:0,W=W+E>>>0,j+=W<E?1:0,W=W+T>>>0,j+=W<T?1:0,W=W+F>>>0,j+=W<F?1:0;var V=d+w+S+O+C+j;return V>>>0}qe.sum64_5_hi=M;function P(d,g,w,D,S,E,O,T,C,F){var j=g+D+E+T+F;return j>>>0}qe.sum64_5_lo=P;function R(d,g,w){var D=g<<32-w|d>>>w;return D>>>0}qe.rotr64_hi=R;function L(d,g,w){var D=d<<32-w|g>>>w;return D>>>0}qe.rotr64_lo=L;function N(d,g,w){return d>>>w}qe.shr64_hi=N;function I(d,g,w){var D=d<<32-w|g>>>w;return D>>>0}return qe.shr64_lo=I,qe}var ks={},au;function Ln(){if(au)return ks;au=1;var t=Qt(),e=Gr();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return ks.BlockHash=r,r.prototype.update=function(i,n){if(i=t.toArray(i,n),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var a=i.length%this._delta8;this.pending=i.slice(i.length-a,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-a,this.endian);for(var o=0;o<i.length;o+=this._delta32)this._update(i,o,o+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,n=this._delta8,a=n-(i+this.padLength)%n,o=new Array(a+this.padLength);o[0]=128;for(var c=1;c<a;c++)o[c]=0;if(i<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=i>>>24&255,o[c++]=i>>>16&255,o[c++]=i>>>8&255,o[c++]=i&255}else for(o[c++]=i&255,o[c++]=i>>>8&255,o[c++]=i>>>16&255,o[c++]=i>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,u=8;u<this.padLength;u++)o[c++]=0;return o},ks}var Or={},Rt={},ou;function jh(){if(ou)return Rt;ou=1;var t=Qt(),e=t.rotr32;function r(f,l,h,p){if(f===0)return s(l,h,p);if(f===1||f===3)return n(l,h,p);if(f===2)return i(l,h,p)}Rt.ft_1=r;function s(f,l,h){return f&l^~f&h}Rt.ch32=s;function i(f,l,h){return f&l^f&h^l&h}Rt.maj32=i;function n(f,l,h){return f^l^h}Rt.p32=n;function a(f){return e(f,2)^e(f,13)^e(f,22)}Rt.s0_256=a;function o(f){return e(f,6)^e(f,11)^e(f,25)}Rt.s1_256=o;function c(f){return e(f,7)^e(f,18)^f>>>3}Rt.g0_256=c;function u(f){return e(f,17)^e(f,19)^f>>>10}return Rt.g1_256=u,Rt}var As,uu;function s1(){if(uu)return As;uu=1;var t=Qt(),e=Ln(),r=jh(),s=t.rotl32,i=t.sum32,n=t.sum32_5,a=r.ft_1,o=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,o),As=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(l,h){for(var p=this.W,b=0;b<16;b++)p[b]=l[h+b];for(;b<p.length;b++)p[b]=s(p[b-3]^p[b-8]^p[b-14]^p[b-16],1);var m=this.h[0],v=this.h[1],x=this.h[2],_=this.h[3],y=this.h[4];for(b=0;b<p.length;b++){var k=~~(b/20),A=n(s(m,5),a(k,v,x,_),y,p[b],c[k]);y=_,_=x,x=s(v,30),v=m,m=A}this.h[0]=i(this.h[0],m),this.h[1]=i(this.h[1],v),this.h[2]=i(this.h[2],x),this.h[3]=i(this.h[3],_),this.h[4]=i(this.h[4],y)},u.prototype._digest=function(l){return l==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},As}var Ss,cu;function qh(){if(cu)return Ss;cu=1;var t=Qt(),e=Ln(),r=jh(),s=Gr(),i=t.sum32,n=t.sum32_4,a=t.sum32_5,o=r.ch32,c=r.maj32,u=r.s0_256,f=r.s1_256,l=r.g0_256,h=r.g1_256,p=e.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}return t.inherits(m,p),Ss=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(x,_){for(var y=this.W,k=0;k<16;k++)y[k]=x[_+k];for(;k<y.length;k++)y[k]=n(h(y[k-2]),y[k-7],l(y[k-15]),y[k-16]);var A=this.h[0],M=this.h[1],P=this.h[2],R=this.h[3],L=this.h[4],N=this.h[5],I=this.h[6],d=this.h[7];for(s(this.k.length===y.length),k=0;k<y.length;k++){var g=a(d,f(L),o(L,N,I),this.k[k],y[k]),w=i(u(A),c(A,M,P));d=I,I=N,N=L,L=i(R,g),R=P,P=M,M=A,A=i(g,w)}this.h[0]=i(this.h[0],A),this.h[1]=i(this.h[1],M),this.h[2]=i(this.h[2],P),this.h[3]=i(this.h[3],R),this.h[4]=i(this.h[4],L),this.h[5]=i(this.h[5],N),this.h[6]=i(this.h[6],I),this.h[7]=i(this.h[7],d)},m.prototype._digest=function(x){return x==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},Ss}var Es,fu;function a1(){if(fu)return Es;fu=1;var t=Qt(),e=qh();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),Es=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},Es}var Cs,lu;function Uh(){if(lu)return Cs;lu=1;var t=Qt(),e=Ln(),r=Gr(),s=t.rotr64_hi,i=t.rotr64_lo,n=t.shr64_hi,a=t.shr64_lo,o=t.sum64,c=t.sum64_hi,u=t.sum64_lo,f=t.sum64_4_hi,l=t.sum64_4_lo,h=t.sum64_5_hi,p=t.sum64_5_lo,b=e.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}t.inherits(v,b),Cs=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(w,D){for(var S=this.W,E=0;E<32;E++)S[E]=w[D+E];for(;E<S.length;E+=2){var O=I(S[E-4],S[E-3]),T=d(S[E-4],S[E-3]),C=S[E-14],F=S[E-13],j=L(S[E-30],S[E-29]),W=N(S[E-30],S[E-29]),V=S[E-32],Z=S[E-31];S[E]=f(O,T,C,F,j,W,V,Z),S[E+1]=l(O,T,C,F,j,W,V,Z)}},v.prototype._update=function(w,D){this._prepareBlock(w,D);var S=this.W,E=this.h[0],O=this.h[1],T=this.h[2],C=this.h[3],F=this.h[4],j=this.h[5],W=this.h[6],V=this.h[7],Z=this.h[8],ie=this.h[9],pe=this.h[10],le=this.h[11],se=this.h[12],he=this.h[13],Ce=this.h[14],ye=this.h[15];r(this.k.length===S.length);for(var Ee=0;Ee<S.length;Ee+=2){var B=Ce,K=ye,G=P(Z,ie),U=R(Z,ie),q=x(Z,ie,pe,le,se),$=_(Z,ie,pe,le,se,he),ee=this.k[Ee],J=this.k[Ee+1],H=S[Ee],re=S[Ee+1],ne=h(B,K,G,U,q,$,ee,J,H,re),te=p(B,K,G,U,q,$,ee,J,H,re);B=A(E,O),K=M(E,O),G=y(E,O,T,C,F),U=k(E,O,T,C,F,j);var de=c(B,K,G,U),_e=u(B,K,G,U);Ce=se,ye=he,se=pe,he=le,pe=Z,le=ie,Z=c(W,V,ne,te),ie=u(V,V,ne,te),W=F,V=j,F=T,j=C,T=E,C=O,E=c(ne,te,de,_e),O=u(ne,te,de,_e)}o(this.h,0,E,O),o(this.h,2,T,C),o(this.h,4,F,j),o(this.h,6,W,V),o(this.h,8,Z,ie),o(this.h,10,pe,le),o(this.h,12,se,he),o(this.h,14,Ce,ye)},v.prototype._digest=function(w){return w==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function x(g,w,D,S,E){var O=g&D^~g&E;return O<0&&(O+=4294967296),O}function _(g,w,D,S,E,O){var T=w&S^~w&O;return T<0&&(T+=4294967296),T}function y(g,w,D,S,E){var O=g&D^g&E^D&E;return O<0&&(O+=4294967296),O}function k(g,w,D,S,E,O){var T=w&S^w&O^S&O;return T<0&&(T+=4294967296),T}function A(g,w){var D=s(g,w,28),S=s(w,g,2),E=s(w,g,7),O=D^S^E;return O<0&&(O+=4294967296),O}function M(g,w){var D=i(g,w,28),S=i(w,g,2),E=i(w,g,7),O=D^S^E;return O<0&&(O+=4294967296),O}function P(g,w){var D=s(g,w,14),S=s(g,w,18),E=s(w,g,9),O=D^S^E;return O<0&&(O+=4294967296),O}function R(g,w){var D=i(g,w,14),S=i(g,w,18),E=i(w,g,9),O=D^S^E;return O<0&&(O+=4294967296),O}function L(g,w){var D=s(g,w,1),S=s(g,w,8),E=n(g,w,7),O=D^S^E;return O<0&&(O+=4294967296),O}function N(g,w){var D=i(g,w,1),S=i(g,w,8),E=a(g,w,7),O=D^S^E;return O<0&&(O+=4294967296),O}function I(g,w){var D=s(g,w,19),S=s(w,g,29),E=n(g,w,6),O=D^S^E;return O<0&&(O+=4294967296),O}function d(g,w){var D=i(g,w,19),S=i(w,g,29),E=a(g,w,6),O=D^S^E;return O<0&&(O+=4294967296),O}return Cs}var Ds,hu;function o1(){if(hu)return Ds;hu=1;var t=Qt(),e=Uh();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),Ds=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},Ds}var du;function u1(){return du||(du=1,Or.sha1=s1(),Or.sha224=a1(),Or.sha256=qh(),Or.sha384=o1(),Or.sha512=Uh()),Or}var Ts={},pu;function c1(){if(pu)return Ts;pu=1;var t=Qt(),e=Ln(),r=t.rotl32,s=t.sum32,i=t.sum32_3,n=t.sum32_4,a=e.BlockHash;function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(o,a),Ts.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(v,x){for(var _=this.h[0],y=this.h[1],k=this.h[2],A=this.h[3],M=this.h[4],P=_,R=y,L=k,N=A,I=M,d=0;d<80;d++){var g=s(r(n(_,c(d,y,k,A),v[l[d]+x],u(d)),p[d]),M);_=M,M=A,A=r(k,10),k=y,y=g,g=s(r(n(P,c(79-d,R,L,N),v[h[d]+x],f(d)),b[d]),I),P=I,I=N,N=r(L,10),L=R,R=g}g=i(this.h[1],k,N),this.h[1]=i(this.h[2],A,I),this.h[2]=i(this.h[3],M,P),this.h[3]=i(this.h[4],_,R),this.h[4]=i(this.h[0],y,L),this.h[0]=g},o.prototype._digest=function(v){return v==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function c(m,v,x,_){return m<=15?v^x^_:m<=31?v&x|~v&_:m<=47?(v|~x)^_:m<=63?v&_|x&~_:v^(x|~_)}function u(m){return m<=15?0:m<=31?1518500249:m<=47?1859775393:m<=63?2400959708:2840853838}function f(m){return m<=15?1352829926:m<=31?1548603684:m<=47?1836072691:m<=63?2053994217:0}var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Ts}var Ms,bu;function f1(){if(bu)return Ms;bu=1;var t=Qt(),e=Gr();function r(s,i,n){if(!(this instanceof r))return new r(s,i,n);this.Hash=s,this.blockSize=s.blockSize/8,this.outSize=s.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,n))}return Ms=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var n=i.length;n<this.blockSize;n++)i.push(0);for(n=0;n<i.length;n++)i[n]^=54;for(this.inner=new this.Hash().update(i),n=0;n<i.length;n++)i[n]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,n){return this.inner.update(i,n),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},Ms}var mu;function Za(){return mu||(mu=1,function(t){var e=t;e.utils=Qt(),e.common=Ln(),e.sha=u1(),e.ripemd=c1(),e.hmac=f1(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(xs)),xs}var Is,gu;function l1(){return gu||(gu=1,Is={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Is}var _u;function Ka(){return _u||(_u=1,function(t){var e=t,r=Za(),s=zh(),i=St(),n=i.assert;function a(u){u.type==="short"?this.curve=new s.short(u):u.type==="edwards"?this.curve=new s.edwards(u):this.curve=new s.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(u,f){Object.defineProperty(e,u,{configurable:!0,enumerable:!0,get:function(){var l=new a(f);return Object.defineProperty(e,u,{configurable:!0,enumerable:!0,value:l}),l}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=l1()}catch{c=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})}(ws)),ws}var Ps,vu;function h1(){if(vu)return Ps;vu=1;var t=Za(),e=Bh(),r=Gr();function s(i){if(!(this instanceof s))return new s(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=e.toArray(i.entropy,i.entropyEnc||"hex"),a=e.toArray(i.nonce,i.nonceEnc||"hex"),o=e.toArray(i.pers,i.persEnc||"hex");r(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,a,o)}return Ps=s,s.prototype._init=function(n,a,o){var c=n.concat(a).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var u=0;u<this.V.length;u++)this.K[u]=0,this.V[u]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},s.prototype._update=function(n){var a=this._hmac().update(this.V).update([0]);n&&(a=a.update(n)),this.K=a.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(n,a,o,c){typeof a!="string"&&(c=o,o=a,a=null),n=e.toArray(n,a),o=e.toArray(o,c),r(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(o||[])),this._reseed=1},s.prototype.generate=function(n,a,o,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof a!="string"&&(c=o,o=a,a=null),o&&(o=e.toArray(o,c||"hex"),this._update(o));for(var u=[];u.length<n;)this.V=this._hmac().update(this.V).digest(),u=u.concat(this.V);var f=u.slice(0,n);return this._update(o),this._reseed++,e.encode(f,a)},Ps}var Os,yu;function d1(){if(yu)return Os;yu=1;var t=dr(),e=St(),r=e.assert;function s(i,n){this.ec=i,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}return Os=s,s.fromPublic=function(n,a,o){return a instanceof s?a:new s(n,{pub:a,pubEnc:o})},s.fromPrivate=function(n,a,o){return a instanceof s?a:new s(n,{priv:a,privEnc:o})},s.prototype.validate=function(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(n,a){return typeof n=="string"&&(a=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),a?this.pub.encode(a,n):this.pub},s.prototype.getPrivate=function(n){return n==="hex"?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(n,a){this.priv=new t(n,a||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(n,a){if(n.x||n.y){this.ec.curve.type==="mont"?r(n.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(n.x&&n.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(n.x,n.y);return}this.pub=this.ec.curve.decodePoint(n,a)},s.prototype.derive=function(n){return n.validate()||r(n.validate(),"public point not validated"),n.mul(this.priv).getX()},s.prototype.sign=function(n,a,o){return this.ec.sign(n,this,a,o)},s.prototype.verify=function(n,a,o){return this.ec.verify(n,a,this,void 0,o)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},Os}var Fs,wu;function p1(){if(wu)return Fs;wu=1;var t=dr(),e=St(),r=e.assert;function s(c,u){if(c instanceof s)return c;this._importDER(c,u)||(r(c.r&&c.s,"Signature without r or s"),this.r=new t(c.r,16),this.s=new t(c.s,16),c.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=c.recoveryParam)}Fs=s;function i(){this.place=0}function n(c,u){var f=c[u.place++];if(!(f&128))return f;var l=f&15;if(l===0||l>4||c[u.place]===0)return!1;for(var h=0,p=0,b=u.place;p<l;p++,b++)h<<=8,h|=c[b],h>>>=0;return h<=127?!1:(u.place=b,h)}function a(c){for(var u=0,f=c.length-1;!c[u]&&!(c[u+1]&128)&&u<f;)u++;return u===0?c:c.slice(u)}s.prototype._importDER=function(u,f){u=e.toArray(u,f);var l=new i;if(u[l.place++]!==48)return!1;var h=n(u,l);if(h===!1||h+l.place!==u.length||u[l.place++]!==2)return!1;var p=n(u,l);if(p===!1||(u[l.place]&128)!==0)return!1;var b=u.slice(l.place,p+l.place);if(l.place+=p,u[l.place++]!==2)return!1;var m=n(u,l);if(m===!1||u.length!==m+l.place||(u[l.place]&128)!==0)return!1;var v=u.slice(l.place,m+l.place);if(b[0]===0)if(b[1]&128)b=b.slice(1);else return!1;if(v[0]===0)if(v[1]&128)v=v.slice(1);else return!1;return this.r=new t(b),this.s=new t(v),this.recoveryParam=null,!0};function o(c,u){if(u<128){c.push(u);return}var f=1+(Math.log(u)/Math.LN2>>>3);for(c.push(f|128);--f;)c.push(u>>>(f<<3)&255);c.push(u)}return s.prototype.toDER=function(u){var f=this.r.toArray(),l=this.s.toArray();for(f[0]&128&&(f=[0].concat(f)),l[0]&128&&(l=[0].concat(l)),f=a(f),l=a(l);!l[0]&&!(l[1]&128);)l=l.slice(1);var h=[2];o(h,f.length),h=h.concat(f),h.push(2),o(h,l.length);var p=h.concat(l),b=[48];return o(b,p.length),b=b.concat(p),e.encode(b,u)},Fs}var Rs,xu;function b1(){if(xu)return Rs;xu=1;var t=dr(),e=h1(),r=St(),s=Ka(),i=Nh(),n=r.assert,a=d1(),o=p1();function c(u){if(!(this instanceof c))return new c(u);typeof u=="string"&&(n(Object.prototype.hasOwnProperty.call(s,u),"Unknown curve "+u),u=s[u]),u instanceof s.PresetCurve&&(u={curve:u}),this.curve=u.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=u.curve.g,this.g.precompute(u.curve.n.bitLength()+1),this.hash=u.hash||u.curve.hash}return Rs=c,c.prototype.keyPair=function(f){return new a(this,f)},c.prototype.keyFromPrivate=function(f,l){return a.fromPrivate(this,f,l)},c.prototype.keyFromPublic=function(f,l){return a.fromPublic(this,f,l)},c.prototype.genKeyPair=function(f){f||(f={});for(var l=new e({hash:this.hash,pers:f.pers,persEnc:f.persEnc||"utf8",entropy:f.entropy||i(this.hash.hmacStrength),entropyEnc:f.entropy&&f.entropyEnc||"utf8",nonce:this.n.toArray()}),h=this.n.byteLength(),p=this.n.sub(new t(2));;){var b=new t(l.generate(h));if(!(b.cmp(p)>0))return b.iaddn(1),this.keyFromPrivate(b)}},c.prototype._truncateToN=function(f,l,h){var p;if(t.isBN(f)||typeof f=="number")f=new t(f,16),p=f.byteLength();else if(typeof f=="object")p=f.length,f=new t(f,16);else{var b=f.toString();p=b.length+1>>>1,f=new t(b,16)}typeof h!="number"&&(h=p*8);var m=h-this.n.bitLength();return m>0&&(f=f.ushrn(m)),!l&&f.cmp(this.n)>=0?f.sub(this.n):f},c.prototype.sign=function(f,l,h,p){if(typeof h=="object"&&(p=h,h=null),p||(p={}),typeof f!="string"&&typeof f!="number"&&!t.isBN(f)){n(typeof f=="object"&&f&&typeof f.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),n(f.length>>>0===f.length);for(var b=0;b<f.length;b++)n((f[b]&255)===f[b])}l=this.keyFromPrivate(l,h),f=this._truncateToN(f,!1,p.msgBitLength),n(!f.isNeg(),"Can not sign a negative message");var m=this.n.byteLength(),v=l.getPrivate().toArray("be",m),x=f.toArray("be",m);n(new t(x).eq(f),"Can not sign message");for(var _=new e({hash:this.hash,entropy:v,nonce:x,pers:p.pers,persEnc:p.persEnc||"utf8"}),y=this.n.sub(new t(1)),k=0;;k++){var A=p.k?p.k(k):new t(_.generate(this.n.byteLength()));if(A=this._truncateToN(A,!0),!(A.cmpn(1)<=0||A.cmp(y)>=0)){var M=this.g.mul(A);if(!M.isInfinity()){var P=M.getX(),R=P.umod(this.n);if(R.cmpn(0)!==0){var L=A.invm(this.n).mul(R.mul(l.getPrivate()).iadd(f));if(L=L.umod(this.n),L.cmpn(0)!==0){var N=(M.getY().isOdd()?1:0)|(P.cmp(R)!==0?2:0);return p.canonical&&L.cmp(this.nh)>0&&(L=this.n.sub(L),N^=1),new o({r:R,s:L,recoveryParam:N})}}}}}},c.prototype.verify=function(f,l,h,p,b){b||(b={}),f=this._truncateToN(f,!1,b.msgBitLength),h=this.keyFromPublic(h,p),l=new o(l,"hex");var m=l.r,v=l.s;if(m.cmpn(1)<0||m.cmp(this.n)>=0||v.cmpn(1)<0||v.cmp(this.n)>=0)return!1;var x=v.invm(this.n),_=x.mul(f).umod(this.n),y=x.mul(m).umod(this.n),k;return this.curve._maxwellTrick?(k=this.g.jmulAdd(_,h.getPublic(),y),k.isInfinity()?!1:k.eqXToP(m)):(k=this.g.mulAdd(_,h.getPublic(),y),k.isInfinity()?!1:k.getX().umod(this.n).cmp(m)===0)},c.prototype.recoverPubKey=function(u,f,l,h){n((3&l)===l,"The recovery param is more than two bits"),f=new o(f,h);var p=this.n,b=new t(u),m=f.r,v=f.s,x=l&1,_=l>>1;if(m.cmp(this.curve.p.umod(this.curve.n))>=0&&_)throw new Error("Unable to find sencond key candinate");_?m=this.curve.pointFromX(m.add(this.curve.n),x):m=this.curve.pointFromX(m,x);var y=f.r.invm(p),k=p.sub(b).mul(y).umod(p),A=v.mul(y).umod(p);return this.g.mulAdd(k,m,A)},c.prototype.getKeyRecoveryParam=function(u,f,l,h){if(f=new o(f,h),f.recoveryParam!==null)return f.recoveryParam;for(var p=0;p<4;p++){var b;try{b=this.recoverPubKey(u,f,p)}catch{continue}if(b.eq(l))return p}throw new Error("Unable to find valid recovery factor")},Rs}var Ls,ku;function m1(){if(ku)return Ls;ku=1;var t=St(),e=t.assert,r=t.parseBytes,s=t.cachedProperty;function i(n,a){this.eddsa=n,this._secret=r(a.secret),n.isPoint(a.pub)?this._pub=a.pub:this._pubBytes=r(a.pub)}return i.fromPublic=function(a,o){return o instanceof i?o:new i(a,{pub:o})},i.fromSecret=function(a,o){return o instanceof i?o:new i(a,{secret:o})},i.prototype.secret=function(){return this._secret},s(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),s(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),s(i,"privBytes",function(){var a=this.eddsa,o=this.hash(),c=a.encodingLength-1,u=o.slice(0,a.encodingLength);return u[0]&=248,u[c]&=127,u[c]|=64,u}),s(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),s(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),s(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(a){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(a,this)},i.prototype.verify=function(a,o){return this.eddsa.verify(a,o,this)},i.prototype.getSecret=function(a){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),a)},i.prototype.getPublic=function(a){return t.encode(this.pubBytes(),a)},Ls=i,Ls}var Bs,Au;function g1(){if(Au)return Bs;Au=1;var t=dr(),e=St(),r=e.assert,s=e.cachedProperty,i=e.parseBytes;function n(a,o){this.eddsa=a,typeof o!="object"&&(o=i(o)),Array.isArray(o)&&(r(o.length===a.encodingLength*2,"Signature has invalid size"),o={R:o.slice(0,a.encodingLength),S:o.slice(a.encodingLength)}),r(o.R&&o.S,"Signature without R or S"),a.isPoint(o.R)&&(this._R=o.R),o.S instanceof t&&(this._S=o.S),this._Rencoded=Array.isArray(o.R)?o.R:o.Rencoded,this._Sencoded=Array.isArray(o.S)?o.S:o.Sencoded}return s(n,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),s(n,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),s(n,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),s(n,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},Bs=n,Bs}var Ns,Su;function _1(){if(Su)return Ns;Su=1;var t=Za(),e=Ka(),r=St(),s=r.assert,i=r.parseBytes,n=m1(),a=g1();function o(c){if(s(c==="ed25519","only tested with ed25519 so far"),!(this instanceof o))return new o(c);c=e[c].curve,this.curve=c,this.g=c.g,this.g.precompute(c.n.bitLength()+1),this.pointClass=c.point().constructor,this.encodingLength=Math.ceil(c.n.bitLength()/8),this.hash=t.sha512}return Ns=o,o.prototype.sign=function(u,f){u=i(u);var l=this.keyFromSecret(f),h=this.hashInt(l.messagePrefix(),u),p=this.g.mul(h),b=this.encodePoint(p),m=this.hashInt(b,l.pubBytes(),u).mul(l.priv()),v=h.add(m).umod(this.curve.n);return this.makeSignature({R:p,S:v,Rencoded:b})},o.prototype.verify=function(u,f,l){if(u=i(u),f=this.makeSignature(f),f.S().gte(f.eddsa.curve.n)||f.S().isNeg())return!1;var h=this.keyFromPublic(l),p=this.hashInt(f.Rencoded(),h.pubBytes(),u),b=this.g.mul(f.S()),m=f.R().add(h.pub().mul(p));return m.eq(b)},o.prototype.hashInt=function(){for(var u=this.hash(),f=0;f<arguments.length;f++)u.update(arguments[f]);return r.intFromLE(u.digest()).umod(this.curve.n)},o.prototype.keyFromPublic=function(u){return n.fromPublic(this,u)},o.prototype.keyFromSecret=function(u){return n.fromSecret(this,u)},o.prototype.makeSignature=function(u){return u instanceof a?u:new a(this,u)},o.prototype.encodePoint=function(u){var f=u.getY().toArray("le",this.encodingLength);return f[this.encodingLength-1]|=u.getX().isOdd()?128:0,f},o.prototype.decodePoint=function(u){u=r.parseBytes(u);var f=u.length-1,l=u.slice(0,f).concat(u[f]&-129),h=(u[f]&128)!==0,p=r.intFromLE(l);return this.curve.pointFromY(p,h)},o.prototype.encodeInt=function(u){return u.toArray("le",this.encodingLength)},o.prototype.decodeInt=function(u){return r.intFromLE(u)},o.prototype.isPoint=function(u){return u instanceof this.pointClass},Ns}var Eu;function v1(){return Eu||(Eu=1,function(t){var e=t;e.version=Yp.version,e.utils=St(),e.rand=Nh(),e.curve=zh(),e.curves=Ka(),e.ec=b1(),e.eddsa=_1()}(hs)),hs}var y1=v1();const zs=new TextEncoder,w1=new y1.ec("p256");function _a(t){return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\//g,"_").replace(/=/g,"").replace(/\+/g,"-")}function x1(t,e){return e[0]!==4?!1:[_a(e.slice(1,33)),_a(e.slice(33,65))].join(".")}async function Cu(t,e,r=3e5){const s=await crypto.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]),i=await crypto.subtle.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:"SHA-256"},s,256);return new Uint8Array(i)}async function mv(t){let e=t?typeof t=="string"?zs.encode(t.normalize("NFC").trim()):t:crypto.getRandomValues(new Uint8Array(32));const r=new Uint8Array(e.length);if(r.set(e,0),r.length<16)throw new Error(`Insufficient input entropy (${r.length})`);const s="v1",i={signing:zs.encode(`signing-${s}`),encryption:zs.encode(`encryption-${s}`)},[n,a]=await Promise.all([Cu(r,i.signing),Cu(r,i.encryption)]),o=async(f,l)=>{const h=w1.keyFromPrivate(f,"hex");if(!h.validate().result)throw new Error(`Validation failed for ${l}: ${h.validate().reason}`);return{pub:x1(l,new Uint8Array(h.getPublic(!1,"array"))),priv:_a(f)}},[c,u]=await Promise.all([o(n,"ECDSA"),o(a,"ECDH")]);return{...c,...u,epub:u.pub,epriv:u.priv}}function hr(t){return Array.isArray?Array.isArray(t):Wh(t)==="[object Array]"}function k1(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function A1(t){return t==null?"":k1(t)}function Kt(t){return typeof t=="string"}function $h(t){return typeof t=="number"}function S1(t){return t===!0||t===!1||E1(t)&&Wh(t)=="[object Boolean]"}function Hh(t){return typeof t=="object"}function E1(t){return Hh(t)&&t!==null}function vt(t){return t!=null}function js(t){return!t.trim().length}function Wh(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const C1="Incorrect 'index' type",D1=t=>`Invalid value for key ${t}`,T1=t=>`Pattern length exceeds max of ${t}.`,M1=t=>`Missing ${t} property in key`,I1=t=>`Property 'weight' in key '${t}' must be a positive integer`,Du=Object.prototype.hasOwnProperty;class P1{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(s=>{let i=Vh(s);this._keys.push(i),this._keyMap[i.id]=i,r+=i.weight}),this._keys.forEach(s=>{s.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Vh(t){let e=null,r=null,s=null,i=1,n=null;if(Kt(t)||hr(t))s=t,e=Tu(t),r=va(t);else{if(!Du.call(t,"name"))throw new Error(M1("name"));const a=t.name;if(s=a,Du.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(I1(a));e=Tu(a),r=va(a),n=t.getFn}return{path:e,id:r,weight:i,src:s,getFn:n}}function Tu(t){return hr(t)?t:t.split(".")}function va(t){return hr(t)?t.join("."):t}function O1(t,e){let r=[],s=!1;const i=(n,a,o)=>{if(vt(n))if(!a[o])r.push(n);else{let c=a[o];const u=n[c];if(!vt(u))return;if(o===a.length-1&&(Kt(u)||$h(u)||S1(u)))r.push(A1(u));else if(hr(u)){s=!0;for(let f=0,l=u.length;f<l;f+=1)i(u[f],a,o+1)}else a.length&&i(u,a,o+1)}};return i(t,Kt(e)?e.split("."):e,0),s?r:r[0]}const F1={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},R1={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},L1={location:0,threshold:.6,distance:100},B1={useExtendedSearch:!1,getFn:O1,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var xe={...R1,...F1,...L1,...B1};const N1=/[^ ]+/g;function z1(t=1,e=3){const r=new Map,s=Math.pow(10,e);return{get(i){const n=i.match(N1).length;if(r.has(n))return r.get(n);const a=1/Math.pow(n,.5*t),o=parseFloat(Math.round(a*s)/s);return r.set(n,o),o},clear(){r.clear()}}}class Ja{constructor({getFn:e=xe.getFn,fieldNormWeight:r=xe.fieldNormWeight}={}){this.norm=z1(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Kt(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();Kt(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!vt(e)||js(e))return;let s={v:e,i:r,n:this.norm.get(e)};this.records.push(s)}_addObject(e,r){let s={i:r,$:{}};this.keys.forEach((i,n)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(vt(a)){if(hr(a)){let o=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:u,value:f}=c.pop();if(vt(f))if(Kt(f)&&!js(f)){let l={v:f,i:u,n:this.norm.get(f)};o.push(l)}else hr(f)&&f.forEach((l,h)=>{c.push({nestedArrIndex:h,value:l})})}s.$[n]=o}else if(Kt(a)&&!js(a)){let o={v:a,n:this.norm.get(a)};s.$[n]=o}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Gh(t,e,{getFn:r=xe.getFn,fieldNormWeight:s=xe.fieldNormWeight}={}){const i=new Ja({getFn:r,fieldNormWeight:s});return i.setKeys(t.map(Vh)),i.setSources(e),i.create(),i}function j1(t,{getFn:e=xe.getFn,fieldNormWeight:r=xe.fieldNormWeight}={}){const{keys:s,records:i}=t,n=new Ja({getFn:e,fieldNormWeight:r});return n.setKeys(s),n.setIndexRecords(i),n}function Gn(t,{errors:e=0,currentLocation:r=0,expectedLocation:s=0,distance:i=xe.distance,ignoreLocation:n=xe.ignoreLocation}={}){const a=e/t.length;if(n)return a;const o=Math.abs(s-r);return i?a+o/i:o?1:a}function q1(t=[],e=xe.minMatchCharLength){let r=[],s=-1,i=-1,n=0;for(let a=t.length;n<a;n+=1){let o=t[n];o&&s===-1?s=n:!o&&s!==-1&&(i=n-1,i-s+1>=e&&r.push([s,i]),s=-1)}return t[n-1]&&n-s>=e&&r.push([s,n-1]),r}const jr=32;function U1(t,e,r,{location:s=xe.location,distance:i=xe.distance,threshold:n=xe.threshold,findAllMatches:a=xe.findAllMatches,minMatchCharLength:o=xe.minMatchCharLength,includeMatches:c=xe.includeMatches,ignoreLocation:u=xe.ignoreLocation}={}){if(e.length>jr)throw new Error(T1(jr));const f=e.length,l=t.length,h=Math.max(0,Math.min(s,l));let p=n,b=h;const m=o>1||c,v=m?Array(l):[];let x;for(;(x=t.indexOf(e,b))>-1;){let P=Gn(e,{currentLocation:x,expectedLocation:h,distance:i,ignoreLocation:u});if(p=Math.min(P,p),b=x+f,m){let R=0;for(;R<f;)v[x+R]=1,R+=1}}b=-1;let _=[],y=1,k=f+l;const A=1<<f-1;for(let P=0;P<f;P+=1){let R=0,L=k;for(;R<L;)Gn(e,{errors:P,currentLocation:h+L,expectedLocation:h,distance:i,ignoreLocation:u})<=p?R=L:k=L,L=Math.floor((k-R)/2+R);k=L;let N=Math.max(1,h-L+1),I=a?l:Math.min(h+L,l)+f,d=Array(I+2);d[I+1]=(1<<P)-1;for(let w=I;w>=N;w-=1){let D=w-1,S=r[t.charAt(D)];if(m&&(v[D]=+!!S),d[w]=(d[w+1]<<1|1)&S,P&&(d[w]|=(_[w+1]|_[w])<<1|1|_[w+1]),d[w]&A&&(y=Gn(e,{errors:P,currentLocation:D,expectedLocation:h,distance:i,ignoreLocation:u}),y<=p)){if(p=y,b=D,b<=h)break;N=Math.max(1,2*h-b)}}if(Gn(e,{errors:P+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:u})>p)break;_=d}const M={isMatch:b>=0,score:Math.max(.001,y)};if(m){const P=q1(v,o);P.length?c&&(M.indices=P):M.isMatch=!1}return M}function $1(t){let e={};for(let r=0,s=t.length;r<s;r+=1){const i=t.charAt(r);e[i]=(e[i]||0)|1<<s-r-1}return e}const mi=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Zh{constructor(e,{location:r=xe.location,threshold:s=xe.threshold,distance:i=xe.distance,includeMatches:n=xe.includeMatches,findAllMatches:a=xe.findAllMatches,minMatchCharLength:o=xe.minMatchCharLength,isCaseSensitive:c=xe.isCaseSensitive,ignoreDiacritics:u=xe.ignoreDiacritics,ignoreLocation:f=xe.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:i,includeMatches:n,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f},e=c?e:e.toLowerCase(),e=u?mi(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const l=(p,b)=>{this.chunks.push({pattern:p,alphabet:$1(p),startIndex:b})},h=this.pattern.length;if(h>jr){let p=0;const b=h%jr,m=h-b;for(;p<m;)l(this.pattern.substr(p,jr),p),p+=jr;if(b){const v=h-jr;l(this.pattern.substr(v),v)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:s,includeMatches:i}=this.options;if(e=r?e:e.toLowerCase(),e=s?mi(e):e,this.pattern===e){let m={isMatch:!0,score:0};return i&&(m.indices=[[0,e.length-1]]),m}const{location:n,distance:a,threshold:o,findAllMatches:c,minMatchCharLength:u,ignoreLocation:f}=this.options;let l=[],h=0,p=!1;this.chunks.forEach(({pattern:m,alphabet:v,startIndex:x})=>{const{isMatch:_,score:y,indices:k}=U1(e,m,v,{location:n+x,distance:a,threshold:o,findAllMatches:c,minMatchCharLength:u,includeMatches:i,ignoreLocation:f});_&&(p=!0),h+=y,_&&k&&(l=[...l,...k])});let b={isMatch:p,score:p?h/this.chunks.length:1};return p&&i&&(b.indices=l),b}}class Pr{constructor(e){this.pattern=e}static isMultiMatch(e){return Mu(e,this.multiRegex)}static isSingleMatch(e){return Mu(e,this.singleRegex)}search(){}}function Mu(t,e){const r=t.match(e);return r?r[1]:null}class H1 extends Pr{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class W1 extends Pr{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class V1 extends Pr{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class G1 extends Pr{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Z1 extends Pr{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class K1 extends Pr{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Kh extends Pr{constructor(e,{location:r=xe.location,threshold:s=xe.threshold,distance:i=xe.distance,includeMatches:n=xe.includeMatches,findAllMatches:a=xe.findAllMatches,minMatchCharLength:o=xe.minMatchCharLength,isCaseSensitive:c=xe.isCaseSensitive,ignoreDiacritics:u=xe.ignoreDiacritics,ignoreLocation:f=xe.ignoreLocation}={}){super(e),this._bitapSearch=new Zh(e,{location:r,threshold:s,distance:i,includeMatches:n,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Jh extends Pr{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,s;const i=[],n=this.pattern.length;for(;(s=e.indexOf(this.pattern,r))>-1;)r=s+n,i.push([s,r-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const ya=[H1,Jh,V1,G1,K1,Z1,W1,Kh],Iu=ya.length,J1=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,X1="|";function Y1(t,e={}){return t.split(X1).map(r=>{let s=r.trim().split(J1).filter(n=>n&&!!n.trim()),i=[];for(let n=0,a=s.length;n<a;n+=1){const o=s[n];let c=!1,u=-1;for(;!c&&++u<Iu;){const f=ya[u];let l=f.isMultiMatch(o);l&&(i.push(new f(l,e)),c=!0)}if(!c)for(u=-1;++u<Iu;){const f=ya[u];let l=f.isSingleMatch(o);if(l){i.push(new f(l,e));break}}}return i})}const Q1=new Set([Kh.type,Jh.type]);class eb{constructor(e,{isCaseSensitive:r=xe.isCaseSensitive,ignoreDiacritics:s=xe.ignoreDiacritics,includeMatches:i=xe.includeMatches,minMatchCharLength:n=xe.minMatchCharLength,ignoreLocation:a=xe.ignoreLocation,findAllMatches:o=xe.findAllMatches,location:c=xe.location,threshold:u=xe.threshold,distance:f=xe.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:s,includeMatches:i,minMatchCharLength:n,findAllMatches:o,ignoreLocation:a,location:c,threshold:u,distance:f},e=r?e:e.toLowerCase(),e=s?mi(e):e,this.pattern=e,this.query=Y1(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:i,ignoreDiacritics:n}=this.options;e=i?e:e.toLowerCase(),e=n?mi(e):e;let a=0,o=[],c=0;for(let u=0,f=r.length;u<f;u+=1){const l=r[u];o.length=0,a=0;for(let h=0,p=l.length;h<p;h+=1){const b=l[h],{isMatch:m,indices:v,score:x}=b.search(e);if(m){if(a+=1,c+=x,s){const _=b.constructor.type;Q1.has(_)?o=[...o,...v]:o.push(v)}}else{c=0,a=0,o.length=0;break}}if(a){let h={isMatch:!0,score:c/a};return s&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const wa=[];function tb(...t){wa.push(...t)}function xa(t,e){for(let r=0,s=wa.length;r<s;r+=1){let i=wa[r];if(i.condition(t,e))return new i(t,e)}return new Zh(t,e)}const gi={AND:"$and",OR:"$or"},ka={PATH:"$path",PATTERN:"$val"},Aa=t=>!!(t[gi.AND]||t[gi.OR]),rb=t=>!!t[ka.PATH],nb=t=>!hr(t)&&Hh(t)&&!Aa(t),Pu=t=>({[gi.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Xh(t,e,{auto:r=!0}={}){const s=i=>{let n=Object.keys(i);const a=rb(i);if(!a&&n.length>1&&!Aa(i))return s(Pu(i));if(nb(i)){const c=a?i[ka.PATH]:n[0],u=a?i[ka.PATTERN]:i[c];if(!Kt(u))throw new Error(D1(c));const f={keyId:va(c),pattern:u};return r&&(f.searcher=xa(u,e)),f}let o={children:[],operator:n[0]};return n.forEach(c=>{const u=i[c];hr(u)&&u.forEach(f=>{o.children.push(s(f))})}),o};return Aa(t)||(t=Pu(t)),s(t)}function ib(t,{ignoreFieldNorm:e=xe.ignoreFieldNorm}){t.forEach(r=>{let s=1;r.matches.forEach(({key:i,norm:n,score:a})=>{const o=i?i.weight:null;s*=Math.pow(a===0&&o?Number.EPSILON:a,(o||1)*(e?1:n))}),r.score=s})}function sb(t,e){const r=t.matches;e.matches=[],vt(r)&&r.forEach(s=>{if(!vt(s.indices)||!s.indices.length)return;const{indices:i,value:n}=s;let a={indices:i,value:n};s.key&&(a.key=s.key.src),s.idx>-1&&(a.refIndex=s.idx),e.matches.push(a)})}function ab(t,e){e.score=t.score}function ob(t,e,{includeMatches:r=xe.includeMatches,includeScore:s=xe.includeScore}={}){const i=[];return r&&i.push(sb),s&&i.push(ab),t.map(n=>{const{idx:a}=n,o={item:e[a],refIndex:a};return i.length&&i.forEach(c=>{c(n,o)}),o})}class Zr{constructor(e,r={},s){this.options={...xe,...r},this.options.useExtendedSearch,this._keyStore=new P1(this.options.keys),this.setCollection(e,s)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Ja))throw new Error(C1);this._myIndex=r||Gh(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){vt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let s=0,i=this._docs.length;s<i;s+=1){const n=this._docs[s];e(n,s)&&(this.removeAt(s),s-=1,i-=1,r.push(n))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:s,includeScore:i,shouldSort:n,sortFn:a,ignoreFieldNorm:o}=this.options;let c=Kt(e)?Kt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return ib(c,{ignoreFieldNorm:o}),n&&c.sort(a),$h(r)&&r>-1&&(c=c.slice(0,r)),ob(c,this._docs,{includeMatches:s,includeScore:i})}_searchStringList(e){const r=xa(e,this.options),{records:s}=this._myIndex,i=[];return s.forEach(({v:n,i:a,n:o})=>{if(!vt(n))return;const{isMatch:c,score:u,indices:f}=r.searchIn(n);c&&i.push({item:n,idx:a,matches:[{score:u,value:n,norm:o,indices:f}]})}),i}_searchLogical(e){const r=Xh(e,this.options),s=(o,c,u)=>{if(!o.children){const{keyId:l,searcher:h}=o,p=this._findMatches({key:this._keyStore.get(l),value:this._myIndex.getValueForItemAtKeyId(c,l),searcher:h});return p&&p.length?[{idx:u,item:c,matches:p}]:[]}const f=[];for(let l=0,h=o.children.length;l<h;l+=1){const p=o.children[l],b=s(p,c,u);if(b.length)f.push(...b);else if(o.operator===gi.AND)return[]}return f},i=this._myIndex.records,n={},a=[];return i.forEach(({$:o,i:c})=>{if(vt(o)){let u=s(r,o,c);u.length&&(n[c]||(n[c]={idx:c,item:o,matches:[]},a.push(n[c])),u.forEach(({matches:f})=>{n[c].matches.push(...f)}))}}),a}_searchObjectList(e){const r=xa(e,this.options),{keys:s,records:i}=this._myIndex,n=[];return i.forEach(({$:a,i:o})=>{if(!vt(a))return;let c=[];s.forEach((u,f)=>{c.push(...this._findMatches({key:u,value:a[f],searcher:r}))}),c.length&&n.push({idx:o,item:a,matches:c})}),n}_findMatches({key:e,value:r,searcher:s}){if(!vt(r))return[];let i=[];if(hr(r))r.forEach(({v:n,i:a,n:o})=>{if(!vt(n))return;const{isMatch:c,score:u,indices:f}=s.searchIn(n);c&&i.push({score:u,key:e,value:n,idx:a,norm:o,indices:f})});else{const{v:n,n:a}=r,{isMatch:o,score:c,indices:u}=s.searchIn(n);o&&i.push({score:c,key:e,value:n,norm:a,indices:u})}return i}}Zr.version="7.1.0";Zr.createIndex=Gh;Zr.parseIndex=j1;Zr.config=xe;Zr.parseQuery=Xh;tb(eb);const Sr=Ie({word:null,def:null}),Sa=Yt("dict-lang","en");it(Sr,()=>{Sr.word&&Sr.def&&ub(Sr)});function gv(){const t=Be(),e=Je(""),r=we(()=>Yh(e.value));async function s(){const c=await Rh(r.value);t.get("dict").get("#word").get(c).put(r.value),Sr.word=c,e.value=""}const i=Ie({});t.user(De.pub).get("dict").map().on(async(c,u)=>{if(!c)return;let f=u.slice(0,44),l=u.slice(45,89),h=await t.get("dict").get("#def").get(l).then();if(h){try{h=JSON.parse(h)}catch(p){console.log(p,h);return}(h==null?void 0:h.lang)==Sa.value&&(i[f]=i[f]||await t.get("dict").get("#word").get(f).then())}});const n=Ie({});t.get("dict").get("#word").map().once((c,u)=>{c.includes(" ")||(n[u]=c)});const a=we(()=>{let c=Object.entries(n).map(u=>({text:u[1],hash:u[0]}));return new Zr(c,{keys:["text"],includeScore:!0})}),o=we(()=>a.value.search(e.value));return{input:e,found:o,words:n,linked:i,word:r,addWord:s}}function _v(t){const e=Be(),r=Je("");return e.get("dict").get("#word").get(t).once(s=>{r.value=Yh(s)}),{word:r}}function vv(){const t=Be(),e=Ie({text:"",lang:Sa,part:"noun"});async function r(){const{hash:o,hashed:c}=await Zp(e);t.get("dict").get("#def").get(o).put(c),Sr.def=o,e.text="",e.part=null}const s=Ie({});t.user(De.pub).get("dict").map().on(async(o,c)=>{if(!o)return;let u=c.slice(45,89),f=await t.get("dict").get("#def").get(u).then();if(f)try{if(f=JSON.parse(f),(f==null?void 0:f.lang)!=Sa.value)return;s[u]=s[u]||f}catch(l){console.log(l,f)}});const i=Ie({});t.get("dict").get("#def").map().once((o,c)=>{i[c]=JSON.parse(o)});const n=we(()=>{let o=[];for(let c in i)o.push({hash:c,...i[c]});return new Zr(o,{keys:["text"],includeScore:!0})}),a=we(()=>n.value.search(e.text));return{def:e,addDef:r,defs:i,found:a,linked:s}}async function ub({word:t,def:e}){var n;const r=Be(),{user:s}=br();let i=await r.user(De.pub).get("dict").get(`${t}:${e}@${s.pub}`).then();r.user(De.pub).get("dict").get(`${t}:${e}@${s.pub}`).put(!i,null,{opt:{cert:(n=De.features)==null?void 0:n.dict}}),Sr.word=null,Sr.def=null}function yv(t){const e=Be(),r=Ie({});return e.user(De.pub).get("dict").map().on((s,i)=>{var f;if(i.indexOf(t)==-1)return;const{from:a,to:o,author:c}=Xa(i);let u=a==t?o:a;r[u]=r[u]||{},s?r[u][c]=s:((f=r==null?void 0:r[u])==null||delete f[c],Object.keys(r==null?void 0:r[u]).length==0&&(r==null||delete r[u]))}),r}function wv(t){const e=Be(),r=Ie({});return e.user(De.pub).get("dict").map().on((s,i)=>{var c;const{from:n,to:a,author:o}=Xa(i);o==t&&(r[n]=r[n]||{},s?r[n][a]=s:((c=r==null?void 0:r[n])==null||delete c[a],Object.keys(r[n]).length==0&&(r==null||delete r[n])))}),r}function xv(){const t=Be(),e=Ie({});return t.user(De.pub).get("dict").map().once(async(r,s)=>{const{from:i,to:n,author:a}=Xa(s);e[a]=e[a]||{},e[a][i]=e[a][i]||{},e[a][i][n]=r}),e}function kv(){const t=Be(),e=Ie({});return t.user(De.pub).get("dict").map().once(async(r,s)=>{let i=s.slice(45,89),n=await t.get("dict").get("#def").get(i).then();if(n){try{n=JSON.parse(n)}catch(a){console.log(n,a)}n!=null&&n.lang&&(e[n==null?void 0:n.lang]=e[n==null?void 0:n.lang]||0,e[n==null?void 0:n.lang]++)}}),e}function Xa(t){return{from:t.slice(0,44),to:t.slice(45,89),author:t.slice(-87)}}function Yh(t){if(!t)return"";let e=t.toLowerCase().matchAll(new RegExp("\\p{L}","gu"),"");return Array.from(e).map(r=>r[0]).join("")}function Ou(t,e,r,s=!0){const i=document.createElement("a");i.download=r,s?i.href=URL.createObjectURL(new Blob([t],{type:e})):i.href=`data:${e};,${t}`,i.dataset.downloadurl=[e,i.download,i.href].join(":"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}function Av(t,e=r=>console.log(r)){if(!t.length)return;const r=t[0],s=2e7;if(r.size>s){console.error("File is bigger than "+Qh(s))+"";return}let i=new FileReader;i.readAsText(r),i.onload=()=>{e(i.result)}}function Sv({preserveRatio:t=!1,picSize:e=100,maxSize:r=1024e4}){const s=Ie({errors:[],status:"",output:{}});function i(p){const b=p.target.files;o(),b.length&&(s.status="loading",Array.from(b).map(m=>n(m)))}function n(p){return a(p).then(b=>{s.output={name:l(p.name),content:b,size:Qh(Math.round(b.length*3/4))},s.status="success"}),null}function a(p){return new Promise((b,m)=>{const v=new FileReader,x=new FileReader,_=p.slice(0,4);v.readAsArrayBuffer(_),v.onloadend=y=>{const k=y.target.result;let A=u(f(k));if(c(p.size)>c(r)&&s.errors.push({message:"File size is too large!"}),A===!1&&s.errors.push({message:"File type is not supported!"}),s.errors.length>0){h(s.errors),o();return}else x.readAsDataURL(p)},x.onloadend=()=>{const y=new Image,k=x.result;typeof k=="string"&&(y.src=k,y.onload=()=>{const A=t?y.naturalWidth/y.naturalHeight:1,M=document.createElement("canvas");M.width=e,M.height=e/A,M.getContext("2d").drawImage(y,0,0,M.width,M.height),b(M.toDataURL())})},v.onerror=y=>m(y),x.onerror=y=>m(y)})}function o(){s.status="",s.errors=[],s.output={}}function c(p){return p*Math.pow(10,-6)}function u(p){return["89504E47","47494638","FFD8FFDB","FFD8FFE0","FFD8FFE1","FFD8FFE2","FFD8FFE3","FFD8FFE8","FFD8FFED","3C3F786D","3C737667"].includes(p)}function f(p){const b=new Uint8Array(p);let m=[];return b.forEach(v=>{m.push(v.toString(16))}),m.join("").toUpperCase()}function l(p){return p.replace(/\.[^/.]+$/,"").toLowerCase()}function h(p){p.length===2?console.error("File upload failed due to size and type!"):console.error(p[0].message+p[0].type)}return{state:s,handleChange:i}}const cb=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function Qh(t){let e=0,r=parseInt(t+"",10)||0;for(;r>=1024&&++e;)r=r/1024;return r.toFixed(r<10&&e>0?1:0)+" "+cb[e]}function Ev(t){var e;return(e=t.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/))==null?void 0:e[0]}function Cv(t){return t.substring(t.indexOf("/")+1,t.indexOf(";base64"))}var Fu={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};function Dv(t){for(var e in Fu)if(t.indexOf(e)===0)return Fu[e]}var qs={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Ru;function fb(){return Ru||(Ru=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(s,i,n){function a(u,f){if(!i[u]){if(!s[u]){var l=typeof qr=="function"&&qr;if(!f&&l)return l(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var p=i[u]={exports:{}};s[u][0].call(p.exports,function(b){var m=s[u][1][b];return a(m||b)},p,p.exports,r,s,i,n)}return i[u].exports}for(var o=typeof qr=="function"&&qr,c=0;c<n.length;c++)a(n[c]);return a}({1:[function(r,s,i){var n=r("./utils"),a=r("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(c){for(var u,f,l,h,p,b,m,v=[],x=0,_=c.length,y=_,k=n.getTypeOf(c)!=="string";x<c.length;)y=_-x,l=k?(u=c[x++],f=x<_?c[x++]:0,x<_?c[x++]:0):(u=c.charCodeAt(x++),f=x<_?c.charCodeAt(x++):0,x<_?c.charCodeAt(x++):0),h=u>>2,p=(3&u)<<4|f>>4,b=1<y?(15&f)<<2|l>>6:64,m=2<y?63&l:64,v.push(o.charAt(h)+o.charAt(p)+o.charAt(b)+o.charAt(m));return v.join("")},i.decode=function(c){var u,f,l,h,p,b,m=0,v=0,x="data:";if(c.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var _,y=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&y--,c.charAt(c.length-2)===o.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=a.uint8array?new Uint8Array(0|y):new Array(0|y);m<c.length;)u=o.indexOf(c.charAt(m++))<<2|(h=o.indexOf(c.charAt(m++)))>>4,f=(15&h)<<4|(p=o.indexOf(c.charAt(m++)))>>2,l=(3&p)<<6|(b=o.indexOf(c.charAt(m++))),_[v++]=u,p!==64&&(_[v++]=f),b!==64&&(_[v++]=l);return _}},{"./support":30,"./utils":32}],2:[function(r,s,i){var n=r("./external"),a=r("./stream/DataWorker"),o=r("./stream/Crc32Probe"),c=r("./stream/DataLengthProbe");function u(f,l,h,p,b){this.compressedSize=f,this.uncompressedSize=l,this.crc32=h,this.compression=p,this.compressedContent=b}u.prototype={getContentWorker:function(){var f=new a(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),l=this;return f.on("end",function(){if(this.streamInfo.data_length!==l.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,l,h){return f.pipe(new o).pipe(new c("uncompressedSize")).pipe(l.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",l)},s.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,s,i){var n=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,s,i){var n=r("./utils"),a=function(){for(var o,c=[],u=0;u<256;u++){o=u;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;c[u]=o}return c}();s.exports=function(o,c){return o!==void 0&&o.length?n.getTypeOf(o)!=="string"?function(u,f,l,h){var p=a,b=h+l;u^=-1;for(var m=h;m<b;m++)u=u>>>8^p[255&(u^f[m])];return-1^u}(0|c,o,o.length,0):function(u,f,l,h){var p=a,b=h+l;u^=-1;for(var m=h;m<b;m++)u=u>>>8^p[255&(u^f.charCodeAt(m))];return-1^u}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(r,s,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,s,i){var n=null;n=typeof Promise<"u"?Promise:r("lie"),s.exports={Promise:n}},{lie:37}],7:[function(r,s,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),o=r("./utils"),c=r("./stream/GenericWorker"),u=n?"uint8array":"array";function f(l,h){c.call(this,"FlateWorker/"+l),this._pako=null,this._pakoAction=l,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(f,c),f.prototype.processChunk=function(l){this.meta=l.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,l.data),!1)},f.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var l=this;this._pako.onData=function(h){l.push({data:h,meta:l.meta})}},i.compressWorker=function(l){return new f("Deflate",l)},i.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,s,i){function n(p,b){var m,v="";for(m=0;m<b;m++)v+=String.fromCharCode(255&p),p>>>=8;return v}function a(p,b,m,v,x,_){var y,k,A=p.file,M=p.compression,P=_!==u.utf8encode,R=o.transformTo("string",_(A.name)),L=o.transformTo("string",u.utf8encode(A.name)),N=A.comment,I=o.transformTo("string",_(N)),d=o.transformTo("string",u.utf8encode(N)),g=L.length!==A.name.length,w=d.length!==N.length,D="",S="",E="",O=A.dir,T=A.date,C={crc32:0,compressedSize:0,uncompressedSize:0};b&&!m||(C.crc32=p.crc32,C.compressedSize=p.compressedSize,C.uncompressedSize=p.uncompressedSize);var F=0;b&&(F|=8),P||!g&&!w||(F|=2048);var j=0,W=0;O&&(j|=16),x==="UNIX"?(W=798,j|=function(Z,ie){var pe=Z;return Z||(pe=ie?16893:33204),(65535&pe)<<16}(A.unixPermissions,O)):(W=20,j|=function(Z){return 63&(Z||0)}(A.dosPermissions)),y=T.getUTCHours(),y<<=6,y|=T.getUTCMinutes(),y<<=5,y|=T.getUTCSeconds()/2,k=T.getUTCFullYear()-1980,k<<=4,k|=T.getUTCMonth()+1,k<<=5,k|=T.getUTCDate(),g&&(S=n(1,1)+n(f(R),4)+L,D+="up"+n(S.length,2)+S),w&&(E=n(1,1)+n(f(I),4)+d,D+="uc"+n(E.length,2)+E);var V="";return V+=`
\0`,V+=n(F,2),V+=M.magic,V+=n(y,2),V+=n(k,2),V+=n(C.crc32,4),V+=n(C.compressedSize,4),V+=n(C.uncompressedSize,4),V+=n(R.length,2),V+=n(D.length,2),{fileRecord:l.LOCAL_FILE_HEADER+V+R+D,dirRecord:l.CENTRAL_FILE_HEADER+n(W,2)+V+n(I.length,2)+"\0\0\0\0"+n(j,4)+n(v,4)+R+D+I}}var o=r("../utils"),c=r("../stream/GenericWorker"),u=r("../utf8"),f=r("../crc32"),l=r("../signature");function h(p,b,m,v){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=m,this.encodeFileName=v,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,c),h.prototype.push=function(p){var b=p.meta.percent||0,m=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:m?(b+100*(m-v-1))/m:100}}))},h.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var b=this.streamFiles&&!p.file.dir;if(b){var m=a(p,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(p){this.accumulate=!1;var b=this.streamFiles&&!p.file.dir,m=a(p,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),b)this.push({data:function(v){return l.DATA_DESCRIPTOR+n(v.crc32,4)+n(v.compressedSize,4)+n(v.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var p=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var m=this.bytesWritten-p,v=function(x,_,y,k,A){var M=o.transformTo("string",A(k));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(x,2)+n(x,2)+n(_,4)+n(y,4)+n(M.length,2)+M}(this.dirRecords.length,m,p,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(p){this._sources.push(p);var b=this;return p.on("data",function(m){b.processChunk(m)}),p.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),p.on("error",function(m){b.error(m)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(p){var b=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var m=0;m<b.length;m++)try{b[m].error(p)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,b=0;b<p.length;b++)p[b].lock()},s.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,s,i){var n=r("../compressions"),a=r("./ZipFileWorker");i.generateWorker=function(o,c,u){var f=new a(c.streamFiles,u,c.platform,c.encodeFileName),l=0;try{o.forEach(function(h,p){l++;var b=function(_,y){var k=_||y,A=n[k];if(!A)throw new Error(k+" is not a valid compression method !");return A}(p.options.compression,c.compression),m=p.options.compressionOptions||c.compressionOptions||{},v=p.dir,x=p.date;p._compressWorker(b,m).withStreamInfo("file",{name:h,dir:v,date:x,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(f)}),f.entriesCount=l}catch(h){f.error(h)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,s,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new n;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(n.prototype=r("./object")).loadAsync=r("./load"),n.support=r("./support"),n.defaults=r("./defaults"),n.version="3.10.1",n.loadAsync=function(a,o){return new n().loadAsync(a,o)},n.external=r("./external"),s.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,s,i){var n=r("./utils"),a=r("./external"),o=r("./utf8"),c=r("./zipEntries"),u=r("./stream/Crc32Probe"),f=r("./nodejsUtils");function l(h){return new a.Promise(function(p,b){var m=h.decompressed.getContentWorker().pipe(new u);m.on("error",function(v){b(v)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}s.exports=function(h,p){var b=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),f.isNode&&f.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",h,!0,p.optimizedBinaryString,p.base64).then(function(m){var v=new c(p);return v.load(m),v}).then(function(m){var v=[a.Promise.resolve(m)],x=m.files;if(p.checkCRC32)for(var _=0;_<x.length;_++)v.push(l(x[_]));return a.Promise.all(v)}).then(function(m){for(var v=m.shift(),x=v.files,_=0;_<x.length;_++){var y=x[_],k=y.fileNameStr,A=n.resolve(y.fileNameStr);b.file(A,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:p.createFolders}),y.dir||(b.file(A).unsafeOriginalName=k)}return v.zipComment.length&&(b.comment=v.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,s,i){var n=r("../utils"),a=r("../stream/GenericWorker");function o(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}n.inherits(o,a),o.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,s,i){var n=r("readable-stream").Readable;function a(o,c,u){n.call(this,c),this._helper=o;var f=this;o.on("data",function(l,h){f.push(l)||f._helper.pause(),u&&u(h)}).on("error",function(l){f.emit("error",l)}).on("end",function(){f.push(null)})}r("../utils").inherits(a,n),a.prototype._read=function(){this._helper.resume()},s.exports=a},{"../utils":32,"readable-stream":16}],14:[function(r,s,i){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,a);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,a)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var a=new Buffer(n);return a.fill(0),a},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(r,s,i){function n(A,M,P){var R,L=o.getTypeOf(M),N=o.extend(P||{},f);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(A=x(A)),N.createFolders&&(R=v(A))&&_.call(this,R,!0);var I=L==="string"&&N.binary===!1&&N.base64===!1;P&&P.binary!==void 0||(N.binary=!I),(M instanceof l&&M.uncompressedSize===0||N.dir||!M||M.length===0)&&(N.base64=!1,N.binary=!0,M="",N.compression="STORE",L="string");var d=null;d=M instanceof l||M instanceof c?M:b.isNode&&b.isStream(M)?new m(A,M):o.prepareContent(A,M,N.binary,N.optimizedBinaryString,N.base64);var g=new h(A,d,N);this.files[A]=g}var a=r("./utf8"),o=r("./utils"),c=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),f=r("./defaults"),l=r("./compressedObject"),h=r("./zipObject"),p=r("./generate"),b=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),v=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var M=A.lastIndexOf("/");return 0<M?A.substring(0,M):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},_=function(A,M){return M=M!==void 0?M:f.createFolders,A=x(A),this.files[A]||n.call(this,A,null,{dir:!0,createFolders:M}),this.files[A]};function y(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var M,P,R;for(M in this.files)R=this.files[M],(P=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&A(P,R)},filter:function(A){var M=[];return this.forEach(function(P,R){A(P,R)&&M.push(R)}),M},file:function(A,M,P){if(arguments.length!==1)return A=this.root+A,n.call(this,A,M,P),this;if(y(A)){var R=A;return this.filter(function(N,I){return!I.dir&&R.test(N)})}var L=this.files[this.root+A];return L&&!L.dir?L:null},folder:function(A){if(!A)return this;if(y(A))return this.filter(function(L,N){return N.dir&&A.test(L)});var M=this.root+A,P=_.call(this,M),R=this.clone();return R.root=P.name,R},remove:function(A){A=this.root+A;var M=this.files[A];if(M||(A.slice(-1)!=="/"&&(A+="/"),M=this.files[A]),M&&!M.dir)delete this.files[A];else for(var P=this.filter(function(L,N){return N.name.slice(0,A.length)===A}),R=0;R<P.length;R++)delete this.files[P[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var M,P={};try{if((P=o.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");o.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var R=P.comment||this.comment||"";M=p.generateWorker(this,P,R)}catch(L){(M=new c("error")).error(L)}return new u(M,P.type||"string",P.mimeType)},generateAsync:function(A,M){return this.generateInternalStream(A).accumulate(M)},generateNodeStream:function(A,M){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(M)}};s.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,s,i){s.exports=r("stream")},{stream:void 0}],17:[function(r,s,i){var n=r("./DataReader");function a(o){n.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}r("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),u=o.charCodeAt(1),f=o.charCodeAt(2),l=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===u&&this.data[h+2]===f&&this.data[h+3]===l)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),u=o.charCodeAt(1),f=o.charCodeAt(2),l=o.charCodeAt(3),h=this.readData(4);return c===h[0]&&u===h[1]&&f===h[2]&&l===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./DataReader":18}],18:[function(r,s,i){var n=r("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,u=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=o,u},readString:function(o){return n.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=a},{"../utils":32}],19:[function(r,s,i){var n=r("./Uint8ArrayReader");function a(o){n.call(this,o)}r("../utils").inherits(a,n),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,s,i){var n=r("./DataReader");function a(o){n.call(this,o)}r("../utils").inherits(a,n),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./DataReader":18}],21:[function(r,s,i){var n=r("./ArrayReader");function a(o){n.call(this,o)}r("../utils").inherits(a,n),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},s.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(r,s,i){var n=r("../utils"),a=r("../support"),o=r("./ArrayReader"),c=r("./StringReader"),u=r("./NodeBufferReader"),f=r("./Uint8ArrayReader");s.exports=function(l){var h=n.getTypeOf(l);return n.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new u(l):a.uint8array?new f(n.transformTo("uint8array",l)):new o(n.transformTo("array",l)):new c(l)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,s,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,s,i){var n=r("./GenericWorker"),a=r("../utils");function o(c){n.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,n),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(r,s,i){var n=r("./GenericWorker"),a=r("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(o,n),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,s,i){var n=r("../utils"),a=r("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}n.inherits(o,a),o.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(r,s,i){var n=r("../utils"),a=r("./GenericWorker");function o(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=n.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}n.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(r,s,i){function n(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},s.exports=n},{}],29:[function(r,s,i){var n=r("../utils"),a=r("./ConvertWorker"),o=r("./GenericWorker"),c=r("../base64"),u=r("../support"),f=r("../external"),l=null;if(u.nodestream)try{l=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(b,m){return new f.Promise(function(v,x){var _=[],y=b._internalType,k=b._outputType,A=b._mimeType;b.on("data",function(M,P){_.push(M),m&&m(P)}).on("error",function(M){_=[],x(M)}).on("end",function(){try{var M=function(P,R,L){switch(P){case"blob":return n.newBlob(n.transformTo("arraybuffer",R),L);case"base64":return c.encode(R);default:return n.transformTo(P,R)}}(k,function(P,R){var L,N=0,I=null,d=0;for(L=0;L<R.length;L++)d+=R[L].length;switch(P){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(I=new Uint8Array(d),L=0;L<R.length;L++)I.set(R[L],N),N+=R[L].length;return I;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+P+"'")}}(y,_),A);v(M)}catch(P){x(P)}_=[]}).resume()})}function p(b,m,v){var x=m;switch(m){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=m,this._mimeType=v,n.checkSupport(x),this._worker=b.pipe(new a(x)),b.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}p.prototype={accumulate:function(b){return h(this,b)},on:function(b,m){var v=this;return b==="data"?this._worker.on(b,function(x){m.call(v,x.data,x.meta)}):this._worker.on(b,function(){n.delay(m,arguments,v)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:this._outputType!=="nodebuffer"},b)}},s.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,s,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(n),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,s,i){for(var n=r("./utils"),a=r("./support"),o=r("./nodejsUtils"),c=r("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function l(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}i.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(b){var m,v,x,_,y,k=b.length,A=0;for(_=0;_<k;_++)(64512&(v=b.charCodeAt(_)))==55296&&_+1<k&&(64512&(x=b.charCodeAt(_+1)))==56320&&(v=65536+(v-55296<<10)+(x-56320),_++),A+=v<128?1:v<2048?2:v<65536?3:4;for(m=a.uint8array?new Uint8Array(A):new Array(A),_=y=0;y<A;_++)(64512&(v=b.charCodeAt(_)))==55296&&_+1<k&&(64512&(x=b.charCodeAt(_+1)))==56320&&(v=65536+(v-55296<<10)+(x-56320),_++),v<128?m[y++]=v:(v<2048?m[y++]=192|v>>>6:(v<65536?m[y++]=224|v>>>12:(m[y++]=240|v>>>18,m[y++]=128|v>>>12&63),m[y++]=128|v>>>6&63),m[y++]=128|63&v);return m}(p)},i.utf8decode=function(p){return a.nodebuffer?n.transformTo("nodebuffer",p).toString("utf-8"):function(b){var m,v,x,_,y=b.length,k=new Array(2*y);for(m=v=0;m<y;)if((x=b[m++])<128)k[v++]=x;else if(4<(_=u[x]))k[v++]=65533,m+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&m<y;)x=x<<6|63&b[m++],_--;1<_?k[v++]=65533:x<65536?k[v++]=x:(x-=65536,k[v++]=55296|x>>10&1023,k[v++]=56320|1023&x)}return k.length!==v&&(k.subarray?k=k.subarray(0,v):k.length=v),n.applyFromCharCode(k)}(p=n.transformTo(a.uint8array?"uint8array":"array",p))},n.inherits(l,c),l.prototype.processChunk=function(p){var b=n.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=b;(b=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),b.set(m,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var v=function(_,y){var k;for((y=y||_.length)>_.length&&(y=_.length),k=y-1;0<=k&&(192&_[k])==128;)k--;return k<0||k===0?y:k+u[_[k]]>y?k:y}(b),x=b;v!==b.length&&(a.uint8array?(x=b.subarray(0,v),this.leftOver=b.subarray(v,b.length)):(x=b.slice(0,v),this.leftOver=b.slice(v,b.length))),this.push({data:i.utf8decode(x),meta:p.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=l,n.inherits(h,c),h.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,s,i){var n=r("./support"),a=r("./base64"),o=r("./nodejsUtils"),c=r("./external");function u(m){return m}function f(m,v){for(var x=0;x<m.length;++x)v[x]=255&m.charCodeAt(x);return v}r("setimmediate"),i.newBlob=function(m,v){i.checkSupport("blob");try{return new Blob([m],{type:v})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(m),x.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(m,v,x){var _=[],y=0,k=m.length;if(k<=x)return String.fromCharCode.apply(null,m);for(;y<k;)v==="array"||v==="nodebuffer"?_.push(String.fromCharCode.apply(null,m.slice(y,Math.min(y+x,k)))):_.push(String.fromCharCode.apply(null,m.subarray(y,Math.min(y+x,k)))),y+=x;return _.join("")},stringifyByChar:function(m){for(var v="",x=0;x<m.length;x++)v+=String.fromCharCode(m[x]);return v},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var v=65536,x=i.getTypeOf(m),_=!0;if(x==="uint8array"?_=l.applyCanBeUsed.uint8array:x==="nodebuffer"&&(_=l.applyCanBeUsed.nodebuffer),_)for(;1<v;)try{return l.stringifyByChunk(m,x,v)}catch{v=Math.floor(v/2)}return l.stringifyByChar(m)}function p(m,v){for(var x=0;x<m.length;x++)v[x]=m[x];return v}i.applyFromCharCode=h;var b={};b.string={string:u,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return b.string.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:function(m){return f(m,o.allocBuffer(m.length))}},b.array={string:h,array:u,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},b.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return p(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:u,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},b.uint8array={string:h,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:u,nodebuffer:function(m){return o.newBufferFrom(m)}},b.nodebuffer={string:h,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return b.nodebuffer.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:u},i.transformTo=function(m,v){if(v=v||"",!m)return v;i.checkSupport(m);var x=i.getTypeOf(v);return b[x][m](v)},i.resolve=function(m){for(var v=m.split("/"),x=[],_=0;_<v.length;_++){var y=v[_];y==="."||y===""&&_!==0&&_!==v.length-1||(y===".."?x.pop():x.push(y))}return x.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":n.nodebuffer&&o.isBuffer(m)?"nodebuffer":n.uint8array&&m instanceof Uint8Array?"uint8array":n.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!n[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var v,x,_="";for(x=0;x<(m||"").length;x++)_+="\\x"+((v=m.charCodeAt(x))<16?"0":"")+v.toString(16).toUpperCase();return _},i.delay=function(m,v,x){setImmediate(function(){m.apply(x||null,v||[])})},i.inherits=function(m,v){function x(){}x.prototype=v.prototype,m.prototype=new x},i.extend=function(){var m,v,x={};for(m=0;m<arguments.length;m++)for(v in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],v)&&x[v]===void 0&&(x[v]=arguments[m][v]);return x},i.prepareContent=function(m,v,x,_,y){return c.Promise.resolve(v).then(function(k){return n.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new c.Promise(function(A,M){var P=new FileReader;P.onload=function(R){A(R.target.result)},P.onerror=function(R){M(R.target.error)},P.readAsArrayBuffer(k)}):k}).then(function(k){var A=i.getTypeOf(k);return A?(A==="arraybuffer"?k=i.transformTo("uint8array",k):A==="string"&&(y?k=a.decode(k):x&&_!==!0&&(k=function(M){return f(M,n.uint8array?new Uint8Array(M.length):new Array(M.length))}(k))),k):c.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,s,i){var n=r("./reader/readerFor"),a=r("./utils"),o=r("./signature"),c=r("./zipEntry"),u=r("./support");function f(l){this.files=[],this.loadOptions=l}f.prototype={checkSignature:function(l){if(!this.reader.readAndCheckSignature(l)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(l)+")")}},isSignature:function(l,h){var p=this.reader.index;this.reader.setIndex(l);var b=this.reader.readString(4)===h;return this.reader.setIndex(p),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var l=this.reader.readData(this.zipCommentLength),h=u.uint8array?"uint8array":"array",p=a.transformTo(h,l);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var l,h,p,b=this.zip64EndOfCentralSize-44;0<b;)l=this.reader.readInt(2),h=this.reader.readInt(4),p=this.reader.readData(h),this.zip64ExtensibleData[l]={id:l,length:h,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var l,h;for(l=0;l<this.files.length;l++)h=this.files[l],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var l;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(l=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(l);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var l=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(l<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(l);var h=l;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(l=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(l),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var b=h-p;if(0<b)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(l){this.reader=n(l)},load:function(l){this.prepareReader(l),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,s,i){var n=r("./reader/readerFor"),a=r("./utils"),o=r("./compressedObject"),c=r("./crc32"),u=r("./utf8"),f=r("./compressions"),l=r("./support");function h(p,b){this.options=p,this.loadOptions=b}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var b,m;if(p.skip(22),this.fileNameLength=p.readInt(2),m=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(v){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===v)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,b,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var b=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(b),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=n(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var b,m,v,x=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<x;)b=p.readInt(2),m=p.readInt(2),v=p.readData(m),this.extraFields[b]={id:b,length:m,value:v};p.setIndex(x)},handleUTF8:function(){var p=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var m=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var x=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var b=n(p.value);return b.readInt(1)!==1||c(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var b=n(p.value);return b.readInt(1)!==1||c(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(p.length-5))}return null}},s.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,s,i){function n(b,m,v){this.name=b,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=m,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var a=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),c=r("./utf8"),u=r("./compressedObject"),f=r("./stream/GenericWorker");n.prototype={internalStream:function(b){var m=null,v="string";try{if(!b)throw new Error("No output type specified.");var x=(v=b.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),m=this._decompressWorker();var _=!this._dataBinary;_&&!x&&(m=m.pipe(new c.Utf8EncodeWorker)),!_&&x&&(m=m.pipe(new c.Utf8DecodeWorker))}catch(y){(m=new f("error")).error(y)}return new a(m,v,"")},async:function(b,m){return this.internalStream(b).accumulate(m)},nodeStream:function(b,m){return this.internalStream(b||"nodebuffer").toNodejsStream(m)},_compressWorker:function(b,m){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(v,b,m)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new o(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<l.length;p++)n.prototype[l[p]]=h;s.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,s,i){(function(n){var a,o,c=n.MutationObserver||n.WebKitMutationObserver;if(c){var u=0,f=new c(b),l=n.document.createTextNode("");f.observe(l,{characterData:!0}),a=function(){l.data=u=++u%2}}else if(n.setImmediate||n.MessageChannel===void 0)a="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var m=n.document.createElement("script");m.onreadystatechange=function(){b(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},n.document.documentElement.appendChild(m)}:function(){setTimeout(b,0)};else{var h=new n.MessageChannel;h.port1.onmessage=b,a=function(){h.port2.postMessage(0)}}var p=[];function b(){var m,v;o=!0;for(var x=p.length;x;){for(v=p,p=[],m=-1;++m<x;)v[m]();x=p.length}o=!1}s.exports=function(m){p.push(m)!==1||o||a()}}).call(this,typeof cr<"u"?cr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,s,i){var n=r("immediate");function a(){}var o={},c=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function l(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==a&&m(this,x)}function h(x,_,y){this.promise=x,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function p(x,_,y){n(function(){var k;try{k=_(y)}catch(A){return o.reject(x,A)}k===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,k)})}function b(x){var _=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof _=="function")return function(){_.apply(x,arguments)}}function m(x,_){var y=!1;function k(P){y||(y=!0,o.reject(x,P))}function A(P){y||(y=!0,o.resolve(x,P))}var M=v(function(){_(A,k)});M.status==="error"&&k(M.value)}function v(x,_){var y={};try{y.value=x(_),y.status="success"}catch(k){y.status="error",y.value=k}return y}(s.exports=l).prototype.finally=function(x){if(typeof x!="function")return this;var _=this.constructor;return this.then(function(y){return _.resolve(x()).then(function(){return y})},function(y){return _.resolve(x()).then(function(){throw y})})},l.prototype.catch=function(x){return this.then(null,x)},l.prototype.then=function(x,_){if(typeof x!="function"&&this.state===u||typeof _!="function"&&this.state===c)return this;var y=new this.constructor(a);return this.state!==f?p(y,this.state===u?x:_,this.outcome):this.queue.push(new h(y,x,_)),y},h.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},h.prototype.otherCallFulfilled=function(x){p(this.promise,this.onFulfilled,x)},h.prototype.callRejected=function(x){o.reject(this.promise,x)},h.prototype.otherCallRejected=function(x){p(this.promise,this.onRejected,x)},o.resolve=function(x,_){var y=v(b,_);if(y.status==="error")return o.reject(x,y.value);var k=y.value;if(k)m(x,k);else{x.state=u,x.outcome=_;for(var A=-1,M=x.queue.length;++A<M;)x.queue[A].callFulfilled(_)}return x},o.reject=function(x,_){x.state=c,x.outcome=_;for(var y=-1,k=x.queue.length;++y<k;)x.queue[y].callRejected(_);return x},l.resolve=function(x){return x instanceof this?x:o.resolve(new this(a),x)},l.reject=function(x){var _=new this(a);return o.reject(_,x)},l.all=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=x.length,k=!1;if(!y)return this.resolve([]);for(var A=new Array(y),M=0,P=-1,R=new this(a);++P<y;)L(x[P],P);return R;function L(N,I){_.resolve(N).then(function(d){A[I]=d,++M!==y||k||(k=!0,o.resolve(R,A))},function(d){k||(k=!0,o.reject(R,d))})}},l.race=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=x.length,k=!1;if(!y)return this.resolve([]);for(var A=-1,M=new this(a);++A<y;)P=x[A],_.resolve(P).then(function(R){k||(k=!0,o.resolve(M,R))},function(R){k||(k=!0,o.reject(M,R))});var P;return M}},{immediate:36}],38:[function(r,s,i){var n={};(0,r("./lib/utils/common").assign)(n,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),s.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,s,i){var n=r("./zlib/deflate"),a=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/messages"),u=r("./zlib/zstream"),f=Object.prototype.toString,l=0,h=-1,p=0,b=8;function m(x){if(!(this instanceof m))return new m(x);this.options=a.assign({level:h,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},x||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=n.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(y!==l)throw new Error(c[y]);if(_.header&&n.deflateSetHeader(this.strm,_.header),_.dictionary){var k;if(k=typeof _.dictionary=="string"?o.string2buf(_.dictionary):f.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(y=n.deflateSetDictionary(this.strm,k))!==l)throw new Error(c[y]);this._dict_set=!0}}function v(x,_){var y=new m(_);if(y.push(x,!0),y.err)throw y.msg||c[y.err];return y.result}m.prototype.push=function(x,_){var y,k,A=this.strm,M=this.options.chunkSize;if(this.ended)return!1;k=_===~~_?_:_===!0?4:0,typeof x=="string"?A.input=o.string2buf(x):f.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(M),A.next_out=0,A.avail_out=M),(y=n.deflate(A,k))!==1&&y!==l)return this.onEnd(y),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(A.output,A.next_out))):this.onData(a.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&y!==1);return k===4?(y=n.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l):k!==2||(this.onEnd(l),!(A.avail_out=0))},m.prototype.onData=function(x){this.chunks.push(x)},m.prototype.onEnd=function(x){x===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},i.Deflate=m,i.deflate=v,i.deflateRaw=function(x,_){return(_=_||{}).raw=!0,v(x,_)},i.gzip=function(x,_){return(_=_||{}).gzip=!0,v(x,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,s,i){var n=r("./zlib/inflate"),a=r("./utils/common"),o=r("./utils/strings"),c=r("./zlib/constants"),u=r("./zlib/messages"),f=r("./zlib/zstream"),l=r("./zlib/gzheader"),h=Object.prototype.toString;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||m&&m.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&(15&v.windowBits)==0&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=n.inflateInit2(this.strm,v.windowBits);if(x!==c.Z_OK)throw new Error(u[x]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function b(m,v){var x=new p(v);if(x.push(m,!0),x.err)throw x.msg||u[x.err];return x.result}p.prototype.push=function(m,v){var x,_,y,k,A,M,P=this.strm,R=this.options.chunkSize,L=this.options.dictionary,N=!1;if(this.ended)return!1;_=v===~~v?v:v===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof m=="string"?P.input=o.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?P.input=new Uint8Array(m):P.input=m,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new a.Buf8(R),P.next_out=0,P.avail_out=R),(x=n.inflate(P,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&L&&(M=typeof L=="string"?o.string2buf(L):h.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,x=n.inflateSetDictionary(this.strm,M)),x===c.Z_BUF_ERROR&&N===!0&&(x=c.Z_OK,N=!1),x!==c.Z_STREAM_END&&x!==c.Z_OK)return this.onEnd(x),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&x!==c.Z_STREAM_END&&(P.avail_in!==0||_!==c.Z_FINISH&&_!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=o.utf8border(P.output,P.next_out),k=P.next_out-y,A=o.buf2string(P.output,y),P.next_out=k,P.avail_out=R-k,k&&a.arraySet(P.output,P.output,y,k,0),this.onData(A)):this.onData(a.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(N=!0)}while((0<P.avail_in||P.avail_out===0)&&x!==c.Z_STREAM_END);return x===c.Z_STREAM_END&&(_=c.Z_FINISH),_===c.Z_FINISH?(x=n.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===c.Z_OK):_!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(P.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=p,i.inflate=b,i.inflateRaw=function(m,v){return(v=v||{}).raw=!0,b(m,v)},i.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,s,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var l in f)f.hasOwnProperty(l)&&(c[l]=f[l])}}return c},i.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,f,l,h){if(u.subarray&&c.subarray)c.set(u.subarray(f,f+l),h);else for(var p=0;p<l;p++)c[h+p]=u[f+p]},flattenChunks:function(c){var u,f,l,h,p,b;for(u=l=0,f=c.length;u<f;u++)l+=c[u].length;for(b=new Uint8Array(l),u=h=0,f=c.length;u<f;u++)p=c[u],b.set(p,h),h+=p.length;return b}},o={arraySet:function(c,u,f,l,h){for(var p=0;p<l;p++)c[h+p]=u[f+p]},flattenChunks:function(c){return[].concat.apply([],c)}};i.setTyped=function(c){c?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(n)},{}],42:[function(r,s,i){var n=r("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new n.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(l,h){if(h<65537&&(l.subarray&&o||!l.subarray&&a))return String.fromCharCode.apply(null,n.shrinkBuf(l,h));for(var p="",b=0;b<h;b++)p+=String.fromCharCode(l[b]);return p}c[254]=c[254]=1,i.string2buf=function(l){var h,p,b,m,v,x=l.length,_=0;for(m=0;m<x;m++)(64512&(p=l.charCodeAt(m)))==55296&&m+1<x&&(64512&(b=l.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(b-56320),m++),_+=p<128?1:p<2048?2:p<65536?3:4;for(h=new n.Buf8(_),m=v=0;v<_;m++)(64512&(p=l.charCodeAt(m)))==55296&&m+1<x&&(64512&(b=l.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(b-56320),m++),p<128?h[v++]=p:(p<2048?h[v++]=192|p>>>6:(p<65536?h[v++]=224|p>>>12:(h[v++]=240|p>>>18,h[v++]=128|p>>>12&63),h[v++]=128|p>>>6&63),h[v++]=128|63&p);return h},i.buf2binstring=function(l){return f(l,l.length)},i.binstring2buf=function(l){for(var h=new n.Buf8(l.length),p=0,b=h.length;p<b;p++)h[p]=l.charCodeAt(p);return h},i.buf2string=function(l,h){var p,b,m,v,x=h||l.length,_=new Array(2*x);for(p=b=0;p<x;)if((m=l[p++])<128)_[b++]=m;else if(4<(v=c[m]))_[b++]=65533,p+=v-1;else{for(m&=v===2?31:v===3?15:7;1<v&&p<x;)m=m<<6|63&l[p++],v--;1<v?_[b++]=65533:m<65536?_[b++]=m:(m-=65536,_[b++]=55296|m>>10&1023,_[b++]=56320|1023&m)}return f(_,b)},i.utf8border=function(l,h){var p;for((h=h||l.length)>l.length&&(h=l.length),p=h-1;0<=p&&(192&l[p])==128;)p--;return p<0||p===0?h:p+c[l[p]]>h?p:h}},{"./common":41}],43:[function(r,s,i){s.exports=function(n,a,o,c){for(var u=65535&n|0,f=n>>>16&65535|0,l=0;o!==0;){for(o-=l=2e3<o?2e3:o;f=f+(u=u+a[c++]|0)|0,--l;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(r,s,i){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,s,i){var n=function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o}();s.exports=function(a,o,c,u){var f=n,l=u+c;a^=-1;for(var h=u;h<l;h++)a=a>>>8^f[255&(a^o[h])];return-1^a}},{}],46:[function(r,s,i){var n,a=r("../utils/common"),o=r("./trees"),c=r("./adler32"),u=r("./crc32"),f=r("./messages"),l=0,h=4,p=0,b=-2,m=-1,v=4,x=2,_=8,y=9,k=286,A=30,M=19,P=2*k+1,R=15,L=3,N=258,I=N+L+1,d=42,g=113,w=1,D=2,S=3,E=4;function O(B,K){return B.msg=f[K],K}function T(B){return(B<<1)-(4<B?9:0)}function C(B){for(var K=B.length;0<=--K;)B[K]=0}function F(B){var K=B.state,G=K.pending;G>B.avail_out&&(G=B.avail_out),G!==0&&(a.arraySet(B.output,K.pending_buf,K.pending_out,G,B.next_out),B.next_out+=G,K.pending_out+=G,B.total_out+=G,B.avail_out-=G,K.pending-=G,K.pending===0&&(K.pending_out=0))}function j(B,K){o._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,K),B.block_start=B.strstart,F(B.strm)}function W(B,K){B.pending_buf[B.pending++]=K}function V(B,K){B.pending_buf[B.pending++]=K>>>8&255,B.pending_buf[B.pending++]=255&K}function Z(B,K){var G,U,q=B.max_chain_length,$=B.strstart,ee=B.prev_length,J=B.nice_match,H=B.strstart>B.w_size-I?B.strstart-(B.w_size-I):0,re=B.window,ne=B.w_mask,te=B.prev,de=B.strstart+N,_e=re[$+ee-1],me=re[$+ee];B.prev_length>=B.good_match&&(q>>=2),J>B.lookahead&&(J=B.lookahead);do if(re[(G=K)+ee]===me&&re[G+ee-1]===_e&&re[G]===re[$]&&re[++G]===re[$+1]){$+=2,G++;do;while(re[++$]===re[++G]&&re[++$]===re[++G]&&re[++$]===re[++G]&&re[++$]===re[++G]&&re[++$]===re[++G]&&re[++$]===re[++G]&&re[++$]===re[++G]&&re[++$]===re[++G]&&$<de);if(U=N-(de-$),$=de-N,ee<U){if(B.match_start=K,J<=(ee=U))break;_e=re[$+ee-1],me=re[$+ee]}}while((K=te[K&ne])>H&&--q!=0);return ee<=B.lookahead?ee:B.lookahead}function ie(B){var K,G,U,q,$,ee,J,H,re,ne,te=B.w_size;do{if(q=B.window_size-B.lookahead-B.strstart,B.strstart>=te+(te-I)){for(a.arraySet(B.window,B.window,te,te,0),B.match_start-=te,B.strstart-=te,B.block_start-=te,K=G=B.hash_size;U=B.head[--K],B.head[K]=te<=U?U-te:0,--G;);for(K=G=te;U=B.prev[--K],B.prev[K]=te<=U?U-te:0,--G;);q+=te}if(B.strm.avail_in===0)break;if(ee=B.strm,J=B.window,H=B.strstart+B.lookahead,re=q,ne=void 0,ne=ee.avail_in,re<ne&&(ne=re),G=ne===0?0:(ee.avail_in-=ne,a.arraySet(J,ee.input,ee.next_in,ne,H),ee.state.wrap===1?ee.adler=c(ee.adler,J,ne,H):ee.state.wrap===2&&(ee.adler=u(ee.adler,J,ne,H)),ee.next_in+=ne,ee.total_in+=ne,ne),B.lookahead+=G,B.lookahead+B.insert>=L)for($=B.strstart-B.insert,B.ins_h=B.window[$],B.ins_h=(B.ins_h<<B.hash_shift^B.window[$+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[$+L-1])&B.hash_mask,B.prev[$&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=$,$++,B.insert--,!(B.lookahead+B.insert<L)););}while(B.lookahead<I&&B.strm.avail_in!==0)}function pe(B,K){for(var G,U;;){if(B.lookahead<I){if(ie(B),B.lookahead<I&&K===l)return w;if(B.lookahead===0)break}if(G=0,B.lookahead>=L&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+L-1])&B.hash_mask,G=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),G!==0&&B.strstart-G<=B.w_size-I&&(B.match_length=Z(B,G)),B.match_length>=L)if(U=o._tr_tally(B,B.strstart-B.match_start,B.match_length-L),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=L){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+L-1])&B.hash_mask,G=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else U=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(U&&(j(B,!1),B.strm.avail_out===0))return w}return B.insert=B.strstart<L-1?B.strstart:L-1,K===h?(j(B,!0),B.strm.avail_out===0?S:E):B.last_lit&&(j(B,!1),B.strm.avail_out===0)?w:D}function le(B,K){for(var G,U,q;;){if(B.lookahead<I){if(ie(B),B.lookahead<I&&K===l)return w;if(B.lookahead===0)break}if(G=0,B.lookahead>=L&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+L-1])&B.hash_mask,G=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=L-1,G!==0&&B.prev_length<B.max_lazy_match&&B.strstart-G<=B.w_size-I&&(B.match_length=Z(B,G),B.match_length<=5&&(B.strategy===1||B.match_length===L&&4096<B.strstart-B.match_start)&&(B.match_length=L-1)),B.prev_length>=L&&B.match_length<=B.prev_length){for(q=B.strstart+B.lookahead-L,U=o._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-L),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=q&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+L-1])&B.hash_mask,G=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=L-1,B.strstart++,U&&(j(B,!1),B.strm.avail_out===0))return w}else if(B.match_available){if((U=o._tr_tally(B,0,B.window[B.strstart-1]))&&j(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return w}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(U=o._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<L-1?B.strstart:L-1,K===h?(j(B,!0),B.strm.avail_out===0?S:E):B.last_lit&&(j(B,!1),B.strm.avail_out===0)?w:D}function se(B,K,G,U,q){this.good_length=B,this.max_lazy=K,this.nice_length=G,this.max_chain=U,this.func=q}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*P),this.dyn_dtree=new a.Buf16(2*(2*A+1)),this.bl_tree=new a.Buf16(2*(2*M+1)),C(this.dyn_ltree),C(this.dyn_dtree),C(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(R+1),this.heap=new a.Buf16(2*k+1),C(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*k+1),C(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ce(B){var K;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=x,(K=B.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?d:g,B.adler=K.wrap===2?0:1,K.last_flush=l,o._tr_init(K),p):O(B,b)}function ye(B){var K=Ce(B);return K===p&&function(G){G.window_size=2*G.w_size,C(G.head),G.max_lazy_match=n[G.level].max_lazy,G.good_match=n[G.level].good_length,G.nice_match=n[G.level].nice_length,G.max_chain_length=n[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=L-1,G.match_available=0,G.ins_h=0}(B.state),K}function Ee(B,K,G,U,q,$){if(!B)return b;var ee=1;if(K===m&&(K=6),U<0?(ee=0,U=-U):15<U&&(ee=2,U-=16),q<1||y<q||G!==_||U<8||15<U||K<0||9<K||$<0||v<$)return O(B,b);U===8&&(U=9);var J=new he;return(B.state=J).strm=B,J.wrap=ee,J.gzhead=null,J.w_bits=U,J.w_size=1<<J.w_bits,J.w_mask=J.w_size-1,J.hash_bits=q+7,J.hash_size=1<<J.hash_bits,J.hash_mask=J.hash_size-1,J.hash_shift=~~((J.hash_bits+L-1)/L),J.window=new a.Buf8(2*J.w_size),J.head=new a.Buf16(J.hash_size),J.prev=new a.Buf16(J.w_size),J.lit_bufsize=1<<q+6,J.pending_buf_size=4*J.lit_bufsize,J.pending_buf=new a.Buf8(J.pending_buf_size),J.d_buf=1*J.lit_bufsize,J.l_buf=3*J.lit_bufsize,J.level=K,J.strategy=$,J.method=G,ye(B)}n=[new se(0,0,0,0,function(B,K){var G=65535;for(G>B.pending_buf_size-5&&(G=B.pending_buf_size-5);;){if(B.lookahead<=1){if(ie(B),B.lookahead===0&&K===l)return w;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var U=B.block_start+G;if((B.strstart===0||B.strstart>=U)&&(B.lookahead=B.strstart-U,B.strstart=U,j(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-I&&(j(B,!1),B.strm.avail_out===0))return w}return B.insert=0,K===h?(j(B,!0),B.strm.avail_out===0?S:E):(B.strstart>B.block_start&&(j(B,!1),B.strm.avail_out),w)}),new se(4,4,8,4,pe),new se(4,5,16,8,pe),new se(4,6,32,32,pe),new se(4,4,16,16,le),new se(8,16,32,32,le),new se(8,16,128,128,le),new se(8,32,128,256,le),new se(32,128,258,1024,le),new se(32,258,258,4096,le)],i.deflateInit=function(B,K){return Ee(B,K,_,15,8,0)},i.deflateInit2=Ee,i.deflateReset=ye,i.deflateResetKeep=Ce,i.deflateSetHeader=function(B,K){return B&&B.state?B.state.wrap!==2?b:(B.state.gzhead=K,p):b},i.deflate=function(B,K){var G,U,q,$;if(!B||!B.state||5<K||K<0)return B?O(B,b):b;if(U=B.state,!B.output||!B.input&&B.avail_in!==0||U.status===666&&K!==h)return O(B,B.avail_out===0?-5:b);if(U.strm=B,G=U.last_flush,U.last_flush=K,U.status===d)if(U.wrap===2)B.adler=0,W(U,31),W(U,139),W(U,8),U.gzhead?(W(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),W(U,255&U.gzhead.time),W(U,U.gzhead.time>>8&255),W(U,U.gzhead.time>>16&255),W(U,U.gzhead.time>>24&255),W(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),W(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(W(U,255&U.gzhead.extra.length),W(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(B.adler=u(B.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(W(U,0),W(U,0),W(U,0),W(U,0),W(U,0),W(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),W(U,3),U.status=g);else{var ee=_+(U.w_bits-8<<4)<<8;ee|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(ee|=32),ee+=31-ee%31,U.status=g,V(U,ee),U.strstart!==0&&(V(U,B.adler>>>16),V(U,65535&B.adler)),B.adler=1}if(U.status===69)if(U.gzhead.extra){for(q=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>q&&(B.adler=u(B.adler,U.pending_buf,U.pending-q,q)),F(B),q=U.pending,U.pending!==U.pending_buf_size));)W(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>q&&(B.adler=u(B.adler,U.pending_buf,U.pending-q,q)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){q=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>q&&(B.adler=u(B.adler,U.pending_buf,U.pending-q,q)),F(B),q=U.pending,U.pending===U.pending_buf_size)){$=1;break}$=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,W(U,$)}while($!==0);U.gzhead.hcrc&&U.pending>q&&(B.adler=u(B.adler,U.pending_buf,U.pending-q,q)),$===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){q=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>q&&(B.adler=u(B.adler,U.pending_buf,U.pending-q,q)),F(B),q=U.pending,U.pending===U.pending_buf_size)){$=1;break}$=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,W(U,$)}while($!==0);U.gzhead.hcrc&&U.pending>q&&(B.adler=u(B.adler,U.pending_buf,U.pending-q,q)),$===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&F(B),U.pending+2<=U.pending_buf_size&&(W(U,255&B.adler),W(U,B.adler>>8&255),B.adler=0,U.status=g)):U.status=g),U.pending!==0){if(F(B),B.avail_out===0)return U.last_flush=-1,p}else if(B.avail_in===0&&T(K)<=T(G)&&K!==h)return O(B,-5);if(U.status===666&&B.avail_in!==0)return O(B,-5);if(B.avail_in!==0||U.lookahead!==0||K!==l&&U.status!==666){var J=U.strategy===2?function(H,re){for(var ne;;){if(H.lookahead===0&&(ie(H),H.lookahead===0)){if(re===l)return w;break}if(H.match_length=0,ne=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,ne&&(j(H,!1),H.strm.avail_out===0))return w}return H.insert=0,re===h?(j(H,!0),H.strm.avail_out===0?S:E):H.last_lit&&(j(H,!1),H.strm.avail_out===0)?w:D}(U,K):U.strategy===3?function(H,re){for(var ne,te,de,_e,me=H.window;;){if(H.lookahead<=N){if(ie(H),H.lookahead<=N&&re===l)return w;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=L&&0<H.strstart&&(te=me[de=H.strstart-1])===me[++de]&&te===me[++de]&&te===me[++de]){_e=H.strstart+N;do;while(te===me[++de]&&te===me[++de]&&te===me[++de]&&te===me[++de]&&te===me[++de]&&te===me[++de]&&te===me[++de]&&te===me[++de]&&de<_e);H.match_length=N-(_e-de),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=L?(ne=o._tr_tally(H,1,H.match_length-L),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(ne=o._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),ne&&(j(H,!1),H.strm.avail_out===0))return w}return H.insert=0,re===h?(j(H,!0),H.strm.avail_out===0?S:E):H.last_lit&&(j(H,!1),H.strm.avail_out===0)?w:D}(U,K):n[U.level].func(U,K);if(J!==S&&J!==E||(U.status=666),J===w||J===S)return B.avail_out===0&&(U.last_flush=-1),p;if(J===D&&(K===1?o._tr_align(U):K!==5&&(o._tr_stored_block(U,0,0,!1),K===3&&(C(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),F(B),B.avail_out===0))return U.last_flush=-1,p}return K!==h?p:U.wrap<=0?1:(U.wrap===2?(W(U,255&B.adler),W(U,B.adler>>8&255),W(U,B.adler>>16&255),W(U,B.adler>>24&255),W(U,255&B.total_in),W(U,B.total_in>>8&255),W(U,B.total_in>>16&255),W(U,B.total_in>>24&255)):(V(U,B.adler>>>16),V(U,65535&B.adler)),F(B),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?p:1)},i.deflateEnd=function(B){var K;return B&&B.state?(K=B.state.status)!==d&&K!==69&&K!==73&&K!==91&&K!==103&&K!==g&&K!==666?O(B,b):(B.state=null,K===g?O(B,-3):p):b},i.deflateSetDictionary=function(B,K){var G,U,q,$,ee,J,H,re,ne=K.length;if(!B||!B.state||($=(G=B.state).wrap)===2||$===1&&G.status!==d||G.lookahead)return b;for($===1&&(B.adler=c(B.adler,K,ne,0)),G.wrap=0,ne>=G.w_size&&($===0&&(C(G.head),G.strstart=0,G.block_start=0,G.insert=0),re=new a.Buf8(G.w_size),a.arraySet(re,K,ne-G.w_size,G.w_size,0),K=re,ne=G.w_size),ee=B.avail_in,J=B.next_in,H=B.input,B.avail_in=ne,B.next_in=0,B.input=K,ie(G);G.lookahead>=L;){for(U=G.strstart,q=G.lookahead-(L-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[U+L-1])&G.hash_mask,G.prev[U&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=U,U++,--q;);G.strstart=U,G.lookahead=L-1,ie(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=L-1,G.match_available=0,B.next_in=J,B.input=H,B.avail_in=ee,G.wrap=$,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,s,i){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,s,i){s.exports=function(n,a){var o,c,u,f,l,h,p,b,m,v,x,_,y,k,A,M,P,R,L,N,I,d,g,w,D;o=n.state,c=n.next_in,w=n.input,u=c+(n.avail_in-5),f=n.next_out,D=n.output,l=f-(a-n.avail_out),h=f+(n.avail_out-257),p=o.dmax,b=o.wsize,m=o.whave,v=o.wnext,x=o.window,_=o.hold,y=o.bits,k=o.lencode,A=o.distcode,M=(1<<o.lenbits)-1,P=(1<<o.distbits)-1;e:do{y<15&&(_+=w[c++]<<y,y+=8,_+=w[c++]<<y,y+=8),R=k[_&M];t:for(;;){if(_>>>=L=R>>>24,y-=L,(L=R>>>16&255)===0)D[f++]=65535&R;else{if(!(16&L)){if((64&L)==0){R=k[(65535&R)+(_&(1<<L)-1)];continue t}if(32&L){o.mode=12;break e}n.msg="invalid literal/length code",o.mode=30;break e}N=65535&R,(L&=15)&&(y<L&&(_+=w[c++]<<y,y+=8),N+=_&(1<<L)-1,_>>>=L,y-=L),y<15&&(_+=w[c++]<<y,y+=8,_+=w[c++]<<y,y+=8),R=A[_&P];r:for(;;){if(_>>>=L=R>>>24,y-=L,!(16&(L=R>>>16&255))){if((64&L)==0){R=A[(65535&R)+(_&(1<<L)-1)];continue r}n.msg="invalid distance code",o.mode=30;break e}if(I=65535&R,y<(L&=15)&&(_+=w[c++]<<y,(y+=8)<L&&(_+=w[c++]<<y,y+=8)),p<(I+=_&(1<<L)-1)){n.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=L,y-=L,(L=f-l)<I){if(m<(L=I-L)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break e}if(g=x,(d=0)===v){if(d+=b-L,L<N){for(N-=L;D[f++]=x[d++],--L;);d=f-I,g=D}}else if(v<L){if(d+=b+v-L,(L-=v)<N){for(N-=L;D[f++]=x[d++],--L;);if(d=0,v<N){for(N-=L=v;D[f++]=x[d++],--L;);d=f-I,g=D}}}else if(d+=v-L,L<N){for(N-=L;D[f++]=x[d++],--L;);d=f-I,g=D}for(;2<N;)D[f++]=g[d++],D[f++]=g[d++],D[f++]=g[d++],N-=3;N&&(D[f++]=g[d++],1<N&&(D[f++]=g[d++]))}else{for(d=f-I;D[f++]=D[d++],D[f++]=D[d++],D[f++]=D[d++],2<(N-=3););N&&(D[f++]=D[d++],1<N&&(D[f++]=D[d++]))}break}}break}}while(c<u&&f<h);c-=N=y>>3,_&=(1<<(y-=N<<3))-1,n.next_in=c,n.next_out=f,n.avail_in=c<u?u-c+5:5-(c-u),n.avail_out=f<h?h-f+257:257-(f-h),o.hold=_,o.bits=y}},{}],49:[function(r,s,i){var n=r("../utils/common"),a=r("./adler32"),o=r("./crc32"),c=r("./inffast"),u=r("./inftrees"),f=1,l=2,h=0,p=-2,b=1,m=852,v=592;function x(d){return(d>>>24&255)+(d>>>8&65280)+((65280&d)<<8)+((255&d)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(d){var g;return d&&d.state?(g=d.state,d.total_in=d.total_out=g.total=0,d.msg="",g.wrap&&(d.adler=1&g.wrap),g.mode=b,g.last=0,g.havedict=0,g.dmax=32768,g.head=null,g.hold=0,g.bits=0,g.lencode=g.lendyn=new n.Buf32(m),g.distcode=g.distdyn=new n.Buf32(v),g.sane=1,g.back=-1,h):p}function k(d){var g;return d&&d.state?((g=d.state).wsize=0,g.whave=0,g.wnext=0,y(d)):p}function A(d,g){var w,D;return d&&d.state?(D=d.state,g<0?(w=0,g=-g):(w=1+(g>>4),g<48&&(g&=15)),g&&(g<8||15<g)?p:(D.window!==null&&D.wbits!==g&&(D.window=null),D.wrap=w,D.wbits=g,k(d))):p}function M(d,g){var w,D;return d?(D=new _,(d.state=D).window=null,(w=A(d,g))!==h&&(d.state=null),w):p}var P,R,L=!0;function N(d){if(L){var g;for(P=new n.Buf32(512),R=new n.Buf32(32),g=0;g<144;)d.lens[g++]=8;for(;g<256;)d.lens[g++]=9;for(;g<280;)d.lens[g++]=7;for(;g<288;)d.lens[g++]=8;for(u(f,d.lens,0,288,P,0,d.work,{bits:9}),g=0;g<32;)d.lens[g++]=5;u(l,d.lens,0,32,R,0,d.work,{bits:5}),L=!1}d.lencode=P,d.lenbits=9,d.distcode=R,d.distbits=5}function I(d,g,w,D){var S,E=d.state;return E.window===null&&(E.wsize=1<<E.wbits,E.wnext=0,E.whave=0,E.window=new n.Buf8(E.wsize)),D>=E.wsize?(n.arraySet(E.window,g,w-E.wsize,E.wsize,0),E.wnext=0,E.whave=E.wsize):(D<(S=E.wsize-E.wnext)&&(S=D),n.arraySet(E.window,g,w-D,S,E.wnext),(D-=S)?(n.arraySet(E.window,g,w-D,D,0),E.wnext=D,E.whave=E.wsize):(E.wnext+=S,E.wnext===E.wsize&&(E.wnext=0),E.whave<E.wsize&&(E.whave+=S))),0}i.inflateReset=k,i.inflateReset2=A,i.inflateResetKeep=y,i.inflateInit=function(d){return M(d,15)},i.inflateInit2=M,i.inflate=function(d,g){var w,D,S,E,O,T,C,F,j,W,V,Z,ie,pe,le,se,he,Ce,ye,Ee,B,K,G,U,q=0,$=new n.Buf8(4),ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!d||!d.state||!d.output||!d.input&&d.avail_in!==0)return p;(w=d.state).mode===12&&(w.mode=13),O=d.next_out,S=d.output,C=d.avail_out,E=d.next_in,D=d.input,T=d.avail_in,F=w.hold,j=w.bits,W=T,V=C,K=h;e:for(;;)switch(w.mode){case b:if(w.wrap===0){w.mode=13;break}for(;j<16;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(2&w.wrap&&F===35615){$[w.check=0]=255&F,$[1]=F>>>8&255,w.check=o(w.check,$,2,0),j=F=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&F)<<8)+(F>>8))%31){d.msg="incorrect header check",w.mode=30;break}if((15&F)!=8){d.msg="unknown compression method",w.mode=30;break}if(j-=4,B=8+(15&(F>>>=4)),w.wbits===0)w.wbits=B;else if(B>w.wbits){d.msg="invalid window size",w.mode=30;break}w.dmax=1<<B,d.adler=w.check=1,w.mode=512&F?10:12,j=F=0;break;case 2:for(;j<16;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(w.flags=F,(255&w.flags)!=8){d.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){d.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=F>>8&1),512&w.flags&&($[0]=255&F,$[1]=F>>>8&255,w.check=o(w.check,$,2,0)),j=F=0,w.mode=3;case 3:for(;j<32;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}w.head&&(w.head.time=F),512&w.flags&&($[0]=255&F,$[1]=F>>>8&255,$[2]=F>>>16&255,$[3]=F>>>24&255,w.check=o(w.check,$,4,0)),j=F=0,w.mode=4;case 4:for(;j<16;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}w.head&&(w.head.xflags=255&F,w.head.os=F>>8),512&w.flags&&($[0]=255&F,$[1]=F>>>8&255,w.check=o(w.check,$,2,0)),j=F=0,w.mode=5;case 5:if(1024&w.flags){for(;j<16;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}w.length=F,w.head&&(w.head.extra_len=F),512&w.flags&&($[0]=255&F,$[1]=F>>>8&255,w.check=o(w.check,$,2,0)),j=F=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(T<(Z=w.length)&&(Z=T),Z&&(w.head&&(B=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),n.arraySet(w.head.extra,D,E,Z,B)),512&w.flags&&(w.check=o(w.check,D,Z,E)),T-=Z,E+=Z,w.length-=Z),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(T===0)break e;for(Z=0;B=D[E+Z++],w.head&&B&&w.length<65536&&(w.head.name+=String.fromCharCode(B)),B&&Z<T;);if(512&w.flags&&(w.check=o(w.check,D,Z,E)),T-=Z,E+=Z,B)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(T===0)break e;for(Z=0;B=D[E+Z++],w.head&&B&&w.length<65536&&(w.head.comment+=String.fromCharCode(B)),B&&Z<T;);if(512&w.flags&&(w.check=o(w.check,D,Z,E)),T-=Z,E+=Z,B)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;j<16;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(F!==(65535&w.check)){d.msg="header crc mismatch",w.mode=30;break}j=F=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),d.adler=w.check=0,w.mode=12;break;case 10:for(;j<32;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}d.adler=w.check=x(F),j=F=0,w.mode=11;case 11:if(w.havedict===0)return d.next_out=O,d.avail_out=C,d.next_in=E,d.avail_in=T,w.hold=F,w.bits=j,2;d.adler=w.check=1,w.mode=12;case 12:if(g===5||g===6)break e;case 13:if(w.last){F>>>=7&j,j-=7&j,w.mode=27;break}for(;j<3;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}switch(w.last=1&F,j-=1,3&(F>>>=1)){case 0:w.mode=14;break;case 1:if(N(w),w.mode=20,g!==6)break;F>>>=2,j-=2;break e;case 2:w.mode=17;break;case 3:d.msg="invalid block type",w.mode=30}F>>>=2,j-=2;break;case 14:for(F>>>=7&j,j-=7&j;j<32;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if((65535&F)!=(F>>>16^65535)){d.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&F,j=F=0,w.mode=15,g===6)break e;case 15:w.mode=16;case 16:if(Z=w.length){if(T<Z&&(Z=T),C<Z&&(Z=C),Z===0)break e;n.arraySet(S,D,E,Z,O),T-=Z,E+=Z,C-=Z,O+=Z,w.length-=Z;break}w.mode=12;break;case 17:for(;j<14;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(w.nlen=257+(31&F),F>>>=5,j-=5,w.ndist=1+(31&F),F>>>=5,j-=5,w.ncode=4+(15&F),F>>>=4,j-=4,286<w.nlen||30<w.ndist){d.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;j<3;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}w.lens[ee[w.have++]]=7&F,F>>>=3,j-=3}for(;w.have<19;)w.lens[ee[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,G={bits:w.lenbits},K=u(0,w.lens,0,19,w.lencode,0,w.work,G),w.lenbits=G.bits,K){d.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;se=(q=w.lencode[F&(1<<w.lenbits)-1])>>>16&255,he=65535&q,!((le=q>>>24)<=j);){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(he<16)F>>>=le,j-=le,w.lens[w.have++]=he;else{if(he===16){for(U=le+2;j<U;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(F>>>=le,j-=le,w.have===0){d.msg="invalid bit length repeat",w.mode=30;break}B=w.lens[w.have-1],Z=3+(3&F),F>>>=2,j-=2}else if(he===17){for(U=le+3;j<U;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}j-=le,B=0,Z=3+(7&(F>>>=le)),F>>>=3,j-=3}else{for(U=le+7;j<U;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}j-=le,B=0,Z=11+(127&(F>>>=le)),F>>>=7,j-=7}if(w.have+Z>w.nlen+w.ndist){d.msg="invalid bit length repeat",w.mode=30;break}for(;Z--;)w.lens[w.have++]=B}}if(w.mode===30)break;if(w.lens[256]===0){d.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,G={bits:w.lenbits},K=u(f,w.lens,0,w.nlen,w.lencode,0,w.work,G),w.lenbits=G.bits,K){d.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,G={bits:w.distbits},K=u(l,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,G),w.distbits=G.bits,K){d.msg="invalid distances set",w.mode=30;break}if(w.mode=20,g===6)break e;case 20:w.mode=21;case 21:if(6<=T&&258<=C){d.next_out=O,d.avail_out=C,d.next_in=E,d.avail_in=T,w.hold=F,w.bits=j,c(d,V),O=d.next_out,S=d.output,C=d.avail_out,E=d.next_in,D=d.input,T=d.avail_in,F=w.hold,j=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;se=(q=w.lencode[F&(1<<w.lenbits)-1])>>>16&255,he=65535&q,!((le=q>>>24)<=j);){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(se&&(240&se)==0){for(Ce=le,ye=se,Ee=he;se=(q=w.lencode[Ee+((F&(1<<Ce+ye)-1)>>Ce)])>>>16&255,he=65535&q,!(Ce+(le=q>>>24)<=j);){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}F>>>=Ce,j-=Ce,w.back+=Ce}if(F>>>=le,j-=le,w.back+=le,w.length=he,se===0){w.mode=26;break}if(32&se){w.back=-1,w.mode=12;break}if(64&se){d.msg="invalid literal/length code",w.mode=30;break}w.extra=15&se,w.mode=22;case 22:if(w.extra){for(U=w.extra;j<U;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}w.length+=F&(1<<w.extra)-1,F>>>=w.extra,j-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;se=(q=w.distcode[F&(1<<w.distbits)-1])>>>16&255,he=65535&q,!((le=q>>>24)<=j);){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if((240&se)==0){for(Ce=le,ye=se,Ee=he;se=(q=w.distcode[Ee+((F&(1<<Ce+ye)-1)>>Ce)])>>>16&255,he=65535&q,!(Ce+(le=q>>>24)<=j);){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}F>>>=Ce,j-=Ce,w.back+=Ce}if(F>>>=le,j-=le,w.back+=le,64&se){d.msg="invalid distance code",w.mode=30;break}w.offset=he,w.extra=15&se,w.mode=24;case 24:if(w.extra){for(U=w.extra;j<U;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}w.offset+=F&(1<<w.extra)-1,F>>>=w.extra,j-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){d.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(C===0)break e;if(Z=V-C,w.offset>Z){if((Z=w.offset-Z)>w.whave&&w.sane){d.msg="invalid distance too far back",w.mode=30;break}ie=Z>w.wnext?(Z-=w.wnext,w.wsize-Z):w.wnext-Z,Z>w.length&&(Z=w.length),pe=w.window}else pe=S,ie=O-w.offset,Z=w.length;for(C<Z&&(Z=C),C-=Z,w.length-=Z;S[O++]=pe[ie++],--Z;);w.length===0&&(w.mode=21);break;case 26:if(C===0)break e;S[O++]=w.length,C--,w.mode=21;break;case 27:if(w.wrap){for(;j<32;){if(T===0)break e;T--,F|=D[E++]<<j,j+=8}if(V-=C,d.total_out+=V,w.total+=V,V&&(d.adler=w.check=w.flags?o(w.check,S,V,O-V):a(w.check,S,V,O-V)),V=C,(w.flags?F:x(F))!==w.check){d.msg="incorrect data check",w.mode=30;break}j=F=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;j<32;){if(T===0)break e;T--,F+=D[E++]<<j,j+=8}if(F!==(4294967295&w.total)){d.msg="incorrect length check",w.mode=30;break}j=F=0}w.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return p}return d.next_out=O,d.avail_out=C,d.next_in=E,d.avail_in=T,w.hold=F,w.bits=j,(w.wsize||V!==d.avail_out&&w.mode<30&&(w.mode<27||g!==4))&&I(d,d.output,d.next_out,V-d.avail_out)?(w.mode=31,-4):(W-=d.avail_in,V-=d.avail_out,d.total_in+=W,d.total_out+=V,w.total+=V,w.wrap&&V&&(d.adler=w.check=w.flags?o(w.check,S,V,d.next_out-V):a(w.check,S,V,d.next_out-V)),d.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(W==0&&V===0||g===4)&&K===h&&(K=-5),K)},i.inflateEnd=function(d){if(!d||!d.state)return p;var g=d.state;return g.window&&(g.window=null),d.state=null,h},i.inflateGetHeader=function(d,g){var w;return d&&d.state?(2&(w=d.state).wrap)==0?p:((w.head=g).done=!1,h):p},i.inflateSetDictionary=function(d,g){var w,D=g.length;return d&&d.state?(w=d.state).wrap!==0&&w.mode!==11?p:w.mode===11&&a(1,g,D,0)!==w.check?-3:I(d,g,D,D)?(w.mode=31,-4):(w.havedict=1,h):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,s,i){var n=r("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(f,l,h,p,b,m,v,x){var _,y,k,A,M,P,R,L,N,I=x.bits,d=0,g=0,w=0,D=0,S=0,E=0,O=0,T=0,C=0,F=0,j=null,W=0,V=new n.Buf16(16),Z=new n.Buf16(16),ie=null,pe=0;for(d=0;d<=15;d++)V[d]=0;for(g=0;g<p;g++)V[l[h+g]]++;for(S=I,D=15;1<=D&&V[D]===0;D--);if(D<S&&(S=D),D===0)return b[m++]=20971520,b[m++]=20971520,x.bits=1,0;for(w=1;w<D&&V[w]===0;w++);for(S<w&&(S=w),d=T=1;d<=15;d++)if(T<<=1,(T-=V[d])<0)return-1;if(0<T&&(f===0||D!==1))return-1;for(Z[1]=0,d=1;d<15;d++)Z[d+1]=Z[d]+V[d];for(g=0;g<p;g++)l[h+g]!==0&&(v[Z[l[h+g]]++]=g);if(P=f===0?(j=ie=v,19):f===1?(j=a,W-=257,ie=o,pe-=257,256):(j=c,ie=u,-1),d=w,M=m,O=g=F=0,k=-1,A=(C=1<<(E=S))-1,f===1&&852<C||f===2&&592<C)return 1;for(;;){for(R=d-O,N=v[g]<P?(L=0,v[g]):v[g]>P?(L=ie[pe+v[g]],j[W+v[g]]):(L=96,0),_=1<<d-O,w=y=1<<E;b[M+(F>>O)+(y-=_)]=R<<24|L<<16|N|0,y!==0;);for(_=1<<d-1;F&_;)_>>=1;if(_!==0?(F&=_-1,F+=_):F=0,g++,--V[d]==0){if(d===D)break;d=l[h+v[g]]}if(S<d&&(F&A)!==k){for(O===0&&(O=S),M+=w,T=1<<(E=d-O);E+O<D&&!((T-=V[E+O])<=0);)E++,T<<=1;if(C+=1<<E,f===1&&852<C||f===2&&592<C)return 1;b[k=F&A]=S<<24|E<<16|M-m|0}}return F!==0&&(b[M+F]=d-O<<24|64<<16|0),x.bits=S,0}},{"../utils/common":41}],51:[function(r,s,i){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,s,i){var n=r("../utils/common"),a=0,o=1;function c(q){for(var $=q.length;0<=--$;)q[$]=0}var u=0,f=29,l=256,h=l+1+f,p=30,b=19,m=2*h+1,v=15,x=16,_=7,y=256,k=16,A=17,M=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(h+2));c(I);var d=new Array(2*p);c(d);var g=new Array(512);c(g);var w=new Array(256);c(w);var D=new Array(f);c(D);var S,E,O,T=new Array(p);function C(q,$,ee,J,H){this.static_tree=q,this.extra_bits=$,this.extra_base=ee,this.elems=J,this.max_length=H,this.has_stree=q&&q.length}function F(q,$){this.dyn_tree=q,this.max_code=0,this.stat_desc=$}function j(q){return q<256?g[q]:g[256+(q>>>7)]}function W(q,$){q.pending_buf[q.pending++]=255&$,q.pending_buf[q.pending++]=$>>>8&255}function V(q,$,ee){q.bi_valid>x-ee?(q.bi_buf|=$<<q.bi_valid&65535,W(q,q.bi_buf),q.bi_buf=$>>x-q.bi_valid,q.bi_valid+=ee-x):(q.bi_buf|=$<<q.bi_valid&65535,q.bi_valid+=ee)}function Z(q,$,ee){V(q,ee[2*$],ee[2*$+1])}function ie(q,$){for(var ee=0;ee|=1&q,q>>>=1,ee<<=1,0<--$;);return ee>>>1}function pe(q,$,ee){var J,H,re=new Array(v+1),ne=0;for(J=1;J<=v;J++)re[J]=ne=ne+ee[J-1]<<1;for(H=0;H<=$;H++){var te=q[2*H+1];te!==0&&(q[2*H]=ie(re[te]++,te))}}function le(q){var $;for($=0;$<h;$++)q.dyn_ltree[2*$]=0;for($=0;$<p;$++)q.dyn_dtree[2*$]=0;for($=0;$<b;$++)q.bl_tree[2*$]=0;q.dyn_ltree[2*y]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function se(q){8<q.bi_valid?W(q,q.bi_buf):0<q.bi_valid&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function he(q,$,ee,J){var H=2*$,re=2*ee;return q[H]<q[re]||q[H]===q[re]&&J[$]<=J[ee]}function Ce(q,$,ee){for(var J=q.heap[ee],H=ee<<1;H<=q.heap_len&&(H<q.heap_len&&he($,q.heap[H+1],q.heap[H],q.depth)&&H++,!he($,J,q.heap[H],q.depth));)q.heap[ee]=q.heap[H],ee=H,H<<=1;q.heap[ee]=J}function ye(q,$,ee){var J,H,re,ne,te=0;if(q.last_lit!==0)for(;J=q.pending_buf[q.d_buf+2*te]<<8|q.pending_buf[q.d_buf+2*te+1],H=q.pending_buf[q.l_buf+te],te++,J===0?Z(q,H,$):(Z(q,(re=w[H])+l+1,$),(ne=P[re])!==0&&V(q,H-=D[re],ne),Z(q,re=j(--J),ee),(ne=R[re])!==0&&V(q,J-=T[re],ne)),te<q.last_lit;);Z(q,y,$)}function Ee(q,$){var ee,J,H,re=$.dyn_tree,ne=$.stat_desc.static_tree,te=$.stat_desc.has_stree,de=$.stat_desc.elems,_e=-1;for(q.heap_len=0,q.heap_max=m,ee=0;ee<de;ee++)re[2*ee]!==0?(q.heap[++q.heap_len]=_e=ee,q.depth[ee]=0):re[2*ee+1]=0;for(;q.heap_len<2;)re[2*(H=q.heap[++q.heap_len]=_e<2?++_e:0)]=1,q.depth[H]=0,q.opt_len--,te&&(q.static_len-=ne[2*H+1]);for($.max_code=_e,ee=q.heap_len>>1;1<=ee;ee--)Ce(q,re,ee);for(H=de;ee=q.heap[1],q.heap[1]=q.heap[q.heap_len--],Ce(q,re,1),J=q.heap[1],q.heap[--q.heap_max]=ee,q.heap[--q.heap_max]=J,re[2*H]=re[2*ee]+re[2*J],q.depth[H]=(q.depth[ee]>=q.depth[J]?q.depth[ee]:q.depth[J])+1,re[2*ee+1]=re[2*J+1]=H,q.heap[1]=H++,Ce(q,re,1),2<=q.heap_len;);q.heap[--q.heap_max]=q.heap[1],function(me,dt){var Ne,Me,bt,Ae,Re,rr,Pe=dt.dyn_tree,$e=dt.max_code,Jr=dt.stat_desc.static_tree,Ze=dt.stat_desc.has_stree,ze=dt.stat_desc.extra_bits,mr=dt.stat_desc.extra_base,Le=dt.stat_desc.max_length,Ue=0;for(Ae=0;Ae<=v;Ae++)me.bl_count[Ae]=0;for(Pe[2*me.heap[me.heap_max]+1]=0,Ne=me.heap_max+1;Ne<m;Ne++)Le<(Ae=Pe[2*Pe[2*(Me=me.heap[Ne])+1]+1]+1)&&(Ae=Le,Ue++),Pe[2*Me+1]=Ae,$e<Me||(me.bl_count[Ae]++,Re=0,mr<=Me&&(Re=ze[Me-mr]),rr=Pe[2*Me],me.opt_len+=rr*(Ae+Re),Ze&&(me.static_len+=rr*(Jr[2*Me+1]+Re)));if(Ue!==0){do{for(Ae=Le-1;me.bl_count[Ae]===0;)Ae--;me.bl_count[Ae]--,me.bl_count[Ae+1]+=2,me.bl_count[Le]--,Ue-=2}while(0<Ue);for(Ae=Le;Ae!==0;Ae--)for(Me=me.bl_count[Ae];Me!==0;)$e<(bt=me.heap[--Ne])||(Pe[2*bt+1]!==Ae&&(me.opt_len+=(Ae-Pe[2*bt+1])*Pe[2*bt],Pe[2*bt+1]=Ae),Me--)}}(q,$),pe(re,_e,q.bl_count)}function B(q,$,ee){var J,H,re=-1,ne=$[1],te=0,de=7,_e=4;for(ne===0&&(de=138,_e=3),$[2*(ee+1)+1]=65535,J=0;J<=ee;J++)H=ne,ne=$[2*(J+1)+1],++te<de&&H===ne||(te<_e?q.bl_tree[2*H]+=te:H!==0?(H!==re&&q.bl_tree[2*H]++,q.bl_tree[2*k]++):te<=10?q.bl_tree[2*A]++:q.bl_tree[2*M]++,re=H,_e=(te=0)===ne?(de=138,3):H===ne?(de=6,3):(de=7,4))}function K(q,$,ee){var J,H,re=-1,ne=$[1],te=0,de=7,_e=4;for(ne===0&&(de=138,_e=3),J=0;J<=ee;J++)if(H=ne,ne=$[2*(J+1)+1],!(++te<de&&H===ne)){if(te<_e)for(;Z(q,H,q.bl_tree),--te!=0;);else H!==0?(H!==re&&(Z(q,H,q.bl_tree),te--),Z(q,k,q.bl_tree),V(q,te-3,2)):te<=10?(Z(q,A,q.bl_tree),V(q,te-3,3)):(Z(q,M,q.bl_tree),V(q,te-11,7));re=H,_e=(te=0)===ne?(de=138,3):H===ne?(de=6,3):(de=7,4)}}c(T);var G=!1;function U(q,$,ee,J){V(q,(u<<1)+(J?1:0),3),function(H,re,ne,te){se(H),W(H,ne),W(H,~ne),n.arraySet(H.pending_buf,H.window,re,ne,H.pending),H.pending+=ne}(q,$,ee)}i._tr_init=function(q){G||(function(){var $,ee,J,H,re,ne=new Array(v+1);for(H=J=0;H<f-1;H++)for(D[H]=J,$=0;$<1<<P[H];$++)w[J++]=H;for(w[J-1]=H,H=re=0;H<16;H++)for(T[H]=re,$=0;$<1<<R[H];$++)g[re++]=H;for(re>>=7;H<p;H++)for(T[H]=re<<7,$=0;$<1<<R[H]-7;$++)g[256+re++]=H;for(ee=0;ee<=v;ee++)ne[ee]=0;for($=0;$<=143;)I[2*$+1]=8,$++,ne[8]++;for(;$<=255;)I[2*$+1]=9,$++,ne[9]++;for(;$<=279;)I[2*$+1]=7,$++,ne[7]++;for(;$<=287;)I[2*$+1]=8,$++,ne[8]++;for(pe(I,h+1,ne),$=0;$<p;$++)d[2*$+1]=5,d[2*$]=ie($,5);S=new C(I,P,l+1,h,v),E=new C(d,R,0,p,v),O=new C(new Array(0),L,0,b,_)}(),G=!0),q.l_desc=new F(q.dyn_ltree,S),q.d_desc=new F(q.dyn_dtree,E),q.bl_desc=new F(q.bl_tree,O),q.bi_buf=0,q.bi_valid=0,le(q)},i._tr_stored_block=U,i._tr_flush_block=function(q,$,ee,J){var H,re,ne=0;0<q.level?(q.strm.data_type===2&&(q.strm.data_type=function(te){var de,_e=4093624447;for(de=0;de<=31;de++,_e>>>=1)if(1&_e&&te.dyn_ltree[2*de]!==0)return a;if(te.dyn_ltree[18]!==0||te.dyn_ltree[20]!==0||te.dyn_ltree[26]!==0)return o;for(de=32;de<l;de++)if(te.dyn_ltree[2*de]!==0)return o;return a}(q)),Ee(q,q.l_desc),Ee(q,q.d_desc),ne=function(te){var de;for(B(te,te.dyn_ltree,te.l_desc.max_code),B(te,te.dyn_dtree,te.d_desc.max_code),Ee(te,te.bl_desc),de=b-1;3<=de&&te.bl_tree[2*N[de]+1]===0;de--);return te.opt_len+=3*(de+1)+5+5+4,de}(q),H=q.opt_len+3+7>>>3,(re=q.static_len+3+7>>>3)<=H&&(H=re)):H=re=ee+5,ee+4<=H&&$!==-1?U(q,$,ee,J):q.strategy===4||re===H?(V(q,2+(J?1:0),3),ye(q,I,d)):(V(q,4+(J?1:0),3),function(te,de,_e,me){var dt;for(V(te,de-257,5),V(te,_e-1,5),V(te,me-4,4),dt=0;dt<me;dt++)V(te,te.bl_tree[2*N[dt]+1],3);K(te,te.dyn_ltree,de-1),K(te,te.dyn_dtree,_e-1)}(q,q.l_desc.max_code+1,q.d_desc.max_code+1,ne+1),ye(q,q.dyn_ltree,q.dyn_dtree)),le(q),J&&se(q)},i._tr_tally=function(q,$,ee){return q.pending_buf[q.d_buf+2*q.last_lit]=$>>>8&255,q.pending_buf[q.d_buf+2*q.last_lit+1]=255&$,q.pending_buf[q.l_buf+q.last_lit]=255&ee,q.last_lit++,$===0?q.dyn_ltree[2*ee]++:(q.matches++,$--,q.dyn_ltree[2*(w[ee]+l+1)]++,q.dyn_dtree[2*j($)]++),q.last_lit===q.lit_bufsize-1},i._tr_align=function(q){V(q,2,3),Z(q,y,I),function($){$.bi_valid===16?(W($,$.bi_buf),$.bi_buf=0,$.bi_valid=0):8<=$.bi_valid&&($.pending_buf[$.pending++]=255&$.bi_buf,$.bi_buf>>=8,$.bi_valid-=8)}(q)}},{"../utils/common":41}],53:[function(r,s,i){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,s,i){(function(n){(function(a,o){if(!a.setImmediate){var c,u,f,l,h=1,p={},b=!1,m=a.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(a);v=v&&v.setTimeout?v:a,c={}.toString.call(a.process)==="[object process]"?function(k){process.nextTick(function(){_(k)})}:function(){if(a.postMessage&&!a.importScripts){var k=!0,A=a.onmessage;return a.onmessage=function(){k=!1},a.postMessage("","*"),a.onmessage=A,k}}()?(l="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",y,!1):a.attachEvent("onmessage",y),function(k){a.postMessage(l+k,"*")}):a.MessageChannel?((f=new MessageChannel).port1.onmessage=function(k){_(k.data)},function(k){f.port2.postMessage(k)}):m&&"onreadystatechange"in m.createElement("script")?(u=m.documentElement,function(k){var A=m.createElement("script");A.onreadystatechange=function(){_(k),A.onreadystatechange=null,u.removeChild(A),A=null},u.appendChild(A)}):function(k){setTimeout(_,0,k)},v.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var A=new Array(arguments.length-1),M=0;M<A.length;M++)A[M]=arguments[M+1];var P={callback:k,args:A};return p[h]=P,c(h),h++},v.clearImmediate=x}function x(k){delete p[k]}function _(k){if(b)setTimeout(_,0,k);else{var A=p[k];if(A){b=!0;try{(function(M){var P=M.callback,R=M.args;switch(R.length){case 0:P();break;case 1:P(R[0]);break;case 2:P(R[0],R[1]);break;case 3:P(R[0],R[1],R[2]);break;default:P.apply(o,R)}})(A)}finally{x(k),b=!1}}}}function y(k){k.source===a&&typeof k.data=="string"&&k.data.indexOf(l)===0&&_(+k.data.slice(l.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof cr<"u"?cr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(qs)),qs.exports}var lb=fb();const Tv=Ir(lb);var fi={exports:{}},hb=fi.exports,Lu;function db(){return Lu||(Lu=1,function(t,e){(function(r,s){t.exports=s()})(hb,()=>(()=>{var r={d:(h,p)=>{for(var b in p)r.o(p,b)&&!r.o(h,b)&&Object.defineProperty(h,b,{enumerable:!0,get:p[b]})},o:(h,p)=>Object.prototype.hasOwnProperty.call(h,p)},s={};function i(h){return Array.isArray(h)?"array":h instanceof Date?"date":h instanceof Error?"error":h instanceof RegExp?"regexp":h===null?"null":typeof h=="object"&&Object.prototype.toString.call(h)==="[object Object]"?"object":typeof h}r.d(s,{default:()=>l});var n={base:a,date:a,error:a,symbol:a,string:a,number:a,boolean:a,regexp:a,null:a,undefined:a};function a(h){return h}var o={indent:" ",prefix:`
`,postfix:"",errorToString:function(h,p){return Error.prototype.toString.call(h)},dateToString:function(h){return"new Date(".concat(Date.prototype.toISOString.call(h),")")},colors:n};function c(h){return h===void 0&&(h={}),Object.assign({},o,h,{colors:Object.assign({},n,h.colors)})}function u(h,p){h===void 0&&(h=1),p===void 0&&(p="  ");for(var b="",m=0;m<h;m+=1)b+=p;return b}var f=["object","array"];function l(h,p){var b=c(p),m=b.colors,v=b.prefix,x=b.postfix,_=b.dateToString,y=b.errorToString,k=b.indent,A=new Map;function M(I,d,g){if(d===void 0&&(d=1),g===void 0&&(g=0),Object.keys(I).length===0)return" ".concat(m.base("{}"));var w=`
`,D=u(d,k);return Object.keys(I).forEach(function(S){var E=I[S],O=i(E),T=u(g,"  "),C=f.includes(O)?"":" ",F=L(E)?" ".concat(m.base("[Circular]")):R(O,E,d+1,g);w+="".concat(T).concat(D).concat(m.base("".concat(S,":"))).concat(C).concat(F,`
`)}),w.substring(0,w.length-1)}function P(I,d,g){if(d===void 0&&(d=1),g===void 0&&(g=0),I.length===0)return" ".concat(m.base("[]"));var w=`
`,D=u(d,k);return I.forEach(function(S){var E=i(S),O=u(g,"  "),T=L(S)?m.base("[Circular]"):R(E,S,d,g+1).toString().trimLeft();w+="".concat(O).concat(D).concat("".concat(m.base("-")," ")).concat(T,`
`)}),w.substring(0,w.length-1)}function R(I,d,g,w){switch(I){case"array":return P(d,g,w);case"object":return M(d,g,w);case"string":return m.string(d);case"symbol":return m.symbol(d.toString());case"number":return m.number(d);case"boolean":return m.boolean(d);case"null":return m.null("null");case"undefined":return m.undefined("undefined");case"date":return m.date(_(d));case"error":return m.error(y(d,u(g,k)));case"regexp":return m.regexp(d.toString());default:return d&&d.toString?d.toString():Object.prototype.toString.call(d)}}function L(I){return!(!["object","array"].includes(i(I))||!A.has(I)&&(A.set(I,!0),1))}var N="";return A.set(h,!0),i(h)==="object"&&Object.keys(h).length>0?N=M(h):i(h)==="array"&&h.length>0&&(N=P(h)),N.length===0?"":"".concat(v).concat(N.slice(1)).concat(x)}return s.default})())}(fi)),fi.exports}var pb=db();const Mv=Ir(pb),Bu={};function bb(t){let e=Bu[t];if(e)return e;e=Bu[t]=[];for(let r=0;r<128;r++){const s=String.fromCharCode(r);e.push(s)}for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);e[s]="%"+("0"+s.toString(16).toUpperCase()).slice(-2)}return e}function fn(t,e){typeof e!="string"&&(e=fn.defaultChars);const r=bb(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(s){let i="";for(let n=0,a=s.length;n<a;n+=3){const o=parseInt(s.slice(n+1,n+3),16);if(o<128){i+=r[o];continue}if((o&224)===192&&n+3<a){const c=parseInt(s.slice(n+4,n+6),16);if((c&192)===128){const u=o<<6&1984|c&63;u<128?i+="":i+=String.fromCharCode(u),n+=3;continue}}if((o&240)===224&&n+6<a){const c=parseInt(s.slice(n+4,n+6),16),u=parseInt(s.slice(n+7,n+9),16);if((c&192)===128&&(u&192)===128){const f=o<<12&61440|c<<6&4032|u&63;f<2048||f>=55296&&f<=57343?i+="":i+=String.fromCharCode(f),n+=6;continue}}if((o&248)===240&&n+9<a){const c=parseInt(s.slice(n+4,n+6),16),u=parseInt(s.slice(n+7,n+9),16),f=parseInt(s.slice(n+10,n+12),16);if((c&192)===128&&(u&192)===128&&(f&192)===128){let l=o<<18&1835008|c<<12&258048|u<<6&4032|f&63;l<65536||l>1114111?i+="":(l-=65536,i+=String.fromCharCode(55296+(l>>10),56320+(l&1023))),n+=9;continue}}i+=""}return i})}fn.defaultChars=";/?:@&=+$,#";fn.componentChars="";const Nu={};function mb(t){let e=Nu[t];if(e)return e;e=Nu[t]=[];for(let r=0;r<128;r++){const s=String.fromCharCode(r);/^[0-9a-z]$/i.test(s)?e.push(s):e.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<t.length;r++)e[t.charCodeAt(r)]=t[r];return e}function Bn(t,e,r){typeof e!="string"&&(r=e,e=Bn.defaultChars),typeof r>"u"&&(r=!0);const s=mb(e);let i="";for(let n=0,a=t.length;n<a;n++){const o=t.charCodeAt(n);if(r&&o===37&&n+2<a&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){i+=t.slice(n,n+3),n+=2;continue}if(o<128){i+=s[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<a){const c=t.charCodeAt(n+1);if(c>=56320&&c<=57343){i+=encodeURIComponent(t[n]+t[n+1]),n++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[n])}return i}Bn.defaultChars=";/?:@&=+$,-_.!~*'()#";Bn.componentChars="-_.!~*'()";function Ya(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function _i(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const gb=/^([a-z0-9.+-]+:)/i,_b=/:[0-9]*$/,vb=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,yb=["<",">",'"',"`"," ","\r",`
`,"	"],wb=["{","}","|","\\","^","`"].concat(yb),xb=["'"].concat(wb),zu=["%","/","?",";","#"].concat(xb),ju=["/","?","#"],kb=255,qu=/^[+a-z0-9A-Z_-]{0,63}$/,Ab=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Uu={javascript:!0,"javascript:":!0},$u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Qa(t,e){if(t&&t instanceof _i)return t;const r=new _i;return r.parse(t,e),r}_i.prototype.parse=function(t,e){let r,s,i,n=t;if(n=n.trim(),!e&&t.split("#").length===1){const u=vb.exec(n);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let a=gb.exec(n);if(a&&(a=a[0],r=a.toLowerCase(),this.protocol=a,n=n.substr(a.length)),(e||a||n.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=n.substr(0,2)==="//",i&&!(a&&Uu[a])&&(n=n.substr(2),this.slashes=!0)),!Uu[a]&&(i||a&&!$u[a])){let u=-1;for(let b=0;b<ju.length;b++)s=n.indexOf(ju[b]),s!==-1&&(u===-1||s<u)&&(u=s);let f,l;u===-1?l=n.lastIndexOf("@"):l=n.lastIndexOf("@",u),l!==-1&&(f=n.slice(0,l),n=n.slice(l+1),this.auth=f),u=-1;for(let b=0;b<zu.length;b++)s=n.indexOf(zu[b]),s!==-1&&(u===-1||s<u)&&(u=s);u===-1&&(u=n.length),n[u-1]===":"&&u--;const h=n.slice(0,u);n=n.slice(u),this.parseHost(h),this.hostname=this.hostname||"";const p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){const b=this.hostname.split(/\./);for(let m=0,v=b.length;m<v;m++){const x=b[m];if(x&&!x.match(qu)){let _="";for(let y=0,k=x.length;y<k;y++)x.charCodeAt(y)>127?_+="x":_+=x[y];if(!_.match(qu)){const y=b.slice(0,m),k=b.slice(m+1),A=x.match(Ab);A&&(y.push(A[1]),k.unshift(A[2])),k.length&&(n=k.join(".")+n),this.hostname=y.join(".");break}}}}this.hostname.length>kb&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=n.indexOf("#");o!==-1&&(this.hash=n.substr(o),n=n.slice(0,o));const c=n.indexOf("?");return c!==-1&&(this.search=n.substr(c),n=n.slice(0,c)),n&&(this.pathname=n),$u[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};_i.prototype.parseHost=function(t){let e=_b.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const Sb=Object.freeze(Object.defineProperty({__proto__:null,decode:fn,encode:Bn,format:Ya,parse:Qa},Symbol.toStringTag,{value:"Module"})),ed=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,td=/[\0-\x1F\x7F-\x9F]/,Eb=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,eo=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,rd=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,nd=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Cb=Object.freeze(Object.defineProperty({__proto__:null,Any:ed,Cc:td,Cf:Eb,P:eo,S:rd,Z:nd},Symbol.toStringTag,{value:"Module"})),Db=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),Tb=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var Us;const Mb=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Ib=(Us=String.fromCodePoint)!==null&&Us!==void 0?Us:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function Pb(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Mb.get(t))!==null&&e!==void 0?e:t}var ht;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(ht||(ht={}));const Ob=32;var Er;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Er||(Er={}));function Ea(t){return t>=ht.ZERO&&t<=ht.NINE}function Fb(t){return t>=ht.UPPER_A&&t<=ht.UPPER_F||t>=ht.LOWER_A&&t<=ht.LOWER_F}function Rb(t){return t>=ht.UPPER_A&&t<=ht.UPPER_Z||t>=ht.LOWER_A&&t<=ht.LOWER_Z||Ea(t)}function Lb(t){return t===ht.EQUALS||Rb(t)}var lt;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(lt||(lt={}));var Ar;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Ar||(Ar={}));class Bb{constructor(e,r,s){this.decodeTree=e,this.emitCodePoint=r,this.errors=s,this.state=lt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ar.Strict}startEntity(e){this.decodeMode=e,this.state=lt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,r){switch(this.state){case lt.EntityStart:return e.charCodeAt(r)===ht.NUM?(this.state=lt.NumericStart,this.consumed+=1,this.stateNumericStart(e,r+1)):(this.state=lt.NamedEntity,this.stateNamedEntity(e,r));case lt.NumericStart:return this.stateNumericStart(e,r);case lt.NumericDecimal:return this.stateNumericDecimal(e,r);case lt.NumericHex:return this.stateNumericHex(e,r);case lt.NamedEntity:return this.stateNamedEntity(e,r)}}stateNumericStart(e,r){return r>=e.length?-1:(e.charCodeAt(r)|Ob)===ht.LOWER_X?(this.state=lt.NumericHex,this.consumed+=1,this.stateNumericHex(e,r+1)):(this.state=lt.NumericDecimal,this.stateNumericDecimal(e,r))}addToNumericResult(e,r,s,i){if(r!==s){const n=s-r;this.result=this.result*Math.pow(i,n)+parseInt(e.substr(r,n),i),this.consumed+=n}}stateNumericHex(e,r){const s=r;for(;r<e.length;){const i=e.charCodeAt(r);if(Ea(i)||Fb(i))r+=1;else return this.addToNumericResult(e,s,r,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,s,r,16),-1}stateNumericDecimal(e,r){const s=r;for(;r<e.length;){const i=e.charCodeAt(r);if(Ea(i))r+=1;else return this.addToNumericResult(e,s,r,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,s,r,10),-1}emitNumericEntity(e,r){var s;if(this.consumed<=r)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ht.SEMI)this.consumed+=1;else if(this.decodeMode===Ar.Strict)return 0;return this.emitCodePoint(Pb(this.result),this.consumed),this.errors&&(e!==ht.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){const{decodeTree:s}=this;let i=s[this.treeIndex],n=(i&Er.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){const a=e.charCodeAt(r);if(this.treeIndex=Nb(s,i,this.treeIndex+Math.max(1,n),a),this.treeIndex<0)return this.result===0||this.decodeMode===Ar.Attribute&&(n===0||Lb(a))?0:this.emitNotTerminatedNamedEntity();if(i=s[this.treeIndex],n=(i&Er.VALUE_LENGTH)>>14,n!==0){if(a===ht.SEMI)return this.emitNamedEntityData(this.treeIndex,n,this.consumed+this.excess);this.decodeMode!==Ar.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:r,decodeTree:s}=this,i=(s[r]&Er.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,r,s){const{decodeTree:i}=this;return this.emitCodePoint(r===1?i[e]&~Er.VALUE_LENGTH:i[e+1],s),r===3&&this.emitCodePoint(i[e+2],s),s}end(){var e;switch(this.state){case lt.NamedEntity:return this.result!==0&&(this.decodeMode!==Ar.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case lt.NumericDecimal:return this.emitNumericEntity(0,2);case lt.NumericHex:return this.emitNumericEntity(0,3);case lt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case lt.EntityStart:return 0}}}function id(t){let e="";const r=new Bb(t,s=>e+=Ib(s));return function(i,n){let a=0,o=0;for(;(o=i.indexOf("&",o))>=0;){e+=i.slice(a,o),r.startEntity(n);const u=r.write(i,o+1);if(u<0){a=o+r.end();break}a=o+u,o=u===0?a+1:a}const c=e+i.slice(a);return e="",c}}function Nb(t,e,r,s){const i=(e&Er.BRANCH_LENGTH)>>7,n=e&Er.JUMP_TABLE;if(i===0)return n!==0&&s===n?r:-1;if(n){const c=s-n;return c<0||c>=i?-1:t[r+c]-1}let a=r,o=a+i-1;for(;a<=o;){const c=a+o>>>1,u=t[c];if(u<s)a=c+1;else if(u>s)o=c-1;else return t[c+i]}return-1}const zb=id(Db);id(Tb);function sd(t,e=Ar.Legacy){return zb(t,e)}function jb(t){return Object.prototype.toString.call(t)}function to(t){return jb(t)==="[object String]"}const qb=Object.prototype.hasOwnProperty;function Ub(t,e){return qb.call(t,e)}function Pi(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(s){t[s]=r[s]})}}),t}function ad(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function ro(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function vi(t){if(t>65535){t-=65536;const e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}const od=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,$b=/&([a-z#][a-z0-9]{1,31});/gi,Hb=new RegExp(od.source+"|"+$b.source,"gi"),Wb=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Vb(t,e){if(e.charCodeAt(0)===35&&Wb.test(e)){const s=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return ro(s)?vi(s):t}const r=sd(t);return r!==t?r:t}function Gb(t){return t.indexOf("\\")<0?t:t.replace(od,"$1")}function ln(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(Hb,function(e,r,s){return r||Vb(e,s)})}const Zb=/[&<>"]/,Kb=/[&<>"]/g,Jb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Xb(t){return Jb[t]}function Mr(t){return Zb.test(t)?t.replace(Kb,Xb):t}const Yb=/[.?*+^$[\]\\(){}|-]/g;function Qb(t){return t.replace(Yb,"\\$&")}function Ge(t){switch(t){case 9:case 32:return!0}return!1}function Tn(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Mn(t){return eo.test(t)||rd.test(t)}function In(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Oi(t){return t=t.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(t=t.replace(//g,"")),t.toLowerCase().toUpperCase()}const em={mdurl:Sb,ucmicro:Cb},tm=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:ad,assign:Pi,escapeHtml:Mr,escapeRE:Qb,fromCodePoint:vi,has:Ub,isMdAsciiPunct:In,isPunctChar:Mn,isSpace:Ge,isString:to,isValidEntityCode:ro,isWhiteSpace:Tn,lib:em,normalizeReference:Oi,unescapeAll:ln,unescapeMd:Gb},Symbol.toStringTag,{value:"Module"}));function rm(t,e,r){let s,i,n,a;const o=t.posMax,c=t.pos;for(t.pos=e+1,s=1;t.pos<o;){if(n=t.src.charCodeAt(t.pos),n===93&&(s--,s===0)){i=!0;break}if(a=t.pos,t.md.inline.skipToken(t),n===91){if(a===t.pos-1)s++;else if(r)return t.pos=c,-1}}let u=-1;return i&&(u=t.pos),t.pos=c,u}function nm(t,e,r){let s,i=e;const n={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<r;){if(s=t.charCodeAt(i),s===10||s===60)return n;if(s===62)return n.pos=i+1,n.str=ln(t.slice(e+1,i)),n.ok=!0,n;if(s===92&&i+1<r){i+=2;continue}i++}return n}let a=0;for(;i<r&&(s=t.charCodeAt(i),!(s===32||s<32||s===127));){if(s===92&&i+1<r){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(s===40&&(a++,a>32))return n;if(s===41){if(a===0)break;a--}i++}return e===i||a!==0||(n.str=ln(t.slice(e,i)),n.pos=i,n.ok=!0),n}function im(t,e,r,s){let i,n=e;const a={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(s)a.str=s.str,a.marker=s.marker;else{if(n>=r)return a;let o=t.charCodeAt(n);if(o!==34&&o!==39&&o!==40)return a;e++,n++,o===40&&(o=41),a.marker=o}for(;n<r;){if(i=t.charCodeAt(n),i===a.marker)return a.pos=n+1,a.str+=ln(t.slice(e,n)),a.ok=!0,a;if(i===40&&a.marker===41)return a;i===92&&n+1<r&&n++,n++}return a.can_continue=!0,a.str+=ln(t.slice(e,n)),a}const sm=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:nm,parseLinkLabel:rm,parseLinkTitle:im},Symbol.toStringTag,{value:"Module"})),er={};er.code_inline=function(t,e,r,s,i){const n=t[e];return"<code"+i.renderAttrs(n)+">"+Mr(n.content)+"</code>"};er.code_block=function(t,e,r,s,i){const n=t[e];return"<pre"+i.renderAttrs(n)+"><code>"+Mr(t[e].content)+`</code></pre>
`};er.fence=function(t,e,r,s,i){const n=t[e],a=n.info?ln(n.info).trim():"";let o="",c="";if(a){const f=a.split(/(\s+)/g);o=f[0],c=f.slice(2).join("")}let u;if(r.highlight?u=r.highlight(n.content,o,c)||Mr(n.content):u=Mr(n.content),u.indexOf("<pre")===0)return u+`
`;if(a){const f=n.attrIndex("class"),l=n.attrs?n.attrs.slice():[];f<0?l.push(["class",r.langPrefix+o]):(l[f]=l[f].slice(),l[f][1]+=" "+r.langPrefix+o);const h={attrs:l};return`<pre><code${i.renderAttrs(h)}>${u}</code></pre>
`}return`<pre><code${i.renderAttrs(n)}>${u}</code></pre>
`};er.image=function(t,e,r,s,i){const n=t[e];return n.attrs[n.attrIndex("alt")][1]=i.renderInlineAsText(n.children,r,s),i.renderToken(t,e,r)};er.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};er.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};er.text=function(t,e){return Mr(t[e].content)};er.html_block=function(t,e){return t[e].content};er.html_inline=function(t,e){return t[e].content};function pn(){this.rules=Pi({},er)}pn.prototype.renderAttrs=function(e){let r,s,i;if(!e.attrs)return"";for(i="",r=0,s=e.attrs.length;r<s;r++)i+=" "+Mr(e.attrs[r][0])+'="'+Mr(e.attrs[r][1])+'"';return i};pn.prototype.renderToken=function(e,r,s){const i=e[r];let n="";if(i.hidden)return"";i.block&&i.nesting!==-1&&r&&e[r-1].hidden&&(n+=`
`),n+=(i.nesting===-1?"</":"<")+i.tag,n+=this.renderAttrs(i),i.nesting===0&&s.xhtmlOut&&(n+=" /");let a=!1;if(i.block&&(a=!0,i.nesting===1&&r+1<e.length)){const o=e[r+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===i.tag)&&(a=!1)}return n+=a?`>
`:">",n};pn.prototype.renderInline=function(t,e,r){let s="";const i=this.rules;for(let n=0,a=t.length;n<a;n++){const o=t[n].type;typeof i[o]<"u"?s+=i[o](t,n,e,r,this):s+=this.renderToken(t,n,e)}return s};pn.prototype.renderInlineAsText=function(t,e,r){let s="";for(let i=0,n=t.length;i<n;i++)switch(t[i].type){case"text":s+=t[i].content;break;case"image":s+=this.renderInlineAsText(t[i].children,e,r);break;case"html_inline":case"html_block":s+=t[i].content;break;case"softbreak":case"hardbreak":s+=`
`;break}return s};pn.prototype.render=function(t,e,r){let s="";const i=this.rules;for(let n=0,a=t.length;n<a;n++){const o=t[n].type;o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof i[o]<"u"?s+=i[o](t,n,e,r,this):s+=this.renderToken(t,n,e,r)}return s};function gt(){this.__rules__=[],this.__cache__=null}gt.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};gt.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(s){e.indexOf(s)<0&&e.push(s)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(s){s.enabled&&(r&&s.alt.indexOf(r)<0||t.__cache__[r].push(s.fn))})})};gt.prototype.at=function(t,e,r){const s=this.__find__(t),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+t);this.__rules__[s].fn=e,this.__rules__[s].alt=i.alt||[],this.__cache__=null};gt.prototype.before=function(t,e,r,s){const i=this.__find__(t),n=s||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:n.alt||[]}),this.__cache__=null};gt.prototype.after=function(t,e,r,s){const i=this.__find__(t),n=s||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:n.alt||[]}),this.__cache__=null};gt.prototype.push=function(t,e,r){const s=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:s.alt||[]}),this.__cache__=null};gt.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const r=[];return t.forEach(function(s){const i=this.__find__(s);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[i].enabled=!0,r.push(s)},this),this.__cache__=null,r};gt.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};gt.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const r=[];return t.forEach(function(s){const i=this.__find__(s);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[i].enabled=!1,r.push(s)},this),this.__cache__=null,r};gt.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Ot(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ot.prototype.attrIndex=function(e){if(!this.attrs)return-1;const r=this.attrs;for(let s=0,i=r.length;s<i;s++)if(r[s][0]===e)return s;return-1};Ot.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Ot.prototype.attrSet=function(e,r){const s=this.attrIndex(e),i=[e,r];s<0?this.attrPush(i):this.attrs[s]=i};Ot.prototype.attrGet=function(e){const r=this.attrIndex(e);let s=null;return r>=0&&(s=this.attrs[r][1]),s};Ot.prototype.attrJoin=function(e,r){const s=this.attrIndex(e);s<0?this.attrPush([e,r]):this.attrs[s][1]=this.attrs[s][1]+" "+r};function ud(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}ud.prototype.Token=Ot;const am=/\r\n?|\n/g,om=/\0/g;function um(t){let e;e=t.src.replace(am,`
`),e=e.replace(om,""),t.src=e}function cm(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function fm(t){const e=t.tokens;for(let r=0,s=e.length;r<s;r++){const i=e[r];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function lm(t){return/^<a[>\s]/i.test(t)}function hm(t){return/^<\/a\s*>/i.test(t)}function dm(t){const e=t.tokens;if(t.md.options.linkify)for(let r=0,s=e.length;r<s;r++){if(e[r].type!=="inline"||!t.md.linkify.pretest(e[r].content))continue;let i=e[r].children,n=0;for(let a=i.length-1;a>=0;a--){const o=i[a];if(o.type==="link_close"){for(a--;i[a].level!==o.level&&i[a].type!=="link_open";)a--;continue}if(o.type==="html_inline"&&(lm(o.content)&&n>0&&n--,hm(o.content)&&n++),!(n>0)&&o.type==="text"&&t.md.linkify.test(o.content)){const c=o.content;let u=t.md.linkify.match(c);const f=[];let l=o.level,h=0;u.length>0&&u[0].index===0&&a>0&&i[a-1].type==="text_special"&&(u=u.slice(1));for(let p=0;p<u.length;p++){const b=u[p].url,m=t.md.normalizeLink(b);if(!t.md.validateLink(m))continue;let v=u[p].text;u[p].schema?u[p].schema==="mailto:"&&!/^mailto:/i.test(v)?v=t.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):v=t.md.normalizeLinkText(v):v=t.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,"");const x=u[p].index;if(x>h){const A=new t.Token("text","",0);A.content=c.slice(h,x),A.level=l,f.push(A)}const _=new t.Token("link_open","a",1);_.attrs=[["href",m]],_.level=l++,_.markup="linkify",_.info="auto",f.push(_);const y=new t.Token("text","",0);y.content=v,y.level=l,f.push(y);const k=new t.Token("link_close","a",-1);k.level=--l,k.markup="linkify",k.info="auto",f.push(k),h=u[p].lastIndex}if(h<c.length){const p=new t.Token("text","",0);p.content=c.slice(h),p.level=l,f.push(p)}e[r].children=i=ad(i,a,f)}}}}const cd=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,pm=/\((c|tm|r)\)/i,bm=/\((c|tm|r)\)/ig,mm={c:"",r:"",tm:""};function gm(t,e){return mm[e.toLowerCase()]}function _m(t){let e=0;for(let r=t.length-1;r>=0;r--){const s=t[r];s.type==="text"&&!e&&(s.content=s.content.replace(bm,gm)),s.type==="link_open"&&s.info==="auto"&&e--,s.type==="link_close"&&s.info==="auto"&&e++}}function vm(t){let e=0;for(let r=t.length-1;r>=0;r--){const s=t[r];s.type==="text"&&!e&&cd.test(s.content)&&(s.content=s.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),s.type==="link_open"&&s.info==="auto"&&e--,s.type==="link_close"&&s.info==="auto"&&e++}}function ym(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(pm.test(t.tokens[e].content)&&_m(t.tokens[e].children),cd.test(t.tokens[e].content)&&vm(t.tokens[e].children))}const wm=/['"]/,Hu=/['"]/g,Wu="";function Zn(t,e,r){return t.slice(0,e)+r+t.slice(e+1)}function xm(t,e){let r;const s=[];for(let i=0;i<t.length;i++){const n=t[i],a=t[i].level;for(r=s.length-1;r>=0&&!(s[r].level<=a);r--);if(s.length=r+1,n.type!=="text")continue;let o=n.content,c=0,u=o.length;e:for(;c<u;){Hu.lastIndex=c;const f=Hu.exec(o);if(!f)break;let l=!0,h=!0;c=f.index+1;const p=f[0]==="'";let b=32;if(f.index-1>=0)b=o.charCodeAt(f.index-1);else for(r=i-1;r>=0&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r--)if(t[r].content){b=t[r].content.charCodeAt(t[r].content.length-1);break}let m=32;if(c<u)m=o.charCodeAt(c);else for(r=i+1;r<t.length&&!(t[r].type==="softbreak"||t[r].type==="hardbreak");r++)if(t[r].content){m=t[r].content.charCodeAt(0);break}const v=In(b)||Mn(String.fromCharCode(b)),x=In(m)||Mn(String.fromCharCode(m)),_=Tn(b),y=Tn(m);if(y?l=!1:x&&(_||v||(l=!1)),_?h=!1:v&&(y||x||(h=!1)),m===34&&f[0]==='"'&&b>=48&&b<=57&&(h=l=!1),l&&h&&(l=v,h=x),!l&&!h){p&&(n.content=Zn(n.content,f.index,Wu));continue}if(h)for(r=s.length-1;r>=0;r--){let k=s[r];if(s[r].level<a)break;if(k.single===p&&s[r].level===a){k=s[r];let A,M;p?(A=e.md.options.quotes[2],M=e.md.options.quotes[3]):(A=e.md.options.quotes[0],M=e.md.options.quotes[1]),n.content=Zn(n.content,f.index,M),t[k.token].content=Zn(t[k.token].content,k.pos,A),c+=M.length-1,k.token===i&&(c+=A.length-1),o=n.content,u=o.length,s.length=r;continue e}}l?s.push({token:i,pos:f.index,single:p,level:a}):h&&p&&(n.content=Zn(n.content,f.index,Wu))}}}function km(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!wm.test(t.tokens[e].content)||xm(t.tokens[e].children,t)}function Am(t){let e,r;const s=t.tokens,i=s.length;for(let n=0;n<i;n++){if(s[n].type!=="inline")continue;const a=s[n].children,o=a.length;for(e=0;e<o;e++)a[e].type==="text_special"&&(a[e].type="text");for(e=r=0;e<o;e++)a[e].type==="text"&&e+1<o&&a[e+1].type==="text"?a[e+1].content=a[e].content+a[e+1].content:(e!==r&&(a[r]=a[e]),r++);e!==r&&(a.length=r)}}const $s=[["normalize",um],["block",cm],["inline",fm],["linkify",dm],["replacements",ym],["smartquotes",km],["text_join",Am]];function no(){this.ruler=new gt;for(let t=0;t<$s.length;t++)this.ruler.push($s[t][0],$s[t][1])}no.prototype.process=function(t){const e=this.ruler.getRules("");for(let r=0,s=e.length;r<s;r++)e[r](t)};no.prototype.State=ud;function tr(t,e,r,s){this.src=t,this.md=e,this.env=r,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let n=0,a=0,o=0,c=0,u=i.length,f=!1;a<u;a++){const l=i.charCodeAt(a);if(!f)if(Ge(l)){o++,l===9?c+=4-c%4:c++;continue}else f=!0;(l===10||a===u-1)&&(l!==10&&a++,this.bMarks.push(n),this.eMarks.push(a),this.tShift.push(o),this.sCount.push(c),this.bsCount.push(0),f=!1,o=0,c=0,n=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}tr.prototype.push=function(t,e,r){const s=new Ot(t,e,r);return s.block=!0,r<0&&this.level--,s.level=this.level,r>0&&this.level++,this.tokens.push(s),s};tr.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};tr.prototype.skipEmptyLines=function(e){for(let r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};tr.prototype.skipSpaces=function(e){for(let r=this.src.length;e<r;e++){const s=this.src.charCodeAt(e);if(!Ge(s))break}return e};tr.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Ge(this.src.charCodeAt(--e)))return e+1;return e};tr.prototype.skipChars=function(e,r){for(let s=this.src.length;e<s&&this.src.charCodeAt(e)===r;e++);return e};tr.prototype.skipCharsBack=function(e,r,s){if(e<=s)return e;for(;e>s;)if(r!==this.src.charCodeAt(--e))return e+1;return e};tr.prototype.getLines=function(e,r,s,i){if(e>=r)return"";const n=new Array(r-e);for(let a=0,o=e;o<r;o++,a++){let c=0;const u=this.bMarks[o];let f=u,l;for(o+1<r||i?l=this.eMarks[o]+1:l=this.eMarks[o];f<l&&c<s;){const h=this.src.charCodeAt(f);if(Ge(h))h===9?c+=4-(c+this.bsCount[o])%4:c++;else if(f-u<this.tShift[o])c++;else break;f++}c>s?n[a]=new Array(c-s+1).join(" ")+this.src.slice(f,l):n[a]=this.src.slice(f,l)}return n.join("")};tr.prototype.Token=Ot;const Sm=65536;function Hs(t,e){const r=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];return t.src.slice(r,s)}function Vu(t){const e=[],r=t.length;let s=0,i=t.charCodeAt(s),n=!1,a=0,o="";for(;s<r;)i===124&&(n?(o+=t.substring(a,s-1),a=s):(e.push(o+t.substring(a,s)),o="",a=s+1)),n=i===92,s++,i=t.charCodeAt(s);return e.push(o+t.substring(a)),e}function Em(t,e,r,s){if(e+2>r)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let n=t.bMarks[i]+t.tShift[i];if(n>=t.eMarks[i])return!1;const a=t.src.charCodeAt(n++);if(a!==124&&a!==45&&a!==58||n>=t.eMarks[i])return!1;const o=t.src.charCodeAt(n++);if(o!==124&&o!==45&&o!==58&&!Ge(o)||a===45&&Ge(o))return!1;for(;n<t.eMarks[i];){const k=t.src.charCodeAt(n);if(k!==124&&k!==45&&k!==58&&!Ge(k))return!1;n++}let c=Hs(t,e+1),u=c.split("|");const f=[];for(let k=0;k<u.length;k++){const A=u[k].trim();if(!A){if(k===0||k===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(c=Hs(t,e).trim(),c.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;u=Vu(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const l=u.length;if(l===0||l!==f.length)return!1;if(s)return!0;const h=t.parentType;t.parentType="table";const p=t.md.block.ruler.getRules("blockquote"),b=t.push("table_open","table",1),m=[e,0];b.map=m;const v=t.push("thead_open","thead",1);v.map=[e,e+1];const x=t.push("tr_open","tr",1);x.map=[e,e+1];for(let k=0;k<u.length;k++){const A=t.push("th_open","th",1);f[k]&&(A.attrs=[["style","text-align:"+f[k]]]);const M=t.push("inline","",0);M.content=u[k].trim(),M.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let _,y=0;for(i=e+2;i<r&&!(t.sCount[i]<t.blkIndent);i++){let k=!1;for(let M=0,P=p.length;M<P;M++)if(p[M](t,i,r,!0)){k=!0;break}if(k||(c=Hs(t,i).trim(),!c)||t.sCount[i]-t.blkIndent>=4||(u=Vu(c),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),y+=l-u.length,y>Sm))break;if(i===e+2){const M=t.push("tbody_open","tbody",1);M.map=_=[e+2,0]}const A=t.push("tr_open","tr",1);A.map=[i,i+1];for(let M=0;M<l;M++){const P=t.push("td_open","td",1);f[M]&&(P.attrs=[["style","text-align:"+f[M]]]);const R=t.push("inline","",0);R.content=u[M]?u[M].trim():"",R.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return _&&(t.push("tbody_close","tbody",-1),_[1]=i),t.push("table_close","table",-1),m[1]=i,t.parentType=h,t.line=i,!0}function Cm(t,e,r){if(t.sCount[e]-t.blkIndent<4)return!1;let s=e+1,i=s;for(;s<r;){if(t.isEmpty(s)){s++;continue}if(t.sCount[s]-t.blkIndent>=4){s++,i=s;continue}break}t.line=i;const n=t.push("code_block","code",0);return n.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,n.map=[e,t.line],!0}function Dm(t,e,r,s){let i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>n)return!1;const a=t.src.charCodeAt(i);if(a!==126&&a!==96)return!1;let o=i;i=t.skipChars(i,a);let c=i-o;if(c<3)return!1;const u=t.src.slice(o,i),f=t.src.slice(i,n);if(a===96&&f.indexOf(String.fromCharCode(a))>=0)return!1;if(s)return!0;let l=e,h=!1;for(;l++,!(l>=r||(i=o=t.bMarks[l]+t.tShift[l],n=t.eMarks[l],i<n&&t.sCount[l]<t.blkIndent));)if(t.src.charCodeAt(i)===a&&!(t.sCount[l]-t.blkIndent>=4)&&(i=t.skipChars(i,a),!(i-o<c)&&(i=t.skipSpaces(i),!(i<n)))){h=!0;break}c=t.sCount[e],t.line=l+(h?1:0);const p=t.push("fence","code",0);return p.info=f,p.content=t.getLines(e+1,l,c,!0),p.markup=u,p.map=[e,t.line],!0}function Tm(t,e,r,s){let i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];const a=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(s)return!0;const o=[],c=[],u=[],f=[],l=t.md.block.ruler.getRules("blockquote"),h=t.parentType;t.parentType="blockquote";let p=!1,b;for(b=e;b<r;b++){const y=t.sCount[b]<t.blkIndent;if(i=t.bMarks[b]+t.tShift[b],n=t.eMarks[b],i>=n)break;if(t.src.charCodeAt(i++)===62&&!y){let A=t.sCount[b]+1,M,P;t.src.charCodeAt(i)===32?(i++,A++,P=!1,M=!0):t.src.charCodeAt(i)===9?(M=!0,(t.bsCount[b]+A)%4===3?(i++,A++,P=!1):P=!0):M=!1;let R=A;for(o.push(t.bMarks[b]),t.bMarks[b]=i;i<n;){const L=t.src.charCodeAt(i);if(Ge(L))L===9?R+=4-(R+t.bsCount[b]+(P?1:0))%4:R++;else break;i++}p=i>=n,c.push(t.bsCount[b]),t.bsCount[b]=t.sCount[b]+1+(M?1:0),u.push(t.sCount[b]),t.sCount[b]=R-A,f.push(t.tShift[b]),t.tShift[b]=i-t.bMarks[b];continue}if(p)break;let k=!1;for(let A=0,M=l.length;A<M;A++)if(l[A](t,b,r,!0)){k=!0;break}if(k){t.lineMax=b,t.blkIndent!==0&&(o.push(t.bMarks[b]),c.push(t.bsCount[b]),f.push(t.tShift[b]),u.push(t.sCount[b]),t.sCount[b]-=t.blkIndent);break}o.push(t.bMarks[b]),c.push(t.bsCount[b]),f.push(t.tShift[b]),u.push(t.sCount[b]),t.sCount[b]=-1}const m=t.blkIndent;t.blkIndent=0;const v=t.push("blockquote_open","blockquote",1);v.markup=">";const x=[e,0];v.map=x,t.md.block.tokenize(t,e,b);const _=t.push("blockquote_close","blockquote",-1);_.markup=">",t.lineMax=a,t.parentType=h,x[1]=t.line;for(let y=0;y<f.length;y++)t.bMarks[y+e]=o[y],t.tShift[y+e]=f[y],t.sCount[y+e]=u[y],t.bsCount[y+e]=c[y];return t.blkIndent=m,!0}function Mm(t,e,r,s){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let n=t.bMarks[e]+t.tShift[e];const a=t.src.charCodeAt(n++);if(a!==42&&a!==45&&a!==95)return!1;let o=1;for(;n<i;){const u=t.src.charCodeAt(n++);if(u!==a&&!Ge(u))return!1;u===a&&o++}if(o<3)return!1;if(s)return!0;t.line=e+1;const c=t.push("hr","hr",0);return c.map=[e,t.line],c.markup=Array(o+1).join(String.fromCharCode(a)),!0}function Gu(t,e){const r=t.eMarks[e];let s=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(s++);if(i!==42&&i!==45&&i!==43)return-1;if(s<r){const n=t.src.charCodeAt(s);if(!Ge(n))return-1}return s}function Zu(t,e){const r=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];let i=r;if(i+1>=s)return-1;let n=t.src.charCodeAt(i++);if(n<48||n>57)return-1;for(;;){if(i>=s)return-1;if(n=t.src.charCodeAt(i++),n>=48&&n<=57){if(i-r>=10)return-1;continue}if(n===41||n===46)break;return-1}return i<s&&(n=t.src.charCodeAt(i),!Ge(n))?-1:i}function Im(t,e){const r=t.level+2;for(let s=e+2,i=t.tokens.length-2;s<i;s++)t.tokens[s].level===r&&t.tokens[s].type==="paragraph_open"&&(t.tokens[s+2].hidden=!0,t.tokens[s].hidden=!0,s+=2)}function Pm(t,e,r,s){let i,n,a,o,c=e,u=!0;if(t.sCount[c]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[c]-t.listIndent>=4&&t.sCount[c]<t.blkIndent)return!1;let f=!1;s&&t.parentType==="paragraph"&&t.sCount[c]>=t.blkIndent&&(f=!0);let l,h,p;if((p=Zu(t,c))>=0){if(l=!0,a=t.bMarks[c]+t.tShift[c],h=Number(t.src.slice(a,p-1)),f&&h!==1)return!1}else if((p=Gu(t,c))>=0)l=!1;else return!1;if(f&&t.skipSpaces(p)>=t.eMarks[c])return!1;if(s)return!0;const b=t.src.charCodeAt(p-1),m=t.tokens.length;l?(o=t.push("ordered_list_open","ol",1),h!==1&&(o.attrs=[["start",h]])):o=t.push("bullet_list_open","ul",1);const v=[c,0];o.map=v,o.markup=String.fromCharCode(b);let x=!1;const _=t.md.block.ruler.getRules("list"),y=t.parentType;for(t.parentType="list";c<r;){n=p,i=t.eMarks[c];const k=t.sCount[c]+p-(t.bMarks[c]+t.tShift[c]);let A=k;for(;n<i;){const D=t.src.charCodeAt(n);if(D===9)A+=4-(A+t.bsCount[c])%4;else if(D===32)A++;else break;n++}const M=n;let P;M>=i?P=1:P=A-k,P>4&&(P=1);const R=k+P;o=t.push("list_item_open","li",1),o.markup=String.fromCharCode(b);const L=[c,0];o.map=L,l&&(o.info=t.src.slice(a,p-1));const N=t.tight,I=t.tShift[c],d=t.sCount[c],g=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=R,t.tight=!0,t.tShift[c]=M-t.bMarks[c],t.sCount[c]=A,M>=i&&t.isEmpty(c+1)?t.line=Math.min(t.line+2,r):t.md.block.tokenize(t,c,r,!0),(!t.tight||x)&&(u=!1),x=t.line-c>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=g,t.tShift[c]=I,t.sCount[c]=d,t.tight=N,o=t.push("list_item_close","li",-1),o.markup=String.fromCharCode(b),c=t.line,L[1]=c,c>=r||t.sCount[c]<t.blkIndent||t.sCount[c]-t.blkIndent>=4)break;let w=!1;for(let D=0,S=_.length;D<S;D++)if(_[D](t,c,r,!0)){w=!0;break}if(w)break;if(l){if(p=Zu(t,c),p<0)break;a=t.bMarks[c]+t.tShift[c]}else if(p=Gu(t,c),p<0)break;if(b!==t.src.charCodeAt(p-1))break}return l?o=t.push("ordered_list_close","ol",-1):o=t.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(b),v[1]=c,t.line=c,t.parentType=y,u&&Im(t,m),!0}function Om(t,e,r,s){let i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e],a=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function o(_){const y=t.lineMax;if(_>=y||t.isEmpty(_))return null;let k=!1;if(t.sCount[_]-t.blkIndent>3&&(k=!0),t.sCount[_]<0&&(k=!0),!k){const P=t.md.block.ruler.getRules("reference"),R=t.parentType;t.parentType="reference";let L=!1;for(let N=0,I=P.length;N<I;N++)if(P[N](t,_,y,!0)){L=!0;break}if(t.parentType=R,L)return null}const A=t.bMarks[_]+t.tShift[_],M=t.eMarks[_];return t.src.slice(A,M+1)}let c=t.src.slice(i,n+1);n=c.length;let u=-1;for(i=1;i<n;i++){const _=c.charCodeAt(i);if(_===91)return!1;if(_===93){u=i;break}else if(_===10){const y=o(a);y!==null&&(c+=y,n=c.length,a++)}else if(_===92&&(i++,i<n&&c.charCodeAt(i)===10)){const y=o(a);y!==null&&(c+=y,n=c.length,a++)}}if(u<0||c.charCodeAt(u+1)!==58)return!1;for(i=u+2;i<n;i++){const _=c.charCodeAt(i);if(_===10){const y=o(a);y!==null&&(c+=y,n=c.length,a++)}else if(!Ge(_))break}const f=t.md.helpers.parseLinkDestination(c,i,n);if(!f.ok)return!1;const l=t.md.normalizeLink(f.str);if(!t.md.validateLink(l))return!1;i=f.pos;const h=i,p=a,b=i;for(;i<n;i++){const _=c.charCodeAt(i);if(_===10){const y=o(a);y!==null&&(c+=y,n=c.length,a++)}else if(!Ge(_))break}let m=t.md.helpers.parseLinkTitle(c,i,n);for(;m.can_continue;){const _=o(a);if(_===null)break;c+=_,i=n,n=c.length,a++,m=t.md.helpers.parseLinkTitle(c,i,n,m)}let v;for(i<n&&b!==i&&m.ok?(v=m.str,i=m.pos):(v="",i=h,a=p);i<n;){const _=c.charCodeAt(i);if(!Ge(_))break;i++}if(i<n&&c.charCodeAt(i)!==10&&v)for(v="",i=h,a=p;i<n;){const _=c.charCodeAt(i);if(!Ge(_))break;i++}if(i<n&&c.charCodeAt(i)!==10)return!1;const x=Oi(c.slice(1,u));return x?(s||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[x]>"u"&&(t.env.references[x]={title:v,href:l}),t.line=a),!0):!1}const Fm=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Rm="[a-zA-Z_:][a-zA-Z0-9:._-]*",Lm="[^\"'=<>`\\x00-\\x20]+",Bm="'[^']*'",Nm='"[^"]*"',zm="(?:"+Lm+"|"+Bm+"|"+Nm+")",jm="(?:\\s+"+Rm+"(?:\\s*=\\s*"+zm+")?)",fd="<[A-Za-z][A-Za-z0-9\\-]*"+jm+"*\\s*\\/?>",ld="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",qm="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Um="<[?][\\s\\S]*?[?]>",$m="<![A-Za-z][^>]*>",Hm="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Wm=new RegExp("^(?:"+fd+"|"+ld+"|"+qm+"|"+Um+"|"+$m+"|"+Hm+")"),Vm=new RegExp("^(?:"+fd+"|"+ld+")"),Yr=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Fm.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Vm.source+"\\s*$"),/^$/,!1]];function Gm(t,e,r,s){let i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let a=t.src.slice(i,n),o=0;for(;o<Yr.length&&!Yr[o][0].test(a);o++);if(o===Yr.length)return!1;if(s)return Yr[o][2];let c=e+1;if(!Yr[o][1].test(a)){for(;c<r&&!(t.sCount[c]<t.blkIndent);c++)if(i=t.bMarks[c]+t.tShift[c],n=t.eMarks[c],a=t.src.slice(i,n),Yr[o][1].test(a)){a.length!==0&&c++;break}}t.line=c;const u=t.push("html_block","",0);return u.map=[e,c],u.content=t.getLines(e,c,t.blkIndent,!0),!0}function Zm(t,e,r,s){let i=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let a=t.src.charCodeAt(i);if(a!==35||i>=n)return!1;let o=1;for(a=t.src.charCodeAt(++i);a===35&&i<n&&o<=6;)o++,a=t.src.charCodeAt(++i);if(o>6||i<n&&!Ge(a))return!1;if(s)return!0;n=t.skipSpacesBack(n,i);const c=t.skipCharsBack(n,35,i);c>i&&Ge(t.src.charCodeAt(c-1))&&(n=c),t.line=e+1;const u=t.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[e,t.line];const f=t.push("inline","",0);f.content=t.src.slice(i,n).trim(),f.map=[e,t.line],f.children=[];const l=t.push("heading_close","h"+String(o),-1);return l.markup="########".slice(0,o),!0}function Km(t,e,r){const s=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let n=0,a,o=e+1;for(;o<r&&!t.isEmpty(o);o++){if(t.sCount[o]-t.blkIndent>3)continue;if(t.sCount[o]>=t.blkIndent){let p=t.bMarks[o]+t.tShift[o];const b=t.eMarks[o];if(p<b&&(a=t.src.charCodeAt(p),(a===45||a===61)&&(p=t.skipChars(p,a),p=t.skipSpaces(p),p>=b))){n=a===61?1:2;break}}if(t.sCount[o]<0)continue;let h=!1;for(let p=0,b=s.length;p<b;p++)if(s[p](t,o,r,!0)){h=!0;break}if(h)break}if(!n)return!1;const c=t.getLines(e,o,t.blkIndent,!1).trim();t.line=o+1;const u=t.push("heading_open","h"+String(n),1);u.markup=String.fromCharCode(a),u.map=[e,t.line];const f=t.push("inline","",0);f.content=c,f.map=[e,t.line-1],f.children=[];const l=t.push("heading_close","h"+String(n),-1);return l.markup=String.fromCharCode(a),t.parentType=i,!0}function Jm(t,e,r){const s=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let n=e+1;for(t.parentType="paragraph";n<r&&!t.isEmpty(n);n++){if(t.sCount[n]-t.blkIndent>3||t.sCount[n]<0)continue;let u=!1;for(let f=0,l=s.length;f<l;f++)if(s[f](t,n,r,!0)){u=!0;break}if(u)break}const a=t.getLines(e,n,t.blkIndent,!1).trim();t.line=n;const o=t.push("paragraph_open","p",1);o.map=[e,t.line];const c=t.push("inline","",0);return c.content=a,c.map=[e,t.line],c.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const Kn=[["table",Em,["paragraph","reference"]],["code",Cm],["fence",Dm,["paragraph","reference","blockquote","list"]],["blockquote",Tm,["paragraph","reference","blockquote","list"]],["hr",Mm,["paragraph","reference","blockquote","list"]],["list",Pm,["paragraph","reference","blockquote"]],["reference",Om],["html_block",Gm,["paragraph","reference","blockquote"]],["heading",Zm,["paragraph","reference","blockquote"]],["lheading",Km],["paragraph",Jm]];function Fi(){this.ruler=new gt;for(let t=0;t<Kn.length;t++)this.ruler.push(Kn[t][0],Kn[t][1],{alt:(Kn[t][2]||[]).slice()})}Fi.prototype.tokenize=function(t,e,r){const s=this.ruler.getRules(""),i=s.length,n=t.md.options.maxNesting;let a=e,o=!1;for(;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=n){t.line=r;break}const c=t.line;let u=!1;for(let f=0;f<i;f++)if(u=s[f](t,a,r,!1),u){if(c>=t.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");t.tight=!o,t.isEmpty(t.line-1)&&(o=!0),a=t.line,a<r&&t.isEmpty(a)&&(o=!0,a++,t.line=a)}};Fi.prototype.parse=function(t,e,r,s){if(!t)return;const i=new this.State(t,e,r,s);this.tokenize(i,i.line,i.lineMax)};Fi.prototype.State=tr;function Nn(t,e,r,s){this.src=t,this.env=r,this.md=e,this.tokens=s,this.tokens_meta=Array(s.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Nn.prototype.pushPending=function(){const t=new Ot("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};Nn.prototype.push=function(t,e,r){this.pending&&this.pushPending();const s=new Ot(t,e,r);let i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),s.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(s),this.tokens_meta.push(i),s};Nn.prototype.scanDelims=function(t,e){const r=this.posMax,s=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let n=t;for(;n<r&&this.src.charCodeAt(n)===s;)n++;const a=n-t,o=n<r?this.src.charCodeAt(n):32,c=In(i)||Mn(String.fromCharCode(i)),u=In(o)||Mn(String.fromCharCode(o)),f=Tn(i),l=Tn(o),h=!l&&(!u||f||c),p=!f&&(!c||l||u);return{can_open:h&&(e||!p||c),can_close:p&&(e||!h||u),length:a}};Nn.prototype.Token=Ot;function Xm(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Ym(t,e){let r=t.pos;for(;r<t.posMax&&!Xm(t.src.charCodeAt(r));)r++;return r===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,r)),t.pos=r,!0)}const Qm=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function e2(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const r=t.pos,s=t.posMax;if(r+3>s||t.src.charCodeAt(r)!==58||t.src.charCodeAt(r+1)!==47||t.src.charCodeAt(r+2)!==47)return!1;const i=t.pending.match(Qm);if(!i)return!1;const n=i[1],a=t.md.linkify.matchAtStart(t.src.slice(r-n.length));if(!a)return!1;let o=a.url;if(o.length<=n.length)return!1;o=o.replace(/\*+$/,"");const c=t.md.normalizeLink(o);if(!t.md.validateLink(c))return!1;if(!e){t.pending=t.pending.slice(0,-n.length);const u=t.push("link_open","a",1);u.attrs=[["href",c]],u.markup="linkify",u.info="auto";const f=t.push("text","",0);f.content=t.md.normalizeLinkText(o);const l=t.push("link_close","a",-1);l.markup="linkify",l.info="auto"}return t.pos+=o.length-n.length,!0}function t2(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==10)return!1;const s=t.pending.length-1,i=t.posMax;if(!e)if(s>=0&&t.pending.charCodeAt(s)===32)if(s>=1&&t.pending.charCodeAt(s-1)===32){let n=s-1;for(;n>=1&&t.pending.charCodeAt(n-1)===32;)n--;t.pending=t.pending.slice(0,n),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(r++;r<i&&Ge(t.src.charCodeAt(r));)r++;return t.pos=r,!0}const io=[];for(let t=0;t<256;t++)io.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){io[t.charCodeAt(0)]=1});function r2(t,e){let r=t.pos;const s=t.posMax;if(t.src.charCodeAt(r)!==92||(r++,r>=s))return!1;let i=t.src.charCodeAt(r);if(i===10){for(e||t.push("hardbreak","br",0),r++;r<s&&(i=t.src.charCodeAt(r),!!Ge(i));)r++;return t.pos=r,!0}let n=t.src[r];if(i>=55296&&i<=56319&&r+1<s){const o=t.src.charCodeAt(r+1);o>=56320&&o<=57343&&(n+=t.src[r+1],r++)}const a="\\"+n;if(!e){const o=t.push("text_special","",0);i<256&&io[i]!==0?o.content=n:o.content=a,o.markup=a,o.info="escape"}return t.pos=r+1,!0}function n2(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==96)return!1;const i=r;r++;const n=t.posMax;for(;r<n&&t.src.charCodeAt(r)===96;)r++;const a=t.src.slice(i,r),o=a.length;if(t.backticksScanned&&(t.backticks[o]||0)<=i)return e||(t.pending+=a),t.pos+=o,!0;let c=r,u;for(;(u=t.src.indexOf("`",c))!==-1;){for(c=u+1;c<n&&t.src.charCodeAt(c)===96;)c++;const f=c-u;if(f===o){if(!e){const l=t.push("code_inline","code",0);l.markup=a,l.content=t.src.slice(r,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=c,!0}t.backticks[f]=u}return t.backticksScanned=!0,e||(t.pending+=a),t.pos+=o,!0}function i2(t,e){const r=t.pos,s=t.src.charCodeAt(r);if(e||s!==126)return!1;const i=t.scanDelims(t.pos,!0);let n=i.length;const a=String.fromCharCode(s);if(n<2)return!1;let o;n%2&&(o=t.push("text","",0),o.content=a,n--);for(let c=0;c<n;c+=2)o=t.push("text","",0),o.content=a+a,t.delimiters.push({marker:s,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function Ku(t,e){let r;const s=[],i=e.length;for(let n=0;n<i;n++){const a=e[n];if(a.marker!==126||a.end===-1)continue;const o=e[a.end];r=t.tokens[a.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=t.tokens[o.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&s.push(o.token-1)}for(;s.length;){const n=s.pop();let a=n+1;for(;a<t.tokens.length&&t.tokens[a].type==="s_close";)a++;a--,n!==a&&(r=t.tokens[a],t.tokens[a]=t.tokens[n],t.tokens[n]=r)}}function s2(t){const e=t.tokens_meta,r=t.tokens_meta.length;Ku(t,t.delimiters);for(let s=0;s<r;s++)e[s]&&e[s].delimiters&&Ku(t,e[s].delimiters)}const hd={tokenize:i2,postProcess:s2};function a2(t,e){const r=t.pos,s=t.src.charCodeAt(r);if(e||s!==95&&s!==42)return!1;const i=t.scanDelims(t.pos,s===42);for(let n=0;n<i.length;n++){const a=t.push("text","",0);a.content=String.fromCharCode(s),t.delimiters.push({marker:s,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function Ju(t,e){const r=e.length;for(let s=r-1;s>=0;s--){const i=e[s];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const n=e[i.end],a=s>0&&e[s-1].end===i.end+1&&e[s-1].marker===i.marker&&e[s-1].token===i.token-1&&e[i.end+1].token===n.token+1,o=String.fromCharCode(i.marker),c=t.tokens[i.token];c.type=a?"strong_open":"em_open",c.tag=a?"strong":"em",c.nesting=1,c.markup=a?o+o:o,c.content="";const u=t.tokens[n.token];u.type=a?"strong_close":"em_close",u.tag=a?"strong":"em",u.nesting=-1,u.markup=a?o+o:o,u.content="",a&&(t.tokens[e[s-1].token].content="",t.tokens[e[i.end+1].token].content="",s--)}}function o2(t){const e=t.tokens_meta,r=t.tokens_meta.length;Ju(t,t.delimiters);for(let s=0;s<r;s++)e[s]&&e[s].delimiters&&Ju(t,e[s].delimiters)}const dd={tokenize:a2,postProcess:o2};function u2(t,e){let r,s,i,n,a="",o="",c=t.pos,u=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const f=t.pos,l=t.posMax,h=t.pos+1,p=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(p<0)return!1;let b=p+1;if(b<l&&t.src.charCodeAt(b)===40){for(u=!1,b++;b<l&&(r=t.src.charCodeAt(b),!(!Ge(r)&&r!==10));b++);if(b>=l)return!1;if(c=b,i=t.md.helpers.parseLinkDestination(t.src,b,t.posMax),i.ok){for(a=t.md.normalizeLink(i.str),t.md.validateLink(a)?b=i.pos:a="",c=b;b<l&&(r=t.src.charCodeAt(b),!(!Ge(r)&&r!==10));b++);if(i=t.md.helpers.parseLinkTitle(t.src,b,t.posMax),b<l&&c!==b&&i.ok)for(o=i.str,b=i.pos;b<l&&(r=t.src.charCodeAt(b),!(!Ge(r)&&r!==10));b++);}(b>=l||t.src.charCodeAt(b)!==41)&&(u=!0),b++}if(u){if(typeof t.env.references>"u")return!1;if(b<l&&t.src.charCodeAt(b)===91?(c=b+1,b=t.md.helpers.parseLinkLabel(t,b),b>=0?s=t.src.slice(c,b++):b=p+1):b=p+1,s||(s=t.src.slice(h,p)),n=t.env.references[Oi(s)],!n)return t.pos=f,!1;a=n.href,o=n.title}if(!e){t.pos=h,t.posMax=p;const m=t.push("link_open","a",1),v=[["href",a]];m.attrs=v,o&&v.push(["title",o]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=b,t.posMax=l,!0}function c2(t,e){let r,s,i,n,a,o,c,u,f="";const l=t.pos,h=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const p=t.pos+2,b=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(b<0)return!1;if(n=b+1,n<h&&t.src.charCodeAt(n)===40){for(n++;n<h&&(r=t.src.charCodeAt(n),!(!Ge(r)&&r!==10));n++);if(n>=h)return!1;for(u=n,o=t.md.helpers.parseLinkDestination(t.src,n,t.posMax),o.ok&&(f=t.md.normalizeLink(o.str),t.md.validateLink(f)?n=o.pos:f=""),u=n;n<h&&(r=t.src.charCodeAt(n),!(!Ge(r)&&r!==10));n++);if(o=t.md.helpers.parseLinkTitle(t.src,n,t.posMax),n<h&&u!==n&&o.ok)for(c=o.str,n=o.pos;n<h&&(r=t.src.charCodeAt(n),!(!Ge(r)&&r!==10));n++);else c="";if(n>=h||t.src.charCodeAt(n)!==41)return t.pos=l,!1;n++}else{if(typeof t.env.references>"u")return!1;if(n<h&&t.src.charCodeAt(n)===91?(u=n+1,n=t.md.helpers.parseLinkLabel(t,n),n>=0?i=t.src.slice(u,n++):n=b+1):n=b+1,i||(i=t.src.slice(p,b)),a=t.env.references[Oi(i)],!a)return t.pos=l,!1;f=a.href,c=a.title}if(!e){s=t.src.slice(p,b);const m=[];t.md.inline.parse(s,t.md,t.env,m);const v=t.push("image","img",0),x=[["src",f],["alt",""]];v.attrs=x,v.children=m,v.content=s,c&&x.push(["title",c])}return t.pos=n,t.posMax=h,!0}const f2=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,l2=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function h2(t,e){let r=t.pos;if(t.src.charCodeAt(r)!==60)return!1;const s=t.pos,i=t.posMax;for(;;){if(++r>=i)return!1;const a=t.src.charCodeAt(r);if(a===60)return!1;if(a===62)break}const n=t.src.slice(s+1,r);if(l2.test(n)){const a=t.md.normalizeLink(n);if(!t.md.validateLink(a))return!1;if(!e){const o=t.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(n);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=n.length+2,!0}if(f2.test(n)){const a=t.md.normalizeLink("mailto:"+n);if(!t.md.validateLink(a))return!1;if(!e){const o=t.push("link_open","a",1);o.attrs=[["href",a]],o.markup="autolink",o.info="auto";const c=t.push("text","",0);c.content=t.md.normalizeLinkText(n);const u=t.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return t.pos+=n.length+2,!0}return!1}function d2(t){return/^<a[>\s]/i.test(t)}function p2(t){return/^<\/a\s*>/i.test(t)}function b2(t){const e=t|32;return e>=97&&e<=122}function m2(t,e){if(!t.md.options.html)return!1;const r=t.posMax,s=t.pos;if(t.src.charCodeAt(s)!==60||s+2>=r)return!1;const i=t.src.charCodeAt(s+1);if(i!==33&&i!==63&&i!==47&&!b2(i))return!1;const n=t.src.slice(s).match(Wm);if(!n)return!1;if(!e){const a=t.push("html_inline","",0);a.content=n[0],d2(a.content)&&t.linkLevel++,p2(a.content)&&t.linkLevel--}return t.pos+=n[0].length,!0}const g2=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,_2=/^&([a-z][a-z0-9]{1,31});/i;function v2(t,e){const r=t.pos,s=t.posMax;if(t.src.charCodeAt(r)!==38||r+1>=s)return!1;if(t.src.charCodeAt(r+1)===35){const n=t.src.slice(r).match(g2);if(n){if(!e){const a=n[1][0].toLowerCase()==="x"?parseInt(n[1].slice(1),16):parseInt(n[1],10),o=t.push("text_special","",0);o.content=ro(a)?vi(a):vi(65533),o.markup=n[0],o.info="entity"}return t.pos+=n[0].length,!0}}else{const n=t.src.slice(r).match(_2);if(n){const a=sd(n[0]);if(a!==n[0]){if(!e){const o=t.push("text_special","",0);o.content=a,o.markup=n[0],o.info="entity"}return t.pos+=n[0].length,!0}}}return!1}function Xu(t){const e={},r=t.length;if(!r)return;let s=0,i=-2;const n=[];for(let a=0;a<r;a++){const o=t[a];if(n.push(0),(t[s].marker!==o.marker||i!==o.token-1)&&(s=a),i=o.token,o.length=o.length||0,!o.close)continue;e.hasOwnProperty(o.marker)||(e[o.marker]=[-1,-1,-1,-1,-1,-1]);const c=e[o.marker][(o.open?3:0)+o.length%3];let u=s-n[s]-1,f=u;for(;u>c;u-=n[u]+1){const l=t[u];if(l.marker===o.marker&&l.open&&l.end<0){let h=!1;if((l.close||o.open)&&(l.length+o.length)%3===0&&(l.length%3!==0||o.length%3!==0)&&(h=!0),!h){const p=u>0&&!t[u-1].open?n[u-1]+1:0;n[a]=a-u+p,n[u]=p,o.open=!1,l.end=a,l.close=!1,f=-1,i=-2;break}}}f!==-1&&(e[o.marker][(o.open?3:0)+(o.length||0)%3]=f)}}function y2(t){const e=t.tokens_meta,r=t.tokens_meta.length;Xu(t.delimiters);for(let s=0;s<r;s++)e[s]&&e[s].delimiters&&Xu(e[s].delimiters)}function w2(t){let e,r,s=0;const i=t.tokens,n=t.tokens.length;for(e=r=0;e<n;e++)i[e].nesting<0&&s--,i[e].level=s,i[e].nesting>0&&s++,i[e].type==="text"&&e+1<n&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==r&&(i[r]=i[e]),r++);e!==r&&(i.length=r)}const Ws=[["text",Ym],["linkify",e2],["newline",t2],["escape",r2],["backticks",n2],["strikethrough",hd.tokenize],["emphasis",dd.tokenize],["link",u2],["image",c2],["autolink",h2],["html_inline",m2],["entity",v2]],Vs=[["balance_pairs",y2],["strikethrough",hd.postProcess],["emphasis",dd.postProcess],["fragments_join",w2]];function zn(){this.ruler=new gt;for(let t=0;t<Ws.length;t++)this.ruler.push(Ws[t][0],Ws[t][1]);this.ruler2=new gt;for(let t=0;t<Vs.length;t++)this.ruler2.push(Vs[t][0],Vs[t][1])}zn.prototype.skipToken=function(t){const e=t.pos,r=this.ruler.getRules(""),s=r.length,i=t.md.options.maxNesting,n=t.cache;if(typeof n[e]<"u"){t.pos=n[e];return}let a=!1;if(t.level<i){for(let o=0;o<s;o++)if(t.level++,a=r[o](t,!0),t.level--,a){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;a||t.pos++,n[e]=t.pos};zn.prototype.tokenize=function(t){const e=this.ruler.getRules(""),r=e.length,s=t.posMax,i=t.md.options.maxNesting;for(;t.pos<s;){const n=t.pos;let a=!1;if(t.level<i){for(let o=0;o<r;o++)if(a=e[o](t,!1),a){if(n>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(a){if(t.pos>=s)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};zn.prototype.parse=function(t,e,r,s){const i=new this.State(t,e,r,s);this.tokenize(i);const n=this.ruler2.getRules(""),a=n.length;for(let o=0;o<a;o++)n[o](i)};zn.prototype.State=Nn;function x2(t){const e={};t=t||{},e.src_Any=ed.source,e.src_Cc=td.source,e.src_Z=nd.source,e.src_P=eo.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const r="[><]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Ca(t){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(s){t[s]=r[s]})}),t}function Ri(t){return Object.prototype.toString.call(t)}function k2(t){return Ri(t)==="[object String]"}function A2(t){return Ri(t)==="[object Object]"}function S2(t){return Ri(t)==="[object RegExp]"}function Yu(t){return Ri(t)==="[object Function]"}function E2(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const pd={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function C2(t){return Object.keys(t||{}).reduce(function(e,r){return e||pd.hasOwnProperty(r)},!1)}const D2={"http:":{validate:function(t,e,r){const s=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(s)?s.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){const s=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(s)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:s.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){const s=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(s)?s.match(r.re.mailto)[0].length:0}}},T2="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",M2="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function I2(t){t.__index__=-1,t.__text_cache__=""}function P2(t){return function(e,r){const s=e.slice(r);return t.test(s)?s.match(t)[0].length:0}}function Qu(){return function(t,e){e.normalize(t)}}function yi(t){const e=t.re=x2(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(T2),r.push(e.src_xn),e.src_tlds=r.join("|");function s(o){return o.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(s(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(s(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(s(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(s(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function n(o,c){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+c)}Object.keys(t.__schemas__).forEach(function(o){const c=t.__schemas__[o];if(c===null)return;const u={validate:null,link:null};if(t.__compiled__[o]=u,A2(c)){S2(c.validate)?u.validate=P2(c.validate):Yu(c.validate)?u.validate=c.validate:n(o,c),Yu(c.normalize)?u.normalize=c.normalize:c.normalize?n(o,c):u.normalize=Qu();return}if(k2(c)){i.push(o);return}n(o,c)}),i.forEach(function(o){t.__compiled__[t.__schemas__[o]]&&(t.__compiled__[o].validate=t.__compiled__[t.__schemas__[o]].validate,t.__compiled__[o].normalize=t.__compiled__[t.__schemas__[o]].normalize)}),t.__compiled__[""]={validate:null,normalize:Qu()};const a=Object.keys(t.__compiled__).filter(function(o){return o.length>0&&t.__compiled__[o]}).map(E2).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+a+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+a+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),I2(t)}function O2(t,e){const r=t.__index__,s=t.__last_index__,i=t.__text_cache__.slice(r,s);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=s+e,this.raw=i,this.text=i,this.url=i}function Da(t,e){const r=new O2(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function wt(t,e){if(!(this instanceof wt))return new wt(t,e);e||C2(t)&&(e=t,t={}),this.__opts__=Ca({},pd,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ca({},D2,t),this.__compiled__={},this.__tlds__=M2,this.__tlds_replaced__=!1,this.re={},yi(this)}wt.prototype.add=function(e,r){return this.__schemas__[e]=r,yi(this),this};wt.prototype.set=function(e){return this.__opts__=Ca(this.__opts__,e),this};wt.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let r,s,i,n,a,o,c,u,f;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(n=this.testSchemaAt(e,r[2],c.lastIndex),n){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+n;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(s=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(a=s.index+s[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=s.index+s[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=e.indexOf("@"),f>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(a=i.index+i[1].length,o=i.index+i[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o))),this.__index__>=0};wt.prototype.pretest=function(e){return this.re.pretest.test(e)};wt.prototype.testSchemaAt=function(e,r,s){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,s,this):0};wt.prototype.match=function(e){const r=[];let s=0;this.__index__>=0&&this.__text_cache__===e&&(r.push(Da(this,s)),s=this.__last_index__);let i=s?e.slice(s):e;for(;this.test(i);)r.push(Da(this,s)),i=i.slice(this.__last_index__),s+=this.__last_index__;return r.length?r:null};wt.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const r=this.re.schema_at_start.exec(e);if(!r)return null;const s=this.testSchemaAt(e,r[2],r[0].length);return s?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+s,Da(this,0)):null};wt.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(s,i,n){return s!==n[i-1]}).reverse(),yi(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,yi(this),this)};wt.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};wt.prototype.onCompile=function(){};const un=2147483647,Jt=36,so=1,Pn=26,F2=38,R2=700,bd=72,md=128,gd="-",L2=/^xn--/,B2=/[^\0-\x7F]/,N2=/[\x2E\u3002\uFF0E\uFF61]/g,z2={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Gs=Jt-so,Xt=Math.floor,Zs=String.fromCharCode;function xr(t){throw new RangeError(z2[t])}function j2(t,e){const r=[];let s=t.length;for(;s--;)r[s]=e(t[s]);return r}function _d(t,e){const r=t.split("@");let s="";r.length>1&&(s=r[0]+"@",t=r[1]),t=t.replace(N2,".");const i=t.split("."),n=j2(i,e).join(".");return s+n}function vd(t){const e=[];let r=0;const s=t.length;for(;r<s;){const i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<s){const n=t.charCodeAt(r++);(n&64512)==56320?e.push(((i&1023)<<10)+(n&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}const q2=t=>String.fromCodePoint(...t),U2=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Jt},ec=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},yd=function(t,e,r){let s=0;for(t=r?Xt(t/R2):t>>1,t+=Xt(t/e);t>Gs*Pn>>1;s+=Jt)t=Xt(t/Gs);return Xt(s+(Gs+1)*t/(t+F2))},wd=function(t){const e=[],r=t.length;let s=0,i=md,n=bd,a=t.lastIndexOf(gd);a<0&&(a=0);for(let o=0;o<a;++o)t.charCodeAt(o)>=128&&xr("not-basic"),e.push(t.charCodeAt(o));for(let o=a>0?a+1:0;o<r;){const c=s;for(let f=1,l=Jt;;l+=Jt){o>=r&&xr("invalid-input");const h=U2(t.charCodeAt(o++));h>=Jt&&xr("invalid-input"),h>Xt((un-s)/f)&&xr("overflow"),s+=h*f;const p=l<=n?so:l>=n+Pn?Pn:l-n;if(h<p)break;const b=Jt-p;f>Xt(un/b)&&xr("overflow"),f*=b}const u=e.length+1;n=yd(s-c,u,c==0),Xt(s/u)>un-i&&xr("overflow"),i+=Xt(s/u),s%=u,e.splice(s++,0,i)}return String.fromCodePoint(...e)},xd=function(t){const e=[];t=vd(t);const r=t.length;let s=md,i=0,n=bd;for(const c of t)c<128&&e.push(Zs(c));const a=e.length;let o=a;for(a&&e.push(gd);o<r;){let c=un;for(const f of t)f>=s&&f<c&&(c=f);const u=o+1;c-s>Xt((un-i)/u)&&xr("overflow"),i+=(c-s)*u,s=c;for(const f of t)if(f<s&&++i>un&&xr("overflow"),f===s){let l=i;for(let h=Jt;;h+=Jt){const p=h<=n?so:h>=n+Pn?Pn:h-n;if(l<p)break;const b=l-p,m=Jt-p;e.push(Zs(ec(p+b%m,0))),l=Xt(b/m)}e.push(Zs(ec(l,0))),n=yd(i,u,o===a),i=0,++o}++i,++s}return e.join("")},$2=function(t){return _d(t,function(e){return L2.test(e)?wd(e.slice(4).toLowerCase()):e})},H2=function(t){return _d(t,function(e){return B2.test(e)?"xn--"+xd(e):e})},kd={version:"2.3.1",ucs2:{decode:vd,encode:q2},decode:wd,encode:xd,toASCII:H2,toUnicode:$2},W2={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},V2={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},G2={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Z2={default:W2,zero:V2,commonmark:G2},K2=/^(vbscript|javascript|file|data):/,J2=/^data:image\/(gif|png|jpeg|webp);/;function X2(t){const e=t.trim().toLowerCase();return K2.test(e)?J2.test(e):!0}const Ad=["http:","https:","mailto:"];function Y2(t){const e=Qa(t,!0);if(e.hostname&&(!e.protocol||Ad.indexOf(e.protocol)>=0))try{e.hostname=kd.toASCII(e.hostname)}catch{}return Bn(Ya(e))}function Q2(t){const e=Qa(t,!0);if(e.hostname&&(!e.protocol||Ad.indexOf(e.protocol)>=0))try{e.hostname=kd.toUnicode(e.hostname)}catch{}return fn(Ya(e),fn.defaultChars+"%")}function Pt(t,e){if(!(this instanceof Pt))return new Pt(t,e);e||to(t)||(e=t||{},t="default"),this.inline=new zn,this.block=new Fi,this.core=new no,this.renderer=new pn,this.linkify=new wt,this.validateLink=X2,this.normalizeLink=Y2,this.normalizeLinkText=Q2,this.utils=tm,this.helpers=Pi({},sm),this.options={},this.configure(t),e&&this.set(e)}Pt.prototype.set=function(t){return Pi(this.options,t),this};Pt.prototype.configure=function(t){const e=this;if(to(t)){const r=t;if(t=Z2[r],!t)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(r){t.components[r].rules&&e[r].ruler.enableOnly(t.components[r].rules),t.components[r].rules2&&e[r].ruler2.enableOnly(t.components[r].rules2)}),this};Pt.prototype.enable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));const s=t.filter(function(i){return r.indexOf(i)<0});if(s.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+s);return this};Pt.prototype.disable=function(t,e){let r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));const s=t.filter(function(i){return r.indexOf(i)<0});if(s.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+s);return this};Pt.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Pt.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};Pt.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Pt.prototype.parseInline=function(t,e){const r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};Pt.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};var Ks,tc;function eg(){if(tc)return Ks;tc=1;function t(e,r){r=r||{};let s=typeof r.externalClassName=="string"||r.externalClassName===null?r.externalClassName:"external-link",i=typeof r.internalClassName=="string"||r.internalClassName===null?r.internalClassName:null,n=Array.isArray(r.internalDomains)?r.internalDomains.map(p=>p.toLowerCase()):[],a=r.externalTarget||"_self",o=r.internalTarget||"_self",c=r.externalRel||null,u=r.internalRel||null;if(s===null&&i===null&&a==="_self"&&o==="_self"&&c===null&&u===null)return;function f(p){function b(m){if(m.children&&m.children.map(b),m.type==="link_open"){let v=m.attrGet("href"),x=l(v),_=x?i:s;if(_){let A=m.attrGet("class")||"";A!==""&&(_=A+" "+_),m.attrSet("class",_)}let y=x?o:a;y!=="_self"&&m.attrSet("target",y);let k=x?u:c;if(k){let A=m.attrGet("rel")||"";A!==""&&(k=A+" "+k),m.attrSet("rel",k)}}}p.tokens.map(b)}function l(p){let b=h(p);return b===null||n.indexOf(b)!==-1}function h(p){let b=p.split("//")[1];return b?(b=b.split("/")[0].toLowerCase(),b||null):null}e.core.ruler.push("external_links",f)}return Ks=t,Ks}var tg=eg();const Iv=Ir(tg),$r=an.room;Je(null);const De=Ie({pub:Yt("current-room",$r.pub),isRoot:we(()=>De.pub==$r.pub),hosts:{},features:{},profile:{}});Di(()=>{const t=Be();De.pub==$r.pub?(De.hosts=$r.hosts,De.features=$r.features):(De.features={},De.hosts={},t.user(De.pub).get("hosts").map().once((e,r)=>{De.hosts[r]=e}),t.user(De.pub).get("features").map().once((e,r)=>{De.features[r]=e}))});function Pv(t=De.pub){const e=Ie({pub:t,isFavourite:!1,isRoot:we(()=>t==$r.pub),hosts:{},features:{},profile:{}}),r=Be(),{user:s}=br();return r.user(t).get("profile").map().on((i,n)=>{e.profile[n]=i}),r.user(t).get("hosts").map().once((i,n)=>{e.hosts[n]=i}),r.user(t).get("features").map().once((i,n)=>{e.features[n]=i}),r.user().get("rooms").get(`${t}@${s==null?void 0:s.pub}`).on(i=>{e.isFavourite=i}),{room:e,submitRoom:ng,enterRoom:ig,createRoom:Sd,leaveRoom:sg,updateRoomProfile:rg}}function rg(t,e){var n,a;const r=Be(),{user:s}=br();let i=(a=(n=De.hosts)==null?void 0:n[s.pub])==null?void 0:a.profile;if(!i){console.warn("Profile certificate not found");return}r.user(De.pub).get("profile").get(t).put(e,null,{opt:{cert:i}})}async function Sd({pair:t,name:e,featureList:r=Object.keys(an==null?void 0:an.features),publish:s=!0}={}){var h;const{user:i}=br();if(!t)return;const n=t.pub,a=await Go({pair:t,list:[{tag:"profile",users:[i.pub]},{tag:"features",users:[i.pub]},{tag:"hosts",users:[i.pub]}]}),o=await Go({pair:t,list:r.map(p=>({tag:p,personal:!0}))}),c=await i.encrypt(t),u=await i.encrypt(n),f={...an,relay:Qe.peer,room:{pub:t.pub,hosts:{[i.pub]:{enc:c,...a}},features:o}};console.log("COPY THIS ROOM INFO TO USE IT AS A ROOT",f,"STORE THIS KEY PAIR IN A SAFE PLACE",t);const l=Be();await l.user().get("rooms").get(`${n}@${i.pub}`).put(!0).then(),await l.user().get("my_rooms").get(u).put(c).then(),await l.user(n).get("hosts").get(i.pub).put({enc:c,...a},null,{opt:{cert:a.hosts}}).then(),await l.user(n).get("features").put(o,null,{opt:{cert:a.features}}).then(),e&&await l.user(n).get("profile").put({name:e},null,{opt:{cert:a.profile}}).then(),s&&await l.user(De.pub).get("rooms").get(`${n}@${i.pub}`).put(!0,null,{opt:{cert:(h=De==null?void 0:De.features)==null?void 0:h.rooms}}).then(),Ou(JSON.stringify(f),"application/json","gun.config.json"),Ou(JSON.stringify(t),"application/json",`room_${e||n}.json`)}async function Ov(t,e){const r=await Oe.decrypt(t);Sd({pair:r,name:e})}async function ng(t){var s;const e=Be(),r=await e.user(De.pub).get("rooms").get(`${t}@${Oe.pub}`).then();e.user(De.pub).get("rooms").get(`${t}@${Oe.pub}`).put(!r,null,{opt:{cert:(s=De.features)==null?void 0:s.rooms}})}function ig(t){De.pub=t}function sg(){De.pub=$r.pub}var Js,Qr,ag={1467:t=>{function e(r,s){if(typeof r[0]=="string")return r.join("");if(typeof r[0]=="number")return new Uint8Array(r);const i=new Uint8Array(s);let n=0;for(let a=0,o=r.length;a<o;a++){const c=r[a];i.set(c,n),n+=c.byteLength||c.length}return i}t.exports=async function*(r,s=512,i={}){typeof s=="object"&&(s=(i=s).size);let{nopad:n,zeroPadding:a=!0}=i;n&&(a=!1);let o=[],c=0;for await(const u of r)if(c+=u.byteLength||u.length||1,o.push(u),c>=s){const f=e(o,c);let l=0;for(;c>=s;)yield f.slice(l,l+s),c-=s,l+=s;o=[f.slice(l,f.length)]}c&&(yield e(o,a?s:c))}},4497:(t,e,r)=>{const s=r(8454),i=r(9596);t.exports=class{constructor(n,a){if(this.store=n,this.chunkLength=n.chunkLength,this.inProgressGets=new Map,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.cache=new s(a)}put(n,a,o=()=>{}){if(!this.cache)return i(()=>o(new Error("CacheStore closed")));this.cache.remove(n),this.store.put(n,a,o)}get(n,a,o=()=>{}){if(typeof a=="function")return this.get(n,null,a);if(!this.cache)return i(()=>o(new Error("CacheStore closed")));a||(a={});let c=this.cache.get(n);if(c){const l=a.offset||0,h=a.length||c.length-l;return l===0&&h===c.length||(c=c.slice(l,h+l)),i(()=>o(null,c))}let u=this.inProgressGets.get(n);const f=!!u;u||(u=[],this.inProgressGets.set(n,u)),u.push({opts:a,cb:o}),f||this.store.get(n,(l,h)=>{l||this.cache==null||this.cache.set(n,h);const p=this.inProgressGets.get(n);this.inProgressGets.delete(n);for(const{opts:b,cb:m}of p)if(l)m(l);else{const v=b.offset||0,x=b.length||h.length-v;let _=h;v===0&&x===h.length||(_=h.slice(v,x+v)),m(null,_)}})}close(n=()=>{}){if(!this.cache)return i(()=>n(new Error("CacheStore closed")));this.cache=null,this.store.close(n)}destroy(n=()=>{}){if(!this.cache)return i(()=>n(new Error("CacheStore closed")));this.cache=null,this.store.destroy(n)}}},4018:t=>{t.exports=function(){for(var e=navigator.hardwareConcurrency||1,r=[],s=0;s<e;s++)r.push({model:"",speed:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}});return r}},7833:(t,e,r)=>{var s=r(717);e.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;n.splice(1,0,a,"color: inherit");let o=0,c=0;n[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(o++,u==="%c"&&(c=o))}),n.splice(c,0,a)},e.save=function(n){try{n?e.storage.setItem("debug",n):e.storage.removeItem("debug")}catch{}},e.load=function(){let n;try{n=e.storage.getItem("debug")}catch{}return!n&&s!==void 0&&"env"in s&&(n=s.env.DEBUG),n},e.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let n;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(n=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(n[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(736)(e);const{formatters:i}=t.exports;i.j=function(n){try{return JSON.stringify(n)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}},736:(t,e,r)=>{t.exports=function(s){function i(o){let c,u,f,l=null;function h(...p){if(!h.enabled)return;const b=h,m=Number(new Date),v=m-(c||m);b.diff=v,b.prev=c,b.curr=m,c=m,p[0]=i.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let x=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(_,y)=>{if(_==="%%")return"%";x++;const k=i.formatters[y];if(typeof k=="function"){const A=p[x];_=k.call(b,A),p.splice(x,1),x--}return _}),i.formatArgs.call(b,p),(b.log||i.log).apply(b,p)}return h.namespace=o,h.useColors=i.useColors(),h.color=i.selectColor(o),h.extend=n,h.destroy=i.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(u!==i.namespaces&&(u=i.namespaces,f=i.enabled(o)),f),set:p=>{l=p}}),typeof i.init=="function"&&i.init(h),h}function n(o,c){const u=i(this.namespace+(c===void 0?":":c)+o);return u.log=this.log,u}function a(o,c){let u=0,f=0,l=-1,h=0;for(;u<o.length;)if(f<c.length&&(c[f]===o[u]||c[f]==="*"))c[f]==="*"?(l=f,h=u,f++):(u++,f++);else{if(l===-1)return!1;f=l+1,h++,u=h}for(;f<c.length&&c[f]==="*";)f++;return f===c.length}return i.debug=i,i.default=i,i.coerce=function(o){return o instanceof Error?o.stack||o.message:o},i.disable=function(){const o=[...i.names,...i.skips.map(c=>"-"+c)].join(",");return i.enable(""),o},i.enable=function(o){i.save(o),i.namespaces=o,i.names=[],i.skips=[];const c=(typeof o=="string"?o:"").trim().replace(" ",",").split(",").filter(Boolean);for(const u of c)u[0]==="-"?i.skips.push(u.slice(1)):i.names.push(u)},i.enabled=function(o){for(const c of i.skips)if(a(o,c))return!1;for(const c of i.names)if(a(o,c))return!0;return!1},i.humanize=r(6585),i.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(s).forEach(o=>{i[o]=s[o]}),i.names=[],i.skips=[],i.formatters={},i.selectColor=function(o){let c=0;for(let u=0;u<o.length;u++)c=(c<<5)-c+o.charCodeAt(u),c|=0;return i.colors[Math.abs(c)%i.colors.length]},i.enable(i.load()),i}},6611:(t,e,r)=>{var s=r(717),i=r(3519),n=function(){},a=function(o,c,u){if(typeof c=="function")return a(o,null,c);c||(c={}),u=i(u||n);var f=o._writableState,l=o._readableState,h=c.readable||c.readable!==!1&&o.readable,p=c.writable||c.writable!==!1&&o.writable,b=!1,m=function(){o.writable||v()},v=function(){p=!1,h||u.call(o)},x=function(){h=!1,p||u.call(o)},_=function(P){u.call(o,P?new Error("exited with error code: "+P):null)},y=function(P){u.call(o,P)},k=function(){s.nextTick(A)},A=function(){if(!b)return(!h||l&&l.ended&&!l.destroyed)&&(!p||f&&f.ended&&!f.destroyed)?void 0:u.call(o,new Error("premature close"))},M=function(){o.req.on("finish",v)};return function(P){return P.setHeader&&typeof P.abort=="function"}(o)?(o.on("complete",v),o.on("abort",k),o.req?M():o.on("request",M)):p&&!f&&(o.on("end",m),o.on("close",m)),function(P){return P.stdio&&Array.isArray(P.stdio)&&P.stdio.length===3}(o)&&o.on("exit",_),o.on("end",x),o.on("finish",v),c.error!==!1&&o.on("error",y),o.on("close",k),function(){b=!0,o.removeListener("complete",v),o.removeListener("abort",k),o.removeListener("request",M),o.req&&o.req.removeListener("finish",v),o.removeListener("end",m),o.removeListener("close",m),o.removeListener("finish",v),o.removeListener("exit",_),o.removeListener("end",x),o.removeListener("error",y),o.removeListener("close",k)}};t.exports=a},6310:t=>{function e(r,s){for(const i in s)Object.defineProperty(r,i,{value:s[i],enumerable:!0,configurable:!0});return r}t.exports=function(r,s,i){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof s=="object"&&(i=s,s=""),s&&(i.code=s);try{return e(r,i)}catch{i.message=r.message,i.stack=r.stack;const a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(r)),e(new a,i)}}},580:t=>{var e=/["'&<>]/;t.exports=function(r){var s,i=""+r,n=e.exec(i);if(!n)return i;var a="",o=0,c=0;for(o=n.index;o<i.length;o++){switch(i.charCodeAt(o)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}c!==o&&(a+=i.substring(c,o)),c=o+1,a+=s}return c!==o?a+i.substring(c,o):a}},7007:t=>{var e=Object.create||function(m){var v=function(){};return v.prototype=m,new v},r=Object.keys||function(m){var v=[];for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&v.push(x);return x},s=Function.prototype.bind||function(m){var v=this;return function(){return v.apply(m,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=e(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var n,a=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),n=o.x===0}catch{n=!1}function c(m){return m._maxListeners===void 0?i.defaultMaxListeners:m._maxListeners}function u(m,v,x,_){var y,k,A;if(typeof x!="function")throw new TypeError('"listener" argument must be a function');if((k=m._events)?(k.newListener&&(m.emit("newListener",v,x.listener?x.listener:x),k=m._events),A=k[v]):(k=m._events=e(null),m._eventsCount=0),A){if(typeof A=="function"?A=k[v]=_?[x,A]:[A,x]:_?A.unshift(x):A.push(x),!A.warned&&(y=c(m))&&y>0&&A.length>y){A.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+A.length+' "'+String(v)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');M.name="MaxListenersExceededWarning",M.emitter=m,M.type=v,M.count=A.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",M.name,M.message)}}else A=k[v]=x,++m._eventsCount;return m}function f(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var m=new Array(arguments.length),v=0;v<m.length;++v)m[v]=arguments[v];this.listener.apply(this.target,m)}}function l(m,v,x){var _={fired:!1,wrapFn:void 0,target:m,type:v,listener:x},y=s.call(f,_);return y.listener=x,_.wrapFn=y,y}function h(m,v,x){var _=m._events;if(!_)return[];var y=_[v];return y?typeof y=="function"?x?[y.listener||y]:[y]:x?function(k){for(var A=new Array(k.length),M=0;M<A.length;++M)A[M]=k[M].listener||k[M];return A}(y):b(y,y.length):[]}function p(m){var v=this._events;if(v){var x=v[m];if(typeof x=="function")return 1;if(x)return x.length}return 0}function b(m,v){for(var x=new Array(v),_=0;_<v;++_)x[_]=m[_];return x}n?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(m){if(typeof m!="number"||m<0||m!=m)throw new TypeError('"defaultMaxListeners" must be a positive number');a=m}}):i.defaultMaxListeners=a,i.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||isNaN(m))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=m,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(m){var v,x,_,y,k,A,M=m==="error";if(A=this._events)M=M&&A.error==null;else if(!M)return!1;if(M){if(arguments.length>1&&(v=arguments[1]),v instanceof Error)throw v;var P=new Error('Unhandled "error" event. ('+v+")");throw P.context=v,P}if(!(x=A[m]))return!1;var R=typeof x=="function";switch(_=arguments.length){case 1:(function(L,N,I){if(N)L.call(I);else for(var d=L.length,g=b(L,d),w=0;w<d;++w)g[w].call(I)})(x,R,this);break;case 2:(function(L,N,I,d){if(N)L.call(I,d);else for(var g=L.length,w=b(L,g),D=0;D<g;++D)w[D].call(I,d)})(x,R,this,arguments[1]);break;case 3:(function(L,N,I,d,g){if(N)L.call(I,d,g);else for(var w=L.length,D=b(L,w),S=0;S<w;++S)D[S].call(I,d,g)})(x,R,this,arguments[1],arguments[2]);break;case 4:(function(L,N,I,d,g,w){if(N)L.call(I,d,g,w);else for(var D=L.length,S=b(L,D),E=0;E<D;++E)S[E].call(I,d,g,w)})(x,R,this,arguments[1],arguments[2],arguments[3]);break;default:for(y=new Array(_-1),k=1;k<_;k++)y[k-1]=arguments[k];(function(L,N,I,d){if(N)L.apply(I,d);else for(var g=L.length,w=b(L,g),D=0;D<g;++D)w[D].apply(I,d)})(x,R,this,y)}return!0},i.prototype.addListener=function(m,v){return u(this,m,v,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(m,v){return u(this,m,v,!0)},i.prototype.once=function(m,v){if(typeof v!="function")throw new TypeError('"listener" argument must be a function');return this.on(m,l(this,m,v)),this},i.prototype.prependOnceListener=function(m,v){if(typeof v!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(m,l(this,m,v)),this},i.prototype.removeListener=function(m,v){var x,_,y,k,A;if(typeof v!="function")throw new TypeError('"listener" argument must be a function');if(!(_=this._events))return this;if(!(x=_[m]))return this;if(x===v||x.listener===v)--this._eventsCount==0?this._events=e(null):(delete _[m],_.removeListener&&this.emit("removeListener",m,x.listener||v));else if(typeof x!="function"){for(y=-1,k=x.length-1;k>=0;k--)if(x[k]===v||x[k].listener===v){A=x[k].listener,y=k;break}if(y<0)return this;y===0?x.shift():function(M,P){for(var R=P,L=R+1,N=M.length;L<N;R+=1,L+=1)M[R]=M[L];M.pop()}(x,y),x.length===1&&(_[m]=x[0]),_.removeListener&&this.emit("removeListener",m,A||v)}return this},i.prototype.removeAllListeners=function(m){var v,x,_;if(!(x=this._events))return this;if(!x.removeListener)return arguments.length===0?(this._events=e(null),this._eventsCount=0):x[m]&&(--this._eventsCount==0?this._events=e(null):delete x[m]),this;if(arguments.length===0){var y,k=r(x);for(_=0;_<k.length;++_)(y=k[_])!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=e(null),this._eventsCount=0,this}if(typeof(v=x[m])=="function")this.removeListener(m,v);else if(v)for(_=v.length-1;_>=0;_--)this.removeListener(m,v[_]);return this},i.prototype.listeners=function(m){return h(this,m,!0)},i.prototype.rawListeners=function(m){return h(this,m,!1)},i.listenerCount=function(m,v){return typeof m.listenerCount=="function"?m.listenerCount(v):p.call(m,v)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},5809:t=>{t.exports=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]===void 0&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}},6080:(t,e,r)=>{const s=r(5809);t.exports=class{constructor(i){this.hwm=i||16,this.head=new s(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(i){if(this.length++,!this.head.push(i)){const n=this.head;this.head=n.next=new s(2*this.head.buffer.length),this.head.push(i)}}shift(){this.length!==0&&this.length--;const i=this.tail.shift();if(i===void 0&&this.tail.next){const n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return i}peek(){const i=this.tail.peek();return i===void 0&&this.tail.next?this.tail.next.peek():i}isEmpty(){return this.length===0}}},3468:()=>{typeof ReadableStream<"u"&&(ReadableStream.prototype[Symbol.asyncIterator]||(ReadableStream.prototype[Symbol.asyncIterator]=function({preventCancel:t}={}){const e=this.getReader(),r=this;let s=e.read();return{next(){const i=s;return s=e.read(),i},return:async i=>(await s,e.releaseLock(),t||r.cancel(),{done:!0,value:i}),async throw(i){throw await this.return(),i},[Symbol.asyncIterator](){return this}}}),ReadableStream.prototype.getIterator||(ReadableStream.prototype.getIterator=function({preventCancel:t}={}){return this[Symbol.asyncIterator]({preventCancel:t})}))},3714:(t,e,r)=>{const s=r(9596);t.exports=class{constructor(i){if(this.store=i,this.chunkLength=i.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(i,n,a=()=>{}){this.mem[i]=n,this.store.put(i,n,o=>{this.mem[i]=null,a(o)})}get(i,n,a=()=>{}){if(typeof n=="function")return this.get(i,null,n);let o=this.mem[i];if(!o)return this.store.get(i,n,a);n||(n={});const c=n.offset||0,u=n.length||o.length-c;c===0&&u===o.length||(o=o.slice(c,u+c)),s(()=>a(null,o))}close(i=()=>{}){this.store.close(i)}destroy(i=()=>{}){this.store.destroy(i)}}},6698:t=>{typeof Object.create=="function"?t.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,r){if(r){e.super_=r;var s=function(){};s.prototype=r.prototype,e.prototype=new s,e.prototype.constructor=e}}},405:t=>{t.exports=async function*(e){for(let r of e)typeof r=="function"&&(r=r()),yield*r}},9439:(t,e,r)=>{e.RateLimiter=r(3065),e.TokenBucket=r(5472)},3085:(t,e,r)=>{var s=r(717);t.exports=function(){if(s!==void 0&&s.hrtime){var i=s.hrtime(),n=i[0],a=i[1];return 1e3*n+Math.floor(a/1e6)}return new Date().getTime()}},3065:(t,e,r)=>{var s=r(717),i=r(5472),n=r(3085),a=function(o,c,u){this.tokenBucket=new i(o,o,c,null),this.tokenBucket.content=o,this.curIntervalStart=n(),this.tokensThisInterval=0,this.fireImmediately=u};a.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(o,c){if(o>this.tokenBucket.bucketSize)return s.nextTick(c.bind(null,"Requested tokens "+o+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var u=this,f=n();if((f<this.curIntervalStart||f-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=f,this.tokensThisInterval=0),o>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)s.nextTick(c.bind(null,null,-1));else{var l=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-f);setTimeout(function(){u.tokenBucket.removeTokens(o,h)},l)}return!1}return this.tokenBucket.removeTokens(o,h);function h(p,b){if(p)return c(p,null);u.tokensThisInterval+=o,c(null,b)}},tryRemoveTokens:function(o){if(o>this.tokenBucket.bucketSize)return!1;var c=n();if((c<this.curIntervalStart||c-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=c,this.tokensThisInterval=0),o>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var u=this.tokenBucket.tryRemoveTokens(o);return u&&(this.tokensThisInterval+=o),u},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},t.exports=a},5472:(t,e,r)=>{var s=r(717),i=function(n,a,o,c){if(this.bucketSize=n,this.tokensPerInterval=a,typeof o=="string")switch(o){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+o)}else this.interval=o;this.parentBucket=c,this.content=0,this.lastDrip=+new Date};i.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(n,a){var o=this;return this.bucketSize?n>this.bucketSize?(s.nextTick(a.bind(null,"Requested tokens "+n+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),n>this.content?c():this.parentBucket?this.parentBucket.removeTokens(n,function(u,f){return u?a(u,null):n>o.content?c():(o.content-=n,void a(null,Math.min(f,o.content)))}):(this.content-=n,s.nextTick(a.bind(null,null,this.content)),!0)):(s.nextTick(a.bind(null,null,n,Number.POSITIVE_INFINITY)),!0);function c(){var u=Math.ceil((n-o.content)*(o.interval/o.tokensPerInterval));return setTimeout(function(){o.removeTokens(n,a)},u),!1}},tryRemoveTokens:function(n){return!this.bucketSize||!(n>this.bucketSize)&&(this.drip(),!(n>this.content)&&!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(n))&&(this.content-=n,!0))},drip:function(){if(this.tokensPerInterval){var n=+new Date,a=Math.max(n-this.lastDrip,0);this.lastDrip=n;var o=a*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+o,this.bucketSize)}else this.content=this.bucketSize}},t.exports=i},8454:(t,e,r)=>{var s=r(7007),i=r(6698);function n(a){if(!(this instanceof n))return new n(a);typeof a=="number"&&(a={max:a}),a||(a={}),s.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=a.max||1e3,this.maxAge=a.maxAge||0}t.exports=n,i(n,s.EventEmitter),Object.defineProperty(n.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),n.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},n.prototype.remove=function(a){if(typeof a!="string"&&(a=""+a),this.cache.hasOwnProperty(a)){var o=this.cache[a];return delete this.cache[a],this._unlink(a,o.prev,o.next),o.value}},n.prototype._unlink=function(a,o,c){this.length--,this.length===0?this.head=this.tail=null:this.head===a?(this.head=o,this.cache[this.head].next=null):this.tail===a?(this.tail=c,this.cache[this.tail].prev=null):(this.cache[o].next=c,this.cache[c].prev=o)},n.prototype.peek=function(a){if(this.cache.hasOwnProperty(a)){var o=this.cache[a];if(this._checkAge(a,o))return o.value}},n.prototype.set=function(a,o){var c;if(typeof a!="string"&&(a=""+a),this.cache.hasOwnProperty(a)){if((c=this.cache[a]).value=o,this.maxAge&&(c.modified=Date.now()),a===this.head)return o;this._unlink(a,c.prev,c.next)}else c={value:o,modified:0,next:null,prev:null},this.maxAge&&(c.modified=Date.now()),this.cache[a]=c,this.length===this.max&&this.evict();return this.length++,c.next=null,c.prev=this.head,this.head&&(this.cache[this.head].next=a),this.head=a,this.tail||(this.tail=a),o},n.prototype._checkAge=function(a,o){return!(this.maxAge&&Date.now()-o.modified>this.maxAge)||(this.remove(a),this.emit("evict",{key:a,value:o.value}),!1)},n.prototype.get=function(a){if(typeof a!="string"&&(a=""+a),this.cache.hasOwnProperty(a)){var o=this.cache[a];if(this._checkAge(a,o))return this.head!==a&&(a===this.tail?(this.tail=o.next,this.cache[this.tail].prev=null):this.cache[o.prev].next=o.next,this.cache[o.next].prev=o.prev,this.cache[this.head].next=a,o.prev=this.head,o.next=null,this.head=a),o.value}},n.prototype.evict=function(){if(this.tail){var a=this.tail,o=this.remove(this.tail);this.emit("evict",{key:a,value:o})}}},4862:(t,e,r)=>{t.exports=i;const s=r(9596);function i(n,a){if(!(this instanceof i))return new i(n,a);if(a||(a={}),this.chunkLength=Number(n),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(a.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}i.prototype.put=function(n,a,o=()=>{}){if(this.closed)return s(()=>o(new Error("Storage is closed")));const c=n===this.lastChunkIndex;return c&&a.length!==this.lastChunkLength?s(()=>o(new Error("Last chunk length must be "+this.lastChunkLength))):c||a.length===this.chunkLength?(this.chunks[n]=a,void s(()=>o(null))):s(()=>o(new Error("Chunk length must be "+this.chunkLength)))},i.prototype.get=function(n,a,o=()=>{}){if(typeof a=="function")return this.get(n,null,a);if(this.closed)return s(()=>o(new Error("Storage is closed")));let c=this.chunks[n];if(!c){const l=new Error("Chunk not found");return l.notFound=!0,s(()=>o(l))}a||(a={});const u=a.offset||0,f=a.length||c.length-u;u===0&&f===c.length||(c=c.slice(u,f+u)),s(()=>o(null,c))},i.prototype.close=i.prototype.destroy=function(n=()=>{}){if(this.closed)return s(()=>n(new Error("Storage is closed")));this.closed=!0,this.chunks=null,s(()=>n(null))}},8673:t=>{function e(){this._types=Object.create(null),this._extensions=Object.create(null);for(let r=0;r<arguments.length;r++)this.define(arguments[r]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}e.prototype.define=function(r,s){for(let i in r){let n=r[i].map(function(a){return a.toLowerCase()});i=i.toLowerCase();for(let a=0;a<n.length;a++){const o=n[a];if(o[0]!=="*"){if(!s&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+i+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+i+'".');this._types[o]=i}}if(s||!this._extensions[i]){const a=n[0];this._extensions[i]=a[0]!=="*"?a:a.substr(1)}}},e.prototype.getType=function(r){let s=(r=String(r)).replace(/^.*[/\\]/,"").toLowerCase(),i=s.replace(/^.*\./,"").toLowerCase(),n=s.length<r.length;return(i.length<s.length-1||!n)&&this._types[i]||null},e.prototype.getExtension=function(r){return(r=/^\s*([^;\s]*)/.test(r)&&RegExp.$1)&&this._extensions[r.toLowerCase()]||null},t.exports=e},1133:(t,e,r)=>{let s=r(8673);t.exports=new s(r(8446))},8446:t=>{t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},6585:t=>{var e=1e3,r=60*e,s=60*r,i=24*s,n=7*i,a=365.25*i;function o(c,u,f,l){var h=u>=1.5*f;return Math.round(c/f)+" "+l+(h?"s":"")}t.exports=function(c,u){u=u||{};var f=typeof c;if(f==="string"&&c.length>0)return function(l){if(!((l=String(l)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(h){var p=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return p*a;case"weeks":case"week":case"w":return p*n;case"days":case"day":case"d":return p*i;case"hours":case"hour":case"hrs":case"hr":case"h":return p*s;case"minutes":case"minute":case"mins":case"min":case"m":return p*r;case"seconds":case"second":case"secs":case"sec":case"s":return p*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}(c);if(f==="number"&&isFinite(c))return u.long?function(l){var h=Math.abs(l);return h>=i?o(l,h,i,"day"):h>=s?o(l,h,s,"hour"):h>=r?o(l,h,r,"minute"):h>=e?o(l,h,e,"second"):l+" ms"}(c):function(l){var h=Math.abs(l);return h>=i?Math.round(l/i)+"d":h>=s?Math.round(l/s)+"h":h>=r?Math.round(l/r)+"m":h>=e?Math.round(l/e)+"s":l+"ms"}(c);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(c))}},3519:(t,e,r)=>{var s=r(6587);function i(a){var o=function(){return o.called?o.value:(o.called=!0,o.value=a.apply(this,arguments))};return o.called=!1,o}function n(a){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=a.apply(this,arguments)},c=a.name||"Function wrapped with `once`";return o.onceError=c+" shouldn't be called more than once",o.called=!1,o}t.exports=s(i),t.exports.strict=s(n),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})})},8444:t=>{t.exports=function(e){return Math.max(16384,1<<Math.log2(e<1024?1:e/1024)+.5)}},815:(t,e,r)=>{var s,i=r(717),n=r(3519),a=r(6611);try{s=r(2376)}catch{}var o=function(){},c=/^v?\.0/.test(i.version),u=function(p){return typeof p=="function"},f=function(p,b,m,v){v=n(v);var x=!1;p.on("close",function(){x=!0}),a(p,{readable:b,writable:m},function(y){if(y)return v(y);x=!0,v()});var _=!1;return function(y){if(!x&&!_)return _=!0,function(k){return!!c&&!!s&&(k instanceof(s.ReadStream||o)||k instanceof(s.WriteStream||o))&&u(k.close)}(p)?p.close(o):function(k){return k.setHeader&&u(k.abort)}(p)?p.abort():u(p.destroy)?p.destroy():void v(y||new Error("stream was destroyed"))}},l=function(p){p()},h=function(p,b){return p.pipe(b)};t.exports=function(){var p,b=Array.prototype.slice.call(arguments),m=u(b[b.length-1]||o)&&b.pop()||o;if(Array.isArray(b[0])&&(b=b[0]),b.length<2)throw new Error("pump requires two streams per minimum");var v=b.map(function(x,_){var y=_<b.length-1;return f(x,y,_>0,function(k){p||(p=k),k&&v.forEach(l),y||(v.forEach(l),m(p))})});return b.reduce(h)}},9596:t=>{let e;t.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(e||(e=Promise.resolve())).then(r).catch(s=>setTimeout(()=>{throw s},0))},7373:t=>{t.exports=function(e){var r=0;return function(){if(r===e.length)return null;var s=e.length-r,i=Math.random()*s|0,n=e[r+i],a=e[r];return e[r]=n,e[r+i]=a,r++,n}}},2878:t=>{function e(n,a){return{start:n.start,end:n.end,index:a}}function r(n){return{start:n.start,end:n.end}}function s(n,a){return n.index-a.index}function i(n,a){return n.start-a.start}t.exports=function(n,a,o){if(typeof a!="string")throw new TypeError("argument str must be a string");var c=a.indexOf("=");if(c===-1)return-2;var u=a.slice(c+1).split(","),f=[];f.type=a.slice(0,c);for(var l=0;l<u.length;l++){var h=u[l].split("-"),p=parseInt(h[0],10),b=parseInt(h[1],10);isNaN(p)?(p=n-b,b=n-1):isNaN(b)&&(b=n-1),b>n-1&&(b=n-1),isNaN(p)||isNaN(b)||p>b||p<0||f.push({start:p,end:b})}return f.length<1?-1:o&&o.combine?function(m){for(var v=m.map(e).sort(i),x=0,_=1;_<v.length;_++){var y=v[_],k=v[x];y.start>k.end+1?v[++x]=y:y.end>k.end&&(k.end=y.end,k.index=Math.min(k.index,y.index))}v.length=x+1;var A=v.sort(s).map(r);return A.type=m.type,A}(f):f}},8727:t=>{function e(u){return parseInt(u,10)===u}function r(u){function f(h){if(h===void 0){h=new Array(u);for(var p=0;p<u;p++)h[p]=Math.floor(Math.random()*u)}else if(typeof h=="string")h=(h=""+h).split("").map(function(y){return y.charCodeAt(0)%u});else{if(!Array.isArray(h))throw new TypeError("invalid seed key specified");if(!h.every(function(y){return typeof y=="number"&&y===(0|y)}))throw new TypeError("invalid seed key specified: not array of integers")}for(var b=h.length,m=function(){for(var y=new Array(u),k=0;k<u;k++)y[k]=k;return y}(),v=0,x=0;x<u;x++){v=(v+m[x]+h[x%b])%u;var _=m[x];m[x]=m[v],m[v]=_}return m}function l(h){this.s=f(h),this.i=0,this.j=0}return l.prototype.randomNative=function(){this.i=(this.i+1)%u,this.j=(this.j+this.s[this.i])%u;var h=this.s[this.i];return this.s[this.i]=this.s[this.j],this.s[this.j]=h,this.s[(this.s[this.i]+this.s[this.j])%u]},l.prototype.randomUInt32=function(){return 256*(256*(256*this.randomByte()+this.randomByte())+this.randomByte())+this.randomByte()},l.prototype.randomFloat=function(){return this.randomUInt32()/4294967296},l.prototype.random=function(){var h,p;if(arguments.length===1)h=0,p=arguments[0];else{if(arguments.length!==2)throw new TypeError("random takes one or two integer arguments");h=arguments[0],p=arguments[1]}if(!e(h)||!e(p))throw new TypeError("random takes one or two integer arguments");return h+this.randomUInt32()%(p-h+1)},l.prototype.currentState=function(){return{i:this.i,j:this.j,s:this.s.slice()}},l.prototype.setState=function(h){var p=h.s,b=h.i,m=h.j;if(!(b===(0|b)&&0<=b&&b<u))throw new Error("state.i should be integer [0, "+(u-1)+"]");if(!(m===(0|m)&&0<=m&&m<u))throw new Error("state.j should be integer [0, "+(u-1)+"]");if(!Array.isArray(p)||p.length!==u)throw new Error("state should be array of length "+u);for(var v=0;v<u;v++)if(p.indexOf(v)===-1)throw new Error("state should be permutation of 0.."+(u-1)+": "+v+" is missing");this.i=b,this.j=m,this.s=p.slice()},l}var s=r(256);s.prototype.randomByte=s.prototype.randomNative;var i=r(16);i.prototype.randomByte=function(){return 16*this.randomNative()+this.randomNative()};var n=97,a=48;function o(u){return u<10?String.fromCharCode(a+u):String.fromCharCode(n+u-10)}function c(u){return parseInt(u,16)}i.prototype.currentStateString=function(){var u=this.currentState();return o(u.i)+o(u.j)+u.s.map(o).join("")},i.prototype.setStateString=function(u){if(!u.match(/^[0-9a-f]{18}$/))throw new TypeError("RC4small stateString should be 18 hex character string");var f=c(u[0]),l=c(u[1]),h=u.split("").slice(2).map(c);this.setState({i:f,j:l,s:h})},s.RC4small=i,t.exports=s},5372:(t,e,r)=>{t.exports=function(i,n,a){if(typeof n!="number")throw new Error("second argument must be a Number");let o,c,u,f,l,h,p=!0;Array.isArray(i)?(o=[],u=c=i.length):(f=Object.keys(i),o={},u=c=f.length);function b(v){function x(){a&&a(v,o),a=null}p?s(x):x()}function m(v,x,_){if(o[v]=_,x&&(l=!0),--u==0||x)b(x);else if(!l&&h<c){let y;f?(y=f[h],h+=1,i[y](function(k,A){m(y,k,A)})):(y=h,h+=1,i[y](function(k,A){m(y,k,A)}))}}h=n,u?f?f.some(function(v,x){return i[v](function(_,y){m(v,_,y)}),x===n-1}):i.some(function(v,x){return v(function(_,y){m(x,_,y)}),x===n-1}):b(null),p=!1};const s=r(9596)},8190:(t,e,r)=>{t.exports=function(i,n){let a,o,c,u=!0;Array.isArray(i)?(a=[],o=i.length):(c=Object.keys(i),a={},o=c.length);function f(h){function p(){n&&n(h,a),n=null}u?s(p):p()}function l(h,p,b){a[h]=b,(--o==0||p)&&f(p)}o?c?c.forEach(function(h){i[h](function(p,b){l(h,p,b)})}):i.forEach(function(h,p){h(function(b,m){l(p,b,m)})}):f(null),u=!1};const s=r(9596)},7541:(t,e,r)=>{const s=r(8765),i=r(8499);t.exports={Throttle:s,ThrottleGroup:i}},8499:(t,e,r)=>{const{TokenBucket:s}=r(9439),i=r(8765);t.exports=class{constructor(n={}){if(typeof n!="object")throw new Error("Options must be an object");this.throttles=[],this.setEnabled(n.enabled),this.setRate(n.rate,n.chunksize)}getEnabled(){return this._enabled}getRate(){return this.bucket.tokensPerInterval}getChunksize(){return this.chunksize}setEnabled(n=!0){if(typeof n!="boolean")throw new Error("Enabled must be a boolean");this._enabled=n;for(const a of this.throttles)a.setEnabled(n)}setRate(n,a=null){if(!Number.isInteger(n)||n<0)throw new Error("Rate must be an integer bigger than zero");if(n=parseInt(n),a&&(typeof a!="number"||a<=0))throw new Error("Chunksize must be bigger than zero");if(a=a||Math.max(parseInt(n/10),1),a=parseInt(a),n>0&&a>n)throw new Error("Chunk size must be smaller than rate");this.bucket||(this.bucket=new s(n,n,"second",null)),this.bucket.bucketSize=n,this.bucket.tokensPerInterval=n,this.chunksize=a}setChunksize(n){if(!Number.isInteger(n)||n<=0)throw new Error("Chunk size must be an integer bigger than zero");const a=this.getRate();if(n=parseInt(n),a>0&&n>a)throw new Error("Chunk size must be smaller than rate");this.chunksize=n}throttle(n={}){if(typeof n!="object")throw new Error("Options must be an object");return new i({...n,group:this})}destroy(){for(const n of this.throttles)n.destroy();this.throttles=[]}_addThrottle(n){if(!(n instanceof i))throw new Error("Throttle must be an instance of Throttle");this.throttles.push(n)}_removeThrottle(n){const a=this.throttles.indexOf(n);a>-1&&this.throttles.splice(a,1)}}},8765:(t,e,r)=>{const{EventEmitter:s}=r(7007),{Transform:i}=r(8179),{wait:n}=r(2072);t.exports=class extends i{constructor(o={}){if(super(),typeof o!="object")throw new Error("Options must be an object");const c=Object.assign({},o);if(c.group&&!(c.group instanceof a))throw new Error("Group must be an instanece of ThrottleGroup");c.group||(c.group=new a(c)),this._setEnabled(c.enabled||c.group.enabled),this._group=c.group,this._emitter=new s,this._destroyed=!1,this._group._addThrottle(this)}getEnabled(){return this._enabled}getGroup(){return this._group}_setEnabled(o=!0){if(typeof o!="boolean")throw new Error("Enabled must be a boolean");this._enabled=o}setEnabled(o){this._setEnabled(o),this._enabled?this._emitter.emit("enabled"):this._emitter.emit("disabled")}_transform(o,c){this._processChunk(o,c)}async _waitForTokens(o){return new Promise((c,u)=>{let f=!1;const l=this;function h(p){if(l._emitter.removeListener("disabled",h),l._emitter.removeListener("destroyed",h),!f){if(f=!0,p)return u(p);c()}}this._emitter.once("disabled",h),this._emitter.once("destroyed",h),this._group.bucket.removeTokens(o,h)})}_areBothEnabled(){return this._enabled&&this._group.getEnabled()}async _processChunk(o,c){if(!this._areBothEnabled())return c(null,o);let u=0,f=this._group.getChunksize(),l=o.slice(u,u+f);for(;l.length>0;){if(this._areBothEnabled())try{for(;this._group.getRate()===0&&!this._destroyed&&this._areBothEnabled();)if(await n(1e3),this._destroyed)return;if(this._areBothEnabled()&&!this._group.bucket.tryRemoveTokens(l.length)&&(await this._waitForTokens(l.length),this._destroyed))return}catch(h){return c(h)}this.push(l),u+=f,f=this._areBothEnabled()?this._group.getChunksize():o.length-u,l=o.slice(u,u+f)}return c()}destroy(...o){this._group._removeThrottle(this),this._destroyed=!0,this._emitter.emit("destroyed"),super.destroy(...o)}};const a=r(8499)},2072:t=>{t.exports={wait:function(e){return new Promise(r=>setTimeout(r,e))}}},8179:(t,e,r)=>{const{EventEmitter:s}=r(7007),i=new Error("Stream was destroyed"),n=new Error("Premature close"),a=r(6080),o=r(5335),c=536870911,u=1^c,f=2^c,l=32,h=64,p=128,b=256,m=1024,v=2048,x=4096,_=8192,y=16384,k=32768,A=131072,M=131328,P=16^c,R=536805375,L=768^c,N=536838143,I=536739839,d=1<<18,g=2<<18,w=4<<18,D=8<<18,S=16<<18,E=32<<18,O=64<<18,T=128<<18,C=256<<18,F=512<<18,j=1024<<18,W=535822335,V=503316479,Z=268435455,ie=262160,pe=536608751,le=8404992,se=14,he=15,Ce=8405006,ye=33587200,Ee=33587215,B=2359296,K=270794767,G=Symbol.asyncIterator||Symbol("asyncIterator");class U{constructor(z,{highWaterMark:X=16384,map:ge=null,mapWritable:be,byteLength:ve,byteLengthWritable:He}={}){this.stream=z,this.queue=new a,this.highWaterMark=X,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=He||ve||mr,this.map=be||ge,this.afterWrite=ne.bind(this),this.afterUpdateNextTick=_e.bind(this)}get ended(){return!!(this.stream._duplexState&E)}push(z){return!(142606350&this.stream._duplexState)&&(this.map!==null&&(z=this.map(z)),this.buffered+=this.byteLength(z),this.queue.push(z),this.buffered<this.highWaterMark?(this.stream._duplexState|=D,!0):(this.stream._duplexState|=6291456,!1))}shift(){const z=this.queue.shift();return this.buffered-=this.byteLength(z),this.buffered===0&&(this.stream._duplexState&=534773759),z}end(z){typeof z=="function"?this.stream.once("finish",z):z!=null&&this.push(z),this.stream._duplexState=(this.stream._duplexState|F)&W}autoBatch(z,X){const ge=[],be=this.stream;for(ge.push(z);(be._duplexState&K)===B;)ge.push(be._writableState.shift());if(be._duplexState&he)return X(null);be._writev(ge,X)}update(){const z=this.stream;z._duplexState|=g;do{for(;(z._duplexState&K)===D;){const X=this.shift();z._duplexState|=67371008,z._write(X,this.afterWrite)}1310720&z._duplexState||this.updateNonPrimary()}while(this.continueUpdate()===!0);z._duplexState&=536346623}updateNonPrimary(){const z=this.stream;if((144965647&z._duplexState)===F)return z._duplexState=z._duplexState|d,void z._final(H.bind(this));(z._duplexState&se)!=4?(z._duplexState&Ee)==1&&(z._duplexState=(z._duplexState|ie)&u,z._open(me.bind(this))):z._duplexState&ye||(z._duplexState|=ie,z._destroy(re.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&T)&&(this.stream._duplexState&=V,!0)}updateCallback(){(35127311&this.stream._duplexState)===w?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&T||(this.stream._duplexState|=T,this.stream._duplexState&g||queueMicrotask(this.afterUpdateNextTick))}}class q{constructor(z,{highWaterMark:X=16384,map:ge=null,mapReadable:be,byteLength:ve,byteLengthReadable:He}={}){this.stream=z,this.queue=new a,this.highWaterMark=X===0?1:X,this.buffered=0,this.readAhead=X>0,this.error=null,this.pipeline=null,this.byteLength=He||ve||mr,this.map=be||ge,this.pipeTo=null,this.afterRead=te.bind(this),this.afterUpdateNextTick=de.bind(this)}get ended(){return!!(this.stream._duplexState&y)}pipe(z,X){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof X!="function"&&(X=null),this.stream._duplexState|=512,this.pipeTo=z,this.pipeline=new ee(this.stream,z,X),X&&this.stream.on("error",Le),ze(z))z._writableState.pipeline=this.pipeline,X&&z.on("error",Le),z.on("finish",this.pipeline.finished.bind(this.pipeline));else{const ge=this.pipeline.done.bind(this.pipeline,z),be=this.pipeline.done.bind(this.pipeline,z,null);z.on("error",ge),z.on("close",be),z.on("finish",this.pipeline.finished.bind(this.pipeline))}z.on("drain",J.bind(this)),this.stream.emit("piping",z),z.emit("pipe",this.stream)}push(z){const X=this.stream;return z===null?(this.highWaterMark=0,X._duplexState=536805311&X._duplexState|1024,!1):this.map!==null&&(z=this.map(z))===null?(X._duplexState&=R,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(z),this.queue.push(z),X._duplexState=(X._duplexState|p)&R,this.buffered<this.highWaterMark)}shift(){const z=this.queue.shift();return this.buffered-=this.byteLength(z),this.buffered===0&&(this.stream._duplexState&=536862591),z}unshift(z){const X=[this.map!==null?this.map(z):z];for(;this.buffered>0;)X.push(this.shift());for(let ge=0;ge<X.length-1;ge++){const be=X[ge];this.buffered+=this.byteLength(be),this.queue.push(be)}this.push(X[X.length-1])}read(){const z=this.stream;if((16527&z._duplexState)===p){const X=this.shift();return this.pipeTo!==null&&this.pipeTo.write(X)===!1&&(z._duplexState&=L),z._duplexState&v&&z.emit("data",X),X}return this.readAhead===!1&&(z._duplexState|=A,this.updateNextTick()),null}drain(){const z=this.stream;for(;(16527&z._duplexState)===p&&768&z._duplexState;){const X=this.shift();this.pipeTo!==null&&this.pipeTo.write(X)===!1&&(z._duplexState&=L),z._duplexState&v&&z.emit("data",X)}}update(){const z=this.stream;z._duplexState|=l;do{for(this.drain();this.buffered<this.highWaterMark&&(214047&z._duplexState)===A;)z._duplexState|=65552,z._read(this.afterRead),this.drain();(12431&z._duplexState)==4224&&(z._duplexState|=_,z.emit("readable")),80&z._duplexState||this.updateNonPrimary()}while(this.continueUpdate()===!0);z._duplexState&=536870879}updateNonPrimary(){const z=this.stream;(1167&z._duplexState)===m&&(z._duplexState=536869887&z._duplexState|16384,z.emit("end"),(z._duplexState&Ce)===le&&(z._duplexState|=4),this.pipeTo!==null&&this.pipeTo.end()),(z._duplexState&se)!=4?(z._duplexState&Ee)==1&&(z._duplexState=(z._duplexState|ie)&u,z._open(me.bind(this))):z._duplexState&ye||(z._duplexState|=ie,z._destroy(re.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&k)&&(this.stream._duplexState&=N,!0)}updateCallback(){(32879&this.stream._duplexState)===h?this.update():this.updateNextTick()}updateNextTickIfOpen(){32769&this.stream._duplexState||(this.stream._duplexState|=k,this.stream._duplexState&l||queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){this.stream._duplexState&k||(this.stream._duplexState|=k,this.stream._duplexState&l||queueMicrotask(this.afterUpdateNextTick))}}class ${constructor(z){this.data=null,this.afterTransform=dt.bind(z),this.afterFinal=null}}class ee{constructor(z,X,ge){this.from=z,this.to=X,this.afterPipe=ge,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(z,X){X&&(this.error=X),z!==this.to||(this.to=null,this.from===null)?z!==this.from||(this.from=null,this.to===null)?(this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):z._duplexState&y||this.to.destroy(this.error||new Error("Readable stream closed before ending")):this.from._duplexState&y&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function J(){this.stream._duplexState|=512,this.updateCallback()}function H(oe){const z=this.stream;oe&&z.destroy(oe),z._duplexState&se||(z._duplexState|=E,z.emit("finish")),(z._duplexState&Ce)===le&&(z._duplexState|=4),z._duplexState&=402391039,z._duplexState&g?this.updateNextTick():this.update()}function re(oe){const z=this.stream;oe||this.error===i||(oe=this.error),oe&&z.emit("error",oe),z._duplexState|=8,z.emit("close");const X=z._readableState,ge=z._writableState;if(X!==null&&X.pipeline!==null&&X.pipeline.done(z,oe),ge!==null){for(;ge.drains!==null&&ge.drains.length>0;)ge.drains.shift().resolve(!1);ge.pipeline!==null&&ge.pipeline.done(z,oe)}}function ne(oe){const z=this.stream;oe&&z.destroy(oe),z._duplexState&=469499903,this.drains!==null&&function(X){for(let ge=0;ge<X.length;ge++)--X[ge].writes==0&&(X.shift().resolve(!0),ge--)}(this.drains),(6553615&z._duplexState)===S&&(z._duplexState&=532676607,(z._duplexState&O)===O&&z.emit("drain")),this.updateCallback()}function te(oe){oe&&this.stream.destroy(oe),this.stream._duplexState&=P,this.readAhead!==!1||this.stream._duplexState&b||(this.stream._duplexState&=I),this.updateCallback()}function de(){this.stream._duplexState&l||(this.stream._duplexState&=N,this.update())}function _e(){this.stream._duplexState&g||(this.stream._duplexState&=V,this.update())}function me(oe){const z=this.stream;oe&&z.destroy(oe),4&z._duplexState||(17423&z._duplexState||(z._duplexState|=h),142606351&z._duplexState||(z._duplexState|=w),z.emit("open")),z._duplexState&=pe,z._writableState!==null&&z._writableState.updateCallback(),z._readableState!==null&&z._readableState.updateCallback()}function dt(oe,z){z!=null&&this.push(z),this._writableState.afterWrite(oe)}function Ne(oe){this._readableState!==null&&(oe==="data"&&(this._duplexState|=133376,this._readableState.updateNextTick()),oe==="readable"&&(this._duplexState|=x,this._readableState.updateNextTick())),this._writableState!==null&&oe==="drain"&&(this._duplexState|=O,this._writableState.updateNextTick())}class Me extends s{constructor(z){super(),this._duplexState=0,this._readableState=null,this._writableState=null,z&&(z.open&&(this._open=z.open),z.destroy&&(this._destroy=z.destroy),z.predestroy&&(this._predestroy=z.predestroy),z.signal&&z.signal.addEventListener("abort",Ue.bind(this))),this.on("newListener",Ne)}_open(z){z(null)}_destroy(z){z(null)}_predestroy(){}get readable(){return this._readableState!==null||void 0}get writable(){return this._writableState!==null||void 0}get destroyed(){return!!(8&this._duplexState)}get destroying(){return!!(this._duplexState&se)}destroy(z){this._duplexState&se||(z||(z=i),this._duplexState=535822271&this._duplexState|4,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=z),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=z),this._duplexState|=2,this._predestroy(),this._duplexState&=f,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}class bt extends Me{constructor(z){super(z),this._duplexState|=8519681,this._readableState=new q(this,z),z&&(this._readableState.readAhead===!1&&(this._duplexState&=I),z.read&&(this._read=z.read),z.eagerOpen&&this._readableState.updateNextTick(),z.encoding&&this.setEncoding(z.encoding))}setEncoding(z){const X=new o(z),ge=this._readableState.map||Jr;return this._readableState.map=function(be){const ve=X.push(be);return ve===""&&(be.byteLength!==0||X.remaining>0)?null:ge(ve)},this}_read(z){z(null)}pipe(z,X){return this._readableState.updateNextTick(),this._readableState.pipe(z,X),z}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(z){return this._readableState.updateNextTickIfOpen(),this._readableState.push(z)}unshift(z){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(z)}resume(){return this._duplexState|=M,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?536739583:536870655,this}static _fromAsyncIterator(z,X){let ge;const be=new bt({...X,read(He){z.next().then(ve).then(He.bind(null,null)).catch(He)},predestroy(){ge=z.return()},destroy(He){if(!ge)return He(null);ge.then(He.bind(null,null)).catch(He)}});return be;function ve(He){He.done?be.push(null):be.push(He.value)}}static from(z,X){if(ze(ge=z)&&ge.readable)return z;var ge;if(z[G])return this._fromAsyncIterator(z[G](),X);Array.isArray(z)||(z=z===void 0?[]:[z]);let be=0;return new bt({...X,read(ve){this.push(be===z.length?null:z[be++]),ve(null)}})}static isBackpressured(z){return!!(17422&z._duplexState)||z._readableState.buffered>=z._readableState.highWaterMark}static isPaused(z){return!(z._duplexState&b)}[G](){const z=this;let X=null,ge=null,be=null;return this.on("error",Te=>{X=Te}),this.on("readable",function(){ge!==null&&ve(z.read())}),this.on("close",function(){ge!==null&&ve(null)}),{[G](){return this},next:()=>new Promise(function(Te,je){ge=Te,be=je;const We=z.read();We!==null?ve(We):8&z._duplexState&&ve(null)}),return:()=>He(null),throw:Te=>He(Te)};function ve(Te){be!==null&&(X?be(X):Te!==null||z._duplexState&y?ge({value:Te,done:Te===null}):be(i),be=ge=null)}function He(Te){return z.destroy(Te),new Promise((je,We)=>{if(8&z._duplexState)return je({value:void 0,done:!0});z.once("close",function(){Te?We(Te):je({value:void 0,done:!0})})})}}}class Ae extends Me{constructor(z){super(z),this._duplexState|=16385,this._writableState=new U(this,z),z&&(z.writev&&(this._writev=z.writev),z.write&&(this._write=z.write),z.final&&(this._final=z.final),z.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=j}uncork(){this._duplexState&=Z,this._writableState.updateNextTick()}_writev(z,X){X(null)}_write(z,X){this._writableState.autoBatch(z,X)}_final(z){z(null)}static isBackpressured(z){return!!(146800654&z._duplexState)}static drained(z){if(z.destroyed)return Promise.resolve(!1);const X=z._writableState;var ge;const be=((ge=z)._writev!==Ae.prototype._writev&&ge._writev!==Re.prototype._writev?Math.min(1,X.queue.length):X.queue.length)+(z._duplexState&C?1:0);return be===0?Promise.resolve(!0):(X.drains===null&&(X.drains=[]),new Promise(ve=>{X.drains.push({writes:be,resolve:ve})}))}write(z){return this._writableState.updateNextTick(),this._writableState.push(z)}end(z){return this._writableState.updateNextTick(),this._writableState.end(z),this}}class Re extends bt{constructor(z){super(z),this._duplexState=1|this._duplexState&A,this._writableState=new U(this,z),z&&(z.writev&&(this._writev=z.writev),z.write&&(this._write=z.write),z.final&&(this._final=z.final))}cork(){this._duplexState|=j}uncork(){this._duplexState&=Z,this._writableState.updateNextTick()}_writev(z,X){X(null)}_write(z,X){this._writableState.autoBatch(z,X)}_final(z){z(null)}write(z){return this._writableState.updateNextTick(),this._writableState.push(z)}end(z){return this._writableState.updateNextTick(),this._writableState.end(z),this}}class rr extends Re{constructor(z){super(z),this._transformState=new $(this),z&&(z.transform&&(this._transform=z.transform),z.flush&&(this._flush=z.flush))}_write(z,X){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=z:this._transform(z,this._transformState.afterTransform)}_read(z){if(this._transformState.data!==null){const X=this._transformState.data;this._transformState.data=null,z(null),this._transform(X,this._transformState.afterTransform)}else z(null)}destroy(z){super.destroy(z),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(z,X){X(null,z)}_flush(z){z(null)}_final(z){this._transformState.afterFinal=z,this._flush(Pe.bind(this))}}function Pe(oe,z){const X=this._transformState.afterFinal;if(oe)return X(oe);z!=null&&this.push(z),this.push(null),X(null)}function $e(oe,...z){const X=Array.isArray(oe)?[...oe,...z]:[oe,...z],ge=X.length&&typeof X[X.length-1]=="function"?X.pop():null;if(X.length<2)throw new Error("Pipeline requires at least 2 streams");let be=X[0],ve=null,He=null;for(let We=1;We<X.length;We++)ve=X[We],ze(be)?be.pipe(ve,je):(Te(be,!0,We>1,je),be.pipe(ve)),be=ve;if(ge){let We=!1;const Ve=ze(ve)||!(!ve._writableState||!ve._writableState.autoDestroy);ve.on("error",Ye=>{He===null&&(He=Ye)}),ve.on("finish",()=>{We=!0,Ve||ge(He)}),Ve&&ve.on("close",()=>ge(He||(We?null:n)))}return ve;function Te(We,Ve,Ye,Xr){We.on("error",Xr),We.on("close",function(){if(We._readableState&&!We._readableState.ended||Ye&&We._writableState&&!We._writableState.ended)return Xr(n)})}function je(We){if(We&&!He){He=We;for(const Ve of X)Ve.destroy(We)}}}function Jr(oe){return oe}function Ze(oe){return!!oe._readableState||!!oe._writableState}function ze(oe){return typeof oe._duplexState=="number"&&Ze(oe)}function mr(oe){return function(z){return typeof z=="object"&&z!==null&&typeof z.byteLength=="number"}(oe)?oe.byteLength:1024}function Le(){}function Ue(){this.destroy(new Error("Stream aborted."))}t.exports={pipeline:$e,pipelinePromise:function(...oe){return new Promise((z,X)=>$e(...oe,ge=>{if(ge)return X(ge);z()}))},isStream:Ze,isStreamx:ze,isEnded:function(oe){return!!oe._readableState&&oe._readableState.ended},isFinished:function(oe){return!!oe._writableState&&oe._writableState.ended},isDisturbed:function(oe){return!!(1&~oe._duplexState)||!!(oe._duplexState&ye)},getStreamError:function(oe,z={}){const X=oe._readableState&&oe._readableState.error||oe._writableState&&oe._writableState.error;return z.all||X!==i?X:null},Stream:Me,Writable:Ae,Readable:bt,Duplex:Re,Transform:rr,PassThrough:class extends rr{}}},5335:(t,e,r)=>{const s=r(3198),i=r(3198);t.exports=class{constructor(n="utf8"){switch(this.encoding=function(a){switch(a=a.toLowerCase()){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:throw new Error("Unknown encoding: "+a)}}(n),this.encoding){case"utf8":this.decoder=new i;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new s(this.encoding)}}get remaining(){return this.decoder.remaining}push(n){return typeof n=="string"?n:this.decoder.decode(n)}write(n){return this.push(n)}end(n){let a="";return n&&(a=this.push(n)),a+=this.decoder.flush(),a}}},3198:t=>{t.exports=class{constructor(e){this.decoder=new TextDecoder(e==="utf16le"?"utf16-le":e)}get remaining(){return-1}decode(e){return this.decoder.decode(e,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}},1035:t=>{function e(r){return(+Date.now()-r)/100&65535}t.exports=function(r){const s=+Date.now(),i=10*(r||5),n=[0];let a=1,o=e(s)-1&65535;return function(c){const u=e(s);let f=u-o&65535;for(f>i&&(f=i),o=u;f--;)a===i&&(a=0),n[a]=n[a===0?i-1:a-1],a++;c&&(n[a-1]+=c);const l=n[a-1],h=n.length<i?0:n[a===i?0:a];return n.length<10?l:10*(l-h)/n.length}}},1314:t=>{t.exports=function(e,r){if(!(r>=e.length||r<0)){var s=e.pop();if(r<e.length){var i=e[r];return e[r]=s,i}return s}}},6587:t=>{t.exports=function e(r,s){if(r&&s)return e(r)(s);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(n){i[n]=r[n]}),i;function i(){for(var n=new Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];var o=r.apply(this,n),c=n[n.length-1];return typeof o=="function"&&o!==c&&Object.keys(c).forEach(function(u){o[u]=c[u]}),o}}},4343:()=>{},6686:()=>{},4043:()=>{},7828:()=>{},6889:()=>{},8878:()=>{},2701:()=>{},7264:()=>{},1551:()=>{},826:()=>{},61:()=>{},7936:()=>{},2532:()=>{},2123:()=>{},3208:()=>{},2376:()=>{},3970:()=>{},2799:()=>{},8271:()=>{},3278:()=>{},6664:()=>{},1827:()=>{},6819:(t,e,r)=>{t.exports=r(8330).version},5658:(t,e,r)=>{r.r(e),r.d(e,{default:()=>v,enableSecure:()=>m});var s=r(7007),i=r(8179),n=r(1314),a=r(7833),o=r(6458);const c="tcpIncoming",u="tcpOutgoing",f="utpIncoming",l="utpOutgoing",h="webSeed",p=a("webtorrent:peer");let b=!1;const m=()=>{b=!0};class v extends s{constructor(_,y){super(),this.id=_,this.type=y,p("new %s Peer %s",y,_),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.source=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentPe1=!1,this.sentPe2=!1,this.sentPe3=!1,this.sentPe4=!1,this.sentHandshake=!1}onConnect(){if(this.destroyed)return;this.connected=!0,p("Peer %s connected",this.id),clearTimeout(this.connectTimeout);const _=this.conn;_.once("end",()=>{this.destroy()}),_.once("close",()=>{this.destroy()}),_.once("finish",()=>{this.destroy()}),_.once("error",k=>{this.destroy(k)});const y=this.wire=new o.A(this.type,this.retries,b);y.once("end",()=>{this.destroy()}),y.once("close",()=>{this.destroy()}),y.once("finish",()=>{this.destroy()}),y.once("error",k=>{this.destroy(k)}),y.once("pe1",()=>{this.onPe1()}),y.once("pe2",()=>{this.onPe2()}),y.once("pe3",()=>{this.onPe3()}),y.once("pe4",()=>{this.onPe4()}),y.once("handshake",(k,A)=>{this.onHandshake(k,A)}),this.startHandshakeTimeout(),this.setThrottlePipes(),this.swarm&&(this.type==="tcpOutgoing"?b&&this.retries===0&&!this.sentPe1?this.sendPe1():this.sentHandshake||this.handshake():this.type==="tcpIncoming"||this.sentHandshake||this.handshake())}sendPe1(){this.wire.sendPe1(),this.sentPe1=!0}onPe1(){this.sendPe2()}sendPe2(){this.wire.sendPe2(),this.sentPe2=!0}onPe2(){this.sendPe3()}sendPe3(){this.wire.sendPe3(this.swarm.infoHash),this.sentPe3=!0}onPe3(_){this.swarm&&(this.swarm.infoHashHash!==_&&this.destroy(new Error("unexpected crypto handshake info hash for this swarm")),this.sendPe4())}sendPe4(){this.wire.sendPe4(this.swarm.infoHash),this.sentPe4=!0}onPe4(){this.sentHandshake||this.handshake()}clearPipes(){this.conn.unpipe(),this.wire.unpipe()}setThrottlePipes(){const _=this;(0,i.pipeline)(this.conn,this.throttleGroups.down.throttle(),new i.Transform({transform(y,k){_.emit("download",y.length),_.destroyed||k(null,y)}}),this.wire,this.throttleGroups.up.throttle(),new i.Transform({transform(y,k){_.emit("upload",y.length),_.destroyed||k(null,y)}}),this.conn)}onHandshake(_,y){if(!this.swarm||this.destroyed)return;if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(_!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(y===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));p("Peer %s got handshake %s",this.id,_),clearTimeout(this.handshakeTimeout),this.retries=0;let k=this.addr;!k&&this.conn.remoteAddress&&this.conn.remotePort&&(k=`${this.conn.remoteAddress}:${this.conn.remotePort}`),this.swarm._onWire(this.wire,k),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}handshake(){const _={dht:!this.swarm.private&&!!this.swarm.client.dht,fast:!0};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,_),this.sentHandshake=!0}startConnectTimeout(){clearTimeout(this.connectTimeout);const _={webrtc:25e3,tcpOutgoing:5e3,utpOutgoing:5e3};this.connectTimeout=setTimeout(()=>{this.destroy(new Error("connect timeout"))},_[this.type]),this.connectTimeout.unref&&this.connectTimeout.unref()}startHandshakeTimeout(){clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(()=>{this.destroy(new Error("handshake timeout"))},25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}destroy(_){if(this.destroyed)return;this.destroyed=!0,this.connected=!1,p("destroy %s %s (error: %s)",this.type,this.id,_&&(_.message||_)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);const y=this.swarm,k=this.conn,A=this.wire;this.swarm=null,this.conn=null,this.wire=null,y&&A&&n(y.wires,y.wires.indexOf(A)),k&&(k.on("error",()=>{}),k.destroy()),A&&A.destroy(),y&&y.removePeer(this.id)}}v.TYPE_TCP_INCOMING=c,v.TYPE_TCP_OUTGOING=u,v.TYPE_UTP_INCOMING=f,v.TYPE_UTP_OUTGOING=l,v.TYPE_WEBRTC="webrtc",v.TYPE_WEBSEED=h,v.SOURCE_MANUAL="manual",v.SOURCE_TRACKER="tracker",v.SOURCE_DHT="dht",v.SOURCE_LSD="lsd",v.SOURCE_UT_PEX="ut_pex",v.createWebRTCPeer=(x,_,y,k=null)=>{const A=new v(x.id,"webrtc");if(A.conn=x,A.swarm=_,A.throttleGroups=y,A.source=k,A.conn.connected)A.onConnect();else{const M=()=>{A.conn.removeListener("connect",P),A.conn.removeListener("error",R)},P=()=>{M(),A.onConnect()},R=L=>{M(),A.destroy(L)};A.conn.once("connect",P),A.conn.once("error",R),A.startConnectTimeout()}return A},v.createTCPIncomingPeer=(x,_)=>v._createIncomingPeer(x,c,_),v.createUTPIncomingPeer=(x,_)=>v._createIncomingPeer(x,f,_),v.createTCPOutgoingPeer=(x,_,y,k)=>v._createOutgoingPeer(x,_,u,y,k),v.createUTPOutgoingPeer=(x,_,y,k)=>v._createOutgoingPeer(x,_,l,y,k),v._createIncomingPeer=(x,_,y)=>{const k=`${x.remoteAddress}:${x.remotePort}`,A=new v(k,_);return A.conn=x,A.addr=k,A.throttleGroups=y,A.onConnect(),A},v._createOutgoingPeer=(x,_,y,k,A=null)=>{const M=new v(x,y);return M.addr=x,M.swarm=_,M.throttleGroups=k,M.source=A,M},v.createWebSeedPeer=(x,_,y,k)=>{const A=new v(_,h);return A.swarm=y,A.conn=x,A.throttleGroups=k,A.onConnect(),A}},988:(t,e,r)=>{r.d(e,{A:()=>b});var s=r(9639);function i(m){const v=m<0?1:0;return m=Math.abs(Number(m||1)),Math.floor(Math.log10(m))+1+v}function n(m){return ArrayBuffer.isView(m)?"arraybufferview":Array.isArray(m)?"array":m instanceof Number?"number":m instanceof Boolean?"boolean":m instanceof Set?"set":m instanceof Map?"map":m instanceof String?"string":m instanceof ArrayBuffer?"arraybuffer":typeof m}function a(m,v,x){const _=[];let y=null;return a._encode(_,m),y=(0,s.xW)(_),a.bytes=y.length,ArrayBuffer.isView(v)?(v.set(y,x),v):y}a.bytes=-1,a._floatConversionDetected=!1,a._encode=function(m,v){if(v!=null)switch(n(v)){case"object":a.dict(m,v);break;case"map":a.dictMap(m,v);break;case"array":a.list(m,v);break;case"set":a.listSet(m,v);break;case"string":a.string(m,v);break;case"number":case"boolean":a.number(m,v);break;case"arraybufferview":a.buffer(m,new Uint8Array(v.buffer,v.byteOffset,v.byteLength));break;case"arraybuffer":a.buffer(m,new Uint8Array(v))}};const o=new Uint8Array([101]),c=new Uint8Array([100]),u=new Uint8Array([108]);a.buffer=function(m,v){m.push((0,s.L0)(v.length+":"),v)},a.string=function(m,v){m.push((0,s.L0)((0,s.L0)(v).byteLength+":"+v))},a.number=function(m,v){if(Number.isInteger(v))return m.push((0,s.L0)("i"+BigInt(v)+"e"));const x=2147483648,_=(v/x|0)*x+(v%x|0);m.push((0,s.L0)("i"+_+"e")),_===v||a._floatConversionDetected||(a._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+v+'":','Bencoding only defines support for integers, value was converted to "'+_+'"'),console.trace())},a.dict=function(m,v){m.push(c);let x,_=0;const y=Object.keys(v).sort(),k=y.length;for(;_<k;_++)x=y[_],v[x]!=null&&(a.string(m,x),a._encode(m,v[x]));m.push(o)},a.dictMap=function(m,v){m.push(c);const x=Array.from(v.keys()).sort();for(const _ of x)v.get(_)!=null&&(ArrayBuffer.isView(_)?a._encode(m,_):a.string(m,String(_)),a._encode(m,v.get(_)));m.push(o)},a.list=function(m,v){let x=0;const _=v.length;for(m.push(u);x<_;x++)v[x]!=null&&a._encode(m,v[x]);m.push(o)},a.listSet=function(m,v){m.push(u);for(const x of v)x!=null&&a._encode(m,x);m.push(o)};const f=a;function l(m,v,x){let _=0,y=1;for(let k=v;k<x;k++){const A=m[k];if(A<58&&A>=48)_=10*_+(A-48);else if(k!==v||A!==43){if(k!==v||A!==45){if(A===46)break;throw new Error("not a number: buffer["+k+"] = "+A)}y=-1}}return _*y}function h(m,v,x,_){return m==null||m.length===0?null:(typeof v!="number"&&_==null&&(_=v,v=void 0),typeof x!="number"&&_==null&&(_=x,x=void 0),h.position=0,h.encoding=_||null,h.data=ArrayBuffer.isView(m)?new Uint8Array(m.slice(v,x)):(0,s.L0)(m),h.bytes=h.data.length,h.next())}h.bytes=0,h.position=0,h.data=null,h.encoding=null,h.next=function(){switch(h.data[h.position]){case 100:return h.dictionary();case 108:return h.list();case 105:return h.integer();default:return h.buffer()}},h.find=function(m){let v=h.position;const x=h.data.length,_=h.data;for(;v<x;){if(_[v]===m)return v;v++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(m)+'" [0x'+m.toString(16)+"]")},h.dictionary=function(){h.position++;const m={};for(;h.data[h.position]!==101;){const v=h.buffer();let x=(0,s.dU)(v);x.includes("")&&(x=(0,s.V5)(v)),m[x]=h.next()}return h.position++,m},h.list=function(){h.position++;const m=[];for(;h.data[h.position]!==101;)m.push(h.next());return h.position++,m},h.integer=function(){const m=h.find(101),v=l(h.data,h.position+1,m);return h.position+=m+1-h.position,v},h.buffer=function(){let m=h.find(58);const v=l(h.data,h.position,m),x=++m+v;return h.position=x,h.encoding?(0,s.dU)(h.data.slice(m,x)):h.data.slice(m,x)};function p(m){if(m==null)return 0;const v=n(m);switch(v){case"arraybufferview":return function(x){const _=x.byteLength-x.byteOffset;return i(_)+1+_}(m);case"string":return function(x){const _=(0,s.L0)(x).byteLength;return i(_)+1+_}(m);case"array":case"set":return function(x){let _=2;for(const y of x)_+=p(y);return _}(m);case"number":return 1+i(Math.floor(m))+1;case"bigint":return 1+m.toString().length+1;case"object":return function(x){let _=2;const y=Object.keys(x);for(let k=0;k<y.length;k++){const A=(0,s.L0)(y[k]).byteLength;_+=i(A)+1+A,_+=p(x[y[k]])}return _}(m);case"map":return function(x){let _=2;for(const[y,k]of x){const A=(0,s.L0)(y).byteLength;_+=i(A)+1+A,_+=p(k)}return _}(m);default:throw new TypeError(`Unsupported value of type "${v}"`)}}const b={encode:f,decode:h,byteLength:p,encodingLength:p}},3033:(t,e,r)=>{function s(n){return(n>>3)+ +(n%8!=0)}r.d(e,{A:()=>i});class i{get length(){return this.buffer.length<<3}constructor(a=0,o){const c=o==null?void 0:o.grow;this.grow=c?Number.isFinite(c)?s(c):c:0,this.buffer=typeof a=="number"?new Uint8Array(s(a)):a}get(a){const o=a>>3;return o<this.buffer.length&&!!(this.buffer[o]&128>>a%8)}set(a,o=!0){const c=a>>3;if(o){if(c>=this.buffer.length){const u=Math.max(c+1,Math.min(2*this.buffer.length,this.grow));if(u<=this.grow){const f=new Uint8Array(u);f.set(this.buffer),this.buffer=f}}this.buffer[c]|=128>>a%8}else c<this.buffer.length&&(this.buffer[c]&=~(128>>a%8))}setAll(a,o=0){const c=Math.min(s(o+a.length),this.grow);if(this.buffer.length<c){const l=new Uint8Array(c);l.set(this.buffer),this.buffer=l}let u=o>>3,f=128>>o%8;for(let l=0;l<a.length;l++)if(a[l]?this.buffer[u]|=f:this.buffer[u]&=~f,f===1){if(u+=1,u>=this.buffer.length)break;f=128}else f>>=1}forEach(a,o=0,c=8*this.buffer.length){let u=o>>3,f=128>>o%8;for(let l=o;l<c;l++)a(!!(this.buffer[u]&f),l),f===1?(u+=1,f=128):f>>=1}isEmpty(){for(let a=0;a<this.buffer.length;a++)if(this.buffer[a]!==0)return!1;return!0}}},6458:(t,e,r)=>{r.d(e,{A:()=>w});var s=r(988),i=r(3033),n=r(7264),a=r(7833),o=r(8727),c=r(8179),u=r(9639),f=r(1035),l=r(1314);const h=a("bittorrent-protocol"),p=(0,u.L0)("BitTorrent protocol"),b=new Uint8Array([0,0,0,0]),m=new Uint8Array([0,0,0,1,0]),v=new Uint8Array([0,0,0,1,1]),x=new Uint8Array([0,0,0,1,2]),_=new Uint8Array([0,0,0,1,3]),y=[0,0,0,0,0,0,0,0],k=[0,0,0,3,9,0,0],A=new Uint8Array([0,0,0,1,14]),M=new Uint8Array([0,0,0,1,15]),P=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,1,2]),L=new Uint8Array([0,0,0,2]);function N(D,S){for(let E=D.length;E--;)D[E]^=S[E];return D}class I{constructor(S,E,O,T){this.piece=S,this.offset=E,this.length=O,this.callback=T}}class d{constructor(){this.buffer=new Uint8Array}get(S){return!0}set(S){}}class g extends c.Duplex{constructor(S=null,E=0,O=!1){super(),this._debugId=(0,u.V5)((0,u.po)(4)),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=S,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new i.A(0,{grow:4e5}),this.extensions={},this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this.hasFast=!1,this.allowedFastSet=[],this.peerAllowedFastSet=[],this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=f(),this.downloadSpeed=f(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this._timeoutExpiresAt=null,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this._peEnabled=O,O?(this._dh=n.createDiffieHellman("ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a36210000000000090563","hex",2),this._myPubKey=this._dh.generateKeys("hex")):this._myPubKey=null,this._peerPubKey=null,this._sharedSecret=null,this._peerCryptoProvide=[],this._cryptoHandshakeDone=!1,this._cryptoSyncPattern=null,this._waitMaxBytes=null,this._encryptionMethod=null,this._encryptGenerator=null,this._decryptGenerator=null,this._setGenerators=!1,this.once("finish",()=>this._onFinish()),this.on("finish",this._onFinish),this._debug("type:",this.type),this.type==="tcpIncoming"&&this._peEnabled?this._determineHandshakeType():this.type==="tcpOutgoing"&&this._peEnabled&&E===0?this._parsePe2():this._parseHandshake(null)}setKeepAlive(S){this._debug("setKeepAlive %s",S),clearInterval(this._keepAliveInterval),S!==!1&&(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},55e3))}setTimeout(S,E){this._debug("setTimeout ms=%d unref=%s",S,E),this._timeoutMs=S,this._timeoutUnref=!!E,this._resetTimeout(!0)}destroy(){if(!this.destroyed)return this._debug("destroy"),this.end(),this}end(S){if(!this.destroyed&&!this.destroying)return this._debug("end"),this._onUninterested(),this._onChoke(),super.end(S)}use(S){const E=S.prototype.name;if(!E)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",E);const O=this._nextExt,T=new S(this);function C(){}typeof T.onHandshake!="function"&&(T.onHandshake=C),typeof T.onExtendedHandshake!="function"&&(T.onExtendedHandshake=C),typeof T.onMessage!="function"&&(T.onMessage=C),this.extendedMapping[O]=E,this._ext[E]=T,this[E]=T,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(b)}sendPe1(){if(this._peEnabled){const S=Math.floor(513*Math.random()),E=(0,u.po)(S);this._push((0,u.xW)([(0,u.fk)(this._myPubKey),E]))}}sendPe2(){const S=Math.floor(513*Math.random()),E=(0,u.po)(S);this._push((0,u.xW)([(0,u.fk)(this._myPubKey),E]))}async sendPe3(S){await this.setEncrypt(this._sharedSecret,S);const E=await(0,u.tW)((0,u.fk)(this._utfToHex("req1")+this._sharedSecret)),O=N(await(0,u.tW)((0,u.fk)(this._utfToHex("req2")+S)),await(0,u.tW)((0,u.fk)(this._utfToHex("req3")+this._sharedSecret))),T=new DataView((0,u.po)(2).buffer).getUint16(0)%512,C=(0,u.po)(T);let F=new Uint8Array(14+T+2);F.set(P),F.set(R,8);const j=new DataView(F.buffer);j.setInt16(12,T),C.copy(F,14),j.setInt16(14+T,0),F=this._encryptHandshake(F),this._push((0,u.xW)([E,O,F]))}async sendPe4(S){await this.setEncrypt(this._sharedSecret,S);const E=new DataView((0,u.po)(2).buffer).getUint16(0)%512,O=(0,u.po)(E);let T=new Uint8Array(14+E);const C=new DataView(T.buffer);T.set(P),T.set(L,8),C.setInt16(12,E),T.set(O,14),T=this._encryptHandshake(T),this._push(T),this._cryptoHandshakeDone=!0,this._debug("completed crypto handshake")}handshake(S,E,O){let T,C;if(typeof S=="string"?(S=S.toLowerCase(),T=(0,u.fk)(S)):(T=S,S=(0,u.V5)(T)),typeof E=="string"?C=(0,u.fk)(E):(C=E,E=(0,u.V5)(C)),this._infoHash=T,T.length!==20||C.length!==20)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",S,E,O);const F=new Uint8Array(y);this.extensions={extended:!0,dht:!(!O||!O.dht),fast:!(!O||!O.fast)},F[5]|=16,this.extensions.dht&&(F[7]|=1),this.extensions.fast&&(F[7]|=4),this.extensions.fast&&this.peerExtensions.fast&&(this._debug("fast extension is enabled"),this.hasFast=!0),this._push((0,u.xW)([p,F,T,C])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const S=Object.assign({},this.extendedHandshake);S.m={};for(const E in this.extendedMapping){const O=this.extendedMapping[E];S.m[O]=Number(E)}this.extended(0,s.A.encode(S)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking)if(this.amChoking=!0,this._debug("choke"),this._push(m),this.hasFast){let S=0;for(;this.peerRequests.length>S;){const E=this.peerRequests[S];this.allowedFastSet.includes(E.piece)?++S:this.reject(E.piece,E.offset,E.length)}}else for(;this.peerRequests.length;)this.peerRequests.pop()}unchoke(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(v))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(x))}uninterested(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(_))}have(S){this._debug("have %d",S),this._message(4,[S],null)}bitfield(S){this._debug("bitfield"),ArrayBuffer.isView(S)||(S=S.buffer),this._message(5,[],S)}request(S,E,O,T){return T||(T=()=>{}),this._finished?T(new Error("wire is closed")):!this.peerChoking||this.hasFast&&this.peerAllowedFastSet.includes(S)?(this._debug("request index=%d offset=%d length=%d",S,E,O),this.requests.push(new I(S,E,O,T)),this._timeout||this._resetTimeout(!0),void this._message(6,[S,E,O],null)):T(new Error("peer is choking"))}piece(S,E,O){this._debug("piece index=%d offset=%d",S,E),this._message(7,[S,E],O),this.uploaded+=O.length,this.uploadSpeed(O.length),this.emit("upload",O.length)}cancel(S,E,O){this._debug("cancel index=%d offset=%d length=%d",S,E,O),this._callback(this._pull(this.requests,S,E,O),new Error("request was cancelled"),null),this._message(8,[S,E,O],null)}port(S){this._debug("port %d",S);const E=new Uint8Array(k);new DataView(E.buffer).setUint16(5,S),this._push(E)}suggest(S){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("suggest %d",S),this._message(13,[S],null)}haveAll(){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("have-all"),this._push(A)}haveNone(){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("have-none"),this._push(M)}reject(S,E,O){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("reject index=%d offset=%d length=%d",S,E,O),this._pull(this.peerRequests,S,E,O),this._message(16,[S,E,O],null)}allowedFast(S){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("allowed-fast %d",S),this.allowedFastSet.includes(S)||this.allowedFastSet.push(S),this._message(17,[S],null)}extended(S,E){if(this._debug("extended ext=%s",S),typeof S=="string"&&this.peerExtendedMapping[S]&&(S=this.peerExtendedMapping[S]),typeof S!="number")throw new Error(`Unrecognized extension: ${S}`);{const O=new Uint8Array([S]),T=ArrayBuffer.isView(E)?E:s.A.encode(E);this._message(20,[],(0,u.xW)([O,T]))}}async setEncrypt(S,E){let O,T,C,F;switch(this.type){case"tcpIncoming":O=await(0,u.tW)((0,u.fk)(this._utfToHex("keyB")+S+E)),C=await(0,u.tW)((0,u.fk)(this._utfToHex("keyA")+S+E)),T=[];for(const j of O.values())T.push(j);F=[];for(const j of C.values())F.push(j);this._encryptGenerator=new o(T),this._decryptGenerator=new o(F);break;case"tcpOutgoing":O=await(0,u.tW)((0,u.fk)(this._utfToHex("keyA")+S+E)),C=await(0,u.tW)((0,u.fk)(this._utfToHex("keyB")+S+E)),T=[];for(const j of O.values())T.push(j);F=[];for(const j of C.values())F.push(j);this._encryptGenerator=new o(T),this._decryptGenerator=new o(F);break;default:return!1}for(let j=0;j<1024;j++)this._encryptGenerator.randomByte(),this._decryptGenerator.randomByte();return this._setGenerators=!0,!0}_message(S,E,O){const T=O?O.length:0,C=new Uint8Array(5+4*E.length),F=new DataView(C.buffer);F.setUint32(0,C.length+T-4),C[4]=S;for(let j=0;j<E.length;j++)F.setUint32(5+4*j,E[j]);this._push(C),O&&this._push(O)}_push(S){if(!this._finished)return this._encryptionMethod===2&&this._cryptoHandshakeDone&&(S=this._encrypt(S)),this.push(S)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onPe1(S){this._peerPubKey=(0,u.V5)(S),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe1")}_onPe2(S){this._peerPubKey=(0,u.V5)(S),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe2")}async _onPe3(S){const E=await(0,u.V5)(this._utfToHex("req3")+this._sharedSecret),O=(0,u.V5)(N(E,S));this.emit("pe3",O)}_onPe3Encrypted(S,E){if(!(0,u.LC)(S,P))return this._debug("Error: verification constant did not match"),void this.destroy();for(const O of E.values())O!==0&&this._peerCryptoProvide.push(O);this._peerCryptoProvide.includes(2)?this._encryptionMethod=2:(this._debug("Error: RC4 encryption method not provided by peer"),this.destroy())}_onPe4(S){this._encryptionMethod=S[3],R.includes(this._encryptionMethod)||(this._debug("Error: peer selected invalid crypto method"),this.destroy()),this._cryptoHandshakeDone=!0,this._debug("crypto handshake done"),this.emit("pe4")}_onHandshake(S,E,O){const T=(0,u.V5)(S),C=(0,u.V5)(E);this._debug("got handshake i=%s p=%s exts=%o",T,C,O),this.peerId=C,this.peerIdBuffer=E,this.peerExtensions=O,this.extensions.fast&&this.peerExtensions.fast&&(this._debug("fast extension is enabled"),this.hasFast=!0),this.emit("handshake",T,C,O);for(const F in this._ext)this._ext[F].onHandshake(T,C,O);O.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){if(this.peerChoking=!0,this._debug("got choke"),this.emit("choke"),!this.hasFast)for(;this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(S){this.peerPieces.get(S)||(this._debug("got have %d",S),this.peerPieces.set(S,!0),this.emit("have",S))}_onBitField(S){this.peerPieces=new i.A(S),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(S,E,O){if(this.amChoking&&(!this.hasFast||!this.allowedFastSet.includes(S)))return void(this.hasFast&&this.reject(S,E,O));this._debug("got request index=%d offset=%d length=%d",S,E,O);const T=(F,j)=>{if(C===this._pull(this.peerRequests,S,E,O))return F?(this._debug("error satisfying request index=%d offset=%d length=%d (%s)",S,E,O,F.message),void(this.hasFast&&this.reject(S,E,O))):void this.piece(S,E,j)},C=new I(S,E,O,T);this.peerRequests.push(C),this.emit("request",S,E,O,T)}_onPiece(S,E,O){this._debug("got piece index=%d offset=%d",S,E),this._callback(this._pull(this.requests,S,E,O.length),null,O),this.downloaded+=O.length,this.downloadSpeed(O.length),this.emit("download",O.length),this.emit("piece",S,E,O)}_onCancel(S,E,O){this._debug("got cancel index=%d offset=%d length=%d",S,E,O),this._pull(this.peerRequests,S,E,O),this.emit("cancel",S,E,O)}_onPort(S){this._debug("got port %d",S),this.emit("port",S)}_onSuggest(S){if(!this.hasFast)return this._debug("Error: got suggest whereas fast extension is disabled"),void this.destroy();this._debug("got suggest %d",S),this.emit("suggest",S)}_onHaveAll(){if(!this.hasFast)return this._debug("Error: got have-all whereas fast extension is disabled"),void this.destroy();this._debug("got have-all"),this.peerPieces=new d,this.emit("have-all")}_onHaveNone(){if(!this.hasFast)return this._debug("Error: got have-none whereas fast extension is disabled"),void this.destroy();this._debug("got have-none"),this.emit("have-none")}_onReject(S,E,O){if(!this.hasFast)return this._debug("Error: got reject whereas fast extension is disabled"),void this.destroy();this._debug("got reject index=%d offset=%d length=%d",S,E,O),this._callback(this._pull(this.requests,S,E,O),new Error("request was rejected"),null),this.emit("reject",S,E,O)}_onAllowedFast(S){if(!this.hasFast)return this._debug("Error: got allowed-fast whereas fast extension is disabled"),void this.destroy();this._debug("got allowed-fast %d",S),this.peerAllowedFastSet.includes(S)||this.peerAllowedFastSet.push(S),this.peerAllowedFastSet.length>100&&this.peerAllowedFastSet.shift(),this.emit("allowed-fast",S)}_onExtended(S,E){if(S===0){let O;try{O=s.A.decode(E)}catch(T){this._debug("ignoring invalid extended handshake: %s",T.message||T)}if(!O)return;if(this.peerExtendedHandshake=O,typeof O.m=="object")for(const T in O.m)this.peerExtendedMapping[T]=Number(O.m[T].toString());for(const T in this._ext)this.peerExtendedMapping[T]&&this._ext[T].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[S]&&(S=this.extendedMapping[S],this._ext[S]&&this._ext[S].onMessage(E)),this._debug("got extended message ext=%s",S),this.emit("extended",S,E)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(S,E){if(this._encryptionMethod===2&&this._cryptoHandshakeDone&&(S=this._decrypt(S)),this._bufferSize+=S.length,this._buffer.push(S),this._buffer.length>1&&(this._buffer=[(0,u.xW)(this._buffer,this._bufferSize)]),this._cryptoSyncPattern){const O=this._buffer[0].indexOf(this._cryptoSyncPattern);if(O!==-1)this._buffer[0]=this._buffer[0].slice(O+this._cryptoSyncPattern.length),this._bufferSize-=O+this._cryptoSyncPattern.length,this._cryptoSyncPattern=null;else if(this._bufferSize+S.length>this._waitMaxBytes+this._cryptoSyncPattern.length)return this._debug("Error: could not resynchronize"),void this.destroy()}for(;this._bufferSize>=this._parserSize&&!this._cryptoSyncPattern;)if(this._parserSize===0)this._parser(new Uint8Array);else{const O=this._buffer[0];this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[O.slice(this._parserSize)]:[],this._parser(O.slice(0,this._parserSize))}E(null)}_callback(S,E,O){S&&(this._resetTimeout(!this.peerChoking&&!this._finished),S.callback(E,O))}_resetTimeout(S){if(!S||!this._timeoutMs||!this.requests.length)return clearTimeout(this._timeout),this._timeout=null,void(this._timeoutExpiresAt=null);const E=Date.now()+this._timeoutMs;if(this._timeout){if(E-this._timeoutExpiresAt<.05*this._timeoutMs)return;clearTimeout(this._timeout)}this._timeoutExpiresAt=E,this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref()}_parse(S,E){this._parserSize=S,this._parser=E}_parseUntil(S,E){this._cryptoSyncPattern=S,this._waitMaxBytes=E}_onMessageLength(S){const E=new DataView(S.buffer,S.byteOffset,S.byteLength).getUint32(0);E>0?this._parse(E,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(S){this._parse(4,this._onMessageLength);const E=new DataView(S.buffer,S.byteOffset,S.byteLength);switch(S[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(E.getUint32(1));case 5:return this._onBitField(S.slice(1));case 6:return this._onRequest(E.getUint32(1),E.getUint32(5),E.getUint32(9));case 7:return this._onPiece(E.getUint32(1),E.getUint32(5),S.slice(9));case 8:return this._onCancel(E.getUint32(1),E.getUint32(5),E.getUint32(9));case 9:return this._onPort(E.getUint16(1));case 13:return this._onSuggest(E.getUint32(1));case 14:return this._onHaveAll();case 15:return this._onHaveNone();case 16:return this._onReject(E.getUint32(1),E.getUint32(5),E.getUint32(9));case 17:return this._onAllowedFast(E.getUint32(1));case 20:return this._onExtended(S[1],S.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",S)}}_determineHandshakeType(){this._parse(1,S=>{const E=S[0];E===19?this._parse(E+48,this._onHandshakeBuffer):this._parsePe1(S)})}_parsePe1(S){this._parse(95,E=>{this._onPe1((0,u.xW)([S,E])),this._parsePe3()})}_parsePe2(){this._parse(96,S=>{for(this._onPe2(S);!this._setGenerators;);this._parsePe4()})}async _parsePe3(){const S=await(0,u.tW)((0,u.fk)(this._utfToHex("req1")+this._sharedSecret));this._parseUntil(S,512),this._parse(20,E=>{for(this._onPe3(E);!this._setGenerators;);this._parsePe3Encrypted()})}_parsePe3Encrypted(){this._parse(14,S=>{const E=this._decryptHandshake(S.slice(0,8)),O=this._decryptHandshake(S.slice(8,12)),T=new DataView(this._decryptHandshake(S.slice(12,14)).buffer).getUint16(0);this._parse(T,C=>{C=this._decryptHandshake(C),this._parse(2,F=>{const j=new DataView(this._decryptHandshake(F).buffer).getUint16(0);this._parse(j,W=>{W=this._decryptHandshake(W),this._onPe3Encrypted(E,O,C,W);const V=j?W[0]:null,Z=j?W.slice(1,20):null;V===19&&(0,u.dU)(Z)==="BitTorrent protocol"?this._onHandshakeBuffer(W.slice(1)):this._parseHandshake()})})})})}_parsePe4(){const S=this._decryptHandshake(P);this._parseUntil(S,512),this._parse(6,E=>{const O=this._decryptHandshake(E.slice(0,4)),T=new DataView(this._decryptHandshake(E.slice(4,6)).buffer).getUint16(0);this._parse(T,C=>{this._decryptHandshake(C),this._onPe4(O),this._parseHandshake(null)})})}_parseHandshake(){this._parse(1,S=>{const E=S[0];if(E!==19)return this._debug("Error: wire not speaking BitTorrent protocol (%s)",E.toString()),void this.end();this._parse(E+48,this._onHandshakeBuffer)})}_onHandshakeBuffer(S){const E=S.slice(0,19);if((0,u.dU)(E)!=="BitTorrent protocol")return this._debug("Error: wire not speaking BitTorrent protocol (%s)",(0,u.dU)(E)),void this.end();S=S.slice(19),this._onHandshake(S.slice(8,28),S.slice(28,48),{dht:!!(1&S[7]),fast:!!(4&S[7]),extended:!!(16&S[5])}),this._parse(4,this._onMessageLength)}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...S){S[0]=`[${this._debugId}] ${S[0]}`,h(...S)}_pull(S,E,O,T){for(let C=0;C<S.length;C++){const F=S[C];if(F.piece===E&&F.offset===O&&F.length===T)return l(S,C),F}return null}_encryptHandshake(S){const E=new Uint8Array(S);if(!this._encryptGenerator)return this._debug("Warning: Encrypting without any generator"),E;for(let O=0;O<S.length;O++){const T=this._encryptGenerator.randomByte();E[O]=E[O]^T}return E}_encrypt(S){const E=new Uint8Array(S);if(!this._encryptGenerator||this._encryptionMethod!==2)return E;for(let O=0;O<S.length;O++){const T=this._encryptGenerator.randomByte();E[O]=E[O]^T}return E}_decryptHandshake(S){const E=new Uint8Array(S);if(!this._decryptGenerator)return this._debug("Warning: Decrypting without any generator"),E;for(let O=0;O<S.length;O++){const T=this._decryptGenerator.randomByte();E[O]=E[O]^T}return E}_decrypt(S){const E=new Uint8Array(S);if(!this._decryptGenerator||this._encryptionMethod!==2)return E;for(let O=0;O<S.length;O++){const T=this._decryptGenerator.randomByte();E[O]=E[O]^T}return E}_utfToHex(S){return(0,u.V5)((0,u.L0)(S))}}const w=g},9639:(t,e,r)=>{r.d(e,{NJ:()=>x,V5:()=>a,dU:()=>b,HB:()=>_,xW:()=>c,LC:()=>u,tW:()=>R,fk:()=>o,Ht:()=>y,po:()=>L,L0:()=>v});const s="0123456789abcdef",i=[],n=[];for(let N=0;N<256;N++)i[N]=s[N>>4&15]+s[15&N],N<16&&(N<10?n[48+N]=N:n[87+N]=N);const a=N=>{const I=N.length;let d="",g=0;for(;g<I;)d+=i[N[g++]];return d},o=N=>{const I=N.length>>1,d=I<<1,g=new Uint8Array(I);let w=0,D=0;for(;D<d;)g[w++]=n[N.charCodeAt(D++)]<<4|n[N.charCodeAt(D++)];return g},c=(N,I=0)=>{const d=N.length||0;if(!I){let S=d;for(;S--;)I+=N[S].length}const g=new Uint8Array(I);let w=I,D=d;for(;D--;)w-=N[D].length,g.set(N[D],w);return g},u=(N,I)=>{if(N.length!==I.length)return!1;for(let d=N.length;d>-1;d-=1)if(N[d]!==I[d])return!1;return!0};for(var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=typeof Uint8Array>"u"?[]:new Uint8Array(256),h=0;h<64;h++)l[f.charCodeAt(h)]=h;const p=new TextDecoder,b=(N,I)=>I?new TextDecoder(I).decode(N):p.decode(N),m=new TextEncoder,v=N=>m.encode(N),x=N=>function(I){var d,g=new Uint8Array(I),w=g.length,D="";for(d=0;d<w;d+=3)D+=f[g[d]>>2],D+=f[(3&g[d])<<4|g[d+1]>>4],D+=f[(15&g[d+1])<<2|g[d+2]>>6],D+=f[63&g[d+2]];return w%3==2?D=D.substring(0,D.length-1)+"=":w%3==1&&(D=D.substring(0,D.length-2)+"=="),D}(N),_=N=>{let I,d="",g=0;const w=N.length;for(;g<w;)I=N.charCodeAt(g++),d+=s[I>>4]+s[15&I];return d},y=N=>{const I=o(N);if(I.length<=65536)return String.fromCharCode(...I);let d="",g=0;for(;g<I.length;)d+=String.fromCharCode(...I.subarray(g,g+=65536));return d},k=typeof window<"u"?window:self,A=k.crypto||k.msCrypto||{},M=A.subtle||A.webkitSubtle,P={hex:a,base64:x},R=async(N,I,d="sha-1")=>{if(!M)throw new Error("no web crypto support");typeof N=="string"&&(N=v(N));const g=new Uint8Array(await M.digest(d,N));return I?P[I](g):g},L=N=>{const I=new Uint8Array(N);return A.getRandomValues(I)}},717:(t,e,r)=>{r.r(e),r.d(e,{addListener:()=>h,argv:()=>o,binding:()=>R,browser:()=>n,chdir:()=>L,cwd:()=>M,emit:()=>x,env:()=>a,listeners:()=>A,nextTick:()=>k,off:()=>b,on:()=>l,once:()=>p,prependListener:()=>_,prependOnceListener:()=>y,removeAllListeners:()=>v,removeListener:()=>m,title:()=>i,umask:()=>P,version:()=>c,versions:()=>u});var s=r(9596);const i="browser",n=!0,a={},o=[],c="",u={};function f(){}const l=f,h=f,p=f,b=f,m=f,v=f,x=f,_=f,y=f,k=(N,...I)=>s(()=>N(...I)),A=N=>[],M=()=>"/",P=()=>0,R=N=>{throw new Error("process.binding is not supported")},L=N=>{throw new Error("process.chdir is not supported")}},8330:t=>{t.exports={version:"2.5.19"}}},rc={};function ce(t){var e=rc[t];if(e!==void 0)return e.exports;var r=rc[t]={exports:{}};return ag[t](r,r.exports,ce),r.exports}Qr=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,ce.t=function(t,e){if(1&e&&(t=this(t)),8&e||typeof t=="object"&&t&&(4&e&&t.__esModule||16&e&&typeof t.then=="function"))return t;var r=Object.create(null);ce.r(r);var s={};Js=Js||[null,Qr({}),Qr([]),Qr(Qr)];for(var i=2&e&&t;typeof i=="object"&&!~Js.indexOf(i);i=Qr(i))Object.getOwnPropertyNames(i).forEach(n=>s[n]=()=>t[n]);return s.default=()=>t,ce.d(r,s),r},ce.d=(t,e)=>{for(var r in e)ce.o(e,r)&&!ce.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},ce.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),ce.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var Ed={};ce.d(Ed,{A:()=>cn});var pr=ce(7007);function wi(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function og(t,e){let r,s="",i=0,n=-1,a=0;for(let o=0;o<=t.length;++o){if(o<t.length)r=t.charCodeAt(o);else{if(r===47)break;r=47}if(r===47){if(!(n===o-1||a===1))if(n!==o-1&&a===2){if(s.length<2||i!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){const c=s.lastIndexOf("/");if(c!==s.length-1){c===-1?(s="",i=0):(s=s.slice(0,c),i=s.length-1-s.lastIndexOf("/")),n=o,a=0;continue}}else if(s.length===2||s.length===1){s="",i=0,n=o,a=0;continue}}e&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+="/"+t.slice(n+1,o):s=t.slice(n+1,o),i=o-n-1;n=o,a=0}else r===46&&a!==-1?++a:a=-1}return s}function On(){if(arguments.length===0)return".";let t;for(let e=0;e<arguments.length;++e){const r=arguments[e];wi(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":function(e){if(wi(e),e.length===0)return".";const r=e.charCodeAt(0)===47,s=e.charCodeAt(e.length-1)===47;return(e=og(e,!r)).length!==0||r||(e="."),e.length>0&&s&&(e+="/"),r?"/"+e:e}(t)}ce(717);const ug="/";var Zt=ce(988),Cd=ce(1467),cg=ce(8444),fg=ce(2123);const lg=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^[Dd]esktop\\.ini$","@eaDir$"].join("|"));function hg(t){return lg.test(t)}var Dd=ce(405),Dr=ce(8190),pt=ce(9596),ae=ce(9639),Jn=(ce(3468),ce(2532));const dg=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.webtorrent.dev"]],xt=Symbol("itemPath");function Td(t,e,r){var s;if(s=t,typeof FileList<"u"&&s instanceof FileList&&(t=Array.from(t)),Array.isArray(t)||(t=[t]),t.length===0)throw new Error("invalid input type");t.forEach(c=>{if(c==null)throw new Error(`invalid input type: ${c}`)}),(t=t.map(c=>nc(c)&&typeof c.path=="string"&&typeof Jn=="function"?c.path:c)).length!==1||typeof t[0]=="string"||t[0].name||(t[0].name=e.name);let i=null;t.forEach((c,u)=>{if(typeof c=="string")return;let f=c.fullPath||c.name;f||(f=`Unknown File ${u+1}`,c.unknownName=!0),c[xt]=f.split("/"),c[xt][0]||c[xt].shift(),c[xt].length<2?i=null:u===0&&t.length>1?i=c[xt][0]:c[xt][0]!==i&&(i=null)}),(e.filterJunkFiles===void 0||e.filterJunkFiles)&&(t=t.filter(c=>typeof c=="string"||!function(u){const f=u[u.length-1];return f[0]==="."&&hg(f)}(c[xt]))),i&&t.forEach(c=>{const u=(ArrayBuffer.isView(c)||ic(c))&&!c[xt];typeof c=="string"||u||c[xt].shift()}),!e.name&&i&&(e.name=i),e.name||t.some(c=>typeof c=="string"?(e.name=function(u,f){wi(u);let l,h=0,p=-1,b=!0;for(l=u.length-1;l>=0;--l)if(u.charCodeAt(l)===47){if(!b){h=l+1;break}}else p===-1&&(b=!1,p=l+1);return p===-1?"":u.slice(h,p)}(c),!0):!c.unknownName&&(e.name=c[xt][c[xt].length-1],!0)),e.name||(e.name=`Unnamed Torrent ${Date.now()}`),e.maxPieceLength||(e.maxPieceLength=4194304);const n=t.reduce((c,u)=>c+ +(typeof u=="string"),0);let a=t.length===1;if(t.length===1&&typeof t[0]=="string"){if(typeof Jn!="function")throw new Error("filesystem paths do not work in the browser");fg(t[0],(c,u)=>{if(c)return r(c);a=u,o()})}else pt(o);function o(){Dr(t.map(c=>u=>{const f={};if(nc(c))f.getStream=c.stream(),f.length=c.size;else if(ArrayBuffer.isView(c))f.getStream=[c],f.length=c.length;else{if(!ic(c)){if(typeof c=="string"){if(typeof Jn!="function")throw new Error("filesystem paths do not work in the browser");return void Jn(c,n>1||a,u)}throw new Error("invalid input type")}f.getStream=async function*(l,h){for await(const p of l)h.length+=p.length,yield p}(c,f),f.length=0}f.path=c[xt],u(null,f)}),(c,u)=>{if(c)return r(c);u=u.flat(),r(null,u,a)})}}const pg=5;function bg(t,e){return t+e.length}function nc(t){return typeof Blob<"u"&&t instanceof Blob}function ic(t){return typeof t=="object"&&t!=null&&typeof t.pipe=="function"}const mg=function(t,e,r){typeof e=="function"&&([e,r]=[r,e]),Td(t,e=e?Object.assign({},e):{},(s,i,n)=>{if(s)return r(s);e.singleFileTorrent=n,function(a,o,c){let u=o.announceList;u||(typeof o.announce=="string"?u=[[o.announce]]:Array.isArray(o.announce)&&(u=o.announce.map(p=>[p]))),u||(u=[]),globalThis.WEBTORRENT_ANNOUNCE&&(typeof globalThis.WEBTORRENT_ANNOUNCE=="string"?u.push([[globalThis.WEBTORRENT_ANNOUNCE]]):Array.isArray(globalThis.WEBTORRENT_ANNOUNCE)&&(u=u.concat(globalThis.WEBTORRENT_ANNOUNCE.map(p=>[p])))),o.announce===void 0&&o.announceList===void 0&&(u=u.concat(dg)),typeof o.urlList=="string"&&(o.urlList=[o.urlList]);const f={info:{name:o.name},"creation date":Math.ceil((Number(o.creationDate)||Date.now())/1e3),encoding:"UTF-8"};u.length!==0&&(f.announce=u[0][0],f["announce-list"]=u),o.comment!==void 0&&(f.comment=o.comment),o.createdBy!==void 0&&(f["created by"]=o.createdBy),o.private!==void 0&&(f.info.private=Number(o.private)),o.info!==void 0&&Object.assign(f.info,o.info),o.sslCert!==void 0&&(f.info["ssl-cert"]=o.sslCert),o.urlList!==void 0&&(f["url-list"]=o.urlList);const l=a.reduce(bg,0),h=o.pieceLength||Math.min(cg(l),o.maxPieceLength);f.info["piece length"]=h,async function(p,b,m,v,x){const _=[];let y=0,k=0;const A=p.map(I=>I.getStream),M=v.onProgress;let P=0,R=0,L=!1;const N=Cd(Dd(A),b,{zeroPadding:!1});try{for await(const I of N)await new Promise(d=>{y+=I.length;const g=R;++R,++P<pg&&d(),(0,ae.tW)(I,"hex").then(w=>{_[g]=w,--P,k+=I.length,M&&M(k,m),d(),L&&P===0&&x(null,(0,ae.fk)(_.join("")),y)})});if(P===0)return x(null,(0,ae.fk)(_.join("")),y);L=!0}catch(I){x(I)}}(a,h,l,o,(p,b,m)=>{if(p)return c(p);f.info.pieces=b,a.forEach(v=>{delete v.getStream}),o.singleFileTorrent?f.info.length=m:f.info.files=a,c(null,Zt.A.encode(f))})}(i,e,r)})};var Ft=ce(7833),sc=ce(6664),ac=ce(1827),oc=ce(3208);const ao=self.fetch||(()=>{throw new Error("global fetch is not available!")}),uc=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255],gg=function(t){if(!ArrayBuffer.isView(t)&&typeof t!="string")throw new TypeError("base32.decode only takes Buffer or string as parameter");let e,r=0,s=0,i=0;ArrayBuffer.isView(t)||(t=(0,ae.L0)(t));const n=new Uint8Array(Math.ceil(5*t.length/8));for(let a=0;a<t.length&&t[a]!==61;a++){const o=t[a]-48;if(!(o<uc.length))throw new Error("Invalid input - it is not base32 encoded string");s=uc[o],r<=3?(r=(r+5)%8,r===0?(e|=s,n[i]=e,i++,e=0):e|=255&s<<8-r):(r=(r+5)%8,e|=255&s>>>r,n[i]=e,i++,e=255&s<<8-r)}return n.subarray(0,i)};function _g(t){return t.reduce((e,r,s,i)=>{const n=r.split("-").map(a=>parseInt(a));return e.concat(((a,o=a)=>Array.from({length:o-a+1},(c,u)=>u+a))(...n))},[])}const Xs=function(t){const e={},r=t.split("magnet:?")[1];let s;return(r&&r.length>=0?r.split("&"):[]).forEach(i=>{const n=i.split("=");if(n.length!==2)return;const a=n[0];let o=n[1];a==="dn"&&(o=decodeURIComponent(o).replace(/\+/g," ")),a!=="tr"&&a!=="xs"&&a!=="as"&&a!=="ws"||(o=decodeURIComponent(o)),a==="kt"&&(o=decodeURIComponent(o).split("+")),a==="ix"&&(o=Number(o)),a==="so"&&(o=_g(decodeURIComponent(o).split(","))),e[a]?(Array.isArray(e[a])||(e[a]=[e[a]]),e[a].push(o)):e[a]=o}),e.xt&&(Array.isArray(e.xt)?e.xt:[e.xt]).forEach(i=>{(s=i.match(/^urn:btih:(.{40})/))?e.infoHash=s[1].toLowerCase():(s=i.match(/^urn:btih:(.{32})/))?e.infoHash=(0,ae.V5)(gg(s[1])):(s=i.match(/^urn:btmh:1220(.{64})/))&&(e.infoHashV2=s[1].toLowerCase())}),e.xs&&(Array.isArray(e.xs)?e.xs:[e.xs]).forEach(i=>{(s=i.match(/^urn:btpk:(.{64})/))&&(e.publicKey=s[1].toLowerCase())}),e.infoHash&&(e.infoHashBuffer=(0,ae.fk)(e.infoHash)),e.infoHashV2&&(e.infoHashV2Buffer=(0,ae.fk)(e.infoHashV2)),e.publicKey&&(e.publicKeyBuffer=(0,ae.fk)(e.publicKey)),e.dn&&(e.name=e.dn),e.kt&&(e.keywords=e.kt),e.announce=[],(typeof e.tr=="string"||Array.isArray(e.tr))&&(e.announce=e.announce.concat(e.tr)),e.urlList=[],(typeof e.as=="string"||Array.isArray(e.as))&&(e.urlList=e.urlList.concat(e.as)),(typeof e.ws=="string"||Array.isArray(e.ws))&&(e.urlList=e.urlList.concat(e.ws)),e.peerAddresses=[],(typeof e["x.pe"]=="string"||Array.isArray(e["x.pe"]))&&(e.peerAddresses=e.peerAddresses.concat(e["x.pe"])),e.announce=Array.from(new Set(e.announce)),e.urlList=Array.from(new Set(e.urlList)),e.peerAddresses=Array.from(new Set(e.peerAddresses)),e};async function Ta(t){if(typeof t=="string"&&/^(stream-)?magnet:/.test(t)){const e=Xs(t);if(!e.infoHash)throw new Error("Invalid torrent identifier");return e}if(typeof t=="string"&&(/^[a-f0-9]{40}$/i.test(t)||/^[a-z2-7]{32}$/i.test(t)))return Xs(`magnet:?xt=urn:btih:${t}`);if(ArrayBuffer.isView(t)&&t.length===20)return Xs(`magnet:?xt=urn:btih:${(0,ae.V5)(t)}`);if(ArrayBuffer.isView(t))return await async function(e){ArrayBuffer.isView(e)&&(e=Zt.A.decode(e)),Fr(e.info,"info"),Fr(e.info["name.utf-8"]||e.info.name,"info.name"),Fr(e.info["piece length"],"info['piece length']"),Fr(e.info.pieces,"info.pieces"),e.info.files?e.info.files.forEach(n=>{Fr(typeof n.length=="number","info.files[0].length"),Fr(n["path.utf-8"]||n.path,"info.files[0].path")}):Fr(typeof e.info.length=="number","info.length");const r={info:e.info,infoBuffer:Zt.A.encode(e.info),name:(0,ae.dU)(e.info["name.utf-8"]||e.info.name),announce:[]};r.infoHashBuffer=await(0,ae.tW)(r.infoBuffer),r.infoHash=(0,ae.V5)(r.infoHashBuffer),e.info.private!==void 0&&(r.private=!!e.info.private),e["creation date"]&&(r.created=new Date(1e3*e["creation date"])),e["created by"]&&(r.createdBy=(0,ae.dU)(e["created by"])),ArrayBuffer.isView(e.comment)&&(r.comment=(0,ae.dU)(e.comment)),Array.isArray(e["announce-list"])&&e["announce-list"].length>0?e["announce-list"].forEach(n=>{n.forEach(a=>{r.announce.push((0,ae.dU)(a))})}):e.announce&&r.announce.push((0,ae.dU)(e.announce)),ArrayBuffer.isView(e["url-list"])&&(e["url-list"]=e["url-list"].length>0?[e["url-list"]]:[]),r.urlList=(e["url-list"]||[]).map(n=>(0,ae.dU)(n)),r.announce=Array.from(new Set(r.announce)),r.urlList=Array.from(new Set(r.urlList));const s=e.info.files||[e.info];r.files=s.map((n,a)=>{const o=[].concat(r.name,n["path.utf-8"]||n.path||[]).map(c=>ArrayBuffer.isView(c)?(0,ae.dU)(c):c);return{path:On.apply(null,[ug].concat(o)).slice(1),name:o[o.length-1],length:n.length,offset:s.slice(0,a).reduce(cc,0)}}),r.length=s.reduce(cc,0);const i=r.files[r.files.length-1];return r.pieceLength=e.info["piece length"],r.lastPieceLength=(i.offset+i.length)%r.pieceLength||r.pieceLength,r.pieces=function(n){const a=[];for(let o=0;o<n.length;o+=20)a.push((0,ae.V5)(n.slice(o,o+20)));return a}(e.info.pieces),r}(t);if(t&&t.infoHash)return t.infoHash=t.infoHash.toLowerCase(),t.announce||(t.announce=[]),typeof t.announce=="string"&&(t.announce=[t.announce]),t.urlList||(t.urlList=[]),t;throw new Error("Invalid torrent identifier")}async function Md(t,e,r){if(typeof e=="function")return Md(t,{},e);if(typeof r!="function")throw new Error("second argument must be a Function");let s;try{s=await Ta(t)}catch{}if(s&&s.infoHash)pt(()=>{r(null,s)});else if(i=t,typeof Blob<"u"&&i instanceof Blob)try{n(new Uint8Array(await t.arrayBuffer()))}catch(a){return r(new Error(`Error converting Blob: ${a.message}`))}else if(/^https?:/.test(t))try{const a=await ao(t,{headers:{"user-agent":"WebTorrent (https://webtorrent.io)"},signal:AbortSignal.timeout(3e4),...e});n(new Uint8Array(await a.arrayBuffer()))}catch(a){return r(new Error(`Error downloading torrent: ${a.message}`))}else typeof oc.readFile=="function"&&typeof t=="string"?oc.readFile(t,(a,o)=>{if(a)return r(new Error("Invalid torrent identifier"));n(o)}):pt(()=>{r(new Error("Invalid torrent identifier"))});var i;async function n(a){try{s=await Ta(a)}catch(o){return r(o)}s&&s.infoHash?r(null,s):r(new Error("Invalid torrent identifier"))}}function cc(t,e){return t+e.length}function Fr(t,e){if(!t)throw new Error(`Torrent is missing required field: ${e}`)}const li=Ta,vg=function(t){t=Object.assign({},t);let e=new Set;t.xt&&typeof t.xt=="string"&&e.add(t.xt),t.xt&&Array.isArray(t.xt)&&(e=new Set(t.xt)),t.infoHashBuffer&&e.add(`urn:btih:${(0,ae.V5)(t.infoHashBuffer)}`),t.infoHash&&e.add(`urn:btih:${t.infoHash}`),t.infoHashV2Buffer&&e.add(t.xt=`urn:btmh:1220${(0,ae.V5)(t.infoHashV2Buffer)}`),t.infoHashV2&&e.add(`urn:btmh:1220${t.infoHashV2}`);const r=Array.from(e);r.length===1&&(t.xt=r[0]),r.length>1&&(t.xt=r),t.publicKeyBuffer&&(t.xs=`urn:btpk:${(0,ae.V5)(t.publicKeyBuffer)}`),t.publicKey&&(t.xs=`urn:btpk:${t.publicKey}`),t.name&&(t.dn=t.name),t.keywords&&(t.kt=t.keywords),t.announce&&(t.tr=t.announce),t.urlList&&(t.ws=t.urlList,delete t.as),t.peerAddresses&&(t["x.pe"]=t.peerAddresses);let s="magnet:?";return Object.keys(t).filter(i=>i.length===2||i==="x.pe").forEach((i,n)=>{const a=Array.isArray(t[i])?t[i]:[t[i]];var o;a.forEach((c,u)=>{(n>0||u>0)&&(i!=="kt"&&i!=="so"||u===0)&&(s+="&"),i==="dn"&&(c=encodeURIComponent(c).replace(/%20/g,"+")),i!=="tr"&&i!=="as"&&i!=="ws"||(c=encodeURIComponent(c)),i!=="xs"||c.startsWith("urn:btpk:")||(c=encodeURIComponent(c)),i==="kt"&&(c=encodeURIComponent(c)),i!=="so"&&(s+=i==="kt"&&u>0?`+${c}`:`${i}=${c}`)}),i==="so"&&(s+=`${i}=${o=a,o.reduce((c,u,f,l)=>(f!==0&&u===l[f-1]+1||c.push([]),c[c.length-1].push(u),c),[]).map(c=>c.length>1?`${c[0]}-${c[c.length-1]}`:`${c[0]}`)}`)}),s},lr=typeof window<"u"?window:self,Ma=lr.RTCPeerConnection||lr.mozRTCPeerConnection||lr.webkitRTCPeerConnection,yg=lr.RTCSessionDescription||lr.mozRTCSessionDescription||lr.webkitRTCSessionDescription,wg=lr.RTCIceCandidate||lr.mozRTCIceCandidate||lr.webkitRTCIceCandidate;var Li=ce(8179),et=ce(6310);const xg=Ft("simple-peer"),Ys=65536;function fc(t){return t.replace(/a=ice-options:trickle\s\n/g,"")}let hi=class Ia extends Li.Duplex{constructor(r){super(r=Object.assign({allowHalfOpen:!1},r));_t(this,"_pc");if(this.__objectMode=!!r.objectMode,this._id=(0,ae.V5)((0,ae.po)(4)).slice(0,7),this._debug("new peer %o",r),this.channelName=r.initiator?r.channelName||(0,ae.V5)((0,ae.po)(20)):null,this.initiator=r.initiator||!1,this.channelConfig=r.channelConfig||Ia.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Ia.config,r.config),this.offerOptions=r.offerOptions||{},this.answerOptions=r.answerOptions||{},this.sdpTransform=r.sdpTransform||(s=>s),this.trickle=r.trickle===void 0||r.trickle,this.allowHalfTrickle=r.allowHalfTrickle!==void 0&&r.allowHalfTrickle,this.iceCompleteTimeout=r.iceCompleteTimeout||5e3,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!Ma)throw et(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new Ma(this.config)}catch(s){return void this.__destroy(et(s,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=s=>{this._onIceCandidate(s)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(s=>{this.__destroy(et(s,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=s=>{this._setupData(s)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(r){if(!this._destroying){if(this.destroyed)throw et(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof r=="string")try{r=JSON.parse(r)}catch{r={}}this._debug("signal()"),r.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),r.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(r.transceiverRequest.kind,r.transceiverRequest.init)),r.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(r.candidate):this._pendingCandidates.push(r.candidate)),r.sdp&&this._pc.setRemoteDescription(new yg(r)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(s=>{this._addIceCandidate(s)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(s=>{this.__destroy(et(s,"ERR_SET_REMOTE_DESCRIPTION"))}),r.sdp||r.candidate||r.renegotiate||r.transceiverRequest||this.__destroy(et(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(r){const s=new wg(r);this._pc.addIceCandidate(s).catch(i=>{var n;!s.address||s.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):this.__destroy(et(i,"ERR_ADD_ICE_CANDIDATE"))})}send(r){if(!this._destroying){if(this.destroyed)throw et(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(r)}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,queueMicrotask(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this._destroying){if(this.destroyed)throw et(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}_final(r){this._readableState.ended||this.push(null),r(null)}__destroy(r){this.end(),this._destroy(()=>{},r)}_destroy(r,s){this.destroyed||this._destroying||(this._destroying=!0,this._debug("destroying (error: %s)",s&&(s.message||s)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,s&&this.emit("error",s),r()},0))}_setupData(r){if(!r.channel)return this.__destroy(et(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=r.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Ys),this.channelName=this._channel.label,this._channel.onmessage=i=>{this._onChannelMessage(i)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=i=>{const n=i.error instanceof Error?i.error:new Error(`Datachannel error: ${i.message} ${i.filename}:${i.lineno}:${i.colno}`);this.__destroy(et(n,"ERR_DATA_CHANNEL"))};let s=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(s&&this._onChannelClose(),s=!0):s=!1},5e3)}_write(r,s){if(this.destroyed)return s(et(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(r)}catch(i){return this.__destroy(et(i,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Ys?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=s):s(null)}else this._debug("write before connect"),this._chunk=r,this._cb=s}_onFinish(){if(this.destroyed)return;const r=()=>{setTimeout(()=>this.__destroy(),1e3)};this._connected?r():this.once("connect",r)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(r=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(r.sdp=fc(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const s=()=>{if(this.destroyed)return;const i=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:i.type,sdp:i.sdp})};this._pc.setLocalDescription(r).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?s():this.once("_iceComplete",s))}).catch(i=>{this.__destroy(et(i,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(r=>{this.__destroy(et(r,"ERR_CREATE_OFFER"))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(r=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(r.sdp=fc(r.sdp)),r.sdp=this.sdpTransform(r.sdp);const s=()=>{var n;if(this.destroyed)return;const i=this._pc.localDescription||r;this._debug("signal"),this.emit("signal",{type:i.type,sdp:i.sdp}),this.initiator||((n=this._requestMissingTransceivers)==null||n.call(this))};this._pc.setLocalDescription(r).then(()=>{this.destroyed||(this.trickle||this._iceComplete?s():this.once("_iceComplete",s))}).catch(i=>{this.__destroy(et(i,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(r=>{this.__destroy(et(r,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._destroying||this._pc.connectionState==="failed"&&this.__destroy(et(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const r=this._pc.iceConnectionState,s=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",r,s),this.emit("iceStateChange",r,s),r!=="connected"&&r!=="completed"||(this._pcReady=!0,this._maybeReady()),r==="failed"&&this.__destroy(et(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),r==="closed"&&this.__destroy(et(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(r){const s=i=>(Object.prototype.toString.call(i.values)==="[object Array]"&&i.values.forEach(n=>{Object.assign(i,n)}),i);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{const n=[];i.forEach(a=>{n.push(s(a))}),r(null,n)},i=>r(i)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(this.destroyed)return;const n=[];i.result().forEach(a=>{const o={};a.names().forEach(c=>{o[c]=a.stat(c)}),o.id=a.id,o.type=a.type,o.timestamp=a.timestamp,n.push(s(o))}),r(null,n)},i=>r(i)):r(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const r=()=>{this.destroyed||this._destroying||this.getStats((s,i)=>{if(this.destroyed||this._destroying)return;s&&(i=[]);const n={},a={},o={};let c=!1;i.forEach(f=>{f.type!=="remotecandidate"&&f.type!=="remote-candidate"||(n[f.id]=f),f.type!=="localcandidate"&&f.type!=="local-candidate"||(a[f.id]=f),f.type!=="candidatepair"&&f.type!=="candidate-pair"||(o[f.id]=f)});const u=f=>{c=!0;let l=a[f.localCandidateId];l&&(l.ip||l.address)?(this.localAddress=l.ip||l.address,this.localPort=Number(l.port)):l&&l.ipAddress?(this.localAddress=l.ipAddress,this.localPort=Number(l.portNumber)):typeof f.googLocalAddress=="string"&&(l=f.googLocalAddress.split(":"),this.localAddress=l[0],this.localPort=Number(l[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let h=n[f.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof f.googRemoteAddress=="string"&&(h=f.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(f=>{f.type==="transport"&&f.selectedCandidatePairId&&u(o[f.selectedCandidatePairId]),(f.type==="googCandidatePair"&&f.googActiveConnection==="true"||(f.type==="candidatepair"||f.type==="candidate-pair")&&f.selected)&&u(f)}),c||Object.keys(o).length&&!Object.keys(a).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(l){return this.__destroy(et(l,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const f=this._cb;this._cb=null,f(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(r,100)})};r()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Ys||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(r=>{this._pc.removeTrack(r),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(r){this.destroyed||(r.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:r.candidate.candidate,sdpMLineIndex:r.candidate.sdpMLineIndex,sdpMid:r.candidate.sdpMid}}):r.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),r.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(r){if(this.destroyed)return;let s=r.data;s instanceof ArrayBuffer?s=new Uint8Array(s):this.__objectMode===!1&&(s=(0,ae.L0)(s)),this.push(s)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const r=this._cb;this._cb=null,r(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.__destroy())}_debug(){const r=[].slice.call(arguments);r[0]="["+this._id+"] "+r[0],xg.apply(null,r)}};hi.WEBRTC_SUPPORT=!!Ma,hi.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},hi.channelConfig={};const oo=hi;var xi=ce(1035),lc=ce(7541),hc=ce(3278),Pa=ce(8271),Id=ce(6686),dc=ce(7828),pc=ce(6889);const kg=/^\[?([^\]]+)]?:(\d+)$/;let gn=new Map;function _n(t){if(gn.size===1e5&&gn.clear(),!gn.has(t)){const e=kg.exec(t);if(!e)throw new Error(`invalid addr: ${t}`);gn.set(t,[e[1],Number(e[2])])}return gn.get(t)}var ki=ce(3033),Ag=ce(4497);async function*Sg(t,e={}){if(t!=null&&t[Symbol.asyncIterator])return void(yield*t[Symbol.asyncIterator](e.offset));if(!(t!=null&&t.get))throw new Error("First argument must be an abstract-chunk-store compliant store");const r=e.chunkLength||t.chunkLength;if(!r)throw new Error("missing required `chunkLength` property");let s=e.length||t.length;if(!Number.isFinite(s))throw new Error("missing required `length` property");const i=e.offset||0,n=(c,u,f)=>new Promise((l,h)=>{t.get(c,{offset:f,length:u},(p,b)=>{p&&h(p),l(b)})});let a=Math.floor(i/r);const o=i%r;if(i){const c=Math.min(s,r-o);s-=c,yield n(a++,c,o)}for(let c=s;c>0;++a,c-=r)yield n(a,Math.min(c,r))}async function Eg(t,e,r={}){if(!(t!=null&&t.put))throw new Error("First argument must be an abstract-chunk-store compliant store");const s=r.chunkLength||t.chunkLength;if(!s)throw new Error("missing required `chunkLength` property");const i=r.storeMaxOutstandingPuts||16;let n=0,a=0,o=()=>{},c=!1;for await(const u of Cd(e,s,{zeroPadding:r.zeroPadding||!1}))await new Promise(f=>{n++<=i&&f(),t.put(a++,u,l=>{if(l)throw l;--n,f(),c&&n===0&&o()})});n!==0&&(c=new Promise(u=>{o=u}),await c)}var Cg=ce(4018),bc=ce(3970),Pd=ce(3519),Dg=ce(1551);const Oa={DEFAULT_ANNOUNCE_PEERS:50,MAX_ANNOUNCE_PEERS:82,parseUrl:t=>{const e=new URL(t.replace(/^udp:/,"http:"));return t.match(/^udp:/)&&Object.defineProperties(e,{href:{value:e.href.replace(/^http/,"udp")},protocol:{value:e.protocol.replace(/^http/,"udp")},origin:{value:e.origin.replace(/^http/,"udp")}}),e},...ce.t(Dg,2)};var mc=ce(826),gc=ce(61),Dn=ce(2701);const Tg=Ft("simple-websocket"),Sn=typeof Dn!="function"?WebSocket:Dn;let Od=class extends Li.Duplex{constructor(e={}){if(typeof e=="string"&&(e={url:e}),super(e=Object.assign({allowHalfOpen:!1},e)),this.__objectMode=!!e.objectMode,e.objectMode!=null&&delete e.objectMode,e.url==null&&e.socket==null)throw new Error("Missing required `url` or `socket` option");if(e.url!=null&&e.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=(0,ae.V5)((0,ae.po)(4)).slice(0,7),this._debug("new websocket: %o",e),this.connected=!1,this._chunk=null,this._cb=null,this._interval=null,e.socket)this.url=e.socket.url,this._ws=e.socket,this.connected=e.socket.readyState===Sn.OPEN;else{this.url=e.url;try{this._ws=typeof Dn=="function"?new Sn(e.url,{...e,encoding:void 0}):new Sn(e.url)}catch(r){return void pt(()=>this.destroy(r))}}this._ws.binaryType="arraybuffer",e.socket&&this.connected?pt(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=r=>this._handleMessage(r),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=r=>this._handleError(r),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(e){this._ws.send(e)}_final(e){this._readableState.ended||this.push(null),e(null)}_destroy(e){if(!this.destroyed){if(this._writableState.ended||this.end(),this.connected=!1,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){const r=this._ws,s=()=>{r.onclose=null};if(r.readyState===Sn.CLOSED)s();else try{r.onclose=s,r.close()}catch{s()}r.onopen=null,r.onmessage=null,r.onerror=()=>{}}this._ws=null,e()}}_write(e,r){if(this.destroyed)return r(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(e)}catch(s){return this.destroy(s)}typeof Dn!="function"&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_handleOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(r){return this.destroy(r)}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}typeof Dn!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(e){if(this.destroyed)return;let r=e.data;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),this.__objectMode===!1&&(r=(0,ae.L0)(r)),this.push(r)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(e){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?e():this.once("connect",e)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>65536)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],Tg.apply(null,e)}};Od.WEBSOCKET_SUPPORT=!!Sn;const Mg=class extends pr{constructor(t,e){super(),this.client=t,this.announceUrl=e,this.interval=null,this.destroyed=!1}setInterval(t){t==null&&(t=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),t&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},t),this.interval.unref&&this.interval.unref())}},Ct=Ft("bittorrent-tracker:websocket-tracker"),sr={};let Fa=class extends Mg{constructor(e,r){super(e,r),Ct("new websocket tracker %s",r),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.announce(e)});const r=Object.assign({},e,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(r.trackerid=this._trackerId),e.event==="stopped"||e.event==="completed")this._send(r);else{const s=Math.min(e.numwant,5);this._generateOffers(s,i=>{r.numwant=s,r.offers=i,this._send(r)})}}scrape(e){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.scrape(e)});const r={action:"scrape",info_hash:Array.isArray(e.infoHash)&&e.infoHash.length>0?e.infoHash.map(s=>(0,ae.Ht)(s)):e.infoHash&&(0,ae.Ht)(e.infoHash)||this.client._infoHashBinary};this._send(r)}destroy(e=_c){if(this.destroyed)return e(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(const n in this.peers){const a=this.peers[n];clearTimeout(a.trackerTimeout),a.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,sr[this.announceUrl]&&(sr[this.announceUrl].consumers-=1),sr[this.announceUrl].consumers>0)return e();let r,s=sr[this.announceUrl];if(delete sr[this.announceUrl],s.on("error",_c),s.once("close",e),!this.expectingResponse)return i();function i(){r&&(clearTimeout(r),r=null),s.removeListener("data",i),s.destroy(),s=null}r=setTimeout(i,Oa.DESTROY_TIMEOUT),s.once("data",i)}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=e=>{this._onSocketError(e)},this._onSocketDataBound=e=>{this._onSocketData(e)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=sr[this.announceUrl],this.socket)sr[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{const e=new URL(this.announceUrl);let r;this.client._proxyOpts&&(r=e.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!r&&this.client._proxyOpts.socksProxy&&(r=this.client._proxyOpts.socksProxy)),this.socket=sr[this.announceUrl]=new Od({url:this.announceUrl,agent:r}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(e){if(!this.destroyed){this.expectingResponse=!1;try{e=JSON.parse((0,ae.dU)(e))}catch{return void this.client.emit("warning",new Error("Invalid tracker response"))}e.action==="announce"?this._onAnnounceResponse(e):e.action==="scrape"?this._onScrapeResponse(e):this._onSocketError(new Error(`invalid action in WS response: ${e.action}`))}}_onAnnounceResponse(e){if(e.info_hash!==this.client._infoHashBinary)return void Ct("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,(0,ae.HB)(e.info_hash),this.client.infoHash);if(e.peer_id&&e.peer_id===this.client._peerIdBinary)return;Ct("received %s from %s for %s",JSON.stringify(e),this.announceUrl,this.client.infoHash);const r=e["failure reason"];if(r)return this.client.emit("warning",new Error(r));const s=e["warning message"];s&&this.client.emit("warning",new Error(s));const i=e.interval||e["min interval"];i&&this.setInterval(1e3*i);const n=e["tracker id"];if(n&&(this._trackerId=n),e.complete!=null){const o=Object.assign({},e,{announce:this.announceUrl,infoHash:(0,ae.HB)(e.info_hash)});this.client.emit("update",o)}let a;if(e.offer&&e.peer_id&&(Ct("creating peer (from remote offer)"),a=this._createPeer(),a.id=(0,ae.HB)(e.peer_id),a.once("signal",o=>{const c={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:e.peer_id,answer:o,offer_id:e.offer_id};this._trackerId&&(c.trackerid=this._trackerId),this._send(c)}),this.client.emit("peer",a),a.signal(e.offer)),e.answer&&e.peer_id){const o=(0,ae.HB)(e.offer_id);a=this.peers[o],a?(a.id=(0,ae.HB)(e.peer_id),this.client.emit("peer",a),a.signal(e.answer),clearTimeout(a.trackerTimeout),a.trackerTimeout=null,delete this.peers[o]):Ct(`got unexpected answer: ${JSON.stringify(e.answer)}`)}}_onScrapeResponse(e){e=e.files||{};const r=Object.keys(e);r.length!==0?r.forEach(s=>{const i=Object.assign(e[s],{announce:this.announceUrl,infoHash:(0,ae.HB)(s)});this.client.emit("scrape",i)}):this.client.emit("warning",new Error("invalid scrape response"))}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(e){this.destroyed||(this.destroy(),this.client.emit("warning",e),this._startReconnectTimer())}_startReconnectTimer(){const e=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},e),this.reconnectTimer.unref&&this.reconnectTimer.unref(),Ct("reconnecting socket in %s ms",e)}_send(e){if(this.destroyed)return;this.expectingResponse=!0;const r=JSON.stringify(e);Ct("send %s",r),this.socket.send(r)}_generateOffers(e,r){const s=this,i=[];Ct("generating %s offers",e);for(let o=0;o<e;++o)n();function n(){const o=(0,ae.V5)((0,ae.po)(20));Ct("creating peer (from _generateOffers)");const c=s.peers[o]=s._createPeer({initiator:!0});c.once("signal",u=>{i.push({offer:u,offer_id:(0,ae.Ht)(o)}),a()}),c.trackerTimeout=setTimeout(()=>{Ct("tracker timeout: destroying peer"),c.trackerTimeout=null,delete s.peers[o],c.destroy()},5e4),c.trackerTimeout.unref&&c.trackerTimeout.unref()}function a(){i.length===e&&(Ct("generated %s offers",e),r(i))}a()}_createPeer(e){const r=this;e=Object.assign({trickle:!1,config:r.client._rtcConfig,wrtc:r.client._wrtc},e);const s=new oo(e);return s.once("error",i),s.once("connect",function n(){s.removeListener("error",i),s.removeListener("connect",n)}),s;function i(n){r.client.emit("warning",new Error(`Connection error: ${n.message}`)),s.destroy()}}};function _c(){}Fa.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,Fa._socketPool=sr;const Ig=Fa;var Pg=ce(717);const gr=Ft("bittorrent-tracker:client");class Ra extends pr{constructor(e={}){if(super(),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!e.announce)throw new Error("Option `announce` is required");if(!Pg.browser&&!e.port)throw new Error("Option `port` is required");this.peerId=typeof e.peerId=="string"?e.peerId:(0,ae.V5)(e.peerId),this._peerIdBuffer=(0,ae.fk)(this.peerId),this._peerIdBinary=(0,ae.Ht)(this.peerId),this.infoHash=typeof e.infoHash=="string"?e.infoHash.toLowerCase():(0,ae.V5)(e.infoHash),this._infoHashBuffer=(0,ae.fk)(this.infoHash),this._infoHashBinary=(0,ae.Ht)(this.infoHash),gr("new client %s",this.infoHash),this.destroyed=!1,this._port=e.port,this._getAnnounceOpts=e.getAnnounceOpts,this._rtcConfig=e.rtcConfig,this._userAgent=e.userAgent,this._proxyOpts=e.proxyOpts,this._wrtc=typeof e.wrtc=="function"?e.wrtc():e.wrtc;let r=typeof e.announce=="string"?[e.announce]:e.announce==null?[]:e.announce;r=r.map(n=>(ArrayBuffer.isView(n)&&(n=(0,ae.dU)(n)),n[n.length-1]==="/"&&(n=n.substring(0,n.length-1)),n)),r=Array.from(new Set(r));const s=this._wrtc!==!1&&(!!this._wrtc||oo.WEBRTC_SUPPORT),i=n=>{pt(()=>{this.emit("warning",n)})};this._trackers=r.map(n=>{let a;try{a=Oa.parseUrl(n)}catch{return i(new Error(`Invalid tracker URL: ${n}`)),null}const o=a.port;if(o<0||o>65535)return i(new Error(`Invalid tracker port: ${n}`)),null;const c=a.protocol;return c!=="http:"&&c!=="https:"||typeof mc!="function"?c==="udp:"&&typeof gc=="function"?new gc(this,n):c!=="ws:"&&c!=="wss:"||!s||c==="ws:"&&typeof window<"u"&&window.location.protocol==="https:"?(i(new Error(`Unsupported tracker protocol: ${n}`)),null):new Ig(this,n):new mc(this,n)}).filter(Boolean)}start(e){(e=this._defaultAnnounceOpts(e)).event="started",gr("send `start` %o",e),this._announce(e),this._trackers.forEach(r=>{r.setInterval()})}stop(e){(e=this._defaultAnnounceOpts(e)).event="stopped",gr("send `stop` %o",e),this._announce(e)}complete(e){e||(e={}),(e=this._defaultAnnounceOpts(e)).event="completed",gr("send `complete` %o",e),this._announce(e)}update(e){(e=this._defaultAnnounceOpts(e)).event&&delete e.event,gr("send `update` %o",e),this._announce(e)}_announce(e){this._trackers.forEach(r=>{r.announce(e)})}scrape(e){gr("send `scrape`"),e||(e={}),this._trackers.forEach(r=>{r.scrape(e)})}setInterval(e){gr("setInterval %d",e),this._trackers.forEach(r=>{r.setInterval(e)})}destroy(e){if(this.destroyed)return;this.destroyed=!0,gr("destroy");const r=this._trackers.map(s=>i=>{s.destroy(i)});Dr(r,e),this._trackers=[],this._getAnnounceOpts=null}_defaultAnnounceOpts(e={}){return e.numwant==null&&(e.numwant=Oa.DEFAULT_ANNOUNCE_PEERS),e.uploaded==null&&(e.uploaded=0),e.downloaded==null&&(e.downloaded=0),this._getAnnounceOpts&&(e=Object.assign({},e,this._getAnnounceOpts())),e}}Ra.scrape=(t,e)=>{if(e=Pd(e),!t.infoHash)throw new Error("Option `infoHash` is required");if(!t.announce)throw new Error("Option `announce` is required");const r=Object.assign({},t,{infoHash:Array.isArray(t.infoHash)?t.infoHash[0]:t.infoHash,peerId:(0,ae.L0)("01234567890123456789"),port:6881}),s=new Ra(r);s.once("error",e),s.once("warning",e);let i=Array.isArray(t.infoHash)?t.infoHash.length:1;const n={};return s.on("scrape",a=>{if(i-=1,n[a.infoHash]=a,i===0){s.destroy();const o=Object.keys(n);o.length===1?e(null,n[o[0]]):e(null,n)}}),s.scrape({infoHash:t.infoHash}),s};const Og=Ra;ce(7936);var vc=ce(2799),Fg=ce(717);const yc=Ft("torrent-discovery");class Rg extends pr.EventEmitter{constructor(e){if(super(),!e.peerId)throw new Error("Option `peerId` is required");if(!e.infoHash)throw new Error("Option `infoHash` is required");if(!Fg.browser&&!e.port)throw new Error("Option `port` is required");this.peerId=typeof e.peerId=="string"?e.peerId:e.peerId.toString("hex"),this.infoHash=typeof e.infoHash=="string"?e.infoHash.toLowerCase():e.infoHash.toString("hex"),this._port=e.port,this._userAgent=e.userAgent,this.destroyed=!1,this._announce=e.announce||[],this._intervalMs=e.intervalMs||9e5,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=s=>{this.emit("warning",s)},this._onError=s=>{this.emit("error",s)},this._onDHTPeer=(s,i)=>{i.toString("hex")===this.infoHash&&this.emit("peer",`${s.host}:${s.port}`,"dht")},this._onTrackerPeer=s=>{this.emit("peer",s,"tracker")},this._onTrackerAnnounce=()=>{this.emit("trackerAnnounce")},this._onLSDPeer=(s,i)=>{this.emit("peer",s,"lsd")};const r=(s,i)=>{const n=new bc.Client(i);return n.on("warning",this._onWarning),n.on("error",this._onError),n.listen(s),this._internalDHT=!0,n};e.tracker===!1?this.tracker=null:e.tracker&&typeof e.tracker=="object"?(this._trackerOpts=Object.assign({},e.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),e.dht===!1||typeof bc.Client!="function"?this.dht=null:e.dht&&typeof e.dht.addNode=="function"?this.dht=e.dht:e.dht&&typeof e.dht=="object"?this.dht=r(e.dhtPort,e.dht):this.dht=r(e.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce()),e.lsd===!1||typeof vc!="function"?this.lsd=null:this.lsd=this._createLSD()}updatePort(e){e!==this._port&&(this._port=e,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(e){this.tracker&&this.tracker.complete(e)}destroy(e){if(this.destroyed)return;this.destroyed=!0,clearTimeout(this._dhtTimeout);const r=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),r.push(s=>{this.tracker.destroy(s)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),r.push(s=>{this.dht.destroy(s)})),this.lsd&&(this.lsd.removeListener("warning",this._onWarning),this.lsd.removeListener("error",this._onError),this.lsd.removeListener("peer",this._onLSDPeer),r.push(s=>{this.lsd.destroy(s)})),Dr(r,e),this.dht=null,this.tracker=null,this.lsd=null,this._announce=null}_createTracker(){const e=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),r=new Og(e);return r.on("warning",this._onWarning),r.on("error",this._onError),r.on("peer",this._onTrackerPeer),r.on("update",this._onTrackerAnnounce),r.setInterval(this._intervalMs),r.start(),r}_dhtAnnounce(){this._dhtAnnouncing||(yc("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,e=>{this._dhtAnnouncing=!1,yc("dht announce complete"),e&&this.emit("warning",e),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+Math.floor(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}_createLSD(){const e=Object.assign({},{infoHash:this.infoHash,peerId:this.peerId,port:this._port}),r=new vc(e);return r.on("warning",this._onWarning),r.on("error",this._onError),r.on("peer",this._onLSDPeer),r.start(),r}}const Lg=Rg,Bg=["seeking position failed.","InvalidStateError"],Ng=["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],Qs=t=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${t}`,"SyntaxError"];class Xn extends WritableStream{constructor(e){super(e),Object.setPrototypeOf(this,FileSystemWritableFileStream.prototype),this._closed=!1}async close(){this._closed=!0;const e=this.getWriter(),r=e.close();return e.releaseLock(),r}seek(e){return this.write({type:"seek",position:e})}truncate(e){return this.write({type:"truncate",size:e})}write(e){if(this._closed)return Promise.reject(new TypeError("Cannot write to a CLOSED writable stream"));const r=this.getWriter(),s=r.write(e);return r.releaseLock(),s}}if(Object.defineProperty(Xn.prototype,Symbol.toStringTag,{value:"FileSystemWritableFileStream",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Xn.prototype,{close:{enumerable:!0},seek:{enumerable:!0},truncate:{enumerable:!0},write:{enumerable:!0}}),!globalThis.FileSystemFileHandle||globalThis.FileSystemFileHandle.prototype.createWritable||globalThis.FileSystemWritableFileStream||(globalThis.FileSystemWritableFileStream=Xn),globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable){const t=new WeakMap;let e;const r=()=>{let i,n;onmessage=async a=>{const o=a.ports[0],c=a.data;switch(c.type){case"open":{const u=c.name;let f=await navigator.storage.getDirectory();for(const l of c.path)f=await f.getDirectoryHandle(l);i=await f.getFileHandle(u),n=await i.createSyncAccessHandle();break}case"write":n.write(c.data,{at:c.position}),n.flush();break;case"truncate":n.truncate(c.size);break;case"abort":case"close":n.close()}o.postMessage(0)}};globalThis.FileSystemFileHandle.prototype.createWritable=async function(i){if(!e){const p=`(${r.toString()})()`,b=new Blob([p],{type:"text/javascript"});e=URL.createObjectURL(b)}const n=new Worker(e,{type:"module"});let a=0;const o=new TextEncoder;let c=await this.getFile().then(p=>p.size);const u=p=>new Promise((b,m)=>{const v=new MessageChannel;v.port1.onmessage=x=>{x.data instanceof Error?m(x.data):b(x.data),v.port1.close(),v.port2.close(),v.port1.onmessage=null},n.postMessage(p,[v.port2])}),f=await navigator.storage.getDirectory(),l=await t.get(this),h=await f.resolve(l);if(h===null)throw new DOMException(...Ng);return await u({type:"open",path:h,name:this.name}),(i==null?void 0:i.keepExistingData)===!1&&(await u({type:"truncate",size:0}),c=0),new Xn({async write(p){if((p=(p==null?void 0:p.constructor)===Object?{...p}:{type:"write",data:p,position:a}).type==="write"){if(!("data"in p))throw await u({type:"close"}),new DOMException(...Qs("write requires a data argument"));if(p.position??(p.position=a),typeof p.data=="string")p.data=o.encode(p.data);else if(p.data instanceof ArrayBuffer)p.data=new Uint8Array(p.data);else if(p.data instanceof Uint8Array||!ArrayBuffer.isView(p.data)){if(!(p.data instanceof Uint8Array)){const b=await new Response(p.data).arrayBuffer();p.data=new Uint8Array(b)}}else p.data=new Uint8Array(p.data.buffer,p.data.byteOffset,p.data.byteLength);Number.isInteger(p.position)&&p.position>=0&&(a=p.position),a+=p.data.byteLength,c+=p.data.byteLength}else{if(p.type==="seek"){if(Number.isInteger(p.position)&&p.position>=0){if(c<p.position)throw new DOMException(...Bg);return void(a=p.position)}throw await u({type:"close"}),new DOMException(...Qs("seek requires a position argument"))}if(p.type==="truncate"){if(!(Number.isInteger(p.size)&&p.size>=0))throw await u({type:"close"}),new DOMException(...Qs("truncate requires a size argument"));c=p.size,a>c&&(a=c)}}await u(p)},async close(){await u({type:"close"}),n.terminate()},async abort(p){await u({type:"abort",reason:p}),n.terminate()}})};const s=FileSystemDirectoryHandle.prototype.getFileHandle;FileSystemDirectoryHandle.prototype.getFileHandle=async function(...i){const n=await s.call(this,...i);return t.set(n,this),n}}const zg=/[<>:"/\\|?*\u0000-\u001F]/g;var af,of;(of=(af=globalThis.navigator)==null?void 0:af.storage)!=null&&of.getDirectory&&navigator.storage.getDirectory().then(t=>{t.removeEntry("chunks",{recursive:!0}).catch(()=>{})});const vn=(t,e)=>{};class Fd{constructor(e,r={}){_t(this,"name","");_t(this,"chunks",[]);_t(this,"chunkMap",[]);_t(this,"directoryMap",{});_t(this,"files");_t(this,"rootDirPromise");_t(this,"storageDirPromise");_t(this,"chunksDirPromise");_t(this,"closing",!1);_t(this,"closed",!1);var s,i;if(this.chunkLength=Number(e),!this.chunkLength)throw new Error("First argument must be a chunk length");if(!((i=(s=globalThis.navigator)==null?void 0:s.storage)!=null&&i.getDirectory))throw new Error("FSA API is not supported");if(this.closed=!1,this.name=r.name||crypto.randomUUID(),this.rootDirPromise=r.rootDir||navigator.storage.getDirectory(),this.storageDirPromise=(async()=>(await this.rootDirPromise).getDirectoryHandle(this.name,{create:!0}))(),this.chunksDirPromise=this.storageDirPromise,r.files&&r.rootDir){if(this.chunksDirPromise=this._getChunksDirHandle(),this.files=r.files.map((n,a,o)=>{if(n.path==null)throw new Error("File is missing `path` property");if(n.length==null)throw new Error("File is missing `length` property");if(n.offset==null)if(a===0)n.offset=0;else{const h=o[a-1];n.offset=h.offset+h.length}n.handle==null&&(n.handle=this._createFileHandle({path:n.path})),n.blob=this._createBlobReference(n.handle);const c=n.offset,u=n.offset+n.length,f=Math.floor(c/this.chunkLength),l=Math.floor((u-1)/this.chunkLength);for(let h=f;h<=l;++h){const p=h*this.chunkLength,b=c<p?0:c-p,m=u>p+this.chunkLength?this.chunkLength:u-p,v=c>p?0:p-c;this.chunkMap[h]||(this.chunkMap[h]=[]),this.chunkMap[h].push({from:b,to:m,offset:v,file:n})}return n}),window.addEventListener("pagehide",()=>this.cleanup()),this.length=this.files.reduce((n,a)=>n+a.length,0),r.length!=null&&r.length!==this.length)throw new Error("total `files` length is not equal to explicit `length` option")}else this.length=Number(r.length)||1/0;this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}async _getChunkHandle(e){let r=this.chunks[e];if(!r){const s=await this.chunksDirPromise;this.chunks[e]=r=await s.getFileHandle(e,{create:!0})}return r}async _createFileHandle(e){const r=e.path.slice(e.path.lastIndexOf("/")+1);return(await this._getDirectoryHandle(e)).getFileHandle(r.replace(zg,""),{create:!0})}async _createBlobReference(e){return(await e).getFile()}async _getDirectoryHandle(e){const r=e.path.lastIndexOf("/");if(r===-1||r===0)return this.storageDirPromise;const s=e.path=e.path.slice(0,r);return this.directoryMap[s]||(this.directoryMap[s]=(async()=>(await this._getDirectoryHandle(e)).getDirectoryHandle(s.slice(s.lastIndexOf("/")+1),{create:!0}))()),this.directoryMap[s]}async _getChunksDirHandle(){return(await(await navigator.storage.getDirectory()).getDirectoryHandle("chunks",{create:!0})).getDirectoryHandle(this.name,{create:!0})}async put(e,r,s=vn){try{return await this._put(e,r),s(null),null}catch(i){return queueMicrotask(()=>s(i)),i}}async getStreamForHandle(e){return(await e).createWritable({keepExistingData:!0})}async _put(e,r){if(this.closed)throw new Error("Storage is closed");const s=e===this.lastChunkIndex;if(s&&r.length!==this.lastChunkLength)throw new Error(`Last chunk length must be ${this.lastChunkLength}`);if(!s&&r.length!==this.chunkLength)throw new Error(`Chunk length must be ${this.chunkLength}`);const i=(async()=>{const o=await this._getChunkHandle(e),c=await o.createWritable({keepExistingData:!1});await c.write(r),await c.close()})();if(!this.files)return i;const n=this.chunkMap[e];if(!n)throw new Error("No files matching the request range");const a=n.map(async({file:o,offset:c,from:u,to:f})=>{o.stream||(o.stream=this.getStreamForHandle(o.handle)),await(await o.stream).write({type:"write",position:c,data:r.slice(u,f)})});a.push(i),await Promise.all(a)}async get(e,r,s=vn){r==null&&(r={});try{const i=await this._get(e,r);return s(null,i),i}catch(i){return s(i),i}}async _get(e,r){if(typeof r=="function")return this.get(e,void 0,r);if(this.closed)throw new Error("Storage is closed");const s=e===this.lastChunkIndex?this.lastChunkLength:this.chunkLength,i=r.offset||0,n=r.length?i+r.length:s,a=r.length||s-i;if(i<0||i<0||n>s)throw new Error("Invalid offset and/or length");if(i===n)return new Uint8Array(0);if(!this.files||this.chunks[e]){let h=await(await this._getChunkHandle(e)).getFile();i===0&&a===s||(h=h.slice(i,a+i));const p=await h.arrayBuffer();if(p.byteLength===0)throw new Error(`Index ${e} does not exist`);return new Uint8Array(p)}let o=this.chunkMap[e];if(!o)throw new Error("No files matching the request range");if(r&&(o=o.filter(({from:l,to:h})=>h>i&&l<n),o.length===0))throw new Error("No files matching the request range");const c=o.map(async({from:l,to:h,offset:p,file:b})=>(r&&(h>n&&(h=n),l<i&&(p+=i-l,l=i)),(await b.blob).slice(p,p+h-l))),u=await Promise.all(c),f=u.length===1?await u[0].arrayBuffer():await new Blob(u).arrayBuffer();if(f.byteLength===0)throw new Error(`Index ${e} does not exist`);return new Uint8Array(f)}async close(e=vn){if(this.closing)return((r=vn,s)=>queueMicrotask(()=>r(new Error(s))))(e,"Storage is closed");this.closing=!0,this.chunkMap=void 0,this.directoryMap=void 0,this.files&&await this.cleanup(),this.closed=!0,queueMicrotask(()=>e(null))}async cleanup(){if(this.closed||!this.files)return;const e=[];for(const s of this.files)s.stream&&(e.push(s.stream.then(i=>i.close())),s.stream=void 0);const r=(async()=>{const s=await this.chunksDirPromise;this.chunks=[];for await(const i of s.keys())await s.removeEntry(i,{recursive:!0});this.chunksDirPromise=this._getChunksDirHandle(),await this.chunksDirPromise})();await Promise.all(e);for(const s of this.files)s.blob=this._createBlobReference(s.handle);await r}async destroy(e=vn){this.close(async r=>{if(r)return e(r);try{await(await this.rootDirPromise).removeEntry(this.name,{recursive:!0})}catch(s){return e(s)}e(null)})}}var jg=ce(3714),qg=ce(1314);const wc=Ft("lt_donthave"),Rd=()=>{class t extends pr.EventEmitter{constructor(r){super(),this._peerSupports=!1,this._wire=r}onExtendedHandshake(){this._peerSupports=!0}onMessage(r){let s;try{s=new DataView(r.buffer).getUint32(0)}catch{return}this._wire.peerPieces.get(s)&&(wc("got donthave %d",s),this._wire.peerPieces.set(s,!1),this.emit("donthave",s),this._failRequests(s))}donthave(r){if(!this._peerSupports)return;wc("donthave %d",r);const s=new Uint8Array(4);new DataView(s.buffer).setUint32(0,r),this._wire.extended("lt_donthave",s)}_failRequests(r){const s=this._wire.requests;for(let i=0;i<s.length;i++){const n=s[i];n.piece===r&&(qg(s,i),i-=1,this._wire._callback(n,new Error("peer sent donthave"),null))}}}return t.prototype.name="lt_donthave",t};var Ld=ce(4862),xc=ce(5372);const Wt=16384;class ur{constructor(e){this.length=e,this.missing=e,this.sources=null,this._chunks=Math.ceil(e/Wt),this._remainder=e%Wt||Wt,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(e){return e===this._chunks-1?this._remainder:Wt}chunkLengthRemaining(e){return this.length-e*Wt}chunkOffset(e){return e*Wt}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._cancellations.length||this._reservations<this._chunks){let e=this._reservations;for(;this._cancellations.length;)e=Math.min(e,this._cancellations.pop());return this._reservations=this._chunks,e}return-1}cancel(e){this.init()&&this._cancellations.push(e)}cancelRemaining(e){this.init()&&(this._reservations=e)}get(e){return this.init()?this._buffer[e]:null}set(e,r,s){if(!this.init())return!1;const i=r.length,n=Math.ceil(i/Wt);for(let a=0;a<n;a++)if(!this._buffer[e+a]){const o=a*Wt,c=r.slice(o,o+Wt);this._buffered++,this._buffer[e+a]=c,this.missing-=c.length,this.sources.includes(s)||this.sources.push(s)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const e=(0,ae.xW)(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,e}init(){return!this._flushed&&(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)}}ur.BLOCK_LENGTH=Wt;var Ug=ce(7373);const $g=Ft("ut_metadata"),yn=16384,Hg=t=>{class e extends pr.EventEmitter{constructor(s){super(),this._wire=s,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new ki.A(0,{grow:1e3}),ArrayBuffer.isView(t)&&this.setMetadata(t)}onHandshake(s,i,n){this._infoHash=s}onExtendedHandshake(s){return s.m&&s.m.ut_metadata?s.metadata_size?typeof s.metadata_size!="number"||1e7<s.metadata_size||s.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=s.metadata_size,this._numPieces=Math.ceil(this._metadataSize/yn),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(s){let i,n;try{const a=(0,ae.dU)(s),o=a.indexOf("ee")+2;i=Zt.A.decode(a.substring(0,o)),n=s.slice(o)}catch{return}switch(i.msg_type){case 0:this._onRequest(i.piece);break;case 1:this._onData(i.piece,n,i.total_size);break;case 2:this._onReject(i.piece)}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}async setMetadata(s){if(this._metadataComplete)return!0;$g("set metadata");try{const i=Zt.A.decode(s).info;i&&(s=Zt.A.encode(i))}catch{}return(!this._infoHash||this._infoHash===await(0,ae.tW)(s,"hex"))&&(this.cancel(),this.metadata=s,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",Zt.A.encode({info:Zt.A.decode(this.metadata)})),!0)}_send(s,i){let n=Zt.A.encode(s);ArrayBuffer.isView(i)&&(n=(0,ae.xW)([n,i])),this._wire.extended("ut_metadata",n)}_request(s){this._send({msg_type:0,piece:s})}_data(s,i,n){const a={msg_type:1,piece:s};typeof n=="number"&&(a.total_size=n),this._send(a,i)}_reject(s){this._send({msg_type:2,piece:s})}_onRequest(s){if(!this._metadataComplete)return void this._reject(s);const i=s*yn;let n=i+yn;n>this._metadataSize&&(n=this._metadataSize);const a=this.metadata.slice(i,n);this._data(s,a,this._metadataSize)}_onData(s,i,n){i.length>yn||!this._fetching||(this.metadata.set(i,s*yn),this._bitfield.set(s),this._checkDone())}_onReject(s){this._remainingRejects>0&&this._fetching?(this._request(s),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=new Uint8Array(this._metadataSize);for(let s=0;s<this._numPieces;s++)this._request(s)}}async _checkDone(){let s=!0;for(let i=0;i<this._numPieces;i++)if(!this._bitfield.get(i)){s=!1;break}s&&(await this.setMetadata(this.metadata)||this._failedMetadata())}_failedMetadata(){this._bitfield=new ki.A(0,{grow:1e3}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return e.prototype.name="ut_metadata",e};var ea=ce(8878),Wg=ce(1133);const Vg=Ft("webtorrent:file-iterator");class Gg extends pr{constructor(e,{start:r,end:s}){super(),this._torrent=e._torrent,this._pieceLength=e._torrent.pieceLength,this._startPiece=(r+e.offset)/this._pieceLength|0,this._endPiece=(s+e.offset)/this._pieceLength|0,this._piece=this._startPiece,this._offset=r+e.offset-this._startPiece*this._pieceLength,this._missing=s-r+1,this._criticalLength=Math.min(1048576/this._pieceLength|0,2),this._torrent._select(this._startPiece,this._endPiece,1,null,!0),this.destroyed=!1}[Symbol.asyncIterator](){return this}next(){return new Promise((e,r)=>{if(this._missing===0||this.destroyed)return e({done:!0}),this.destroy();const s=(n,a)=>{if(!this._torrent.bitfield.get(n)){const o=c=>{(c===n||this.destroyed)&&(this._torrent.removeListener("verified",o),s(n,a))};return this._torrent.on("verified",o),this._torrent.critical(n,n+this._criticalLength)}if(this._torrent.destroyed)return r(new Error("Torrent removed"));this._torrent.store.get(n,a,(o,c)=>this.destroyed?e({done:!0}):(Vg("read %s and yielding (length %s) (err %s)",n,c==null?void 0:c.length,o==null?void 0:o.message),o?r(o):void e({value:c,done:!1})))},i=Math.min(this._missing,this._pieceLength-this._offset);s(this._piece++,{length:i,offset:this._offset}),this._missing-=i,this._offset=0})}async return(){return this.destroy(),{done:!0}}async throw(e){throw e}destroy(e=()=>{},r){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent._deselect(this._startPiece,this._endPiece,!0),this.emit("return"),e(r))}}class kc extends pr{constructor(e,r){super(),this._torrent=e,this._destroyed=!1,this._fileStreams=new Set,this._iterators=new Set,this.name=r.name,this.path=r.path,this.length=r.length,this.size=r.length,this.type=Wg.getType(this.name)||"application/octet-stream",this.offset=r.offset,this.done=!1;const s=r.offset,i=s+r.length-1;this._startPiece=s/this._torrent.pieceLength|0,this._endPiece=i/this._torrent.pieceLength|0,this.length===0&&(this.done=!0,this.emit("done")),this._client=e.client}get downloaded(){if(this._destroyed||!this._torrent.bitfield)return 0;const{pieces:e,bitfield:r,pieceLength:s,lastPieceLength:i}=this._torrent,{_startPiece:n,_endPiece:a}=this,o=u=>{const f=u===e.length-1?i:s;return r.get(u)?f:f-e[u].missing};let c=0;for(let u=n;u<=a;u+=1){const f=o(u);if(c+=f,u===n){const l=this.offset%s;c-=Math.min(l,f)}if(u===a){const l=(a===e.length-1?i:s)-(this.offset+this.length)%s;c-=Math.min(l,f)}}return c}get progress(){return this.length?this.downloaded/this.length:0}select(e){this.length!==0&&this._torrent.select(this._startPiece,this._endPiece,e)}deselect(){this.length!==0&&this._torrent.deselect(this._startPiece,this._endPiece)}[Symbol.asyncIterator](e={}){if(this.length===0)return async function*(){}();const{start:r=0}=e??{},s=e!=null&&e.end&&e.end<this.length?e.end:this.length-1;if(this.done)return Sg(this._torrent.store,{offset:r+this.offset,length:s-r+1});const i=new Gg(this,{start:r,end:s});return this._iterators.add(i),i.once("return",()=>{this._iterators.delete(i)}),i}createReadStream(e){const r=this[Symbol.asyncIterator](e),s=Li.Readable.from(r);return this._fileStreams.add(s),s.once("close",()=>{this._fileStreams.delete(s)}),s}async arrayBuffer(e={}){const{start:r=0}=e,s=e!=null&&e.end&&e.end<this.length?e.end:this.length-1,i=new Uint8Array(s-r+1);let n=0;for await(const a of this[Symbol.asyncIterator]({start:r,end:s}))i.set(a,n),n+=a.length;return i.buffer}async blob(e){return new Blob([await this.arrayBuffer(e)],{type:this.type})}stream(e){let r;return new ReadableStream({start:()=>{r=this[Symbol.asyncIterator](e)},async pull(s){const{value:i,done:n}=await r.next();n?s.close():s.enqueue(i)},cancel(){r.return()}})}get streamURL(){if(!this._client._server)throw new Error("No server created");return`${this._client._server.pathname}/${this._torrent.infoHash}/${this.path}`}streamTo(e){return e.src=this.streamURL,e}includes(e){return this._startPiece<=e&&this._endPiece>=e}_destroy(){this._destroyed=!0,this._torrent=null;for(const e of this._fileStreams)e.destroy();this._fileStreams.clear();for(const e of this._iterators)e.destroy();this._iterators.clear()}}var Dt=ce(5658);class Zg{constructor(e){this._torrent=e,this._numPieces=e.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=r=>{this.recalculate(),this._initWire(r)},this._onWireHave=r=>{this._pieces[r]+=1},this._onWireBitfield=()=>{this.recalculate()},this._torrent.wires.forEach(r=>{this._initWire(r)}),this._torrent.on("wire",this._onWire),this.recalculate()}getRarestPiece(e){let r=[],s=1/0;for(let i=0;i<this._numPieces;++i){if(e&&!e(i))continue;const n=this._pieces[i];n===s?r.push(i):n<s&&(r=[i],s=n)}return r.length?r[Math.random()*r.length|0]:-1}destroy(){this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(e=>{this._cleanupWireEvents(e)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}_initWire(e){e._onClose=()=>{this._cleanupWireEvents(e);for(let r=0;r<this._numPieces;++r)this._pieces[r]-=e.peerPieces.get(r)},e.on("have",this._onWireHave),e.on("bitfield",this._onWireBitfield),e.once("close",e._onClose)}recalculate(){this._pieces.fill(0);for(const e of this._torrent.wires)for(let r=0;r<this._numPieces;++r)this._pieces[r]+=e.peerPieces.get(r)}_cleanupWireEvents(e){e.removeListener("have",this._onWireHave),e.removeListener("bitfield",this._onWireBitfield),e._onClose&&e.removeListener("close",e._onClose),e._onClose=null}}var Kg=ce(4343),Jg=ce(6458),jn=ce(6819);const nr=Ft("webtorrent:webconn");class Xg extends Jg.A{constructor(e,r){super(),this.url=e,this.connId=e,this._torrent=r,this._init(e)}_init(e){this.setKeepAlive(!0),this.use(Rd()),this.once("handshake",async(r,s)=>{const i=await(0,ae.tW)(e,"hex");if(this.destroyed)return;this.handshake(r,i);const n=this._torrent.pieces.length,a=new ki.A(n);for(let o=0;o<=n;o++)a.set(o,!0);this.bitfield(a)}),this.once("interested",()=>{nr("interested"),this.unchoke()}),this.on("uninterested",()=>{nr("uninterested")}),this.on("choke",()=>{nr("choke")}),this.on("unchoke",()=>{nr("unchoke")}),this.on("bitfield",()=>{nr("bitfield")}),this.lt_donthave.on("donthave",()=>{nr("donthave")}),this.on("request",(r,s,i,n)=>{nr("request pieceIndex=%d offset=%d length=%d",r,s,i),this.httpRequest(r,s,i,(a,o)=>{if(a){this.lt_donthave.donthave(r);const c=setTimeout(()=>{this.destroyed||this.have(r)},1e4);c.unref&&c.unref()}n(a,o)})})}async httpRequest(e,r,s,i){i=Pd(i);const n=e*this._torrent.pieceLength+r,a=n+s-1,o=this._torrent.files;let c,u;if(o.length<=1)c=[{url:this.url,start:n,end:a}];else{const f=o.filter(l=>l.offset<=a&&l.offset+l.length>n);if(f.length<1)return i(new Error("Could not find file corresponding to web seed range request"));c=f.map(l=>{const h=l.offset+l.length-1;return{url:this.url+(this.url[this.url.length-1]==="/"?"":"/")+l.path.replace(this._torrent.path,""),fileOffsetInRange:Math.max(l.offset-n,0),start:Math.max(n-l.offset,0),end:Math.min(h,a-l.offset)}})}try{u=await Promise.all(c.map(async({start:f,end:l,url:h})=>{nr("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",h,e,r,s,f,l);const p=await ao(h,{cache:"no-store",method:"GET",headers:{"Cache-Control":"no-store","user-agent":`WebTorrent/${jn} (https://webtorrent.io)`,range:`bytes=${f}-${l}`},signal:AbortSignal.timeout(6e4)});if(!p.ok)throw new Error(`Unexpected HTTP status code ${p.status}`);const b=new Uint8Array(await p.arrayBuffer());return nr("Got data of length %d",b.length),b}))}catch(f){return i(f)}i(null,(0,ae.xW)(u))}destroy(){super.destroy(),this._torrent=null}}class Yg{constructor(){_t(this,"_items",[])}remove(e){for(let r=0;r<this._items.length;r++){const s=this._items[r];if(s.isStreamSelection){if(!e.isStreamSelection)continue;if(s.from===e.from&&s.to===e.to){this._items.splice(r,1);break}}else if(Bd(e,s))s.to=Math.max(e.from-1,0);else if(Nd(e,s))s.from=e.to+1;else if(zd(e,s)){const i=[],n={...s,to:Math.max(e.from-1,0)};n.to-n.from>=0&&e.from!==0&&i.push(n);const a={...s,from:e.to+1};a.to-a.from>=0&&i.push(a),this._items.splice(r,1,...i),r=r-1+i.length}else jd(e,s)&&(this._items.splice(r,1),r--)}}insert(e){if(e.from>e.to)throw new Error("Invalid interval");if(!e.isStreamSelection){const{notify:r}=e,s=[];for(const i of this._items)i.notify&&Qg(e,i)&&s.push(i.notify);s.length>0&&(e.notify=()=>{s.forEach(i=>i()),r==null||r()}),this.remove(e)}this._items.push(e)}sort(e=(r,s)=>r.from-s.from){this._items.sort(e)}get length(){return this._items.length}get(e){return this._items[e]}swap(e,r){const s=this._items[e];this._items[e]=this._items[r],this._items[r]=s}clear(){this._items.length=0}*[Symbol.iterator](){for(let e=0;e<this._items.length;e++){const r=this._items[e];r.remove=()=>{this._items.splice(e,1),e--},yield r,delete r.remove}}}function Bd(t,e){return t.from<=e.to&&t.from>e.from&&t.to>e.to}function Nd(t,e){return t.to>=e.from&&t.to<e.to&&t.from<e.from}function zd(t,e){const r=e.to-e.from,s=t.to-t.from;return t.from>=e.from&&t.to<=e.to&&s<r}function jd(t,e){return t.from<=e.from&&t.to>=e.to}const Qg=(t,e)=>()=>Bd(t,e)||Nd(t,e)||zd(t,e)||jd(t,e);var qd=ce(717);const e3=Ft("webtorrent:torrent"),ta=5e3,ra=3*ur.BLOCK_LENGTH,Ac=qd.browser?Cg().length:2,na=[1e3,5e3,15e3],Sc=`WebTorrent/${jn} (https://webtorrent.io)`;var uf,cf,ff,lf;const t3=((cf=(uf=globalThis.navigator)==null?void 0:uf.storage)==null?void 0:cf.getDirectory)&&((lf=(ff=globalThis.FileSystemFileHandle)==null?void 0:ff.prototype)==null?void 0:lf.createWritable),r3=!qd.browser||t3?Fd:Ld;let La;try{La=On(Id.statSync("/tmp")&&"/tmp","webtorrent")}catch{La=On(typeof pc.tmpdir=="function"?pc.tmpdir():"/","webtorrent")}const Ec=typeof window<"u"&&typeof window.requestIdleCallback=="function"&&window.requestIdleCallback;class Cc extends pr{constructor(e,r,s){super(),this._debugId="unknown infohash",this.client=r,this.announce=s.announce,this.urlList=s.urlList,this.path=s.path||La,this.addUID=s.addUID||!1,this.rootDir=s.rootDir||null,this.skipVerify=!!s.skipVerify,this._store=s.store||r3,this._preloadedStore=s.preloadedStore||null,this._storeCacheSlots=s.storeCacheSlots!==void 0?s.storeCacheSlots:20,this._destroyStoreOnDestroy=s.destroyStoreOnDestroy||!1,this.store=null,this.storeOpts=s.storeOpts,this.alwaysChokeSeeders=s.alwaysChokeSeeders??!0,this._getAnnounceOpts=s.getAnnounceOpts,typeof s.private=="boolean"&&(this.private=s.private),this.strategy=s.strategy||"sequential",this.maxWebConns=s.maxWebConns||4,this._rechokeNumSlots=s.uploads===!1||s.uploads===0?0:+s.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this._noPeersIntervalId=null,this._noPeersIntervalTime=s.noPeersIntervalTime?1e3*s.noPeersIntervalTime:3e4,this._startAsDeselected=s.deselect||!1,this.ready=!1,this.destroyed=!1,this.paused=s.paused||!1,this.done=!1,this.metadata=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=new Yg,this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=xi(),this._uploadSpeed=xi(),this._servers=[],this._xsRequests=[],this._fileModtimes=s.fileModtimes,e!==null&&this._onTorrentId(e),this._debug("new torrent")}get timeRemaining(){return this.done?0:this.downloadSpeed===0?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}get downloaded(){if(!this.bitfield)return 0;let e=0;for(let r=0,s=this.pieces.length;r<s;++r)if(this.bitfield.get(r))e+=r===s-1?this.lastPieceLength:this.pieceLength;else{const i=this.pieces[r];e+=i.length-i.missing}return e}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){return this.length?this.downloaded/this.length:0}get ratio(){return this.uploaded/(this.received||this.length)}get numPeers(){return this.wires.length}get torrentFileBlob(){return this.torrentFile?new Blob([this.torrentFile],{type:"application/x-bittorrent"}):null}get _numQueued(){return this._queue.length+(this._peersLength-this._numConns)}get _numConns(){let e=0;for(const r in this._peers)this._peers[r].connected&&(e+=1);return e}async _onTorrentId(e){if(this.destroyed)return;let r;try{r=await li(e)}catch{}r?(this.infoHash=r.infoHash,this._debugId=(0,ae.V5)(r.infoHash).substring(0,7),pt(()=>{this.destroyed||this._onParsedTorrent(r)})):Md(e,(s,i)=>{if(!this.destroyed)return s?this._destroy(s):void this._onParsedTorrent(i)})}_onParsedTorrent(e){if(!this.destroyed){if(this._processParsedTorrent(e),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this._rechokeIntervalId=setInterval(()=>{this._rechoke()},1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),this.destroyed||(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",()=>{this._onListening()})))}}_processParsedTorrent(e){this._debugId=(0,ae.V5)(e.infoHash).substring(0,7),this.private!==void 0&&(e.private=this.private),Array.isArray(this.announce)&&(e.announce=e.announce.concat(this.announce)),this.client.tracker&&Array.isArray(this.client.tracker.announce)&&!e.private&&(e.announce=e.announce.concat(this.client.tracker.announce)),this.client.tracker&&globalThis.WEBTORRENT_ANNOUNCE&&!e.private&&(e.announce=e.announce.concat(globalThis.WEBTORRENT_ANNOUNCE)),this.urlList&&(e.urlList=e.urlList.concat(this.urlList)),e.announce=Array.from(new Set(e.announce)),e.urlList=Array.from(new Set(e.urlList)),Object.assign(this,e),this.magnetURI=vg(e),this.torrentFile=function(r){const s={info:r.info};return s["announce-list"]=(r.announce||[]).map(i=>(s.announce||(s.announce=i),[i=(0,ae.L0)(i)])),s["url-list"]=r.urlList||[],r.private!==void 0&&(s.private=Number(r.private)),r.created&&(s["creation date"]=r.created.getTime()/1e3|0),r.createdBy&&(s["created by"]=r.createdBy),r.comment&&(s.comment=r.comment),Zt.A.encode(s)}(e)}_onListening(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}_startDiscovery(){if(this.discovery||this.destroyed)return;let e=this.client.tracker;e&&(e=Object.assign({},this.client.tracker,{getAnnounceOpts:()=>{if(this.destroyed)return;const r={uploaded:this.uploaded,downloaded:this.downloaded,left:Math.max(this.length-this.downloaded,0)};return this.client.tracker.getAnnounceOpts&&Object.assign(r,this.client.tracker.getAnnounceOpts()),this._getAnnounceOpts&&Object.assign(r,this._getAnnounceOpts()),r}})),this.peerAddresses&&this.peerAddresses.forEach(r=>this.addPeer(r,Dt.default.SOURCE_MANUAL)),this.discovery=new Lg({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:e,port:this.client.torrentPort,userAgent:Sc,lsd:this.client.lsd}),this.discovery.on("error",r=>{this._destroy(r)}),this.discovery.on("peer",(r,s)=>{this._debug("peer %s discovered via %s",r,s),this.client.seedOutgoingConnections||!this.done?this.addPeer(r,s):this._debug("discovery ignoring peer %s: torrent is done and seedOutgoingConnections is false",r)}),this.discovery.on("trackerAnnounce",()=>{this.emit("trackerAnnounce")}),this.discovery.on("dhtAnnounce",()=>{this.emit("dhtAnnounce")}),this.discovery.on("warning",r=>{this.emit("warning",r)}),this._noPeersIntervalId=setInterval(()=>{if(this.destroyed)return;const r={[Dt.default.SOURCE_TRACKER]:{enabled:!!this.client.tracker,numPeers:0},[Dt.default.SOURCE_DHT]:{enabled:!!this.client.dht,numPeers:0},[Dt.default.SOURCE_LSD]:{enabled:!!this.client.lsd,numPeers:0},[Dt.default.SOURCE_UT_PEX]:{enabled:this.client.utPex&&typeof ea=="function",numPeers:0}};for(const s of Object.values(this._peers)){const i=r[s.source];i!==void 0&&i.numPeers++}for(const s of Object.keys(r)){const i=r[s];i.enabled&&i.numPeers===0&&this.emit("noPeers",s)}},this._noPeersIntervalTime),this._noPeersIntervalId.unref&&this._noPeersIntervalId.unref()}_getMetadataFromServer(){const e=this,r=Array.isArray(this.xs)?this.xs:[this.xs];e._xsRequestsController=new AbortController;const s=e._xsRequestsController.signal,i=r.map(n=>a=>{(async function(o,c){if(o.indexOf("http://")!==0&&o.indexOf("https://")!==0)return e.emit("warning",new Error(`skipping non-http xs param: ${o}`)),c(null);const u={method:"GET",headers:{"user-agent":Sc},signal:s};let f,l,h;try{f=await ao(o,u)}catch{return e.emit("warning",new Error(`http error from xs param: ${o}`)),c(null)}if(e.destroyed||e.metadata)return c(null);if(f.status!==200)return e.emit("warning",new Error(`non-200 status code ${f.status} from xs param: ${o}`)),c(null);try{l=new Uint8Array(await f.arrayBuffer())}catch(p){return e.emit("warning",p),c(null)}try{h=await li(l)}catch{}if(!h)return e.emit("warning",new Error(`got invalid torrent file from xs param: ${o}`)),c(null);if(h.infoHash!==e.infoHash)return e.emit("warning",new Error(`got torrent file with incorrect info hash from xs param: ${o}`)),c(null);e._onMetadata(h),c(null)})(n,a)});Dr(i)}async _onMetadata(e){var i;if(this.metadata||this.destroyed)return;let r;if(this._debug("got metadata"),(i=this._xsRequestsController)==null||i.abort(),this._xsRequestsController=null,e&&e.infoHash)r=e;else try{r=await li(e)}catch(n){return this._destroy(n)}this._processParsedTorrent(r),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(n=>{this.addWebSeed(n)}),this._rarityMap=new Zg(this),this.files=this.files.map(n=>new kc(this,n));let s=this._preloadedStore;if(s||(s=new this._store(this.pieceLength,{...this.storeOpts,torrent:this,path:this.path,files:this.files,length:this.length,name:this.name+" - "+this.infoHash.slice(0,8),addUID:this.addUID,rootDir:this.rootDir,max:this._storeCacheSlots})),this._storeCacheSlots>0&&!(s instanceof Ld)&&(s=new Ag(s,{max:this._storeCacheSlots})),this.store=new jg(s),this.so&&!this._startAsDeselected?this.files.forEach((n,a)=>{this.so.includes(a)&&this.files[a].select()}):this.pieces.length===0||this._startAsDeselected||this.select(0,this.pieces.length-1,0),this._hashes=this.pieces,this.pieces=this.pieces.map((n,a)=>{const o=a===this.pieces.length-1?this.lastPieceLength:this.pieceLength;return new ur(o)}),this._reservations=this.pieces.map(()=>[]),this.bitfield=new ki.A(this.pieces.length),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{const n=a=>{if(a)return this._destroy(a);this._debug("done verifying"),this._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===Fd?this.getFileModtimes((a,o)=>{if(a)return this._destroy(a);this.files.map((c,u)=>o[u]===this._fileModtimes[u]).every(c=>c)?(this._markAllVerified(),this._onStore()):this._verifyPieces(n)}):this._verifyPieces(n)}}getFileModtimes(e){const r=[];xc(this.files.map((s,i)=>n=>{const a=this.addUID?On(this.name+" - "+this.infoHash.slice(0,8)):On(this.path,s.path);Id.stat(a,(o,c)=>{if(o&&o.code!=="ENOENT")return n(o);r[i]=c&&c.mtime.getTime(),n(null)})}),Ac,s=>{this._debug("done getting file modtimes"),e(s,r)})}_verifyPieces(e){xc(this.pieces.map((r,s)=>i=>{if(this.destroyed)return i(new Error("torrent is destroyed"));const n={};s===this.pieces.length-1&&(n.length=this.lastPieceLength),this.store.get(s,n,async(a,o)=>{if(this.destroyed)return i(new Error("torrent is destroyed"));if(a)return pt(()=>i(null));const c=await(0,ae.tW)(o,"hex");if(this.destroyed)return i(new Error("torrent is destroyed"));c===this._hashes[s]?(this._debug("piece verified %s",s),this._markVerified(s)):(this._markUnverified(s),this._debug("piece invalid %s",s)),i(null)})}),Ac,e)}rescanFiles(e){if(this.destroyed)throw new Error("torrent is destroyed");e||(e=Dc),this._verifyPieces(r=>{if(r)return this._destroy(r),e(r);this._checkDone(),e(null)})}_markAllVerified(){for(let e=0;e<this.pieces.length;e++)this._markVerified(e)}_markVerified(e){this.pieces[e]=null,this._reservations[e]=null,this.bitfield.set(e,!0),this.emit("verified",e)}_markUnverified(e){const r=e===this.pieces.length-1?this.lastPieceLength:this.pieceLength;this.pieces[e]=new ur(r),this.bitfield.set(e,!1),this._startAsDeselected||this.select(e,e,1),this.files.forEach(s=>{s.done&&s.includes(e)&&(s.done=!1)})}_hasAllPieces(){for(let e=0;e<this.pieces.length;e++)if(!this.bitfield.get(e))return!1;return!0}_hasNoPieces(){return!this._hasMorePieces(0)}_hasMorePieces(e){let r=0;for(let s=0;s<this.pieces.length;s++)if(this.bitfield.get(s)&&(r+=1,r>e))return!0;return!1}_onStore(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections(),this.wires.forEach(e=>{e.ut_metadata&&e.ut_metadata.setMetadata(this.metadata),this._onWireWithMetadata(e)}))}destroy(e,r){if(typeof e=="function")return this.destroy(null,e);this._destroy(null,e,r)}_destroy(e,r,s){var n;if(typeof r=="function")return this._destroy(e,null,r);if(this.destroyed)return;this.destroyed=!0,this._debug("destroy"),this.client._remove(this),this._selections.clear(),clearInterval(this._rechokeIntervalId),clearInterval(this._noPeersIntervalId),(n=this._xsRequestsController)==null||n.abort(),this._rarityMap&&this._rarityMap.destroy();for(const a in this._peers)this.removePeer(a);this.files.forEach(a=>{a instanceof kc&&a._destroy()});const i=this._servers.map(a=>o=>{a.destroy(o)});if(this.discovery&&i.push(a=>{this.discovery.destroy(a)}),this.store){let a=this._destroyStoreOnDestroy;r&&r.destroyStore!==void 0&&(a=r.destroyStore),i.push(o=>{a?this.store.destroy(o):this.store.close(o)})}Dr(i,s),e&&(this.listenerCount("error")===0?this.client.emit("error",e):this.emit("error",e)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}addPeer(e,r){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");let s;if(typeof e=="string"){let a;try{a=_n(e)}catch{return this._debug("ignoring peer: invalid %s",e),this.emit("invalidPeer",e),!1}s=a[0]}else typeof e.remoteAddress=="string"&&(s=e.remoteAddress);if(this.client.blocked&&s&&this.client.blocked.contains(s))return this._debug("ignoring peer: blocked %s",e),typeof e!="string"&&e.destroy(),this.emit("blockedPeer",e),!1;const i=this.client.utp&&this._isIPv4(s)?"utp":"tcp",n=!!this._addPeer(e,i,r);return n?this.emit("peer",e):this.emit("invalidPeer",e),n}_addPeer(e,r,s){if(this.destroyed)return typeof e!="string"&&e.destroy(),null;if(typeof e=="string"&&!this._validAddr(e))return this._debug("ignoring peer: invalid %s",e),null;const i=e&&e.id||e;if(this._peers[i])return this._debug("ignoring peer: duplicate (%s)",i),typeof e!="string"&&e.destroy(),null;if(this.paused)return this._debug("ignoring peer: torrent is paused"),typeof e!="string"&&e.destroy(),null;let n;return this._debug("add peer %s",i),n=typeof e=="string"?r==="utp"?Dt.default.createUTPOutgoingPeer(e,this,this.client.throttleGroups,s):Dt.default.createTCPOutgoingPeer(e,this,this.client.throttleGroups,s):Dt.default.createWebRTCPeer(e,this,this.client.throttleGroups,s),this._registerPeer(n),typeof e=="string"&&(this._queue.push(n),this._drain()),n}addWebSeed(e){if(this.destroyed)throw new Error("torrent is destroyed");let r,s;if(typeof e=="string"){if(r=e,!/^https?:\/\/.+/.test(r))return this.emit("warning",new Error(`ignoring invalid web seed: ${r}`)),void this.emit("invalidPeer",r);if(this._peers[r])return this.emit("warning",new Error(`ignoring duplicate web seed: ${r}`)),void this.emit("invalidPeer",r);s=new Xg(r,this)}else{if(!e||typeof e.connId!="string")return void this.emit("warning",new Error("addWebSeed must be passed a string or connection object with id property"));if(s=e,r=s.connId,this._peers[r])return this.emit("warning",new Error(`ignoring duplicate web seed: ${r}`)),void this.emit("invalidPeer",r)}this._debug("add web seed %s",r);const i=Dt.default.createWebSeedPeer(s,r,this,this.client.throttleGroups);this._registerPeer(i),this.emit("peer",r)}_addIncomingPeer(e){return this.destroyed?e.destroy(new Error("torrent is destroyed")):this.paused?e.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",e.id),void this._registerPeer(e))}_registerPeer(e){e.on("download",r=>{this.destroyed||(this.received+=r,this._downloadSpeed(r),this.client._downloadSpeed(r),this.emit("download",r),this.destroyed||this.client.emit("download",r))}),e.on("upload",r=>{this.destroyed||(this.uploaded+=r,this._uploadSpeed(r),this.client._uploadSpeed(r),this.emit("upload",r),this.destroyed||this.client.emit("upload",r))}),this._peers[e.id]=e,this._peersLength+=1}removePeer(e){var s;const r=(e==null?void 0:e.id)||e;e&&!e.id&&(e=(s=this._peers)==null?void 0:s[r]),e&&(e.destroy(),this.destroyed||(this._debug("removePeer %s",r),delete this._peers[r],this._peersLength-=1,this._drain()))}_select(e=0,r=this.pieces.length-1,s,i,n=!1){if(this.destroyed)throw new Error("torrent is destroyed");if(e<0||r<e||this.pieces.length<=r)throw new Error(`invalid selection ${e} : ${r}`);s=Number(s)||0,this._debug("select %s-%s (priority %s)",e,r,s),this._selections.insert({from:e,to:r,offset:0,priority:s,notify:i,isStreamSelection:n}),this._selections.sort((a,o)=>o.priority-a.priority),this._updateSelections()}select(e,r,s,i){this._select(e,r,s,i,!1)}_deselect(e,r,s=!1){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("deselect %s-%s",e,r),this._selections.remove({from:e,to:r,isStreamSelection:s}),this._updateSelections()}deselect(e,r){this._deselect(e,r,!1)}critical(e,r){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",e,r);for(let s=e;s<=r;++s)this._critical[s]=!0;this._updateSelections()}_onWire(e,r){if(this._debug("got wire %s (%s)",e._debugId,r||"Unknown"),this.wires.push(e),r){const s=_n(r);e.remoteAddress=s[0],e.remotePort=s[1]}this.client.dht&&this.client.dht.listening&&e.on("port",s=>{if(!this.destroyed&&!this.client.dht.destroyed){if(!e.remoteAddress)return this._debug("ignoring PORT from peer with no address");if(s===0||s>65536)return this._debug("ignoring invalid PORT from peer");this._debug("port: %s (from %s)",s,r),this.client.dht.addNode({host:e.remoteAddress,port:s})}}),e.on("timeout",()=>{this._debug("wire timeout (%s)",r),e.destroy()}),e.type!=="webSeed"&&e.setTimeout(3e4,!0),e.setKeepAlive(!0),e.use(Hg(this.metadata)),e.ut_metadata.on("warning",s=>{this._debug("ut_metadata warning: %s",s.message)}),this.metadata||(e.ut_metadata.on("metadata",s=>{this._debug("got metadata via ut_metadata"),this._onMetadata(s)}),e.ut_metadata.fetch()),this.client.utPex&&typeof ea=="function"&&!this.private&&(e.use(ea()),e.ut_pex.on("peer",s=>{this.client.seedOutgoingConnections||!this.done?(this._debug("ut_pex: got peer: %s (from %s)",s,r),this.addPeer(s,Dt.default.SOURCE_UT_PEX)):this._debug("ut_pex ignoring peer %s: torrent is done and seedOutgoingConnections is false",s)}),e.ut_pex.on("dropped",s=>{const i=this._peers[s];i&&!i.connected&&(this._debug("ut_pex: dropped peer: %s (from %s)",s,r),this.removePeer(s))}),e.once("close",()=>{e.ut_pex.reset()})),e.use(Rd()),this.emit("wire",e,r),this.ready&&pt(()=>{this._onWireWithMetadata(e)})}_onWireWithMetadata(e){let r=null;const s=()=>{this.destroyed||e.destroyed||(this._numQueued>2*(this._numConns-this.numPeers)&&e.amInterested?e.destroy():(r=setTimeout(s,ta),r.unref&&r.unref()))};let i;const n=()=>{if(e.peerPieces.buffer.length===this.bitfield.buffer.length){for(i=0;i<this.pieces.length;++i)if(!e.peerPieces.get(i))return;e.isSeeder=!0,this.alwaysChokeSeeders&&e.choke()}};e.on("bitfield",()=>{n(),this._update(),this._updateWireInterest(e)}),e.on("have",()=>{n(),this._update(),this._updateWireInterest(e)}),e.lt_donthave.on("donthave",()=>{n(),this._update(),this._updateWireInterest(e)}),e.on("have-all",()=>{e.isSeeder=!0,this.alwaysChokeSeeders&&e.choke(),this._update(),this._updateWireInterest(e)}),e.on("have-none",()=>{e.isSeeder=!1,this._update(),this._updateWireInterest(e)}),e.on("allowed-fast",a=>{this._update()}),e.once("interested",()=>{e.unchoke()}),e.once("close",()=>{clearTimeout(r)}),e.on("choke",()=>{clearTimeout(r),r=setTimeout(s,ta),r.unref&&r.unref()}),e.on("unchoke",()=>{clearTimeout(r),this._update()}),e.on("request",(a,o,c,u)=>{if(c>131072)return e.destroy();this.pieces[a]||this.store.get(a,{offset:o,length:c},u)}),e.hasFast&&this._hasAllPieces()?e.haveAll():e.hasFast&&this._hasNoPieces()?e.haveNone():e.bitfield(this.bitfield),this._updateWireInterest(e),e.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&e.port(this.client.dht.address().port),e.type!=="webSeed"&&(r=setTimeout(s,ta),r.unref&&r.unref()),e.isSeeder=!1,n()}_updateSelections(){this.ready&&!this.destroyed&&(pt(()=>{this._gcSelections()}),this._updateInterest(),this._update())}_gcSelections(){var e,r;for(const s of this._selections){const i=s.offset;for(;this.bitfield.get(s.from+s.offset)&&s.from+s.offset<s.to;)s.offset+=1;i!==s.offset&&((e=s.notify)==null||e.call(s)),s.to===s.from+s.offset&&this.bitfield.get(s.from+s.offset)&&(s.remove(),(r=s.notify)==null||r.call(s),this._updateInterest())}this._selections.length||this.emit("idle")}_updateInterest(){const e=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(r=>this._updateWireInterest(r)),e!==this._amInterested&&(this._amInterested?this.emit("interested"):this.emit("uninterested"))}_updateWireInterest(e){let r=!1;for(let s=0;s<this.pieces.length;++s)if(this.pieces[s]&&e.peerPieces.get(s)){r=!0;break}r?e.interested():e.uninterested()}_update(){Ec?Ec(()=>this._updateWireWrapper(),{timeout:250}):this._updateWireWrapper()}_updateWireWrapper(){if(this.destroyed)return;const e=Ug(this.wires);let r;for(;r=e();)this._updateWire(r)}_updateWire(e){if(e.destroyed)return!1;const r=this,s=ia(e,.5);if(e.requests.length>=s)return;const i=ia(e,1);if(e.peerChoking)e.hasFast&&e.peerAllowedFastSet.length>0&&!this._hasMorePieces(e.peerAllowedFastSet.length-1)&&function(){if(e.requests.length>=i)return!1;for(const c of e.peerAllowedFastSet){if(e.peerPieces.get(c)&&!r.bitfield.get(c))for(;r._request(e,c,!1)&&e.requests.length<i;);if(!(e.requests.length<i))return!0}}();else{if(!e.downloaded)return function(){if(e.requests.length)return;let c=r._selections.length;for(;c--;){const u=r._selections.get(c);let f;if(r.strategy==="rarest"){const l=u.from+u.offset,h=u.to,p=h-l+1,b={};let m=0;const v=n(l,h,b);for(;m<p&&(f=r._rarityMap.getRarestPiece(v),!(f<0));){if(r._request(e,f,!1))return;b[f]=!0,m+=1}}else for(f=u.to;f>=u.from+u.offset;--f)if(e.peerPieces.get(f)&&r._request(e,f,!1))return}}();o(!1)||o(!0)}function n(c,u,f,l){return h=>h>=c&&h<=u&&!(h in f)&&e.peerPieces.get(h)&&(!l||l(h))}function a(c){let u=c;for(let f=c;f<r._selections.length&&r._selections.get(f).priority;f++)u=f;r._selections.swap(c,u)}function o(c){if(e.requests.length>=i)return!0;const u=function(){const f=e.downloadSpeed()||1;if(f>ra)return()=>!0;const l=Math.max(1,e.requests.length)*ur.BLOCK_LENGTH/f;let h=10,p=0;return b=>{if(!h||r.bitfield.get(b))return!0;let m=r.pieces[b].missing;for(;p<r.wires.length;p++){const v=r.wires[p],x=v.downloadSpeed();if(!(x<ra)&&!(x<=f)&&v.peerPieces.get(b)&&!((m-=x*l)>0))return h--,!1}return!0}}();for(let f=0;f<r._selections.length;f++){const l=r._selections.get(f);let h;if(r.strategy==="rarest"){const p=l.from+l.offset,b=l.to,m=b-p+1,v={};let x=0;const _=n(p,b,v,u);for(;x<m&&(h=r._rarityMap.getRarestPiece(_),!(h<0));){for(;r._request(e,h,r._critical[h]||c)&&e.requests.length<i;);if(!(e.requests.length<i))return l.priority&&a(f),!0;v[h]=!0,x++}}else for(h=l.from+l.offset;h<=l.to;h++)if(e.peerPieces.get(h)&&u(h)){for(;r._request(e,h,r._critical[h]||c)&&e.requests.length<i;);if(!(e.requests.length<i))return l.priority&&a(f),!0}}return!1}}_rechoke(){if(!this.ready)return;const e=this.wires.map(i=>({wire:i,random:Math.random()})).sort((i,n)=>{const a=i.wire,o=n.wire;return a.downloadSpeed()!==o.downloadSpeed()?a.downloadSpeed()-o.downloadSpeed():a.uploadSpeed()!==o.uploadSpeed()?a.uploadSpeed()-o.uploadSpeed():a.amChoking!==o.amChoking?a.amChoking?-1:1:i.random-n.random}).map(i=>i.wire);this._rechokeOptimisticTime<=0?this._rechokeOptimisticWire=null:this._rechokeOptimisticTime-=1;let r=0;for(;e.length>0&&r<this._rechokeNumSlots-1;){const i=e.pop();i.isSeeder||i===this._rechokeOptimisticWire||(i.unchoke(),i.peerInterested&&r++)}if(this._rechokeOptimisticWire===null&&this._rechokeNumSlots>0){const i=e.filter(n=>n.peerInterested);if(i.length>0){const n=i[s=i.length,Math.random()*s|0];n.unchoke(),this._rechokeOptimisticWire=n,this._rechokeOptimisticTime=2}}var s;e.filter(i=>i!==this._rechokeOptimisticWire).forEach(i=>i.choke())}_hotswap(e,r){const s=e.downloadSpeed();if(s<ur.BLOCK_LENGTH||!this._reservations[r])return!1;const i=this._reservations[r];if(!i)return!1;let n,a,o=1/0;for(a=0;a<i.length;a++){const c=i[a];if(!c||c===e)continue;const u=c.downloadSpeed();u>=ra||2*u>s||u>o||(n=c,o=u)}if(!n)return!1;for(a=0;a<i.length;a++)i[a]===n&&(i[a]=null);for(a=0;a<n.requests.length;a++){const c=n.requests[a];c.piece===r&&this.pieces[r].cancel(c.offset/ur.BLOCK_LENGTH|0)}return this.emit("hotswap",n,e,r),!0}_request(e,r,s){const i=this,n=e.requests.length,a=e.type==="webSeed";if(i.bitfield.get(r))return!1;const o=a?Math.min(function(m,v,x){return 1+Math.ceil(v*m.downloadSpeed()/x)}(e,1,i.pieceLength),i.maxWebConns):ia(e,1);if(n>=o)return!1;const c=i.pieces[r];let u=a?c.reserveRemaining():c.reserve();if(u===-1&&s&&i._hotswap(e,r)&&(u=a?c.reserveRemaining():c.reserve()),u===-1)return!1;let f=i._reservations[r];f||(f=i._reservations[r]=[]);let l=f.indexOf(null);l===-1&&(l=f.length),f[l]=e;const h=c.chunkOffset(u),p=a?c.chunkLengthRemaining(u):c.chunkLength(u);function b(){pt(()=>{i._update()})}return e.request(r,h,p,async function m(v,x){if(i.destroyed)return;if(!i.ready)return i.once("ready",()=>{m(v,x)});if(f[l]===e&&(f[l]=null),c!==i.pieces[r])return b();if(v)return i._debug("error getting piece %s (offset: %s length: %s) from %s: %s",r,h,p,`${e.remoteAddress}:${e.remotePort}`,v.message),a?c.cancelRemaining(u):c.cancel(u),void b();if(i._debug("got piece %s (offset: %s length: %s) from %s",r,h,p,`${e.remoteAddress}:${e.remotePort}`),!c.set(u,x,e))return b();const _=c.flush(),y=await(0,ae.tW)(_,"hex");i.destroyed||(y===i._hashes[r]?(i._debug("piece verified %s",r),i.store.put(r,_,k=>{k?i._destroy(k):(i.pieces[r]=null,i._markVerified(r),i.wires.forEach(A=>{A.have(r)}),i._checkDone(),b())})):(i.pieces[r]=new ur(c.length),i.emit("warning",new Error(`Piece ${r} failed verification`)),b()))}),!0}_checkDone(){var r;if(this.destroyed)return;this.files.forEach(s=>{if(!s.done){for(let i=s._startPiece;i<=s._endPiece;++i)if(!this.bitfield.get(i))return;s.done=!0,s.emit("done"),this._debug(`file done: ${s.name}`)}});const e=this.files.every(s=>s.done);return!this.done&&e?(this.done=!0,this._debug(`torrent done: ${this.infoHash}`),this.emit("done"),this.destroyed||this.discovery.complete()):this.done&&!e&&(this.done=!1,(r=this.discovery.tracker)==null||r.start()),this._gcSelections(),e}async load(e,r){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",()=>{this.load(e,r)});Array.isArray(e)||(e=[e]),r||(r=Dc);try{await Eg(this.store,Dd(e),{chunkLength:this.pieceLength}),this._markAllVerified(),this._checkDone(),r(null)}catch(s){return r(s),s}}pause(){this.destroyed||(this._debug("pause"),this.paused=!0)}resume(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}_debug(){const e=[].slice.call(arguments);e[0]=`[${this.client?this.client._debugId:"No Client"}] [${this._debugId}] ${e[0]}`,e3(...e)}_drain(){if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),typeof dc.connect!="function"||this.destroyed||this.paused||this._numConns>=this.client.maxConns)return;this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);const e=this._queue.shift();if(!e)return;this._debug("%s connect attempt to %s",e.type,e.addr);const r=_n(e.addr),s={host:r[0],port:r[1]};this.client.utp&&e.type===Dt.default.TYPE_UTP_OUTGOING?e.conn=Kg.connect(s.port,s.host):e.conn=dc.connect(s);const i=e.conn;i.once("connect",()=>{this.destroyed||e.onConnect()}),i.once("error",n=>{e.destroy(n)}),e.startConnectTimeout(),i.on("close",()=>{if(this.destroyed)return;if(e.retries>=na.length){if(this.client.utp){const o=this._addPeer(e.addr,"tcp",e.source);o&&(o.retries=0)}else this._debug("conn %s closed: will not re-add (max %s attempts)",e.addr,na.length);return}const n=na[e.retries];this._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",e.addr,n,e.retries+1);const a=setTimeout(()=>{if(this.destroyed)return;const o=_n(e.addr)[0],c=this.client.utp&&this._isIPv4(o)?"utp":"tcp",u=this._addPeer(e.addr,c,e.source);u&&(u.retries=e.retries+1)},n);a.unref&&a.unref()})}_validAddr(e){let r;try{r=_n(e)}catch{return!1}const s=r[0],i=r[1];return i>0&&i<65535&&!(s==="127.0.0.1"&&i===this.client.torrentPort)}_isIPv4(e){return/^((?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])[.]){3}(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/.test(e)}}function ia(t,e){let r=2+Math.ceil(e*t.downloadSpeed()/ur.BLOCK_LENGTH);if(t.peerExtendedHandshake){const s=t.peerExtendedHandshake.reqq;typeof s=="number"&&s>0&&(r=Math.min(r,s))}return r}function Dc(){}var n3=ce(4043),ir=ce(580),Ud=ce(815),i3=ce(2878);class kt{constructor(e,r={}){this.client=e,r.origin||(r.origin="*"),this.opts=r,this.pendingReady=new Set}static serveIndexPage(e,r,s){const i=r.map(n=>`<li>
        <a href="${ir(s)}/${n.infoHash}">
          ${ir(n.name)}
        </a>
        (${ir(n.length)} bytes)
      </li>`).join("<br>");return e.status=200,e.headers["Content-Type"]="text/html",e.body=Yn("WebTorrent",`<h1>WebTorrent</h1>
       <ol>${i}</ol>`),e}isOriginAllowed(e){return this.opts.origin!==!1&&(this.opts.origin==="*"||e.headers.origin===this.opts.origin)}static serveMethodNotAllowed(e){return e.status=405,e.headers["Content-Type"]="text/html",e.body=Yn("405 - Method Not Allowed","<h1>405 - Method Not Allowed</h1>"),e}static serve404Page(e){return e.status=404,e.headers["Content-Type"]="text/html",e.body=Yn("404 - Not Found","<h1>404 - Not Found</h1>"),e}static serveTorrentPage(e,r,s){const i=e.files.map(n=>`<li>
        <a href="${ir(s)}/${e.infoHash}/${ir(n.path)}">
          ${ir(n.path)}
        </a>
        (${ir(n.length)} bytes)
      </li>`).join("<br>");return r.status=200,r.headers["Content-Type"]="text/html",r.body=Yn(`${ir(e.name)} - WebTorrent`,`<h1>${ir(e.name)}</h1>
      <ol>${i}</ol>`),r}static serveOptionsRequest(e,r){return r.status=204,r.headers["Access-Control-Max-Age"]="600",r.headers["Access-Control-Allow-Methods"]="GET,HEAD",e.headers["access-control-request-headers"]&&(r.headers["Access-Control-Allow-Headers"]=e.headers["access-control-request-headers"]),r}static serveFile(e,r,s){s.status=200,s.headers.Expires="0",s.headers["Cache-Control"]="no-cache, no-store, must-revalidate, max-age=0",s.headers["Accept-Ranges"]="bytes",s.headers["Content-Type"]=e.type,s.headers["transferMode.dlna.org"]="Streaming",s.headers["contentFeatures.dlna.org"]="DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000",r.destination==="document"?(s.headers["Content-Type"]="application/octet-stream",s.headers["Content-Disposition"]=`attachment; filename*=UTF-8''${Tc(e.name)}`,s.body="DOWNLOAD"):s.headers["Content-Disposition"]=`inline; filename*=UTF-8''${Tc(e.name)}`;let i=i3(e.length,r.headers.range||"");if(Array.isArray(i)?(s.status=206,i=i[0],s.headers["Content-Range"]=`bytes ${i.start}-${i.end}/${e.length}`,s.headers["Content-Length"]=i.end-i.start+1):(s.statusCode=200,i=null,s.headers["Content-Length"]=e.length),r.method==="GET"){const n=e[Symbol.asyncIterator](i);let a=null;e.emit("iterator",{iterator:n,req:r,file:e},u=>{a=u});const o=Li.Readable.from(a||n);let c=null;e.emit("stream",{stream:o,req:r,file:e},u=>{c=Ud(o,u)}),s.body=c||o}else s.body=!1;return s}async onRequest(e,r){let s=new URL(e.url,"http://example.com").pathname;s=s.slice(s.indexOf(this.pathname)+this.pathname.length+1);const i={headers:{"X-Content-Type-Options":"nosniff","Content-Security-Policy":"base-uri 'none'; frame-ancestors 'none'; form-action 'none';"}};if(this.isOriginAllowed(e)&&(i.headers["Access-Control-Allow-Origin"]=this.opts.origin==="*"?"*":e.headers.origin),s==="favicon.ico")return r(kt.serve404Page(i));if(e.method==="OPTIONS")return this.isOriginAllowed(e)?r(kt.serveOptionsRequest(e,i)):r(kt.serveMethodNotAllowed(i));const n=async()=>{this.pendingReady.delete(n);const o=await a();r(o)},a=async()=>{if(s==="")return kt.serveIndexPage(i,this.client.torrents,this.pathname);let[o,...c]=s.split("/");c=decodeURI(c.join("/"));const u=await this.client.get(o);if(!o||!u)return kt.serve404Page(i);if(!c)return kt.serveTorrentPage(u,i,this.pathname);const f=u.files.find(l=>l.path.replace(/\\/g,"/")===c);return f?kt.serveFile(f,e,i):kt.serve404Page(i)};if(e.method==="GET"||e.method==="HEAD"){if(this.client.ready){const o=await a();return r(o)}return this.pendingReady.add(n),void this.client.once("ready",n)}return r(kt.serveMethodNotAllowed(i))}close(e=()=>{}){this.closed=!0,this.pendingReady.forEach(r=>{this.client.removeListener("ready",r)}),this.pendingReady.clear(),pt(e)}destroy(e=()=>{}){this.closed?pt(e):this.close(e),this.client=null}}class s3 extends kt{constructor(e,r){super(e,r),this.server=n3.createServer(),this._listen=this.server.listen,this.server.listen=this.listen.bind(this),this._close=this.server.close,this.server.close=this.close.bind(this),this.sockets=new Set,this.closed=!1,this.pathname=(r==null?void 0:r.pathname)||"/webtorrent"}wrapRequest(e,r){return this.opts.hostname&&e.headers.host!==`${this.opts.hostname}:${this.server.address().port}`?e.destroy():new URL(e.url,"http://example.com").pathname.startsWith(this.pathname)?void this.onRequest(e,({status:s,headers:i,body:n})=>{r.writeHead(s,i),n._readableState||n._writableState?Ud(n,r):r.end(n)}):e.destroy()}onConnection(e){e.setTimeout(36e6),this.sockets.add(e),e.once("close",()=>{this.sockets.delete(e)})}address(){return this.server.address()}listen(...e){return this.closed=!1,this.server.on("connection",this.onConnection.bind(this)),this.server.on("request",this.wrapRequest.bind(this)),this._listen.apply(this.server,e)}close(e=()=>{}){this.server.removeAllListeners("connection"),this.server.removeAllListeners("request"),this.server.removeAllListeners("listening"),super.close(),this._close.call(this.server,e)}destroy(e){this.sockets.forEach(r=>{r.destroy()}),super.destroy(e)}}class a3 extends kt{constructor(e,r){super(e,r),this.registration=r.controller,this.workerKeepAliveInterval=null,this.workerPortCount=0;const s=new URL(r.controller.scope);this.pathname=s.pathname+"webtorrent",this._address={port:s.port,family:"IPv4",address:s.hostname},this.boundHandler=this.wrapRequest.bind(this),navigator.serviceWorker.addEventListener("message",this.boundHandler),fetch(`${this.pathname}/cancel/`).then(i=>{i.body.cancel()})}wrapRequest(e){const r=e.data;if(!(r!=null&&r.type)==="webtorrent"||!r.url)return null;const[s]=e.ports;this.onRequest(r,({status:i,headers:n,body:a})=>{var u;const o=(u=a[Symbol.asyncIterator])==null?void 0:u.call(a),c=()=>{s.onmessage=null,a!=null&&a.destroy&&a.destroy(),this.workerPortCount--,this.workerPortCount||(clearInterval(this.workerKeepAliveInterval),this.workerKeepAliveInterval=null)};s.onmessage=async f=>{if(f.data){let l;try{l=(await o.next()).value}catch{}s.postMessage(l),l||c(),this.workerKeepAliveInterval||(this.workerKeepAliveInterval=setInterval(()=>fetch(`${this.pathname}/keepalive/`),2e4))}else c()},this.workerPortCount++,s.postMessage({status:i,headers:n,body:o?"STREAM":a})})}listen(e,r){r()}address(){return this._address}close(e){navigator.serviceWorker.removeEventListener("message",this.boundHandler),super.close(e)}destroy(e){super.destroy(e)}}function Yn(t,e){return`
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8">
        <title>${t}</title>
      </head>
      <body>
        ${e}
      </body>
    </html>
  `}function Tc(t){return encodeURIComponent(t).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape)}const sa=Ft("webtorrent"),$d=jn.replace(/\d*./g,t=>("0"+t%100).slice(-2)).slice(0,4),o3=`-WW${$d}-`;class cn extends pr{constructor(e={}){super(),typeof e.peerId=="string"?this.peerId=e.peerId:ArrayBuffer.isView(e.peerId)?this.peerId=(0,ae.V5)(e.peerId):this.peerId=(0,ae.V5)((0,ae.L0)(o3+(0,ae.NJ)((0,ae.po)(9)))),this.peerIdBuffer=(0,ae.fk)(this.peerId),typeof e.nodeId=="string"?this.nodeId=e.nodeId:ArrayBuffer.isView(e.nodeId)?this.nodeId=(0,ae.V5)(e.nodeId):this.nodeId=(0,ae.V5)((0,ae.po)(20)),this.nodeIdBuffer=(0,ae.fk)(this.nodeId),this._debugId=this.peerId.substring(0,7),this.destroyed=!1,this.listening=!1,this.torrentPort=e.torrentPort||0,this.dhtPort=e.dhtPort||0,this.tracker=e.tracker!==void 0?e.tracker:{},this.lsd=e.lsd!==!1,this.utPex=e.utPex!==!1,this.natUpnp=e.natUpnp??!0,this.natPmp=e.natPmp??!0,this.torrents=[],this.maxConns=Number(e.maxConns)||55,this.utp=cn.UTP_SUPPORT&&e.utp!==!1,this.seedOutgoingConnections=e.seedOutgoingConnections??!0,this._downloadLimit=Math.max(typeof e.downloadLimit=="number"?e.downloadLimit:-1,-1),this._uploadLimit=Math.max(typeof e.uploadLimit=="number"?e.uploadLimit:-1,-1),(this.natUpnp||this.natPmp)&&typeof hc=="function"&&(this.natTraversal=new hc({enableUPNP:this.natUpnp,enablePMP:this.natPmp,upnpPermanentFallback:e.natUpnp==="permanent"})),e.secure===!0&&Promise.resolve().then(ce.bind(ce,5658)).then(({enableSecure:s})=>s()),this._debug("new webtorrent (peerId %s, nodeId %s, port %s)",this.peerId,this.nodeId,this.torrentPort),this.throttleGroups={down:new lc.ThrottleGroup({rate:Math.max(this._downloadLimit,0),enabled:this._downloadLimit>=0}),up:new lc.ThrottleGroup({rate:Math.max(this._uploadLimit,0),enabled:this._uploadLimit>=0})},this.tracker&&(typeof this.tracker!="object"&&(this.tracker={}),globalThis.WRTC&&!this.tracker.wrtc&&(this.tracker.wrtc=globalThis.WRTC)),typeof Pa=="function"?this._connPool=new Pa(this):pt(()=>{this._onListening()}),this._downloadSpeed=xi(),this._uploadSpeed=xi(),e.dht!==!1&&typeof sc.Client=="function"?(this.dht=new sc.Client(Object.assign({},{nodeId:this.nodeId},e.dht)),this.dht.once("error",s=>{this._destroy(s)}),this.dht.once("listening",()=>{const s=this.dht.address();s&&(this.dhtPort=s.port,this.natTraversal&&this.natTraversal.map({publicPort:this.dhtPort,privatePort:this.dhtPort,protocol:"udp",description:"WebTorrent DHT"}).catch(i=>{sa("error mapping DHT port via UPnP/PMP: %o",i)}))}),this.dht.setMaxListeners(0),this.dht.listen(this.dhtPort)):this.dht=!1,this.enableWebSeeds=e.webSeeds!==!1;const r=()=>{this.destroyed||(this.ready=!0,this.emit("ready"))};typeof ac=="function"&&e.blocklist!=null?ac(e.blocklist,{headers:{"user-agent":`WebTorrent/${jn} (https://webtorrent.io)`}},(s,i)=>{if(s)return console.error(`Failed to load blocklist: ${s.message}`);this.blocked=i,r()}):pt(r)}createServer(e,r){if(this.destroyed)throw new Error("torrent is destroyed");if(this._server)throw new Error("server already created");if(typeof window<"u"&&r!=="node"||r==="browser"){if(!((e==null?void 0:e.controller)instanceof ServiceWorkerRegistration))throw new Error("Invalid worker registration");if(e.controller.active.state!=="activated")throw new Error("Worker isn't activated");return this._server=new a3(this,e),this._server}return this._server=new s3(this,e),this._server}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){const e=this.torrents.filter(r=>r.progress!==1);return e.reduce((r,s)=>r+s.downloaded,0)/(e.reduce((r,s)=>r+(s.length||0),0)||1)}get ratio(){return this.torrents.reduce((e,r)=>e+r.uploaded,0)/(this.torrents.reduce((e,r)=>e+r.received,0)||1)}async get(e){if(e instanceof Cc){if(this.torrents.includes(e))return e}else{const r=this.torrents;let s;try{s=await li(e)}catch{}if(!s)return null;if(!s.infoHash)throw new Error("Invalid torrent identifier");for(const i of r)if(i.infoHash===s.infoHash)return i}return null}add(e,r={},s=()=>{}){if(this.destroyed)throw new Error("client is destroyed");typeof r=="function"&&([r,s]=[{},r]);const i=()=>{if(!this.destroyed){for(const o of this.torrents)if(o.infoHash===a.infoHash&&o!==a)return a._destroy(new Error(`Cannot add duplicate torrent ${a.infoHash}`)),void s(o)}},n=()=>{this.destroyed||(s(a),this.emit("torrent",a))};this._debug("add"),r=r?Object.assign({},r):{};const a=new Cc(e,this,r);return this.torrents.push(a),a.once("_infoHash",i),a.once("ready",n),a.once("close",function o(){a.removeListener("_infoHash",i),a.removeListener("ready",n),a.removeListener("close",o)}),this.emit("add",a),a}seed(e,r,s){if(this.destroyed)throw new Error("client is destroyed");typeof r=="function"&&([r,s]=[{},r]),this._debug("seed"),(r=r?Object.assign({},r):{}).skipVerify=!0;const i=typeof e=="string";i&&(r.path=function(u){if(wi(u),u.length===0)return".";let f=u.charCodeAt(0);const l=f===47;let h=-1,p=!0;for(let b=u.length-1;b>=1;--b)if(f=u.charCodeAt(b),f===47){if(!p){h=b;break}}else p=!1;return h===-1?l?"/":".":l&&h===1?"//":u.slice(0,h)}(e)),r.createdBy||(r.createdBy=`WebTorrent/${$d}`);const n=u=>{this._debug("on seed"),typeof s=="function"&&s(u),u.emit("seed"),this.emit("seed",u)},a=this.add(null,r,u=>{const f=[l=>{if(i||r.preloadedStore)return l();u.load(o,l)}];this.dht&&f.push(l=>{u.once("dhtAnnounce",l)}),Dr(f,l=>{if(!this.destroyed)return l?u._destroy(l):void n(u)})});let o;var c;return c=e,typeof FileList<"u"&&c instanceof FileList?e=Array.from(e):Array.isArray(e)||(e=[e]),Dr(e.map(u=>async f=>{if(!r.preloadedStore&&function(l){return typeof l=="object"&&l!=null&&typeof l.pipe=="function"}(u)){const l=[];try{for await(const p of u)l.push(p)}catch(p){return f(p)}const h=(0,ae.xW)(l);h.name=u.name,f(null,h)}else f(null,u)}),(u,f)=>{if(!this.destroyed)return u?a._destroy(u):void function(l,h,p){typeof h=="function"&&([h,p]=[p,h]),Td(l,h=h?Object.assign({},h):{},p)}(f,r,(l,h)=>{if(!this.destroyed){if(l)return a._destroy(l);o=h.map(p=>p.getStream),mg(f,r,async(p,b)=>{if(this.destroyed)return;if(p)return a._destroy(p);const m=await this.get(b);m?(console.warn("A torrent with the same id is already being seeded"),a._destroy(),typeof s=="function"&&s(m)):a._onTorrentId(b)})}})}),a}async remove(e,r,s){if(typeof r=="function")return this.remove(e,null,r);this._debug("remove");const i=await this.get(e);if(!i)throw new Error(`No torrent with id ${e}`);this._remove(i,r,s)}_remove(e,r,s){if(!e)return;if(typeof r=="function")return this._remove(e,null,r);const i=this.torrents.indexOf(e);i!==-1&&(this.torrents.splice(i,1),e.destroy(r,s),this.dht&&this.dht._tables.remove(e.infoHash),this.emit("remove",e))}address(){return this.listening?this._connPool?this._connPool.tcpServer.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}throttleDownload(e){return e=Number(e),!(isNaN(e)||!isFinite(e)||e<-1)&&(this._downloadLimit=e,this._downloadLimit<0?this.throttleGroups.down.setEnabled(!1):(this.throttleGroups.down.setEnabled(!0),void this.throttleGroups.down.setRate(this._downloadLimit)))}throttleUpload(e){return e=Number(e),!(isNaN(e)||!isFinite(e)||e<-1)&&(this._uploadLimit=e,this._uploadLimit<0?this.throttleGroups.up.setEnabled(!1):(this.throttleGroups.up.setEnabled(!0),void this.throttleGroups.up.setRate(this._uploadLimit)))}destroy(e){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,e)}_destroy(e,r){this._debug("client destroy"),this.destroyed=!0;const s=this.torrents.map(i=>n=>{i.destroy(n)});this._connPool&&s.push(i=>{this._connPool.destroy(i)}),this.dht&&s.push(i=>{this.dht.destroy(i)}),this._server&&s.push(i=>{this._server.destroy(i)}),this.natTraversal&&s.push(i=>{this.natTraversal.destroy().then(()=>i())}),Dr(s,r),e&&this.emit("error",e),this.torrents=[],this._connPool=null,this.dht=null,this.throttleGroups.down.destroy(),this.throttleGroups.up.destroy()}_onListening(){if(this._debug("listening"),this.listening=!0,this._connPool){const e=this._connPool.tcpServer.address();e&&(this.torrentPort=e.port,this.natTraversal&&this.natTraversal.map({publicPort:this.torrentPort,privatePort:this.torrentPort,protocol:this.utp?null:"tcp",description:"WebTorrent Torrent"}).catch(r=>{sa("error mapping WebTorrent port via UPnP/PMP: %o",r)}))}this.emit("listening")}_debug(){const e=[].slice.call(arguments);e[0]=`[${this._debugId}] ${e[0]}`,sa(...e)}async _getByHash(e){for(const r of this.torrents)if(r.infoHashHash||(r.infoHashHash=await(0,ae.tW)((0,ae.fk)("72657132"+r.infoHash),"hex")),e===r.infoHashHash)return r;return null}}cn.WEBRTC_SUPPORT=oo.WEBRTC_SUPPORT,cn.UTP_SUPPORT=Pa.UTP_SUPPORT,cn.VERSION=jn;var u3=Ed.A;class c3{constructor(){this.files=new Map,this.metadata=new Map}async getDirectoryHandle(){return this}async getFileHandle(e,r={}){return!this.files.has(e)&&r.create&&this.files.set(e,null),{createWritable:async()=>({write:async s=>{this.files.set(e,s)},close:async()=>{}}),getFile:async()=>{const s=this.files.get(e);return new File([s],e)}}}async removeEntry(e){this.files.delete(e),this.metadata.delete(e)}entries(){return Array.from(this.files.keys()).map(e=>[e])}}const f3=["udp://tracker.leechers-paradise.org:6969","udp://tracker.coppersurfer.tk:6969","udp://tracker.opentrackr.org:1337","udp://explodie.org:6969","udp://tracker.empire-js.us:1337","wss://tracker.btorrent.xyz","wss://tracker.openwebtorrent.com"],Mc=Yt("trackers",f3),Lv=Je(),Rr=Ie(new Map),Qn=Je(!1),Ic=Ie({done:!1,progress:0,downloadSpeed:0,downloaded:0});let _r=null,Lr=null,tt=null;function Bv(){async function t(){try{await navigator.storage.persist()||console.warn("Storage persistence denied");const k=await navigator.storage.estimate();return console.log(`Storage quota: ${k.quota} bytes`),console.log(`Storage usage: ${k.usage} bytes`),!0}catch(y){return console.error("Storage permission error:",y),!1}}async function e(){try{if(!(await navigator.storage.estimate()).quota)throw new Error("Storage quota is 0, likely in private mode");if("storage"in navigator&&"getDirectory"in navigator.storage){const k=await navigator.permissions.query({name:"persistent-storage"});if(k.state==="granted"||k.state==="prompt")return await t(),_r=await navigator.storage.getDirectory(),tt=await r(),!0}throw new Error("Storage API not available or permission denied")}catch(y){return console.warn("OPFS not available, falling back to in-memory storage:",y),_r=new c3,tt=_r,!0}}async function r(){return await _r.getDirectoryHandle("files",{create:!0})}function s(y){const k=Mc.value.map(A=>`&tr=${encodeURIComponent(A)}`).join("");return`magnet:?xt=urn:btih:${y}${k}`}function i(y){return y.replace(/[^a-zA-Z0-9.-]/g,"_")}async function n(y){try{const M=await(await(await tt.getFileHandle(`${y}.meta.json`)).getFile()).text();return JSON.parse(M)}catch{return null}}async function a(y,k){const M=await(await tt.getFileHandle(`${y}.meta.json`,{create:!0})).createWritable();await M.write(JSON.stringify(k)),await M.close()}async function o(){try{await e(),Lr=new u3,Lr.on("download",y=>{const k=Lr.torrents[Lr.torrents.length-1];k&&Object.assign(Ic,{done:k.done,progress:k.progress,downloaded:k.downloaded,downloadSpeed:k.downloadSpeed})}),Qn.value=!0,await u()}catch(y){return console.error("Torrent system initialization failed:",y),!1}}async function c(y,k){const A=i(y.name);try{const P=await(await tt.getFileHandle(A,{create:!0})).createWritable(),R=await y.arrayBuffer();return await P.write(R),await P.close(),await a(A,{originalName:y.name,type:y.type||"application/octet-stream",lastModified:Date.now(),infoHash:k}),A}catch(M){return console.error("Error caching downloaded file:",M),null}}async function u(){if(tt)for await(const[y]of tt.entries()){if(y.endsWith(".meta.json"))continue;const k=await n(y);if(!k)continue;const A=await b(y);if(A){const M=new File([A],k.originalName,{type:k.type}),P=k.infoHash?{infoHash:k.infoHash}:void 0;await f(M,y,P)}}}async function f(y,k,A={}){return new Promise(M=>{Lr.seed([y],A,P=>{Rr.set(k,{file:y,torrent:P,info:{infoHash:P.infoHash,magnetURI:P.magnetURI,name:P.name,length:P.length}}),M(Rr.get(k))})})}async function l(y){Qn.value||await o();const k=[];for(const A of y){const M=await p(A);if(M){const P=await f(A,M);k.push(P)}}return k}async function h(y){const k=Rr.get(y);k!=null&&k.torrent&&k.torrent.destroy(),await(tt==null?void 0:tt.removeEntry(y)),await(tt==null?void 0:tt.removeEntry(`${y}.meta.json`).catch(()=>{})),Rr.delete(y)}async function p(y){if(!tt)return null;try{const k=i(y.name),M=await(await tt.getFileHandle(k,{create:!0})).createWritable();return await M.write(y),await M.close(),await a(k,{originalName:y.name,type:y.type,lastModified:y.lastModified}),k}catch(k){return console.error("Error saving to OPFS:",k),null}}async function b(y){if(!tt)return null;try{return await(await tt.getFileHandle(y)).getFile()}catch(k){return console.error("Error loading from OPFS:",k),null}}async function m(y){if(!tt)return null;for await(const[k]of tt.entries()){if(k.endsWith(".meta.json"))continue;const A=await n(k);if((A==null?void 0:A.infoHash)===y){const M=await b(k);if(M){const P=new File([M],A.originalName,{type:A.type});return P.path=A.originalName,P.length=M.size,P.progress=1,P.downloaded=M.size,P.blob=async()=>new Blob([await P.arrayBuffer()],{type:P.type}),P}}}return null}async function v(y){Qn.value||await o();const k=await m(y);return k?(console.log("File found in cache, returning without download"),[k]):new Promise(async A=>{function M(R){const L=R.files.map(N=>(N.blob=()=>new Promise((I,d)=>{const g=[],w=N.createReadStream();w.on("data",D=>g.push(D)),w.on("end",()=>{const D=new Blob(g,{type:N.type||"application/octet-stream"});I(D)}),w.on("error",d)}),N));R.on("done",async()=>{for(const N of L)await c(N,R.infoHash)}),A(L)}let P=await Lr.get(y);if(P)M(P);else{const R=s(y);Lr.add(R,M)}})}async function x(){if(tt){for(const[y,k]of Rr)k!=null&&k.torrent&&k.torrent.destroy();Rr.clear();try{for await(const[y]of tt.entries())await tt.removeEntry(y);console.log("Files directory cleared successfully")}catch(y){throw console.error("Error clearing files directory:",y),y}}}async function _(){if(_r){await x();try{for await(const[y,k]of _r.entries())k.kind==="file"?await _r.removeEntry(y):k.kind==="directory"&&await _r.removeEntry(y,{recursive:!0});console.log("OPFS cleared successfully")}catch(y){throw console.error("Error clearing OPFS:",y),y}}}return{files:Rr,initialized:Qn,downloadStatus:Ic,init:o,upload:l,download:v,deleteFile:h,trackers:Mc,clearFiles:x,clearOPFS:_}}const l3=Mh("deep"),Nv=Ie({pub:""}),Oe=Ie({initiated:!1,auth:!1,is:null,name:"",pub:we(()=>{var t;return(t=Oe==null?void 0:Oe.is)==null?void 0:t.pub}),color:we(()=>Oe.pub?l3.hex(Oe.pub):"gray"),pulse:0,pulser:null,blink:!1,safe:{saved:!1,password:"",enc:"",pass:""},rooms:{},db:void 0,pair(){return console.warn("User pair read externally"),En()},async encrypt(t){return await fr.encrypt(t,En())},async decrypt(t){return await fr.decrypt(t,En())},async secret(t){return await fr.secret(t,En())}});let h3=0;function En(){var e,r;return console.log("User pair read",++h3),(r=(e=Be().user())==null?void 0:e._)==null?void 0:r.sea}function br(){if(!Oe.initiated){const t=Be();Oe.db=t.user(),t.user().recall({sessionStorage:!0},()=>{console.log("user was recalled")}),t.on("auth",()=>{const e=Be();Oe.is=e.user().is,Oe.pulser&&clearInterval(Oe.pulser),Oe.pulser=setInterval(()=>{e.user().get("pulse").put(Date.now())},1e3),e.user().get("epub").put(Oe.is.epub),e.user().get("pulse").on(r=>{Oe.blink=!Oe.blink,Oe.pulse=r}),e.user().get("safe").map().on((r,s)=>{Oe.safe[s]=r}),e.user().get("profile").get("name").on(r=>Oe.name=r),e.user().get("my_rooms").map().on(async(r,s)=>{let i=await fr.decrypt(s,Oe.pair());Oe.rooms[i]=r})}),Oe.initiated=!0}return{user:Oe,auth:Hd,leave:d3}}async function Hd(t,e=r=>{}){const r=Be();if(!p3(t)){console.log("incorrect pair",t);return}r.user().auth(t,async()=>{e(t),console.log("user is authenticated")})}function d3(){var r;const t=Be();let e=!!((r=Oe.is)!=null&&r.pub);Oe.initiated=!1,clearInterval(Oe.pulser),t.user().leave(),setTimeout(()=>{e&&!En()&&(Oe.is=null,console.info("User logged out"))},500)}function zv(t){Be().user().get("profile").get(t).put("")}function jv(t,e){t&&e!==void 0&&Be().user().get("profile").get(t).put(e)}function p3(t){return!!(t&&typeof t=="object"&&t.pub&&t.epub&&t.priv&&t.epriv)}var b3=Object.defineProperty,Pc=Object.getOwnPropertySymbols,m3=Object.prototype.hasOwnProperty,g3=Object.prototype.propertyIsEnumerable,Oc=(t,e,r)=>e in t?b3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ba=(t,e)=>{for(var r in e||(e={}))m3.call(e,r)&&Oc(t,r,e[r]);if(Pc)for(var r of Pc(e))g3.call(e,r)&&Oc(t,r,e[r]);return t},_3=()=>({emit(t,...e){for(let r=this.events[t]||[],s=0,i=r.length;s<i;s++)r[s](...e)},events:{},on(t,e){var r;return((r=this.events)[t]||(r[t]=[])).push(e),()=>{var s;this.events[t]=(s=this.events[t])==null?void 0:s.filter(i=>e!==i)}}});function Ai(t,e){return t-e}function v3(t){return t<0?-1:1}function Si(t){return[Math.abs(t),v3(t)]}function Wd(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var y3=2,ar=y3;function Vd(t,e){const r=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("fill",e),s.setAttribute("id",t),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),i.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(i),r.appendChild(s),r}function w3(t,e){const r=t.x-e.x,s=t.y-e.y;return r*r+s*s}function x3(t,e,r){let s=e.x,i=e.y,n=r.x-s,a=r.y-i;if(n!==0||a!==0){const o=((t.x-s)*n+(t.y-i)*a)/(n*n+a*a);o>1?(s=r.x,i=r.y):o>0&&(s+=n*o,i+=a*o)}return n=t.x-s,a=t.y-i,n*n+a*a}function k3(t,e){let r=t[0];const s=[r];let i;for(let n=1,a=t.length;n<a;n++)i=t[n],w3(i,r)>e&&(s.push(i),r=i);return r!==i&&i&&s.push(i),s}function Na(t,e,r,s,i){let n=s,a=0;for(let o=e+1;o<r;o++){const c=x3(t[o],t[e],t[r]);c>n&&(a=o,n=c)}n>s&&(a-e>1&&Na(t,e,a,s,i),i.push(t[a]),r-a>1&&Na(t,a,r,s,i))}function A3(t,e){const r=t.length-1,s=[t[0]];return Na(t,0,r,e,s),s.push(t[r]),s}function Fc(t,e,r=!1){if(t.length<=2)return t;const s=e*e;return t=r?t:k3(t,s),t=A3(t,s),t}var bn=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(t){}onUnselected(){}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(t){var e,r,s,i;const n=this.drauu.el,a=(e=this.drauu.options.cssZoom)!=null?e:1,o=(r=this.drauu.options.coordinateScale)!=null?r:1,c=(s=this.drauu.options.offset)!=null?s:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const u=this.drauu.el.getBoundingClientRect();return{x:(t.pageX/a-u.left+c.x)*o,y:(t.pageY/a-u.top+c.y)*o,pressure:t.pressure}}else{const u=this.drauu.svgPoint;u.x=t.clientX/a+c.x,u.y=t.clientY/a+c.y;const f=u.matrixTransform((i=n.getScreenCTM())==null?void 0:i.inverse());return{x:f.x*o,y:f.y*o,pressure:t.pressure}}}createElement(t,e){var r;const s=document.createElementNS("http://www.w3.org/2000/svg",t),i=e?Ba(Ba({},this.brush),e):this.brush;return s.setAttribute("fill",(r=i.fill)!=null?r:"transparent"),s.setAttribute("stroke",i.color),s.setAttribute("stroke-width",i.size.toString()),s.setAttribute("stroke-linecap","round"),i.dasharray&&s.setAttribute("stroke-dasharray",i.dasharray),s}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(ar))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},S3=class zr extends bn{constructor(){super(...arguments),this.points=[],this.count=0}onStart(e){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[e],this.brush.arrowEnd){this.arrowId=Wd();const r=Vd(this.arrowId,this.brush.color);this.el.appendChild(r)}return this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&(this.points.push(e),this.count+=1),this.count>5&&(this.points=Fc(this.points,1,!0),this.count=0),this.attr("d",zr.toSvgData(this.points)),!0}onEnd(){const e=this.el;if(this.el=null,!e)return!1;if(e.setAttribute("d",zr.toSvgData(Fc(this.points,1,!0))),!e.getTotalLength()){const{x:r,y:s}=this.points[0],i=this.brush.size/2;e.setAttribute("d",`M ${r-i} ${s} a ${i},${i} 0 1,0 ${i*2},0 a ${i},${i} 0 1,0 ${-i*2},0`),e.setAttribute("fill",this.brush.color),e.setAttribute("stroke-width","0")}return!0}static line(e,r){const s=r.x-e.x,i=r.y-e.y;return{length:Math.sqrt(s**2+i**2),angle:Math.atan2(i,s)}}static controlPoint(e,r,s,i){const n=r||e,a=s||e,o=.2,c=zr.line(n,a),u=c.angle+(i?Math.PI:0),f=c.length*o,l=e.x+Math.cos(u)*f,h=e.y+Math.sin(u)*f;return{x:l,y:h}}static bezierCommand(e,r,s){const i=zr.controlPoint(s[r-1],s[r-2],e),n=zr.controlPoint(e,s[r-1],s[r+1],!0);return`C ${i.x.toFixed(ar)},${i.y.toFixed(ar)} ${n.x.toFixed(ar)},${n.y.toFixed(ar)} ${e.x.toFixed(ar)},${e.y.toFixed(ar)}`}static toSvgData(e){return e.reduce((r,s,i,n)=>i===0?`M ${s.x.toFixed(ar)},${s.y.toFixed(ar)}`:`${r} ${zr.bezierCommand(s,i,n)}`,"")}},E3=class extends bn{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,r]=Si(t.x-this.start.x),[s,i]=Si(t.y-this.start.y);if(this.shiftPressed){const n=Math.min(e,s);e=n,s=n}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",s);else{const[n,a]=[this.start.x,this.start.x+e*r].sort(Ai),[o,c]=[this.start.y,this.start.y+s*i].sort(Ai);this.attr("cx",(n+a)/2),this.attr("cy",(o+c)/2),this.attr("rx",(a-n)/2),this.attr("ry",(c-o)/2)}return!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(!t.getTotalLength())return!1}catch{return!1}return!0}},C3=class extends bn{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(t){const e=(r,s)=>{if(r&&r.length)for(let i=0;i<r.length;i++){const n=r[i];if(n.getTotalLength){const a=n.getTotalLength();for(let o=0;o<this.pathSubFactor;o++){const c=n.getPointAtLength(a*o/this.pathSubFactor),u=n.getPointAtLength(a*(o+1)/this.pathSubFactor);this.pathFragments.push({x1:c.x,x2:u.x,y1:c.y,y2:u.y,segment:o,element:s||n})}}else n.children&&e(n.children,n)}};t&&e(t.children)}onUnselected(){this.pathFragments=[]}onStart(t){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=t.x,this.svgPointPrevious.y=t.y}onMove(t){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=t.x,this.svgPointCurrent.y=t.y;const e=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,e}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const t=this._erased;return this._erased=[],{undo:()=>t.forEach(e=>this.drauu._restoreNode(e)),redo:()=>t.forEach(e=>this.drauu._removeNode(e))}}checkAndEraseElement(){if(this.pathFragments.length)for(let t=0;t<this.pathFragments.length;t++){const e=this.pathFragments[t];if(this.svgPointPrevious&&this.svgPointCurrent){const r={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(e,r)&&(this.drauu._removeNode(e.element),this._erased.push(e.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(t=>!this._erased.includes(t.element))),this._erased.length>0}lineLineIntersect(t,e){const r=t.x1,s=t.x2,i=e.x1,n=e.x2,a=t.y1,o=t.y2,c=e.y1,u=e.y2,f=(r-s)*(c-u)-(a-o)*(i-n),l=(r*o-a*s)*(i-n)-(r-s)*(i*u-c*n),h=(r*o-a*s)*(c-u)-(a-o)*(i*u-c*n),p=(b,m,v)=>b>=m&&b<=v?!0:b>=v&&b<=m;if(f===0)return!1;{const b={x:l/f,y:h/f};return p(b.x,r,s)&&p(b.y,a,o)&&p(b.x,i,n)&&p(b.y,c,u)}}},D3=class extends bn{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=Wd(),r=document.createElementNS("http://www.w3.org/2000/svg","g");return r.append(Vd(e,this.brush.color)),r.append(this.el),this.attr("marker-end",`url(#${e})`),r}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:r}=t;if(this.shiftPressed){const s=t.x-this.start.x,i=t.y-this.start.y;if(i!==0){let n=s/i;n=Math.round(n),Math.abs(n)<=1?(e=this.start.x+i*n,r=this.start.y+i):(e=this.start.x+s,r=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-r),this.attr("x2",e),this.attr("y2",r)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",r)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(t.getTotalLength()<5)return!1}catch{return!1}return!0}},T3=class extends bn{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,r]=Si(t.x-this.start.x),[s,i]=Si(t.y-this.start.y);if(this.shiftPressed){const n=Math.min(e,s);e=n,s=n}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-s),this.attr("width",e*2),this.attr("height",s*2);else{const[n,a]=[this.start.x,this.start.x+e*r].sort(Ai),[o,c]=[this.start.y,this.start.y+s*i].sort(Ai);this.attr("x",n),this.attr("y",o),this.attr("width",a-n),this.attr("height",c-o)}return!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;try{if(!t.getTotalLength())return!1}catch{return!1}return!0}};function Rc(t,e,r,s=i=>i){return t*s(.5-e*(.5-r))}function M3(t){return[-t[0],-t[1]]}function It(t,e){return[t[0]+e[0],t[1]+e[1]]}function At(t,e){return[t[0]-e[0],t[1]-e[1]]}function Mt(t,e){return[t[0]*e,t[1]*e]}function I3(t,e){return[t[0]/e,t[1]/e]}function wn(t){return[t[1],-t[0]]}function Lc(t,e){return t[0]*e[0]+t[1]*e[1]}function P3(t,e){return t[0]===e[0]&&t[1]===e[1]}function O3(t){return Math.hypot(t[0],t[1])}function F3(t){return t[0]*t[0]+t[1]*t[1]}function Bc(t,e){return F3(At(t,e))}function Gd(t){return I3(t,O3(t))}function R3(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function xn(t,e,r){let s=Math.sin(r),i=Math.cos(r),n=t[0]-e[0],a=t[1]-e[1],o=n*i-a*s,c=n*s+a*i;return[o+e[0],c+e[1]]}function za(t,e,r){return It(t,Mt(At(e,t),r))}function Nc(t,e,r){return It(t,Mt(e,r))}var{min:en,PI:L3}=Math,zc=.275,kn=L3+1e-4;function B3(t,e={}){let{size:r=16,smoothing:s=.5,thinning:i=.5,simulatePressure:n=!0,easing:a=E=>E,start:o={},end:c={},last:u=!1}=e,{cap:f=!0,easing:l=E=>E*(2-E)}=o,{cap:h=!0,easing:p=E=>--E*E*E+1}=c;if(t.length===0||r<=0)return[];let b=t[t.length-1].runningLength,m=o.taper===!1?0:o.taper===!0?Math.max(r,b):o.taper,v=c.taper===!1?0:c.taper===!0?Math.max(r,b):c.taper,x=Math.pow(r*s,2),_=[],y=[],k=t.slice(0,10).reduce((E,O)=>{let T=O.pressure;if(n){let C=en(1,O.distance/r),F=en(1,1-C);T=en(1,E+(F-E)*(C*zc))}return(E+T)/2},t[0].pressure),A=Rc(r,i,t[t.length-1].pressure,a),M,P=t[0].vector,R=t[0].point,L=R,N=R,I=L,d=!1;for(let E=0;E<t.length;E++){let{pressure:O}=t[E],{point:T,vector:C,distance:F,runningLength:j}=t[E];if(E<t.length-1&&b-j<3)continue;if(i){if(n){let he=en(1,F/r),Ce=en(1,1-he);O=en(1,k+(Ce-k)*(he*zc))}A=Rc(r,i,O,a)}else A=r/2;M===void 0&&(M=A);let W=j<m?l(j/m):1,V=b-j<v?p((b-j)/v):1;A=Math.max(.01,A*Math.min(W,V));let Z=(E<t.length-1?t[E+1]:t[E]).vector,ie=E<t.length-1?Lc(C,Z):1,pe=Lc(C,P)<0&&!d,le=ie!==null&&ie<0;if(pe||le){let he=Mt(wn(P),A);for(let Ce=1/13,ye=0;ye<=1;ye+=Ce)N=xn(At(T,he),T,kn*ye),_.push(N),I=xn(It(T,he),T,kn*-ye),y.push(I);R=N,L=I,le&&(d=!0);continue}if(d=!1,E===t.length-1){let he=Mt(wn(C),A);_.push(At(T,he)),y.push(It(T,he));continue}let se=Mt(wn(za(Z,C,ie)),A);N=At(T,se),(E<=1||Bc(R,N)>x)&&(_.push(N),R=N),I=It(T,se),(E<=1||Bc(L,I)>x)&&(y.push(I),L=I),k=O,P=C}let g=t[0].point.slice(0,2),w=t.length>1?t[t.length-1].point.slice(0,2):It(t[0].point,[1,1]),D=[],S=[];if(t.length===1){if(!(m||v)||u){let E=Nc(g,Gd(wn(At(g,w))),-(M||A)),O=[];for(let T=1/13,C=T;C<=1;C+=T)O.push(xn(E,g,kn*2*C));return O}}else{if(!(m||v&&t.length===1))if(f)for(let O=1/13,T=O;T<=1;T+=O){let C=xn(y[0],g,kn*T);D.push(C)}else{let O=At(_[0],y[0]),T=Mt(O,.5),C=Mt(O,.51);D.push(At(g,T),At(g,C),It(g,C),It(g,T))}let E=wn(M3(t[t.length-1].vector));if(v||m&&t.length===1)S.push(w);else if(h){let O=Nc(w,E,A);for(let T=1/29,C=T;C<1;C+=T)S.push(xn(O,w,kn*3*C))}else S.push(It(w,Mt(E,A)),It(w,Mt(E,A*.99)),At(w,Mt(E,A*.99)),At(w,Mt(E,A)))}return _.concat(S,y.reverse(),D)}function N3(t,e={}){var r;let{streamline:s=.5,size:i=16,last:n=!1}=e;if(t.length===0)return[];let a=.15+(1-s)*.85,o=Array.isArray(t[0])?t:t.map(({x:p,y:b,pressure:m=.5})=>[p,b,m]);if(o.length===2){let p=o[1];o=o.slice(0,-1);for(let b=1;b<5;b++)o.push(za(o[0],p,b/4))}o.length===1&&(o=[...o,[...It(o[0],[1,1]),...o[0].slice(2)]]);let c=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],u=!1,f=0,l=c[0],h=o.length-1;for(let p=1;p<o.length;p++){let b=n&&p===h?o[p].slice(0,2):za(l.point,o[p],a);if(P3(l.point,b))continue;let m=R3(b,l.point);if(f+=m,p<h&&!u){if(f<i)continue;u=!0}l={point:b,pressure:o[p][2]>=0?o[p][2]:.5,vector:Gd(At(l.point,b)),distance:m,runningLength:f},c.push(l)}return c[0].vector=((r=c[1])==null?void 0:r.vector)||[0,0],c}function z3(t,e={}){return B3(N3(t,e),e)}var j3=class Zd extends bn{constructor(){super(...arguments),this.points=[]}onStart(e){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[e],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(e){return this.el||this.onStart(e),this.points[this.points.length-1]!==e&&this.points.push(e),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const e=this.el;return this.el=null,!!e}getSvgData(e){return Zd.getSvgData(e,this.brush)}static getSvgData(e,r){const s=z3(e,Ba({size:r.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},r.stylusOptions));if(!s.length)return"";const i=s.reduce((n,[a,o],c,u)=>{const[f,l]=u[(c+1)%u.length];return n.push(a,o,(a+f)/2,(o+l)/2),n},["M",...s[0],"Q"]);return i.push("Z"),i.map(n=>typeof n=="number"?n.toFixed(2):n).join(" ")}};function q3(t){return{draw:new S3(t),stylus:new j3(t),line:new D3(t),rectangle:new T3(t),ellipse:new E3(t),eraseLine:new C3(t)}}var U3=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=_3(),this._originalPointerId=null,this._models=q3(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget,t.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this._models[this.mode].onUnselected(),this.options.brush.mode=t,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e,r=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const s=this.resolveSelector(e)||this.el,i=this.eventStart.bind(this),n=this.eventMove.bind(this),a=this.eventEnd.bind(this),o=this.eventKeyboard.bind(this);s.addEventListener("pointerdown",i,{passive:!1}),r.addEventListener("pointermove",n,{passive:!1}),r.addEventListener("pointerup",a,{passive:!1}),r.addEventListener("pointercancel",a,{passive:!1}),r.addEventListener("keydown",o,!1),r.addEventListener("keyup",o,!1),this._disposables.push(()=>{s.removeEventListener("pointerdown",i),r.removeEventListener("pointermove",n),r.removeEventListener("pointerup",a),r.removeEventListener("pointercancel",a),r.removeEventListener("keydown",o,!1),r.removeEventListener("keyup",o,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){this.acceptsInput(t)&&(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=t.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);if(!e)this.cancel();else if(e===!0){const r=this._currentNode;r&&(this._appendNode(r),this.commit({undo:()=>this._removeNode(r),redo:()=>this._restoreNode(r)}))}else this.commit(e);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(t){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==t.pointerId)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(t){this._opStack.length=this._opIndex,this._opStack.push(t),this._opIndex++;const e=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",e)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}_appendNode(t){const e=this._elements.at(-1);e?e.after(t):this.el.append(t);const r=this._elements.push(t)-1;t.dataset.drauu_index=r.toString()}_removeNode(t){t.remove(),this._elements[+t.dataset.drauu_index]=null}_restoreNode(t){const e=+t.dataset.drauu_index;this._elements[e]=t;for(let r=e-1;r>=0;r--){const s=this._elements[r];if(s){s.after(t);return}}this.el.prepend(t)}};function $3(t){return new U3(t)}const nt=Ie({colors:["#000000",...new Array(12).fill(!0).map((t,e)=>`hsl(${e*30}, 100%,50%)`),"#ffffff"],sizes:J0([4,8,16,24]),modes:["line","arrow","stylus","rectangle","ellipse"],mode:we({get(){return jc.value},set(t){jc.value=t,t==="arrow"?(Ur.mode="line",Ur.arrowEnd=!0):(Ur.mode=t,Ur.arrowEnd=!1)}}),enabled:!1,pinned:Yt("drawing-pinned",!1),canUndo:!1,canRedo:!1,canClear:!1,ing:!1,initiated:!1,content:"",clear:()=>{}}),Ur=w0(Yt("drawing-brush",{color:nt.colors[0],size:10,mode:"stylus",arrowEnd:!1})),jc=Je("stylus");let ja=!1;const H3=Ie({brush:Ur,acceptsInputTypes:we(()=>nt.enabled?void 0:["pen"])}),ct=bf($3(H3));function ei(){ja=!0,nt.content!=null?ct.load(nt.content):ct==null||ct.clear(),ja=!1}function W3(){var t;nt.canRedo=ct.canRedo(),nt.canUndo=ct.canUndo(),nt.canClear=!!((t=ct.el)!=null&&t.children.length)}function qv(){if(!nt.initiated){const t=Be(),{user:e}=br(),r=t.user(De.pub).get("space").get(e.pub).get("draw");r.on(n=>{nt.ing||(nt.content=n,ei())});const s=kh(()=>{var n;if(W3(),!ja){let a=ct.dump();nt.content=a,r.put(a,void 0,{opt:{cert:(n=De.features)==null?void 0:n.space}})}},200);ct.on("changed",s),v0(()=>{Ci(()=>{ei()})}),it(()=>De.pub,n=>{ct==null||ct.clear(),nt.content="",ei()}),ct.on("start",()=>nt.ing=!0),ct.on("end",()=>nt.ing=!1),nt.clear=()=>{var n;ct==null||ct.clear(),nt.content="",r.put("",void 0,{opt:{cert:(n=De.features)==null?void 0:n.space}})};const i=[];window.addEventListener("keydown",n=>{if(!nt.enabled)return;const a=!n.ctrlKey&&!n.altKey&&!n.shiftKey&&!n.metaKey;let o=!0;n.code==="KeyZ"&&(n.ctrlKey||n.metaKey)?n.shiftKey?ct.redo():ct.undo():n.code==="Escape"?nt.enabled=!1:n.code==="KeyC"&&(n.ctrlKey||n.metaKey)?nt.clear():n.code.startsWith("Digit")&&a&&+n.code[5]<=i.length?Ur.color=i[+n.code[5]-1]:o=!1,o&&(n.preventDefault(),n.stopPropagation())},!1)}return nt.initiated=!0,{brush:Ur,draw:nt,drauu:ct,loadCanvas:ei}}const Kd={trie:"ABAOAAAAAAAQmQAAAYAIf/ftmwuoFUUYx+d4z7nnHO+rUiF8gFHRBQ00CyQpJEtMUiwSSjLkViBlIqUhXnuoEXXpaWVkJFFWpj3EQCN6UdiVIKw0C4QSxbDkhkSKlUL/ZXe709yZ2XnvUfeDHzM7M/t937xn9+yZ3kTIDWAO6ALLwEoqzTbsAavBk2CNQvl14A1J/kawBXwIPgdfge/Aj2AfVe4g6AN/gL8BKRNSA1XQAYaCkeBF8ApYX47vTdkDLkDa2+BdsBV8Ar4EvWAn+AH8DPaBQ6CPuj4KTiblKxVC2irx/cMQvoNwVCW2cyHCOq4vrvTrn4D4pOR6CsJrwFjKfnTfDKSNq8Xx2YjfUun3fR7i85PrBQjvTeLdCFeBHjCUKr8a8bXgVbCx8v92uLHWz9yE28CSBLqsjDcVy7lmSyXmr3JMlPYBrj9L6jmf6ffxSN/OtMHXFbH+3UneXoQHkvgjYEii9zDSfgfHwAlQbiaktTnOG5KEw5sH6h2NtE5Oeko0r8ZJ8lVZCD8XR+MMumZS6VEdnkjq8zjVz88ivlaj319G2fVU+TT+FsL3JHq2SfI+Rt520At2gt0Ue5nr/eBXcAQcB/+AprpeG7Volqc5J7l3uIGOiUz/7uKMAdv+j7iSsjPVckyNtmirgoKCgoKCgoKCgoKCggIVZjTH79LS64WS9zYps3HPXOqZt7dKyGU1Qu5A2t1J+hKEy8HsWvw+cAXiVyD+WJL/FMIXwEvJ9WsIjyHclPEs/T7yH4CeB8FDYAVYCVaBh2tFXpFX5BV5RZ7rvLvAPeC+Wv57VkFBwenLNge/0clY09T/uzpLFyeNPh8vL/vxSYcNbTGHwDQFOtsJmdg+MH0pk7YB14dAZwch8zritOcQ7gDkLEJGgllgcgshi8D+OiHnDSbk+VLMzVScZVOLOI+mm9KxGfHDuG9MK54twOvgYKuanoKCgoKC048j2BcI9oUDOCccx35YKsffeUTfCV2C+OXJHj0I4W9IuxrPLEea4/yj4CpqDz/JOWtEuirV/u/I2hAfVuXvxSOQfj6VNwbxCYKyERORN5nKn1bt/+4pYhaVF33/dZNE11xJXsRU6J3JnFduxz0LwOLoXuR1JzrmGJxrVlL2exB/mvFnDa67Er3rMnylWa9R1ierGuCsx7IDbXN9QHs9aINvYHMPp09+apB+0iX6XreHYhlDj4RnygPLn2nYtP2nGc92Q5g51+v5WdCEnfBpl8Cv8Qq/n6jwrWa993LKd3hevzYm839zA6wDW+HDddjnP6J8+cKBX9Gc/6Uah30I/wQnGqC+qpTRJq0Z72xN++/sU+BdMFu3c08Bn02gv9/mcVE9/n48KjsW8UvBpHqc1wmmID49+g65nq2LZbRiue/BnAz9t9b59aHrOoK67kr03ZnctygJlyK8n7I1Kvo9A9ePGtSPtW/S/j6J2vXaptJ/lOO/7mTSRMUHKd6jQiH5SdH+7saxz/HfzvGZTTOVyhmOSwllp9Ek7z407Xc6FMVPdykJUBXdNm/kPacR15dQY1BWh1JGGVYHr6wPof3KSxpprDSynAnt4KpuvDlVUtTvmqqgDlUK9ppeM1TraSqsXdZ3Oj0Vnf2NJ7b305K2n2zfFbW/q/2lyoEwcdoPuo+rVJj33JWNYd784YnoPGQ7d3R9LmXc50No+z7OaeVEdxtx9/7H9bslV8/VqYR+H+bCBm/dp4W31qZjRoaL/ahR3zfy1hbR/q9aLpTI7LLrWV5Cj0lC5Pu+6BxAl6f3Ntm9Ov7ltf+x9Qltm/VB1Iasj3R5HVuqZUP2R4WJ5zVfZPODV5bnN1vWZTva6hfNd1o3e371MQ58jy/b9cilH7Q/Pua36Xqbh4jW2qznYVXdOvbzeObi7adpuuxMk6Uzz/6MhD0X8M4IvP51XT/2zJKnsP2p449ov+GdEejyvHcRrsc62+ema23WudOVqPprYjfvfSaEPXaM8ey5nG8qfcRD5Wxja8/GP1fYimq7sfXVWbNtRfXs7aM9THVEovrO0kZ8tH2otUtlzNFjTbaXqb6/0K2bzzaQ1ZGXzgqv/iI9IfvS51marq/K2kyHJOMe1XZUGVMi3SElq56i+tLpeYmPvS+vfqCFN5Z4c97nvGVt8Pqe55+uqKzbKnPRx97OXqui+5wj85vOUz0rhEBky0ZcjmeR3ya/N7r+jTJLfLUBL810jOqOYxfCWwN9+yBaj0KJy/lqYtvULx+iuwa73sNpvSJ7KvZDjp/UnqyNRNcmdlTK5H1m9KGPN/Zl7WjSxqrjy/TZSvSszL6HDz1+eZKnDyFs66ypoj1eRa9v0TlTqOpyKfQYz1tEa3Qee23qj0vRfVdi+zwp2ut03rnq+OxDaN/ZNV90rdpuOj6zelXbIeR4TcXm/QE9PnyKK/2yMylbH9EcyOO5hieyuqQieh7Lqw6ubZqOXZMxKxobsjGk6r/qPuZaTPaYkH2YCtuHdHlWV2hRabcQ80zVhs7abiMq73Vt54+qqPYRz8esevheV1XGE9uehFNGJrzfElh9tutnlrDj0KVOX/PQ53xn290EHd9tfFQVH+8ZdUW0/rD5Iddw33ZC7kMiu65xZUulDjr19SUi3122oQufXPmmOy+z7PqQ0O3pWtoDwquTqGxzIFyJr33N9Z4fQkL6YXM2ckGtAaClnjODPdPKoCsu68qK77qrwEoLGdhmPgltLxWf3xz51s3DREdIUbUZ0i9XtnTONLJ7Q/hqKrpjRrVs3vWihddXsn7UPc+a3OML0zaxtWfSXoTIfTbN45U1WUtltmT+i+qqY9u0X21E156NX3ndK9Np0095+6KiUyXNh5jOA54eV21ju36yemz8yPLJ1Vrgep8JtU/Zim4b88qp2vFFHjZ9rW8mvtvq9u2rrZ5Q9m3t+BpbJnk+x/e/",classes:{Other:0,Prepend:1,CR:2,LF:3,Control:4,Extend:5,Regional_Indicator:6,SpacingMark:7,L:8,V:9,T:10,LV:11,LVT:12,ZWJ:13,ExtPict:14}};var uo=0,Jd=-3;function Fn(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function V3(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new Fn,this.dtree=new Fn}var Xd=new Fn,Yd=new Fn,co=new Uint8Array(30),fo=new Uint16Array(30),Qd=new Uint8Array(30),e0=new Uint16Array(30),G3=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qc=new Fn,Lt=new Uint8Array(320);function t0(t,e,r,s){var i,n;for(i=0;i<r;++i)t[i]=0;for(i=0;i<30-r;++i)t[i+r]=i/r|0;for(n=s,i=0;i<30;++i)e[i]=n,n+=1<<t[i]}function Z3(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[168+r]=280+r;for(r=0;r<112;++r)t.trans[176+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}var Uc=new Uint16Array(16);function aa(t,e,r,s){var i,n;for(i=0;i<16;++i)t.table[i]=0;for(i=0;i<s;++i)t.table[e[r+i]]++;for(t.table[0]=0,n=0,i=0;i<16;++i)Uc[i]=n,n+=t.table[i];for(i=0;i<s;++i)e[r+i]&&(t.trans[Uc[e[r+i]]++]=i)}function K3(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=t.tag&1;return t.tag>>>=1,e}function Vt(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var s=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,s+r}function qa(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,s=0,i=0,n=t.tag;do s=2*s+(n&1),n>>>=1,++i,r+=e.table[i],s-=e.table[i];while(s>=0);return t.tag=n,t.bitcount-=i,e.trans[r+s]}function J3(t,e,r){var s,i,n,a,o,c;for(s=Vt(t,5,257),i=Vt(t,5,1),n=Vt(t,4,4),a=0;a<19;++a)Lt[a]=0;for(a=0;a<n;++a){var u=Vt(t,3,0);Lt[G3[a]]=u}for(aa(qc,Lt,0,19),o=0;o<s+i;){var f=qa(t,qc);switch(f){case 16:var l=Lt[o-1];for(c=Vt(t,2,3);c;--c)Lt[o++]=l;break;case 17:for(c=Vt(t,3,3);c;--c)Lt[o++]=0;break;case 18:for(c=Vt(t,7,11);c;--c)Lt[o++]=0;break;default:Lt[o++]=f;break}}aa(e,Lt,0,s),aa(r,Lt,s,i)}function $c(t,e,r){for(;;){var s=qa(t,e);if(s===256)return uo;if(s<256)t.dest[t.destLen++]=s;else{var i,n,a,o;for(s-=257,i=Vt(t,co[s],fo[s]),n=qa(t,r),a=t.destLen-Vt(t,Qd[n],e0[n]),o=a;o<a+i;++o)t.dest[t.destLen++]=t.dest[o]}}}function X3(t){for(var e,r,s;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],r=t.source[t.sourceIndex+3],r=256*r+t.source[t.sourceIndex+2],e!==(~r&65535))return Jd;for(t.sourceIndex+=4,s=e;s;--s)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,uo}function Hc(t,e){var r=new V3(t,e),s,i,n;do{switch(s=K3(r),i=Vt(r,2,0),i){case 0:n=X3(r);break;case 1:n=$c(r,Xd,Yd);break;case 2:J3(r,r.ltree,r.dtree),n=$c(r,r.ltree,r.dtree);break;default:n=Jd}if(n!==uo)throw new Error("Data error")}while(!s);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}Z3(Xd,Yd);t0(co,fo,4,3);t0(Qd,e0,2,1);co[28]=0;fo[28]=258;const Y3=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,Wc=(t,e,r)=>{let s=t[e];t[e]=t[r],t[r]=s},Q3=t=>{const e=t.length;for(let r=0;r<e;r+=4)Wc(t,r,r+3),Wc(t,r+1,r+2)},e_=t=>{Y3&&Q3(t)},t_={swap32LE:e_},r_=t_.swap32LE,lo=11,Hr=5,n_=lo-Hr,i_=65536>>lo,s_=1<<n_,a_=s_-1,di=2,o_=1<<Hr,oa=o_-1,r0=65536>>Hr,u_=1024>>Hr,c_=r0+u_,f_=c_,l_=32,h_=f_+l_,d_=1<<di;class p_{constructor(e){const r=typeof e.readUInt32BE=="function"&&typeof e.slice=="function";if(r||e instanceof Uint8Array){let s;if(r)this.highStart=e.readUInt32LE(0),this.errorValue=e.readUInt32LE(4),s=e.readUInt32LE(8),e=e.slice(12);else{const i=new DataView(e.buffer);this.highStart=i.getUint32(0,!0),this.errorValue=i.getUint32(4,!0),s=i.getUint32(8,!0),e=e.subarray(12)}e=Hc(e,new Uint8Array(s)),e=Hc(e,new Uint8Array(s)),r_(e),this.data=new Uint32Array(e.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=e)}get(e){let r;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(r=(this.data[e>>Hr]<<di)+(e&oa),this.data[r]):e<=65535?(r=(this.data[r0+(e-55296>>Hr)]<<di)+(e&oa),this.data[r]):e<this.highStart?(r=this.data[h_-i_+(e>>lo)],r=this.data[r+(e>>Hr&a_)],r=(r<<di)+(e&oa),this.data[r]):this.data[this.data.length-d_]}}const Vc=Kd.trie,{Other:Gc,Prepend:Zc,CR:ua,LF:ca,Control:Kc,Extend:ti,Regional_Indicator:or,SpacingMark:b_,L:Jc,V:fa,T:la,LV:Xc,LVT:Yc,ZWJ:tn,ExtPict:ri}=Kd.classes;let pi=null;if(globalThis.window){const t=window.atob(Vc);pi=new Uint8Array(t.length);for(let e=0;e<t.length;e++)pi[e]=t.charCodeAt(e)}else pi=Buffer.from(Vc,"base64");const Ei=new p_(pi),Qc=function(t,e){const r=t.charCodeAt(e);if(55296<=r&&r<=56319){const s=r,i=t.charCodeAt(e+1);return 56320<=i&&i<=57343?(s-55296)*1024+(i-56320)+65536:s}if(56320<=r&&r<=57343){const s=t.charCodeAt(e-1),i=r;return 55296<=s&&s<=56319?(s-55296)*1024+(i-56320)+65536:i}return r},ho=function(t,e){let r,s;return 55296<=(r=t.charCodeAt(e))&&r<=56319&&56320<=(s=t.charCodeAt(e+1))&&s<=57343},Ke={NotBreak:0,BreakStart:1,Break:2,BreakLastRegional:3,BreakPenultimateRegional:4},n0=function(t,e,r,s){const i=[e].concat(r).concat([s]),n=t?e:i[i.length-2],a=t?i[1]:s;let o=i.lastIndexOf(or);if(o>0&&i.slice(1,o).every(c=>c===or)&&n!==Zc&&n!==or)return i.filter(c=>c===or).length%2===1?Ke.BreakLastRegional:Ke.BreakPenultimateRegional;if(n===ua&&a===ca)return Ke.NotBreak;if(n===Kc||n===ua||n===ca)return a!==ti&&r.every(c=>c===ti)?Ke.Break:Ke.BreakStart;if(a===Kc||a===ua||a===ca)return Ke.BreakStart;if(n===Jc&&(a===Jc||a===fa||a===Xc||a===Yc)||(n===Xc||n===fa)&&(a===fa||a===la)||(n===Yc||n===la)&&a===la)return Ke.NotBreak;if(t){if(a===ti)return Ke.NotBreak;if(a===tn)return n==Gc&&r.length>0&&r[0]==tn?s!=ri?Ke.BreakStart:Ke.Break:Ke.NotBreak}else if(a===ti||a===tn)return Ke.NotBreak;if(a===b_||n===Zc)return Ke.NotBreak;if(t){if(n==tn&&a==ri&&(e==tn||e==Gc))return Ke.NotBreak}else if(e==ri&&n==tn&&a==ri)return Ke.NotBreak;return!t&&r.indexOf(or)>=0?Ke.Break:n===or&&a===or?Ke.NotBreak:Ke.BreakStart},ef=function(t,e,r){for(;r--;)e+=ho(t,e)?2:1;return e},hn={};hn.nextBreak=function(t,e=0){if(e<0)return 0;if(e>=t.length-1)return t.length;const r=Ei.get(t.codePointAt(e)),s=[];let i,n,a;for(i=n=e+1,a=t.length;n<a;i=n+=1){if(ho(t,i-1))continue;const o=Ei.get(t.codePointAt(i));if(n0(!1,r,s,o))return i;s.push(o)}return t.length};hn.previousBreak=function(t,e=t.length){if(e>t.length)return t.length;if(e<=1)return 0;e--;let r=[],s=Ei.get(Qc(t,e)),i,n;for(i=n=e-1;n>=-1;i=n+=-1){if(ho(t,i))continue;let a=Ei.get(Qc(t,i));switch(n0(!0,a,r,s)){case Ke.Break:return i+r.length+1;case Ke.BreakStart:return i+1;case Ke.BreakLastRegional:return ef(t,i,r.concat(s).lastIndexOf(or)+1);case Ke.BreakPenultimateRegional:return ef(t,i,r.concat(s).lastIndexOf(or))}r.unshift(a)}};hn.break=function(t){const e=[];let r=0,s;for(;(s=hn.nextBreak(t,r))<t.length;)e.push(t.slice(r,s)),r=s;return r<t.length&&e.push(t.slice(r)),e};hn.countBreaks=function(t){let e=0,r=0,s;for(;(s=hn.nextBreak(t,r))<t.length;)r=s,e++;return r<t.length&&e++,e};var m_=Object.create,i0=Object.defineProperty,g_=Object.getOwnPropertyDescriptor,__=Object.getOwnPropertyNames,v_=Object.getPrototypeOf,y_=Object.prototype.hasOwnProperty,Kr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),w_=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of __(e))!y_.call(t,i)&&i!==r&&i0(t,i,{get:()=>e[i],enumerable:!(s=g_(e,i))||s.enumerable});return t},po=(t,e,r)=>(r=t!=null?m_(v_(t)):{},w_(i0(r,"default",{value:t,enumerable:!0}),t)),s0=Kr(t=>{(function(e){typeof DO_NOT_EXPORT_CRC>"u"?typeof t=="object"?e(t):typeof define=="function"&&define.amd?define(function(){var r={};return e(r),r}):e({}):e({})})(function(e){e.version="0.3.0";function r(){for(var u=0,f=new Array(256),l=0;l!=256;++l)u=l,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,f[l]=u;return typeof Int32Array<"u"?new Int32Array(f):f}var s=r(),i=typeof Buffer<"u";function n(u){if(u.length>32768&&i)return o(new Buffer(u));for(var f=-1,l=u.length-1,h=0;h<l;)f=s[(f^u.charCodeAt(h++))&255]^f>>>8,f=s[(f^u.charCodeAt(h++))&255]^f>>>8;return h===l&&(f=f>>>8^s[(f^u.charCodeAt(h))&255]),f^-1}function a(u){if(u.length>1e4)return o(u);for(var f=-1,l=0,h=u.length-3;l<h;)f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255];for(;l<h+3;)f=f>>>8^s[(f^u[l++])&255];return f^-1}function o(u){for(var f=-1,l=0,h=u.length-7;l<h;)f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255],f=f>>>8^s[(f^u[l++])&255];for(;l<h+7;)f=f>>>8^s[(f^u[l++])&255];return f^-1}function c(u){for(var f=-1,l=0,h=u.length,p,b;l<h;)p=u.charCodeAt(l++),p<128?f=f>>>8^s[(f^p)&255]:p<2048?(f=f>>>8^s[(f^(192|p>>6&31))&255],f=f>>>8^s[(f^(128|p&63))&255]):p>=55296&&p<57344?(p=(p&1023)+64,b=u.charCodeAt(l++)&1023,f=f>>>8^s[(f^(240|p>>8&7))&255],f=f>>>8^s[(f^(128|p>>2&63))&255],f=f>>>8^s[(f^(128|b>>6&15|p&3))&255],f=f>>>8^s[(f^(128|b&63))&255]):(f=f>>>8^s[(f^(224|p>>12&15))&255],f=f>>>8^s[(f^(128|p>>6&63))&255],f=f>>>8^s[(f^(128|p&63))&255]);return f^-1}e.table=s,e.bstr=n,e.buf=a,e.str=c})}),x_=Kr((t,e)=>{var r=s0();e.exports=a;var s=new Uint8Array(4),i=new Int32Array(s.buffer),n=new Uint32Array(s.buffer);function a(o){if(o[0]!==137)throw new Error("Invalid .png file header");if(o[1]!==80)throw new Error("Invalid .png file header");if(o[2]!==78)throw new Error("Invalid .png file header");if(o[3]!==71)throw new Error("Invalid .png file header");if(o[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(o[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(o[6]!==26)throw new Error("Invalid .png file header");if(o[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var c=!1,u=[],f=8;f<o.length;){s[3]=o[f++],s[2]=o[f++],s[1]=o[f++],s[0]=o[f++];var l=n[0]+4,h=new Uint8Array(l);h[0]=o[f++],h[1]=o[f++],h[2]=o[f++],h[3]=o[f++];var p=String.fromCharCode(h[0])+String.fromCharCode(h[1])+String.fromCharCode(h[2])+String.fromCharCode(h[3]);if(!u.length&&p!=="IHDR")throw new Error("IHDR header missing");if(p==="IEND"){c=!0,u.push({name:p,data:new Uint8Array(0)});break}for(var b=4;b<l;b++)h[b]=o[f++];s[3]=o[f++],s[2]=o[f++],s[1]=o[f++],s[0]=o[f++];var m=i[0],v=r.buf(h);if(v!==m)throw new Error("CRC values for "+p+" header do not match, PNG file is likely corrupted");var x=new Uint8Array(h.buffer.slice(4));u.push({name:p,data:x})}if(!c)throw new Error(".png file ended prematurely: no IEND header was found");return u}}),k_=Kr((t,e)=>{e.exports=function(r,s,i){var n=[],a=r.length;if(a===0)return n;var o=s<0?Math.max(0,s+a):s||0;for(i!==void 0&&(a=i<0?i+a:i);a-- >o;)n[a-o]=r[a];return n}}),A_=Kr((t,e)=>{var r=k_(),s=s0();e.exports=o;var i=new Uint8Array(4),n=new Int32Array(i.buffer),a=new Uint32Array(i.buffer);function o(c){var u=8,f=u,l;for(l=0;l<c.length;l++)u+=c[l].data.length,u+=12;var h=new Uint8Array(u);for(h[0]=137,h[1]=80,h[2]=78,h[3]=71,h[4]=13,h[5]=10,h[6]=26,h[7]=10,l=0;l<c.length;l++){var p=c[l],b=p.name,m=p.data,v=m.length,x=[b.charCodeAt(0),b.charCodeAt(1),b.charCodeAt(2),b.charCodeAt(3)];a[0]=v,h[f++]=i[3],h[f++]=i[2],h[f++]=i[1],h[f++]=i[0],h[f++]=x[0],h[f++]=x[1],h[f++]=x[2],h[f++]=x[3];for(var _=0;_<v;)h[f++]=m[_++];var y=x.concat(r(m)),k=s.buf(y);n[0]=k,h[f++]=i[3],h[f++]=i[2],h[f++]=i[1],h[f++]=i[0]}return h}}),S_=Kr((t,e)=>{e.exports=r;function r(s,i){if(s=String(s),i=String(i),!/^[\x00-\xFF]+$/.test(s)||!/^[\x00-\xFF]+$/.test(i))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(s.length>=80)throw new Error('Keyword "'+s+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=s.length+i.length+1,a=new Uint8Array(n),o=0,c,u=0;u<s.length;u++){if(!(c=s.charCodeAt(u)))throw new Error("0x00 character is not permitted in tEXt keywords");a[o++]=c}a[o++]=0;for(var f=0;f<i.length;f++){if(!(c=i.charCodeAt(f)))throw new Error("0x00 character is not permitted in tEXt content");a[o++]=c}return{name:"tEXt",data:a}}}),E_=Kr((t,e)=>{e.exports=r;function r(s){s.data&&s.name&&(s=s.data);for(var i=!0,n="",a="",o=0;o<s.length;o++){var c=s[o];if(i)c?a+=String.fromCharCode(c):i=!1;else if(c)n+=String.fromCharCode(c);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:a,text:n}}}),C_=Kr(t=>{t.encode=S_(),t.decode=E_()}),D_=()=>{if(typeof window>"u"||typeof window.CanvasRenderingContext2D>"u"||!r())return;let t=CanvasRenderingContext2D.prototype,e=t.drawImage;if(!e){console.error("This script requires a basic implementation of drawImage");return}t.drawImage=function(a,o,c){if(arguments.length!==9)return e.apply(this,[...arguments]);let u=s(...arguments);if(!i(u))return e.apply(this,u)};function r(){let a=document.createElement("canvas").getContext("2d");a.fillRect(0,0,40,40),a.drawImage(a.canvas,-40,-40,80,80,50,50,20,20);let o=a.getImageData(50,50,30,30),c=new Uint32Array(o.data.buffer),u=(h,p)=>c[p*o.width+h],f=[[9,9],[20,9],[9,20],[20,20]],l=[[10,10],[19,10],[10,19],[19,19]];return f.some(([h,p])=>u(h,p)!==0)||l.some(([h,p])=>u(h,p)===0)}function s(a,o,c,u,f,l,h,p,b){let{width:m,height:v}=n(a);u<0&&(o+=u,u=Math.abs(u)),f<0&&(c+=f,f=Math.abs(f)),p<0&&(l+=p,p=Math.abs(p)),b<0&&(h+=b,b=Math.abs(b));let x=Math.max(o,0),_=Math.min(o+u,m),y=Math.max(c,0),k=Math.min(c+f,v),A=p/u,M=b/f;return[a,x,y,_-x,k-y,o<0?l-o*A:l,c<0?h-c*M:h,(_-x)*A,(k-y)*M]}function i(a){return[3,4,7,8].some(o=>!a[o])}function n(a){let o=c=>{let u=globalThis[c];return u&&a instanceof u};if(o("HTMLImageElement"))return{width:a.naturalWidth,height:a.naturalHeight};if(o("HTMLVideoElement"))return{width:a.videoWidth,height:a.videoHeight};if(o("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(o("HTMLCanvasElement")||o("ImageBitmap"))return a}},a0=po(x_()),T_=po(A_()),o0=po(C_()),mn=Je(null);function M_(t){try{let e=t.toDataURL("image/png").split(",")[1],r=atob(e),s=new Uint8Array(r.length);for(let i=0;i<r.length;i++)s[i]=r.charCodeAt(i);return s}catch(e){return mn.value="Failed to convert canvas to buffer: "+e.message,null}}function I_(t,e){try{let r=`<metadata>
      <gun-data>${JSON.stringify(e)}</gun-data>
    </metadata>`;return t.replace("</svg>",`${r}</svg>`)}catch(r){return mn.value="Failed to embed data in SVG: "+r.message,null}}function P_(t){try{let e=t.match(/<gun-data>(.*?)<\/gun-data>/s);return e?JSON.parse(e[1]):null}catch(e){return mn.value="Failed to extract data from SVG: "+e.message,null}}function u0(t,e,r="png"){if(r==="svg"){let s=t.outerHTML||t;return I_(s,e)}try{let s=M_(t);if(!s)return null;let i=(0,a0.default)(s);return i.splice(-1,0,o0.default.encode("message",JSON.stringify(e))),(0,T_.default)(i)}catch(s){return mn.value="Failed to embed data: "+s.message,null}}function O_(t,e="image/png"){if(e==="image/svg+xml"){let r=new TextDecoder().decode(t);return P_(r)}try{let r=(0,a0.default)(t).filter(s=>s.name==="tEXt").map(s=>o0.default.decode(s.data)).find(s=>s.keyword==="message");return r?JSON.parse(r.text):null}catch(r){return mn.value=r.message,null}}async function Uv(t){try{if(!(t instanceof File))throw new Error("Input must be a File object");let e=await t.arrayBuffer(),r=new Uint8Array(e);return await O_(r)}catch(e){return mn.value=e.message,null}}var c0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function F_(t){return t.split("").reduce((e,r)=>e*64+c0.indexOf(r),0)}function R_(t){let e=c0.split(""),r=[],s=0;for(let i of t)r[s++]=e.indexOf(i)/64;return r}var ni={};function $v({pub:t,size:e=200,dark:r=!1,draw:s="circles",reflect:i=!0,round:n=!0,embed:a=!0}){let o=typeof window<"u"&&typeof document<"u";if(!L_(t))return"";if(!o)return N_({pub:t,size:e,dark:r,embed:a});let c=JSON.stringify(arguments[0]);if(ni!=null&&ni[c])return ni[c];let u=document.createElement("canvas");u.width=u.height=e;let f=u.getContext("2d"),{decoded:l,finals:h}=f0(t);if(B_({ctx:f,top:h[0],bottom:h[1],size:e,dark:r}),s=="squares"?(f.filter="blur(20px)",tf(l[0],f,e),f.filter="blur(0px)",f.globalCompositeOperation="color-burn",tf(l[1],f,e)):(rf(l[0],f,e,.42*e),f.globalCompositeOperation="multiply",rf(l[1],f,e,.125*e)),i&&(f.globalCompositeOperation="source-over",f.scale(-1,1),f.translate(-e/2,0),f.drawImage(u,e/2,0,e,e,0,0,e,e),f.setTransform(1,0,0,1,0,0)),n){let b=f.getImageData(0,0,e,e);f.clearRect(0,0,e,e),f.fillStyle=r?"#cccccc":"#ffffff",f.fillRect(0,0,e,e),f.putImageData(b,0,0),f.globalCompositeOperation="destination-in",f.beginPath(),f.arc(e/2,e/2,e/2,0,Math.PI*2),f.closePath(),f.fill()}let p=u.toDataURL("image/png");if(a){let b=u0(u,{pub:t,content:a});if(b){let m=new Blob([b],{type:"image/png"});p=URL.createObjectURL(m)}}return ni[c]=p,p}function L_(t){return t&&typeof t=="string"&&t.length===87&&t.split(".").length===2}function f0(t){let e=t.split("."),r=e.map(o=>R_(o)),s=r.map(o=>o[42]),i=r.map(o=>o.reduce((c,u)=>c+u)/o.length),n=e.map(o=>F_(o)%360),a=e.map((o,c)=>`hsl(${n[c]} ${s[c]*100}% ${i[c]*100}%)`);return{finals:s,decoded:r,angles:n,averages:i,colors:a}}function bo(t,e=3){return[...Array(Math.ceil(t.length/e))].map(()=>t.splice(0,e))}function B_({ctx:t,top:e=0,bottom:r=150,size:s=200,dark:i=!1}){let n=t.createLinearGradient(0,0,0,s),a=i?0:70;n.addColorStop(0,`hsla(0,0%,${a+e*30}%)`),n.addColorStop(1,`hsla(0,0%,${a+r*30}%)`),t.fillStyle=n,t.fillRect(0,0,s,s)}function tf(t,e,r){bo(t,14).forEach(s=>{if(s.length===14){let[i,n,a,o,c,u,f,l,h,p,b,m,v,x]=s,_=r/8+a*r*(7/8),y=e.createLinearGradient(i*r+_*l,0,i*r+_*v,r);y.addColorStop(0,`hsla(${o*360},${c*100}%,${u*100}%,${f})`),y.addColorStop(1,`hsla(${h*360},${p*100}%,${b*100}%,${m})`),e.fillStyle=y,e.translate(i*r,n*r),e.rotate(x*Math.PI),e.fillRect(-_/2,-_/2,_,_),e.setTransform(1,0,0,1,0,0)}})}function rf(t,e,r,s){bo(t,7).forEach(i=>{if(i.length===7){let[n,a,o,c,u,f,l]=i;e.beginPath(),e.arc(r/2+n*r/2,a*r,o*s,0,2*Math.PI),e.fillStyle=`hsla(${c*360},${u*100}%,${f*100}%,${l})`,e.closePath(),e.fill()}})}function N_({pub:t,size:e=200,dark:r=!1,embed:s=!0}={}){let{decoded:i,finals:n}=f0(t),a=`
    <linearGradient id="bg" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="hsla(0,0%,${(r?0:70)+n[0]*30}%)"/>
      <stop offset="100%" stop-color="hsla(0,0%,${(r?0:70)+n[1]*30}%)"/>
    </linearGradient>
  `,o=(u,f,l=!1)=>bo(u,7).map(h=>{if(h.length!==7)return"";let[p,b,m,v,x,_,y]=h,k=e/2+p*e/2,A=b*e,M=m*f;return`
        <circle 
          cx="${k}" cy="${A}" r="${M}"
          fill="hsla(${v*360},${x*100}%,${_*100}%,${y})"
          style="${l?"mix-blend-mode:multiply;":""}"
        />
        <circle 
          cx="${e-k}" cy="${A}" r="${M}"
          fill="hsla(${v*360},${x*100}%,${_*100}%,${y})"
          style="${l?"mix-blend-mode:multiply;":""}"
        />
      `}).join(""),c=`
    <svg width="${e}" height="${e}" viewBox="0 0 ${e} ${e}" xmlns="http://www.w3.org/2000/svg">
      <defs>${a}</defs>
      <rect width="${e}" height="${e}" fill="url(#bg)"/>
      ${o(i[0],.42*e)}
      ${o(i[1],.125*e,!0)}
    </svg>
  `;if(s){let u={pub:t};s&&s==!0&&(u.content=s),c=u0(c,u,"svg")}return`data:image/svg+xml;base64,${Buffer.from(c).toString("base64")}`}D_();const z_={install(t){for(const e in ha)t.component(e,ha[e])}},Hv=Object.freeze(Object.defineProperty({__proto__:null,AccountAvatar:xf,AccountBadge:wf,AccountHome:mf,AccountPetname:gf,AccountProfile:yf,AccountReactions:_f,AccountSelect:vf,AuthCreate:Sf,AuthCredentials:Ef,AuthDerive:Df,AuthForm:Af,AuthLogin:kf,AuthPass:Cf,ChatInput:Tf,ChatMessage:Mf,ChatMessages:If,ChatRoom:Of,ChatTopics:Pf,DictAuthors:Lf,DictBy:Ff,DictDefCard:Bf,DictDefList:Nf,DictDefPage:zf,DictLinkButton:Hf,DictLinkList:$f,DictPanel:Rf,DictWordCard:jf,DictWordList:qf,DictWordPage:Uf,EmbedYoutube:Wf,FileCard:Zf,FileHash:Kf,FileInfo:Xf,FileList:Yf,FileShare:Jf,FormLink:Qf,FormPicture:el,FormText:tl,FormTitle:nl,FormYoutube:rl,GiftButton:ol,GiftCard:il,GiftForm:al,GiftList:sl,GiftStatus:fl,GiftWallet:cl,GiftWallets:ul,GuestList:Ql,GunGraph:ll,GunRelay:hl,GunRelayList:dl,GunSettings:bl,GunTools:pl,GunVuePlugin:z_,MateButton:ml,MateLink:_l,MateList:gl,MessageExchange:Pl,MessageList:Fl,MessagesCount:Ol,PostActionBan:Dl,PostActionReact:Tl,PostActionStar:El,PostActionUpdate:Cl,PostCard:vl,PostForm:yl,PostGraph:wl,PostLine:xl,PostLink:kl,PostList:Al,PostPage:Sl,PostReactionButton:Ml,PostReactionTabs:Il,ProjectCard:Ll,ProjectForm:zl,ProjectFunding:Nl,ProjectList:Rl,ProjectPage:Bl,QrLoad:jl,QrShare:Ul,QrShow:ql,RoomActions:Yl,RoomButton:Xl,RoomCard:$l,RoomFeature:Hl,RoomFeatureIcon:Wl,RoomForm:Vl,RoomList:Zl,RoomLogo:Gl,RoomPage:Kl,RoomProfile:Jl,SpaceArrow:rh,SpaceDraw:nh,SpaceGuest:th,SpacePlane:eh,SpaceStatus:ih,TorrentDownload:Gf,TorrentUpload:Vf,UiButton:sh,UiComponents:lh,UiDark:fh,UiLayer:ah,UiLink:oh,UiModal:uh,UiPanel:ch,UserAvatar:hh,UserGraph:dh,UserHome:ph,UserIcon:bh,UserListOverlay:mh,UserPanel:gh,UserProfile:_h,UserProfileField:vh,UserRooms:yh,components:ha},Symbol.toStringTag,{value:"Module"}));export{Uv as $,xf as A,bv as B,J_ as C,$v as D,jv as E,Zr as F,nv as G,ov as H,K_ as I,Cf as J,ql as K,Pt as L,ml as M,Iv as N,Mv as O,Ll as P,jl as Q,hn as R,fr as S,Gf as T,Oe as U,H_ as V,uv as W,U0 as X,V_ as Y,If as Z,Tf as _,br as a,$a as a$,wv as a0,kv as a1,Sa as a2,xv as a3,yv as a4,$f as a5,Sr as a6,Hf as a7,vv as a8,jf as a9,Mc as aA,f3 as aB,_l as aC,oh as aD,Tl as aE,Ih as aF,pv as aG,Tv as aH,Ou as aI,Ev as aJ,Cv as aK,el as aL,Qf as aM,rl as aN,tl as aO,Ul as aP,yl as aQ,Dv as aR,xl as aS,Cl as aT,Al as aU,Ml as aV,nl as aW,kh as aX,Nl as aY,zl as aZ,ol as a_,Bf as aa,_v as ab,Yh as ac,gv as ad,Bv as ae,Qh as af,ah as ag,Zf as ah,rv as ai,Lv as aj,Sv as ak,Wf as al,fl as am,tv as an,W_ as ao,Zp as ap,fv as aq,lv as ar,il as as,Xl as at,al as au,cl as av,cv as aw,dl as ax,hv as ay,ll as az,Ol as b,Wr as b0,Z_ as b1,Pv as b2,rg as b3,Wl as b4,Sd as b5,$l as b6,Lp as b7,Gl as b8,Yl as b9,hh as bA,vh as bB,zv as bC,ig as bD,Hv as bE,Hl as ba,Ql as bb,an as bc,Ov as bd,ev as be,Q_ as bf,$_ as bg,X_ as bh,Y_ as bi,G_ as bj,qv as bk,rh as bl,th as bm,ih as bn,ha as bo,np as bp,Yt as bq,Ef as br,kf as bs,gh as bt,_h as bu,Fl as bv,Yf as bw,yh as bx,ph as by,ch as bz,cr as c,gf as d,yf as e,gl as f,Ir as g,_f as h,De as i,Be as j,dv as k,Il as l,vl as m,wf as n,Vp as o,Mh as p,Nv as q,Rh as r,yp as s,iv as t,sv as u,Af as v,Sf as w,mv as x,av as y,Av as z};
