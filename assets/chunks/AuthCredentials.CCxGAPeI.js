import{d as j,p as D,h as g,c as l,e as r,k as o,o as i,j as t,G as k,r as F,t as b,N as V,w,T as N,n as h,F as q,B as A,aN as I}from"./framework.Cn0LGHOD.js";import{a as J,E as O,G as Q,H as z,D as M,I as Y,J as H}from"./components.D9Mx4r1X.js";import"./theme.cUvRvqO5.js";const K={key:0,class:"flex p-4 items-center bg-dark-100 bg-opacity-20 mt-2 shadow-inset"},W={key:0,class:"i-la-lock"},X={key:1,class:"i-la-unlock"},Z={class:"text-sm"},ee={class:"flex flex-wrap"},te=["href"],se={key:1,class:"flex w-full justify-center mt-4"},ne={class:"p-2 flex flex-col w-full items-start",key:"text"},le={class:"flex gap-2 items-center mx-4"},oe={key:0,class:"px-2"},ie={key:1,class:"px-2"},ae={class:"w-full p-4 text-sm flex-1 rounded-xl break-all select-all",key:"text"},re={class:"p-2 flex flex-col items-center",key:"png"},ue=["src"],de={class:"p-4 flex flex-col gap-2",key:"link"},ce={class:"flex gap-2 items-center mx-4"},pe={key:0,class:"px-2"},ve={key:1,class:"px-2"},me=["onClick"],xe={class:"px-2"},fe=["href"],ye={class:"px-2 font-normal font-mono text-xs"},ke={class:"p-4 flex flex-col gap-2 items-center",key:"qr"},Se=j({__name:"AuthCredentials",emits:["close"],setup(ge,{emit:be}){const a=D("pass"),{user:u}=J();function f(s){a.value!=s?a.value=s:a.value=null}const{pass:d}=O(),{text:Ce,copy:$,copied:L,isSupported:P}=Q(),{share:S,isSupported:T}=z(),c=D(!0),y=g(()=>{var s;return c.value?(s=d==null?void 0:d.safe)==null?void 0:s.enc:JSON.stringify(u.pair())}),v=g(()=>c.value?d.links.pass:d.links.pair),B=g(()=>M({pub:u.pub,embed:y.value})),U=g(()=>_(v.value));function C(s,e,m){const x=s instanceof Blob?s:new Blob([s],{type:m||"text/plain"}),n=URL.createObjectURL(x),p=document.createElement("a");p.href=n,p.download=e,document.body.appendChild(p),p.click(),document.body.removeChild(p)}function E(s){!(s!=null&&s.content)||!(s!=null&&s.extension)||C(s.content,`${u.name||"account"}${s.extension}`,s.mime)}function G(s){C(s,`${u.name||"avatar"}.png`)}function R(s){C(s,`${u.name||"account"}.json`,"application/json")}function _(s,e="Bookmark"){const m=`[InternetShortcut]
URL=`+s,x=`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>URL</key>
  <string>`+s+`</string>
</dict>
</plist>`,n=`[Desktop Entry]
Encoding=UTF-8
Type=Link
Name=`+e+`
URL=`+s;return{Win:{content:m,extension:".url",mime:"application/internet-shortcut"},Mac:{content:x,extension:".webloc",mime:"application/x-apple-plist"},Linux:{content:n,extension:".desktop",mime:"application/x-desktop"}}}return(s,e)=>{var m,x;return o(u).is?(i(),l("div",{class:"flex flex-col items-stretch pb-4 border-1 border-dark-100 border-opacity-10 max-w-120 mx-auto dark-bg-dark-200",key:o(u).is},[e[26]||(e[26]=t("div",{class:"mt-4 mx-6"},"Please make sure to safely store your cryptographic keypair to be able to use it again later",-1)),k(o(Y)),(x=(m=o(d))==null?void 0:m.safe)!=null&&x.enc?(i(),l("div",K,[t("div",{class:"flex flex-col w-34 items-center",style:V({color:c.value?"green":"red"})},[t("button",{class:"m-2 button text-2xl",onClick:e[0]||(e[0]=n=>c.value=!c.value)},[c.value?(i(),l("div",W)):(i(),l("div",X))]),t("div",Z,b(c.value?"Encrypted":"Plain Text"),1),e[12]||(e[12]=t("div",{class:"text-m"},"Key Pair",-1))],4),t("div",ee,[t("button",{class:"m-2 button items-center",onClick:e[1]||(e[1]=n=>f("key"))},e[13]||(e[13]=[t("div",{class:"i-la-envelope-open-text"},null,-1),t("div",{class:"px-2"},"Text",-1)])),t("button",{class:"m-2 button items-center",href:v.value,target:"_blank",onClick:e[2]||(e[2]=n=>f("link"))},e[14]||(e[14]=[t("div",{class:"i-la-link"},null,-1),t("div",{class:"px-2"},"Link",-1)]),8,te),t("button",{class:"m-2 button items-center",onClick:e[3]||(e[3]=n=>f("qr"))},e[15]||(e[15]=[t("div",{class:"i-la-qrcode"},null,-1),t("div",{class:"px-2"},"QR",-1)])),t("button",{class:"m2 button items-center",onClick:e[4]||(e[4]=n=>f("png"))},e[16]||(e[16]=[t("div",{class:"i-la-user-circle"},null,-1),t("div",{class:"px-2"},"PNG",-1)]))])])):r("",!0),a.value?(i(),l("div",se,[k(I,{name:"fade",mode:"out-in"},{default:w(()=>[a.value=="key"?(i(),l("div",ne,[t("div",le,[o(P)?(i(),l("button",{key:0,class:"button items-center",onClick:e[5]||(e[5]=n=>o($)(y.value))},[e[17]||(e[17]=t("div",{class:"i-la-copy"},null,-1)),k(N,{name:"fade",mode:"out-in",appear:""},{default:w(()=>[o(L)?(i(),l("div",oe,"Copied!")):(i(),l("div",ie,"Copy"))]),_:1})])):r("",!0),o(T)?(i(),l("button",{key:1,class:h(["button items-center",{active:a.value=="pass"}]),onClick:e[6]||(e[6]=n=>o(S)({title:o(u).name||"Gun-Vue keypair",text:y.value}))},e[18]||(e[18]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):r("",!0),t("button",{class:"button items-center",onClick:e[7]||(e[7]=n=>{R(y.value),a.value=null})},e[19]||(e[19]=[t("div",{class:"i-la-download"},null,-1),t("div",{class:"px-2"},"Download",-1)]))]),t("div",ae,b(y.value),1)])):r("",!0),a.value=="png"?(i(),l("div",re,[t("img",{class:"cursor-pointer shadow-lg rounded-full hover-lightness-120 hover-shadow-2xl -hover-translate-y-1 transition active-translate-y-1",src:B.value,onClick:e[8]||(e[8]=n=>G(B.value))},null,8,ue),e[20]||(e[20]=t("div",{class:"text-sm op-50 text-center m-4 max-w-50"},"Click the image to download the PNG file with your key embedded. You can use to login later. ",-1))])):r("",!0),a.value=="link"?(i(),l("div",de,[t("div",ce,[o(P)?(i(),l("button",{key:0,class:"button items-center",onClick:e[9]||(e[9]=n=>o($)(v.value))},[e[21]||(e[21]=t("div",{class:"i-la-copy"},null,-1)),k(N,{name:"fade",mode:"out-in",appear:""},{default:w(()=>[o(L)?(i(),l("div",pe,"Copied!")):(i(),l("div",ve,"Copy"))]),_:1})])):r("",!0),o(T)?(i(),l("button",{key:1,class:h(["button items-center",{active:a.value=="pass"}]),onClick:e[10]||(e[10]=n=>o(S)({title:o(u).name||"Gun-Vue Login link",text:v.value}))},e[22]||(e[22]=[t("div",{class:"i-la-share"},null,-1),t("div",{class:"px-1"},"Share",-1)]),2)):r("",!0),(i(!0),l(q,null,A(U.value,(n,p)=>(i(),l("button",{class:"button items-center",key:n==null?void 0:n.content,onClick:we=>E(n)},[e[23]||(e[23]=t("div",{class:"i-la-download"},null,-1)),t("div",xe,b(p),1)],8,me))),128))]),t("a",{class:"m-2 button items-center break-all",href:v.value,target:"_blank",onClick:e[11]||(e[11]=n=>f("links"))},[e[24]||(e[24]=t("div",{class:"i-la-link"},null,-1)),t("div",ye,b(v.value),1)],8,fe)])):r("",!0),a.value=="qr"?(i(),l("div",ke,[k(o(H),{class:"max-w-600px",data:c.value?o(d).links.pass:o(d).links.pair},null,8,["data"]),e[25]||(e[25]=t("div",{class:"text-sm op-50 text-center mx-4 max-w-80"},"Make a screenshot to save the QR code for logging in later.",-1))])):r("",!0)]),_:1})])):r("",!0),F(s.$slots,"default")])):r("",!0)}}});export{Se as default};
