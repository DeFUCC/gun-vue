import"./theme.S15q5Q36.js";import{h as k,q as l,R as y,U as x,V as _,W as v}from"./components.DpAitpk7.js";import{u as C}from"./useChat.B_UcPvO6.js";import{d as S,q as w,aA as B,h as N,c as V,o as d,G as n,j as c,w as z,b as A,e as R,k as e,t as U,N as $,aX as q}from"./framework.DtSfhgxr.js";import{u as D}from"./useBackground.5RmdTJJg.js";const W={class:"backdrop-blur z-100 bg-light-300 bg-op-30 dark-bg-dark-400 dark-bg-op-50 px-4 py-3 flex flex-wrap items-center text-center sticky top-0"},j={class:"flex-1 ml-2 font-bold"},E={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 sticky bottom-0"},X=S({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(m,{emit:G}){const u=m;let i;function f(){i||(i=new Audio(u.clickSound),i.volume=.1),i.play()}const{send:b,currentChat:r,sorted:p}=C();w(()=>u.topic,s=>{r.value=s},{immediate:!0}),B(p,(s,a)=>{if(s.length>a.length){f();const t=s.slice(-1)[0],{isSupported:o,show:h}=q({title:t==null?void 0:t.text,body:`${t==null?void 0:t.timestamp} by ${t==null?void 0:t.author}`,lang:"en",tag:"chat"});o.value&&h()}},{deep:!0});const g=N(()=>D({pub:k.pub,size:1200}));return(s,a)=>{var t;return d(),V("div",{class:"flex flex-col",style:$([{flex:"1 1 auto"},{...g.value}])},[n(e(x),{open:!!((t=e(l))!=null&&t.pub),onClose:a[0]||(a[0]=o=>e(l).pub="")},{default:z(()=>{var o;return[(o=e(l))!=null&&o.pub?(d(),A(e(y),{key:0,pub:e(l).pub},null,8,["pub"])):R("",!0)]}),_:1},8,["open"]),c("div",W,[c("div",j,U(e(r)),1)]),n(e(_),{messages:e(p)},null,8,["messages"]),c("div",E,[n(e(v),{class:"flex-auto",onSubmit:a[1]||(a[1]=o=>e(b)(o))})])],4)}}});export{X as default};
