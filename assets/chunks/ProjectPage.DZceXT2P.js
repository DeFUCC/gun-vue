import{h as N,p as U,q as V,C as z,c as d,o as n,j as a,G as u,b as E,e as x,k as e,t as v,N as L,aD as S,aE as G}from"./framework.BoVd_Pm6.js";import{a as H,aL as q,aW as $,aX as I,aY as O,aZ as W}from"./components.C212Cyus.js";import{u as X}from"./useMd.Dfvdjrmm.js";import{u as Y}from"./useProject.Bl4DoJX5.js";import"./theme.D819OjSK.js";const Z={class:"flex flex-col max-w-65ch"},_=["value"],A={class:"rounded p-2 bg-light-100 bg-opacity-80 dark-bg-dark-300 dark-bg-opacity-60 flex items-center"},J={class:"flex flex-col"},K={class:"flex items-center gap-2"},Q={class:"capitalize font-mono text-xs"},R={class:"px-2 px-1 bg-light-300 dark-bg-dark-300 rounded-lg font-mono text-xs"},ee={class:"px-2 px-1 bg-light-700 dark-bg-dark-700 rounded-lg font-mono text-xs mr-auto"},te={class:"flex flex-col gap-2 px-4 bg-light-200 dark-bg-dark-400 relative"},oe=["innerHTML"],se={class:"text-xs max-w-full overflow-scroll"},ue={__name:"ProjectPage",props:{path:{type:String,default:""}},emits:["gift","user"],setup(r,{emit:ae}){const m=r,{user:w}=H(),T=X(),{project:s,updateField:i,updateCover:B}=Y(m.path),l=N(()=>m.path.includes(w.pub)),g=U(!1),p=U(s.content);V(()=>s.content,c=>{p.value=c});const D=I(i,1e3);return(c,t)=>{var b,f,k,y,h,j,C,F,P;const M=z("account-badge");return n(),d("div",Z,[a("div",{class:"p-2 relative",style:L({background:`url(${e(s).cover}) center`,backgroundColor:(b=e(s))==null?void 0:b.color,paddingTop:(f=e(s))!=null&&f.cover||(k=e(s))!=null&&k.color?"220px":"60px"})},[l.value?(n(),E(e(q),{key:0,class:"absolute top-2",onUpdate:t[0]||(t[0]=o=>e(B)(o))})):x("",!0),l.value?(n(),d("input",{key:1,class:"absolute top-4 right-4",type:"color",value:(y=e(s))==null?void 0:y.color,onInput:t[1]||(t[1]=o=>e(i)("color",o.target.value))},null,40,_)):x("",!0),a("div",A,[a("div",J,[a("div",K,[a("div",Q,v((h=e(s))==null?void 0:h.type),1),a("div",R,v((j=e(s))==null?void 0:j.id),1),a("div",ee,v((C=e(s))==null?void 0:C.status),1)]),u(e($),{class:"text-2xl font-bold",text:(F=e(s))==null?void 0:F.title,editable:l.value,onUpdate:t[2]||(t[2]=o=>e(i)("title",o))},null,8,["text","editable"]),u(e($),{class:"text-md",text:(P=e(s))==null?void 0:P.description,editable:l.value,onUpdate:t[3]||(t[3]=o=>e(i)("description",o))},null,8,["text","editable"])]),t[10]||(t[10]=a("div",{class:"flex-1"},null,-1)),u(M,{pub:r.path.slice(-87),onClick:t[4]||(t[4]=o=>c.$emit("user",r.path.slice(-87)))},null,8,["pub"])])],4),a("div",te,[l.value?(n(),d("div",{key:0,class:"i-la-pen cursor-pointer text-2xl absolute top-2 right-2 z-2",onClick:t[5]||(t[5]=o=>g.value=!g.value)})):x("",!0),!g.value||!l.value?(n(),d("div",{key:1,class:"p-2 text-base prose prose-truegray dark-prose-light dark-bg-dark-400",innerHTML:e(T).render(p.value||"")},null,8,oe)):S((n(),d("textarea",{key:2,class:"dark-bg-dark-400","onUpdate:modelValue":[t[6]||(t[6]=o=>p.value=o),t[7]||(t[7]=o=>e(D)("content",o))]},null,512)),[[G,p.value]]),a("pre",se,v(Object.keys(e(s))),1)]),u(e(O),{path:r.path,enabled:!!e(s).funding,onEnable:t[8]||(t[8]=o=>e(i)("funding","true")),onGift:t[9]||(t[9]=o=>c.$emit("gift",o))},null,8,["path","enabled"]),u(e(W),{source:r.path},null,8,["source"])])}}};export{ue as default};
