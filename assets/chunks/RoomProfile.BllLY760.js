import{h as p,aj as R,c as r,o,j as e,r as B,b as v,k as s,J as b,e as P,t as x,G as L,H as $,O as H}from"./framework.DMS09ad0.js";import{a_ as S,u as V,aV as j,a$ as z,n as M,b0 as N,b2 as A,i as F}from"./components.BfuT3X--.js";import{u as G}from"./useMd.B1HITcl1.js";import{f as O}from"./useRooms.C2XnVXPX.js";import{u as T}from"./useBackground.BGhjr8sS.js";import"./theme.Cz5CPBav.js";const U={class:"flex flex-col items-stretch"},C={class:"flex flex-wrap items-center gap-8"},D={class:"flex flex-col flex-auto",style:{flex:"1 0"}},E={class:"flex gap-2 items-center"},J={class:"font-bold text-2xl"},q={key:0,class:"i-la-star"},I={key:1,class:"i-la-star-solid"},K={class:"text-md"},Q={class:"flex items-center flex-wrap"},W={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},X={class:"relative"},Y={class:"flex items-center"},Z=["innerHTML"],ee={class:"px-4 max-w-55ch"},ce={__name:"RoomProfile",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>S}},emits:["rooms","browse","user"],setup(_,{emit:g}){const n=_,k=g,{user:h}=V(),a=p(()=>n.pub?n.pub:F.pub),{room:l,leaveRoom:se,updateRoomProfile:te,enterRoom:oe}=j(a.value),y=G();R({name:!1,description:!1,text:!1});const w=p(()=>T({pub:a.value,size:1200,attachment:"local"}));return(u,t)=>{var c,d,m;return o(),r("div",U,[e("div",{class:"p-4 bg-cover relative flex flex-col items-center w-full",style:H({...w.value})},[e("div",C,[(o(),v(s(z),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:a.value,key:a.value},null,8,["pub"])),e("div",D,[e("div",E,[e("div",J,x(s(l).profile.name),1),t[3]||(t[3]=e("div",{class:"flex-1"},null,-1)),(c=s(h))!=null&&c.is?(o(),r("button",{key:0,class:"button z-100",onPointerdown:t[0]||(t[0]=i=>s(O)(a.value))},[s(l).isFavourite?(o(),r("div",I)):(o(),r("div",q))],32)):P("",!0)]),e("div",K,x(s(l).profile.description),1),e("div",Q,[t[4]||(t[4]=e("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(o(!0),r(L,null,$(s(l).hosts,(i,f)=>(o(),r("div",{class:"p-2 flex flex-col items-start gap-2",key:f},[b(s(M),{pub:f,selectable:!0},null,8,["pub"])]))),128))]),b(s(N),{pub:a.value,onRoom:t[1]||(t[1]=i=>k("browse","/"))},null,8,["pub"])])])],4),B(u.$slots,"default"),e("div",W,[e("div",X,[e("div",Y,[e("div",{class:"p-4 prose max-w-65ch",innerHTML:s(y).render(((d=s(l).profile)==null?void 0:d.text)||"")},null,8,Z)])]),e("div",ee,[(o(),v(s(A),{state:"offline",onUser:t[2]||(t[2]=i=>u.$emit("user",i)),roomPub:(m=s(l))==null?void 0:m.pub,key:s(l).pub},null,8,["roomPub"]))])])])}}};export{ce as default};
