import{c as o,o as t,j as n,e as v,b as m,F as u,k as s,B as b,t as c,w as B,aF as w,aU as C}from"./framework.DADfZotI.js";import{a as F,aM as j,o as $,ai as S}from"./components.Brg9upeh.js";import{a as G}from"./useGifts._4h7BO6a.js";import"./theme.BiFH1hTN.js";import"./composables.Bf3Mns7C.js";const P={class:"flex flex-col"},D={class:"text-xl my-4 p-2 flex items-center"},E={key:1,class:"text-xs"},U={key:0,class:"p-2 flex flex-col gap-4"},V={class:"p-2 w-full flex items-center gap-2"},_={class:"text-xl font-bold"},A={class:"text-xl"},L={class:"flex flex-wrap gap-2"},M={class:"mr-2"},Q={__name:"ProjectFunding",props:{path:{type:String,default:""},enabled:{type:Boolean,default:!1}},emits:["enable","gift","open"],setup(l,{emit:z}){const h=l,{collections:x}=G(h.path),{user:i}=F();return(f,e)=>(t(),o("div",P,[n("div",D,[e[2]||(e[2]=n("div",{class:"font-bold"},"Project funding",-1)),e[3]||(e[3]=n("div",{class:"flex-1"},null,-1)),l.enabled?(t(),m(s(j),{key:1,gift:{project:l.path,to:l.path.slice(-87)},onSent:e[1]||(e[1]=a=>f.$emit("gift",a))},null,8,["gift"])):(t(),o(u,{key:0},[l.path.includes(s(i).pub)?(t(),o("button",{key:0,class:"button",onClick:e[0]||(e[0]=a=>f.$emit("enable"))},"Enable Funding")):(t(),o("div",E,"Funding not yet enabled by the author"))],64))]),l.enabled?(t(),o("div",U,[(t(!0),o(u,null,b(s(x),(a,p)=>{var y,g,k;return t(),o("div",{class:"flex flex-col gap-2 p-2 bg-dark-50 rounded-xl bg-opacity-10 shadow-xl",key:a},[n("div",V,[n("div",_,c(a.sum),1),n("div",A,c(p),1),e[4]||(e[4]=n("div",{class:"opacity-50"},"by",-1)),n("div",L,[(t(!0),o(u,null,b(a.from,(r,d)=>(t(),m(s($),{key:r,pub:d},{default:B(()=>[n("div",M,c(r)+" "+c(p),1)]),_:2},1032,["pub"]))),128))])]),(k=(g=(y=s(x))==null?void 0:y[p])==null?void 0:g.from)!=null&&k[s(i).pub]||l.path.includes(s(i).pub)?(t(!0),o(u,{key:0},b(a.list,(r,d)=>w((t(),m(s(S),{class:"cursor-pointer",key:d,hash:d,onClick:H=>f.$emit("open",d)},null,8,["hash","onClick"])),[[C,r.from==s(i).pub||r.to==s(i).pub]])),128)):v("",!0)])}),128))])):v("",!0)]))}};export{Q as default};
