import{j as l,a as i,r as p,D as f}from"./components.BGHqJscF.js";import{aj as c,p as v,q as m}from"./framework.BoVd_Pm6.js";function j(s,n=42){const e=c(s),o=c(n),u=v(),a=v(),t=l();return m(e,r=>{u.value=f({pub:r,size:o.value*4})},{immediate:!0}),t.user(e.value).get("avatar").on(r=>{r&&t.get("#avatars").get(r).once(g=>{u.value=g})}),t.user(e.value).get("pulse").on(()=>{a.value=!a.value}),{avatar:u,blink:a}}function w(){const{user:s}=i(),n=l(),e=v(null);s.db.get("avatar").once(a=>{a?n.get("#avatars").get(a).once(t=>{e.value=t}):e.value=null});async function o(a){if(a){const t=await p(a);n.get("#avatars").get(t).put(a),s.db.get("avatar").put(t)}else u()}function u(){s.db.get("avatar").put(null)}return{remove:u,upload:o,avatar:e}}export{w as a,j as u};
