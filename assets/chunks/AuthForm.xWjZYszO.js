import{d as k,p as i,q as g,c as r,o as u,j as l,e as d,ag as w,aF as f,aG as p,G as v,k as N,w as C,T as S}from"./framework.BfubPTv1.js";import{a as V,Q as E,x,S as L,y as T,z as h}from"./components.DCMxoPbC.js";import"./theme.DCJEDozz.js";const q={class:"flex flex-col my-4 flex-1 items-center bg-light-700 dark-bg-dark-50 rounded-3xl p-4 shadow-lg"},A={class:"flex"},B={key:0,class:"flex"},F={class:"hidden"},P={class:"flex flex-wrap"},O=k({__name:"AuthForm",setup(Q){const n=i("pass"),a=i(),o=i(null),{auth:c}=V();function m(t){n.value!=t?n.value=t:n.value=null}g(a,async t=>{if(!t)return;typeof t=="string"&&t.includes("#/auth/")&&(t=x(t)),t&&typeof t=="string"&&t.substring(0,3)=="SEA"&&(o.value="");let e=h(t);e!=null&&e.pub&&(e!=null&&e.priv)?(c(e),a.value=null):console.log("No valid pair")});async function y(t=a.value){typeof t=="string"&&t.includes("#/auth/")&&(t=x(t)),a.value=await L.decrypt(t,o.value)}function b(t){var e;T((e=t.target)==null?void 0:e.files,s=>a.value=s)}return(t,e)=>(u(),r("div",q,[e[9]||(e[9]=l("div",{class:"font-bold text-xl"},"I already have an account",-1)),e[10]||(e[10]=l("div",{class:"text-md"},"Login with a saved key",-1)),l("div",A,[l("button",{class:"button m-2 cursor-pointer flex items-center",onClick:e[0]||(e[0]=s=>m("key"))},e[6]||(e[6]=[l("div",{class:"i-la-key text-xl"},null,-1),l("div",{class:"p-1 ml-1 font-bold"},"Paste",-1)])),e[7]||(e[7]=w('<label class="button m-2 cursor-pointer flex items-center" for="qr-input"><div class="i-la-qrcode text-xl"></div><div class="p-1 ml-1 font-bold">QR</div></label><label class="button m-2 cursor-pointer flex items-center" for="json-input"><div class="i-la-file-code text-xl"></div><div class="p-1 ml-1 font-bold">JSON</div></label>',2))]),o.value!==null?(u(),r("form",B,[f(l("input",{class:"py-1 px-4 m-1 rounded-xl","onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),autofocus:"",autocomplete:"current-password",type:"text",placeholder:"Enter the password"},null,512),[[p,o.value]]),l("button",{class:"button text-2xl",type:"submit",onClick:e[2]||(e[2]=s=>y())},e[8]||(e[8]=[l("div",{class:"i-la-sign-in-alt"},null,-1)]))])):d("",!0),l("div",F,[v(N(E),{onLoaded:e[3]||(e[3]=s=>a.value=s)}),l("input",{id:"json-input",ref:"file",tabindex:"-1",type:"file",accept:"application/json",onChange:e[4]||(e[4]=s=>b(s))},null,544)]),l("div",P,[v(S,{name:"fade"},{default:C(()=>[n.value=="key"?f((u(),r("textarea",{class:"p-2 text-sm flex-1 w-full dark-bg-dark-200",key:"text","onUpdate:modelValue":e[5]||(e[5]=s=>a.value=s),rows:"6",cols:"40",placeholder:"Paste your key pair here"},null,512)),[[p,a.value]]):d("",!0)]),_:1})])]))}});export{O as default};
