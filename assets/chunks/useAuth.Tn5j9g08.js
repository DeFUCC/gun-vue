import{Y as s,Z as c}from"./components.B_nZlxjj.js";import{v as u,m as l,w as a}from"./english.MxR0N9Hb.js";import{u as m}from"./useQR.D2HH2LlQ.js";const i="#/auth/";function h(e=""){let r=encodeURIComponent(e);return window.location.origin+window.location.pathname+i+r}async function y(e){if(!e)return!1;if(typeof e=="string"){if(e.includes(i)&&(e=decodeURIComponent(link.substring(link.indexOf(i)+i.length))),e.substring(0,3)=="SEA")return"";if(u(e.trim(),a)){const r=l(e.trim(),a);e=await c(btoa(String.fromCharCode(...r)))}typeof e=="string"&&(e=JSON.parse(e))}return e!=null&&e.pub&&(e!=null&&e.priv)?e:null}async function b(e,r){if(!e)return!1;const o=e.type.toLowerCase();let n=null;try{if(o==="application/json"||e.name.endsWith(".webkey"))n=await f(e);else if(o==="image/png"||o==="image/svg+xml"){const t=await s(e);t!=null&&t.content&&(n=t.content)}else if(o.startsWith("image/")){const{processFile:t}=m();n=await t(e)}}catch(t){console.error("Failed to extract auth data from file:",t)}return n}async function f(e){if(!e||e.size>2e7){console.error("File is missing or too big");return}return await new Promise((r,o)=>{const n=Object.assign(new FileReader,{onload:()=>r(n.result),onerror:o});n.readAsText(e)})}export{h as g,b as h,y as p};
