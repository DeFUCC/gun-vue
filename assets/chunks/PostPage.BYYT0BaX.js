import{p as N,aS as T,aD as V,aT as E,al as F,aU as H}from"./components.C212Cyus.js";import{u as A}from"./useMd.Dfvdjrmm.js";import{u as G}from"./useZip.MahEHyG7.js";import{u as Y}from"./usePosts.BNRsM6YK.js";import"./theme.D819OjSK.js";import{h as U,c as a,o,j as e,F as q,B as I,b as c,k as s,t as f,e as n,N as J,G as K}from"./framework.BoVd_Pm6.js";import"./useGift.VT4HChbe.js";import"./composables.Qqe1QH3E.js";const O={class:"rounded-lg max-w-65ch flex flex-col items-stretch justify-center w-full overscroll-contain bg-light-200 dark-bg-dark-500"},Q={class:"flex flex-wrap"},R={class:"z-30 flex flex-wrap items-center w-full px-4 py-2 sticky top-0 shadow-xl filter grayscale-70 hover-grayscale-0 transition duration-400ms"},W={class:"ml-1 break-all font-bold"},X={class:"flex-1 flex flex-col items-stretch",style:{flex:"10 1 300px"}},Z={key:0,class:"z-1 max-w-100vw"},ss=["src"],ts={class:"flex flex-wrap items-start w-full justify-start"},es={class:"w-full flex flex-col items-stretch"},ls={class:"p-2"},os=["src"],as={key:1,class:"text-2xl font-bold m-2"},is={key:3,class:"m-2"},ns={class:"flex flex-wrap p-4 bg-dark-50 bg-opacity-25 dark-bg-dark-400 w-full items-center gap-1 text-sm"},rs={key:0,class:"i-la-file-download"},ds={key:1,class:"i-la-redo-alt animate-spin"},us=["innerHTML"],bs={__name:"PostPage",props:{tag:{type:String,default:""},hash:{type:String,default:""}},emits:["close","browse","user"],setup(d){const _=A(),u=d;U(()=>N("light").hex(u.hash));const j=U(()=>N("deep").hex(u.hash)),{post:l,download:z,downloading:D}=G({hash:u.hash}),{posts:cs,backlinks:M}=Y(u.hash);return(r,t)=>{var p,x,k,v,h,y,b,g,w,$,C,P,B,L;return o(),a("div",O,[e("div",Q,[(o(!0),a(q,null,I(s(M),(i,m)=>(o(),c(s(T),{key:m,style:{flex:"1 1 220px"},hash:m,tag:d.tag,authors:i,back:!0,onUser:t[0]||(t[0]=S=>r.$emit("user",S)),onClick:S=>r.$emit("browse",m)},null,8,["hash","tag","authors","onClick"]))),128))]),e("div",R,[e("div",{class:"hover-underline text-md cursor-pointer font-bold flex",onClick:t[1]||(t[1]=i=>r.$emit("close"))},t[6]||(t[6]=[e("div",{class:"p-0"},"#",-1)])),e("div",W,f((p=s(l))==null?void 0:p.title),1),t[9]||(t[9]=e("div",{class:"flex-1"},null,-1)),e("button",{class:"p-2",onClick:t[2]||(t[2]=i=>r.$router.back())},t[7]||(t[7]=[e("div",{class:"i-la-angle-left"},null,-1)])),e("button",{class:"p-2",onClick:t[3]||(t[3]=i=>r.$emit("close"))},t[8]||(t[8]=[e("div",{class:"i-la-times"},null,-1)]))]),e("div",X,[(x=s(l))!=null&&x.cover||(k=s(l))!=null&&k.youtube||(v=s(l))!=null&&v.text?(o(),a("div",Z,[e("img",{class:"sticky top-0",src:s(l).cover},null,8,ss)])):n("",!0),e("div",ts,[e("div",es,[e("div",ls,[s(l).icon?(o(),a("img",{key:0,class:"w-20 h-20 rounded-full m-2",style:J([{flex:"0 1 40px"},{borderColor:j.value}]),src:s(l).icon},null,12,os)):n("",!0),(h=s(l))!=null&&h.title?(o(),a("div",as,f((y=s(l))==null?void 0:y.title),1)):n("",!0),(b=s(l))!=null&&b.link?(o(),c(s(V),{key:2,url:(g=s(l))==null?void 0:g.link},null,8,["url"])):n("",!0),(w=s(l))!=null&&w.statement?(o(),a("div",is,f(($=s(l))==null?void 0:$.statement),1)):n("",!0)]),t[10]||(t[10]=e("div",{class:"flex-auto"},null,-1)),e("div",ns,[K(s(E),{hash:d.hash},null,8,["hash"]),e("button",{class:"button flex items-center",onClick:t[4]||(t[4]=i=>s(z)())},[s(D)?(o(),a("div",ds)):(o(),a("div",rs))])])])]),(C=s(l))!=null&&C.youtube?(o(),c(s(F),{key:1,class:"mb-6 shadow-xl flex-1",video:(P=s(l))==null?void 0:P.youtube},null,8,["video"])):n("",!0),(B=s(l))!=null&&B.text?(o(),a("div",{key:2,class:"text-md markdown-body m-1 px-4 py-4 leading-relaxed",innerHTML:s(_).render((L=s(l))==null?void 0:L.text)},null,8,us)):n("",!0),(o(),c(s(H),{key:d.tag,tag:d.hash,header:!1,onBrowse:t[5]||(t[5]=i=>r.$emit("browse",i))},null,8,["tag"]))])])}}};export{bs as default};
