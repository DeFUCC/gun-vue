import{aU as C,a as U,h as f,aN as _,p as F,aV as L,aJ as N,n as z,aW as S,aX as T,aY as y,az as V}from"./components.CyZTKT8r.js";import{u as H}from"./useMd.BCq-AFNW.js";import{u as M}from"./useBackground.DzlC-EEw.js";import"./theme.CrIBCTfO.js";import{h,ah as P,c as u,o as r,j as o,r as j,b as c,k as e,G as d,t as A,F as w,B as R,N as G,e as D}from"./framework.BfubPTv1.js";const E={class:"flex flex-col items-stretch"},J={class:"max-w-full flex flex-col items-stretche bg-light-100 bg-opacity-20 dark-bg-dark-800 dark-bg-opacity-40 p-4 md-p-12 shadow-xl backdrop-blur-md backdrop-filter rounded-t-xl"},O={class:"flex flex-wrap items-center gap-8"},W={class:"flex flex-col flex-auto",style:{flex:"100"}},X={class:"text-md"},Y={class:"flex items-center flex-wrap"},q={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},I={class:"flex flex-wrap items-center gap-2 p-4"},K={class:"px-4"},Q={class:"relative"},Z={key:0,class:"flex items-center"},ee=["innerHTML"],ue={__name:"RoomPage",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>C}},emits:["rooms","browse","user"],setup(m){const x=m,{user:b}=U(),n=h(()=>x.pub?x.pub:f.pub),{room:a,leaveRoom:te,updateRoomProfile:v,enterRoom:se}=_(n.value),B=H(),i=P({name:!1,description:!1,text:!1});F("deep");const $=h(()=>M({pub:n.value,size:1200,attachment:"local"}));return(p,t)=>{var g,k;return r(),u("div",E,[o("div",{class:"pt-32 px-2 md-px-8 bg-cover relative flex flex-col items-center",style:G({...$.value})},[o("div",J,[o("div",O,[(r(),c(e(L),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:n.value,key:n.value},null,8,["pub"])),o("div",W,[d(e(N),{class:"font-bold text-2xl",text:e(a).profile.name||n.value.substring(0,12),editable:e(a).hosts[e(b).pub]&&n.value==e(f).pub&&!i.name,onUpdate:t[0]||(t[0]=l=>e(v)("name",l))},null,8,["text","editable"]),o("div",X,A(e(a).profile.description),1),o("div",Y,[t[6]||(t[6]=o("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(r(!0),u(w,null,R(e(a).hosts,(l,s)=>(r(),u("div",{class:"p-2 flex flex-col items-start gap-2",key:s},[d(e(z),{pub:s,selectable:!0},null,8,["pub"])]))),128))]),d(e(S),{pub:n.value},null,8,["pub"])])])])],4),j(p.$slots,"default"),o("div",q,[o("div",I,[(r(!0),u(w,null,R(m.titles,(l,s)=>(r(),c(e(T),{key:s,cert:e(a).features[s],type:s,title:l,pub:m.pub||e(f).pub,open:e(a).features[s]||s=="users"&&e(a).features.space||s=="chat"&&e(a).features.chat,onClick:oe=>p.$emit("browse",s)},null,8,["cert","type","title","pub","open","onClick"]))),128))]),o("div",K,[d(e(y),{onUser:t[1]||(t[1]=l=>p.$emit("user",l))}),d(e(y),{state:"offline",onUser:t[2]||(t[2]=l=>p.$emit("user",l))})]),o("div",Q,[i.text===!1?(r(),u("div",Z,[o("div",{class:"p-8 prose max-w-65ch break-all",innerHTML:e(B).render(((g=e(a).profile)==null?void 0:g.text)||"")},null,8,ee),(k=e(a).hosts)!=null&&k[e(b).pub]?(r(),u("button",{key:0,class:"button absolute top-4 right-4 z-200",onClick:t[3]||(t[3]=l=>{var s;return i.text=((s=e(a).profile)==null?void 0:s.text)||""})},t[7]||(t[7]=[o("div",{class:"i-la-pen"},null,-1)]))):D("",!0)])):(r(),c(e(V),{key:1,text:i.text,"onUpdate:text":t[4]||(t[4]=l=>i.text=l),onClose:t[5]||(t[5]=l=>{e(v)("text",i.text),i.text=!1})},null,8,["text"]))])])])}}};export{ue as default};
