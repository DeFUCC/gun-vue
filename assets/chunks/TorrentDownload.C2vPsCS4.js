import{d as z,c as n,o,e as C,k as t,N as L,j as m,t as k,F as P,B as W,b as $,ah as I,V as O}from"./framework.BfubPTv1.js";import{a9 as R}from"./components.DCMxoPbC.js";import{p as D}from"./index.BuUnCgYx.js";import"./theme.DCJEDozz.js";const q={class:"flex flex-col gap-2 max-w-55ch relative"},G={key:1,class:"p-2"},H={key:2,class:"p-2 text-sm flex flex-wrap gap-2"},J={class:"p-1"},K={class:"p-1"},Y=z({__name:"TorrentDownload",props:{id:{type:String,default:""}},setup(E){const N=E;function j(_){const s=I({files:[],task:null,status:{done:!1,progress:0,downloadSpeed:0,downloaded:0}});return O(()=>import("./webtorrent.min.D4AedfBj.js"),[]).then(d=>{const l=d.default,a=new l;s.task=a.add(_,r=>{s.files=r.files}),a.on("download",()=>{const{progress:r,downloaded:p,done:i,downloadSpeed:c}=s.task;s.status={done:i,progress:r,downloaded:p,downloadSpeed:c}})}),s}const e=j(`magnet:?xt=urn:btih:${N.id}&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969&tr=udp%3A%2F%2Ftracker.coppersurfer.tk%3A6969&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337&tr=udp%3A%2F%2Fexplodie.org%3A6969&tr=udp%3A%2F%2Ftracker.empire-js.us%3A1337&tr=wss%3A%2F%2Ftracker.btorrent.xyz&tr=wss%3A%2F%2Ftracker.openwebtorrent.com`);return(_,s)=>{var d,l,a,r,p,i,c,f,g,F,w,A,v,x,y,h,b,B,S,T,V;return o(),n("div",q,[((l=(d=t(e))==null?void 0:d.status)==null?void 0:l.progress)>0&&!((r=(a=t(e))==null?void 0:a.status)!=null&&r.done)?(o(),n("div",{key:0,class:"bg-dark-100 op-20 absolute top-0 bottom-0 left-0",inert:"",style:L({width:`${((i=(p=t(e))==null?void 0:p.status)==null?void 0:i.progress)*100}%`})},null,4)):C("",!0),((f=(c=t(e))==null?void 0:c.status)==null?void 0:f.progress)==0&&!((F=(g=t(e))==null?void 0:g.status)!=null&&F.done)?(o(),n("div",G,s[0]||(s[0]=[m("div",{class:"p-1"},"Waiting for the torrent... ",-1)]))):(A=(w=t(e))==null?void 0:w.status)!=null&&A.done?C("",!0):(o(),n("div",H,[s[1]||(s[1]=m("div",{class:"p-1"},"Torrent: ",-1)),m("div",J,k((x=(v=t(e))==null?void 0:v.status)!=null&&x.done?"done":(h=(y=t(e))==null?void 0:y.status)==null?void 0:h.progress),1),m("div",K,"Total "+k(t(D)((B=(b=t(e))==null?void 0:b.status)==null?void 0:B.downloaded))+" at "+k(t(D)((T=(S=t(e))==null?void 0:S.status)==null?void 0:T.downloadSpeed))+"/s",1)])),(o(!0),n(P,null,W((V=t(e))==null?void 0:V.files,u=>(o(),$(t(R),{key:u==null?void 0:u.name,file:u},null,8,["file"]))),128))])}}});export{Y as default};
