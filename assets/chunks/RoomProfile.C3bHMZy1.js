import{b3 as R,a as B,i as P,a_ as L,p as N,b4 as S,n as $,b5 as z,b7 as F}from"./components.B0l348pj.js";import{u as H}from"./useMd.cIopROCr.js";import{f as M}from"./useRooms.D8iQkTQp.js";import{u as V}from"./useBackground.BpzBdTm7.js";import"./theme.B5p3DQ49.js";import{h as p,ak as j,c as r,o,j as e,r as A,b as v,k as s,G as b,e as C,t as x,F as G,B as T,N as U}from"./framework.ap9ZVjPY.js";const D={class:"flex flex-col items-stretch"},E={class:"flex flex-wrap items-center gap-8"},O={class:"flex flex-col flex-auto",style:{flex:"1 0"}},q={class:"flex gap-2 items-center"},I={class:"font-bold text-2xl"},J={key:0,class:"i-la-star"},K={key:1,class:"i-la-star-solid"},Q={class:"text-md"},W={class:"flex items-center flex-wrap"},X={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},Y={class:"relative"},Z={class:"flex items-center"},ee=["innerHTML"],se={class:"px-4 max-w-55ch"},de={__name:"RoomProfile",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>R}},emits:["rooms","browse","user"],setup(_,{emit:g}){const n=_,k=g,{user:h}=B(),a=p(()=>n.pub?n.pub:P.pub),{room:l,leaveRoom:te,updateRoomProfile:oe,enterRoom:le}=L(a.value),y=H();j({name:!1,description:!1,text:!1}),N("deep");const w=p(()=>V({pub:a.value,size:1200,attachment:"local"}));return(u,t)=>{var c,d,m;return o(),r("div",D,[e("div",{class:"p-4 bg-cover relative flex flex-col items-center w-full",style:U({...w.value})},[e("div",E,[(o(),v(s(S),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:a.value,key:a.value},null,8,["pub"])),e("div",O,[e("div",q,[e("div",I,x(s(l).profile.name),1),t[3]||(t[3]=e("div",{class:"flex-1"},null,-1)),(c=s(h))!=null&&c.is?(o(),r("button",{key:0,class:"button z-100",onPointerdown:t[0]||(t[0]=i=>s(M)(a.value))},[s(l).isFavourite?(o(),r("div",K)):(o(),r("div",J))],32)):C("",!0)]),e("div",Q,x(s(l).profile.description),1),e("div",W,[t[4]||(t[4]=e("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(o(!0),r(G,null,T(s(l).hosts,(i,f)=>(o(),r("div",{class:"p-2 flex flex-col items-start gap-2",key:f},[b(s($),{pub:f,selectable:!0},null,8,["pub"])]))),128))]),b(s(z),{pub:a.value,onRoom:t[1]||(t[1]=i=>k("browse","/"))},null,8,["pub"])])])],4),A(u.$slots,"default"),e("div",X,[e("div",Y,[e("div",Z,[e("div",{class:"p-4 prose max-w-65ch",innerHTML:s(y).render(((d=s(l).profile)==null?void 0:d.text)||"")},null,8,ee)])]),e("div",se,[(o(),v(s(F),{state:"offline",onUser:t[2]||(t[2]=i=>u.$emit("user",i)),roomPub:(m=s(l))==null?void 0:m.pub,key:s(l).pub},null,8,["roomPub"]))])])])}}};export{de as default};
