import{p as g,v as w,h as x,c as H,o as y,j as r,a0 as i,n as $}from"./framework.ap9ZVjPY.js";import{ai as b,an as o}from"./components.ClaRPLQ8.js";import"./theme.F0zT3-QT.js";const B={class:"flex gap-2"},F={__name:"FileShare",emits:["uploaded","url","infoHash"],setup(D,{emit:d}){const{upload:v,init:h}=b(),t=g(!1),s=d;w(h);async function u(n){var l,f,p;const e=((l=n.target)==null?void 0:l.files)||((f=n==null?void 0:n.dataTransfer)==null?void 0:f.files);if(!(e!=null&&e.length))return;const a=await v(e);if(a.length){o.value=a[0],s("uploaded",a[0]);let c=new URL((p=window==null?void 0:window.location)==null?void 0:p.href);c.hash="",s("infoHash",o.value.info.infoHash),s("url",m.value)}}const m=x(()=>{var e,a,l;if(!((a=(e=o.value)==null?void 0:e.info)!=null&&a.infoHash))return"";let n=new URL((l=window==null?void 0:window.location)==null?void 0:l.href);return n.hash="",`${n.href}#/files/${o.value.info.infoHash}`});return(n,e)=>(y(),H("div",B,[r("label",{class:$(["button",{"bg-light-800":t.value}]),onDragover:e[0]||(e[0]=i(a=>t.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=i(a=>t.value=!1,["prevent"])),onDrop:e[2]||(e[2]=i(a=>{u(a),t.value=!1},["prevent"]))},[e[3]||(e[3]=r("div",{class:"i-la-paperclip text-xl"},null,-1)),r("input",{type:"file",accept:"*",multiple:"",onChange:u,style:{display:"none"}},null,32)],34)]))}};export{F as default};
