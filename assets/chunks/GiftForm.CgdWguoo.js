var K=Object.defineProperty;var Y=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t,n)=>Y(e,typeof t!="symbol"?t+"":t,n);import{d as X,p as M,h as B,q as H,aV as Z,aE as q,c as g,o as d,al as ee,ak as J,C as te,j as f,b as F,e as $,k as l,w as Q,t as O,F as j,B as L,G as I,K as ie,aU as se,aF as ne,a as re,N as le}from"./framework.NFQ89pQN.js";import{u as ae,h as ue,n as _,an as oe,P as pe,ao as ce}from"./components.Bh0JkzMg.js";import{u as me}from"./useGuests.DTSbPI25.js";import{a as fe}from"./useGift.iPkycH93.js";import{u as de}from"./useProject.nyEqabuv.js";import{u as he}from"./useProjects.C1cSxDnW.js";import"./theme.B2AGLJY6.js";import{c as ve}from"./currencies.G9pkebxG.js";import"./useAccount.BKRvFf2i.js";import"./composables.5HfwXz2v.js";/**
 * Vue Number Format 3.34.1
 * (c) 2021-2025 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var G={prefix:"",suffix:"",separator:",",decimal:".",inputmode:"numeric",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function ge(e){return t=0,n=e,a=20,Math.max(t,Math.min(n,a));var t,n,a}class U{constructor(t){v(this,"options");v(this,"input");v(this,"number");v(this,"isClean");v(this,"isCustomDecimal");v(this,"noPreSuffix");v(this,"hasPreOrSuffix");v(this,"prefix");v(this,"preSufRegExp");v(this,"prefixRegExp");v(this,"suffixRegExp");v(this,"numberRegExp");v(this,"cleanRegExp");v(this,"negativeRegExp");this.options=Object.assign(A(G),t);const{prefix:n,suffix:a,decimal:p,reverseFill:s}=this.options;this.input="",this.number="",this.isClean=!s;const u=n,i=a,c=u.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),o=i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");c&&(this.prefixRegExp=new RegExp(`^${c}`)),o&&(this.suffixRegExp=new RegExp(`${o}$`)),this.prefix=n,this.numberRegExp=new RegExp(`[^0-9\\${p||"."}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=p!==".",this.noPreSuffix=!u&&!i,this.hasPreOrSuffix=!this.noPreSuffix}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(t=!1){return this.isClean=t,this}sign(){if(this.input===null||this.input===void 0)return"";const t=this.input.toString().indexOf(R)>=0;return this.isClean?t&&this.realNumber()>0?R:"":t?R:""}toFixed(){const t=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/t||0).toFixed(ge(this.options.precision))}toNumber(t){return Number(t)}numberOnly(t){var a;let n=(a=this.input)==null?void 0:a.toString();return this.prefixRegExp&&(n=n.replace(this.prefixRegExp,"")),this.suffixRegExp&&(n=n.replace(this.suffixRegExp,"")),n.replace(t||this.numberRegExp,"")}inputWithPreOrSuffix(){return this.input&&this.prefixRegExp?this.prefixRegExp.test(this.input.toString()):!this.input||!this.suffixRegExp||this.suffixRegExp.test(this.input.toString())}isNegative(){return this.sign()===R}isNumber(t){return!isNaN(this.toNumber(t||this.input))}numbers(){var p;const{reverseFill:t,decimal:n,separator:a}=this.options;if(t)this.number=this.toFixed().replace(".",n);else{const s=(p=this.input)==null?void 0:p.toString().replace(this.prefixRegExp??"","").replace(this.suffixRegExp??"","").replace(new RegExp(R,"g"),""),u=this.input.toString().indexOf(n)>=0&&this.isCustomDecimal;let i=s;a&&(i=i.replace(new RegExp(`\\${a}`,"g"),"")),i=i.replace(n,"."),typeof this.input=="number"||this.isNumber()&&!u&&!this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(s,".").join(n):this.isNumber(i)&&!u&&this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(i,".").join(n):this.number=this.parts(this.numberOnly()).join(n)}return this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(t,n){const{precision:a,minimumFractionDigits:p,decimal:s}=this.options;let u=t.toString().split(n||s);if(u.length>1&&(u[0]=this.toNumber(u[0])||0,u[1]=u.slice(1,u.length).join(""),u=u.slice(0,2)),this.isClean){const i=this.toNumber(u.join(".")).toFixed(a),c=this.toNumber(i),o=c.toFixed(p);u=p>=0&&c.toString().length<o.length?o.toString().split("."):c.toString().split(".")}return u.slice(0,2)}addSeparator(){const{decimal:t,separator:n}=this.options,a=this.numbers().split(t);return a[0]=a[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${n}`),a.join(t)}format(t){this.input=t;const{reverseFill:n,nullValue:a,prefix:p,suffix:s}=this.options;return this.isNull()&&!n?a:this.sign()+p+this.addSeparator()+s}unformat(t){this.input=t;const{reverseFill:n,nullValue:a}=this.options,p=this.realNumber(),s=this.unformatNumber();return this.isNull()||n&&p===0?a:this.sign()+s}}const R="-";function A(e){return JSON.parse(JSON.stringify(e))}function T(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function P(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function z(e,t){const n=()=>{e.setSelectionRange(t,t)};n(),setTimeout(n,1)}function V(e,t,{emit:n=!0,force:a=!1,clean:p=!1}={}){var x;const{options:s,oldValue:u}=e,{reverseFill:i,max:c,min:o}=s,h=((x=t==null?void 0:t.props)==null?void 0:x.value)||e.value;if(a||u!==h){const y=new U(s).clean(p&&!i);let k=y.format(h),N=y.clean(!i).unformat(h);p&&(Number(c)===c&&Number(N)>c?(k=y.format(c),N=c.toString()):Number(o)===o&&Number(N)<o&&(k=y.format(o),N=o.toString())),e.oldValue=k,e.unmasked=N,e.value!==k&&(e.value=k)}return n&&e.dispatchEvent(T("input"))}var xe={beforeMount:(e,{value:t,modifiers:n},a)=>{var o;e=P(e);const p=Object.assign(A(G),t,n),{reverseFill:s,precision:u,decimal:i,inputmode:c}=p;e.options=p,e.setAttribute("inputmode",c),s&&e.value?(e.value=parseFloat(new U({...p,reverseFill:!1}).unformat(e.value)).toFixed(u),(o=a==null?void 0:a.props)!=null&&o.value&&(a.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",i)),V(e,a,{force:p.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=P(e)).parentElement||e,n=s=>{s.target===e&&function(u){const{target:i,detail:c}=u;if(c!=null&&c.facade)return!1;u.stopPropagation();let o=i.value.length;const{oldValue:h,options:x}=i;i.selectionEnd&&(o=i.value.length-i.selectionEnd),V(i,null,{clean:!x.precision,emit:!1}),x.suffix&&(o=Math.max(o,x.suffix.length)),o=i.value.length-o,x.prefix&&(o=Math.max(o,x.prefix.length)),z(i,o),h!==i.value&&i.dispatchEvent(T("input"))}(s)},a=s=>{s.target===e&&function(u){const{target:i}=u,{oldValue:c}=i;V(i,null,{force:!0,clean:!0,emit:!1}),c!==i.value&&i.dispatchEvent(T("input"))}(s)},p=s=>{s.target===e&&function(u,i){const{options:c}=i,{prefix:o,suffix:h,decimal:x,min:y,separator:k}=c,{key:N}=u,D=new RegExp(`${o}|${h}`,"g"),b=i.value.replace(D,""),r=y===void 0||Number(y)<0||Number(y)!==y;if(N===x)b.includes(x)?u.preventDefault():b||(i.value="0",i.dispatchEvent(new Event("input")));else if(N!==R||r){if(N==="Backspace"){const w=i.selectionEnd||0,m=i.value.slice(w-1,w),C=i.value.slice(w-2,w);let S=i.value.length-w;[o,R,k].includes(m)&&(u.preventDefault(),i.value=m===k?i.value.replace(C,""):i.value.replace(new RegExp(`[${o}${R}]`,"g"),""),S=Math.max(S,h.length),S=i.value.length-S,S=Math.max(S,o.length),z(i,S),i.dispatchEvent(new Event("input")))}}else u.preventDefault()}(s,e)};t.addEventListener("input",n,!0),t.addEventListener("blur",a,!0),t.addEventListener("keydown",p,!0),e.cleanup=()=>{t.removeEventListener("input",n,!0),t.removeEventListener("blur",a,!0),t.removeEventListener("keydown",p,!0)}},updated:(e,{value:t,oldValue:n,modifiers:a},p)=>{if(e=P(e),t!==n){const s=e.options;e.options=Object.assign(s,t,a),V(e,p,{force:!0,clean:!1,emit:!1})}else V(e,p,{emit:!1})},unmounted:e=>{var t;(t=P(e))==null||t.cleanup()}};const E=A(G);var W=X({name:"VueNumber",directives:{number:xe},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:E.nullValue},masked:Boolean,readonly:Boolean,disabled:Boolean,reverseFill:{type:Boolean,default:E.reverseFill},prefill:{type:Boolean,default:E.prefill},precision:{type:Number,default:()=>E.precision},minimumFractionDigits:{type:Number,default:()=>E.minimumFractionDigits},decimal:{type:String,default:()=>E.decimal},min:{type:Number,default:()=>E.min},max:{type:Number,default:()=>E.max},separator:{type:String,default:()=>E.separator},prefix:{type:String,default:()=>E.prefix},suffix:{type:String,default:()=>E.suffix},inputmode:{type:String,default:()=>E.inputmode}},emits:["update:model-value","input:model-value"],setup(e,{emit:t}){const n=M(e.modelValue),a=M(!1),p=M(""),s=B(()=>({...e})),u=new U(s.value),i=B(()=>e.masked?u.format(n.value):p.value),c=()=>{t("update:model-value",i.value)};return H(()=>e.modelValue,o=>{i.value!==o&&(n.value=u.format(o))}),{config:s,maskedValue:n,unmaskedValue:p,input:o=>{const{target:h}=o;n.value=h.value,p.value=h.unmasked,a.value=!0,t("input:model-value",i.value)},blur:()=>{a.value&&i.value!==e.modelValue&&c()},change:c}}});const be=["value","readonly","disabled"];W.render=function(e,t,n,a,p,s){const u=Z("number");return q((d(),g("input",{type:"text",autocomplete:"off",value:e.maskedValue,readonly:e.readonly,disabled:e.disabled,class:"v-number vue-number-format",onChange:t[0]||(t[0]=(...i)=>e.change&&e.change(...i)),onInput:t[1]||(t[1]=(...i)=>e.input&&e.input(...i)),onBlur:t[2]||(t[2]=(...i)=>e.blur&&e.blur(...i))},null,40,be)),[[u,e.config]])},W.__file="src/component.vue";const Ee={class:"flex flex-col max-w-140"},ye={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},ke={class:"flex-1"},Ne={key:1,class:"flex flex-col"},we={class:"font-bold"},Se={class:"flex flex-wrap gap-3"},Re=["value"],Fe={class:"p-2 text-right"},Ce={key:0,class:"w-full"},Oe={key:1,class:"flex flex-wrap gap-1"},je=["onClick"],Ve={class:"font-bold"},$e={key:2,class:"flex"},Pe={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},Be={class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition"},Qe={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(e,{emit:t}){const n={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},a=e,{user:p}=ae(),{gift:s,cleanGift:u,propose:i,hash:c,valid:o}=fe(a.gift),{guests:h,count:x}=me(),{project:y}=de(ee(s,"project")),{projects:k}=he();H(()=>s.wallet,b=>{b&&(s.ql=b.currency)});const N=B(()=>{const b=ue(),r=J({});return Object.keys(h).forEach(w=>{b.user(w).get("wallets").on((m,C)=>{r[w]=h[w]})}),r}),D=B(()=>{const b=J({});return Object.keys(k).forEach(r=>{r.includes(s.to)&&(b[r]=k[r])}),b});return(b,r)=>{const w=te("gift-wallets");return d(),g("div",Ee,[f("div",ye,[r[15]||(r[15]=f("div",{class:"p-2 text-right"},"FROM",-1)),f("div",ke,[l(p).pub?(d(),F(l(_),{key:0,pub:l(p).pub},null,8,["pub"])):(d(),F(l(oe),{key:1}))]),r[16]||(r[16]=f("div",{class:"p-2 text-right"},"TO ",-1)),l(s).to?(d(),F(l(_),{key:0,pub:l(s).to},{default:Q(()=>[r[8]||(r[8]=f("div",{class:"flex-1"},null,-1)),f("div",{class:"i-la-times mr-2",onClick:r[0]||(r[0]=m=>{l(s).to="",l(s).wallet=null})})]),_:1},8,["pub"])):(d(),g("div",Ne,[f("div",we,"USER SELECT OF "+O(Object.keys(N.value).length),1),f("div",Se,[(d(!0),g(j,null,L(l(h),m=>(d(),F(l(_),{key:m,pub:m.pub,onClick:C=>l(s).to=m.pub},null,8,["pub","onClick"]))),128))])])),l(s).to?(d(),g(j,{key:2},[r[14]||(r[14]=f("div",{class:"p-2 text-right"},"WALLET",-1)),(d(),F(w,{key:l(s).to,pub:l(s).to,"active-wallet":l(s).wallet,onWallet:r[1]||(r[1]=m=>l(s).wallet=m),onClear:r[2]||(r[2]=m=>l(s).wallet=null)},null,8,["pub","active-wallet"])),l(s).wallet?(d(),g(j,{key:0},[r[10]||(r[10]=f("div",{class:"p-2 text-right"},"Quantity",-1)),I(l(W),ie({modelValue:l(s).qn,"onUpdate:modelValue":r[3]||(r[3]=m=>l(s).qn=m)},n,{placeholder:"Quantity"}),null,16,["modelValue"]),r[11]||(r[11]=f("div",{class:"p-2 text-right"},"Quality",-1)),q(f("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":r[4]||(r[4]=m=>l(s).ql=m),placeholder:"Your account currency"},[(d(!0),g(j,null,L(l(ve),m=>(d(),g("option",{key:m,value:m},O(m),9,Re))),128))],512),[[se,l(s).ql]]),r[12]||(r[12]=f("div",{class:"p-2 text-right self-start"},"Wish ",-1)),q(f("textarea",{class:"p-2","onUpdate:modelValue":r[5]||(r[5]=m=>l(s).wish=m),placeholder:"Wish"},null,512),[[ne,l(s).wish]]),f("div",Fe,[r[9]||(r[9]=re("PROJECT ")),l(s).project?$("",!0):(d(),g("div",Ce,"SELECT"))]),l(s).project?(d(),F(l(pe),{key:0,project:l(y),path:l(s).project},{default:Q(()=>[f("div",{class:"i-la-times",onClick:r[6]||(r[6]=m=>l(s).project=null)})]),_:1},8,["project","path"])):(d(),g("div",Oe,[(d(!0),g(j,null,L(D.value,(m,C)=>(d(),g("div",{class:"p-2 rounded-xl cursor-pointer",key:C,style:le({backgroundColor:m.color}),onClick:S=>l(s).project=m.path},[f("div",Ve,O(m.title),1)],12,je))),128))])),r[13]||(r[13]=f("div",{class:"p-2 text-right"},"ROOM",-1)),I(l(ce)),l(o)?(d(),g("div",$e,[f("button",{class:"button w-full justify-center",onClick:r[7]||(r[7]=m=>{l(i)(),b.$emit("sent",l(c))})},"Propose")])):$("",!0),f("pre",Pe,O(l(u)),1),f("div",Be,O(l(c)),1)],64)):$("",!0)],64)):$("",!0)])])}}};export{Qe as default};
