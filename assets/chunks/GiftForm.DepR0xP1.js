var Y=Object.defineProperty;var X=(e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var h=(e,t,n)=>X(e,typeof t!="symbol"?t+"":t,n);import{d as Z,p as M,h as D,q as K,aS as ee,aD as T,c as g,o as d,aj as te,ai as J,C as ie,j as f,b as C,e as $,k as l,w as Q,t as j,F,B as L,G as I,K as se,aR as ne,aE as re,a as le,N as z}from"./framework.BoVd_Pm6.js";import{a as ae,p as oe,j as ue,n as q,v as pe,P as ce,at as me}from"./components.B3ZDxgh_.js";import{u as fe}from"./useGuests.DhYLe88y.js";import{a as de}from"./useGift.C4jJrmA7.js";import{u as ve}from"./useProject.B6uT3i6E.js";import{u as he}from"./useProjects.DNsSbKLG.js";import"./theme.D6aLXOYj.js";import{c as ge}from"./currencies.G9pkebxG.js";import"./composables.DhCny5Of.js";/**
 * Vue Number Format 3.34.1
 * (c) 2021-2025 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var G={prefix:"",suffix:"",separator:",",decimal:".",inputmode:"numeric",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function xe(e){return t=0,n=e,a=20,Math.max(t,Math.min(n,a));var t,n,a}class U{constructor(t){h(this,"options");h(this,"input");h(this,"number");h(this,"isClean");h(this,"isCustomDecimal");h(this,"noPreSuffix");h(this,"hasPreOrSuffix");h(this,"prefix");h(this,"preSufRegExp");h(this,"prefixRegExp");h(this,"suffixRegExp");h(this,"numberRegExp");h(this,"cleanRegExp");h(this,"negativeRegExp");this.options=Object.assign(A(G),t);const{prefix:n,suffix:a,decimal:p,reverseFill:s}=this.options;this.input="",this.number="",this.isClean=!s;const o=n,i=a,c=o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");c&&(this.prefixRegExp=new RegExp(`^${c}`)),u&&(this.suffixRegExp=new RegExp(`${u}$`)),this.prefix=n,this.numberRegExp=new RegExp(`[^0-9\\${p||"."}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=p!==".",this.noPreSuffix=!o&&!i,this.hasPreOrSuffix=!this.noPreSuffix}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(t=!1){return this.isClean=t,this}sign(){if(this.input===null||this.input===void 0)return"";const t=this.input.toString().indexOf(R)>=0;return this.isClean?t&&this.realNumber()>0?R:"":t?R:""}toFixed(){const t=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/t||0).toFixed(xe(this.options.precision))}toNumber(t){return Number(t)}numberOnly(t){var a;let n=(a=this.input)==null?void 0:a.toString();return this.prefixRegExp&&(n=n.replace(this.prefixRegExp,"")),this.suffixRegExp&&(n=n.replace(this.suffixRegExp,"")),n.replace(t||this.numberRegExp,"")}inputWithPreOrSuffix(){return this.input&&this.prefixRegExp?this.prefixRegExp.test(this.input.toString()):!this.input||!this.suffixRegExp||this.suffixRegExp.test(this.input.toString())}isNegative(){return this.sign()===R}isNumber(t){return!isNaN(this.toNumber(t||this.input))}numbers(){var p;const{reverseFill:t,decimal:n,separator:a}=this.options;if(t)this.number=this.toFixed().replace(".",n);else{const s=(p=this.input)==null?void 0:p.toString().replace(this.prefixRegExp??"","").replace(this.suffixRegExp??"","").replace(new RegExp(R,"g"),""),o=this.input.toString().indexOf(n)>=0&&this.isCustomDecimal;let i=s;a&&(i=i.replace(new RegExp(`\\${a}`,"g"),"")),i=i.replace(n,"."),typeof this.input=="number"||this.isNumber()&&!o&&!this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(s,".").join(n):this.isNumber(i)&&!o&&this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(i,".").join(n):this.number=this.parts(this.numberOnly()).join(n)}return this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(t,n){const{precision:a,minimumFractionDigits:p,decimal:s}=this.options;let o=t.toString().split(n||s);if(o.length>1&&(o[0]=this.toNumber(o[0])||0,o[1]=o.slice(1,o.length).join(""),o=o.slice(0,2)),this.isClean){const i=this.toNumber(o.join(".")).toFixed(a),c=this.toNumber(i),u=c.toFixed(p);o=p>=0&&c.toString().length<u.length?u.toString().split("."):c.toString().split(".")}return o.slice(0,2)}addSeparator(){const{decimal:t,separator:n}=this.options,a=this.numbers().split(t);return a[0]=a[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${n}`),a.join(t)}format(t){this.input=t;const{reverseFill:n,nullValue:a,prefix:p,suffix:s}=this.options;return this.isNull()&&!n?a:this.sign()+p+this.addSeparator()+s}unformat(t){this.input=t;const{reverseFill:n,nullValue:a}=this.options,p=this.realNumber(),s=this.unformatNumber();return this.isNull()||n&&p===0?a:this.sign()+s}}const R="-";function A(e){return JSON.parse(JSON.stringify(e))}function W(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function P(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function H(e,t){const n=()=>{e.setSelectionRange(t,t)};n(),setTimeout(n,1)}function O(e,t,{emit:n=!0,force:a=!1,clean:p=!1}={}){var x;const{options:s,oldValue:o}=e,{reverseFill:i,max:c,min:u}=s,v=((x=t==null?void 0:t.props)==null?void 0:x.value)||e.value;if(a||o!==v){const E=new U(s).clean(p&&!i);let y=E.format(v),k=E.clean(!i).unformat(v);p&&(Number(c)===c&&Number(k)>c?(y=E.format(c),k=c.toString()):Number(u)===u&&Number(k)<u&&(y=E.format(u),k=u.toString())),e.oldValue=y,e.unmasked=k,e.value!==y&&(e.value=y)}return n&&e.dispatchEvent(W("input"))}var be={beforeMount:(e,{value:t,modifiers:n},a)=>{var u;e=P(e);const p=Object.assign(A(G),t,n),{reverseFill:s,precision:o,decimal:i,inputmode:c}=p;e.options=p,e.setAttribute("inputmode",c),s&&e.value?(e.value=parseFloat(new U({...p,reverseFill:!1}).unformat(e.value)).toFixed(o),(u=a==null?void 0:a.props)!=null&&u.value&&(a.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",i)),O(e,a,{force:p.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=P(e)).parentElement||e,n=s=>{s.target===e&&function(o){const{target:i,detail:c}=o;if(c!=null&&c.facade)return!1;o.stopPropagation();let u=i.value.length;const{oldValue:v,options:x}=i;i.selectionEnd&&(u=i.value.length-i.selectionEnd),O(i,null,{clean:!x.precision,emit:!1}),x.suffix&&(u=Math.max(u,x.suffix.length)),u=i.value.length-u,x.prefix&&(u=Math.max(u,x.prefix.length)),H(i,u),v!==i.value&&i.dispatchEvent(W("input"))}(s)},a=s=>{s.target===e&&function(o){const{target:i}=o,{oldValue:c}=i;O(i,null,{force:!0,clean:!0,emit:!1}),c!==i.value&&i.dispatchEvent(W("input"))}(s)},p=s=>{s.target===e&&function(o,i){const{options:c}=i,{prefix:u,suffix:v,decimal:x,min:E,separator:y}=c,{key:k}=o,B=new RegExp(`${u}|${v}`,"g"),V=i.value.replace(B,""),N=E===void 0||Number(E)<0||Number(E)!==E;if(k===x)V.includes(x)?o.preventDefault():V||(i.value="0",i.dispatchEvent(new Event("input")));else if(k!==R||N){if(k==="Backspace"){const r=i.selectionEnd||0,w=i.value.slice(r-1,r),m=i.value.slice(r-2,r);let S=i.value.length-r;[u,R,y].includes(w)&&(o.preventDefault(),i.value=w===y?i.value.replace(m,""):i.value.replace(new RegExp(`[${u}${R}]`,"g"),""),S=Math.max(S,v.length),S=i.value.length-S,S=Math.max(S,u.length),H(i,S),i.dispatchEvent(new Event("input")))}}else o.preventDefault()}(s,e)};t.addEventListener("input",n,!0),t.addEventListener("blur",a,!0),t.addEventListener("keydown",p,!0),e.cleanup=()=>{t.removeEventListener("input",n,!0),t.removeEventListener("blur",a,!0),t.removeEventListener("keydown",p,!0)}},updated:(e,{value:t,oldValue:n,modifiers:a},p)=>{if(e=P(e),t!==n){const s=e.options;e.options=Object.assign(s,t,a),O(e,p,{force:!0,clean:!1,emit:!1})}else O(e,p,{emit:!1})},unmounted:e=>{var t;(t=P(e))==null||t.cleanup()}};const b=A(G);var _=Z({name:"VueNumber",directives:{number:be},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:b.nullValue},masked:Boolean,readonly:Boolean,disabled:Boolean,reverseFill:{type:Boolean,default:b.reverseFill},prefill:{type:Boolean,default:b.prefill},precision:{type:Number,default:()=>b.precision},minimumFractionDigits:{type:Number,default:()=>b.minimumFractionDigits},decimal:{type:String,default:()=>b.decimal},min:{type:Number,default:()=>b.min},max:{type:Number,default:()=>b.max},separator:{type:String,default:()=>b.separator},prefix:{type:String,default:()=>b.prefix},suffix:{type:String,default:()=>b.suffix},inputmode:{type:String,default:()=>b.inputmode}},emits:["update:model-value","input:model-value"],setup(e,{emit:t}){const n=M(e.modelValue),a=M(!1),p=M(""),s=D(()=>({...e})),o=new U(s.value),i=D(()=>e.masked?o.format(n.value):p.value),c=()=>{t("update:model-value",i.value)};return K(()=>e.modelValue,u=>{i.value!=u&&(n.value=o.format(u))}),{config:s,maskedValue:n,unmaskedValue:p,input:u=>{const{target:v}=u;n.value=v.value,p.value=v.unmasked,a.value=!0,t("input:model-value",i.value)},blur:()=>{a.value&&i.value!==e.modelValue&&c()},change:c}}});const Ee=["value","readonly","disabled"];_.render=function(e,t,n,a,p,s){const o=ee("number");return T((d(),g("input",{type:"text",autocomplete:"off",value:e.maskedValue,readonly:e.readonly,disabled:e.disabled,class:"v-number vue-number-format",onChange:t[0]||(t[0]=(...i)=>e.change&&e.change(...i)),onInput:t[1]||(t[1]=(...i)=>e.input&&e.input(...i)),onBlur:t[2]||(t[2]=(...i)=>e.blur&&e.blur(...i))},null,40,Ee)),[[o,e.config]])},_.__file="src/component.vue";const ye={class:"flex flex-col max-w-140"},ke={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},Ne={class:"flex-1"},Se={key:1,class:"flex flex-col"},we={class:"font-bold"},Re={class:"flex flex-wrap gap-3"},Ce=["value"],je={class:"p-2 text-right"},Fe={key:0,class:"w-full"},Oe={key:1,class:"flex flex-wrap gap-1"},Ve=["onClick"],$e={class:"font-bold"},Pe={key:2,class:"flex"},De={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},Qe={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(e,{emit:t}){const n={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},a=e,{user:p}=ae(),{gift:s,cleanGift:o,propose:i,hash:c,valid:u}=de(a.gift),{guests:v,count:x}=fe(),{project:E}=ve(te(s,"project")),{projects:y}=he(),k=oe();K(()=>s.wallet,N=>{N&&(s.ql=N.currency)});const B=D(()=>{const N=ue(),r=J({});return Object.keys(v).forEach(w=>{N.user(w).get("wallets").on((m,S)=>{r[w]=v[w]})}),r}),V=D(()=>{const N=J({});return Object.keys(y).forEach(r=>{r.includes(s.to)&&(N[r]=y[r])}),N});return(N,r)=>{const w=ie("gift-wallets");return d(),g("div",ye,[f("div",ke,[r[15]||(r[15]=f("div",{class:"p-2 text-right"},"FROM",-1)),f("div",Ne,[l(p).pub?(d(),C(l(q),{key:0,pub:l(p).pub},null,8,["pub"])):(d(),C(l(pe),{key:1}))]),r[16]||(r[16]=f("div",{class:"p-2 text-right"},"TO ",-1)),l(s).to?(d(),C(l(q),{key:0,pub:l(s).to},{default:Q(()=>[r[8]||(r[8]=f("div",{class:"flex-1"},null,-1)),f("div",{class:"i-la-times mr-2",onClick:r[0]||(r[0]=m=>{l(s).to="",l(s).wallet=null})})]),_:1},8,["pub"])):(d(),g("div",Se,[f("div",we,"USER SELECT OF "+j(Object.keys(B.value).length),1),f("div",Re,[(d(!0),g(F,null,L(l(v),m=>(d(),C(l(q),{key:m,pub:m.pub,onClick:S=>l(s).to=m.pub},null,8,["pub","onClick"]))),128))])])),l(s).to?(d(),g(F,{key:2},[r[14]||(r[14]=f("div",{class:"p-2 text-right"},"WALLET",-1)),(d(),C(w,{key:l(s).to,pub:l(s).to,"active-wallet":l(s).wallet,onWallet:r[1]||(r[1]=m=>l(s).wallet=m),onClear:r[2]||(r[2]=m=>l(s).wallet=null)},null,8,["pub","active-wallet"])),l(s).wallet?(d(),g(F,{key:0},[r[10]||(r[10]=f("div",{class:"p-2 text-right"},"Quantity",-1)),I(l(_),se({modelValue:l(s).qn,"onUpdate:modelValue":r[3]||(r[3]=m=>l(s).qn=m)},n,{placeholder:"Quantity"}),null,16,["modelValue"]),r[11]||(r[11]=f("div",{class:"p-2 text-right"},"Quality",-1)),T(f("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":r[4]||(r[4]=m=>l(s).ql=m),placeholder:"Your account currency"},[(d(!0),g(F,null,L(l(ge),m=>(d(),g("option",{key:m,value:m},j(m),9,Ce))),128))],512),[[ne,l(s).ql]]),r[12]||(r[12]=f("div",{class:"p-2 text-right self-start"},"Wish ",-1)),T(f("textarea",{class:"p-2","onUpdate:modelValue":r[5]||(r[5]=m=>l(s).wish=m),placeholder:"Wish"},null,512),[[re,l(s).wish]]),f("div",je,[r[9]||(r[9]=le("PROJECT ")),l(s).project?$("",!0):(d(),g("div",Fe,"SELECT"))]),l(s).project?(d(),C(l(ce),{key:0,project:l(E),path:l(s).project},{default:Q(()=>[f("div",{class:"i-la-times",onClick:r[6]||(r[6]=m=>l(s).project=null)})]),_:1},8,["project","path"])):(d(),g("div",Oe,[(d(!0),g(F,null,L(V.value,(m,S)=>(d(),g("div",{class:"p-2 rounded-xl cursor-pointer",key:S,style:z({backgroundColor:m.color}),onClick:Be=>l(s).project=m.path},[f("div",$e,j(m.title),1)],12,Ve))),128))])),r[13]||(r[13]=f("div",{class:"p-2 text-right"},"ROOM",-1)),I(l(me)),l(u)?(d(),g("div",Pe,[f("button",{class:"button w-full justify-center",onClick:r[7]||(r[7]=m=>{l(i)(),N.$emit("sent",l(c))})},"Propose")])):$("",!0),f("pre",De,j(l(o)),1),f("div",{class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition",style:z({backgroundColor:l(k).hex(l(c)||"")})},j(l(c)),5)],64)):$("",!0)],64)):$("",!0)])])}}};export{Qe as default};
