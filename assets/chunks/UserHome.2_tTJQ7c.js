import{d as y,p as C,q as $,aj as c,h as B,c as i,o as l,G as r,b as m,w as f,e as v,k as s,j as t,N as U,F as h,B as R,T as x}from"./framework.BfubPTv1.js";import{a as L,aR as N,b7 as j,U as M,b8 as P,b9 as S,ba as V,bb as A,bc as F}from"./components.DKJnBSOs.js";import"./theme.D-TZAyX7.js";import T from"./RoomButton.3ZIhYO-5.js";import"./useBackground.BFcT2amZ.js";const q={class:"flex flex-col items-center w-full"},z={key:1,class:"flex flex-col"},E={class:"p-4 flex flex-col items-stretch gap-4"},G={class:"flex flex-col items-stretch bg-light-900 dark-bg-dark-500 p-2 rounded-xl"},H={key:0,class:"i-la-angle-down"},I={key:1,class:"i-la-angle-up"},D={class:"flex flex-col items-stretch bg-light-900 dark-bg-dark-500 p-2 rounded-xl"},J={key:0,class:"i-la-angle-down"},K={key:1,class:"i-la-angle-up"},te=y({__name:"UserHome",emits:["user","room","close","chat","browse"],setup(O,{emit:Q}){const{user:a}=L();function k(){a.db.get("safe").get("saved").put(!0)}const p=C(!1);$(()=>a.is,()=>{a.db.get("safe").get("saved").on(n=>p.value=n)},{immediate:!0});const u=c("showChats",!0),d=c("showRooms",!0),w=B(()=>N(a.pub));return(n,e)=>(l(),i("div",q,[r(s(M),{open:s(a).is&&!p.value,"close-button":"",onClose:e[1]||(e[1]=o=>k())},{default:f(()=>[p.value?v("",!0):(l(),m(s(j),{key:0},{default:f(()=>[t("button",{class:"button mx-8 justify-center",onClick:e[0]||(e[0]=o=>k())},e[8]||(e[8]=[t("div",{class:"i-la-check"},null,-1),t("div",{class:"ml-2"},"I've stored my key securely",-1)]))]),_:1}))]),_:1},8,["open"]),s(a).is?(l(),i("div",z,[r(s(S),{onBrowse:e[2]||(e[2]=o=>{n.$emit("browse",o),n.$emit("close")})}),t("div",E,[r(s(V)),t("button",{class:"p-2 rounded-xl font-bold text-lg shadow-md",style:U({backgroundColor:s(a).color}),onClick:e[3]||(e[3]=o=>{n.$emit("user",s(a).pub),n.$emit("close")})}," My public profile",4),e[13]||(e[13]=t("hr",{class:"w-full"},null,-1)),r(s(A),{onBrowse:e[4]||(e[4]=o=>n.$emit("room",o))}),t("div",G,[t("button",{class:"items-center w-full flex px-2 pb-2",onClick:e[5]||(e[5]=o=>d.value=!s(d))},[e[9]||(e[9]=t("div",{class:"font-bold text-lg"},"My favourite rooms",-1)),e[10]||(e[10]=t("div",{class:"flex-1"},null,-1)),s(d)?(l(),i("div",H)):(l(),i("div",I))]),r(x,{name:"fade",mode:"out-in"},{default:f(()=>{var o,g;return[s(d)?(l(),i("div",{class:"flex flex-col gap-4",key:s(a).pub},[(l(!0),i(h,null,R((g=(o=w.value)==null?void 0:o.rooms)==null?void 0:g.value,(W,b)=>(l(),m(T,{key:b,pub:b,onBrowse:X=>n.$emit("room",b),panel:!1},null,8,["pub","onBrowse"]))),128))])):v("",!0)]}),_:1})]),t("div",D,[t("button",{class:"items-center w-full flex px-2 pb-2",onClick:e[6]||(e[6]=o=>u.value=!s(u))},[e[11]||(e[11]=t("div",{class:"font-bold text-lg"},"My chats",-1)),e[12]||(e[12]=t("div",{class:"flex-1"},null,-1)),s(u)?(l(),i("div",J)):(l(),i("div",K))]),r(x,{name:"fade",mode:"out-in"},{default:f(()=>[s(u)?(l(),m(s(F),{key:0,onChat:e[7]||(e[7]=o=>n.$emit("chat",o))})):v("",!0)]),_:1})])])])):(l(),m(s(P),{key:0}))]))}});export{te as default};
