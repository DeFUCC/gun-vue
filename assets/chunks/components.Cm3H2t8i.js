const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/AccountHome.krvIEcnR.js","assets/chunks/AccountHome.vue_vue_type_script_setup_true_lang.Jo5txMF5.js","assets/chunks/useProjects.DHE8cPhd.js","assets/chunks/framework.BfubPTv1.js","assets/chunks/useBackground.BuBwZixM.js","assets/chunks/theme.D56HEEaE.js","assets/chunks/AccountPetname.Da3f0iwY.js","assets/chunks/AccountReactions.YjIYX0Be.js","assets/chunks/useReactions.JIF5NI87.js","assets/chunks/AccountSelect.DUYIjrTV.js","assets/chunks/useGuests.BnjFGP9J.js","assets/chunks/AccountProfile.BK2CCjMB.js","assets/chunks/AccountBadge.C6FDumDh.js","assets/chunks/AccountAvatar.BuuqVI30.js","assets/chunks/useAvatar.A50inhvt.js","assets/chunks/AuthLogin.CIEtlAF3.js","assets/chunks/AuthForm.BEwuaWw8.js","assets/chunks/AuthCreate.CyPuKc4u.js","assets/chunks/AuthCredentials.Z51YPqbJ.js","assets/chunks/AuthPass.FBHhBVUk.js","assets/chunks/ChatInput.C40Prl3z.js","assets/chunks/ChatMessage.C2nekLR2.js","assets/chunks/useMd.D1Vgx70i.js","assets/chunks/useMates.CFMhP295.js","assets/chunks/ChatMessages.Da5gJQCh.js","assets/chunks/ChatTopics.UWR2gHaO.js","assets/chunks/useChat.BHSaeqpd.js","assets/chunks/ChatRoom.DIKshS_M.js","assets/chunks/DictBy.CWtLGnJK.js","assets/chunks/DictPanel.BndBcxG8.js","assets/chunks/langs.CLi14XB-.js","assets/chunks/DictAuthors.B-snEOuE.js","assets/chunks/DictDefCard.C8tt2J6V.js","assets/chunks/DictDefList.D6qKWQ37.js","assets/chunks/DictDefPage.ClGnuX0U.js","assets/chunks/DictWordCard.hkO1da-Y.js","assets/chunks/DictWordList.gr8WlFOB.js","assets/chunks/DictWordPage.DOvnwkgp.js","assets/chunks/DictLinkList.CX_SiHYj.js","assets/chunks/DictLinkButton.D9T7bWok.js","assets/chunks/EmbedYoutube.BHQ4CbQg.js","assets/chunks/TorrentUpload.DY11R1ix.js","assets/chunks/index.BuUnCgYx.js","assets/chunks/TorrentDownload.CEtv8VaA.js","assets/chunks/FileCard.CpAfJe7D.js","assets/chunks/FileHash.D65PhXy8.js","assets/chunks/FormLink.phD5qDPq.js","assets/chunks/FormPicture.BJ1yWq3s.js","assets/chunks/FormText.CthwxZRC.js","assets/chunks/FormYoutube.DRBPCSZm.js","assets/chunks/FormTitle.rKgBqE7D.js","assets/chunks/GiftCard.O3rGVklx.js","assets/chunks/useGift.Cncoyob0.js","assets/chunks/composables.CX2bmTy1.js","assets/chunks/useProject.DzWFlWYb.js","assets/chunks/GiftList.BHwMnVOJ.js","assets/chunks/useGifts.ByLpAPQe.js","assets/chunks/GiftForm.x_iQ2vzx.js","assets/chunks/currencies.G9pkebxG.js","assets/chunks/GiftButton.COSJ4Ob9.js","assets/chunks/GiftWallets.IvsTdvg8.js","assets/chunks/GiftWallet.SWoAeMKJ.js","assets/chunks/GiftStatus.yNLGcOxu.js","assets/chunks/GunGraph.D7PJc8eU.js","assets/chunks/GunRelay.DSzZIhZn.js","assets/chunks/GunRelayList.BZ6Cu6Og.js","assets/chunks/GunTools.V9MORZ4I.js","assets/chunks/MateButton.DoScf5U_.js","assets/chunks/MateList.D33tBTiC.js","assets/chunks/MateLink.VGQjWcIH.js","assets/chunks/PostCard.SkWCB65z.js","assets/chunks/useZip.pCq3agXP.js","assets/chunks/PostForm.ORGtfRn9.js","assets/chunks/PostGraph.BA36WGlF.js","assets/chunks/force-graph.BdGAtRY5.js","assets/chunks/PostLine.qOQRlKV5.js","assets/chunks/PostLink.BfOisjrL.js","assets/chunks/PostList.CX3C4dR6.js","assets/chunks/usePosts.CdpBq0H_.js","assets/chunks/PostPage.nO6Vmlge.js","assets/chunks/PostActionStar.BS4WhV2J.js","assets/chunks/PostActionUpdate.CfY28k3P.js","assets/chunks/PostActionBan.D0MF1gUV.js","assets/chunks/PostActionReact.C4B0nZfj.js","assets/chunks/PostReactionButton.D8ihB3GN.js","assets/chunks/PostReactionTabs.ZKFLR9BJ.js","assets/chunks/ChatPrivate.C8HfukER.js","assets/chunks/usePrivateChat.BJyefIj3.js","assets/chunks/ChatPrivateCount.Ckejilfz.js","assets/chunks/ChatPrivateList.Ee65cpvg.js","assets/chunks/ProjectList.xAduAYLC.js","assets/chunks/ProjectForm.Bo7R-WM2.js","assets/chunks/ProjectCard.C9iMqw1H.js","assets/chunks/ProjectPage.BlE2Se2O.js","assets/chunks/ProjectFunding.B54hvZW0.js","assets/chunks/QrLoad.DZ_8ENj8.js","assets/chunks/QrShow.B40Tfabr.js","assets/chunks/QrShare.D1RNWi9i.js","assets/chunks/RoomCard.CIT76M2K.js","assets/chunks/RoomFeature.ClaQo0SF.js","assets/chunks/RoomFeatureIcon.CeHe4NoG.js","assets/chunks/RoomForm.CTyr0NU8.js","assets/chunks/RoomLogo.DEor8Pjg.js","assets/chunks/RoomList.CEISghMi.js","assets/chunks/RoomPage.BzagbQci.js","assets/chunks/RoomProfile.BiV5ajME.js","assets/chunks/RoomButton.Cn3cKd7v.js","assets/chunks/RoomActions.Cm3wV8GB.js","assets/chunks/GuestList.CAHHrr88.js","assets/chunks/SpacePlane.BvhxOyvL.js","assets/chunks/SpaceGuest.CRqXmKQS.js","assets/chunks/SpaceArrow.DoBLIszd.js","assets/chunks/SpaceDraw.CVPcfmaE.js","assets/chunks/SpaceStatus.CS850FEx.js","assets/chunks/UiButton.Bv-xly8b.js","assets/chunks/UiLayer.6uEiaDq6.js","assets/chunks/UiLink.MPeV0s5V.js","assets/chunks/UiModal.qjUiH2er.js","assets/chunks/UiPanel.CDTrt62r.js","assets/chunks/UiDark.CaP2lLDn.js","assets/chunks/UiComponents.3LT8uM-M.js","assets/chunks/UserAvatar.DF5w21FD.js","assets/chunks/UserGraph.BDituvl9.js","assets/chunks/UserHome.CgE1SdLF.js","assets/chunks/UserIcon.BFQPjt98.js","assets/chunks/UserListOverlay.900spMhU.js","assets/chunks/UserPanel.BwAuCeG2.js","assets/chunks/UserProfile.D19NzGjO.js","assets/chunks/UserProfileField.DL3FEkZa.js","assets/chunks/UserRooms.Dl4mAc0p.js"])))=>i.map(i=>d[i]);
var sf=Object.defineProperty;var of=(n,t,e)=>t in n?sf(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Jt=(n,t,e)=>of(n,typeof t!="symbol"?t+"":t,e);import"./theme.D56HEEaE.js";import{U as J,V,ah as At,ai as af,p as ue,h as It,s as Ra,aj as $e,ak as uf,al as cf,q as In,D as zn,am as lf,P as Fa,an as ff,ao as hf,ap as df,aq as pf,ar as gf,as as mf}from"./framework.BfubPTv1.js";const La=J(()=>V(()=>import("./AccountHome.krvIEcnR.js"),__vite__mapDeps([0,1,2,3,4,5]))),Na=J(()=>V(()=>import("./AccountPetname.Da3f0iwY.js"),__vite__mapDeps([6,3,5]))),Ba=J(()=>V(()=>import("./AccountReactions.YjIYX0Be.js"),__vite__mapDeps([7,3,8,5]))),$a=J(()=>V(()=>import("./AccountSelect.DUYIjrTV.js"),__vite__mapDeps([9,3,10,5]))),Ma=J(()=>V(()=>import("./AccountProfile.BK2CCjMB.js"),__vite__mapDeps([11,3,5]))),Ua=J(()=>V(()=>import("./AccountBadge.C6FDumDh.js"),__vite__mapDeps([12,5,3]))),za=J(()=>V(()=>import("./AccountAvatar.BuuqVI30.js"),__vite__mapDeps([13,14,3,5]))),Ha=J(()=>V(()=>import("./AuthLogin.CIEtlAF3.js"),__vite__mapDeps([15,5,3]))),qa=J(()=>V(()=>import("./AuthForm.BEwuaWw8.js"),__vite__mapDeps([16,3,5]))),Ga=J(()=>V(()=>import("./AuthCreate.CyPuKc4u.js"),__vite__mapDeps([17,3,5]))),Wa=J(()=>V(()=>import("./AuthCredentials.Z51YPqbJ.js"),__vite__mapDeps([18,3,5]))),Va=J(()=>V(()=>import("./AuthPass.FBHhBVUk.js"),__vite__mapDeps([19,3,5]))),Ja=J(()=>V(()=>import("./ChatInput.C40Prl3z.js"),__vite__mapDeps([20,3,5]))),Ka=J(()=>V(()=>import("./ChatMessage.C2nekLR2.js"),__vite__mapDeps([21,3,22,23,5]))),Za=J(()=>V(()=>import("./ChatMessages.Da5gJQCh.js"),__vite__mapDeps([24,3,21,22,23,5]))),Ya=J(()=>V(()=>import("./ChatTopics.UWR2gHaO.js"),__vite__mapDeps([25,3,26,5]))),Xa=J(()=>V(()=>import("./ChatRoom.DIKshS_M.js"),__vite__mapDeps([27,5,3,26,4]))),Qa=J(()=>V(()=>import("./DictBy.CWtLGnJK.js"),__vite__mapDeps([28,3,5]))),tu=J(()=>V(()=>import("./DictPanel.BndBcxG8.js"),__vite__mapDeps([29,3,30,5]))),eu=J(()=>V(()=>import("./DictAuthors.B-snEOuE.js"),__vite__mapDeps([31,5,3]))),nu=J(()=>V(()=>import("./DictDefCard.C8tt2J6V.js"),__vite__mapDeps([32,3,30,5]))),ru=J(()=>V(()=>import("./DictDefList.D6qKWQ37.js"),__vite__mapDeps([33,3,30,5]))),iu=J(()=>V(()=>import("./DictDefPage.ClGnuX0U.js"),__vite__mapDeps([34,3,30,5]))),su=J(()=>V(()=>import("./DictWordCard.hkO1da-Y.js"),__vite__mapDeps([35,3,5]))),ou=J(()=>V(()=>import("./DictWordList.gr8WlFOB.js"),__vite__mapDeps([36,3,5]))),au=J(()=>V(()=>import("./DictWordPage.DOvnwkgp.js"),__vite__mapDeps([37,3,5]))),uu=J(()=>V(()=>import("./DictLinkList.CX_SiHYj.js"),__vite__mapDeps([38,3,5]))),cu=J(()=>V(()=>import("./DictLinkButton.D9T7bWok.js"),__vite__mapDeps([39,3,5]))),lu=J(()=>V(()=>import("./EmbedYoutube.BHQ4CbQg.js"),__vite__mapDeps([40,3]))),fu=J(()=>V(()=>import("./TorrentUpload.DY11R1ix.js"),__vite__mapDeps([41,3,5,42]))),hu=J(()=>V(()=>import("./TorrentDownload.CEtv8VaA.js"),__vite__mapDeps([43,42,5,3]))),du=J(()=>V(()=>import("./FileCard.CpAfJe7D.js"),__vite__mapDeps([44,3,42,5]))),pu=J(()=>V(()=>import("./FileHash.D65PhXy8.js"),__vite__mapDeps([45,3,5]))),gu=J(()=>V(()=>import("./FormLink.phD5qDPq.js"),__vite__mapDeps([46,3,5]))),mu=J(()=>V(()=>import("./FormPicture.BJ1yWq3s.js"),__vite__mapDeps([47,5,3]))),bu=J(()=>V(()=>import("./FormText.CthwxZRC.js"),__vite__mapDeps([48,3,22,5]))),_u=J(()=>V(()=>import("./FormYoutube.DRBPCSZm.js"),__vite__mapDeps([49,3,5]))),yu=J(()=>V(()=>import("./FormTitle.rKgBqE7D.js"),__vite__mapDeps([50,3]))),wu=J(()=>V(()=>import("./GiftCard.O3rGVklx.js"),__vite__mapDeps([51,3,52,53,54,5]))),vu=J(()=>V(()=>import("./GiftList.BHwMnVOJ.js"),__vite__mapDeps([55,56,53,3,5]))),xu=J(()=>V(()=>import("./GiftForm.x_iQ2vzx.js"),__vite__mapDeps([57,3,10,52,53,54,2,5,58]))),ku=J(()=>V(()=>import("./GiftButton.COSJ4Ob9.js"),__vite__mapDeps([59,5,3]))),Su=J(()=>V(()=>import("./GiftWallets.IvsTdvg8.js"),__vite__mapDeps([60,3,5,58]))),Au=J(()=>V(()=>import("./GiftWallet.SWoAeMKJ.js"),__vite__mapDeps([61,3]))),Eu=J(()=>V(()=>import("./GiftStatus.yNLGcOxu.js"),__vite__mapDeps([62,3]))),Cu=J(()=>V(()=>import("./GunGraph.D7PJc8eU.js"),__vite__mapDeps([63,3,5]))),Tu=J(()=>V(()=>import("./GunRelay.DSzZIhZn.js"),__vite__mapDeps([64,3,5]))),Du=J(()=>V(()=>import("./GunRelayList.BZ6Cu6Og.js"),__vite__mapDeps([65,3,5]))),Ou=J(()=>V(()=>import("./GunTools.V9MORZ4I.js"),__vite__mapDeps([66,5,3]))),Pu=J(()=>V(()=>import("./MateButton.DoScf5U_.js"),__vite__mapDeps([67,3,23,5]))),Iu=J(()=>V(()=>import("./MateList.D33tBTiC.js"),__vite__mapDeps([68,3,23,5]))),ju=J(()=>V(()=>import("./MateLink.VGQjWcIH.js"),__vite__mapDeps([69,23,3,5]))),Ru=J(()=>V(()=>import("./PostCard.SkWCB65z.js"),__vite__mapDeps([70,71,22,52,53,3,5]))),Fu=J(()=>V(()=>import("./PostForm.ORGtfRn9.js"),__vite__mapDeps([72,3,71,22,52,53,5]))),Lu=J(()=>V(()=>import("./PostGraph.BA36WGlF.js"),__vite__mapDeps([73,74,3,5]))),Nu=J(()=>V(()=>import("./PostLine.qOQRlKV5.js"),__vite__mapDeps([75,71,22,52,53,3,5]))),Bu=J(()=>V(()=>import("./PostLink.BfOisjrL.js"),__vite__mapDeps([76,3,5]))),$u=J(()=>V(()=>import("./PostList.CX3C4dR6.js"),__vite__mapDeps([77,3,78,71,22,52,53,8,5]))),Mu=J(()=>V(()=>import("./PostPage.nO6Vmlge.js"),__vite__mapDeps([79,22,71,52,53,3,78,5]))),Uu=J(()=>V(()=>import("./PostActionStar.BS4WhV2J.js"),__vite__mapDeps([80,3,5]))),zu=J(()=>V(()=>import("./PostActionUpdate.CfY28k3P.js"),__vite__mapDeps([81,3,71,22,52,53,5]))),Hu=J(()=>V(()=>import("./PostActionBan.D0MF1gUV.js"),__vite__mapDeps([82,3,5]))),qu=J(()=>V(()=>import("./PostActionReact.C4B0nZfj.js"),__vite__mapDeps([83,3,23,8,5]))),Gu=J(()=>V(()=>import("./PostReactionButton.D8ihB3GN.js"),__vite__mapDeps([84,3,5]))),Wu=J(()=>V(()=>import("./PostReactionTabs.ZKFLR9BJ.js"),__vite__mapDeps([85,3,23,5]))),Vu=J(()=>V(()=>import("./ChatPrivate.C8HfukER.js"),__vite__mapDeps([86,87,3,5,1,2,4]))),Ju=J(()=>V(()=>import("./ChatPrivateCount.Ckejilfz.js"),__vite__mapDeps([88,87,3,5]))),Ku=J(()=>V(()=>import("./ChatPrivateList.Ee65cpvg.js"),__vite__mapDeps([89,87,3,5]))),Zu=J(()=>V(()=>import("./ProjectList.xAduAYLC.js"),__vite__mapDeps([90,3,2,5,91,54]))),Yu=J(()=>V(()=>import("./ProjectCard.C9iMqw1H.js"),__vite__mapDeps([92,3,54,5]))),Xu=J(()=>V(()=>import("./ProjectPage.BlE2Se2O.js"),__vite__mapDeps([93,3,22,54,5]))),Qu=J(()=>V(()=>import("./ProjectFunding.B54hvZW0.js"),__vite__mapDeps([94,3,56,53,5]))),tc=J(()=>V(()=>import("./ProjectForm.Bo7R-WM2.js"),__vite__mapDeps([91,3,54,5]))),ec=J(()=>V(()=>import("./QrLoad.DZ_8ENj8.js"),__vite__mapDeps([95,3]))),nc=J(()=>V(()=>import("./QrShow.B40Tfabr.js"),__vite__mapDeps([96,3,5]))),rc=J(()=>V(()=>import("./QrShare.D1RNWi9i.js"),__vite__mapDeps([97,3,5]))),ic=J(()=>V(()=>import("./RoomCard.CIT76M2K.js"),__vite__mapDeps([98,4,5,3]))),sc=J(()=>V(()=>import("./RoomFeature.ClaQo0SF.js"),__vite__mapDeps([99,5,3]))),oc=J(()=>V(()=>import("./RoomFeatureIcon.CeHe4NoG.js"),__vite__mapDeps([100,3]))),ac=J(()=>V(()=>import("./RoomForm.CTyr0NU8.js"),__vite__mapDeps([101,3,4,5]))),uc=J(()=>V(()=>import("./RoomLogo.DEor8Pjg.js"),__vite__mapDeps([102,3,5]))),cc=J(()=>V(()=>import("./RoomList.CEISghMi.js"),__vite__mapDeps([103,5,3]))),lc=J(()=>V(()=>import("./RoomPage.BzagbQci.js"),__vite__mapDeps([104,22,4,5,3]))),fc=J(()=>V(()=>import("./RoomProfile.BiV5ajME.js"),__vite__mapDeps([105,3]))),hc=J(()=>V(()=>import("./RoomButton.Cn3cKd7v.js"),__vite__mapDeps([106,4,5,3]))),dc=J(()=>V(()=>import("./RoomActions.Cm3wV8GB.js"),__vite__mapDeps([107,3,5]))),pc=J(()=>V(()=>import("./GuestList.CAHHrr88.js"),__vite__mapDeps([108,3,10,5]))),gc=J(()=>V(()=>import("./SpacePlane.BvhxOyvL.js"),__vite__mapDeps([109,3,23,5]))),mc=J(()=>V(()=>import("./SpaceGuest.CRqXmKQS.js"),__vite__mapDeps([110,14,3,5]))),bc=J(()=>V(()=>import("./SpaceArrow.DoBLIszd.js"),__vite__mapDeps([111,3,5]))),_c=J(()=>V(()=>import("./SpaceDraw.CVPcfmaE.js"),__vite__mapDeps([112,3,5]))),yc=J(()=>V(()=>import("./SpaceStatus.CS850FEx.js"),__vite__mapDeps([113,3]))),wc=J(()=>V(()=>import("./UiButton.Bv-xly8b.js"),__vite__mapDeps([114,3]))),vc=J(()=>V(()=>import("./UiLayer.6uEiaDq6.js"),__vite__mapDeps([115,3]))),xc=J(()=>V(()=>import("./UiLink.MPeV0s5V.js"),__vite__mapDeps([116,3]))),kc=J(()=>V(()=>import("./UiModal.qjUiH2er.js"),__vite__mapDeps([117,3]))),Sc=J(()=>V(()=>import("./UiPanel.CDTrt62r.js"),__vite__mapDeps([118,3]))),Ac=J(()=>V(()=>import("./UiDark.CaP2lLDn.js"),__vite__mapDeps([119,3,5]))),Ec=J(()=>V(()=>import("./UiComponents.3LT8uM-M.js"),__vite__mapDeps([120,5,3]))),Cc=J(()=>V(()=>import("./UserAvatar.DF5w21FD.js"),__vite__mapDeps([121,3,14,5]))),Tc=J(()=>V(()=>import("./UserGraph.BDituvl9.js"),__vite__mapDeps([122,3,23,74,5]))),Dc=J(()=>V(()=>import("./UserHome.CgE1SdLF.js"),__vite__mapDeps([123,3,5,106,4]))),Oc=J(()=>V(()=>import("./UserIcon.BFQPjt98.js"),__vite__mapDeps([124,5,3]))),Pc=J(()=>V(()=>import("./UserListOverlay.900spMhU.js"),__vite__mapDeps([125,3,10,5]))),Ic=J(()=>V(()=>import("./UserPanel.BwAuCeG2.js"),__vite__mapDeps([126,5,3,4]))),jc=J(()=>V(()=>import("./UserProfile.D19NzGjO.js"),__vite__mapDeps([127,3,5]))),Rc=J(()=>V(()=>import("./UserProfileField.DL3FEkZa.js"),__vite__mapDeps([128,3,5]))),Fc=J(()=>V(()=>import("./UserRooms.Dl4mAc0p.js"),__vite__mapDeps([129,3,5]))),Oi=Object.freeze(Object.defineProperty({__proto__:null,AccountAvatar:za,AccountBadge:Ua,AccountHome:La,AccountPetname:Na,AccountProfile:Ma,AccountReactions:Ba,AccountSelect:$a,AuthCreate:Ga,AuthCredentials:Wa,AuthForm:qa,AuthLogin:Ha,AuthPass:Va,ChatInput:Ja,ChatMessage:Ka,ChatMessages:Za,ChatPrivate:Vu,ChatPrivateCount:Ju,ChatPrivateList:Ku,ChatRoom:Xa,ChatTopics:Ya,DictAuthors:eu,DictBy:Qa,DictDefCard:nu,DictDefList:ru,DictDefPage:iu,DictLinkButton:cu,DictLinkList:uu,DictPanel:tu,DictWordCard:su,DictWordList:ou,DictWordPage:au,EmbedYoutube:lu,FileCard:du,FileHash:pu,FormLink:gu,FormPicture:mu,FormText:bu,FormTitle:yu,FormYoutube:_u,GiftButton:ku,GiftCard:wu,GiftForm:xu,GiftList:vu,GiftStatus:Eu,GiftWallet:Au,GiftWallets:Su,GuestList:pc,GunGraph:Cu,GunRelay:Tu,GunRelayList:Du,GunTools:Ou,MateButton:Pu,MateLink:ju,MateList:Iu,PostActionBan:Hu,PostActionReact:qu,PostActionStar:Uu,PostActionUpdate:zu,PostCard:Ru,PostForm:Fu,PostGraph:Lu,PostLine:Nu,PostLink:Bu,PostList:$u,PostPage:Mu,PostReactionButton:Gu,PostReactionTabs:Wu,ProjectCard:Yu,ProjectForm:tc,ProjectFunding:Qu,ProjectList:Zu,ProjectPage:Xu,QrLoad:ec,QrShare:rc,QrShow:nc,RoomActions:dc,RoomButton:hc,RoomCard:ic,RoomFeature:sc,RoomFeatureIcon:oc,RoomForm:ac,RoomList:cc,RoomLogo:uc,RoomPage:lc,RoomProfile:fc,SpaceArrow:bc,SpaceDraw:_c,SpaceGuest:mc,SpacePlane:gc,SpaceStatus:yc,TorrentDownload:hu,TorrentUpload:fu,UiButton:wc,UiComponents:Ec,UiDark:Ac,UiLayer:vc,UiLink:xc,UiModal:kc,UiPanel:Sc,UserAvatar:Cc,UserGraph:Tc,UserHome:Dc,UserIcon:Oc,UserListOverlay:Pc,UserPanel:Ic,UserProfile:jc,UserProfileField:Rc,UserRooms:Fc},Symbol.toStringTag,{value:"Module"}));var ht=function(n,t,e){if(!t.has(n))throw new TypeError("attempted to set private field on non-instance");return t.set(n,e),e},st=function(n,t){if(!t.has(n))throw new TypeError("attempted to get private field on non-instance");return t.get(n)},qe,cn,se,An,Zn,de,pe,ge,me,be,_e,ye,we,ln,En,Ge,vr,We;const bf=function(n){var t=131,e=137,s=0;n+="x";var r=Math.floor(9007199254740991/e);for(let i=0;i<n.length;i++)s>r&&(s=Math.floor(s/e)),s=s*t+n.charCodeAt(i);return s},ut="0123456789abcdef".split(""),_f=[-2147483648,8388608,32768,128],ne=[24,16,8,0],fr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],$t=[];class yf{constructor(t=!1,e=!1){qe.set(this,void 0),cn.set(this,void 0),se.set(this,void 0),An.set(this,void 0),Zn.set(this,void 0),de.set(this,void 0),pe.set(this,void 0),ge.set(this,void 0),me.set(this,void 0),be.set(this,void 0),_e.set(this,void 0),ye.set(this,void 0),we.set(this,void 0),ln.set(this,void 0),En.set(this,void 0),Ge.set(this,void 0),vr.set(this,0),We.set(this,void 0),this.init(t,e)}init(t,e){e?($t[0]=$t[16]=$t[1]=$t[2]=$t[3]=$t[4]=$t[5]=$t[6]=$t[7]=$t[8]=$t[9]=$t[10]=$t[11]=$t[12]=$t[13]=$t[14]=$t[15]=0,ht(this,cn,$t)):ht(this,cn,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t?(ht(this,de,3238371032),ht(this,pe,914150663),ht(this,ge,812702999),ht(this,me,4144912697),ht(this,be,4290775857),ht(this,_e,1750603025),ht(this,ye,1694076839),ht(this,we,3204075428)):(ht(this,de,1779033703),ht(this,pe,3144134277),ht(this,ge,1013904242),ht(this,me,2773480762),ht(this,be,1359893119),ht(this,_e,2600822924),ht(this,ye,528734635),ht(this,we,1541459225)),ht(this,qe,ht(this,We,ht(this,se,ht(this,En,0)))),ht(this,An,ht(this,ln,!1)),ht(this,Zn,!0),ht(this,Ge,t)}update(t){if(st(this,An))return this;let e;t instanceof ArrayBuffer?e=new Uint8Array(t):e=t;let s=0;const r=e.length,i=st(this,cn);for(;s<r;){let o;if(st(this,ln)&&(ht(this,ln,!1),i[0]=st(this,qe),i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),typeof e!="string")for(o=st(this,We);s<r&&o<64;++s)i[o>>2]|=e[s]<<ne[o++&3];else for(o=st(this,We);s<r&&o<64;++s){let a=e.charCodeAt(s);a<128?i[o>>2]|=a<<ne[o++&3]:a<2048?(i[o>>2]|=(192|a>>6)<<ne[o++&3],i[o>>2]|=(128|a&63)<<ne[o++&3]):a<55296||a>=57344?(i[o>>2]|=(224|a>>12)<<ne[o++&3],i[o>>2]|=(128|a>>6&63)<<ne[o++&3],i[o>>2]|=(128|a&63)<<ne[o++&3]):(a=65536+((a&1023)<<10|e.charCodeAt(++s)&1023),i[o>>2]|=(240|a>>18)<<ne[o++&3],i[o>>2]|=(128|a>>12&63)<<ne[o++&3],i[o>>2]|=(128|a>>6&63)<<ne[o++&3],i[o>>2]|=(128|a&63)<<ne[o++&3])}ht(this,vr,o),ht(this,se,st(this,se)+(o-st(this,We))),o>=64?(ht(this,qe,i[16]),ht(this,We,o-64),this.hash(),ht(this,ln,!0)):ht(this,We,o)}return st(this,se)>4294967295&&(ht(this,En,st(this,En)+(st(this,se)/4294967296<<0)),ht(this,se,st(this,se)%4294967296)),this}finalize(){if(st(this,An))return;ht(this,An,!0);const t=st(this,cn),e=st(this,vr);t[16]=st(this,qe),t[e>>2]|=_f[e&3],ht(this,qe,t[16]),e>=56&&(st(this,ln)||this.hash(),t[0]=st(this,qe),t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=st(this,En)<<3|st(this,se)>>>29,t[15]=st(this,se)<<3,this.hash()}hash(){let t=st(this,de),e=st(this,pe),s=st(this,ge),r=st(this,me),i=st(this,be),o=st(this,_e),a=st(this,ye),u=st(this,we);const c=st(this,cn);let l,f,h,d,p,g,b,y,m,_;for(let w=16;w<64;++w)d=c[w-15],l=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,d=c[w-2],f=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,c[w]=c[w-16]+l+c[w-7]+f<<0;_=e&s;for(let w=0;w<64;w+=4)st(this,Zn)?(st(this,Ge)?(b=300032,d=c[0]-1413257819,u=d-150054599<<0,r=d+24177077<<0):(b=704751109,d=c[0]-210244248,u=d-1521486534<<0,r=d+143694565<<0),ht(this,Zn,!1)):(l=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),f=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),b=t&e,h=b^t&s^_,g=i&o^~i&a,d=u+f+g+fr[w]+c[w],p=l+h,u=r+d<<0,r=d+p<<0),l=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),y=r&t,h=y^r&e^b,g=u&i^~u&o,d=a+f+g+fr[w+1]+c[w+1],p=l+h,a=s+d<<0,s=d+p<<0,l=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),m=s&r,h=m^s&t^y,g=a&u^~a&i,d=o+f+g+fr[w+2]+c[w+2],p=l+h,o=e+d<<0,e=d+p<<0,l=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),_=e&s,h=_^e&r^m,g=o&a^~o&u,d=i+f+g+fr[w+3]+c[w+3],p=l+h,i=t+d<<0,t=d+p<<0;ht(this,de,st(this,de)+t<<0),ht(this,pe,st(this,pe)+e<<0),ht(this,ge,st(this,ge)+s<<0),ht(this,me,st(this,me)+r<<0),ht(this,be,st(this,be)+i<<0),ht(this,_e,st(this,_e)+o<<0),ht(this,ye,st(this,ye)+a<<0),ht(this,we,st(this,we)+u<<0)}hex(){this.finalize();const t=st(this,de),e=st(this,pe),s=st(this,ge),r=st(this,me),i=st(this,be),o=st(this,_e),a=st(this,ye),u=st(this,we);let c=ut[t>>28&15]+ut[t>>24&15]+ut[t>>20&15]+ut[t>>16&15]+ut[t>>12&15]+ut[t>>8&15]+ut[t>>4&15]+ut[t&15]+ut[e>>28&15]+ut[e>>24&15]+ut[e>>20&15]+ut[e>>16&15]+ut[e>>12&15]+ut[e>>8&15]+ut[e>>4&15]+ut[e&15]+ut[s>>28&15]+ut[s>>24&15]+ut[s>>20&15]+ut[s>>16&15]+ut[s>>12&15]+ut[s>>8&15]+ut[s>>4&15]+ut[s&15]+ut[r>>28&15]+ut[r>>24&15]+ut[r>>20&15]+ut[r>>16&15]+ut[r>>12&15]+ut[r>>8&15]+ut[r>>4&15]+ut[r&15]+ut[i>>28&15]+ut[i>>24&15]+ut[i>>20&15]+ut[i>>16&15]+ut[i>>12&15]+ut[i>>8&15]+ut[i>>4&15]+ut[i&15]+ut[o>>28&15]+ut[o>>24&15]+ut[o>>20&15]+ut[o>>16&15]+ut[o>>12&15]+ut[o>>8&15]+ut[o>>4&15]+ut[o&15]+ut[a>>28&15]+ut[a>>24&15]+ut[a>>20&15]+ut[a>>16&15]+ut[a>>12&15]+ut[a>>8&15]+ut[a>>4&15]+ut[a&15];return st(this,Ge)||(c+=ut[u>>28&15]+ut[u>>24&15]+ut[u>>20&15]+ut[u>>16&15]+ut[u>>12&15]+ut[u>>8&15]+ut[u>>4&15]+ut[u&15]),c}toString(){return this.hex()}digest(){this.finalize();const t=st(this,de),e=st(this,pe),s=st(this,ge),r=st(this,me),i=st(this,be),o=st(this,_e),a=st(this,ye),u=st(this,we),c=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24&255,s>>16&255,s>>8&255,s&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255];return st(this,Ge)||c.push(u>>24&255,u>>16&255,u>>8&255,u&255),c}array(){return this.digest()}arrayBuffer(){this.finalize();const t=new ArrayBuffer(st(this,Ge)?28:32),e=new DataView(t);return e.setUint32(0,st(this,de)),e.setUint32(4,st(this,pe)),e.setUint32(8,st(this,ge)),e.setUint32(12,st(this,me)),e.setUint32(16,st(this,be)),e.setUint32(20,st(this,_e)),e.setUint32(24,st(this,ye)),st(this,Ge)||e.setUint32(28,st(this,we)),t}}qe=new WeakMap,cn=new WeakMap,se=new WeakMap,An=new WeakMap,Zn=new WeakMap,de=new WeakMap,pe=new WeakMap,ge=new WeakMap,me=new WeakMap,be=new WeakMap,_e=new WeakMap,ye=new WeakMap,we=new WeakMap,ln=new WeakMap,En=new WeakMap,Ge=new WeakMap,vr=new WeakMap,We=new WeakMap;function wf(n){const t=new yf;return t.update(n),parseInt(t.hex().substring(0,8),16)}const vf=function(n){var t="#";return n.forEach(function(e){e<16&&(t+=0),t+=e.toString(16)}),t},xf=function(n,t,e){n/=360;var s=e<.5?e*(1+t):e+t-e*t,r=2*e-s;return[n+1/3,n,n-1/3].map(function(i){return i<0&&i++,i>1&&i--,i<1/6?i=r+(s-r)*6*i:i<.5?i=s:i<2/3?i=r+(s-r)*6*(2/3-i):i=r,Math.round(i*255)})};class Cn{constructor(t={}){const[e,s]=[t.lightness,t.saturation].map(function(r){return r=r!==void 0?r:[.35,.5,.65],Array.isArray(r)?r.concat():[r]});this.L=e,this.S=s,typeof t.hue=="number"&&(t.hue={min:t.hue,max:t.hue}),typeof t.hue=="object"&&!Array.isArray(t.hue)&&(t.hue=[t.hue]),typeof t.hue>"u"&&(t.hue=[]),this.hueRanges=t.hue.map(function(r){return{min:typeof r.min>"u"?0:r.min,max:typeof r.max>"u"?360:r.max}}),this.hash=wf,typeof t.hash=="function"&&(this.hash=t.hash),t.hash==="bkdr"&&(this.hash=bf)}hsl(t){var e,s,r,i=this.hash(t),o=727;if(this.hueRanges.length){const a=this.hueRanges[i%this.hueRanges.length];e=i/this.hueRanges.length%o*(a.max-a.min)/o+a.min}else e=i%359;return i=Math.ceil(i/360),s=this.S[i%this.S.length],i=Math.ceil(i/this.S.length),r=this.L[i%this.L.length],[e,s,r]}rgb(t){var e=this.hsl(t);return xf.apply(this,e)}hex(t){var e=this.rgb(t);return vf(e)}}const kf={light:new Cn({saturation:[.05,.08,.22],lightness:[.85,.87,.9]}),pale:new Cn({saturation:[.05,.42,.52],lightness:[.75,.77,.9]}),regular:new Cn({saturation:[.1,.5,.7],lightness:[.3,.5,.7]}),deep:new Cn({saturation:[.5,.6,.7],lightness:[.2,.35,.4]}),dark:new Cn({saturation:[.02,.5,.6],lightness:[.18,.2,.5]})};function Lc(n="deep"){return typeof n=="object"?new Cn(n):kf[n]}const c1=At({dark:af()});var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function en(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kr,Ss;function Sf(){if(Ss)return Kr;Ss=1;var n=1e3,t=n*60,e=t*60,s=e*24,r=s*7,i=s*365.25;Kr=function(l,f){f=f||{};var h=typeof l;if(h==="string"&&l.length>0)return o(l);if(h==="number"&&isFinite(l))return f.long?u(l):a(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function o(l){if(l=String(l),!(l.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(f){var h=parseFloat(f[1]),d=(f[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return h*i;case"weeks":case"week":case"w":return h*r;case"days":case"day":case"d":return h*s;case"hours":case"hour":case"hrs":case"hr":case"h":return h*e;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(l){var f=Math.abs(l);return f>=s?Math.round(l/s)+"d":f>=e?Math.round(l/e)+"h":f>=t?Math.round(l/t)+"m":f>=n?Math.round(l/n)+"s":l+"ms"}function u(l){var f=Math.abs(l);return f>=s?c(l,f,s,"day"):f>=e?c(l,f,e,"hour"):f>=t?c(l,f,t,"minute"):f>=n?c(l,f,n,"second"):l+" ms"}function c(l,f,h,d){var p=f>=h*1.5;return Math.round(l/h)+" "+d+(p?"s":"")}return Kr}var Af=Sf();const Nc=en(Af),Ef=Lc("deep"),Cf=1e4;function l1(n){const t=xt(),e=ue(n),{user:s}=rn();return{account:It(()=>{const i=At({pub:e.value,color:It(()=>e.value?Ef.hex(e.value):"gray"),profile:{name:""},pulse:0,lastSeen:It(()=>{const o=Date.now()-i.pulse;return o>Cf?Nc(o):"online"}),blink:!1,db:t.user(e.value)});return s.is&&t.user().get("petnames").get(e.value).on(async o=>{i.petname=await s.decrypt(o)}),t.user(e.value).get("pulse").on(o=>{i.blink=!i.blink,i.pulse=o}).back().get("profile").map().on((o,a)=>{i.profile[a]=o}),i}),setPetname:Tf}}async function Tf(n,t){const{user:e}=rn();if(!e.is)return;const s=xt(),r=await e.encrypt(t);s.user().get("petnames").get(n).put(r)}const Lt=At({input:"",show:!1,safePair:!1,minLength:5,safe:{saved:!1,password:"",enc:"",pass:""},dec:{},links:At({pass:It(()=>{var n;return As((n=Lt.safe)==null?void 0:n.enc)}),pair:It(()=>As(JSON.stringify(wt.pair())))}),set(){Bc(Lt.input),Lt.input="",Lt.show=!1}});function As(n="",t="#/auth/"){let e=encodeURIComponent(n);return window.location.origin+window.location.pathname+t+e}function f1(n,t="#/auth/"){let e=n.indexOf(t),s=n.substring(e+t.length);return decodeURIComponent(s)}let Es=!1;function h1(){return Es||(xt().user().get("safe").map().on((t,e)=>{Lt.safe[e]=t}),Ra(async()=>{var t,e;if(!Lt.show){Lt.dec={};return}(t=Lt==null?void 0:Lt.safe)!=null&&t.pass&&(Lt.dec.pass=await wt.decrypt(Lt.safe.pass),Lt.input=Lt.dec.pass||""),(e=Lt==null?void 0:Lt.safe)!=null&&e.enc&&(Lt.dec.pair=await Le.decrypt(Lt.safe.enc,Lt.dec.pass))})),Es=!0,{pass:Lt,setPass:Bc,authWithPass:Df}}async function Df(n,t){let s=await xt().get(`~${n}`).get("safe").get("enc").then(),r=await Le.decrypt(s,t);zl(r)}async function Bc(n){const t=xt();let e=await Le.encrypt(wt.pair(),n),s=await wt.encrypt(n);t.user().get("safe").get("enc").put(e),t.user().get("safe").get("pass").put(s)}const Je=$e("cast-camera","default"),Dn=$e("cast-mic","default"),Of=ue(""),Cs=ue(!0),Ts=$e("slidev-record-mimetype","video/webm"),Pf={"video/webm":"webm","video/webm;codecs=h264":"mp4","video/x-matroska;codecs=avc1":"mkv"};function Or(n,t){const e=new Date,s=o=>`${o}`.padStart(2,"0"),r=`${s(e.getMonth()+1)}${s(e.getDate())}-${s(e.getHours())}${s(e.getMinutes())}`,i=t?Pf[t]:"webm";return`${[r,n,Of.value].filter(o=>!!o).join("-")}.${i}`}At({screen:It(()=>Or("screen",Ts.value)),camera:It(()=>Or("camera",Ts.value))});const{videoInputs:Ds,audioInputs:Os,ensurePermissions:Ps}=uf({onUpdated:function(){var n,t;Je.value!=="none"&&(Ds.value.find(e=>e.deviceId===Je.value)||(Je.value=((n=Ds.value[0])==null?void 0:n.deviceId)||"default")),Dn.value!=="none"&&(Os.value.find(e=>e.deviceId===Dn.value)||(Dn.value=((t=Os.value[0])==null?void 0:t.deviceId)||"default"))}});function Is(n,t){const e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download",n),document.body.appendChild(e),e.click(),document.body.removeChild(e)}function If(){const n=ue(!1),t=ue(0),e=cf();In(n,y=>y?t.value=Date.now():t.value=0);const s=It(()=>t.value?e.value-t.value:0),r=ue(!1),i=zn(),o=zn(),a=zn(),u=zn(),c=zn(),l={type:"video",bitsPerSecond:4*256*8*1024,timeSlice:24*60*60*1e3};async function f(){Je.value!=="none"&&(r.value?(r.value=!1,n.value||g(a)):(await h(),a.value&&(r.value=!!a.value)))}async function h(){if(await Ps(),await Fa(),!a.value){if(Je.value==="none"&&Dn.value==="none")return;a.value=await navigator.mediaDevices.getUserMedia({video:Je.value==="none"||Cs.value!==!0?!1:{deviceId:Je.value},audio:Dn.value==="none"?!1:{deviceId:Dn.value}})}}In(Je,async y=>{if(y==="none")g(a);else{if(n.value)return;a.value&&(g(a),await h())}});async function d(y={}){var _;await Ps();const{default:m}=await V(async()=>{const{default:w}=await import("./RecordRTC.NTdB-bW1.js").then(v=>v.R);return{default:w}},[]);if(await h(),u.value=await navigator.mediaDevices.getDisplayMedia({video:{frameRate:30,width:3840,height:2160}}),u.value.addEventListener("inactive",p),c.value=new MediaStream,u.value.getVideoTracks().forEach(w=>c.value.addTrack(w)),Object.assign(l,y),a.value){const w=(_=a.value.getAudioTracks())==null?void 0:_[0];w&&c.value.addTrack(w),i.value=new m(a.value,l),i.value.startRecording()}o.value=new m(c.value,l),o.value.startRecording(),n.value=!0}async function p(){var y,m;n.value=!1,(y=i.value)==null||y.stopRecording(()=>{if(Cs.value){const _=i.value.getBlob(),w=URL.createObjectURL(_);Is(Or("camera",l.mimeType),w),window.URL.revokeObjectURL(w)}i.value=void 0,r.value||g(a)}),(m=o.value)==null||m.stopRecording(()=>{const _=o.value.getBlob(),w=URL.createObjectURL(_);Is(Or("screen",l.mimeType),w),window.URL.revokeObjectURL(w),g(u),g(c),o.value=void 0})}function g(y){const m=y.value;m&&(m.getTracks().forEach(_=>{_.stop(),m.removeTrack(_)}),y.value=void 0)}function b(){n.value?p():d()}return lf("beforeunload",y=>{n.value&&(confirm("Recording is not saved yet, do you want to leave?")||(y.preventDefault(),y.returnValue=""))}),{recording:n,recordingTime:s,showAvatar:r,toggleRecording:b,startRecording:d,stopRecording:p,toggleAvatar:f,recorderCamera:i,recorderSlides:o,streamCamera:a,streamCapture:u,streamSlides:c}}If();var xr={exports:{}},jf=xr.exports,js;function Rf(){return js||(js=1,function(n,t){(function(e,s,r){n.exports=r(),n.exports.default=r()})("slugify",jf,function(){var e=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","¢":"cent","£":"pound","¤":"currency","¥":"yen","©":"(c)","ª":"a","®":"(r)","º":"o","À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"DJ","đ":"dj","Ē":"E","ē":"e","Ė":"E","ė":"e","Ę":"e","ę":"e","Ě":"E","ě":"e","Ğ":"G","ğ":"g","Ģ":"G","ģ":"g","Ĩ":"I","ĩ":"i","Ī":"i","ī":"i","Į":"I","į":"i","İ":"I","ı":"i","Ķ":"k","ķ":"k","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","Ō":"O","ō":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ũ":"U","ũ":"u","Ū":"u","ū":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","Ə":"E","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","ǈ":"LJ","ǉ":"lj","ǋ":"NJ","ǌ":"nj","Ș":"S","ș":"s","Ț":"T","ț":"t","ə":"e","˚":"o","Ά":"A","Έ":"E","Ή":"H","Ί":"I","Ό":"O","Ύ":"Y","Ώ":"W","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ϊ":"I","Ϋ":"Y","ά":"a","έ":"e","ή":"h","ί":"i","ΰ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","ς":"s","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ϊ":"i","ϋ":"y","ό":"o","ύ":"y","ώ":"w","Ё":"Yo","Ђ":"DJ","Є":"Ye","І":"I","Ї":"Yi","Ј":"J","Љ":"LJ","Њ":"NJ","Ћ":"C","Џ":"DZ","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"U","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"u","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","ё":"yo","ђ":"dj","є":"ye","і":"i","ї":"yi","ј":"j","љ":"lj","њ":"nj","ћ":"c","ѝ":"u","џ":"dz","Ґ":"G","ґ":"g","Ғ":"GH","ғ":"gh","Қ":"KH","қ":"kh","Ң":"NG","ң":"ng","Ү":"UE","ү":"ue","Ұ":"U","ұ":"u","Һ":"H","һ":"h","Ә":"AE","ә":"ae","Ө":"OE","ө":"oe","Ա":"A","Բ":"B","Գ":"G","Դ":"D","Ե":"E","Զ":"Z","Է":"E'","Ը":"Y'","Թ":"T'","Ժ":"JH","Ի":"I","Լ":"L","Խ":"X","Ծ":"C'","Կ":"K","Հ":"H","Ձ":"D'","Ղ":"GH","Ճ":"TW","Մ":"M","Յ":"Y","Ն":"N","Շ":"SH","Չ":"CH","Պ":"P","Ջ":"J","Ռ":"R'","Ս":"S","Վ":"V","Տ":"T","Ր":"R","Ց":"C","Փ":"P'","Ք":"Q'","Օ":"O''","Ֆ":"F","և":"EV","ء":"a","آ":"aa","أ":"a","ؤ":"u","إ":"i","ئ":"e","ا":"a","ب":"b","ة":"h","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ى":"a","ي":"y","ً":"an","ٌ":"on","ٍ":"en","َ":"a","ُ":"u","ِ":"e","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","پ":"p","چ":"ch","ژ":"zh","ک":"k","گ":"g","ی":"y","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","฿":"baht","ა":"a","ბ":"b","გ":"g","დ":"d","ე":"e","ვ":"v","ზ":"z","თ":"t","ი":"i","კ":"k","ლ":"l","მ":"m","ნ":"n","ო":"o","პ":"p","ჟ":"zh","რ":"r","ს":"s","ტ":"t","უ":"u","ფ":"f","ქ":"k","ღ":"gh","ყ":"q","შ":"sh","ჩ":"ch","ც":"ts","ძ":"dz","წ":"ts","ჭ":"ch","ხ":"kh","ჯ":"j","ჰ":"h","Ṣ":"S","ṣ":"s","Ẁ":"W","ẁ":"w","Ẃ":"W","ẃ":"w","Ẅ":"W","ẅ":"w","ẞ":"SS","Ạ":"A","ạ":"a","Ả":"A","ả":"a","Ấ":"A","ấ":"a","Ầ":"A","ầ":"a","Ẩ":"A","ẩ":"a","Ẫ":"A","ẫ":"a","Ậ":"A","ậ":"a","Ắ":"A","ắ":"a","Ằ":"A","ằ":"a","Ẳ":"A","ẳ":"a","Ẵ":"A","ẵ":"a","Ặ":"A","ặ":"a","Ẹ":"E","ẹ":"e","Ẻ":"E","ẻ":"e","Ẽ":"E","ẽ":"e","Ế":"E","ế":"e","Ề":"E","ề":"e","Ể":"E","ể":"e","Ễ":"E","ễ":"e","Ệ":"E","ệ":"e","Ỉ":"I","ỉ":"i","Ị":"I","ị":"i","Ọ":"O","ọ":"o","Ỏ":"O","ỏ":"o","Ố":"O","ố":"o","Ồ":"O","ồ":"o","Ổ":"O","ổ":"o","Ỗ":"O","ỗ":"o","Ộ":"O","ộ":"o","Ớ":"O","ớ":"o","Ờ":"O","ờ":"o","Ở":"O","ở":"o","Ỡ":"O","ỡ":"o","Ợ":"O","ợ":"o","Ụ":"U","ụ":"u","Ủ":"U","ủ":"u","Ứ":"U","ứ":"u","Ừ":"U","ừ":"u","Ử":"U","ử":"u","Ữ":"U","ữ":"u","Ự":"U","ự":"u","Ỳ":"Y","ỳ":"y","Ỵ":"Y","ỵ":"y","Ỷ":"Y","ỷ":"y","Ỹ":"Y","ỹ":"y","–":"-","‘":"'","’":"'","“":"\\"","”":"\\"","„":"\\"","†":"+","•":"*","…":"...","₠":"ecu","₢":"cruzeiro","₣":"french franc","₤":"lira","₥":"mill","₦":"naira","₧":"peseta","₨":"rupee","₩":"won","₪":"new shequel","₫":"dong","€":"euro","₭":"kip","₮":"tugrik","₯":"drachma","₰":"penny","₱":"peso","₲":"guarani","₳":"austral","₴":"hryvnia","₵":"cedi","₸":"kazakhstani tenge","₹":"indian rupee","₺":"turkish lira","₽":"russian ruble","₿":"bitcoin","℠":"sm","™":"tm","∂":"d","∆":"delta","∑":"sum","∞":"infinity","♥":"love","元":"yuan","円":"yen","﷼":"rial","ﻵ":"laa","ﻷ":"laa","ﻹ":"lai","ﻻ":"la"}`),s=JSON.parse('{"bg":{"Й":"Y","Ц":"Ts","Щ":"Sht","Ъ":"A","Ь":"Y","й":"y","ц":"ts","щ":"sht","ъ":"a","ь":"y"},"de":{"Ä":"AE","ä":"ae","Ö":"OE","ö":"oe","Ü":"UE","ü":"ue","ß":"ss","%":"prozent","&":"und","|":"oder","∑":"summe","∞":"unendlich","♥":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","¢":"centavos","£":"libras","¤":"moneda","₣":"francos","∑":"suma","∞":"infinito","♥":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","¢":"centime","£":"livre","¤":"devise","₣":"franc","∑":"somme","∞":"infini","♥":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","¢":"centavo","∑":"soma","£":"libra","∞":"infinito","♥":"amor"},"uk":{"И":"Y","и":"y","Й":"Y","й":"y","Ц":"Ts","ц":"ts","Х":"Kh","х":"kh","Щ":"Shch","щ":"shch","Г":"H","г":"h"},"vi":{"Đ":"D","đ":"d"},"da":{"Ø":"OE","ø":"oe","Å":"AA","å":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"større end"},"nb":{"&":"og","Å":"AA","Æ":"AE","Ø":"OE","å":"aa","æ":"ae","ø":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","Å":"AA","Ä":"AE","Ö":"OE","å":"aa","ä":"ae","ö":"oe"}}');function r(i,o){if(typeof i!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var a=s[o.locale]||{},u=o.replacement===void 0?"-":o.replacement,c=o.trim===void 0?!0:o.trim,l=i.normalize().split("").reduce(function(f,h){var d=a[h];return d===void 0&&(d=e[h]),d===void 0&&(d=h),d===u&&(d=" "),f+d.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(l=l.replace(/[^A-Za-z0-9\s]/g,"")),c&&(l=l.trim()),l=l.replace(/\s+/g,u),o.lower&&(l=l.toLowerCase()),l}return r.extend=function(i){Object.assign(e,i)},r})}(xr)),xr.exports}var Ff=Rf();const d1=en(Ff);function dn(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var kr={exports:{}};kr.exports;var Rs;function Ln(){return Rs||(Rs=1,function(n){(function(){function t(s,r){return r?dn(s):s.slice?t[i(s)]:function(o,a){s(o={exports:{}}),t[i(a)]=o.exports};function i(o){return o.split("/").slice(-1).toString().replace(".js","")}}var e=n;t(function(s){String.random=function(i,o){var a="";for(i=i||24,o=o||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";i-- >0;)a+=o.charAt(Math.floor(Math.random()*o.length));return a},String.match=function(i,o){var a,u;return typeof i!="string"?!1:(typeof o=="string"&&(o={"=":o}),o=o||{},a=o["="]||o["*"]||o[">"]||o["<"],i===a?!0:u!==o["="]?!1:(a=o["*"]||o[">"],i.slice(0,(a||"").length)===a?!0:u!==o["*"]?!1:u!==o[">"]&&u!==o["<"]?i>=o[">"]&&i<=o["<"]:u!==o[">"]&&i>=o[">"]||u!==o["<"]&&i<=o["<"]))},String.hash=function(i,o){if(typeof i=="string"){if(o=o||0,!i.length)return o;for(var a=0,u=i.length,c;a<u;++a)c=i.charCodeAt(a),o=(o<<5)-o+c,o|=0;return o}};var r=Object.prototype.hasOwnProperty;Object.plain=function(i){return i?i instanceof Object&&i.constructor===Object||Object.prototype.toString.call(i).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(i,o){for(var a in i)if(r.call(i,a)&&(!o||o.indexOf(a)==-1))return!1;return!0},Object.keys=Object.keys||function(i){var o=[];for(var a in i)r.call(i,a)&&o.push(a);return o},function(){var i,o=setTimeout,a=0,u=0,c=typeof setImmediate!=""+i&&setImmediate||function(f,h){return typeof MessageChannel==""+i?o:((f=new MessageChannel).port1.onmessage=function(d){d.data==""&&h()},function(d){h=d,f.port2.postMessage("")})}(),l=o.check=o.check||typeof performance!=""+i&&performance||{now:function(){return+new Date}};o.hold=o.hold||9,o.poll=o.poll||function(f){if(o.hold>=l.now()-a&&u++<3333){f();return}c(function(){a=l.now(),f()},u=0)}}(),function(){var i=setTimeout,o=i.turn=i.turn||function(h){a.push(h)==1&&u(f)},a=o.s=[],u=i.poll,c=0,l,f=function(){(l=a[c++])&&l(),(c==a.length||c==99)&&(a=o.s=a.slice(c),c=0),a.length&&u(f)}}(),function(){var i,o=setTimeout,a=o.turn;(o.each=o.each||function(u,c,l,f){f=f||9,function h(d,p,g){if(p=(d=(u||[]).splice(0,f)).length){for(var b=0;b<p&&i===(g=c(d[b]));b++);if(i===g){a(h);return}}l&&l(g)}()})()}()})(t,"./shim"),t(function(s){s.exports=function r(l,o,a){if(!l)return{to:r};var u,c=typeof o=="function",l=(this.tag||(this.tag={}))[l]||c&&(this.tag[l]={tag:l,to:r._={next:function(h){var d;(d=this.to)&&d.next(h)}}});if(c){var f={off:r.off||(r.off=function(){if(this.next===r._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=r._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:r._,next:o,the:l,on:this,as:a};return(f.back=l.last||l).to=f,l.last=f}return(l=l.to)&&u!==o&&l.next(o),l}})(t,"./onto"),t(function(s){s.exports=function(r){return r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"&&r!=1/0&&r!=-1/0&&r===r||!!r&&typeof r["#"]=="string"&&Object.keys(r).length===1&&r["#"]}})(t,"./valid"),t(function(s){t("./shim");function r(){var l=+new Date;return u<l?(o=0,u=l+r.drift):u=l+(o+=1)/a+r.drift}r.drift=0;var i=-1/0,o=0,a=999,u=i,c;r.is=function(l,f,h){var d=f&&l&&l._&&l._[">"]||h;if(d)return typeof(d=d[f])=="number"?d:i},r.ify=function(l,f,h,d,p){(l=l||{})._=l._||{},p&&(l._["#"]=p);var g=l._[">"]||(l._[">"]={});return c!==f&&f!=="_"&&(typeof h=="number"&&(g[f]=h),c!==d&&(l[f]=d)),l},s.exports=r})(t,"./state"),t(function(s){t("./shim");function r(i){var o={s:{}},a=o.s;i=i||{max:999,age:1e3*9},o.check=function(c){return a[c]?u(c):!1};var u=o.track=function(c){var l=a[c]||(a[c]={});return l.was=o.now=+new Date,o.to||(o.to=setTimeout(o.drop,i.age+9)),u.ed&&u.ed(c),l};return o.drop=function(c){o.to=null,o.now=+new Date;var l=Object.keys(a);console.STAT&&console.STAT(o.now,+new Date-o.now,"dup drop keys"),setTimeout.each(l,function(f){var h=a[f];h&&(c||i.age)>o.now-h.was||delete a[f]},0,99)},o}s.exports=r})(t,"./dup"),t(function(s){t("./onto"),s.exports=function(o,a){if(this.on){var u=(this.opt||{}).lack||9e3;if(typeof o!="function"){if(!o)return;var l=o["#"]||o,c=(this.tag||"")[l];return c?(a&&(c=this.on(l,a),clearTimeout(c.err),c.err=setTimeout(function(){c.off()},u)),!0):void 0}var l=a&&a["#"]||r(9);if(!o)return l;var f=this.on(l,o,a);return f.err=f.err||setTimeout(function(){f.off(),f.next({err:"Error: No ACK yet.",lack:!0})},u),l}};var r=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(s){function r(p){return p instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:p}):new r(p)}r.is=function(p){return p instanceof r||p&&p._&&p===p._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},t("./shim"),r.valid=t("./valid"),r.state=t("./state"),r.on=t("./onto"),r.dup=t("./dup"),r.ask=t("./ask"),function(){r.create=function(S){S.root=S.root||S,S.graph=S.graph||{},S.on=S.on||r.on,S.ask=S.ask||r.ask,S.dup=S.dup||r.dup();var x=S.$.opt(S.opt);return S.once||(S.on("in",p,S),S.on("out",p,S),S.on("put",y,S),r.on("create",S),S.on("create",S)),S.once=1,x};function p(S){if(S){if(S.out===p){this.to.next(S);return}var x=this,j=x.as,D=j.at||j,C=D.$,R=D.dup,N,z=S.DBG;if((N=S["#"])||(N=S["#"]=o(9)),!R.check(N)){if(R.track(N),N=S._,S._=typeof N=="function"?N:function(){},S.$&&S.$===(S.$._||"").$||(S.$=C),S["@"]&&!S.put&&_(S),!D.ask(S["@"],S))if(z&&(z.u=+new Date),S.put){g(S);return}else S.get&&r.on.get(S,C);z&&(z.uc=+new Date),x.to.next(S),z&&(z.ua=+new Date),!(S.nts||S.NTS)&&(S.out=p,D.on("out",S),z&&(z.ue=+new Date))}}}function g(S){if(S){var x=S._||"",j=x.root=((x.$=S.$||"")._||"").root;if(S["@"]&&x.faith&&!x.miss){S.out=p,j.on("out",S);return}x.latch=j.hatch,x.match=j.hatch=[];var D=S.put,C=x.DBG=S.DBG,R=+new Date;if(F=F||R,!(D["#"]&&D["."])){C&&(C.p=R),x["#"]=S["#"],x.msg=S,x.all=0,x.stun=1;var N=Object.keys(D);console.STAT&&console.STAT(R,((C||x).pk=+new Date)-R,"put sort");var z=0,M,U,tt,X,Z,gt,Et;(function ft(pt){if(M!=z){if(M=z,!(tt=N[z])){console.STAT&&console.STAT(R,((C||x).pd=+new Date)-R,"put"),m(x);return}(X=D[tt])?(Et=X._)?tt!==Et["#"]?gt=v+A(tt)+"soul not same.":(Z=Et[">"])||(gt=v+A(tt)+"no state."):gt=v+A(tt)+"no meta.":gt=v+A(tt)+"no node.",U=Object.keys(X||{})}if(gt){S.err=x.err=gt,m(x);return}var vt=0,yt;for(pt=pt||0;pt++<9&&(yt=U[vt++]);)if(yt!=="_"){var Ot=X[yt],zt=Z[yt];if(f===zt){gt=v+A(yt)+"on"+A(tt)+"no state.";break}if(!u(Ot)){gt=v+A(yt)+"on"+A(tt)+"bad "+typeof Ot+A(Ot);break}b(Ot,yt,tt,zt,S),++I}if((U=U.slice(vt)).length){a(ft);return}++z,U=null,ft(pt)})()}}}r.on.put=g;function b(S,x,j,D,C){var R=C._||"",N=R.root,z=N.graph,M,U=z[j]||h,tt=c(U,x,1),X=U[x],Z=R.DBG;(M=console.STAT)&&(!z[j]||!X)&&(M.has=(M.has||0)+1);var gt=T();if(D>gt){setTimeout(function(){b(S,x,j,D,C)},(M=D-gt)>P?P:M),console.STAT&&console.STAT((Z||R).Hf=+new Date,M,"future");return}if(!(D<tt)&&!(!R.faith&&D===tt&&(S===X||E(S)<=E(X))&&!R.miss)){R.stun++;var Et=C["#"]+R.all++,ft={toString:function(){return Et},_:R};ft.toJSON=ft.toString,N.dup.track(ft)["#"]=C["#"],Z&&(Z.ph=Z.ph||+new Date),N.on("put",{"#":ft,"@":C["@"],put:{"#":j,".":x,":":S,">":D},ok:C.ok,_:R})}}function y(S){var x;(x=(S._||"").DBG)&&(x.pa=+new Date,x.pm=x.pm||+new Date);var j=this,D=j.as,C=D.graph,R=S._,N=S.put,z=N["#"],M=N["."],U=N[":"],tt=N[">"];S["#"];var X;(X=R.msg)&&(X=X.put)&&(X=X[z])&&l(X,M,tt,U,z),C[z]=l(C[z],M,tt,U,z),(X=(D.next||"")[z])&&X.on("in",S),m(R),j.to.next(S)}function m(S,x){var j;if(!S.stop&&!(!S.err&&0<--S.stun)&&(S.stop=1,!!(j=S.root))){var D=S.match;D.end=1,D===j.hatch&&(!(D=S.latch)||D.end?delete j.hatch:j.hatch=D),S.hatch&&S.hatch(),setTimeout.each(S.match,function(C){C&&C()}),!(!(x=S.msg)||S.err||x.err)&&(x.out=p,S.root.on("out",x),k())}}function _(S){var x=S["@"]||"",j;if(!(j=x._)){var D=(D=S.$)&&(D=D._)&&(D=D.root)&&(D=D.dup);if(!(D=D.check(x)))return;S["@"]=D["#"]||S["@"];return}j.acks=(j.acks||0)+1,(j.err=S.err)&&(S["@"]=j["#"],m(j)),j.ok=S.ok||j.ok,!j.stop&&!j.crack&&(j.crack=j.match&&j.match.push(function(){w(j)})),w(j)}function w(S){!S||!S.root||S.stun||S.acks!==S.all||S.root.on("in",{"@":S["#"],err:S.err,ok:S.err?f:S.ok||{"":1}})}var v="Error: Invalid graph!",A=function(S){return" '"+(""+S).slice(0,9)+"...' "},E=JSON.stringify,P=2147483647,T=r.state,I=0,F,k=function(){I>999&&I/-(F-(F=+new Date))>1&&(r.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),k=function(){I=0})}}(),function(){r.on.get=function(g,b){var y=b._,m=g.get,_=m["#"],w=y.graph[_],v=m["."],A=y.next||(y.next={}),E=A[_],P=g._||{},T=P.DBG=g.DBG;if(T&&(T.g=+new Date),!w)return y.on("get",g);if(v){if((typeof v!="string"||f===w[v])&&!((E||"").next||"")[v]){y.on("get",g);return}w=l({},v,c(w,v),w[v],_)}w&&p(g,w),y.on("get",g)};function p(g,b){var y=+new Date,m=g._||{},_=m.DBG=g.DBG,w=g["#"],v=o(9),A=Object.keys(b||"").sort(),E=((b||"")._||"")["#"];A.length;var P=g.$._.root,T=b===P.graph[E];console.STAT&&console.STAT(y,((_||m).gk=+new Date)-y,"got keys"),b&&function I(){y=+new Date;for(var F=0,k,S={},x;F<9&&(k=A[F++]);)l(S,k,c(b,k),b[k],E);A=A.slice(F),(x={})[E]=S,S=x;var j;T&&(j=function(){},j.ram=j.faith=!0),x=A.length,console.STAT&&console.STAT(y,-(y-(y=+new Date)),"got copied some"),_&&(_.ga=+new Date),P.on("in",{"@":w,"#":v,put:S,"%":x?v=o(9):f,$:P.$,_:j,DBG:_,FOO:1}),console.STAT&&console.STAT(y,+new Date-y,"got in"),x&&setTimeout.turn(I)}(),b||P.on("in",{"@":g["#"]})}r.on.get.ack=p}(),function(){r.chain.opt=function(p){p=p||{};var g=this,b=g._,y=p.peers||p;return Object.plain(p)||(p={}),Object.plain(b.opt)||(b.opt=p),typeof y=="string"&&(y=[y]),Object.plain(b.opt.peers)||(b.opt.peers={}),y instanceof Array&&(p.peers={},y.forEach(function(m){var _={};_.id=_.url=m,p.peers[m]=b.opt.peers[m]=b.opt.peers[m]||_})),i(p,function m(_){var w=this[_];if(this&&this.hasOwnProperty(_)||typeof w=="string"||Object.empty(w)){this[_]=w;return}w&&w.constructor!==Object&&!(w instanceof Array)||i(w,m)}),b.opt.from=p,r.on("opt",b),b.opt.uuid=b.opt.uuid||function(_){return r.state().toString(36).replace(".","")+String.random(_||12)},g}}();var i=function(p,g){Object.keys(p).forEach(g,p)},o=String.random,a=setTimeout.turn,u=r.valid,c=r.state.is,l=r.state.ify,f,h={},d;r.log=function(){return!r.log.off&&d.log.apply(d,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(p,g,b){return(b=r.log.once)[p]=b[p]||0,b[p]++||r.log(g)},typeof window<"u"&&((window.GUN=window.Gun=r).window=window);try{typeof e<"u"&&(e.exports=r)}catch{}s.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(d=console).only=function(p,g){return d.only.i&&p===d.only.i&&d.only.i++&&(d.log.apply(d,arguments)||g)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(s){var r=t("./root");r.chain.back=function(a,u){var c;if(a=a||1,a===-1||a===1/0)return this._.root.$;if(a===1)return(this._.back||this._).$;var l=this,f=l._;if(typeof a=="string"&&(a=a.split(".")),a instanceof Array){var h=0,d=a.length,c=f;for(h;h<d;h++)c=(c||i)[a[h]];return o!==c?u?l:c:(c=f.back)?c.$.back(a,u):void 0}if(typeof a=="function"){for(var p,c={back:f};(c=c.back)&&o===(p=a(c,u)););return p}return typeof a=="number"?(f.back||f).$.back(a-1):this};var i={},o})(t,"./back"),t(function(s){var r=t("./root");r.chain.chain=function(m){var _=this,w=_._,v=new(m||_).constructor(_),A=v._,E;return A.root=E=w.root,A.id=++E.once,A.back=_._,A.on=r.on,A.on("in",r.on.in,A),A.on("out",r.on.out,A),v};function i(m){var _,w=this.as,v=w.back,A=w.root,E;if(m.$||(m.$=w.$),this.to.next(m),w.err){w.on("in",{put:w.put=f,$:w.$});return}if(_=m.get){if(A.pass&&(A.pass[w.id]=w),w.lex&&Object.keys(w.lex).forEach(function(P){E[P]=w.lex[P]},E=m.get=m.get||{}),_["#"]||w.soul){if(_["#"]=_["#"]||w.soul,m["#"]||(m["#"]=h(9)),v=A.$.get(_["#"])._,_=_["."]){if(p(v.put,_)&&(E=v.ask&&v.ask[_],(v.ask||(v.ask={}))[_]=v.$.get(_)._,v.on("in",{get:_,put:{"#":v.soul,".":_,":":v.put[_],">":b(A.graph[v.soul],_)}}),E))return}else{if(E=v.ask&&v.ask[""],(v.ask||(v.ask={}))[""]=v,f!==v.put&&(v.on("in",v),E))return;m.$=v.$}return A.ask(c,m),A.on("in",m)}if(_["."])return w.get?(m={get:{".":w.get},$:w.$},(v.ask||(v.ask={}))[w.get]=m.$._,v.on("out",m)):(m={get:w.lex?m.get:{},$:w.$},v.on("out",m));if((w.ask||(w.ask={}))[""]=w,w.get)return _["."]=w.get,(v.ask||(v.ask={}))[w.get]=m.$._,v.on("out",m)}return v.on("out",m)}r.on.out=i;function o(m,_){_=_||this.as;var w=_.root,v=m.$||(m.$=_.$),A=(v||"")._||l,E=m.put||"",P=E["#"],T=E["."],I=f!==E["="]?E["="]:E[":"],F=E[">"]||-1/0,k;if(f!==m.put&&(f===E["#"]||f===E["."]||f===E[":"]&&f===E["="]||f===E[">"])){if(!d(E)){if(!(P=((E||"")._||"")["#"])){console.log("chain not yet supported for",E,"...",m,_);return}return v=_.root.$.get(P),setTimeout.each(Object.keys(E).sort(),function(S){S=="_"||f===(F=b(E,S))||_.on("in",{$:v,put:{"#":P,".":S,"=":E[S],">":F},VIA:m})})}_.on("in",{$:A.back.$,put:{"#":P=A.back.soul,".":T=A.has||A.get,"=":E,">":b(A.back.put,T)},via:m});return}(m.seen||"")[_.id]||((m.seen||(m.seen=function(){}))[_.id]=_,_!==A&&(Object.keys(m).forEach(function(S){E[S]=m[S]},E={}),E.get=_.get||E.get,!_.soul&&!_.has?E.$$$=E.$$$||_.$:A.soul&&(E.$=_.$,E.$$=E.$$||A.$),m=E),u(m,_),(_.soul||m.$$)&&F>=b(w.graph[P],T)&&((E=w.$.get(P)._).put=y(E.put,T,F,I,P)),!A.soul&&F>=b(w.graph[P],T)&&(k=(w.$.get(P)._.next||"")[T])&&(k.put=I,typeof(E=d(I))=="string"&&(k.put=w.$.get(E)._.put||I)),this.to&&this.to.next(m),_.any&&setTimeout.each(Object.keys(_.any),function(S){(S=_.any[S])&&S(m)},0,99),_.echo&&setTimeout.each(Object.keys(_.echo),function(S){(S=_.echo[S])&&S.on("in",m)},0,99),((m.$$||"")._||A).soul&&(k=_.next)&&(k=k[T])&&(E={},Object.keys(m).forEach(function(S){E[S]=m[S]}),E.$=(m.$$||m.$).get(E.get=T),delete E.$$,delete E.$$$,k.on("in",E)),a(m,_))}r.on.in=o;function a(m,_){if(_=_||this.as||m.$._,!(m.$$&&this!==r.on)&&!(!m.put||_.soul)){var w=m.put||"",v=w["="]||w[":"],T,A=_.root,E=A.$.get(w["#"]).get(w["."])._;if(typeof(v=d(v))!="string"){this===r.on&&((E.echo||(E.echo={}))[_.id]=_);return}if(!((E.echo||(E.echo={}))[_.id]&&!(A.pass||"")[_.id])){if(T=A.pass){if(T[v+_.id])return;T[v+_.id]=1}(E.echo||(E.echo={}))[_.id]=_,_.has&&(_.link=v);var P=A.$.get(E.link=v)._;(P.echo||(P.echo={}))[E.id]=E;var T=_.ask||"";(T[""]||_.lex)&&P.on("out",{get:{"#":v}}),setTimeout.each(Object.keys(T),function(I,F){!I||!(F=T[I])||F.on("out",{get:{"#":v,".":I}})},0,99)}}}r.on.link=a;function u(m,_){var w=m.put||"",v=f!==w["="]?w["="]:w[":"],A=_.root,E,P;if(f===v){if(_.soul&&f!==_.put||(P=(m.$$||m.$||"")._||"",m["@"]&&(f!==P.put||f!==_.put)))return;(E=_.link||m.linked)&&delete(A.$.get(E)._.echo||"")[_.id],_.has&&(_.link=null),_.put=f,setTimeout.each(Object.keys(_.next||""),function(T,I){(I=_.next[T])&&(E&&delete(A.$.get(E).get(T)._.echo||"")[I.id],I.on("in",{get:T,put:f,$:I.$}))},0,99);return}_.soul||m.$$||(E=d(v),P=m.$._||"",!((E===P.link||_.has&&!P.link)&&!((A.pass||"")[_.id]&&typeof E!="string"))&&(delete(P.echo||"")[_.id],u({get:_.get,put:f,$:m.$,linked:m.linked=m.linked||P.link},_)))}r.on.unlink=u;function c(m,_){var w=this.as,v=w.$._;v.root;var A=w.get||"",E=(m.put||"")[A["#"]]||"";if(!m.put||typeof A["."]=="string"&&f===E[A["."]]){if(f!==v.put||!v.soul&&!v.has)return;v.ack=(v.ack||0)+1,v.on("in",{get:v.get,put:v.put=f,$:v.$,"@":m["@"]});return}(m._||{}).miss=1,r.on.put(m)}var l={},f,h=String.random,d=r.valid,p=function(m,_){return m&&Object.prototype.hasOwnProperty.call(m,_)},g=r.state,b=g.is,y=g.ify})(t,"./chain"),t(function(s){var r=t("./root");r.chain.get=function(f,h,d){var p,g;if(typeof f=="string"){if(f.length==0)return(p=this.chain())._.err={err:r.log("0 length key!",f)},h&&h.call(p,p._.err),p;var b=this,y=b._,m=y.next||u;(p=m[f])||(p=f&&i(f,b)),p=p&&p.$}else if(typeof f=="function"){let P=function(T,I,F){if(!P.stun&&!((C=w.pass)&&!C[v])){var k=T.$._,S=(T.$$||"")._,x=(S||k).put,j=!k.has&&!k.soul,D={},C;if((j||l===x)&&(x=l===((C=T.put)||"")["="]?l===(C||"")[":"]?C:C[":"]:C["="]),typeof(C=r.valid(x))=="string"&&(x=l===(C=w.$.get(C)._.put)?_.not?l:x:C),!(_.not&&l===x)){if(l===_.stun){if((C=w.stun)&&C.on&&(y.$.back(function(R){if(C.on(""+R.id,D={}),(D.run||0)<P.id)return D}),!D.run&&C.on(""+k.id,D={}),!D.run&&S&&C.on(""+S.id,D={}),P.id>D.run&&((!D.stun||D.stun.end)&&(D.stun=C.on("stun"),D.stun=D.stun&&D.stun.last),D.stun&&!D.stun.end))){(D.stun.add||(D.stun.add={}))[v]=function(){P(T,I,1)};return}if(l===x&&(F=0),(C=w.hatch)&&!C.end&&l===_.hatch&&!F){if(A[k.$._.id])return;A[k.$._.id]=1,C.push(function(){P(T,I,1)});return}A={}}if(w.pass){if(w.pass[v+k.id])return;w.pass[v+k.id]=1}if(_.on){_.ok.call(k.$,x,k.get,T,I||P);return}if(_.v2020){_.ok(T,I||P);return}Object.keys(T).forEach(function(R){C[R]=T[R]},C={}),T=C,T.put=x,_.ok.call(_.as,T,I||P)}}};if(h===!0)return o(this,f,h,d),this;p=this;var y=p._,_=h||{},w=y.root,v;_.at=y,_.ok=f;var A={};return P.at=y,(y.any||(y.any={}))[v=String.random(7)]=P,P.off=function(){P.stun=1,y.any&&delete y.any[v]},P.rid=a,P.id=_.run||++w.once,g=w.pass,(w.pass={})[v]=1,_.out=_.out||{get:{}},y.on("out",_.out),w.pass=g,p}else{if(typeof f=="number")return this.get(""+f,h,d);if(typeof(g=c(f))=="string")return this.get(g,h,d);(g=this.get.next)&&(p=g(this,f))}return p?(h&&typeof h=="function"&&p.get(h,d),p):((p=this.chain())._.err={err:r.log("Invalid get request!",f)},h&&h.call(p,p._.err),p)};function i(f,h){var d=h._,p=d.next,g=h.chain(),b=g._;return p||(p=d.next={}),p[b.get=f]=b,h===d.root.$?b.soul=f:(d.soul||d.has)&&(b.has=f),b}function o(f,h,d,p){var g=f._,b=0,y;return(y=g.soul||g.link)?h(y,p,g):g.jam?g.jam.push([h,p]):(g.jam=[[h,p]],f.get(function(_,w){if(!(l===_.put&&!g.root.opt.super&&(y=Object.keys(g.root.opt.peers).length)&&++b<=y)){w.rid(_);var v=(v=_.$)&&v._||{},A=0,E;for(y=g.jam,delete g.jam;E=y[A++];){var P=E[0];E=E[1],P&&P(v.link||v.soul||r.valid(_.put)||((_.put||{})._||{})["#"],E,_,w)}}},{out:{get:{".":!0}}}),f)}function a(f){var h=this.at||this.on;if(!f||h.soul||h.has)return this.off();if(f=(f=(f=f.$||f)._||f).id){h.map;var d;if((d=this.seen||(this.seen={}))[f])return!0;d[f]=!0}}var u={},c=r.valid,l})(t,"./get"),t(function(s){var r=t("./root");r.chain.put=function(p,g,b){var y=this,m=y._,_=m.root;b=b||{},b.root=m.root,b.run||(b.run=_.once),i(b,m.id),b.ack=b.ack||g,b.via=b.via||y,b.data=b.data||p,b.soul||(b.soul=m.soul||typeof g=="string"&&g);var w=b.state=b.state||r.state();return typeof p=="function"?(p(function(v){b.data=v,y.put(c,c,b)}),y):b.soul?(b.$=_.$.get(b.soul),b.todo=[{it:b.data,ref:b.$}],b.turn=b.turn||f,b.ran=b.ran||o,function v(){var A=b.todo,E=A.pop(),P=E.it;E.ref&&E.ref._.id;var T,I,F,k,S;if(i(b,E.ref),(k=E.todo)&&(I=k.pop(),P=P[I],k.length&&A.push(E)),I&&(A.path||(A.path=[])).push(I),!(T=h(P))&&!(S=r.is(P))){if(!Object.plain(P)){o.err(b,"Invalid data: "+u(P)+" at "+(b.via.back(function(C){C.get&&k.push(C.get)},k=[])||k.join("."))+"."+(A.path||[]).join("."));return}for(var x=b.seen||(b.seen=[]),j=x.length;j--;)if(P===(k=x[j]).it){T=P=k.link;break}}if(I&&T)E.node=d(E.node,I,w,P);else{let C=function(R,N){var z=F.link["#"];N&&(N.off(),N.rid(R));var M=z||R.soul||(k=(R.$$||R.$)._||"").soul||k.link||((k=k.put||"")._||"")["#"]||k["#"]||((k=R.put||"")&&R.$$?k["#"]:(k["="]||k[":"]||"")["#"]);if(!z&&i(b,R.$),!M&&!E.link["#"]){(E.wait||(E.wait=[])).push(function(){C(R,N)});return}M||(M=[],(R.$$||R.$).back(function(U){if(k=U.soul||U.link)return M.push(k);M.push(U.get)}),M=M.reverse().join("/")),F.link["#"]=M,!S&&(((b.graph||(b.graph={}))[M]=F.node||(F.node={_:{}}))._["#"]=M),delete b.wait[D],F.wait&&setTimeout.each(F.wait,function(U){U&&U()}),b.ran(b)};if(!b.seen){o.err(b,"Data at root of graph must be a node (an object).");return}b.seen.push(F={it:P,link:{},todo:S?[]:Object.keys(P).sort().reverse(),path:(A.path||[]).slice(),up:E}),E.node=d(E.node,I,w,F.link),!S&&F.todo.length&&A.push(F);var D=b.seen.length;(b.wait||(b.wait={}))[D]="",k=(F.ref=S?P:I?E.ref.get(I):E.ref)._,(k=P&&(P._||"")["#"]||k.soul||k.link)?C({soul:k}):F.ref.get(C,{run:b.run,v2020:1,out:{get:{".":" "}}})}if(!A.length)return b.ran(b);b.turn(v)}(),y):(a(b),y)};function i(p,g){if(g){g=(g._||"").id||g;var b=p.root.stun||(p.root.stun={on:r.on}),y={},m;p.stun||(p.stun=b.on("stun",function(){})),(m=b.on(""+g))&&m.the.last.next(y),!(y.run>=p.run)&&b.on(""+g,function(_){if(p.stun.end){this.off(),this.to.next(_);return}_.run=_.run||p.run,_.stun=_.stun||p.stun})}}function o(p){if(p.err){o.end(p.stun,p.root);return}if(!(p.todo.length||p.end||!Object.empty(p.wait))){p.end=1;var g=p.$.back(-1)._,b=g.root,y=g.ask(function(v){b.on("ack",v),v.err&&!v.lack&&r.log(v),++m>(p.acks||0)&&this.off(),p.ack&&p.ack(v,this)},p.opt),m=0,_=p.stun,w;(w=function(){_&&(o.end(_,b),setTimeout.each(Object.keys(_=_.add||""),function(v){(v=_[v])&&v()}))}).hatch=w,p.ack&&!p.ok&&(p.ok=p.acks||9),p.via._.on("out",{put:p.out=p.graph,ok:p.ok&&{"@":p.ok+1},opt:p.opt,"#":y,_:w})}}o.end=function(p,g){p.end=l,p.the.to===p&&p===p.the.last&&delete g.stun,p.off()},o.err=function(p,g){(p.ack||l).call(p,p.out={err:p.err=r.log(g)}),p.ran(p)};function a(p){var g=p.via._,b;p.via=p.via.back(function(y){if(y.soul||!y.get)return y.$;b=p.data,(p.data={})[y.get]=b}),(!p.via||!p.via._.soul)&&(p.via=g.root.$.get(((p.data||"")._||"")["#"]||g.$.back("opt.uuid")())),p.via.put(p.data,p.ack,p)}function u(p,g){return p&&(g=p.constructor)&&g.name||typeof p}var c,l=function(){},f=setTimeout.turn,h=r.valid,d=r.state.ify})(t,"./put"),t(function(s){var r=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),s.exports=r})(t,"./index"),t(function(s){var r=t("./index");r.chain.on=function(a,u,c,l){var f=this,h=f._;h.root;var d;if(typeof a=="string")return u?(d=h.on(a,u,c||h,l),c&&c.$&&(c.subs||(c.subs=[])).push(d),f):h.on(a);var p=u;return(p=p===!0?{change:!0}:p||{}).not=1,p.on=1,f.get(a,p),f},r.chain.once=function(a,u){if(u=u||{},!a)return i(this);var c=this,l=c._,f=l.root;l.put;var h=String.random(7),d;return c.get(function(p,g,b,y){var m=this,_=m._,w=_.one||(_.one={});if(y.stun||w[h]==="")return;if((d=r.valid(p))===!0){v();return}if(typeof d=="string")return;clearTimeout((l.one||"")[h]),clearTimeout(w[h]),w[h]=setTimeout(v,u.wait||99);function v(A){if(!_.has&&!_.soul&&(_={put:p,get:g}),o===(d=_.put)&&(d=((b.$$||"")._||"").put),typeof r.valid(d)=="string"&&(d=f.$.get(d)._.put,d===o&&!A)){w[h]=setTimeout(function(){v(1)},u.wait||99);return}y.stun||w[h]!==""&&(w[h]="",(l.soul||l.has)&&y.off(),a.call(m,d,_.get),clearTimeout(w[h]))}},{on:1}),c};function i(a,u,c){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(c=a.chain())._.nix=a.once(function(l,f){c._.on("in",this._)}),c._.lex=a._.lex,c}r.chain.off=function(){var a=this,u=a._,c,l=u.back;if(l)return u.ack=0,(c=l.next)&&c[u.get]&&delete c[u.get],(c=l.any)&&(delete l.any,l.any={}),(c=l.ask)&&delete c[u.get],(c=l.put)&&delete c[u.get],(c=u.soul)&&delete l.root.graph[c],(c=u.map)&&Object.keys(c).forEach(function(f,h){h=c[f],h.link&&l.root.$.get(h.link).off()}),(c=u.next)&&Object.keys(c).forEach(function(f,h){h=c[f],h.$.off()}),u.on("off",{}),a};var o})(t,"./on"),t(function(s){var r=t("./index"),i=r.chain.get.next;r.chain.get.next=function(c,l){var f;return Object.plain(l)?(f=((f=l["#"])||"")["="]||f)?c.get(f):((f=c.chain()._).lex=l,c.on("in",function(h){String.match(h.get||(h.put||"")["."],l["."]||l["#"]||l)&&f.on("in",h),this.to.next(h)}),f.$):(i||a)(c,l)},r.chain.map=function(c,l,f){var h=this,d=h._,p,g;return Object.plain(c)&&(p=c["."]?c:{".":c},c=u),c?(r.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),g=h.chain(),h.map().on(function(b,y,m,_){var w=(c||a).call(this,b,y,m,_);if(u!==w){if(b===w)return g._.on("in",m);if(r.is(w))return g._.on("in",w._);var v={};Object.keys(m.put).forEach(function(A){v[A]=m.put[A]},v),v["="]=w,g._.on("in",{get:y,put:v})}}),g):((g=d.each)||((d.each=g=h.chain())._.lex=p||g._.lex||d.lex,g._.nix=h.back("nix"),h.on("in",o,g._)),g)};function o(c){this.to.next(c);var l=this.as,f=c.$,h=f._,d=c.put,p;!h.soul&&!c.$$||(p=l.lex)&&!String.match(c.get||(d||"")["."],p["."]||p["#"]||p)||r.on.link(c,l)}var a=function(){},u})(t,"./map"),t(function(s){var r=t("./index");r.chain.set=function(i,o,a){var u=this,c=u.back(-1),l,f;return o=o||function(){},a=a||{},a.item=a.item||i,(l=((i||"")._||"")["#"])&&((i={})["#"]=l),typeof(f=r.valid(i))=="string"?u.get(l=f).put(i,o,a):r.is(i)?(u.put(function(h){i.get(function(d,p,g){if(!d)return o.call(u,{err:r.log('Only a node can be linked! Not "'+g.put+'"!')});(f={})[d]={"#":d},h(f)},!0)}),i):(Object.plain(i)&&(i=c.get(l=u.back("opt.uuid")()).put(i)),u.get(l||c.back("opt.uuid")(7)).put(i,o,a))}})(t,"./set"),t(function(s){t("./shim");var r=function(){},i=JSON.parseAsync||function(c,l,f){var h,d=+new Date;try{l(h,JSON.parse(c,f),o.sucks(+new Date-d))}catch(p){l(p)}},o=JSON.stringifyAsync||function(c,l,f,h){var d,p=+new Date;try{l(d,JSON.stringify(c,f,h),o.sucks(+new Date-p))}catch(g){l(g)}};o.sucks=function(c){c>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),o.sucks=r)};function a(c){var l=function(){},f=c.opt||{};f.log=f.log||console.log,f.gap=f.gap||f.wait||0,f.max=f.max||(f.memory?f.memory*999*999:3e8)*.3,f.pack=f.pack||f.max*.01*.01,f.puff=f.puff||9;var h=setTimeout.turn||setTimeout,d=c.dup,p=d.check,g=d.track,b=l.hear=function(_,w){if(_){if(f.max<=_.length)return l.say({dam:"!",err:"Message too big!"},w);l===this&&(b.d+=_.length||0,++b.c);var v=w.SH=+new Date,A=_[0],E;if(A==="["){i(_,function(P,T){if(P||!T)return l.say({dam:"!",err:"DAM JSON parse error."},w);console.STAT&&console.STAT(+new Date,T.length,"# on hear batch");var I=f.puff;(function F(){for(var k=+new Date,S=0,x;S<I&&(x=T[S++]);)l.hear(x,w);T=T.slice(S),console.STAT&&console.STAT(k,+new Date-k,"hear loop"),y(w),T.length&&h(F,0)})()}),_="";return}if(A==="{"||(_["#"]||Object.plain(_))&&(E=_)){if(E)return b.one(E,w,v);i(_,function(P,T){if(P||!T)return l.say({dam:"!",err:"DAM JSON parse error."},w);b.one(T,w,v)});return}}};b.one=function(_,w,F){var A,E,P,T,I;if(_.DBG&&(_.DBG=I={DBG:_.DBG}),I&&(I.h=F),I&&(I.hp=+new Date),(A=_["#"])||(A=_["#"]=String.random(9)),!(P=p(A))&&(E=_["##"],!(E&&(P=_["@"]||_.get&&A)&&d.check(T=P+E)))){if((_._=function(){}).via=l.leap=w,(P=_["><"])&&typeof P=="string"&&P.slice(0,99).split(",").forEach(function(k){this[k]=1},_._.yo={}),P=_.dam){(P=l.hear[P])&&P(_,w,c),g(A);return}(P=_.ok)&&(_._.near=P["/"]);var F=+new Date;I&&(I.is=F),w.SI=A,g.ed=function(k){A===k&&(g.ed=0,(k=d.s[A])&&(k.via=w,_.get&&(k.it=_)))},c.on("in",l.last=_),I&&(I.hd=+new Date),console.STAT&&console.STAT(F,+new Date-F,_.get?"msg get":_.put?"msg put":"msg"),g(A),T&&g(T),l.leap=l.last=null}},b.c=b.d=0,function(){var _=0,w;l.hash=function(E,P){var T,I,F,k=+new Date;o(E.put,function S(x,j){var D=(I||(I=F=j||"")).slice(0,32768);if(T=String.hash(D,T),I=I.slice(32768),I){h(S,0);return}console.STAT&&console.STAT(k,+new Date-k,"say json+hash"),E._.$put=F,E["##"]=T,l.say(E,P),delete E._.$put},v)};function v(E,P){var T;return P instanceof Object?(Object.keys(P).sort().forEach(A,{to:T={},on:P}),T):P}function A(E){this.to[E]=this.on[E]}l.say=function(E,P){var T;if((T=this)&&(T=T.to)&&T.next&&T.next(E),!E)return!1;var I,F,k,S=E["@"],x=E._||(E._=function(){}),j=E.DBG,D=+new Date;if(x.y=x.y||D,P||j&&(j.y=D),(I=E["#"])||(I=E["#"]=String.random(9)),!w&&g(I),!(F=E["##"])&&u!==E.put&&!x.via&&S){l.hash(E,P);return}if(!P&&S&&(P=(T=d.s[S])&&(T.via||(T=T.it)&&(T=T._)&&T.via)||(T=l.last)&&S===T["#"]&&l.leap),!P&&S)return d.s[S]?void 0:(console.STAT&&console.STAT(+new Date,++_,"total no peer to ack to"),!1);if(S&&!E.put&&!F&&((d.s[S]||"").it||"")["##"])return!1;if(!P&&l.way)return l.way(E);if(j&&(j.yh=+new Date),!(k=x.raw)){l.raw(E,P);return}if(j&&(j.yr=+new Date),!P||!P.id){if(!Object.plain(P||f.peers))return!1;var D=+new Date;f.puff;var C=f.peers,R=Object.keys(P||f.peers||{});console.STAT&&console.STAT(D,+new Date-D,"peer keys"),function M(){var U=+new Date;w=1;var tt=x.raw;x.raw=k;for(var X=0,Z;X<9&&(Z=(R||"")[X++]);)(Z=C[Z]||(P||"")[Z])&&l.say(E,Z);x.raw=tt,w=0,R=R.slice(X),console.STAT&&console.STAT(U,+new Date-U,"say loop"),R.length&&(h(M,0),S&&g(S))}();return}if(!P.wire&&l.wire&&l.wire(P),I!==P.last){if(P.last=I,P===x.via||(T=x.yo)&&(T[P.url]||T[P.pid]||T[P.id]))return!1;if(console.STAT&&console.STAT(D,((j||x).yp=+new Date)-(x.y||D),"say prep"),!w&&S&&g(S),P.batch){if(P.tail=(T=P.tail||0)+k.length,P.tail<=f.pack){P.batch+=(T?",":"")+k;return}y(P)}P.batch="[";var N=+new Date;setTimeout(function(){console.STAT&&console.STAT(N,+new Date-N,"0ms TO"),y(P)},f.gap),m(k,P),console.STAT&&S===P.SI&&console.STAT(D,+new Date-P.SH,"say ack")}},l.say.c=l.say.d=0,l.raw=function(E,P){if(!E)return"";var T=E._||{},I,F;if(F=T.raw)return F;if(typeof E=="string")return E;var k=E["##"],S=E["@"];if(k&&S){if(!T.via&&p(S+k))return!1;if(F=(d.s[S]||"").it){if(k===F["##"])return!1;F["##"]||(F["##"]=k)}}if(!E.dam&&!E["@"]){var x=0,j=[];F=f.peers;for(var D in F){var C=F[D];if(j.push(C.url||C.pid||C.id),++x>6)break}x>1&&(E["><"]=j.join())}if(E.put&&(F=E.ok)&&(E.ok={"@":(F["@"]||1)-1,"/":F["/"]==E._.near?l.near:F["/"]}),I=T.$put){F={},Object.keys(E).forEach(function(N){F[N]=E[N]}),F.put=":])([:",o(F,function(N,z){if(!N){var M=+new Date;F=z.indexOf('"put":":])([:"'),R(u,z=z.slice(0,F+6)+I+z.slice(F+14)),console.STAT&&console.STAT(M,+new Date-M,"say slice")}});return}o(E,R);function R(N,z){N||(T.raw=z,l.say(E,P))}}}();function y(_){var w=_.batch,v=typeof w=="string";if(v&&(w+="]"),_.batch=_.tail=null,!!w&&!(v?3>w.length:!w.length)){if(!v)try{w=w.length===1?w[0]:JSON.stringify(w)}catch(A){return f.log("DAM JSON stringify error",A)}w&&m(w,_)}}function m(_,w){try{var v=w.wire;w.say?w.say(_):v.send&&v.send(_),l.say.d+=_.length||0,++l.say.c}catch{(w.queue=w.queue||[]).push(_)}}return l.near=0,l.hi=function(_){var w=_.wire,v;if(!w){l.wire(_.length&&{url:_,id:_}||_);return}_.id?f.peers[_.url||_.id]=_:(v=_.id=_.id||_.url||String.random(9),l.say({dam:"?",pid:c.opt.pid},f.peers[v]=_),delete d.s[_.last]),_.met||(l.near++,_.met=+new Date,c.on("hi",_)),v=_.queue,_.queue=[],setTimeout.each(v||[],function(A){m(A,_)},0,9)},l.bye=function(_){_.met&&--l.near,delete _.met,c.on("bye",_);var w=+new Date;w=w-(_.met||w),l.bye.time=((l.bye.time||w)+w)/2},l.hear["!"]=function(_,w){f.log("Error:",_.err)},l.hear["?"]=function(_,w){_.pid&&(w.pid||(w.pid=_.pid),_["@"])||(l.say({dam:"?",pid:f.pid,"@":_["#"]},w),delete d.s[w.last])},l.hear.mob=function(_,w){if(_.peers){var v=Object.keys(_.peers),A=v[Math.random()*v.length>>0];A&&(l.bye(w),l.hi(A))}},c.on("create",function(_){_.opt.pid=_.opt.pid||String.random(9),this.to.next(_),_.on("out",l.say)}),c.on("bye",function(_,w){_=f.peers[_.id||_]||_,this.to.next(_),_.bye?_.bye():(w=_.wire)&&w.close&&w.close(),delete f.peers[_.id],_.wire=null}),c.on("bye",function(_,w){this.to.next(_),(w=console.STAT)&&(w.peers=l.near),(w=_.url)&&setTimeout(function(){},f.lack||9e3)}),c.on("hi",function(_,w){if(this.to.next(_),(w=console.STAT)&&(w.peers=l.near),!f.super){var v=Object.keys(c.next||"");v.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(v,function(A){var E=c.next[A];if(f.super||(E.ask||"")[""]){l.say({get:{"#":A}},_);return}setTimeout.each(Object.keys(E.ask||""),function(P){P&&l.say({"##":String.hash((c.graph[A]||"")[P]),get:{"#":A,".":P}},_)})})}}),l}var u;try{s.exports=a}catch{}})(t,"./mesh"),t(function(s){var r=t("./index");r.Mesh=t("./mesh"),r.on("opt",function(o){if(this.to.next(o),o.once)return;var a=o.opt;if(a.WebSocket===!1)return;var u=r.window||{},c=a.WebSocket||u.WebSocket||u.webkitWebSocket||u.mozWebSocket;if(!c)return;a.WebSocket=c;var l=a.mesh=a.mesh||r.Mesh(o);l.wire||a.wire,l.wire=a.wire=f;function f(g){try{if(!g||!g.url)return y&&y(g);var b=g.url.replace(/^http/,"ws"),y=g.wire=new a.WebSocket(b);return y.onclose=function(){d(g),a.mesh.bye(g)},y.onerror=function(m){d(g)},y.onopen=function(){a.mesh.hi(g)},y.onmessage=function(m){m&&a.mesh.hear(m.data||m,g)},y}catch{a.mesh.bye(g)}}setTimeout(function(){!a.super&&o.on("out",{dam:"hi"})},1);var h=2*999;function d(g){clearTimeout(g.defer),a.peers[g.url]&&(p&&g.retry<=0||(g.retry=(g.retry||a.retry+1||60)-(-g.tried+(g.tried=+new Date)<h*4?1:0),g.defer=setTimeout(function b(){if(p&&p.hidden)return setTimeout(b,h);f(g)},h)))}var p=""+i!=typeof document&&document});var i})(t,"./websocket"),t(function(s){if(!(typeof Gun>"u")){var r=function(){},i;try{i=(Gun.window||r).localStorage}catch{}i||(Gun.log("Warning: No localStorage exists to persist data to!"),i={setItem:function(a,u){this[a]=u},removeItem:function(a){delete this[a]},getItem:function(a){return this[a]}});var o=JSON.stringifyAsync||function(a,u,c,l){var f;try{u(f,JSON.stringify(a,c,l))}catch(h){u(h)}};Gun.on("create",function a(u){this.to.next(u);var c=u.opt;u.graph;var l=[],f,h,d,p;if(c.localStorage===!1)return;c.prefix=c.file||"gun/";try{f=a[c.prefix]=a[c.prefix]||JSON.parse(d=i.getItem(c.prefix))||{}}catch{f=a[c.prefix]={}}d=(d||"").length,u.on("get",function(b){this.to.next(b);var y=b.get,m,_,w,v;!y||!(m=y["#"])||(_=f[m]||v,_&&(w=y["."])&&!Object.plain(w)&&(_=Gun.state.ify({},w,Gun.state.is(_,w),_[w],m)),Gun.on.get.ack(b,_))}),u.on("put",function(b){this.to.next(b);var y=b.put,m=y["#"],_=y["."],w=b["#"],v=b.ok||"";if(f[m]=Gun.state.ify(f[m],_,y[">"],y[":"],m),p&&d>4999880){u.on("in",{"@":w,err:"localStorage max!"});return}!b["@"]&&(!b._.via||Math.random()<v["@"]/v["/"])&&l.push(w),!h&&(h=setTimeout(g,9+d/333))});function g(){if(!l.length&&((setTimeout.turn||"").s||"").length){setTimeout(g,99);return}var b=l;clearTimeout(h),h=!1,l=[],o(f,function(y,m){try{!y&&i.setItem(c.prefix,m)}catch(_){y=p=_||"localStorage failure"}y&&(Gun.log(y+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),u.on("localStorage:error",{err:y,get:c.prefix,put:f})),d=m.length,setTimeout.each(b,function(_){u.on("in",{"@":_,err:y,ok:0})},0,99)})}})}})(t,"./localStorage")})(),function(){var F;if(""+F!=typeof Gun){var t=function(k){console.warn("Warning! Deprecated internal utility will break in next version:",k)},e=Gun;e.fn=e.fn||{is:function(k){return t("fn"),!!k&&typeof k=="function"}},e.bi=e.bi||{is:function(k){return t("bi"),k instanceof Boolean||typeof k=="boolean"}},e.num=e.num||{is:function(k){return t("num"),!s(k)&&(k-parseFloat(k)+1>=0||k===1/0||k===-1/0)}},e.text=e.text||{is:function(k){return t("text"),typeof k=="string"}},e.text.ify=e.text.ify||function(k){return t("text.ify"),e.text.is(k)?k:typeof JSON<"u"?JSON.stringify(k):k&&k.toString?k.toString():k},e.text.random=e.text.random||function(k,S){t("text.random");var x="";for(k=k||24,S=S||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";k>0;)x+=S.charAt(Math.floor(Math.random()*S.length)),k--;return x},e.text.match=e.text.match||function(k,S){var x,j;return t("text.match"),typeof k!="string"?!1:(typeof S=="string"&&(S={"=":S}),S=S||{},x=S["="]||S["*"]||S[">"]||S["<"],k===x?!0:j!==S["="]?!1:(x=S["*"]||S[">"]||S["<"],k.slice(0,(x||"").length)===x?!0:j!==S["*"]?!1:j!==S[">"]&&j!==S["<"]?k>=S[">"]&&k<=S["<"]:j!==S[">"]&&k>=S[">"]||j!==S["<"]&&k<=S["<"]))},e.text.hash=e.text.hash||function(k,S){if(t("text.hash"),typeof k=="string"){if(S=S||0,!k.length)return S;for(var x=0,j=k.length,D;x<j;++x)D=k.charCodeAt(x),S=(S<<5)-S+D,S|=0;return S}},e.list=e.list||{is:function(k){return t("list"),k instanceof Array}},e.list.slit=e.list.slit||Array.prototype.slice,e.list.sort=e.list.sort||function(k){return t("list.sort"),function(S,x){return!S||!x?0:(S=S[k],x=x[k],S<x?-1:S>x?1:0)}},e.list.map=e.list.map||function(k,S,x){return t("list.map"),T(k,S,x)},e.list.index=1,e.obj=e.boj||{is:function(k){return t("obj"),k?k instanceof Object&&k.constructor===Object||Object.prototype.toString.call(k).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},e.obj.put=e.obj.put||function(k,S,x){return t("obj.put"),(k||{})[S]=x,k},e.obj.has=e.obj.has||function(k,S){return t("obj.has"),k&&Object.prototype.hasOwnProperty.call(k,S)},e.obj.del=e.obj.del||function(k,S){if(t("obj.del"),!!k)return k[S]=null,delete k[S],k},e.obj.as=e.obj.as||function(k,S,x,j){return t("obj.as"),k[S]=k[S]||(j===x?{}:x)},e.obj.ify=e.obj.ify||function(k){if(t("obj.ify"),w(k))return k;try{k=JSON.parse(k)}catch{k={}}return k},function(){var k;function S(x,j){A(this,j)&&k!==this[j]||(this[j]=x)}e.obj.to=e.obj.to||function(x,j){return t("obj.to"),j=j||{},T(x,S,j),j}}(),e.obj.copy=e.obj.copy||function(k){return t("obj.copy"),k&&JSON.parse(JSON.stringify(k))},function(){function k(S,x){var j=this.n,D;if(!(j&&(x===j||w(j)&&A(j,x)))&&D!==x)return!0}e.obj.empty=e.obj.empty||function(S,x){return t("obj.empty"),S?!T(S,k,{n:x}):!0}}(),function(){function k(j,D){if(arguments.length===2){k.r=k.r||{},k.r[j]=D;return}k.r=k.r||[],k.r.push(j)}var S=Object.keys,x;Object.keys=Object.keys||function(j){return x(j,function(D,C,R){R(C)})},e.obj.map=x=e.obj.map||function(j,D,C){t("obj.map");var R,N=0,z,M,U,tt,X=typeof D=="function";if(k.r=R,S&&w(j)&&(U=S(j),tt=!0),C=C||{},s(j)||U)for(z=(U||j).length;N<z;N++){var Z=N+e.list.index;if(X){if(M=tt?D.call(C,j[U[N]],U[N],k):D.call(C,j[N],Z,k),M!==R)return M}else if(D===j[tt?U[N]:N])return U?U[N]:Z}else for(N in j)if(X){if(A(j,N)&&(M=C?D.call(C,j[N],N,k):D(j[N],N,k),M!==R))return M}else if(D===j[N])return N;return X?k.r:e.list.index?0:-1}}(),e.time=e.time||{},e.time.is=e.time.is||function(k){return t("time"),k?k instanceof Date:+new Date().getTime()};var m=e.fn.is,s=e.list.is,_=e.obj,w=_.is,A=_.has,T=_.map,r={};r.is=function(k){return t("val.is"),k===F?!1:k===null?!0:k===1/0?!1:a(k)||o(k)||p(k)?!0:r.link.is(k)||!1},r.link=r.rel={_:"#"},function(){r.link.is=function(S){if(t("val.link.is"),S&&S[i]&&!S._&&w(S)){var x={};if(T(S,k,x),x.id)return x.id}return!1};function k(S,x){var j=this;if(j.id)return j.id=!1;if(x==i&&a(S))j.id=S;else return j.id=!1}}(),r.link.ify=function(k){return t("val.link.ify"),P({},i,k)},e.obj.has._=".";var i=r.link._,F,o=e.bi.is,p=e.num.is,a=e.text.is,_=e.obj,w=_.is,P=_.put,T=_.map;e.val=e.val||r;var u={_:"_"};u.soul=function(k,S){return t("node.soul"),k&&k._&&k._[S||f]},u.soul.ify=function(k,S){return t("node.soul.ify"),S=typeof S=="string"?{soul:S}:S||{},k=k||{},k._=k._||{},k._[f]=S.soul||k._[f]||l(),k},u.soul._=r.link._,function(){u.is=function(S,x,j){t("node.is");var D;return w(S)&&(D=u.soul(S))?!T(S,k,{as:j,cb:x,s:D,n:S}):!1};function k(S,x){if(x!==u._){if(!r.is(S))return!0;this.cb&&this.cb.call(this.as,S,x,this.n,this.s)}}}(),function(){u.ify=function(S,x,j){return t("node.ify"),x?typeof x=="string"?x={soul:x}:typeof x=="function"&&(x={map:x}):x={},x.map&&(x.node=x.map.call(j,S,F,x.node||{})),(x.node=u.soul.ify(x.node||{},x))&&T(S,k,{o:x,as:j}),x.node};function k(S,x){var j=this.o,D,C;if(j.map){D=j.map.call(this.as,S,""+x,j.node),C===D?v(j.node,x):j.node&&(j.node[x]=D);return}r.is(S)&&(j.node[x]=S)}}();var _=e.obj,w=_.is,v=_.del,T=_.map,c=e.text,l=c.random,f=u.soul._,F;e.node=e.node||u;var h=e.state;h.lex=function(){return t("state.lex"),h().toString(36).replace(".","")},h.to=function(k,S,x){t("state.to");var j=(k||{})[S];return w(j)&&(j=I(j)),h.ify(x,S,h.is(k,S),j,u.soul(k))},function(){h.map=function(S,x,j){t("state.map");var D,C=w(C=S||x)?C:null;return S=m(S=S||x)?S:null,C&&!S?(x=p(x)?x:h(),C[b]=C[b]||{},T(C,k,{o:C,s:x}),C):(j=j||w(x)?x:D,x=p(x)?x:h(),function(R,N,z,M){if(!S)return k.call({o:z,s:x},R,N),R;S.call(j||this||{},R,N,z,M),!(A(z,N)&&D===z[N])&&k.call({o:z,s:x},R,N)})};function k(S,x){b!==x&&h.ify(this.o,x,this.s)}}();var _=e.obj;_.as;var A=_.has,w=_.is,T=_.map,I=_.copy,d=e.num,p=d.is,g=e.fn,m=g.is,b=u._,F,y={};(function(){y.is=function(x,j,D,C){return t("graph.is"),!x||!w(x)||E(x)?!1:!T(x,k,{cb:j,fn:D,as:C})};function k(x,j){if(!x||j!==u.soul(x)||!u.is(x,this.fn,this.as))return!0;this.cb&&(S.n=x,S.as=this.as,this.cb.call(S.as,x,j,S))}function S(x){x&&u.is(S.n,x,S.as)}})(),function(){y.ify=function(C,R,N){t("graph.ify");var z={path:[],obj:C};return R?typeof R=="string"?R={soul:R}:typeof R=="function"&&(R.map=R):R={},typeof N=="string"&&(R.soul=R.soul||N,N=F),R.soul&&(z.link=r.link.ify(R.soul)),R.shell=(N||{}).shell,R.graph=R.graph||{},R.seen=R.seen||[],R.as=R.as||N,k(R,z),R.root=z.node,R.graph};function k(C,R){var N;return(N=D(C,R))?N:(R.env=C,R.soul=x,u.ify(R.obj,S,R)&&(R.link=R.link||r.link.ify(u.soul(R.node)),R.obj!==C.shell&&(C.graph[r.link.is(R.link)]=R.node)),R)}function S(C,R,N){var z=this,M=z.env,U,tt;if(u._===R&&A(C,r.link._))return N._;if(U=j(C,R,N,z,M)){if(R||(z.node=z.node||N||{},A(C,u._)&&u.soul(C)&&(z.node._=I(C._)),z.node=u.soul.ify(z.node,r.link.is(z.link)),z.link=z.link||r.link.ify(u.soul(z.node))),(tt=M.map)&&(tt.call(M.as||{},C,R,N,z),A(N,R))){if(C=N[R],F===C){v(N,R);return}if(!(U=j(C,R,N,z,M)))return}if(!R)return z.node;if(U===!0)return C;if(tt=k(M,{obj:C,path:z.path.concat(R)}),!!tt.node)return tt.link}}function x(C){var R=this,N=r.link.is(R.link),z=R.env.graph;R.link=R.link||r.link.ify(C),R.link[r.link._]=C,R.node&&R.node[u._]&&(R.node[u._][r.link._]=C),A(z,N)&&(z[C]=z[N],v(z,N))}function j(C,R,N,z,M){var U;if(r.is(C))return!0;if(w(C))return 1;if(U=M.invalid)return C=U.call(M.as||{},C,R,N),j(C,R,N,z,M);M.err="Invalid value at '"+z.path.concat(R).join(".")+"'!",e.list.is(C)&&(M.err+=" Use `.set(item)` instead of an Array.")}function D(C,R){for(var N=C.seen,z=N.length,M;z--;)if(M=N[z],R.obj===M.obj)return M;N.push(R)}}(),y.node=function(k){t("graph.node");var S=u.soul(k);if(S)return P({},S,k)},function(){y.to=function(S,x,j){if(t("graph.to"),!!S){var D={};return j=j||{seen:{}},T(S[x],k,{obj:D,graph:S,opt:j}),D}};function k(S,x){var j,D;if(u._===x){if(E(S,r.link._))return;this.obj[x]=I(S);return}if(!(j=r.link.is(S))){this.obj[x]=S;return}if(D=this.opt.seen[j]){this.obj[x]=D;return}this.obj[x]=this.opt.seen[j]=y.to(this.graph,j,this.opt)}}();var m=e.fn.is,_=e.obj,w=_.is,v=_.del,A=_.has,E=_.empty,P=_.put,T=_.map,I=_.copy,F;e.graph=e.graph||y}}()}(kr)),kr.exports}var Lf=Ln();const Xe=en(Lf);var Fs={},Ls;function Nf(){if(Ls)return Fs;Ls=1;var n=typeof window<"u"?window.Gun:Ln();return n.chain.promise=function(s){var e=this,s=s||function(r){return r};return new Promise(function(r,i){e.once(function(o,a){r({put:o,get:a,gun:this})})}).then(s)},n.chain.then=function(t){var e=this,s=new Promise((r,i)=>{e.once(function(o,a){r(o,a)})});return t?s.then(t):s},Fs}Nf();var Zr={exports:{}},Ns;function rs(){return Ns||(Ns=1,function(){function n(){var i=function(o,a,u){if(i.unit=0,!u&&s!==a&&(i.last=""+o<i.last?i.last:""+o,delete(i.$||{})[r]),u=u||i.$||(i.$={}),!o&&Object.keys(u).length)return u;o=""+o;for(var c=0,l=o.length-1,f=o[c],h,d;!(h=u[f])&&c<l;)f+=o[++c];if(h)if(c==l){if(s===a)return s===(d=h[""])?h:(i.unit=1)&&d;h[""]=a}else return s!==a&&delete h[r],i(o.slice(++c),a,h||(h={}));else{if(!t(u,function(p,g){var b=0,y="";if((g||"").length)for(;g[b]==o[b];)y+=g[b++];if(y){if(s===a)return b<=l?void 0:((d||(d={}))[g.slice(b)]=p,p);var m={};if(m[g.slice(b)]=p,b=o.slice(b),b===""?m[""]=a:(m[b]={})[""]=a,u[y]=m,n.debug&&""+y=="undefined"){console.log(0,y);debugger}return delete u[g],!0}})){if(s===a)return;if((u[f]||(u[f]={}))[""]=a,n.debug&&""+f=="undefined"){console.log(1,f);debugger}}if(s===a)return d}};return i}if(n.map=function i(o,a,u,c){try{c=c||[];var l=typeof o=="function"?o.$||{}:o;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);
if(!l)return;if(typeof l=="string"){if(n.debug)throw["BUG:",o,a,u,c];return}var f=(l[r]||e).sort||(l[r]=function P(){return P.sort=Object.keys(l).sort(),P}()).sort,h;u=u===!0?{branch:!0}:u||{},(h=u.reverse)&&(f=f.slice(0).reverse());for(var d=u.start,p=u.end,g="￿",b=0,y=f.length;b<y;b++){var m=f[b],_=l[m],w,v,A;if(!(!_||m===""||r===m||m==="undefined")&&(v=c.slice(0),v.push(m),A=v.join(""),!(s!==d&&A<(d||"").slice(0,A.length))&&!(s!==p&&(p||g)<A))){if(h&&(w=i(_,a,u,v),s!==w))return w;if(s!==(w=_[""])){var E=1;if(s!==d&&A<(d||"")&&(E=0),s!==p&&A>(p||g)&&(E=0),E&&(w=a(w,A,m,c),s!==w))return w}else if(u.branch&&(w=a(s,A,m,c),s!==w))return w;if(c=v,!h&&(w=i(_,a,u,c),s!==w))return w;c.pop()}}}catch(P){console.error(P)}},typeof window<"u")window.Radix=n;else try{Zr.exports=n}catch{}var t=n.object=function(i,o,a){for(var u in i)if(i.hasOwnProperty(u)&&(a=o(i[u],u))!==s)return a},e={},s,r=""}()),Zr.exports}rs();var Yr={exports:{}},Xr={exports:{}},Bs;function Bf(){return Bs||(Bs=1,function(n){(function(){var t={},e,s=setTimeout.turn||typeof setImmediate!=""+e&&setImmediate||setTimeout;t.parseAsync=function(i,o,a,u){if(typeof i!="string"){try{o(e,JSON.parse(i))}catch(f){o(f)}return}var c={i:0,text:i,done:o,l:i.length,up:[]};u=u||1024*32,l();function l(){for(var f=c.text,h=c.i,d=c.l,p=0,g=c.w,b,y;p++<u;){var m=f[h++];if(h>d){c.end=!0;break}if(g){for(h=f.indexOf('"',h-1),m=f[h],y=0;f[h-++y]=="\\";);y=!(y%2),b=b||y,m=='"'&&!y&&(g=e,y=c.s,c.a?(y=f.slice(c.sl,h),(b||1+y.indexOf("\\"))&&(y=JSON.parse('"'+y+'"')),c.at instanceof Array?c.at.push(c.s=y):(c.at||(c.end=p=u,y=e),(c.at||{})[c.s]=c.s=y),c.s=e):(c.s=f.slice(c.sl,h),(b||1+c.s.indexOf("\\"))&&(c.s=JSON.parse('"'+c.s+'"'))),c.a=b=e),++h}else switch(m){case'"':c.sl=h,g=!0;break;case":":c.ai=h,c.a=!0;break;case",":(c.a||c.at instanceof Array)&&(y=f.slice(c.ai,h-1))&&e!==(y=r(y))&&(c.at instanceof Array?c.at.push(y):c.at[c.s]=y),c.a=e,c.at instanceof Array&&(c.a=!0,c.ai=h);break;case"{":c.up.push(c.at||(c.at={})),c.at instanceof Array?c.at.push(c.at={}):e!==(y=c.s)&&(c.at[y]=c.at={}),c.a=e;break;case"}":c.a&&(y=f.slice(c.ai,h-1))&&e!==(y=r(y))&&(c.at instanceof Array?c.at.push(y):(c.at||(c.end=p=u,y=e),(c.at||{})[c.s]=y)),c.a=e,c.at=c.up.pop();break;case"[":e!==(y=c.s)?(c.up.push(c.at),c.at[y]=c.at=[]):c.at||c.up.push(c.at=[]),c.a=!0,c.ai=h;break;case"]":c.a&&(y=f.slice(c.ai,h-1))&&e!==(y=r(y))&&(c.at instanceof Array?c.at.push(y):c.at[c.s]=y),c.a=e,c.at=c.up.pop();break}}if(c.s=e,c.i=h,c.w=g,c.end){if(y=c.at,e===y)try{y=JSON.parse(i)}catch(_){return c.done(_)}c.done(e,y)}else s(l)}};function r(i){var o=parseFloat(i);if(!isNaN(o))return o;if(i=i.trim(),i=="true")return!0;if(i=="false")return!1;if(i=="null")return null}t.stringifyAsync=function(i,o,a,u,c){c=c||{},c.text=c.text||"",c.up=[c.at={d:i}],c.done=o,c.i=0;var l=0;f();function f(){var h=c.at,d=h.d,p="",g;switch(h.i&&h.i-h.j>0&&(p+=","),e!==(g=h.k)&&(p+=JSON.stringify(g)+":"),typeof d){case"boolean":p+=""+d;break;case"string":p+=JSON.stringify(d);break;case"number":p+=isNaN(d)?"null":d;break;case"object":if(!d){p+="null";break}if(d instanceof Array){p+="[",h={i:-1,as:d,up:h,j:0},h.l=d.length,c.up.push(c.at=h);break}if(typeof(d||"").toJSON!="function"){p+="{",h={i:-1,ok:Object.keys(d).sort(),as:d,up:h,j:0},h.l=h.ok.length,c.up.push(c.at=h);break}if(g=d.toJSON()){p+=g;break}case"function":if(h.as instanceof Array){p+="null";break}default:p="",h.j++}for(c.text+=p;1+h.i>=h.l;)c.text+=h.ok?"}":"]",h=c.at=h.up;if(++h.i<h.l){if((g=h.ok)?h.d=h.as[h.k=g[h.i]]:h.d=h.as[h.i],++l<9)return f();l=0,s(f);return}c.done(e,c.text)}},typeof window!=""+e&&(window.YSON=t);try{""+e!="object"&&(n.exports=t)}catch{}typeof JSON!=""+e&&(JSON.parseAsync=t.parseAsync,JSON.stringifyAsync=t.stringifyAsync)})()}(Xr)),Xr.exports}var Qr,$s;function $f(){return $s||($s=1,Qr=function(n){var t=rs();n.find("a",function(){var e=[];t.map(n.list,function(i,o){o.indexOf("%1B")+1&&i&&e.push([o,i])}),e.length&&console.log(`
! ! ! WARNING ! ! !
RAD v0.2020.x has detected OLD v0.2019.x data & automatically migrating. Automatic migration will be turned OFF in future versions! If you are just developing/testing, we recommend you reset your data. Please contact us if you have any concerns.
This message should only log once.`);var s,r;e.forEach(function(i){s=i[0],r=i[1],n.list(decodeURIComponent(s),r),n.list(s,0)}),s&&n.find.bad(s)})}),Qr}var Ms;function $c(){return Ms||(Ms=1,function(){function n(s){s=s||{},s.log=s.log||console.log,s.file=String(s.file||"radata");var r=(n.has||(n.has={}))[s.file];if(r)return r;s.max=s.max||(s.memory?s.memory*999*999:3e8)*.3,s.until=s.until||s.wait||250,s.batch=s.batch||10*1e3,s.chunk=s.chunk||1024*1024*1,s.code=s.code||{},s.code.from=s.code.from||"!",s.jsonify=!0;function i(b){return encodeURIComponent(b).replace(/\*/g,"%2A")}function o(b){return g!==b&&(!b||typeof b!="object")}var a=""+g==typeof setImmediate?setTimeout:setImmediate,u=setTimeout.turn||a,g,c=e.object,l=0;if(!s.store)return s.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!s.store.put)return s.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!s.store.get)return s.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");s.store.list,""+g!=typeof dn&&Bf();var f=JSON.parseAsync||function(b,y,m){var _;try{y(_,JSON.parse(b,m))}catch(w){y(w)}},h=function(b,y,m,_,w){if(typeof y=="function"){var v=m||{};m=y,h.read(b,m,v,w||_);return}h.save(b,y,m,_,w)};h.save=function(b,y,m,_,w){var v={key:b},A,E;v.find=function(P){var T;if(v.file=P||(P=s.code.from),w&&(w=w[P]=w[P]||{}),w&&(w.sf=w.sf||+new Date),T=h.disk[P]){v.mix(g,T);return}h.parse(P,v.mix,g,w)},v.mix=function(P,T){if(w&&(w.sml=+new Date),w&&(w.sm=w.sm||+new Date),v.err=P||v.err){m(P);return}var I=v.file=(T||"").file||v.file,F;if(!T&&I!==s.code.from){h.find.bad(I),h.save(b,y,m,_);return}if((T=h.disk[I]||(h.disk[I]=T||e())).file||(T.file=I),s.compare&&(y=s.compare(T(b),y,b,I),g===y)){m(P,-1);return}if((v.disk=T)(b,y),_&&((F=(F=T.tags||(T.tags={}))[_]||(F[_]=h.tags[_]||(h.tags[_]={})))[I]||(F[I]=h.one[_]||(h.one[_]=m)),m=null),w&&(w.st=w.st||+new Date),T.Q){m&&T.Q.push(m);return}T.Q=m?[m]:[],T.to=setTimeout(v.write,s.until)},v.write=function(){w&&(w.sto=w.sto||+new Date);var P=A=v.file,T=v.disk;E=v.q=T.Q,v.tags=T.tags,delete T.Q,delete h.disk[P],delete T.tags,h.write(P,T,v.ack,g,w)},v.ack=function(P,T){w&&(w.sa=w.sa||+new Date),w&&(w.sal=E.length);var I,F;for(var k in h.tags)if(h.tags.hasOwnProperty(k)){var S=h.tags[k];if(!((F=h.disk[A])&&(F=F.tags)&&F[S])){I=S[A],delete S[A];var x;for(var j in S)if(S.hasOwnProperty(j)){x=!0;break}x||(delete h.tags[S],I&&I(P,T))}}!E&&(E="");for(var D=E.length,C=0,R=+new Date;C<D;C++)(I=E[C])&&I(P,T);console.STAT&&console.STAT(R,+new Date-R,"rad acks",i(v.file)),console.STAT&&console.STAT(R,E.length,"rad acks #",i(v.file))},m||(m=function(P,T){}),h.find(b,v.find)},h.disk={},h.one={},h.tags={};var d=0;h.write=function(b,y,m,_,w){if(!y){m("No radix!");return}_=typeof _=="object"?_:{force:_};var v=function(){},A,E;if(v.text="",v.file=b=y.file||(y.file=b),!b){m("What file?");return}if(v.write=function(){var P=y.raw=v.text;h.disk[b=y.file||v.file||b]=y;var T=+new Date;w&&(w.wd=T),h.find.add(b,function(F){if(w&&(w.wa=+new Date),F){m(F);return}s.store.put(i(b),P,function(S,x){w&&(w.wp=+new Date),console.STAT&&console.STAT(T,l=+new Date-T,"wrote disk",JSON.stringify(b),++d,"total all writes."),m(S,x||1),y.Q||delete h.disk[b]})})},v.split=function(){var P=+new Date;w&&(w.wf=P),v.text="",v.count||(v.count=0,e.map(y,function(){v.count++})),w&&(w.wfc=v.count),v.limit=Math.ceil(v.count/2);var T=v.count;return v.count=0,w&&(w.wf1=+new Date),v.sub=e(),e.map(y,v.slice,{reverse:1}),w&&(w.wf2=+new Date),h.write(v.end,v.sub,v.both,_),w&&(w.wf3=+new Date),v.hub=e(),e.map(y,v.stop),w&&(w.wf4=+new Date),h.write(y.file,v.hub,v.both,_),w&&(w.wf5=+new Date),console.STAT&&console.STAT(P,+new Date-P,"rad split",i(y.file),T),!0},v.slice=function(P,T){if(v.sub(v.end=T,P),v.limit<=++v.count)return!0},v.stop=function(P,T){if(T>=v.end)return!0;v.hub(T,P)},v.both=function(P,T){if(w&&(w.wfd=+new Date),E){m(P||E);return}if(A){m(P,T);return}A=!0,E=P},v.each=function(P,T,I,F){if(g!==P&&v.count++,s.max<=(P||"").length)return m("Data too big!"),!0;var k=n.encode(F.length)+"#"+n.encode(I)+(g===P?"":":"+n.encode(P))+`
`;if(s.chunk<v.text.length+k.length&&1<v.count&&!_.force)return v.split();v.text+=k},s.jsonify){h.write.jsonify(v,y,m,_,w);return}e.map(y,v.each,!0)||v.write()},h.write.jsonify=function(b,y,m,_,w){var v,A=+new Date;w&&(w.w=A);try{v=JSON.stringify(y.$)}catch{m("Cannot radisk!");return}if(w&&(w.ws=+new Date),console.STAT&&console.STAT(A,+new Date-A,"rad stringified JSON"),s.chunk<v.length&&!_.force){var E=0;if(e.map(y,function(){if(E++)return!0}),E>1)return b.split()}b.text=v,b.write()},h.range=function(b,y){if(!(!b||!y)){if(g===y.start&&g===y.end||o(b))return b;var m=e();return e.map(b,function(_,w){m(w,_)},y),m("")}},function(){h.read=function(b,y,m,_){m=m||{};var w={key:b};w.find=function(v){var A;if(w.file=v||(v=s.code.from),_&&(_=_[v]=_[v]||{}),_&&(_.rf=_.rf||+new Date),A=h.disk[w.file=v]){w.check(g,A);return}h.parse(v,w.check,g,_)},w.get=function(v,A,E){if(_&&(_.rgl=+new Date),_&&(_.rg=_.rg||+new Date),w.err=v||w.err){y(v);return}var P=w.file=(A||"").file||w.file;if(!A&&P!==s.code.from){h.find.bad(P),h.read(b,y,m);return}if(A=h.disk[P]||(h.disk[P]=A),!A){y(P===s.code.from?g:"No file!");return}A.file||(A.file=P);var T=h.range(A(b),m);if(_&&(_.rr=+new Date),m.unit=A.unit,m.chunks=(m.chunks||0)+1,m.parsed=(m.parsed||0)+((E||"").parsed||m.chunks*s.chunk),m.more=1,m.next=g,e.map(h.list,function(S,x){if(!(!S||P===x))return m.next=x,1},m.reverse?{reverse:1,end:P}:{start:P}),_&&(_.rl=+new Date),m.next||(m.more=0),m.next&&(!m.reverse&&(b<m.next&&m.next.indexOf(b)!=0||g!==m.end&&(m.end||"￿")<m.next)&&(m.more=0),m.reverse&&(b>m.next&&b.indexOf(m.next)!=0||g!==m.start&&(m.start||"")>m.next&&P<=m.start)&&(m.more=0)),!m.more){y(w.err,T,m);return}if(T&&y(w.err,T,m),!(m.parsed>=m.limit)){var I=+new Date;_&&(_.rm=I);var F=m.next;a(function(){console.STAT&&console.STAT(I,+new Date-I,"rad more"),h.parse(F,w.check)},0)}},w.check=function(v,A,E){if(w.get(v,A,E),!(!A||A.check)){A.check=1;var P=+new Date;(E||(E={})).file||(E.file=w.file),e.map(A,function(T,I){h.find(I,function(F){if((F||(F=s.code.from))!==E.file){var k=(""+Math.random()).slice(-3);u(function(){h.save(I,T,function S(x,j){if(x){h.save(I,T,S);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",k,i(I),i(E.file),i(F))})},0)}})}),console.STAT&&console.STAT(P,+new Date-P,"rad check")}},h.find(b||(m.reverse?m.end||"":m.start||""),w.find)}}(),function(){var b=0,y={},m="";h.parse=function(_,w,v,A){var E;if(!_)return w();if(E=y[_]){E.push(w);return}E=y[_]=[w];var P=function(){},T={file:_};(P.disk=e()).file=_,P.read=function(F,k){if(A&&(A.rpg=+new Date),console.STAT&&console.STAT(I,+new Date-I,"read disk",JSON.stringify(_),++b,"total all parses."),(P.err=F)||(P.not=!k)){delete y[_],P.map(E,P.ack);return}if(typeof k!="string"){try{s.max<=k.length?P.err="Chunk too big!":k=k.toString()}catch(S){P.err=S}if(P.err){delete y[_],P.map(E,P.ack);return}}if(T.parsed=k.length,A&&(A.rpl=T.parsed),A&&(A.rpa=E.length),I=+new Date,!(s.jsonify||k[0]==="{")){P.radec(F,k);return}f(k,function(S,x){if(!S){delete y[_],P.disk.$=x,console.STAT&&(l=+new Date-I)>9&&console.STAT(I,l,"rad parsed JSON"),A&&(A.rpd=+new Date),P.map(E,P.ack);return}if(k[0]==="{"){delete y[_],P.err="JSON error!",P.map(E,P.ack);return}P.radec(S,k)})},P.map=function(){if(!(!E||!E.length)){for(var F=+new Date,k=P.err,S=P.not?g:P.disk,x=0,j;x<9&&(j=E[x++]);)j(k,S,T);console.STAT&&console.STAT(F,+new Date-F,"rad packs",i(_)),console.STAT&&console.STAT(F,x,"rad packs #",i(_)),(E=E.slice(x)).length&&u(P.map,0)}},P.ack=function(F){if(F){if(P.err||P.not){F(P.err,g,T);return}F(g,P.disk,T)}},P.radec=function(F,k){delete y[_],I=+new Date;var S=P.split(k),x=[],j,D,C;if(!S||S[1]!==0){P.err="File '"+_+"' does not have root radix! ",P.map(E,P.ack);return}for(;S;)D=C=g,j=S[1],S=P.split(S[2])||"",S[0]=="#"&&(D=S[1],x=x.slice(0,j),j<=x.length&&x.push(D)),S=P.split(S[2])||"",S[0]!=`
`&&((S[0]=="="||S[0]==":")&&(C=S[1]),g!==D&&g!==C&&P.disk(x.join(""),C),S=P.split(S[2]));console.STAT&&console.STAT(I,+new Date-I,"parsed RAD"),P.map(E,P.ack)},P.split=function(F){if(F){var k=[],S={},x=-1,j="";if(x=F.indexOf(m),!!F[x])return j=F.slice(0,x),k[0]=j,k[1]=n.decode(F.slice(x),S),k[2]=F.slice(x+S.i),k}},h.disk&&(v||(v=(h.disk[_]||"").raw));var I=+new Date;if(A&&(A.rp=I),v)return u(function(){P.read(g,v)},0);s.store.get(i(_),P.read)}}(),function(){var b,y="",m;h.find=function(v,A){if(!b){if(m){m.push([v,A]);return}m=[[v,A]],h.parse(y,_);return}e.map(h.list=b,function(E,P){if(E)return A(P)||!0},{reverse:1,end:v})||A(s.code.from)},h.find.add=function(v,A){var E=b(v);if(E||v===y){A(g,1);return}b(v,1),A.found=(A.found||0)+1,h.write(y,b,function(P,T){if(P){A(P);return}A.found=(A.found||0)-1,A.found===0&&A(g,1)},!0)},h.find.bad=function(v,A){b(v,0),h.write(y,b,A||p)};function _(v,A){if(v){s.log("list",v),setTimeout(function(){h.parse(y,_)},1e3);return}if(A){w(A);return}if(b=b||A||e(),!s.store.list){w(b);return}s.store.list(function(E){if(!E){w(b);return}h.find.add(E,p)})}function w(v,A){b=b||v,b.file=y,A=m,m=null,c(A,function(E){h.find(E[0],E[1])})}}();try{!t.window&&$f()(h)}catch{}var p=function(){},g;return n.has[s.file]=h,h}if(function(){var s="";n.encode=function(r,i,o){o=o||s;var a=o,u;if(typeof r=="string"){for(var c=r.indexOf(o);c!=-1;)a+=o,c=r.indexOf(o,c+1);return a+'"'+r+o}else{if(r&&r["#"]&&Object.keys(r).length==1)return a+"#"+u+a;if(typeof r=="number")return a+"+"+(r||0)+a;if(r===null)return a+" "+a;if(r===!0)return a+"+"+a;if(r===!1)return a+"-"+a}},n.decode=function(r,i,o){o=o||s;var a="",u=-1,c=0,l,f;if(o===r[0]){for(;o===r[++u];)++c;for(f=r[l=c]||!0;--c>=0;)u=r.indexOf(o,u+1);if(u==-1&&(u=r.length),a=r.slice(l+1,u),i&&(i.i=u+1),f==='"')return a;if(f==="#")return{"#":a};if(f==="+")return a.length===0?!0:parseFloat(a);if(f===" ")return null;if(f==="-")return!1}}}(),typeof window<"u"){var t=window.Gun,e=window.Radix;window.Radisk=n}else{var t=Ln(),e=rs();try{Yr.exports=n}catch{}}n.Radix=e}()),Yr.exports}$c();var Us={},zs;function Mf(){if(zs)return Us;zs=1;var n={},t=typeof window<"u"?window.Gun:Ln();return t.on("create",function(e){t.TESTING&&(e.opt.file="radatatest"),this.to.next(e);var s=e.opt,r;if(!(s.rad===!1||s.radisk===!1)&&!(r+""!=typeof process&&""+(n||"").RAD=="false")){var i=t.window&&t.window.Radisk||$c(),o=i.Radix,a=i(s),u="\x1B",c=0;e.on("put",function(f){if(this.to.next(f),!(f._||"").rad){var h=f["#"],d=f.put,p=d["#"],g=d["."],b=d[":"],y=d[">"],m=(f._||"").DBG;m&&(m.sp=m.sp||+new Date);var _=(f._||"").RPS||((f._||"").RPS=+new Date);a(p+u+g,{":":b,">":y},function(w,v){if(m&&(m.spd=m.spd||+new Date),console.STAT&&console.STAT(_,+new Date-_,"put"),w){e.on("in",{"@":h,err:w,DBG:m});return}e.on("in",{"@":h,ok:v,DBG:m})},!1,m&&(m.r=m.r||{})),m&&(m.sps=m.sps||+new Date)}}),e.on("get",function(f){this.to.next(f);var h=f._||"",d=h.DBG=f.DBG;d&&(d.sg=+new Date);var p=f["#"],g=f.get,b=f.get["#"],y=f.get["."]||"",m={},_,w,v,A;if(typeof b=="string"?w=b:b&&(r!==(v=b["*"])&&(m.limit=A=1),r!==b[">"]&&(m.start=b[">"]),r!==b["<"]&&(m.end=b["<"]),w=A?""+v:v||b["="],A=null),w&&!m.limit&&(typeof y=="string"?w=w+u+(m.atom=y):y&&(r!==y[">"]&&(m.start=y[">"],m.limit=1),r!==y["<"]&&(m.end=y["<"],m.limit=1),r!==(v=y["*"])&&(m.limit=A=1),w&&(w=w+u+(A?""+(v||""):v||(m.atom=y["="]||""))))),((v=g["%"])||m.limit)&&(m.limit=v<=(m.pack||1e3*100)?v:1),(y["-"]||(b||{})["-"]||g["-"])&&(m.reverse=!0),(v=(e.next||"")[b])&&v.put){if(m.atom){if(v=(v.next||"")[m.atom],v&&v.root&&v.root.graph&&v.root.graph[b]&&v.root.graph[b][m.atom])return}else if(v&&v.rad)return}var E=t.state(),P=+new Date,T=0;d&&(d.sgm=P),a(w||"",function(F,k,S){d&&(d.sgr=+new Date),d&&(d.sgi=S);try{s.store.stats.get.time[l%50]=+new Date-P,++l,s.store.stats.get.count++,F&&(s.store.stats.get.err=F)}catch{}console.STAT&&console.STAT(P,+new Date-P,"got",JSON.stringify(w)),P=+new Date,S=S||"";var x,j;if(S.unit&&k&&r!==(x=k[":"])&&r!==(j=k[">"])){var D=w.split(u),C=D[0],R=D[1];(_=_||{})[C]=t.state.ify(_[C],R,j,x,C),e.$.get(C).get(R)._.rad=E}else k&&(typeof k!="string"&&(m.atom?k=r:o.map(k,I,m)),!_&&k&&I(k,""),!m.atom&&!y&typeof b=="string"&&!m.limit&&!m.more&&(e.$.get(b)._.rad=E));d&&(d.sgp=+new Date),console.STAT&&(c=+new Date-P)>9&&(console.STAT(P,c,"got prep time"),console.STAT(P,T,"got prep #")),T=0,P=+new Date;var N=function(){};N.faith=!0,N.rad=g,e.on("in",{"@":p,put:_,"%":S.more?1:r,err:F||r,_:N,DBG:d}),console.STAT&&(c=+new Date-P)>9&&console.STAT(P,c,"got emit",Object.keys(_||{}).length),_=r},m,d&&(d.r=d.r||{})),d&&(d.sgd=+new Date),console.STAT&&(c=+new Date-P)>9&&console.STAT(P,c,"get call");function I(F,k,S,x){if(T++,!!F){k=(w+k).split(u);var j=k.slice(0,1)[0];if(k=k.slice(-1)[0],m.limit&&m.limit<=m.count)return!0;var D,C,R=j,N=k;if(typeof F!="string"){D=F[":"],C=F[">"],(_=_||{})[R]=t.state.ify(_[R],N,C,D,R),m.count=(m.count||0)+((D||"").length||9);return}m.count=(m.count||0)+F.length;var z=F.lastIndexOf(">"),M=i.decode(F.slice(z+1),null,u);F=i.decode(F.slice(0,z),null,u),(_=_||{})[j]=t.state.ify(_[j],k,M,F,j)}}}),t.valid,(s.store||{}).stats={get:{time:{},count:0},put:{time:{},count:0}};var l=0}}),Us}Mf();var ti={exports:{}},Hs;function Uf(){return Hs||(Hs=1,function(){function n(e){e=e||{},e.file=String(e.file||"radata");var s=n[e.file],r=null,i;if(s)return console.log("Warning: reusing same IndexedDB store and options as 1st."),n[e.file];s=n[e.file]=function(){};try{e.indexedDB=e.indexedDB||n.indexedDB||indexedDB}catch{}try{if(!e.indexedDB||location.protocol=="file:"){var o=s.d||(s.d={});return s.put=function(a,u,c){o[a]=u,setTimeout(function(){c(null,1)},250)},s.get=function(a,u){setTimeout(function(){u(null,o[a]||i)},5)},console.log("Warning: No indexedDB exists to persist data to!"),s}}catch{}return s.start=function(){var a=indexedDB.open(e.file,1);a.onupgradeneeded=function(u){u.target.result.createObjectStore(e.file)},a.onsuccess=function(){r=a.result},a.onerror=function(u){console.log(u||1)}},s.start(),s.put=function(a,u,c){if(!r){setTimeout(function(){s.put(a,u,c)},1);return}var l=r.transaction([e.file],"readwrite"),f=l.objectStore(e.file),h=f.put(u,""+a);h.onsuccess=f.onsuccess=l.onsuccess=function(){c(null,1)},h.onabort=f.onabort=l.onabort=function(d){c(d||"put.tx.abort")},h.onerror=f.onerror=l.onerror=function(d){c(d||"put.tx.error")}},s.get=function(a,u){if(!r){setTimeout(function(){s.get(a,u)},9);return}var c=r.transaction([e.file],"readonly"),l=c.objectStore(e.file),f=l.get(""+a);f.onsuccess=function(){u(null,f.result)},f.onabort=function(h){u(h||4)},f.onerror=function(h){u(h||5)}},setInterval(function(){r&&r.close(),r=null,s.start()},1e3*15),s}if(typeof window<"u")(n.window=window).RindexedDB=n,n.indexedDB=window.indexedDB;else try{ti.exports=n}catch{}try{var t=n.window.Gun||Ln();t.on("create",function(e){this.to.next(e),e.opt.store=e.opt.store||n(e.opt)})}catch{}}()),ti.exports}Uf();var qs={},Gs;function zf(){return Gs||(Gs=1,function(){var n=typeof window<"u"?window.Gun:Ln();n.on("opt",function(t){this.to.next(t);var e=t.opt;if(t.once||!n.Mesh||e.RTCPeerConnection===!1)return;var s;typeof window<"u"&&(s=window),typeof Fe<"u"&&(s=Fe),s=s||{};var r=e.RTCPeerConnection||s.RTCPeerConnection||s.webkitRTCPeerConnection||s.mozRTCPeerConnection,i=e.RTCSessionDescription||s.RTCSessionDescription||s.webkitRTCSessionDescription||s.mozRTCSessionDescription,o=e.RTCIceCandidate||s.RTCIceCandidate||s.webkitRTCIceCandidate||s.mozRTCIceCandidate;if(!r||!i||!o)return;e.RTCPeerConnection=r,e.RTCSessionDescription=i,e.RTCIceCandidate=o,e.rtc=e.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},e.rtc.dataChannel=e.rtc.dataChannel||{ordered:!1,maxRetransmits:2},e.rtc.sdp=e.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},e.rtc.max=e.rtc.max||55,e.rtc.room=e.rtc.room||n.window&&(location.hash.slice(1)||location.pathname.slice(1)),e.announce=function(c){e.rtc.start=+new Date,t.$.get("/RTC/"+e.rtc.room+"<?99").get("+").put(e.pid,function(l){!l.ok||!l.ok.rtc||u(l)},{acks:e.rtc.max}).on(function(l,f,h){l===e.pid||e.rtc.start>h.put[">"]||u({"#":""+h["#"],ok:{rtc:{id:l}}})})};var a=e.mesh=e.mesh||n.Mesh(t);t.on("create",function(c){this.to.next(c),setTimeout(e.announce,1)});function u(c){if(this&&this.off&&this.off(),!!c.ok){var l=c.ok.rtc,f,h;if(!(!l||!l.id||l.id===e.pid)){if(h=l.answer)return!(f=e.peers[l.id]||u[l.id])||f.remoteSet?void 0:(h.sdp=h.sdp.replace(/\\r\\n/g,`\r
`),f.setRemoteDescription(f.remoteSet=new e.RTCSessionDescription(h)));if(h=l.candidate)return f=e.peers[l.id]||u[l.id]||u({ok:{rtc:{id:l.id}}}),f.addIceCandidate(new e.RTCIceCandidate(h));if(!u[l.id]){(f=new e.RTCPeerConnection(e.rtc)).id=l.id;var d=f.wire=f.createDataChannel("dc",e.rtc.dataChannel);if(u[l.id]=f,d.to=setTimeout(function(){delete u[l.id]},1e3*60),d.onclose=function(){a.bye(f)},d.onerror=function(p){},d.onopen=function(p){delete u[l.id],a.hi(f)},d.onmessage=function(p){p&&a.hear(p.data||p,f)},f.onicecandidate=function(p){p.candidate&&t.on("out",{"@":c["#"],ok:{rtc:{candidate:p.candidate,id:e.pid}}})},f.ondatachannel=function(p){var g=p.channel;g.onmessage=d.onmessage,g.onopen=d.onopen,g.onclose=d.onclose},h=l.offer){l.offer.sdp=l.offer.sdp.replace(/\\r\\n/g,`\r
`),f.setRemoteDescription(new e.RTCSessionDescription(h)),f.createAnswer(function(p){f.setLocalDescription(p),t.on("out",{"@":c["#"],ok:{rtc:{answer:p,id:e.pid}}})},function(){},e.rtc.sdp);return}return f.createOffer(function(p){f.setLocalDescription(p),t.on("out",{"@":c["#"],"#":t.ask(u),ok:{rtc:{offer:p,id:e.pid}}})},function(){},e.rtc.sdp),f}}}}})}()),qs}zf();const Mc='(function(){"use strict";var F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Z(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var tt;function et(){return tt||(tt={"/gun.js":L})}function Q(E){function k(O){var d=nt(O,E);if(d!==null)return et()[d]();throw new Error(\'Could not dynamically require "\'+O+\'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.\')}return k.resolve=function(O){var d=nt(O,E);return d!==null?d:require.resolve(O)},k}function nt(E,k){var O=gt(E);E=Y(E);var d;E[0]==="/"&&(k="");for(var o=et(),i=["",".js",".json"];O?d=Y(k+"/node_modules/"+E):d=Y(k+"/"+E),!d.endsWith("/..");){for(var p=0;p<i.length;p++){var y=d+i[p];if(o[y])return y}if(!O)break;var h=Y(k+"/..");if(h===k)break;k=h}return null}function gt(E){var k=E[0];if(k==="/"||k==="\\\\")return!1;var O=E[1],d=E[2];return!(k==="."&&(!O||O==="/"||O==="\\\\")||k==="."&&O==="."&&(!d||d==="/"||d==="\\\\")||O===":"&&(d==="/"||d==="\\\\"))}function Y(E){E=E.replace(/\\\\/g,"/");for(var k=E.split("/"),O=k[0]==="",d=1;d<k.length;d++)(k[d]==="."||k[d]==="")&&k.splice(d--,1);for(var d=1;d<k.length;d++)k[d]===".."&&d>0&&k[d-1]!==".."&&k[d-1]!=="."&&(k.splice(--d,2),d--);return E=k.join("/"),O&&E[0]!=="/"?E="/"+E:E.length===0&&(E="."),E}var rt={exports:{}},ot;function L(){return ot||(ot=1,function(E){(function(){function k(d,o){return o?Q("/")(d):d.slice?k[i(d)]:function(p,y){d(p={exports:{}}),k[i(y)]=p.exports};function i(p){return p.split("/").slice(-1).toString().replace(".js","")}}var O=E;k(function(d){String.random=function(i,p){var y="";for(i=i||24,p=p||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";i-- >0;)y+=p.charAt(Math.floor(Math.random()*p.length));return y},String.match=function(i,p){var y,h;return typeof i!="string"?!1:(typeof p=="string"&&(p={"=":p}),p=p||{},y=p["="]||p["*"]||p[">"]||p["<"],i===y?!0:h!==p["="]?!1:(y=p["*"]||p[">"],i.slice(0,(y||"").length)===y?!0:h!==p["*"]?!1:h!==p[">"]&&h!==p["<"]?i>=p[">"]&&i<=p["<"]:h!==p[">"]&&i>=p[">"]||h!==p["<"]&&i<=p["<"]))},String.hash=function(i,p){if(typeof i=="string"){if(p=p||0,!i.length)return p;for(var y=0,h=i.length,t;y<h;++y)t=i.charCodeAt(y),p=(p<<5)-p+t,p|=0;return p}};var o=Object.prototype.hasOwnProperty;Object.plain=function(i){return i?i instanceof Object&&i.constructor===Object||Object.prototype.toString.call(i).match(/^\\[object (\\w+)\\]$/)[1]==="Object":!1},Object.empty=function(i,p){for(var y in i)if(o.call(i,y)&&(!p||p.indexOf(y)==-1))return!1;return!0},Object.keys=Object.keys||function(i){var p=[];for(var y in i)o.call(i,y)&&p.push(y);return p},function(){var i,p=setTimeout,y=0,h=0,t=typeof setImmediate!=""+i&&setImmediate||function(s,a){return typeof MessageChannel==""+i?p:((s=new MessageChannel).port1.onmessage=function(S){S.data==""&&a()},function(S){a=S,s.port2.postMessage("")})}(),f=p.check=p.check||typeof performance!=""+i&&performance||{now:function(){return+new Date}};p.hold=p.hold||9,p.poll=p.poll||function(s){if(p.hold>=f.now()-y&&h++<3333){s();return}t(function(){y=f.now(),s()},h=0)}}(),function(){var i=setTimeout,p=i.turn=i.turn||function(a){y.push(a)==1&&h(s)},y=p.s=[],h=i.poll,t=0,f,s=function(){(f=y[t++])&&f(),(t==y.length||t==99)&&(y=p.s=y.slice(t),t=0),y.length&&h(s)}}(),function(){var i,p=setTimeout,y=p.turn;(p.each=p.each||function(h,t,f,s){s=s||9,function a(S,r,v){if(r=(S=(h||[]).splice(0,s)).length){for(var g=0;g<r&&i===(v=t(S[g]));g++);if(i===v){y(a);return}}f&&f(v)}()})()}()})(k,"./shim"),k(function(d){d.exports=function o(f,p,y){if(!f)return{to:o};var h,t=typeof p=="function",f=(this.tag||(this.tag={}))[f]||t&&(this.tag[f]={tag:f,to:o._={next:function(a){var S;(S=this.to)&&S.next(a)}}});if(t){var s={off:o.off||(o.off=function(){if(this.next===o._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=o._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:o._,next:p,the:f,on:this,as:y};return(s.back=f.last||f).to=s,f.last=s}return(f=f.to)&&h!==p&&f.next(p),f}})(k,"./onto"),k(function(d){d.exports=function(o){return o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"&&o!=1/0&&o!=-1/0&&o===o||!!o&&typeof o["#"]=="string"&&Object.keys(o).length===1&&o["#"]}})(k,"./valid"),k(function(d){k("./shim");function o(){var f=+new Date;return h<f?(p=0,h=f+o.drift):h=f+(p+=1)/y+o.drift}o.drift=0;var i=-1/0,p=0,y=999,h=i,t;o.is=function(f,s,a){var S=s&&f&&f._&&f._[">"]||a;if(S)return typeof(S=S[s])=="number"?S:i},o.ify=function(f,s,a,S,r){(f=f||{})._=f._||{},r&&(f._["#"]=r);var v=f._[">"]||(f._[">"]={});return t!==s&&s!=="_"&&(typeof a=="number"&&(v[s]=a),t!==S&&(f[s]=S)),f},d.exports=o})(k,"./state"),k(function(d){k("./shim");function o(i){var p={s:{}},y=p.s;i=i||{max:999,age:1e3*9},p.check=function(t){return y[t]?h(t):!1};var h=p.track=function(t){var f=y[t]||(y[t]={});return f.was=p.now=+new Date,p.to||(p.to=setTimeout(p.drop,i.age+9)),h.ed&&h.ed(t),f};return p.drop=function(t){p.to=null,p.now=+new Date;var f=Object.keys(y);console.STAT&&console.STAT(p.now,+new Date-p.now,"dup drop keys"),setTimeout.each(f,function(s){var a=y[s];a&&(t||i.age)>p.now-a.was||delete y[s]},0,99)},p}d.exports=o})(k,"./dup"),k(function(d){k("./onto"),d.exports=function(i,p){if(this.on){var y=(this.opt||{}).lack||9e3;if(typeof i!="function"){if(!i)return;var t=i["#"]||i,h=(this.tag||"")[t];return h?(p&&(h=this.on(t,p),clearTimeout(h.err),h.err=setTimeout(function(){h.off()},y)),!0):void 0}var t=p&&p["#"]||o(9);if(!i)return t;var f=this.on(t,i,p);return f.err=f.err||setTimeout(function(){f.off(),f.next({err:"Error: No ACK yet.",lack:!0})},y),t}};var o=String.random||function(){return Math.random().toString(36).slice(2)}})(k,"./ask"),k(function(d){function o(r){return r instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:r}):new o(r)}o.is=function(r){return r instanceof o||r&&r._&&r===r._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},k("./shim"),o.valid=k("./valid"),o.state=k("./state"),o.on=k("./onto"),o.dup=k("./dup"),o.ask=k("./ask"),function(){o.create=function(u){u.root=u.root||u,u.graph=u.graph||{},u.on=u.on||o.on,u.ask=u.ask||o.ask,u.dup=u.dup||o.dup();var T=u.$.opt(u.opt);return u.once||(u.on("in",r,u),u.on("out",r,u),u.on("put",w,u),o.on("create",u),u.on("create",u)),u.once=1,T};function r(u){if(u){if(u.out===r){this.to.next(u);return}var T=this,j=T.as,A=j.at||j,B=A.$,N=A.dup,G,J=u.DBG;if((G=u["#"])||(G=u["#"]=p(9)),!N.check(G)){if(N.track(G),G=u._,u._=typeof G=="function"?G:function(){},u.$&&u.$===(u.$._||"").$||(u.$=B),u["@"]&&!u.put&&n(u),!A.ask(u["@"],u))if(J&&(J.u=+new Date),u.put){v(u);return}else u.get&&o.on.get(u,B);J&&(J.uc=+new Date),T.to.next(u),J&&(J.ua=+new Date),!(u.nts||u.NTS)&&(u.out=r,A.on("out",u),J&&(J.ue=+new Date))}}}function v(u){if(u){var T=u._||"",j=T.root=((T.$=u.$||"")._||"").root;if(u["@"]&&T.faith&&!T.miss){u.out=r,j.on("out",u);return}T.latch=j.hatch,T.match=j.hatch=[];var A=u.put,B=T.DBG=u.DBG,N=+new Date;if(_=_||N,!(A["#"]&&A["."])){B&&(B.p=N),T["#"]=u["#"],T.msg=u,T.all=0,T.stun=1;var G=Object.keys(A);console.STAT&&console.STAT(N,((B||T).pk=+new Date)-N,"put sort");var J=0,U,R,P,M,I,K,q;(function W(V){if(U!=J){if(U=J,!(P=G[J])){console.STAT&&console.STAT(N,((B||T).pd=+new Date)-N,"put"),e(T);return}(M=A[P])?(q=M._)?P!==q["#"]?K=l+m(P)+"soul not same.":(I=q[">"])||(K=l+m(P)+"no state."):K=l+m(P)+"no meta.":K=l+m(P)+"no node.",R=Object.keys(M||{})}if(K){u.err=T.err=K,e(T);return}var ht=0,H;for(V=V||0;V++<9&&(H=R[ht++]);)if(H!=="_"){var z=M[H],dt=I[H];if(s===dt){K=l+m(H)+"on"+m(P)+"no state.";break}if(!h(z)){K=l+m(H)+"on"+m(P)+"bad "+typeof z+m(z);break}g(z,H,P,dt,u),++C}if((R=R.slice(ht)).length){y(W);return}++J,R=null,W(V)})()}}}o.on.put=v;function g(u,T,j,A,B){var N=B._||"",G=N.root,J=G.graph,U,R=J[j]||a,P=t(R,T,1),M=R[T],I=N.DBG;(U=console.STAT)&&(!J[j]||!M)&&(U.has=(U.has||0)+1);var K=D();if(A>K){setTimeout(function(){g(u,T,j,A,B)},(U=A-K)>x?x:U),console.STAT&&console.STAT((I||N).Hf=+new Date,U,"future");return}if(!(A<P)&&!(!N.faith&&A===P&&(u===M||b(u)<=b(M))&&!N.miss)){N.stun++;var q=B["#"]+N.all++,W={toString:function(){return q},_:N};W.toJSON=W.toString,G.dup.track(W)["#"]=B["#"],I&&(I.ph=I.ph||+new Date),G.on("put",{"#":W,"@":B["@"],put:{"#":j,".":T,":":u,">":A},ok:B.ok,_:N})}}function w(u){var T;(T=(u._||"").DBG)&&(T.pa=+new Date,T.pm=T.pm||+new Date);var j=this,A=j.as,B=A.graph,N=u._,G=u.put,J=G["#"],U=G["."],R=G[":"],P=G[">"];u["#"];var M;(M=N.msg)&&(M=M.put)&&(M=M[J])&&f(M,U,P,R,J),B[J]=f(B[J],U,P,R,J),(M=(A.next||"")[J])&&M.on("in",u),e(N),j.to.next(u)}function e(u,T){var j;if(!u.stop&&!(!u.err&&0<--u.stun)&&(u.stop=1,!!(j=u.root))){var A=u.match;A.end=1,A===j.hatch&&(!(A=u.latch)||A.end?delete j.hatch:j.hatch=A),u.hatch&&u.hatch(),setTimeout.each(u.match,function(B){B&&B()}),!(!(T=u.msg)||u.err||T.err)&&(T.out=r,u.root.on("out",T),$())}}function n(u){var T=u["@"]||"",j;if(!(j=T._)){var A=(A=u.$)&&(A=A._)&&(A=A.root)&&(A=A.dup);if(!(A=A.check(T)))return;u["@"]=A["#"]||u["@"];return}j.acks=(j.acks||0)+1,(j.err=u.err)&&(u["@"]=j["#"],e(j)),j.ok=u.ok||j.ok,!j.stop&&!j.crack&&(j.crack=j.match&&j.match.push(function(){c(j)})),c(j)}function c(u){!u||!u.root||u.stun||u.acks!==u.all||u.root.on("in",{"@":u["#"],err:u.err,ok:u.err?s:u.ok||{"":1}})}var l="Error: Invalid graph!",m=function(u){return" \'"+(""+u).slice(0,9)+"...\' "},b=JSON.stringify,x=2147483647,D=o.state,C=0,_,$=function(){C>999&&C/-(_-(_=+new Date))>1&&(o.window&&console.log("Warning: You\'re syncing 1K+ records a second, faster than DOM can update - consider limiting query."),$=function(){C=0})}}(),function(){o.on.get=function(v,g){var w=g._,e=v.get,n=e["#"],c=w.graph[n],l=e["."],m=w.next||(w.next={}),b=m[n],x=v._||{},D=x.DBG=v.DBG;if(D&&(D.g=+new Date),!c)return w.on("get",v);if(l){if((typeof l!="string"||s===c[l])&&!((b||"").next||"")[l]){w.on("get",v);return}c=f({},l,t(c,l),c[l],n)}c&&r(v,c),w.on("get",v)};function r(v,g){var w=+new Date,e=v._||{},n=e.DBG=v.DBG,c=v["#"],l=p(9),m=Object.keys(g||"").sort(),b=((g||"")._||"")["#"];m.length;var x=v.$._.root,D=g===x.graph[b];console.STAT&&console.STAT(w,((n||e).gk=+new Date)-w,"got keys"),g&&function C(){w=+new Date;for(var _=0,$,u={},T;_<9&&($=m[_++]);)f(u,$,t(g,$),g[$],b);m=m.slice(_),(T={})[b]=u,u=T;var j;D&&(j=function(){},j.ram=j.faith=!0),T=m.length,console.STAT&&console.STAT(w,-(w-(w=+new Date)),"got copied some"),n&&(n.ga=+new Date),x.on("in",{"@":c,"#":l,put:u,"%":T?l=p(9):s,$:x.$,_:j,DBG:n,FOO:1}),console.STAT&&console.STAT(w,+new Date-w,"got in"),T&&setTimeout.turn(C)}(),g||x.on("in",{"@":v["#"]})}o.on.get.ack=r}(),function(){o.chain.opt=function(r){r=r||{};var v=this,g=v._,w=r.peers||r;return Object.plain(r)||(r={}),Object.plain(g.opt)||(g.opt=r),typeof w=="string"&&(w=[w]),Object.plain(g.opt.peers)||(g.opt.peers={}),w instanceof Array&&(r.peers={},w.forEach(function(e){var n={};n.id=n.url=e,r.peers[e]=g.opt.peers[e]=g.opt.peers[e]||n})),i(r,function e(n){var c=this[n];if(this&&this.hasOwnProperty(n)||typeof c=="string"||Object.empty(c)){this[n]=c;return}c&&c.constructor!==Object&&!(c instanceof Array)||i(c,e)}),g.opt.from=r,o.on("opt",g),g.opt.uuid=g.opt.uuid||function(e){return o.state().toString(36).replace(".","")+String.random(e||12)},v}}();var i=function(r,v){Object.keys(r).forEach(v,r)},p=String.random,y=setTimeout.turn,h=o.valid,t=o.state.is,f=o.state.ify,s,a={},S;o.log=function(){return!o.log.off&&S.log.apply(S,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(r,v,g){return(g=o.log.once)[r]=g[r]||0,g[r]++||o.log(v)},typeof window<"u"&&((window.GUN=window.Gun=o).window=window);try{typeof O<"u"&&(O.exports=o)}catch{}d.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(S=console).only=function(r,v){return S.only.i&&r===S.only.i&&S.only.i++&&(S.log.apply(S,arguments)||v)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(k,"./root"),k(function(d){var o=k("./root");o.chain.back=function(y,h){var t;if(y=y||1,y===-1||y===1/0)return this._.root.$;if(y===1)return(this._.back||this._).$;var f=this,s=f._;if(typeof y=="string"&&(y=y.split(".")),y instanceof Array){var a=0,S=y.length,t=s;for(a;a<S;a++)t=(t||i)[y[a]];return p!==t?h?f:t:(t=s.back)?t.$.back(y,h):void 0}if(typeof y=="function"){for(var r,t={back:s};(t=t.back)&&p===(r=y(t,h)););return r}return typeof y=="number"?(s.back||s).$.back(y-1):this};var i={},p})(k,"./back"),k(function(d){var o=k("./root");o.chain.chain=function(e){var n=this,c=n._,l=new(e||n).constructor(n),m=l._,b;return m.root=b=c.root,m.id=++b.once,m.back=n._,m.on=o.on,m.on("in",o.on.in,m),m.on("out",o.on.out,m),l};function i(e){var n,c=this.as,l=c.back,m=c.root,b;if(e.$||(e.$=c.$),this.to.next(e),c.err){c.on("in",{put:c.put=s,$:c.$});return}if(n=e.get){if(m.pass&&(m.pass[c.id]=c),c.lex&&Object.keys(c.lex).forEach(function(x){b[x]=c.lex[x]},b=e.get=e.get||{}),n["#"]||c.soul){if(n["#"]=n["#"]||c.soul,e["#"]||(e["#"]=a(9)),l=m.$.get(n["#"])._,n=n["."]){if(r(l.put,n)&&(b=l.ask&&l.ask[n],(l.ask||(l.ask={}))[n]=l.$.get(n)._,l.on("in",{get:n,put:{"#":l.soul,".":n,":":l.put[n],">":g(m.graph[l.soul],n)}}),b))return}else{if(b=l.ask&&l.ask[""],(l.ask||(l.ask={}))[""]=l,s!==l.put&&(l.on("in",l),b))return;e.$=l.$}return m.ask(t,e),m.on("in",e)}if(n["."])return c.get?(e={get:{".":c.get},$:c.$},(l.ask||(l.ask={}))[c.get]=e.$._,l.on("out",e)):(e={get:c.lex?e.get:{},$:c.$},l.on("out",e));if((c.ask||(c.ask={}))[""]=c,c.get)return n["."]=c.get,(l.ask||(l.ask={}))[c.get]=e.$._,l.on("out",e)}return l.on("out",e)}o.on.out=i;function p(e,n){n=n||this.as;var c=n.root,l=e.$||(e.$=n.$),m=(l||"")._||f,b=e.put||"",x=b["#"],D=b["."],C=s!==b["="]?b["="]:b[":"],_=b[">"]||-1/0,$;if(s!==e.put&&(s===b["#"]||s===b["."]||s===b[":"]&&s===b["="]||s===b[">"])){if(!S(b)){if(!(x=((b||"")._||"")["#"])){console.log("chain not yet supported for",b,"...",e,n);return}return l=n.root.$.get(x),setTimeout.each(Object.keys(b).sort(),function(u){u=="_"||s===(_=g(b,u))||n.on("in",{$:l,put:{"#":x,".":u,"=":b[u],">":_},VIA:e})})}n.on("in",{$:m.back.$,put:{"#":x=m.back.soul,".":D=m.has||m.get,"=":b,">":g(m.back.put,D)},via:e});return}(e.seen||"")[n.id]||((e.seen||(e.seen=function(){}))[n.id]=n,n!==m&&(Object.keys(e).forEach(function(u){b[u]=e[u]},b={}),b.get=n.get||b.get,!n.soul&&!n.has?b.$$$=b.$$$||n.$:m.soul&&(b.$=n.$,b.$$=b.$$||m.$),e=b),h(e,n),(n.soul||e.$$)&&_>=g(c.graph[x],D)&&((b=c.$.get(x)._).put=w(b.put,D,_,C,x)),!m.soul&&_>=g(c.graph[x],D)&&($=(c.$.get(x)._.next||"")[D])&&($.put=C,typeof(b=S(C))=="string"&&($.put=c.$.get(b)._.put||C)),this.to&&this.to.next(e),n.any&&setTimeout.each(Object.keys(n.any),function(u){(u=n.any[u])&&u(e)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(u){(u=n.echo[u])&&u.on("in",e)},0,99),((e.$$||"")._||m).soul&&($=n.next)&&($=$[D])&&(b={},Object.keys(e).forEach(function(u){b[u]=e[u]}),b.$=(e.$$||e.$).get(b.get=D),delete b.$$,delete b.$$$,$.on("in",b)),y(e,n))}o.on.in=p;function y(e,n){if(n=n||this.as||e.$._,!(e.$$&&this!==o.on)&&!(!e.put||n.soul)){var c=e.put||"",l=c["="]||c[":"],m,b=n.root,x=b.$.get(c["#"]).get(c["."])._;if(typeof(l=S(l))!="string"){this===o.on&&((x.echo||(x.echo={}))[n.id]=n);return}if(!((x.echo||(x.echo={}))[n.id]&&!(b.pass||"")[n.id])){if(m=b.pass){if(m[l+n.id])return;m[l+n.id]=1}(x.echo||(x.echo={}))[n.id]=n,n.has&&(n.link=l);var D=b.$.get(x.link=l)._;(D.echo||(D.echo={}))[x.id]=x;var m=n.ask||"";(m[""]||n.lex)&&D.on("out",{get:{"#":l}}),setTimeout.each(Object.keys(m),function(_,$){!_||!($=m[_])||$.on("out",{get:{"#":l,".":_}})},0,99)}}}o.on.link=y;function h(e,n){var c=e.put||"",l=s!==c["="]?c["="]:c[":"],m=n.root,b,x;if(s===l){if(n.soul&&s!==n.put||(x=(e.$$||e.$||"")._||"",e["@"]&&(s!==x.put||s!==n.put)))return;(b=n.link||e.linked)&&delete(m.$.get(b)._.echo||"")[n.id],n.has&&(n.link=null),n.put=s,setTimeout.each(Object.keys(n.next||""),function(D,C){(C=n.next[D])&&(b&&delete(m.$.get(b).get(D)._.echo||"")[C.id],C.on("in",{get:D,put:s,$:C.$}))},0,99);return}n.soul||e.$$||(b=S(l),x=e.$._||"",!((b===x.link||n.has&&!x.link)&&!((m.pass||"")[n.id]&&typeof b!="string"))&&(delete(x.echo||"")[n.id],h({get:n.get,put:s,$:e.$,linked:e.linked=e.linked||x.link},n)))}o.on.unlink=h;function t(e,n){var c=this.as,l=c.$._;l.root;var m=c.get||"",b=(e.put||"")[m["#"]]||"";if(!e.put||typeof m["."]=="string"&&s===b[m["."]]){if(s!==l.put||!l.soul&&!l.has)return;l.ack=(l.ack||0)+1,l.on("in",{get:l.get,put:l.put=s,$:l.$,"@":e["@"]});return}(e._||{}).miss=1,o.on.put(e)}var f={},s,a=String.random,S=o.valid,r=function(e,n){return e&&Object.prototype.hasOwnProperty.call(e,n)},v=o.state,g=v.is,w=v.ify})(k,"./chain"),k(function(d){var o=k("./root");o.chain.get=function(s,a,S){var r,v;if(typeof s=="string"){if(s.length==0)return(r=this.chain())._.err={err:o.log("0 length key!",s)},a&&a.call(r,r._.err),r;var g=this,w=g._,e=w.next||h;(r=e[s])||(r=s&&i(s,g)),r=r&&r.$}else if(typeof s=="function"){let b=function(D,C,_){if(!b.stun&&!((B=c.pass)&&!B[l])){var $=D.$._,u=(D.$$||"")._,T=(u||$).put,j=!$.has&&!$.soul,A={},B;if((j||f===T)&&(T=f===((B=D.put)||"")["="]?f===(B||"")[":"]?B:B[":"]:B["="]),typeof(B=o.valid(T))=="string"&&(T=f===(B=c.$.get(B)._.put)?n.not?f:T:B),!(n.not&&f===T)){if(f===n.stun){if((B=c.stun)&&B.on&&(w.$.back(function(N){if(B.on(""+N.id,A={}),(A.run||0)<b.id)return A}),!A.run&&B.on(""+$.id,A={}),!A.run&&u&&B.on(""+u.id,A={}),b.id>A.run&&((!A.stun||A.stun.end)&&(A.stun=B.on("stun"),A.stun=A.stun&&A.stun.last),A.stun&&!A.stun.end))){(A.stun.add||(A.stun.add={}))[l]=function(){b(D,C,1)};return}if(f===T&&(_=0),(B=c.hatch)&&!B.end&&f===n.hatch&&!_){if(m[$.$._.id])return;m[$.$._.id]=1,B.push(function(){b(D,C,1)});return}m={}}if(c.pass){if(c.pass[l+$.id])return;c.pass[l+$.id]=1}if(n.on){n.ok.call($.$,T,$.get,D,C||b);return}if(n.v2020){n.ok(D,C||b);return}Object.keys(D).forEach(function(N){B[N]=D[N]},B={}),D=B,D.put=T,n.ok.call(n.as,D,C||b)}}};if(a===!0)return p(this,s,a,S),this;r=this;var w=r._,n=a||{},c=w.root,l;n.at=w,n.ok=s;var m={};return b.at=w,(w.any||(w.any={}))[l=String.random(7)]=b,b.off=function(){b.stun=1,w.any&&delete w.any[l]},b.rid=y,b.id=n.run||++c.once,v=c.pass,(c.pass={})[l]=1,n.out=n.out||{get:{}},w.on("out",n.out),c.pass=v,r}else{if(typeof s=="number")return this.get(""+s,a,S);if(typeof(v=t(s))=="string")return this.get(v,a,S);(v=this.get.next)&&(r=v(this,s))}return r?(a&&typeof a=="function"&&r.get(a,S),r):((r=this.chain())._.err={err:o.log("Invalid get request!",s)},a&&a.call(r,r._.err),r)};function i(s,a){var S=a._,r=S.next,v=a.chain(),g=v._;return r||(r=S.next={}),r[g.get=s]=g,a===S.root.$?g.soul=s:(S.soul||S.has)&&(g.has=s),g}function p(s,a,S,r){var v=s._,g=0,w;return(w=v.soul||v.link)?a(w,r,v):v.jam?v.jam.push([a,r]):(v.jam=[[a,r]],s.get(function(e,n){if(!(f===e.put&&!v.root.opt.super&&(w=Object.keys(v.root.opt.peers).length)&&++g<=w)){n.rid(e);var c=(c=e.$)&&c._||{},l=0,m;for(w=v.jam,delete v.jam;m=w[l++];){var b=m[0];m=m[1],b&&b(c.link||c.soul||o.valid(e.put)||((e.put||{})._||{})["#"],m,e,n)}}},{out:{get:{".":!0}}}),s)}function y(s){var a=this.at||this.on;if(!s||a.soul||a.has)return this.off();if(s=(s=(s=s.$||s)._||s).id){a.map;var S;if((S=this.seen||(this.seen={}))[s])return!0;S[s]=!0}}var h={},t=o.valid,f})(k,"./get"),k(function(d){var o=k("./root");o.chain.put=function(r,v,g){var w=this,e=w._,n=e.root;g=g||{},g.root=e.root,g.run||(g.run=n.once),i(g,e.id),g.ack=g.ack||v,g.via=g.via||w,g.data=g.data||r,g.soul||(g.soul=e.soul||typeof v=="string"&&v);var c=g.state=g.state||o.state();return typeof r=="function"?(r(function(l){g.data=l,w.put(t,t,g)}),w):g.soul?(g.$=n.$.get(g.soul),g.todo=[{it:g.data,ref:g.$}],g.turn=g.turn||s,g.ran=g.ran||p,function l(){var m=g.todo,b=m.pop(),x=b.it;b.ref&&b.ref._.id;var D,C,_,$,u;if(i(g,b.ref),($=b.todo)&&(C=$.pop(),x=x[C],$.length&&m.push(b)),C&&(m.path||(m.path=[])).push(C),!(D=a(x))&&!(u=o.is(x))){if(!Object.plain(x)){p.err(g,"Invalid data: "+h(x)+" at "+(g.via.back(function(B){B.get&&$.push(B.get)},$=[])||$.join("."))+"."+(m.path||[]).join("."));return}for(var T=g.seen||(g.seen=[]),j=T.length;j--;)if(x===($=T[j]).it){D=x=$.link;break}}if(C&&D)b.node=S(b.node,C,c,x);else{let B=function(N,G){var J=_.link["#"];G&&(G.off(),G.rid(N));var U=J||N.soul||($=(N.$$||N.$)._||"").soul||$.link||(($=$.put||"")._||"")["#"]||$["#"]||(($=N.put||"")&&N.$$?$["#"]:($["="]||$[":"]||"")["#"]);if(!J&&i(g,N.$),!U&&!b.link["#"]){(b.wait||(b.wait=[])).push(function(){B(N,G)});return}U||(U=[],(N.$$||N.$).back(function(R){if($=R.soul||R.link)return U.push($);U.push(R.get)}),U=U.reverse().join("/")),_.link["#"]=U,!u&&(((g.graph||(g.graph={}))[U]=_.node||(_.node={_:{}}))._["#"]=U),delete g.wait[A],_.wait&&setTimeout.each(_.wait,function(R){R&&R()}),g.ran(g)};if(!g.seen){p.err(g,"Data at root of graph must be a node (an object).");return}g.seen.push(_={it:x,link:{},todo:u?[]:Object.keys(x).sort().reverse(),path:(m.path||[]).slice(),up:b}),b.node=S(b.node,C,c,_.link),!u&&_.todo.length&&m.push(_);var A=g.seen.length;(g.wait||(g.wait={}))[A]="",$=(_.ref=u?x:C?b.ref.get(C):b.ref)._,($=x&&(x._||"")["#"]||$.soul||$.link)?B({soul:$}):_.ref.get(B,{run:g.run,v2020:1,out:{get:{".":" "}}})}if(!m.length)return g.ran(g);g.turn(l)}(),w):(y(g),w)};function i(r,v){if(v){v=(v._||"").id||v;var g=r.root.stun||(r.root.stun={on:o.on}),w={},e;r.stun||(r.stun=g.on("stun",function(){})),(e=g.on(""+v))&&e.the.last.next(w),!(w.run>=r.run)&&g.on(""+v,function(n){if(r.stun.end){this.off(),this.to.next(n);return}n.run=n.run||r.run,n.stun=n.stun||r.stun})}}function p(r){if(r.err){p.end(r.stun,r.root);return}if(!(r.todo.length||r.end||!Object.empty(r.wait))){r.end=1;var v=r.$.back(-1)._,g=v.root,w=v.ask(function(l){g.on("ack",l),l.err&&!l.lack&&o.log(l),++e>(r.acks||0)&&this.off(),r.ack&&r.ack(l,this)},r.opt),e=0,n=r.stun,c;(c=function(){n&&(p.end(n,g),setTimeout.each(Object.keys(n=n.add||""),function(l){(l=n[l])&&l()}))}).hatch=c,r.ack&&!r.ok&&(r.ok=r.acks||9),r.via._.on("out",{put:r.out=r.graph,ok:r.ok&&{"@":r.ok+1},opt:r.opt,"#":w,_:c})}}p.end=function(r,v){r.end=f,r.the.to===r&&r===r.the.last&&delete v.stun,r.off()},p.err=function(r,v){(r.ack||f).call(r,r.out={err:r.err=o.log(v)}),r.ran(r)};function y(r){var v=r.via._,g;r.via=r.via.back(function(w){if(w.soul||!w.get)return w.$;g=r.data,(r.data={})[w.get]=g}),(!r.via||!r.via._.soul)&&(r.via=v.root.$.get(((r.data||"")._||"")["#"]||v.$.back("opt.uuid")())),r.via.put(r.data,r.ack,r)}function h(r,v){return r&&(v=r.constructor)&&v.name||typeof r}var t,f=function(){},s=setTimeout.turn,a=o.valid,S=o.state.ify})(k,"./put"),k(function(d){var o=k("./root");k("./chain"),k("./back"),k("./put"),k("./get"),d.exports=o})(k,"./index"),k(function(d){var o=k("./index");o.chain.on=function(y,h,t,f){var s=this,a=s._;a.root;var S;if(typeof y=="string")return h?(S=a.on(y,h,t||a,f),t&&t.$&&(t.subs||(t.subs=[])).push(S),s):a.on(y);var r=h;return(r=r===!0?{change:!0}:r||{}).not=1,r.on=1,s.get(y,r),s},o.chain.once=function(y,h){if(h=h||{},!y)return i(this);var t=this,f=t._,s=f.root;f.put;var a=String.random(7),S;return t.get(function(r,v,g,w){var e=this,n=e._,c=n.one||(n.one={});if(w.stun||c[a]==="")return;if((S=o.valid(r))===!0){l();return}if(typeof S=="string")return;clearTimeout((f.one||"")[a]),clearTimeout(c[a]),c[a]=setTimeout(l,h.wait||99);function l(m){if(!n.has&&!n.soul&&(n={put:r,get:v}),p===(S=n.put)&&(S=((g.$$||"")._||"").put),typeof o.valid(S)=="string"&&(S=s.$.get(S)._.put,S===p&&!m)){c[a]=setTimeout(function(){l(1)},h.wait||99);return}w.stun||c[a]!==""&&(c[a]="",(f.soul||f.has)&&w.off(),y.call(e,S,n.get),clearTimeout(c[a]))}},{on:1}),t};function i(y,h,t){return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(t=y.chain())._.nix=y.once(function(f,s){t._.on("in",this._)}),t._.lex=y._.lex,t}o.chain.off=function(){var y=this,h=y._,t,f=h.back;if(f)return h.ack=0,(t=f.next)&&t[h.get]&&delete t[h.get],(t=f.any)&&(delete f.any,f.any={}),(t=f.ask)&&delete t[h.get],(t=f.put)&&delete t[h.get],(t=h.soul)&&delete f.root.graph[t],(t=h.map)&&Object.keys(t).forEach(function(s,a){a=t[s],a.link&&f.root.$.get(a.link).off()}),(t=h.next)&&Object.keys(t).forEach(function(s,a){a=t[s],a.$.off()}),h.on("off",{}),y};var p})(k,"./on"),k(function(d){var o=k("./index"),i=o.chain.get.next;o.chain.get.next=function(t,f){var s;return Object.plain(f)?(s=((s=f["#"])||"")["="]||s)?t.get(s):((s=t.chain()._).lex=f,t.on("in",function(a){String.match(a.get||(a.put||"")["."],f["."]||f["#"]||f)&&s.on("in",a),this.to.next(a)}),s.$):(i||y)(t,f)},o.chain.map=function(t,f,s){var a=this,S=a._,r,v;return Object.plain(t)&&(r=t["."]?t:{".":t},t=h),t?(o.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),v=a.chain(),a.map().on(function(g,w,e,n){var c=(t||y).call(this,g,w,e,n);if(h!==c){if(g===c)return v._.on("in",e);if(o.is(c))return v._.on("in",c._);var l={};Object.keys(e.put).forEach(function(m){l[m]=e.put[m]},l),l["="]=c,v._.on("in",{get:w,put:l})}}),v):((v=S.each)||((S.each=v=a.chain())._.lex=r||v._.lex||S.lex,v._.nix=a.back("nix"),a.on("in",p,v._)),v)};function p(t){this.to.next(t);var f=this.as,s=t.$,a=s._,S=t.put,r;!a.soul&&!t.$$||(r=f.lex)&&!String.match(t.get||(S||"")["."],r["."]||r["#"]||r)||o.on.link(t,f)}var y=function(){},h})(k,"./map"),k(function(d){var o=k("./index");o.chain.set=function(i,p,y){var h=this,t=h.back(-1),f,s;return p=p||function(){},y=y||{},y.item=y.item||i,(f=((i||"")._||"")["#"])&&((i={})["#"]=f),typeof(s=o.valid(i))=="string"?h.get(f=s).put(i,p,y):o.is(i)?(h.put(function(a){i.get(function(S,r,v){if(!S)return p.call(h,{err:o.log(\'Only a node can be linked! Not "\'+v.put+\'"!\')});(s={})[S]={"#":S},a(s)},!0)}),i):(Object.plain(i)&&(i=t.get(f=h.back("opt.uuid")()).put(i)),h.get(f||t.back("opt.uuid")(7)).put(i,p,y))}})(k,"./set"),k(function(d){k("./shim");var o=function(){},i=JSON.parseAsync||function(t,f,s){var a,S=+new Date;try{f(a,JSON.parse(t,s),p.sucks(+new Date-S))}catch(r){f(r)}},p=JSON.stringifyAsync||function(t,f,s,a){var S,r=+new Date;try{f(S,JSON.stringify(t,s,a),p.sucks(+new Date-r))}catch(v){f(v)}};p.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),p.sucks=o)};function y(t){var f=function(){},s=t.opt||{};s.log=s.log||console.log,s.gap=s.gap||s.wait||0,s.max=s.max||(s.memory?s.memory*999*999:3e8)*.3,s.pack=s.pack||s.max*.01*.01,s.puff=s.puff||9;var a=setTimeout.turn||setTimeout,S=t.dup,r=S.check,v=S.track,g=f.hear=function(n,c){if(n){if(s.max<=n.length)return f.say({dam:"!",err:"Message too big!"},c);f===this&&(g.d+=n.length||0,++g.c);var l=c.SH=+new Date,m=n[0],b;if(m==="["){i(n,function(x,D){if(x||!D)return f.say({dam:"!",err:"DAM JSON parse error."},c);console.STAT&&console.STAT(+new Date,D.length,"# on hear batch");var C=s.puff;(function _(){for(var $=+new Date,u=0,T;u<C&&(T=D[u++]);)f.hear(T,c);D=D.slice(u),console.STAT&&console.STAT($,+new Date-$,"hear loop"),w(c),D.length&&a(_,0)})()}),n="";return}if(m==="{"||(n["#"]||Object.plain(n))&&(b=n)){if(b)return g.one(b,c,l);i(n,function(x,D){if(x||!D)return f.say({dam:"!",err:"DAM JSON parse error."},c);g.one(D,c,l)});return}}};g.one=function(n,c,l){var m,b,x,D,C;if(n.DBG&&(n.DBG=C={DBG:n.DBG}),C&&(C.h=l),C&&(C.hp=+new Date),(m=n["#"])||(m=n["#"]=String.random(9)),!(x=r(m))&&(b=n["##"],!(b&&(x=n["@"]||n.get&&m)&&S.check(D=x+b)))){if((n._=function(){}).via=f.leap=c,(x=n["><"])&&typeof x=="string"&&x.slice(0,99).split(",").forEach(function($){this[$]=1},n._.yo={}),x=n.dam){(x=f.hear[x])&&x(n,c,t),v(m);return}(x=n.ok)&&(n._.near=x["/"]);var l=+new Date;C&&(C.is=l),c.SI=m,v.ed=function($){m===$&&(v.ed=0,($=S.s[m])&&($.via=c,n.get&&($.it=n)))},t.on("in",f.last=n),C&&(C.hd=+new Date),console.STAT&&console.STAT(l,+new Date-l,n.get?"msg get":n.put?"msg put":"msg"),v(m),D&&v(D),f.leap=f.last=null}},g.c=g.d=0,function(){var n=0,c;f.hash=function(b,x){var D,C,_,$=+new Date;p(b.put,function u(T,j){var A=(C||(C=_=j||"")).slice(0,32768);if(D=String.hash(A,D),C=C.slice(32768),C){a(u,0);return}console.STAT&&console.STAT($,+new Date-$,"say json+hash"),b._.$put=_,b["##"]=D,f.say(b,x),delete b._.$put},l)};function l(b,x){var D;return x instanceof Object?(Object.keys(x).sort().forEach(m,{to:D={},on:x}),D):x}function m(b){this.to[b]=this.on[b]}f.say=function(b,x){var D;if((D=this)&&(D=D.to)&&D.next&&D.next(b),!b)return!1;var C,_,$,u=b["@"],T=b._||(b._=function(){}),j=b.DBG,A=+new Date;if(T.y=T.y||A,x||j&&(j.y=A),(C=b["#"])||(C=b["#"]=String.random(9)),!c&&v(C),!(_=b["##"])&&h!==b.put&&!T.via&&u){f.hash(b,x);return}if(!x&&u&&(x=(D=S.s[u])&&(D.via||(D=D.it)&&(D=D._)&&D.via)||(D=f.last)&&u===D["#"]&&f.leap),!x&&u)return S.s[u]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(u&&!b.put&&!_&&((S.s[u]||"").it||"")["##"])return!1;if(!x&&f.way)return f.way(b);if(j&&(j.yh=+new Date),!($=T.raw)){f.raw(b,x);return}if(j&&(j.yr=+new Date),!x||!x.id){if(!Object.plain(x||s.peers))return!1;var A=+new Date;s.puff;var B=s.peers,N=Object.keys(x||s.peers||{});console.STAT&&console.STAT(A,+new Date-A,"peer keys"),function U(){var R=+new Date;c=1;var P=T.raw;T.raw=$;for(var M=0,I;M<9&&(I=(N||"")[M++]);)(I=B[I]||(x||"")[I])&&f.say(b,I);T.raw=P,c=0,N=N.slice(M),console.STAT&&console.STAT(R,+new Date-R,"say loop"),N.length&&(a(U,0),u&&v(u))}();return}if(!x.wire&&f.wire&&f.wire(x),C!==x.last){if(x.last=C,x===T.via||(D=T.yo)&&(D[x.url]||D[x.pid]||D[x.id]))return!1;if(console.STAT&&console.STAT(A,((j||T).yp=+new Date)-(T.y||A),"say prep"),!c&&u&&v(u),x.batch){if(x.tail=(D=x.tail||0)+$.length,x.tail<=s.pack){x.batch+=(D?",":"")+$;return}w(x)}x.batch="[";var G=+new Date;setTimeout(function(){console.STAT&&console.STAT(G,+new Date-G,"0ms TO"),w(x)},s.gap),e($,x),console.STAT&&u===x.SI&&console.STAT(A,+new Date-x.SH,"say ack")}},f.say.c=f.say.d=0,f.raw=function(b,x){if(!b)return"";var D=b._||{},C,_;if(_=D.raw)return _;if(typeof b=="string")return b;var $=b["##"],u=b["@"];if($&&u){if(!D.via&&r(u+$))return!1;if(_=(S.s[u]||"").it){if($===_["##"])return!1;_["##"]||(_["##"]=$)}}if(!b.dam&&!b["@"]){var T=0,j=[];_=s.peers;for(var A in _){var B=_[A];if(j.push(B.url||B.pid||B.id),++T>6)break}T>1&&(b["><"]=j.join())}if(b.put&&(_=b.ok)&&(b.ok={"@":(_["@"]||1)-1,"/":_["/"]==b._.near?f.near:_["/"]}),C=D.$put){_={},Object.keys(b).forEach(function(G){_[G]=b[G]}),_.put=":])([:",p(_,function(G,J){if(!G){var U=+new Date;_=J.indexOf(\'"put":":])([:"\'),N(h,J=J.slice(0,_+6)+C+J.slice(_+14)),console.STAT&&console.STAT(U,+new Date-U,"say slice")}});return}p(b,N);function N(G,J){G||(D.raw=J,f.say(b,x))}}}();function w(n){var c=n.batch,l=typeof c=="string";if(l&&(c+="]"),n.batch=n.tail=null,!!c&&!(l?3>c.length:!c.length)){if(!l)try{c=c.length===1?c[0]:JSON.stringify(c)}catch(m){return s.log("DAM JSON stringify error",m)}c&&e(c,n)}}function e(n,c){try{var l=c.wire;c.say?c.say(n):l.send&&l.send(n),f.say.d+=n.length||0,++f.say.c}catch{(c.queue=c.queue||[]).push(n)}}return f.near=0,f.hi=function(n){var c=n.wire,l;if(!c){f.wire(n.length&&{url:n,id:n}||n);return}n.id?s.peers[n.url||n.id]=n:(l=n.id=n.id||n.url||String.random(9),f.say({dam:"?",pid:t.opt.pid},s.peers[l]=n),delete S.s[n.last]),n.met||(f.near++,n.met=+new Date,t.on("hi",n)),l=n.queue,n.queue=[],setTimeout.each(l||[],function(m){e(m,n)},0,9)},f.bye=function(n){n.met&&--f.near,delete n.met,t.on("bye",n);var c=+new Date;c=c-(n.met||c),f.bye.time=((f.bye.time||c)+c)/2},f.hear["!"]=function(n,c){s.log("Error:",n.err)},f.hear["?"]=function(n,c){n.pid&&(c.pid||(c.pid=n.pid),n["@"])||(f.say({dam:"?",pid:s.pid,"@":n["#"]},c),delete S.s[c.last])},f.hear.mob=function(n,c){if(n.peers){var l=Object.keys(n.peers),m=l[Math.random()*l.length>>0];m&&(f.bye(c),f.hi(m))}},t.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",f.say)}),t.on("bye",function(n,c){n=s.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(c=n.wire)&&c.close&&c.close(),delete s.peers[n.id],n.wire=null}),t.on("bye",function(n,c){this.to.next(n),(c=console.STAT)&&(c.peers=f.near),(c=n.url)&&setTimeout(function(){},s.lack||9e3)}),t.on("hi",function(n,c){if(this.to.next(n),(c=console.STAT)&&(c.peers=f.near),!s.super){var l=Object.keys(t.next||"");l.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(l,function(m){var b=t.next[m];if(s.super||(b.ask||"")[""]){f.say({get:{"#":m}},n);return}setTimeout.each(Object.keys(b.ask||""),function(x){x&&f.say({"##":String.hash((t.graph[m]||"")[x]),get:{"#":m,".":x}},n)})})}}),f}var h;try{d.exports=y}catch{}})(k,"./mesh"),k(function(d){var o=k("./index");o.Mesh=k("./mesh"),o.on("opt",function(p){if(this.to.next(p),p.once)return;var y=p.opt;if(y.WebSocket===!1)return;var h=o.window||{},t=y.WebSocket||h.WebSocket||h.webkitWebSocket||h.mozWebSocket;if(!t)return;y.WebSocket=t;var f=y.mesh=y.mesh||o.Mesh(p);f.wire||y.wire,f.wire=y.wire=s;function s(v){try{if(!v||!v.url)return w&&w(v);var g=v.url.replace(/^http/,"ws"),w=v.wire=new y.WebSocket(g);return w.onclose=function(){S(v),y.mesh.bye(v)},w.onerror=function(e){S(v)},w.onopen=function(){y.mesh.hi(v)},w.onmessage=function(e){e&&y.mesh.hear(e.data||e,v)},w}catch{y.mesh.bye(v)}}setTimeout(function(){!y.super&&p.on("out",{dam:"hi"})},1);var a=2*999;function S(v){clearTimeout(v.defer),y.peers[v.url]&&(r&&v.retry<=0||(v.retry=(v.retry||y.retry+1||60)-(-v.tried+(v.tried=+new Date)<a*4?1:0),v.defer=setTimeout(function g(){if(r&&r.hidden)return setTimeout(g,a);s(v)},a)))}var r=""+i!=typeof document&&document});var i})(k,"./websocket"),k(function(d){if(!(typeof Gun>"u")){var o=function(){},i;try{i=(Gun.window||o).localStorage}catch{}i||(Gun.log("Warning: No localStorage exists to persist data to!"),i={setItem:function(y,h){this[y]=h},removeItem:function(y){delete this[y]},getItem:function(y){return this[y]}});var p=JSON.stringifyAsync||function(y,h,t,f){var s;try{h(s,JSON.stringify(y,t,f))}catch(a){h(a)}};Gun.on("create",function y(h){this.to.next(h);var t=h.opt;h.graph;var f=[],s,a,S,r;if(t.localStorage===!1)return;t.prefix=t.file||"gun/";try{s=y[t.prefix]=y[t.prefix]||JSON.parse(S=i.getItem(t.prefix))||{}}catch{s=y[t.prefix]={}}S=(S||"").length,h.on("get",function(g){this.to.next(g);var w=g.get,e,n,c,l;!w||!(e=w["#"])||(n=s[e]||l,n&&(c=w["."])&&!Object.plain(c)&&(n=Gun.state.ify({},c,Gun.state.is(n,c),n[c],e)),Gun.on.get.ack(g,n))}),h.on("put",function(g){this.to.next(g);var w=g.put,e=w["#"],n=w["."],c=g["#"],l=g.ok||"";if(s[e]=Gun.state.ify(s[e],n,w[">"],w[":"],e),r&&S>4999880){h.on("in",{"@":c,err:"localStorage max!"});return}!g["@"]&&(!g._.via||Math.random()<l["@"]/l["/"])&&f.push(c),!a&&(a=setTimeout(v,9+S/333))});function v(){if(!f.length&&((setTimeout.turn||"").s||"").length){setTimeout(v,99);return}var g=f;clearTimeout(a),a=!1,f=[],p(s,function(w,e){try{!w&&i.setItem(t.prefix,e)}catch(n){w=r=n||"localStorage failure"}w&&(Gun.log(w+" Consider using GUN\'s IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),h.on("localStorage:error",{err:w,get:t.prefix,put:s})),S=e.length,setTimeout.each(g,function(n){h.on("in",{"@":n,err:w,ok:0})},0,99)})}})}})(k,"./localStorage")})(),function(){var k;if(""+k!=typeof Gun){var O=function(u){console.warn("Warning! Deprecated internal utility will break in next version:",u)},d=Gun;d.fn=d.fn||{is:function(u){return O("fn"),!!u&&typeof u=="function"}},d.bi=d.bi||{is:function(u){return O("bi"),u instanceof Boolean||typeof u=="boolean"}},d.num=d.num||{is:function(u){return O("num"),!o(u)&&(u-parseFloat(u)+1>=0||u===1/0||u===-1/0)}},d.text=d.text||{is:function(u){return O("text"),typeof u=="string"}},d.text.ify=d.text.ify||function(u){return O("text.ify"),d.text.is(u)?u:typeof JSON<"u"?JSON.stringify(u):u&&u.toString?u.toString():u},d.text.random=d.text.random||function(u,T){O("text.random");var j="";for(u=u||24,T=T||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";u>0;)j+=T.charAt(Math.floor(Math.random()*T.length)),u--;return j},d.text.match=d.text.match||function(u,T){var j,A;return O("text.match"),typeof u!="string"?!1:(typeof T=="string"&&(T={"=":T}),T=T||{},j=T["="]||T["*"]||T[">"]||T["<"],u===j?!0:A!==T["="]?!1:(j=T["*"]||T[">"]||T["<"],u.slice(0,(j||"").length)===j?!0:A!==T["*"]?!1:A!==T[">"]&&A!==T["<"]?u>=T[">"]&&u<=T["<"]:A!==T[">"]&&u>=T[">"]||A!==T["<"]&&u<=T["<"]))},d.text.hash=d.text.hash||function(u,T){if(O("text.hash"),typeof u=="string"){if(T=T||0,!u.length)return T;for(var j=0,A=u.length,B;j<A;++j)B=u.charCodeAt(j),T=(T<<5)-T+B,T|=0;return T}},d.list=d.list||{is:function(u){return O("list"),u instanceof Array}},d.list.slit=d.list.slit||Array.prototype.slice,d.list.sort=d.list.sort||function(u){return O("list.sort"),function(T,j){return!T||!j?0:(T=T[u],j=j[u],T<j?-1:T>j?1:0)}},d.list.map=d.list.map||function(u,T,j){return O("list.map"),C(u,T,j)},d.list.index=1,d.obj=d.boj||{is:function(u){return O("obj"),u?u instanceof Object&&u.constructor===Object||Object.prototype.toString.call(u).match(/^\\[object (\\w+)\\]$/)[1]==="Object":!1}},d.obj.put=d.obj.put||function(u,T,j){return O("obj.put"),(u||{})[T]=j,u},d.obj.has=d.obj.has||function(u,T){return O("obj.has"),u&&Object.prototype.hasOwnProperty.call(u,T)},d.obj.del=d.obj.del||function(u,T){if(O("obj.del"),!!u)return u[T]=null,delete u[T],u},d.obj.as=d.obj.as||function(u,T,j,A){return O("obj.as"),u[T]=u[T]||(A===j?{}:j)},d.obj.ify=d.obj.ify||function(u){if(O("obj.ify"),l(u))return u;try{u=JSON.parse(u)}catch{u={}}return u},function(){var u;function T(j,A){b(this,A)&&u!==this[A]||(this[A]=j)}d.obj.to=d.obj.to||function(j,A){return O("obj.to"),A=A||{},C(j,T,A),A}}(),d.obj.copy=d.obj.copy||function(u){return O("obj.copy"),u&&JSON.parse(JSON.stringify(u))},function(){function u(T,j){var A=this.n,B;if(!(A&&(j===A||l(A)&&b(A,j)))&&B!==j)return!0}d.obj.empty=d.obj.empty||function(T,j){return O("obj.empty"),T?!C(T,u,{n:j}):!0}}(),function(){function u(A,B){if(arguments.length===2){u.r=u.r||{},u.r[A]=B;return}u.r=u.r||[],u.r.push(A)}var T=Object.keys,j;Object.keys=Object.keys||function(A){return j(A,function(B,N,G){G(N)})},d.obj.map=j=d.obj.map||function(A,B,N){O("obj.map");var G,J=0,U,R,P,M,I=typeof B=="function";if(u.r=G,T&&l(A)&&(P=T(A),M=!0),N=N||{},o(A)||P)for(U=(P||A).length;J<U;J++){var K=J+d.list.index;if(I){if(R=M?B.call(N,A[P[J]],P[J],u):B.call(N,A[J],K,u),R!==G)return R}else if(B===A[M?P[J]:J])return P?P[J]:K}else for(J in A)if(I){if(b(A,J)&&(R=N?B.call(N,A[J],J,u):B(A[J],J,u),R!==G))return R}else if(B===A[J])return J;return I?u.r:d.list.index?0:-1}}(),d.time=d.time||{},d.time.is=d.time.is||function(u){return O("time"),u?u instanceof Date:+new Date().getTime()};var n=d.fn.is,o=d.list.is,c=d.obj,l=c.is,b=c.has,C=c.map,i={};i.is=function(u){return O("val.is"),u===k?!1:u===null?!0:u===1/0?!1:h(u)||y(u)||v(u)?!0:i.link.is(u)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(T){if(O("val.link.is"),T&&T[p]&&!T._&&l(T)){var j={};if(C(T,u,j),j.id)return j.id}return!1};function u(T,j){var A=this;if(A.id)return A.id=!1;if(j==p&&h(T))A.id=T;else return A.id=!1}}(),i.link.ify=function(u){return O("val.link.ify"),D({},p,u)},d.obj.has._=".";var p=i.link._,k,y=d.bi.is,v=d.num.is,h=d.text.is,c=d.obj,l=c.is,D=c.put,C=c.map;d.val=d.val||i;var t={_:"_"};t.soul=function(u,T){return O("node.soul"),u&&u._&&u._[T||a]},t.soul.ify=function(u,T){return O("node.soul.ify"),T=typeof T=="string"?{soul:T}:T||{},u=u||{},u._=u._||{},u._[a]=T.soul||u._[a]||s(),u},t.soul._=i.link._,function(){t.is=function(T,j,A){O("node.is");var B;return l(T)&&(B=t.soul(T))?!C(T,u,{as:A,cb:j,s:B,n:T}):!1};function u(T,j){if(j!==t._){if(!i.is(T))return!0;this.cb&&this.cb.call(this.as,T,j,this.n,this.s)}}}(),function(){t.ify=function(T,j,A){return O("node.ify"),j?typeof j=="string"?j={soul:j}:typeof j=="function"&&(j={map:j}):j={},j.map&&(j.node=j.map.call(A,T,k,j.node||{})),(j.node=t.soul.ify(j.node||{},j))&&C(T,u,{o:j,as:A}),j.node};function u(T,j){var A=this.o,B,N;if(A.map){B=A.map.call(this.as,T,""+j,A.node),N===B?m(A.node,j):A.node&&(A.node[j]=B);return}i.is(T)&&(A.node[j]=T)}}();var c=d.obj,l=c.is,m=c.del,C=c.map,f=d.text,s=f.random,a=t.soul._,k;d.node=d.node||t;var S=d.state;S.lex=function(){return O("state.lex"),S().toString(36).replace(".","")},S.to=function(u,T,j){O("state.to");var A=(u||{})[T];return l(A)&&(A=_(A)),S.ify(j,T,S.is(u,T),A,t.soul(u))},function(){S.map=function(T,j,A){O("state.map");var B,N=l(N=T||j)?N:null;return T=n(T=T||j)?T:null,N&&!T?(j=v(j)?j:S(),N[w]=N[w]||{},C(N,u,{o:N,s:j}),N):(A=A||l(j)?j:B,j=v(j)?j:S(),function(G,J,U,R){if(!T)return u.call({o:U,s:j},G,J),G;T.call(A||this||{},G,J,U,R),!(b(U,J)&&B===U[J])&&u.call({o:U,s:j},G,J)})};function u(T,j){w!==j&&S.ify(this.o,j,this.s)}}();var c=d.obj;c.as;var b=c.has,l=c.is,C=c.map,_=c.copy,r=d.num,v=r.is,g=d.fn,n=g.is,w=t._,k,e={};(function(){e.is=function(j,A,B,N){return O("graph.is"),!j||!l(j)||x(j)?!1:!C(j,u,{cb:A,fn:B,as:N})};function u(j,A){if(!j||A!==t.soul(j)||!t.is(j,this.fn,this.as))return!0;this.cb&&(T.n=j,T.as=this.as,this.cb.call(T.as,j,A,T))}function T(j){j&&t.is(T.n,j,T.as)}})(),function(){e.ify=function(N,G,J){O("graph.ify");var U={path:[],obj:N};return G?typeof G=="string"?G={soul:G}:typeof G=="function"&&(G.map=G):G={},typeof J=="string"&&(G.soul=G.soul||J,J=k),G.soul&&(U.link=i.link.ify(G.soul)),G.shell=(J||{}).shell,G.graph=G.graph||{},G.seen=G.seen||[],G.as=G.as||J,u(G,U),G.root=U.node,G.graph};function u(N,G){var J;return(J=B(N,G))?J:(G.env=N,G.soul=j,t.ify(G.obj,T,G)&&(G.link=G.link||i.link.ify(t.soul(G.node)),G.obj!==N.shell&&(N.graph[i.link.is(G.link)]=G.node)),G)}function T(N,G,J){var U=this,R=U.env,P,M;if(t._===G&&b(N,i.link._))return J._;if(P=A(N,G,J,U,R)){if(G||(U.node=U.node||J||{},b(N,t._)&&t.soul(N)&&(U.node._=_(N._)),U.node=t.soul.ify(U.node,i.link.is(U.link)),U.link=U.link||i.link.ify(t.soul(U.node))),(M=R.map)&&(M.call(R.as||{},N,G,J,U),b(J,G))){if(N=J[G],k===N){m(J,G);return}if(!(P=A(N,G,J,U,R)))return}if(!G)return U.node;if(P===!0)return N;if(M=u(R,{obj:N,path:U.path.concat(G)}),!!M.node)return M.link}}function j(N){var G=this,J=i.link.is(G.link),U=G.env.graph;G.link=G.link||i.link.ify(N),G.link[i.link._]=N,G.node&&G.node[t._]&&(G.node[t._][i.link._]=N),b(U,J)&&(U[N]=U[J],m(U,J))}function A(N,G,J,U,R){var P;if(i.is(N))return!0;if(l(N))return 1;if(P=R.invalid)return N=P.call(R.as||{},N,G,J),A(N,G,J,U,R);R.err="Invalid value at \'"+U.path.concat(G).join(".")+"\'!",d.list.is(N)&&(R.err+=" Use `.set(item)` instead of an Array.")}function B(N,G){for(var J=N.seen,U=J.length,R;U--;)if(R=J[U],G.obj===R.obj)return R;J.push(G)}}(),e.node=function(u){O("graph.node");var T=t.soul(u);if(T)return D({},T,u)},function(){e.to=function(T,j,A){if(O("graph.to"),!!T){var B={};return A=A||{seen:{}},C(T[j],u,{obj:B,graph:T,opt:A}),B}};function u(T,j){var A,B;if(t._===j){if(x(T,i.link._))return;this.obj[j]=_(T);return}if(!(A=i.link.is(T))){this.obj[j]=T;return}if(B=this.opt.seen[A]){this.obj[j]=B;return}this.obj[j]=this.opt.seen[A]=e.to(this.graph,A,this.opt)}}();var n=d.fn.is,c=d.obj,l=c.is,m=c.del,b=c.has,x=c.empty,D=c.put,C=c.map,_=c.copy,k;d.graph=d.graph||e}}()}(rt)),rt.exports}var yt=L();const vt=Z(yt);var it=typeof window<"u"?window.Gun:L();it.chain.promise=function(O){var k=this,O=O||function(d){return d};return new Promise(function(d,o){k.once(function(i,p){d({put:i,get:p,gun:this})})}).then(O)},it.chain.then=function(E){var k=this,O=new Promise((d,o)=>{k.once(function(i,p){d(i,p)})});return E?O.then(E):O};var at={exports:{}},ut;function X(){return ut||(ut=1,function(){function E(){var i=function(p,y,h){if(i.unit=0,!h&&d!==y&&(i.last=""+p<i.last?i.last:""+p,delete(i.$||{})[o]),h=h||i.$||(i.$={}),!p&&Object.keys(h).length)return h;p=""+p;for(var t=0,f=p.length-1,s=p[t],a,S;!(a=h[s])&&t<f;)s+=p[++t];if(a)if(t==f){if(d===y)return d===(S=a[""])?a:(i.unit=1)&&S;a[""]=y}else return d!==y&&delete a[o],i(p.slice(++t),y,a||(a={}));else{if(!k(h,function(r,v){var g=0,w="";if((v||"").length)for(;v[g]==p[g];)w+=v[g++];if(w){if(d===y)return g<=f?void 0:((S||(S={}))[v.slice(g)]=r,r);var e={};if(e[v.slice(g)]=r,g=p.slice(g),g===""?e[""]=y:(e[g]={})[""]=y,h[w]=e,E.debug&&""+w=="undefined"){console.log(0,w);debugger}return delete h[v],!0}})){if(d===y)return;if((h[s]||(h[s]={}))[""]=y,E.debug&&""+s=="undefined"){console.log(1,s);debugger}}if(d===y)return S}};return i}if(E.map=function i(p,y,h,t){try{t=t||[];var f=typeof p=="function"?p.$||{}:p;//!opt && console.log("WHAT IS T?", JSON.stringify(t).length);\nif(!f)return;if(typeof f=="string"){if(E.debug)throw["BUG:",p,y,h,t];return}var s=(f[o]||O).sort||(f[o]=function x(){return x.sort=Object.keys(f).sort(),x}()).sort,a;h=h===!0?{branch:!0}:h||{},(a=h.reverse)&&(s=s.slice(0).reverse());for(var S=h.start,r=h.end,v="￿",g=0,w=s.length;g<w;g++){var e=s[g],n=f[e],c,l,m;if(!(!n||e===""||o===e||e==="undefined")&&(l=t.slice(0),l.push(e),m=l.join(""),!(d!==S&&m<(S||"").slice(0,m.length))&&!(d!==r&&(r||v)<m))){if(a&&(c=i(n,y,h,l),d!==c))return c;if(d!==(c=n[""])){var b=1;if(d!==S&&m<(S||"")&&(b=0),d!==r&&m>(r||v)&&(b=0),b&&(c=y(c,m,e,t),d!==c))return c}else if(h.branch&&(c=y(d,m,e,t),d!==c))return c;if(t=l,!a&&(c=i(n,y,h,t),d!==c))return c;t.pop()}}}catch(x){console.error(x)}},typeof window<"u")window.Radix=E;else try{at.exports=E}catch{}var k=E.object=function(i,p,y){for(var h in i)if(i.hasOwnProperty(h)&&(y=p(i[h],h))!==d)return y},O={},d,o=""}()),at.exports}X();var wt={exports:{}},st={exports:{}},ct;function bt(){return ct||(ct=1,function(E){(function(){var k={},O,d=setTimeout.turn||typeof setImmediate!=""+O&&setImmediate||setTimeout;k.parseAsync=function(i,p,y,h){if(typeof i!="string"){try{p(O,JSON.parse(i))}catch(s){p(s)}return}var t={i:0,text:i,done:p,l:i.length,up:[]};h=h||1024*32,f();function f(){for(var s=t.text,a=t.i,S=t.l,r=0,v=t.w,g,w;r++<h;){var e=s[a++];if(a>S){t.end=!0;break}if(v){for(a=s.indexOf(\'"\',a-1),e=s[a],w=0;s[a-++w]=="\\\\";);w=!(w%2),g=g||w,e==\'"\'&&!w&&(v=O,w=t.s,t.a?(w=s.slice(t.sl,a),(g||1+w.indexOf("\\\\"))&&(w=JSON.parse(\'"\'+w+\'"\')),t.at instanceof Array?t.at.push(t.s=w):(t.at||(t.end=r=h,w=O),(t.at||{})[t.s]=t.s=w),t.s=O):(t.s=s.slice(t.sl,a),(g||1+t.s.indexOf("\\\\"))&&(t.s=JSON.parse(\'"\'+t.s+\'"\'))),t.a=g=O),++a}else switch(e){case\'"\':t.sl=a,v=!0;break;case":":t.ai=a,t.a=!0;break;case",":(t.a||t.at instanceof Array)&&(w=s.slice(t.ai,a-1))&&O!==(w=o(w))&&(t.at instanceof Array?t.at.push(w):t.at[t.s]=w),t.a=O,t.at instanceof Array&&(t.a=!0,t.ai=a);break;case"{":t.up.push(t.at||(t.at={})),t.at instanceof Array?t.at.push(t.at={}):O!==(w=t.s)&&(t.at[w]=t.at={}),t.a=O;break;case"}":t.a&&(w=s.slice(t.ai,a-1))&&O!==(w=o(w))&&(t.at instanceof Array?t.at.push(w):(t.at||(t.end=r=h,w=O),(t.at||{})[t.s]=w)),t.a=O,t.at=t.up.pop();break;case"[":O!==(w=t.s)?(t.up.push(t.at),t.at[w]=t.at=[]):t.at||t.up.push(t.at=[]),t.a=!0,t.ai=a;break;case"]":t.a&&(w=s.slice(t.ai,a-1))&&O!==(w=o(w))&&(t.at instanceof Array?t.at.push(w):t.at[t.s]=w),t.a=O,t.at=t.up.pop();break}}if(t.s=O,t.i=a,t.w=v,t.end){if(w=t.at,O===w)try{w=JSON.parse(i)}catch(n){return t.done(n)}t.done(O,w)}else d(f)}};function o(i){var p=parseFloat(i);if(!isNaN(p))return p;if(i=i.trim(),i=="true")return!0;if(i=="false")return!1;if(i=="null")return null}k.stringifyAsync=function(i,p,y,h,t){t=t||{},t.text=t.text||"",t.up=[t.at={d:i}],t.done=p,t.i=0;var f=0;s();function s(){var a=t.at,S=a.d,r="",v;switch(a.i&&a.i-a.j>0&&(r+=","),O!==(v=a.k)&&(r+=JSON.stringify(v)+":"),typeof S){case"boolean":r+=""+S;break;case"string":r+=JSON.stringify(S);break;case"number":r+=isNaN(S)?"null":S;break;case"object":if(!S){r+="null";break}if(S instanceof Array){r+="[",a={i:-1,as:S,up:a,j:0},a.l=S.length,t.up.push(t.at=a);break}if(typeof(S||"").toJSON!="function"){r+="{",a={i:-1,ok:Object.keys(S).sort(),as:S,up:a,j:0},a.l=a.ok.length,t.up.push(t.at=a);break}if(v=S.toJSON()){r+=v;break}case"function":if(a.as instanceof Array){r+="null";break}default:r="",a.j++}for(t.text+=r;1+a.i>=a.l;)t.text+=a.ok?"}":"]",a=t.at=a.up;if(++a.i<a.l){if((v=a.ok)?a.d=a.as[a.k=v[a.i]]:a.d=a.as[a.i],++f<9)return s();f=0,d(s);return}t.done(O,t.text)}},typeof window!=""+O&&(window.YSON=k);try{""+O!="object"&&(E.exports=k)}catch{}typeof JSON!=""+O&&(JSON.parseAsync=k.parseAsync,JSON.stringifyAsync=k.stringifyAsync)})()}(st)),st.exports}var ft,lt;function mt(){return lt||(lt=1,ft=function(E){var k=X();E.find("a",function(){var O=[];k.map(E.list,function(i,p){p.indexOf("%1B")+1&&i&&O.push([p,i])}),O.length&&console.log(`\n! ! ! WARNING ! ! !\nRAD v0.2020.x has detected OLD v0.2019.x data & automatically migrating. Automatic migration will be turned OFF in future versions! If you are just developing/testing, we recommend you reset your data. Please contact us if you have any concerns.\nThis message should only log once.`);var d,o;O.forEach(function(i){d=i[0],o=i[1],E.list(decodeURIComponent(d),o),E.list(d,0)}),d&&E.find.bad(d)})}),ft}(function(){function E(d){d=d||{},d.log=d.log||console.log,d.file=String(d.file||"radata");var o=(E.has||(E.has={}))[d.file];if(o)return o;d.max=d.max||(d.memory?d.memory*999*999:3e8)*.3,d.until=d.until||d.wait||250,d.batch=d.batch||10*1e3,d.chunk=d.chunk||1024*1024*1,d.code=d.code||{},d.code.from=d.code.from||"!",d.jsonify=!0;function i(g){return encodeURIComponent(g).replace(/\\*/g,"%2A")}function p(g){return v!==g&&(!g||typeof g!="object")}var y=""+v==typeof setImmediate?setTimeout:setImmediate,h=setTimeout.turn||y,v,t=O.object,f=0;if(!d.store)return d.log("ERROR: Radisk needs `opt.store` interface with `{get: fn, put: fn (, list: fn)}`!");if(!d.store.put)return d.log("ERROR: Radisk needs `store.put` interface with `(file, data, cb)`!");if(!d.store.get)return d.log("ERROR: Radisk needs `store.get` interface with `(file, cb)`!");d.store.list,""+v!=typeof Q("/lib")&&bt();var s=JSON.parseAsync||function(g,w,e){var n;try{w(n,JSON.parse(g,e))}catch(c){w(c)}},a=function(g,w,e,n,c){if(typeof w=="function"){var l=e||{};e=w,a.read(g,e,l,c||n);return}a.save(g,w,e,n,c)};a.save=function(g,w,e,n,c){var l={key:g},m,b;l.find=function(x){var D;if(l.file=x||(x=d.code.from),c&&(c=c[x]=c[x]||{}),c&&(c.sf=c.sf||+new Date),D=a.disk[x]){l.mix(v,D);return}a.parse(x,l.mix,v,c)},l.mix=function(x,D){if(c&&(c.sml=+new Date),c&&(c.sm=c.sm||+new Date),l.err=x||l.err){e(x);return}var C=l.file=(D||"").file||l.file,_;if(!D&&C!==d.code.from){a.find.bad(C),a.save(g,w,e,n);return}if((D=a.disk[C]||(a.disk[C]=D||O())).file||(D.file=C),d.compare&&(w=d.compare(D(g),w,g,C),v===w)){e(x,-1);return}if((l.disk=D)(g,w),n&&((_=(_=D.tags||(D.tags={}))[n]||(_[n]=a.tags[n]||(a.tags[n]={})))[C]||(_[C]=a.one[n]||(a.one[n]=e)),e=null),c&&(c.st=c.st||+new Date),D.Q){e&&D.Q.push(e);return}D.Q=e?[e]:[],D.to=setTimeout(l.write,d.until)},l.write=function(){c&&(c.sto=c.sto||+new Date);var x=m=l.file,D=l.disk;b=l.q=D.Q,l.tags=D.tags,delete D.Q,delete a.disk[x],delete D.tags,a.write(x,D,l.ack,v,c)},l.ack=function(x,D){c&&(c.sa=c.sa||+new Date),c&&(c.sal=b.length);var C,_;for(var $ in a.tags)if(a.tags.hasOwnProperty($)){var u=a.tags[$];if(!((_=a.disk[m])&&(_=_.tags)&&_[u])){C=u[m],delete u[m];var T;for(var j in u)if(u.hasOwnProperty(j)){T=!0;break}T||(delete a.tags[u],C&&C(x,D))}}!b&&(b="");for(var A=b.length,B=0,N=+new Date;B<A;B++)(C=b[B])&&C(x,D);console.STAT&&console.STAT(N,+new Date-N,"rad acks",i(l.file)),console.STAT&&console.STAT(N,b.length,"rad acks #",i(l.file))},e||(e=function(x,D){}),a.find(g,l.find)},a.disk={},a.one={},a.tags={};var S=0;a.write=function(g,w,e,n,c){if(!w){e("No radix!");return}n=typeof n=="object"?n:{force:n};var l=function(){},m,b;if(l.text="",l.file=g=w.file||(w.file=g),!g){e("What file?");return}if(l.write=function(){var x=w.raw=l.text;a.disk[g=w.file||l.file||g]=w;var D=+new Date;c&&(c.wd=D),a.find.add(g,function(C){if(c&&(c.wa=+new Date),C){e(C);return}d.store.put(i(g),x,function(_,$){c&&(c.wp=+new Date),console.STAT&&console.STAT(D,f=+new Date-D,"wrote disk",JSON.stringify(g),++S,"total all writes."),e(_,$||1),w.Q||delete a.disk[g]})})},l.split=function(){var x=+new Date;c&&(c.wf=x),l.text="",l.count||(l.count=0,O.map(w,function(){l.count++})),c&&(c.wfc=l.count),l.limit=Math.ceil(l.count/2);var D=l.count;return l.count=0,c&&(c.wf1=+new Date),l.sub=O(),O.map(w,l.slice,{reverse:1}),c&&(c.wf2=+new Date),a.write(l.end,l.sub,l.both,n),c&&(c.wf3=+new Date),l.hub=O(),O.map(w,l.stop),c&&(c.wf4=+new Date),a.write(w.file,l.hub,l.both,n),c&&(c.wf5=+new Date),console.STAT&&console.STAT(x,+new Date-x,"rad split",i(w.file),D),!0},l.slice=function(x,D){if(l.sub(l.end=D,x),l.limit<=++l.count)return!0},l.stop=function(x,D){if(D>=l.end)return!0;l.hub(D,x)},l.both=function(x,D){if(c&&(c.wfd=+new Date),b){e(x||b);return}if(m){e(x,D);return}m=!0,b=x},l.each=function(x,D,C,_){if(v!==x&&l.count++,d.max<=(x||"").length)return e("Data too big!"),!0;var $=E.encode(_.length)+"#"+E.encode(C)+(v===x?"":":"+E.encode(x))+`\n`;if(d.chunk<l.text.length+$.length&&1<l.count&&!n.force)return l.split();l.text+=$},d.jsonify){a.write.jsonify(l,w,e,n,c);return}O.map(w,l.each,!0)||l.write()},a.write.jsonify=function(g,w,e,n,c){var l,m=+new Date;c&&(c.w=m);try{l=JSON.stringify(w.$)}catch{e("Cannot radisk!");return}if(c&&(c.ws=+new Date),console.STAT&&console.STAT(m,+new Date-m,"rad stringified JSON"),d.chunk<l.length&&!n.force){var b=0;if(O.map(w,function(){if(b++)return!0}),b>1)return g.split()}g.text=l,g.write()},a.range=function(g,w){if(!(!g||!w)){if(v===w.start&&v===w.end||p(g))return g;var e=O();return O.map(g,function(n,c){e(c,n)},w),e("")}},function(){a.read=function(g,w,e,n){e=e||{};var c={key:g};c.find=function(l){var m;if(c.file=l||(l=d.code.from),n&&(n=n[l]=n[l]||{}),n&&(n.rf=n.rf||+new Date),m=a.disk[c.file=l]){c.check(v,m);return}a.parse(l,c.check,v,n)},c.get=function(l,m,b){if(n&&(n.rgl=+new Date),n&&(n.rg=n.rg||+new Date),c.err=l||c.err){w(l);return}var x=c.file=(m||"").file||c.file;if(!m&&x!==d.code.from){a.find.bad(x),a.read(g,w,e);return}if(m=a.disk[x]||(a.disk[x]=m),!m){w(x===d.code.from?v:"No file!");return}m.file||(m.file=x);var D=a.range(m(g),e);if(n&&(n.rr=+new Date),e.unit=m.unit,e.chunks=(e.chunks||0)+1,e.parsed=(e.parsed||0)+((b||"").parsed||e.chunks*d.chunk),e.more=1,e.next=v,O.map(a.list,function($,u){if(!(!$||x===u))return e.next=u,1},e.reverse?{reverse:1,end:x}:{start:x}),n&&(n.rl=+new Date),e.next||(e.more=0),e.next&&(!e.reverse&&(g<e.next&&e.next.indexOf(g)!=0||v!==e.end&&(e.end||"￿")<e.next)&&(e.more=0),e.reverse&&(g>e.next&&g.indexOf(e.next)!=0||v!==e.start&&(e.start||"")>e.next&&x<=e.start)&&(e.more=0)),!e.more){w(c.err,D,e);return}if(D&&w(c.err,D,e),!(e.parsed>=e.limit)){var C=+new Date;n&&(n.rm=C);var _=e.next;y(function(){console.STAT&&console.STAT(C,+new Date-C,"rad more"),a.parse(_,c.check)},0)}},c.check=function(l,m,b){if(c.get(l,m,b),!(!m||m.check)){m.check=1;var x=+new Date;(b||(b={})).file||(b.file=c.file),O.map(m,function(D,C){a.find(C,function(_){if((_||(_=d.code.from))!==b.file){var $=(""+Math.random()).slice(-3);h(function(){a.save(C,D,function u(T,j){if(T){a.save(C,D,u);return}console.STAT&&console.STAT("MISLOCATED DATA CORRECTED",$,i(C),i(b.file),i(_))})},0)}})}),console.STAT&&console.STAT(x,+new Date-x,"rad check")}},a.find(g||(e.reverse?e.end||"":e.start||""),c.find)}}(),function(){var g=0,w={},e="";a.parse=function(n,c,l,m){var b;if(!n)return c();if(b=w[n]){b.push(c);return}b=w[n]=[c];var x=function(){},D={file:n};(x.disk=O()).file=n,x.read=function(_,$){if(m&&(m.rpg=+new Date),console.STAT&&console.STAT(C,+new Date-C,"read disk",JSON.stringify(n),++g,"total all parses."),(x.err=_)||(x.not=!$)){delete w[n],x.map(b,x.ack);return}if(typeof $!="string"){try{d.max<=$.length?x.err="Chunk too big!":$=$.toString()}catch(u){x.err=u}if(x.err){delete w[n],x.map(b,x.ack);return}}if(D.parsed=$.length,m&&(m.rpl=D.parsed),m&&(m.rpa=b.length),C=+new Date,!(d.jsonify||$[0]==="{")){x.radec(_,$);return}s($,function(u,T){if(!u){delete w[n],x.disk.$=T,console.STAT&&(f=+new Date-C)>9&&console.STAT(C,f,"rad parsed JSON"),m&&(m.rpd=+new Date),x.map(b,x.ack);return}if($[0]==="{"){delete w[n],x.err="JSON error!",x.map(b,x.ack);return}x.radec(u,$)})},x.map=function(){if(!(!b||!b.length)){for(var _=+new Date,$=x.err,u=x.not?v:x.disk,T=0,j;T<9&&(j=b[T++]);)j($,u,D);console.STAT&&console.STAT(_,+new Date-_,"rad packs",i(n)),console.STAT&&console.STAT(_,T,"rad packs #",i(n)),(b=b.slice(T)).length&&h(x.map,0)}},x.ack=function(_){if(_){if(x.err||x.not){_(x.err,v,D);return}_(v,x.disk,D)}},x.radec=function(_,$){delete w[n],C=+new Date;var u=x.split($),T=[],j,A,B;if(!u||u[1]!==0){x.err="File \'"+n+"\' does not have root radix! ",x.map(b,x.ack);return}for(;u;)A=B=v,j=u[1],u=x.split(u[2])||"",u[0]=="#"&&(A=u[1],T=T.slice(0,j),j<=T.length&&T.push(A)),u=x.split(u[2])||"",u[0]!=`\n`&&((u[0]=="="||u[0]==":")&&(B=u[1]),v!==A&&v!==B&&x.disk(T.join(""),B),u=x.split(u[2]));console.STAT&&console.STAT(C,+new Date-C,"parsed RAD"),x.map(b,x.ack)},x.split=function(_){if(_){var $=[],u={},T=-1,j="";if(T=_.indexOf(e),!!_[T])return j=_.slice(0,T),$[0]=j,$[1]=E.decode(_.slice(T),u),$[2]=_.slice(T+u.i),$}},a.disk&&(l||(l=(a.disk[n]||"").raw));var C=+new Date;if(m&&(m.rp=C),l)return h(function(){x.read(v,l)},0);d.store.get(i(n),x.read)}}(),function(){var g,w="",e;a.find=function(l,m){if(!g){if(e){e.push([l,m]);return}e=[[l,m]],a.parse(w,n);return}O.map(a.list=g,function(b,x){if(b)return m(x)||!0},{reverse:1,end:l})||m(d.code.from)},a.find.add=function(l,m){var b=g(l);if(b||l===w){m(v,1);return}g(l,1),m.found=(m.found||0)+1,a.write(w,g,function(x,D){if(x){m(x);return}m.found=(m.found||0)-1,m.found===0&&m(v,1)},!0)},a.find.bad=function(l,m){g(l,0),a.write(w,g,m||r)};function n(l,m){if(l){d.log("list",l),setTimeout(function(){a.parse(w,n)},1e3);return}if(m){c(m);return}if(g=g||m||O(),!d.store.list){c(g);return}d.store.list(function(b){if(!b){c(g);return}a.find.add(b,r)})}function c(l,m){g=g||l,g.file=w,m=e,e=null,t(m,function(b){a.find(b[0],b[1])})}}();try{!k.window&&mt()(a)}catch{}var r=function(){},v;return E.has[d.file]=a,a}if(function(){var d="";E.encode=function(o,i,p){p=p||d;var y=p,h;if(typeof o=="string"){for(var t=o.indexOf(p);t!=-1;)y+=p,t=o.indexOf(p,t+1);return y+\'"\'+o+p}else{if(o&&o["#"]&&Object.keys(o).length==1)return y+"#"+h+y;if(typeof o=="number")return y+"+"+(o||0)+y;if(o===null)return y+" "+y;if(o===!0)return y+"+"+y;if(o===!1)return y+"-"+y}},E.decode=function(o,i,p){p=p||d;var y="",h=-1,t=0,f,s;if(p===o[0]){for(;p===o[++h];)++t;for(s=o[f=t]||!0;--t>=0;)h=o.indexOf(p,h+1);if(h==-1&&(h=o.length),y=o.slice(f+1,h),i&&(i.i=h+1),s===\'"\')return y;if(s==="#")return{"#":y};if(s==="+")return y.length===0?!0:parseFloat(y);if(s===" ")return null;if(s==="-")return!1}}}(),typeof window<"u"){var k=window.Gun,O=window.Radix;window.Radisk=E}else{var k=L(),O=X();try{wt.exports=E}catch{}}E.Radix=O})();var kt={exports:{}};(function(){function E(O){O=O||{},O.file=String(O.file||"radata");var d=E[O.file],o=null,i;if(d)return console.log("Warning: reusing same IndexedDB store and options as 1st."),E[O.file];d=E[O.file]=function(){};try{O.indexedDB=O.indexedDB||E.indexedDB||indexedDB}catch{}try{if(!O.indexedDB||location.protocol=="file:"){var p=d.d||(d.d={});return d.put=function(y,h,t){p[y]=h,setTimeout(function(){t(null,1)},250)},d.get=function(y,h){setTimeout(function(){h(null,p[y]||i)},5)},console.log("Warning: No indexedDB exists to persist data to!"),d}}catch{}return d.start=function(){var y=indexedDB.open(O.file,1);y.onupgradeneeded=function(h){h.target.result.createObjectStore(O.file)},y.onsuccess=function(){o=y.result},y.onerror=function(h){console.log(h||1)}},d.start(),d.put=function(y,h,t){if(!o){setTimeout(function(){d.put(y,h,t)},1);return}var f=o.transaction([O.file],"readwrite"),s=f.objectStore(O.file),a=s.put(h,""+y);a.onsuccess=s.onsuccess=f.onsuccess=function(){t(null,1)},a.onabort=s.onabort=f.onabort=function(S){t(S||"put.tx.abort")},a.onerror=s.onerror=f.onerror=function(S){t(S||"put.tx.error")}},d.get=function(y,h){if(!o){setTimeout(function(){d.get(y,h)},9);return}var t=o.transaction([O.file],"readonly"),f=t.objectStore(O.file),s=f.get(""+y);s.onsuccess=function(){h(null,s.result)},s.onabort=function(a){h(a||4)},s.onerror=function(a){h(a||5)}},setInterval(function(){o&&o.close(),o=null,d.start()},1e3*15),d}if(typeof window<"u")(E.window=window).RindexedDB=E,E.indexedDB=window.indexedDB;else try{kt.exports=E}catch{}try{var k=E.window.Gun||L();k.on("create",function(O){this.to.next(O),O.opt.store=O.opt.store||E(O.opt)})}catch{}})(),function(){var E=typeof window<"u"?window.Gun:L();E.on("opt",function(k){this.to.next(k);var O=k.opt;if(k.once||!E.Mesh||O.RTCPeerConnection===!1)return;var d;typeof window<"u"&&(d=window),typeof F<"u"&&(d=F),d=d||{};var o=O.RTCPeerConnection||d.RTCPeerConnection||d.webkitRTCPeerConnection||d.mozRTCPeerConnection,i=O.RTCSessionDescription||d.RTCSessionDescription||d.webkitRTCSessionDescription||d.mozRTCSessionDescription,p=O.RTCIceCandidate||d.RTCIceCandidate||d.webkitRTCIceCandidate||d.mozRTCIceCandidate;if(!o||!i||!p)return;O.RTCPeerConnection=o,O.RTCSessionDescription=i,O.RTCIceCandidate=p,O.rtc=O.rtc||{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun.sipgate.net:3478"}]},O.rtc.dataChannel=O.rtc.dataChannel||{ordered:!1,maxRetransmits:2},O.rtc.sdp=O.rtc.sdp||{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},O.rtc.max=O.rtc.max||55,O.rtc.room=O.rtc.room||E.window&&(location.hash.slice(1)||location.pathname.slice(1)),O.announce=function(t){O.rtc.start=+new Date,k.$.get("/RTC/"+O.rtc.room+"<?99").get("+").put(O.pid,function(f){!f.ok||!f.ok.rtc||h(f)},{acks:O.rtc.max}).on(function(f,s,a){f===O.pid||O.rtc.start>a.put[">"]||h({"#":""+a["#"],ok:{rtc:{id:f}}})})};var y=O.mesh=O.mesh||E.Mesh(k);k.on("create",function(t){this.to.next(t),setTimeout(O.announce,1)});function h(t){if(this&&this.off&&this.off(),!!t.ok){var f=t.ok.rtc,s,a;if(!(!f||!f.id||f.id===O.pid)){if(a=f.answer)return!(s=O.peers[f.id]||h[f.id])||s.remoteSet?void 0:(a.sdp=a.sdp.replace(/\\\\r\\\\n/g,`\\r\n`),s.setRemoteDescription(s.remoteSet=new O.RTCSessionDescription(a)));if(a=f.candidate)return s=O.peers[f.id]||h[f.id]||h({ok:{rtc:{id:f.id}}}),s.addIceCandidate(new O.RTCIceCandidate(a));if(!h[f.id]){(s=new O.RTCPeerConnection(O.rtc)).id=f.id;var S=s.wire=s.createDataChannel("dc",O.rtc.dataChannel);if(h[f.id]=s,S.to=setTimeout(function(){delete h[f.id]},1e3*60),S.onclose=function(){y.bye(s)},S.onerror=function(r){},S.onopen=function(r){delete h[f.id],y.hi(s)},S.onmessage=function(r){r&&y.hear(r.data||r,s)},s.onicecandidate=function(r){r.candidate&&k.on("out",{"@":t["#"],ok:{rtc:{candidate:r.candidate,id:O.pid}}})},s.ondatachannel=function(r){var v=r.channel;v.onmessage=S.onmessage,v.onopen=S.onopen,v.onclose=S.onclose},a=f.offer){f.offer.sdp=f.offer.sdp.replace(/\\\\r\\\\n/g,`\\r\n`),s.setRemoteDescription(new O.RTCSessionDescription(a)),s.createAnswer(function(r){s.setLocalDescription(r),k.on("out",{"@":t["#"],ok:{rtc:{answer:r,id:O.pid}}})},function(){},O.rtc.sdp);return}return s.createOffer(function(r){s.setLocalDescription(r),k.on("out",{"@":t["#"],"#":k.ask(h),ok:{rtc:{offer:r,id:O.pid}}})},function(){},O.rtc.sdp),s}}}}})}();var pt={exports:{}};(function(E){(function(){function k(d,o){return o?Q("/")(d):d.slice?k[i(d)]:function(p,y){d(p={exports:{}}),k[i(y)]=p.exports};function i(p){return p.split("/").slice(-1).toString().replace(".js","")}}var O=E;k(function(d){typeof self<"u"&&(d.window=self),typeof window<"u"&&(d.window=window);var o=d.window||d,i,p=o.SEA||{};(p.window=d.window)&&(p.window.SEA=p);try{i+""!=typeof O&&(O.exports=p)}catch{}d.exports=p})(k,"./root"),k(function(d){var o=k("./root");try{o.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\\.\\d+\\.\\d+\\.\\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(k,"./https"),k(function(d){var o;if(o+""==typeof btoa){if(o+""==typeof Buffer)try{F.Buffer=k("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}F.btoa=function(i){return Buffer.from(i,"binary").toString("base64")},F.atob=function(i){return Buffer.from(i,"base64").toString("binary")}}})(k,"./base64"),k(function(d){k("./base64");function o(){}Object.assign(o,{from:Array.from}),o.prototype=Object.create(Array.prototype),o.prototype.toString=function(i,p,y){i=i||"utf8",p=p||0;const h=this.length;if(i==="hex"){const t=new Uint8Array(this);return[...Array((y&&y+1||h)-p).keys()].map(f=>t[f+p].toString(16).padStart(2,"0")).join("")}if(i==="utf8")return Array.from({length:(y||h)-p},(t,f)=>String.fromCharCode(this[f+p])).join("");if(i==="base64")return btoa(this)},d.exports=o})(k,"./array"),k(function(d){k("./base64");var o=k("./array");function i(...p){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),i.from(...p)}i.prototype=Object.create(Array.prototype),Object.assign(i,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const p=arguments[0];let y;if(typeof p=="string"){const h=arguments[1]||"utf8";if(h==="hex"){const t=p.match(/([\\da-fA-F]{2})/g).map(f=>parseInt(f,16));if(!t||!t.length)throw new TypeError("Invalid first argument for type \'hex\'.");y=o.from(t)}else if(h==="utf8"||h==="binary"){const t=p.length,f=new Uint16Array(t);Array.from({length:t},(s,a)=>f[a]=p.charCodeAt(a)),y=o.from(f)}else if(h==="base64"){const t=atob(p),f=t.length,s=new Uint8Array(f);Array.from({length:f},(a,S)=>s[S]=t.charCodeAt(S)),y=o.from(s)}else h==="binary"?y=o.from(p):console.info("SafeBuffer.from unknown encoding: "+h);return y}if(p.byteLength,p.byteLength?p.byteLength:p.length){let h;return p instanceof ArrayBuffer&&(h=new Uint8Array(p)),o.from(h||p)}},alloc(p,y=0){return o.from(new Uint8Array(Array.from({length:p},()=>y)))},allocUnsafe(p){return o.from(new Uint8Array(Array.from({length:p})))},concat(p){if(!Array.isArray(p))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return o.from(p.reduce((y,h)=>y.concat(Array.from(h)),[]))}}),i.prototype.from=i.from,i.prototype.toString=o.prototype.toString,d.exports=i})(k,"./buffer"),k(function(d){const o=k("./root"),i={Buffer:k("./buffer")};var p={},y;if(JSON.parseAsync=JSON.parseAsync||function(t,f,s){var a;try{f(a,JSON.parse(t,s))}catch(S){f(S)}},JSON.stringifyAsync=JSON.stringifyAsync||function(t,f,s,a){var S;try{f(S,JSON.stringify(t,s,a))}catch(r){f(r)}},i.parse=function(t,f){return new Promise(function(s,a){JSON.parseAsync(t,function(S,r){S?a(S):s(r)},f)})},i.stringify=function(t,f,s){return new Promise(function(a,S){JSON.stringifyAsync(t,function(r,v){r?S(r):a(v)},f,s)})},o.window&&(i.crypto=o.window.crypto||o.window.msCrypto,i.subtle=(i.crypto||p).subtle||(i.crypto||p).webkitSubtle,i.TextEncoder=o.window.TextEncoder,i.TextDecoder=o.window.TextDecoder,i.random=t=>i.Buffer.from(i.crypto.getRandomValues(new Uint8Array(i.Buffer.alloc(t))))),!i.TextDecoder){const{TextEncoder:t,TextDecoder:f}=k((y+""==typeof O?".":"")+"./lib/text-encoding",1);i.TextDecoder=f,i.TextEncoder=t}if(!i.crypto)try{var h=k("crypto",1);Object.assign(i,{crypto:h,random:f=>i.Buffer.from(h.randomBytes(f))});const{Crypto:t}=k("@peculiar/webcrypto",1);i.ossl=i.subtle=new t({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}d.exports=i})(k,"./shim"),k(function(d){var o=k("./root"),i=k("./shim"),p={};p.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},p.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},p.ecdh={name:"ECDH",namedCurve:"P-256"},p.jwk=function(y,h){y=y.split(".");var t=y[0],f=y[1],s={kty:"EC",crv:"P-256",x:t,y:f,ext:!0};return s.key_ops=h?["sign"]:["verify"],h&&(s.d=h),s},p.keyToJwk=function(y){return{kty:"oct",k:y.toString("base64").replace(/\\+/g,"-").replace(/\\//g,"_").replace(/\\=/g,""),ext:!1,alg:"A256GCM"}},p.recall={validity:12*60*60,hook:function(y){return y}},p.check=function(y){return typeof y=="string"&&y.slice(0,4)==="SEA{"},p.parse=async function(y){try{var h=typeof y=="string";return h&&y.slice(0,4)==="SEA{"&&(y=y.slice(3)),h?await i.parse(y):y}catch{}return y},o.opt=p,d.exports=p})(k,"./settings"),k(function(d){var o=k("./shim");d.exports=async function(i,p){var y=typeof i=="string"?i:await o.stringify(i),h=await o.subtle.digest({name:p||"SHA-256"},new o.TextEncoder().encode(y));return o.Buffer.from(h)}})(k,"./sha256"),k(function(d){const o=k("./shim"),i=o.subtle,p=o.ossl?o.ossl:i,y=h=>p.digest({name:"SHA-1"},new ArrayBuffer(h));d.exports=y})(k,"./sha1"),k(function(d){var o=k("./root"),i=k("./shim"),p=k("./settings"),y=k("./sha256"),h;o.work=o.work||(async(t,f,s,a)=>{try{var S=(f||{}).epub||f;if(a=a||{},S instanceof Function&&(s=S,S=h),t=typeof t=="string"?t:await i.stringify(t),(a.name||"").toLowerCase().slice(0,3)==="sha"){var r=i.Buffer.from(await y(t,a.name),"binary").toString(a.encode||"base64");if(s)try{s(r)}catch(e){console.log(e)}return r}S=S||i.random(9);var v=await(i.ossl||i.subtle).importKey("raw",new i.TextEncoder().encode(t),{name:a.name||"PBKDF2"},!1,["deriveBits"]),g=await(i.ossl||i.subtle).deriveBits({name:a.name||"PBKDF2",iterations:a.iterations||p.pbkdf2.iter,salt:new i.TextEncoder().encode(a.salt||S),hash:a.hash||p.pbkdf2.hash},v,a.length||p.pbkdf2.ks*8);t=i.random(t.length);var w=i.Buffer.from(g,"binary").toString(a.encode||"base64");if(s)try{s(w)}catch(e){console.log(e)}return w}catch(e){if(console.log(e),o.err=e,o.throw)throw e;s&&s();return}}),d.exports=o.work})(k,"./work"),k(function(d){var o=k("./root"),i=k("./shim");k("./settings"),o.name=o.name||(async(p,y)=>{try{if(p)try{p()}catch(h){console.log(h)}return}catch(h){if(console.log(h),o.err=h,o.throw)throw h;p&&p();return}}),o.pair=o.pair||(async(p,y)=>{try{var h=i.ossl||i.subtle,t=await i.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async a=>{var S={};S.priv=(await i.subtle.exportKey("jwk",a.privateKey)).d;var r=await i.subtle.exportKey("jwk",a.publicKey);return S.pub=r.x+"."+r.y,S});try{var f=await h.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async a=>{var S={};S.epriv=(await h.exportKey("jwk",a.privateKey)).d;var r=await h.exportKey("jwk",a.publicKey);return S.epub=r.x+"."+r.y,S})}catch(a){if(o.window)throw a;if(a=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw a}f=f||{};var s={pub:t.pub,priv:t.priv,epub:f.epub,epriv:f.epriv};if(p)try{p(s)}catch(a){console.log(a)}return s}catch(a){if(console.log(a),o.err=a,o.throw)throw a;p&&p();return}}),d.exports=o.pair})(k,"./pair"),k(function(d){var o=k("./root"),i=k("./shim"),p=k("./settings"),y=k("./sha256"),h;o.sign=o.sign||(async(t,f,s,a)=>{try{if(a=a||{},!(f||a).priv){if(!o.I)throw"No signing key.";f=await o.I(null,{what:t,how:"sign",why:a.why})}if(h===t)throw"`undefined` not allowed.";var S=await p.parse(t),r=a.check=a.check||S;if(o.verify&&(o.opt.check(r)||r&&r.s&&r.m)&&h!==await o.verify(r,f)){var c=await p.parse(r);if(a.raw||(c="SEA"+await i.stringify(c)),s)try{s(c)}catch(m){console.log(m)}return c}var v=f.pub,g=f.priv,w=p.jwk(v,g),e=await y(S),n=await(i.ossl||i.subtle).importKey("jwk",w,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(l=>(i.ossl||i.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},l,new Uint8Array(e))),c={m:S,s:i.Buffer.from(n,"binary").toString(a.encode||"base64")};if(a.raw||(c="SEA"+await i.stringify(c)),s)try{s(c)}catch(l){console.log(l)}return c}catch(l){if(console.log(l),o.err=l,o.throw)throw l;s&&s();return}}),d.exports=o.sign})(k,"./sign"),k(function(d){var o=k("./root"),i=k("./shim"),p=k("./settings"),y=k("./sha256"),h;o.verify=o.verify||(async(s,a,S,r)=>{try{var v=await p.parse(s);if(a===!1){var g=await p.parse(v.m);if(S)try{S(g)}catch(D){console.log(D)}return g}r=r||{};var w=a.pub||a,e=o.opt.slow_leak?await o.opt.slow_leak(w):await(i.ossl||i.subtle).importKey("jwk",p.jwk(w),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await y(v.m),c,l,m,b;try{if(c=i.Buffer.from(v.s,r.encode||"base64"),l=new Uint8Array(c),m=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},e,l,new Uint8Array(n)),!m)throw"Signature did not match."}catch{if(o.opt.fallback)return await o.opt.fall_verify(s,a,S,r)}var x=m?await p.parse(v.m):h;if(S)try{S(x)}catch(D){console.log(D)}return x}catch(D){if(console.log(D),o.err=D,o.throw)throw D;S&&S();return}}),d.exports=o.verify;var t={};o.opt.slow_leak=s=>{if(t[s])return t[s];var a=p.jwk(s);return t[s]=(i.ossl||i.subtle).importKey("jwk",a,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),t[s]};var f=o.opt;o.opt.fall_verify=async function(s,a,S,r,v){if(v===o.opt.fallback)throw"Signature did not match";v=v||1;var g=s||"";s=o.opt.unpack(s)||s;var w=await p.parse(s),e=a.pub||a,n=await o.opt.slow_leak(e),c=v<=o.opt.fallback?i.Buffer.from(await i.subtle.digest({name:"SHA-256"},new i.TextEncoder().encode(await p.parse(w.m)))):await y(w.m),l,m,b;try{if(l=i.Buffer.from(w.s,r.encode||"base64"),m=new Uint8Array(l),b=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,m,new Uint8Array(c)),!b)throw"Signature did not match."}catch{try{l=i.Buffer.from(w.s,"utf8"),m=new Uint8Array(l),b=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,m,new Uint8Array(c))}catch{if(!b)throw"Signature did not match."}}var x=b?await p.parse(w.m):h;if(f.fall_soul=g["#"],f.fall_key=g["."],f.fall_val=s,f.fall_state=g[">"],S)try{S(x)}catch(D){console.log(D)}return x},o.opt.fallback=2})(k,"./verify"),k(function(d){var o=k("./shim"),i=k("./settings"),p=k("./sha256");const y=async(h,t,f)=>{const s=h+(t||o.random(8)).toString("utf8"),a=o.Buffer.from(await p(s),"binary"),S=i.keyToJwk(a);return await o.subtle.importKey("jwk",S,{name:"AES-GCM"},!1,["encrypt","decrypt"])};d.exports=y})(k,"./aeskey"),k(function(d){var o=k("./root"),i=k("./shim");k("./settings");var p=k("./aeskey"),y;o.encrypt=o.encrypt||(async(h,t,f,s)=>{try{s=s||{};var a=(t||s).epriv||t;if(y===h)throw"`undefined` not allowed.";if(!a){if(!o.I)throw"No encryption key.";t=await o.I(null,{what:h,how:"encrypt",why:s.why}),a=t.epriv||t}var S=typeof h=="string"?h:await i.stringify(h),r={s:i.random(9),iv:i.random(15)},v=await p(a,r.s,s).then(w=>i.subtle.encrypt({name:s.name||"AES-GCM",iv:new Uint8Array(r.iv)},w,new i.TextEncoder().encode(S))),g={ct:i.Buffer.from(v,"binary").toString(s.encode||"base64"),iv:r.iv.toString(s.encode||"base64"),s:r.s.toString(s.encode||"base64")};if(s.raw||(g="SEA"+await i.stringify(g)),f)try{f(g)}catch(w){console.log(w)}return g}catch(w){if(console.log(w),o.err=w,o.throw)throw w;f&&f();return}}),d.exports=o.encrypt})(k,"./encrypt"),k(function(d){var o=k("./root"),i=k("./shim"),p=k("./settings"),y=k("./aeskey");o.decrypt=o.decrypt||(async(h,t,f,s)=>{try{s=s||{};var a=(t||s).epriv||t;if(!a){if(!o.I)throw"No decryption key.";t=await o.I(null,{what:h,how:"decrypt",why:s.why}),a=t.epriv||t}var S=await p.parse(h),r,v,g;try{r=i.Buffer.from(S.s,s.encode||"base64"),v=i.Buffer.from(S.iv,s.encode||"base64"),g=i.Buffer.from(S.ct,s.encode||"base64");var w=await y(a,r,s).then(n=>i.subtle.decrypt({name:s.name||"AES-GCM",iv:new Uint8Array(v),tagLength:128},n,new Uint8Array(g)))}catch{if(s.encode==="utf8")throw"Could not decrypt";if(o.opt.fallback)return s.encode="utf8",await o.decrypt(h,t,f,s)}var e=await p.parse(new i.TextDecoder("utf8").decode(w));if(f)try{f(e)}catch(n){console.log(n)}return e}catch(n){if(console.log(n),o.err=n,o.throw)throw n;f&&f();return}}),d.exports=o.decrypt})(k,"./decrypt"),k(function(d){var o=k("./root"),i=k("./shim");k("./settings"),o.secret=o.secret||(async(y,h,t,f)=>{try{if(f=f||{},!h||!h.epriv||!h.epub){if(!o.I)throw"No secret mix.";h=await o.I(null,{what:y,how:"secret",why:f.why})}var s=y.epub||y,a=h.epub,S=h.epriv,r=i.ossl||i.subtle,v=p(s),g=Object.assign({public:await r.importKey(...v,!0,[])},{name:"ECDH",namedCurve:"P-256"}),w=p(a,S),e=await r.importKey(...w,!1,["deriveBits"]).then(async c=>{var l=await r.deriveBits(g,c,256),m=new Uint8Array(l),b=await r.importKey("raw",m,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return r.exportKey("jwk",b).then(({k:x})=>x)}),n=e;if(t)try{t(n)}catch(c){console.log(c)}return n}catch(c){if(console.log(c),o.err=c,o.throw)throw c;t&&t();return}});var p=(y,h)=>{var[t,f]=y.split("."),s=h?{d:h}:{};return["jwk",Object.assign(s,{x:t,y:f,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};d.exports=o.secret})(k,"./secret"),k(function(d){var o=k("./root");o.certify=o.certify||(async(i,p={},y,h,t={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),i=(()=>{var e=[];if(i){if((typeof i=="string"||Array.isArray(i))&&i.indexOf("*")>-1)return"*";if(typeof i=="string")return i;if(Array.isArray(i)){if(i.length===1&&i[0])return typeof i[0]=="object"&&i[0].pub?i[0].pub:typeof i[0]=="string"?i[0]:null;i.map(n=>{typeof n=="string"?e.push(n):typeof n=="object"&&n.pub&&e.push(n.pub)})}return typeof i=="object"&&i.pub?i.pub:e.length>0?e:null}})(),!i)return console.log("No certificant found.");const s=t.expiry&&(typeof t.expiry=="number"||typeof t.expiry=="string")?parseFloat(t.expiry):null,a=(p||{}).read?p.read:null,S=(p||{}).write?p.write:typeof p=="string"||Array.isArray(p)||p["+"]||p["#"]||p["."]||p["="]||p["*"]||p[">"]||p["<"]?p:null,r=(t||{}).block||(t||{}).blacklist||(t||{}).ban||{},v=r.read&&(typeof r.read=="string"||(r.read||{})["#"])?r.read:null,g=typeof r=="string"?r:r.write&&(typeof r.write=="string"||r.write["#"])?r.write:null;if(!a&&!S)return console.log("No policy found.");const w=JSON.stringify({c:i,...s?{e:s}:{},...a?{r:a}:{},...S?{w:S}:{},...v?{rb:v}:{},...g?{wb:g}:{}});var f=await o.sign(w,y,null,{raw:1});if(t.raw||(f="SEA"+JSON.stringify(f)),h)try{h(f)}catch(e){console.log(e)}return f}catch(s){if(o.err=s,o.throw)throw s;h&&h();return}}),d.exports=o.certify})(k,"./certify"),k(function(d){var o=k("./shim"),i=k("./root");i.work=k("./work"),i.sign=k("./sign"),i.verify=k("./verify"),i.encrypt=k("./encrypt"),i.decrypt=k("./decrypt"),i.certify=k("./certify"),i.random=i.random||o.random,i.Buffer=i.Buffer||k("./buffer"),i.keyid=i.keyid||(async p=>{try{const y=o.Buffer.concat(p.replace(/-/g,"+").replace(/_/g,"/").split(".").map(s=>o.Buffer.from(s,"base64"))),h=o.Buffer.concat([o.Buffer.from([153,y.length/256,y.length%256]),y]),t=await sha1hash(h),f=o.Buffer.from(t,"binary");return f.toString("hex",f.length-8)}catch(y){throw console.log(y),y}}),((i.window||{}).GUN||{}).SEA=i,d.exports=i})(k,"./sea"),k(function(d){var o=k("./sea"),i,p;o.window?i=o.window.GUN||{chain:{}}:i=k((p+""==typeof O?".":"")+"./gun",1),o.GUN=i;function y(t){this._={$:this}}y.prototype=function(){function t(){}return t.prototype=i.chain,new t}(),y.prototype.constructor=y,i.chain.user=function(t){var f=this,a=f.back(-1),s;if(t)return t=o.opt.pub((t._||"")["#"])||t,a.get("~"+t);if(s=a.back("user"))return s;var a=a._,S=a,r=S.opt.uuid||h;return(S=(s=S.user=f.chain(new y))._).opt={},S.opt.uuid=function(v){var g=r(),w=a.user;return!w||!(w=w.is)||!(w=w.pub)||(g="~"+w+"/"+g,v&&v.call&&v(null,g)),g},s};function h(){return i.state().toString(36).replace(".","")}i.User=y,y.GUN=i,y.SEA=i.SEA=o,d.exports=y})(k,"./user"),k(function(d){var o,i=""+o!=typeof GUN?GUN||{chain:{}}:k((""+o==typeof O?".":"")+"./gun",1);i.chain.then=function(p,y){var h=this,t=new Promise(function(f,s){h.once(f,y)});return p?t.then(p):t}})(k,"./then"),k(function(d){var o=k("./user"),i=o.SEA,p=o.GUN,y=function(){};o.prototype.create=function(...h){var t=typeof h[0]=="object"&&(h[0].pub||h[0].epub)?h[0]:typeof h[1]=="object"&&(h[1].pub||h[1].epub)?h[1]:null,f=t&&(t.pub||t.epub)?t.pub:typeof h[0]=="string"?h[0]:null,s=t&&(t.pub||t.epub)?t:f&&typeof h[1]=="string"?h[1]:null,a=h.filter(n=>typeof n=="function")[0]||null,S=h&&h.length>1&&typeof h[h.length-1]=="object"?h[h.length-1]:{},r=this,v=r._,g=r.back(-1);if(a=a||y,S=S||{},S.check!==!1){var w;if(f||(w="No user."),(s||"").length<8&&(w="Password too short!"),w)return a({err:p.log(w)}),r}if(v.ing)return(a||y)({err:p.log("User is already being created or authenticated!"),wait:!0}),r;v.ing=!0;var e={};return e.a=function(n){if(e.pubs=n,n&&!S.already){var c={err:p.log("User already created!")};v.ing=!1,(a||y)(c),r.leave();return}e.salt=String.random(64),i.work(s,e.salt,e.b)},e.b=function(n){e.proof=n,t?e.c(t):i.pair(e.c)},e.c=function(n){var c;e.pair=n||{},(c=v.root.user)&&(c._.sea=n,c.is={pub:n.pub,epub:n.epub,alias:f}),e.data={pub:n.pub},e.d()},e.d=function(){e.data.alias=f,e.e()},e.e=function(){e.data.epub=e.pair.epub,i.encrypt({priv:e.pair.priv,epriv:e.pair.epriv},e.proof,e.f,{raw:1})},e.f=function(n){e.data.auth=JSON.stringify({ek:n,s:e.salt}),e.g(e.data.auth)},e.g=function(n){var c;e.data.auth=e.data.auth||n,g.get(c="~"+e.pair.pub).put(e.data).on(e.h);var l={};l[c]={"#":c},g.get("~@"+f).put(l).get(c).on(e.i)},e.h=function(n,c,l,m){m.off(),e.h.ok=1,e.i()},e.i=function(n,c,l,m){m&&(e.i.ok=1,m.off()),!(!e.h.ok||!e.i.ok)&&(v.ing=!1,a({ok:0,pub:e.pair.pub}),y===a&&(t?r.auth(t):r.auth(f,s)))},g.get("~@"+f).once(e.a),r},o.prototype.leave=function(h,t){var f=this,s=f.back(-1)._.user;if(s&&(delete s.is,delete s._.is,delete s._.sea),i.window)try{var a={};a=i.window.sessionStorage,delete a.recall,delete a.pair}catch{}return f}})(k,"./create"),k(function(d){var o=k("./user"),i=o.SEA,p=o.GUN,y=function(){};o.prototype.auth=function(...t){var f=typeof t[0]=="object"&&(t[0].pub||t[0].epub)?t[0]:typeof t[1]=="object"&&(t[1].pub||t[1].epub)?t[1]:null,s=!f&&typeof t[0]=="string"?t[0]:null,a=(s||f&&!(f.priv&&f.epriv))&&typeof t[1]=="string"?t[1]:null,S=t.filter(l=>typeof l=="function")[0]||null,r=t&&t.length>1&&typeof t[t.length-1]=="object"?t[t.length-1]:{},v=this,g=v._,w=v.back(-1);if(g.ing)return(S||y)({err:p.log("User is already being created or authenticated!"),wait:!0}),v;g.ing=!0;var e={},n,c=9;return e.a=function(l){if(!l)return e.b();if(!l.pub){var m=[];return Object.keys(l).forEach(function(b){b!="_"&&m.push(l[b])}),e.b(m)}if(e.name)return e.f(l);e.c((e.data=l).auth)},e.b=function(l){var m=(e.list=(e.list||[]).concat(l||[])).shift();if(n===m){if(e.name)return e.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(s&&c--){w.get("~@"+s).once(e.a);return}return e.err("Wrong user or password.")}w.get(m).once(e.a)},e.c=function(l){if(n===l)return e.b();if(typeof l=="string")return e.c(h(l));i.work(a,(e.auth=l).s,e.d,e.enc)},e.d=function(l){i.decrypt(e.auth.ek,l,e.e,e.enc)},e.e=function(l){if(n===l)return e.enc?(e.enc=null,e.b()):(e.enc={encode:"utf8"},e.c(e.auth));e.half=l,e.f(e.data)},e.f=function(l){var m=e.half||{},b=e.data||{};e.g(e.lol={pub:l.pub||b.pub,epub:l.epub||b.epub,priv:l.priv||m.priv,epriv:l.epriv||m.epriv})},e.g=function(l){if(!l||!l.pub||!l.epub)return e.b();e.pair=l;var m=w._.user,b=m._;b.tag;var x=b.opt;b=m._=w.get("~"+l.pub)._,b.opt=x,m.is={pub:l.pub,epub:l.epub,alias:s||l.pub},b.sea=e.pair,g.ing=!1;try{a&&n==(h(g.root.graph["~"+l.pub].auth)||"")[":"]&&(r.shuffle=r.change=a)}catch{}if(r.change?e.z():(S||y)(b),i.window&&(v.back("user")._.opt||r).remember)try{var D={};D=i.window.sessionStorage,D.recall=!0,D.pair=JSON.stringify(l)}catch{}try{w._.tag.auth?w._.on("auth",b):setTimeout(function(){w._.on("auth",b)},1)}catch(C){p.log("Your \'auth\' callback crashed with:",C)}},e.h=function(l){if(!l)return e.b();if(s=l.alias,s||(s=l.alias="~"+f.pub),!l.auth)return e.g(f);f=null,e.c((e.data=l).auth)},e.z=function(){e.salt=String.random(64),i.work(r.change,e.salt,e.y)},e.y=function(l){i.encrypt({priv:e.pair.priv,epriv:e.pair.epriv},l,e.x,{raw:1})},e.x=function(l){e.w(JSON.stringify({ek:l,s:e.salt}))},e.w=function(l){if(r.shuffle){console.log("migrate core account from UTF8 & shuffle");var m={};Object.keys(e.data).forEach(function(b){m[b]=e.data[b]}),delete m._,m.auth=l,w.get("~"+e.pair.pub).put(m)}w.get("~"+e.pair.pub).get("auth").put(l,S||y)},e.err=function(l){var m={err:p.log(l||"User cannot be found!")};g.ing=!1,(S||y)(m)},e.plugin=function(l){if(!(e.name=l))return e.err();var m=[l];l[0]!=="~"&&(m[1]="~"+l,m[2]="~@"+l),e.b(m)},f?f.priv&&f.epriv?e.g(f):w.get("~"+f.pub).once(e.h):s?w.get("~@"+s).once(e.a):!s&&!a&&i.name(e.plugin),v};function h(t){if(typeof t!="string")return t;try{t=JSON.parse(t)}catch{t={}}return t}})(k,"./auth"),k(function(d){var o=k("./user"),i=o.SEA;o.GUN,o.prototype.recall=function(p,y){var h=this,t=h.back(-1);if(p=p||{},p&&p.sessionStorage){if(i.window)try{var f={};f=i.window.sessionStorage,f&&(t._.opt.remember=!0,(h.back("user")._.opt||p).remember=!0,(f.recall||f.pair)&&t.user().auth(JSON.parse(f.pair),y))}catch{}return h}return h}})(k,"./recall"),k(function(d){var o=k("./user"),i=o.SEA,p=o.GUN,y=function(){};o.prototype.pair=function(){var h=this,t;try{t=new Proxy({DANGER:"☠"},{get:function(f,s,a){if(!(!h.is||!(h._||"").sea))return h._.sea[s]}})}catch{}return t},o.prototype.delete=async function(h,t,f){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var s=this;s.back(-1);var a=s.back("user");try{a.auth(h,t,function(S){var r=(a.is||{}).pub;a.map().once(function(){this.put(null)}),a.leave(),(f||y)({ok:0})})}catch(S){p.log("User.delete failed! Error:",S)}return s},o.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const h=this.back(-1);try{return await authRecall(h),h._.user._}catch{const t="No session!";throw p.log(t),{err:t}}},o.prototype.trust=async function(h){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),p.is(h)&&h.get("pub").get((t,f)=>{console.log(t,f)}),h.get("trust").get(path).put(theirPubkey)},o.prototype.grant=function(h,t){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var f=this,s=f.back(-1).user(),a=s._.sea,S="";return f.back(function(r){r.is||(S+=r.get||"")}),async function(){var r,v=await s.get("grant").get(a.pub).get(S).then();v=await i.decrypt(v,a),v||(v=i.random(16).toString(),r=await i.encrypt(v,a),s.get("grant").get(a.pub).get(S).put(r));var g=h.get("pub").then(),w=h.get("epub").then();g=await g,w=await w;var e=await i.secret(w,a);r=await i.encrypt(v,e),s.get("grant").get(g).get(S).put(r,t)}(),f},o.prototype.secret=function(h,t){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var f=this,s=f.back(-1).user(),a=s.pair(),S="";return f.back(function(r){r.is||(S+=r.get||"")}),async function(){var r,v=await s.get("trust").get(a.pub).get(S).then();v=await i.decrypt(v,a),v||(v=i.random(16).toString(),r=await i.encrypt(v,a),s.get("trust").get(a.pub).get(S).put(r)),r=await i.encrypt(h,v),f.put(r,t)}(),f},d.exports=o})(k,"./share"),k(function(d){var o=k("./sea"),i=k("./settings"),p,y=(o.window||"").GUN||k((""+p==typeof O?".":"")+"./gun",1);y.on("opt",function(r){r.sea||(r.sea={own:{}},r.on("put",h,r)),this.to.next(r)});function h(r){var v=this,g=v.as,w=r.put,e=w["#"],n=w["."],c=w[":"],l=w[">"],m=r["#"],b;if(!(!e||!n)){if((r._||"").faith&&(g.opt||"").faith&&typeof r._=="function"){o.opt.pack(w,function(D){o.verify(D,!1,function(C){w["="]=o.opt.unpack(C),v.to.next(r)})});return}var x=function(D){g.on("in",{"@":m,err:r.err=D})};if((r._||"").DBG&&((r._||"").DBG.c=+new Date),0<=e.indexOf("<?")&&(b=parseFloat(e.split("<?")[1]||""),b&&l<y.state()-b*1e3)){(b=r._)&&b.stun&&b.stun--;return}if(e==="~@"){h.alias(v,r,c,n,e,g,x);return}if(e.slice(0,2)==="~@"){h.pubs(v,r,c,n,e,g,x);return}if(b=o.opt.pub(e)){h.pub(v,r,c,n,e,g,x,g.user||"",b);return}if(0<=e.indexOf("#")){h.hash(v,r,c,n,e,g,x);return}h.any(v,r,c,n,e,g,x,g.user||"")}}h.hash=function(r,v,g,w,e,n,c){o.work(g,null,function(l){function m(b){let x="";for(let D=0;D<b.length;D++)x+=D-1&1?"":String.fromCharCode(parseInt(b.substring(D-1,D+1),16));return btoa(x)}if(l&&l===w.split("#").slice(-1)[0]||l&&l===m(w.split("#").slice(-1)[0]))return r.to.next(v);c("Data hash not same as hash!")},{name:"SHA-256"})},h.alias=function(r,v,g,w,e,n,c){if(!g)return c("Data must exist!");if("~@"+w===f(g))return r.to.next(v);c("Alias not same!")},h.pubs=function(r,v,g,w,e,n,c){if(!g)return c("Alias must exist!");if(w===f(g))return r.to.next(v);c("Alias not same!")},h.pub=async function(r,v,g,w,e,n,c,l,m){var b;const x=await i.parse(g)||{},D=(C,_,$)=>{if(C.m&&C.s&&_&&m)return o.verify(C,m,u=>{if(p!==u&&p!==u.e&&v.put[">"]&&v.put[">"]>parseFloat(u.e))return c("Certificate expired.");if(p!==u&&u.c&&u.w&&(u.c===_||u.c.indexOf("*")>-1)){let j=e.indexOf("/")>-1?e.replace(e.substring(0,e.indexOf("/")+1),""):"";String.match=String.match||y.text.match;const A=Array.isArray(u.w)?u.w:typeof u.w=="object"||typeof u.w=="string"?[u.w]:[];for(const B of A)if(String.match(j,B["#"])&&String.match(w,B["."])||!B["."]&&String.match(j,B["#"])||!B["#"]&&String.match(w,B["."])||String.match(j?j+"/"+w:w,B["#"]||B)){if(B["+"]&&B["+"].indexOf("*")>-1&&j&&j.indexOf(_)==-1&&w.indexOf(_)==-1)return c(`Path "${j}" or key "${w}" must contain string "${_}".`);if(u.wb&&(typeof u.wb=="string"||(u.wb||{})["#"])){var T=r.as.root.$.back(-1);return typeof u.wb=="string"&&u.wb.slice(0,1)!=="~"&&(T=T.get("~"+m)),T.get(u.wb).get(_).once(N=>N&&(N===1||N===!0)?c(`Certificant ${_} blocked.`):$(u))}return $(u)}return c("Certificate verification fail.")}})};if(w==="pub"&&"~"+m===e)return g===m?r.to.next(v):c("Account not same!");if((b=l.is)&&b.pub&&!x["*"]&&!x["+"]&&(m===b.pub||m!==b.pub&&((v._.msg||{}).opt||{}).cert)){o.opt.pack(v.put,C=>{o.sign(C,l._.sea,async function(_){if(p===_)return c(o.err||"Signature fail.");if(v.put[":"]={":":b=o.opt.unpack(_.m),"~":_.s},v.put["="]=b,m===l.is.pub){(b=f(g))&&((n.sea.own[b]=n.sea.own[b]||{})[m]=1),JSON.stringifyAsync(v.put[":"],function($,u){return $?c($||"Stringify error."):(v.put[":"]=u,r.to.next(v))});return}if(m!==l.is.pub&&((v._.msg||{}).opt||{}).cert){const $=await i.parse(v._.msg.opt.cert);$&&$.m&&$.s&&D($,l.is.pub,u=>{v.put[":"]["+"]=$,v.put[":"]["*"]=l.is.pub,JSON.stringifyAsync(v.put[":"],function(T,j){return T?c(T||"Stringify error."):(v.put[":"]=j,r.to.next(v))})})}},{raw:1})});return}o.opt.pack(v.put,C=>{o.verify(C,x["*"]||m,function(_){var $;if(_=o.opt.unpack(_),p===_)return c("Unverified data.");if(($=f(_))&&m===o.opt.pub($)&&((n.sea.own[$]=n.sea.own[$]||{})[m]=1),x["+"]&&x["+"].m&&x["+"].s&&x["*"])D(x["+"],x["*"],u=>(v.put["="]=_,r.to.next(v)));else return v.put["="]=_,r.to.next(v)})})},h.any=function(r,v,g,w,e,n,c,l){if(n.opt.secure)return c("Soul missing public key at \'"+w+"\'.");n.on("secure",function(m){if(this.off(),!n.opt.secure)return r.to.next(m);c("Data cannot be changed.")}).on.on("secure",v)};var t=y.valid,f=function(r,v){return typeof(v=t(r))=="string"&&v};(y.state||"").ify;var s=/[^\\w_-]/;o.opt.pub=function(r){if(r&&(r=r.split("~"),!(!r||!(r=r[1]))&&(r=r.split(s).slice(0,2),!(!r||r.length!=2)&&(r[0]||"")[0]!=="@")))return r=r.slice(0,2).join("."),r},o.opt.stringy=function(r){},o.opt.pack=function(r,v,g,w,e){var n,c;if(o.opt.check(r))return v(r);r&&r["#"]&&r["."]&&r[">"]&&(n=r[":"],c=1),JSON.parseAsync(c?n:r,function(l,m){var b=p!==(m||"")[":"]&&(m||"")["~"];if(!b){v(r);return}v({m:{"#":e||r["#"],".":g||r["."],":":(m||"")[":"],">":r[">"]||y.state.is(w,g)},s:b})})};var a=o.opt;o.opt.unpack=function(r,v,g){var w;if(p!==r){if(r&&p!==(w=r[":"]))return w;if(v=v||a.fall_key,!g&&a.fall_val&&(g={},g[v]=a.fall_val),!(!v||!g)){if(r===g[v]||!o.opt.check(g[v]))return r;var e=g&&g._&&g._["#"]||a.fall_soul,n=y.state.is(g,v)||a.fall_state;if(r&&r.length===4&&e===r[0]&&v===r[1]&&S(n)===S(r[3]))return r[2];if(n<o.opt.shuffle_attack)return r}}},o.opt.shuffle_attack=15463296e5;var S=Math.floor})(k,"./index")})()})(pt);var xt=pt.exports;const Tt=Z(xt);console.log("Worker initiated"),onmessage=async E=>{console.log("Worker question:",E.data);const k=vt(),O=await Tt.pair();console.log(k,O),k!=null&&k.user||console.warn("Still can\'t enable `gun.user()` in a web worker context. Help needed! 👀"),k.get("check").get("time").once(d=>console.log(d)),k.get("check").get("time").put(Date.now()),postMessage(`Worker answer: ${E.data} - OK`)}})();\n',Ws=typeof self<"u"&&self.Blob&&new Blob([Mc],{type:"text/javascript;charset=utf-8"});function Hf(n){let t;try{if(t=Ws&&(self.URL||self.webkitURL).createObjectURL(Ws),!t)throw"";const e=new Worker(t,{name:n==null?void 0:n.name});return e.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),e}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(Mc),{name:n==null?void 0:n.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const is=ff(Hf);is.post({message:"Worker post check up"});In(is.data,n=>console.log("Recieved:",n),{immediate:!0});const qf="https://peer.wallie.io/gun",Gf={space:"Space",chat:"Chat",posts:"Posts",rooms:"Rooms",files:"Files",qr:"QR Lab"},Wf={pub:"3_1WKUE43mJ7WNrvV5k1VxhsBKgUrex2Syvk6oBADGs.gAMYMkAPtWmWW2eUtYNyRuTjmBL6yLMLGNN_C_fZMPA",hosts:{"Ykula9-Ul9DvuebtArrzIucEKFHQ9FEktznihfLXPd0._miQbdm7EodUhmb-hlhKOCjDwNNprTOwZkEI98v_lpQ":{enc:'SEA{"ct":"dchmYfLhQIk1/g4g3Tk/2vDJxoX+a74GH8l9QPZxTA==","iv":"mTh4TWkZROU3e0sEz+5m","s":"JXnPd0fScCHl"}',profile:'SEA{"m":{"c":"Ykula9-Ul9DvuebtArrzIucEKFHQ9FEktznihfLXPd0._miQbdm7EodUhmb-hlhKOCjDwNNprTOwZkEI98v_lpQ","w":{"*":"profile"}},"s":"gyTabimqmfYo1SGyKQvflbGnBD/j9ZmxGMmF8I3+cuwK3WPvFmgQCHQTH1VcF3IQTvkmPpraEOEbr0NQaIBYgQ=="}',features:'SEA{"m":{"c":"Ykula9-Ul9DvuebtArrzIucEKFHQ9FEktznihfLXPd0._miQbdm7EodUhmb-hlhKOCjDwNNprTOwZkEI98v_lpQ","w":{"*":"features"}},"s":"NExanH65vVKjR+P4H16v6XWGKVc9Vl2MZHcTqe+0DJ/m49CuekYFh7Ld+0TRrOxJIt61/oLsFiIBDhXdB9mNSw=="}',hosts:'SEA{"m":{"c":"Ykula9-Ul9DvuebtArrzIucEKFHQ9FEktznihfLXPd0._miQbdm7EodUhmb-hlhKOCjDwNNprTOwZkEI98v_lpQ","w":{"*":"hosts"}},"s":"k4n4kZsTBOXaikQfvulENn6lfF6q0iMwOC7y+hGclunkrvRdb3ufPCsw21IxJia+lBGNQB4OvrVv/bcssCDB/w=="}'}},features:{rooms:'SEA{"m":{"c":"*","w":{"*":"rooms","+":"*"}},"s":"A2Q5SsPxSEbuiYCozJ7T47rs61xOKDwp3bAtH7me1VhJ3O5g9hgKiGCmCzU/PFmEfCtRx46nm1KxKFPsztodjA=="}',space:'SEA{"m":{"c":"*","w":{"*":"space","+":"*"}},"s":"i0/l7GJqckDD+79NNpVXDr6GhDEKVXBcvvi3/7+w/t8dblCG2mkHPiVS6yDorIRYjSF46mh1/+7MqILKlJVzMw=="}',posts:'SEA{"m":{"c":"*","w":{"*":"posts","+":"*"}},"s":"SYrZMsIpVAE0wm6etUgkrHzrkQI9cAZwm9fw6oNEfHVE89eF96sfbrxiZBt3TvAjozexr6H2i8j+2X0cDVRzug=="}',chat:'SEA{"m":{"c":"*","w":{"*":"chat","+":"*"}},"s":"QZyFMw7q/uXvDAPR+AdG93uPO71rfoIljmZcC1OqJsvcNn2YG5HQQ791D+LDeEVGCH7z4Wd/eHks0ShG+78juQ=="}',files:'SEA{"m":{"c":"*","w":{"*":"files","+":"*"}},"s":"JzYW8HXKT2wBvfgyCIEI+a5jRhbHHg0jt8l1CaEc00wfzNmK+6UZKgqKhKa+uMsgoIS8qRmJcg8RzqXvSmo/xA=="}'}},Tn={relay:qf,features:Gf,room:Wf},Uc=Tn.relay,Pt=At({list:[],peer:$e("peer",Uc),hostname:It(()=>{var n;return((n=new URL(Pt.peer))==null?void 0:n.hostname)||""}),status:"offline",started:0,pulse:0,lag:0,diff:It(()=>Pt.pulse-Pt.started),age:It(()=>Nc(Pt.diff)),delay:It(()=>Date.now()-Pt.pulse),blink:!1});In(()=>Pt.pulse,(n,t)=>{Pt.blink=!Pt.blink,Pt.lag=n-t-500});function Vf(n){Pt.peer=n,setTimeout(()=>{window.location.reload()})}function Jf(){Pt.peer=Uc,setTimeout(()=>{window.location.reload()})}function p1(){const n=xt();return Pt.pulse==0&&(Pt!=null&&Pt.hostname)&&n.get(Pt==null?void 0:Pt.hostname).map().on((t,e)=>{try{Pt[e]=t}catch(s){console.log(s)}}),{relay:Pt,setPeer:Vf,resetPeer:Jf}}var Sr={exports:{}};Sr.exports;var Vs;function Kf(){return Vs||(Vs=1,function(n){(function(){function t(s,r){return r?dn(s):s.slice?t[i(s)]:function(o,a){s(o={exports:{}}),t[i(a)]=o.exports};function i(o){return o.split("/").slice(-1).toString().replace(".js","")}}var e=n;t(function(s){typeof self<"u"&&(s.window=self),typeof window<"u"&&(s.window=window);var r=s.window||s,i,o=r.SEA||{};(o.window=s.window)&&(o.window.SEA=o);try{i+""!=typeof e&&(e.exports=o)}catch{}s.exports=o})(t,"./root"),t(function(s){var r=t("./root");try{r.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(t,"./https"),t(function(s){var r;if(r+""==typeof btoa){if(r+""==typeof Buffer)try{Fe.Buffer=t("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}Fe.btoa=function(i){return Buffer.from(i,"binary").toString("base64")},Fe.atob=function(i){return Buffer.from(i,"base64").toString("binary")}}})(t,"./base64"),t(function(s){t("./base64");function r(){}Object.assign(r,{from:Array.from}),r.prototype=Object.create(Array.prototype),r.prototype.toString=function(i,o,a){i=i||"utf8",o=o||0;const u=this.length;if(i==="hex"){const c=new Uint8Array(this);return[...Array((a&&a+1||u)-o).keys()].map(l=>c[l+o].toString(16).padStart(2,"0")).join("")}if(i==="utf8")return Array.from({length:(a||u)-o},(c,l)=>String.fromCharCode(this[l+o])).join("");if(i==="base64")return btoa(this)},s.exports=r})(t,"./array"),t(function(s){t("./base64");var r=t("./array");function i(...o){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),i.from(...o)}i.prototype=Object.create(Array.prototype),Object.assign(i,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const o=arguments[0];let a;if(typeof o=="string"){const c=arguments[1]||"utf8";if(c==="hex"){const l=o.match(/([\da-fA-F]{2})/g).map(f=>parseInt(f,16));if(!l||!l.length)throw new TypeError("Invalid first argument for type 'hex'.");a=r.from(l)}else if(c==="utf8"||c==="binary"){const l=o.length,f=new Uint16Array(l);Array.from({length:l},(h,d)=>f[d]=o.charCodeAt(d)),a=r.from(f)}else if(c==="base64"){const l=atob(o),f=l.length,h=new Uint8Array(f);Array.from({length:f},(d,p)=>h[p]=l.charCodeAt(p)),a=r.from(h)}else c==="binary"?a=r.from(o):console.info("SafeBuffer.from unknown encoding: "+c);return a}if(o.byteLength,o.byteLength?o.byteLength:o.length){let c;return o instanceof ArrayBuffer&&(c=new Uint8Array(o)),r.from(c||o)}},alloc(o,a=0){return r.from(new Uint8Array(Array.from({length:o},()=>a)))},allocUnsafe(o){return r.from(new Uint8Array(Array.from({length:o})))},concat(o){if(!Array.isArray(o))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return r.from(o.reduce((a,u)=>a.concat(Array.from(u)),[]))}}),i.prototype.from=i.from,i.prototype.toString=r.prototype.toString,s.exports=i})(t,"./buffer"),t(function(s){const r=t("./root"),i={Buffer:t("./buffer")};var o={},a;if(JSON.parseAsync=JSON.parseAsync||function(c,l,f){var h;try{l(h,JSON.parse(c,f))}catch(d){l(d)}},JSON.stringifyAsync=JSON.stringifyAsync||function(c,l,f,h){var d;try{l(d,JSON.stringify(c,f,h))}catch(p){l(p)}},i.parse=function(c,l){return new Promise(function(f,h){JSON.parseAsync(c,function(d,p){d?h(d):f(p)},l)})},i.stringify=function(c,l,f){return new Promise(function(h,d){JSON.stringifyAsync(c,function(p,g){p?d(p):h(g)},l,f)})},r.window&&(i.crypto=r.window.crypto||r.window.msCrypto,i.subtle=(i.crypto||o).subtle||(i.crypto||o).webkitSubtle,i.TextEncoder=r.window.TextEncoder,i.TextDecoder=r.window.TextDecoder,i.random=c=>i.Buffer.from(i.crypto.getRandomValues(new Uint8Array(i.Buffer.alloc(c))))),!i.TextDecoder){const{TextEncoder:c,TextDecoder:l}=t((a+""==typeof e?".":"")+"./lib/text-encoding",1);i.TextDecoder=l,i.TextEncoder=c}if(!i.crypto)try{var u=t("crypto",1);Object.assign(i,{crypto:u,random:l=>i.Buffer.from(u.randomBytes(l))});const{Crypto:c}=t("@peculiar/webcrypto",1);i.ossl=i.subtle=new c({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}s.exports=i})(t,"./shim"),t(function(s){var r=t("./root"),i=t("./shim"),o={};o.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},o.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},o.ecdh={name:"ECDH",namedCurve:"P-256"},o.jwk=function(a,u){a=a.split(".");var c=a[0],l=a[1],f={kty:"EC",crv:"P-256",x:c,y:l,ext:!0};return f.key_ops=u?["sign"]:["verify"],u&&(f.d=u),f},o.keyToJwk=function(a){return{kty:"oct",k:a.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},o.recall={validity:12*60*60,hook:function(a){return a}},o.check=function(a){return typeof a=="string"&&a.slice(0,4)==="SEA{"},o.parse=async function(u){try{var c=typeof u=="string";return c&&u.slice(0,4)==="SEA{"&&(u=u.slice(3)),c?await i.parse(u):u}catch{}return u},r.opt=o,s.exports=o})(t,"./settings"),t(function(s){var r=t("./shim");s.exports=async function(i,o){var a=typeof i=="string"?i:await r.stringify(i),u=await r.subtle.digest({name:o||"SHA-256"},new r.TextEncoder().encode(a));return r.Buffer.from(u)}})(t,"./sha256"),t(function(s){const r=t("./shim"),i=r.subtle,o=r.ossl?r.ossl:i,a=u=>o.digest({name:"SHA-1"},new ArrayBuffer(u));s.exports=a})(t,"./sha1"),t(function(s){var r=t("./root"),i=t("./shim"),o=t("./settings"),a=t("./sha256"),u;r.work=r.work||(async(c,l,f,h)=>{try{var d=(l||{}).epub||l;if(h=h||{},d instanceof Function&&(f=d,d=u),c=typeof c=="string"?c:await i.stringify(c),(h.name||"").toLowerCase().slice(0,3)==="sha"){var p=i.Buffer.from(await a(c,h.name),"binary").toString(h.encode||"base64");if(f)try{f(p)}catch(m){console.log(m)}return p}d=d||i.random(9);var g=await(i.ossl||i.subtle).importKey("raw",new i.TextEncoder().encode(c),{name:h.name||"PBKDF2"},!1,["deriveBits"]),b=await(i.ossl||i.subtle).deriveBits({name:h.name||"PBKDF2",iterations:h.iterations||o.pbkdf2.iter,salt:new i.TextEncoder().encode(h.salt||d),hash:h.hash||o.pbkdf2.hash},g,h.length||o.pbkdf2.ks*8);c=i.random(c.length);var y=i.Buffer.from(b,"binary").toString(h.encode||"base64");if(f)try{f(y)}catch(m){console.log(m)}return y}catch(m){if(console.log(m),r.err=m,r.throw)throw m;f&&f();return}}),s.exports=r.work})(t,"./work"),t(function(s){var r=t("./root"),i=t("./shim");t("./settings"),r.name=r.name||(async(o,a)=>{try{if(o)try{o()}catch(u){console.log(u)}return}catch(u){if(console.log(u),r.err=u,r.throw)throw u;o&&o();return}}),r.pair=r.pair||(async(o,a)=>{try{var u=i.ossl||i.subtle,c=await i.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async h=>{var d={};d.priv=(await i.subtle.exportKey("jwk",h.privateKey)).d;var p=await i.subtle.exportKey("jwk",h.publicKey);return d.pub=p.x+"."+p.y,d});try{var l=await u.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async h=>{var d={};d.epriv=(await u.exportKey("jwk",h.privateKey)).d;var p=await u.exportKey("jwk",h.publicKey);return d.epub=p.x+"."+p.y,d})}catch(h){if(r.window)throw h;if(h=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw h}l=l||{};var f={pub:c.pub,priv:c.priv,epub:l.epub,epriv:l.epriv};if(o)try{o(f)}catch(h){console.log(h)}return f}catch(h){if(console.log(h),r.err=h,r.throw)throw h;o&&o();return}}),s.exports=r.pair})(t,"./pair"),t(function(s){var r=t("./root"),i=t("./shim"),o=t("./settings"),a=t("./sha256"),u;r.sign=r.sign||(async(c,l,f,h)=>{try{if(h=h||{},!(l||h).priv){if(!r.I)throw"No signing key.";l=await r.I(null,{what:c,how:"sign",why:h.why})}if(u===c)throw"`undefined` not allowed.";var d=await o.parse(c),p=h.check=h.check||d;if(r.verify&&(r.opt.check(p)||p&&p.s&&p.m)&&u!==await r.verify(p,l)){var w=await o.parse(p);if(h.raw||(w="SEA"+await i.stringify(w)),f)try{f(w)}catch(A){console.log(A)}return w}var g=l.pub,b=l.priv,y=o.jwk(g,b),m=await a(d),_=await(i.ossl||i.subtle).importKey("jwk",y,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(v=>(i.ossl||i.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},v,new Uint8Array(m))),w={m:d,s:i.Buffer.from(_,"binary").toString(h.encode||"base64")};if(h.raw||(w="SEA"+await i.stringify(w)),f)try{f(w)}catch(v){console.log(v)}return w}catch(v){if(console.log(v),r.err=v,r.throw)throw v;f&&f();return}}),s.exports=r.sign})(t,"./sign"),t(function(s){var r=t("./root"),i=t("./shim"),o=t("./settings"),a=t("./sha256"),u;r.verify=r.verify||(async(f,h,d,p)=>{try{var g=await o.parse(f);if(h===!1){var b=await o.parse(g.m);if(d)try{d(b)}catch(T){console.log(T)}return b}p=p||{};var y=h.pub||h,m=r.opt.slow_leak?await r.opt.slow_leak(y):await(i.ossl||i.subtle).importKey("jwk",o.jwk(y),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),_=await a(g.m),w,v,A,E;try{if(w=i.Buffer.from(g.s,p.encode||"base64"),v=new Uint8Array(w),A=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},m,v,new Uint8Array(_)),!A)throw"Signature did not match."}catch{if(r.opt.fallback)return await r.opt.fall_verify(f,h,d,p)}var P=A?await o.parse(g.m):u;if(d)try{d(P)}catch(T){console.log(T)}return P}catch(T){if(console.log(T),r.err=T,r.throw)throw T;d&&d();return}}),s.exports=r.verify;var c={};r.opt.slow_leak=f=>{if(c[f])return c[f];var h=o.jwk(f);return c[f]=(i.ossl||i.subtle).importKey("jwk",h,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),c[f]};var l=r.opt;r.opt.fall_verify=async function(f,h,d,p,g){if(g===r.opt.fallback)throw"Signature did not match";g=g||1;var b=f||"";f=r.opt.unpack(f)||f;var y=await o.parse(f),m=h.pub||h,_=await r.opt.slow_leak(m),w=g<=r.opt.fallback?i.Buffer.from(await i.subtle.digest({name:"SHA-256"},new i.TextEncoder().encode(await o.parse(y.m)))):await a(y.m),v,A,E;try{if(v=i.Buffer.from(y.s,p.encode||"base64"),A=new Uint8Array(v),E=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},_,A,new Uint8Array(w)),!E)throw"Signature did not match."}catch{try{v=i.Buffer.from(y.s,"utf8"),A=new Uint8Array(v),E=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},_,A,new Uint8Array(w))}catch{if(!E)throw"Signature did not match."}}var P=E?await o.parse(y.m):u;if(l.fall_soul=b["#"],l.fall_key=b["."],l.fall_val=f,l.fall_state=b[">"],d)try{d(P)}catch(T){console.log(T)}return P},r.opt.fallback=2})(t,"./verify"),t(function(s){var r=t("./shim"),i=t("./settings"),o=t("./sha256");const a=async(u,c,l)=>{const f=u+(c||r.random(8)).toString("utf8"),h=r.Buffer.from(await o(f),"binary"),d=i.keyToJwk(h);return await r.subtle.importKey("jwk",d,{name:"AES-GCM"},!1,["encrypt","decrypt"])};s.exports=a})(t,"./aeskey"),t(function(s){var r=t("./root"),i=t("./shim");t("./settings");var o=t("./aeskey"),a;r.encrypt=r.encrypt||(async(u,c,l,f)=>{try{f=f||{};var h=(c||f).epriv||c;if(a===u)throw"`undefined` not allowed.";if(!h){if(!r.I)throw"No encryption key.";c=await r.I(null,{what:u,how:"encrypt",why:f.why}),h=c.epriv||c}var d=typeof u=="string"?u:await i.stringify(u),p={s:i.random(9),iv:i.random(15)},g=await o(h,p.s,f).then(y=>i.subtle.encrypt({name:f.name||"AES-GCM",iv:new Uint8Array(p.iv)},y,new i.TextEncoder().encode(d))),b={ct:i.Buffer.from(g,"binary").toString(f.encode||"base64"),iv:p.iv.toString(f.encode||"base64"),s:p.s.toString(f.encode||"base64")};if(f.raw||(b="SEA"+await i.stringify(b)),l)try{l(b)}catch(y){console.log(y)}return b}catch(y){if(console.log(y),r.err=y,r.throw)throw y;l&&l();return}}),s.exports=r.encrypt})(t,"./encrypt"),t(function(s){var r=t("./root"),i=t("./shim"),o=t("./settings"),a=t("./aeskey");r.decrypt=r.decrypt||(async(u,c,l,f)=>{try{f=f||{};var h=(c||f).epriv||c;if(!h){if(!r.I)throw"No decryption key.";c=await r.I(null,{what:u,how:"decrypt",why:f.why}),h=c.epriv||c}var d=await o.parse(u),p,g,b;try{p=i.Buffer.from(d.s,f.encode||"base64"),g=i.Buffer.from(d.iv,f.encode||"base64"),b=i.Buffer.from(d.ct,f.encode||"base64");var y=await a(h,p,f).then(_=>i.subtle.decrypt({name:f.name||"AES-GCM",iv:new Uint8Array(g),tagLength:128},_,new Uint8Array(b)))}catch{if(f.encode==="utf8")throw"Could not decrypt";if(r.opt.fallback)return f.encode="utf8",await r.decrypt(u,c,l,f)}var m=await o.parse(new i.TextDecoder("utf8").decode(y));if(l)try{l(m)}catch(_){console.log(_)}return m}catch(_){if(console.log(_),r.err=_,r.throw)throw _;l&&l();return}}),s.exports=r.decrypt})(t,"./decrypt"),t(function(s){var r=t("./root"),i=t("./shim");t("./settings"),r.secret=r.secret||(async(a,u,c,l)=>{try{if(l=l||{},!u||!u.epriv||!u.epub){if(!r.I)throw"No secret mix.";u=await r.I(null,{what:a,how:"secret",why:l.why})}var f=a.epub||a,h=u.epub,d=u.epriv,p=i.ossl||i.subtle,g=o(f),b=Object.assign({public:await p.importKey(...g,!0,[])},{name:"ECDH",namedCurve:"P-256"}),y=o(h,d),m=await p.importKey(...y,!1,["deriveBits"]).then(async w=>{var v=await p.deriveBits(b,w,256),A=new Uint8Array(v),E=await p.importKey("raw",A,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return p.exportKey("jwk",E).then(({k:P})=>P)}),_=m;if(c)try{c(_)}catch(w){console.log(w)}return _}catch(w){if(console.log(w),r.err=w,r.throw)throw w;c&&c();return}});var o=(a,u)=>{var[c,l]=a.split("."),f=u?{d:u}:{};return["jwk",Object.assign(f,{x:c,y:l,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};s.exports=r.secret})(t,"./secret"),t(function(s){var r=t("./root");r.certify=r.certify||(async(i,o={},a,u,c={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),i=(()=>{var _=[];if(i){if((typeof i=="string"||Array.isArray(i))&&i.indexOf("*")>-1)return"*";if(typeof i=="string")return i;if(Array.isArray(i)){if(i.length===1&&i[0])return typeof i[0]=="object"&&i[0].pub?i[0].pub:typeof i[0]=="string"?i[0]:null;i.map(w=>{typeof w=="string"?_.push(w):typeof w=="object"&&w.pub&&_.push(w.pub)})}return typeof i=="object"&&i.pub?i.pub:_.length>0?_:null}})(),!i)return console.log("No certificant found.");const f=c.expiry&&(typeof c.expiry=="number"||typeof c.expiry=="string")?parseFloat(c.expiry):null,h=(o||{}).read?o.read:null,d=(o||{}).write?o.write:typeof o=="string"||Array.isArray(o)||o["+"]||o["#"]||o["."]||o["="]||o["*"]||o[">"]||o["<"]?o:null,p=(c||{}).block||(c||{}).blacklist||(c||{}).ban||{},g=p.read&&(typeof p.read=="string"||(p.read||{})["#"])?p.read:null,b=typeof p=="string"?p:p.write&&(typeof p.write=="string"||p.write["#"])?p.write:null;if(!h&&!d)return console.log("No policy found.");const y=JSON.stringify({c:i,...f?{e:f}:{},...h?{r:h}:{},...d?{w:d}:{},...g?{rb:g}:{},...b?{wb:b}:{}});var l=await r.sign(y,a,null,{raw:1});if(c.raw||(l="SEA"+JSON.stringify(l)),u)try{u(l)}catch(_){console.log(_)}return l}catch(f){if(r.err=f,r.throw)throw f;u&&u();return}}),s.exports=r.certify})(t,"./certify"),t(function(s){var r=t("./shim"),i=t("./root");i.work=t("./work"),i.sign=t("./sign"),i.verify=t("./verify"),i.encrypt=t("./encrypt"),i.decrypt=t("./decrypt"),i.certify=t("./certify"),i.random=i.random||r.random,i.Buffer=i.Buffer||t("./buffer"),i.keyid=i.keyid||(async o=>{try{const a=r.Buffer.concat(o.replace(/-/g,"+").replace(/_/g,"/").split(".").map(f=>r.Buffer.from(f,"base64"))),u=r.Buffer.concat([r.Buffer.from([153,a.length/256,a.length%256]),a]),c=await sha1hash(u),l=r.Buffer.from(c,"binary");return l.toString("hex",l.length-8)}catch(a){throw console.log(a),a}}),((i.window||{}).GUN||{}).SEA=i,s.exports=i})(t,"./sea"),t(function(s){var r=t("./sea"),i,o;r.window?i=r.window.GUN||{chain:{}}:i=t((o+""==typeof e?".":"")+"./gun",1),r.GUN=i;function a(c){this._={$:this}}a.prototype=function(){function c(){}return c.prototype=i.chain,new c}(),a.prototype.constructor=a,i.chain.user=function(c){var l=this,h=l.back(-1),f;if(c)return c=r.opt.pub((c._||"")["#"])||c,h.get("~"+c);if(f=h.back("user"))return f;var h=h._,d=h,p=d.opt.uuid||u;return(d=(f=d.user=l.chain(new a))._).opt={},d.opt.uuid=function(g){var b=p(),y=h.user;return!y||!(y=y.is)||!(y=y.pub)||(b="~"+y+"/"+b,g&&g.call&&g(null,b)),b},f};function u(){return i.state().toString(36).replace(".","")}i.User=a,a.GUN=i,a.SEA=i.SEA=r,s.exports=a})(t,"./user"),t(function(s){var r,i=""+r!=typeof GUN?GUN||{chain:{}}:t((""+r==typeof e?".":"")+"./gun",1);i.chain.then=function(o,a){var u=this,c=new Promise(function(l,f){u.once(l,a)});return o?c.then(o):c}})(t,"./then"),t(function(s){var r=t("./user"),i=r.SEA,o=r.GUN,a=function(){};r.prototype.create=function(...u){var c=typeof u[0]=="object"&&(u[0].pub||u[0].epub)?u[0]:typeof u[1]=="object"&&(u[1].pub||u[1].epub)?u[1]:null,l=c&&(c.pub||c.epub)?c.pub:typeof u[0]=="string"?u[0]:null,f=c&&(c.pub||c.epub)?c:l&&typeof u[1]=="string"?u[1]:null,h=u.filter(_=>typeof _=="function")[0]||null,d=u&&u.length>1&&typeof u[u.length-1]=="object"?u[u.length-1]:{},p=this,g=p._,b=p.back(-1);if(h=h||a,d=d||{},d.check!==!1){var y;if(l||(y="No user."),(f||"").length<8&&(y="Password too short!"),y)return h({err:o.log(y)}),p}if(g.ing)return(h||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),p;g.ing=!0;var m={};return m.a=function(_){if(m.pubs=_,_&&!d.already){var w={err:o.log("User already created!")};g.ing=!1,(h||a)(w),p.leave();return}m.salt=String.random(64),i.work(f,m.salt,m.b)},m.b=function(_){m.proof=_,c?m.c(c):i.pair(m.c)},m.c=function(_){var w;m.pair=_||{},(w=g.root.user)&&(w._.sea=_,w.is={pub:_.pub,epub:_.epub,alias:l}),m.data={pub:_.pub},m.d()},m.d=function(){m.data.alias=l,m.e()},m.e=function(){m.data.epub=m.pair.epub,i.encrypt({priv:m.pair.priv,epriv:m.pair.epriv},m.proof,m.f,{raw:1})},m.f=function(_){m.data.auth=JSON.stringify({ek:_,s:m.salt}),m.g(m.data.auth)},m.g=function(_){var w;m.data.auth=m.data.auth||_,b.get(w="~"+m.pair.pub).put(m.data).on(m.h);var v={};v[w]={"#":w},b.get("~@"+l).put(v).get(w).on(m.i)},m.h=function(_,w,v,A){A.off(),m.h.ok=1,m.i()},m.i=function(_,w,v,A){A&&(m.i.ok=1,A.off()),!(!m.h.ok||!m.i.ok)&&(g.ing=!1,h({ok:0,pub:m.pair.pub}),a===h&&(c?p.auth(c):p.auth(l,f)))},b.get("~@"+l).once(m.a),p},r.prototype.leave=function(u,c){var l=this,f=l.back(-1)._.user;if(f&&(delete f.is,delete f._.is,delete f._.sea),i.window)try{var h={};h=i.window.sessionStorage,delete h.recall,delete h.pair}catch{}return l}})(t,"./create"),t(function(s){var r=t("./user"),i=r.SEA,o=r.GUN,a=function(){};r.prototype.auth=function(...c){var l=typeof c[0]=="object"&&(c[0].pub||c[0].epub)?c[0]:typeof c[1]=="object"&&(c[1].pub||c[1].epub)?c[1]:null,f=!l&&typeof c[0]=="string"?c[0]:null,h=(f||l&&!(l.priv&&l.epriv))&&typeof c[1]=="string"?c[1]:null,d=c.filter(v=>typeof v=="function")[0]||null,p=c&&c.length>1&&typeof c[c.length-1]=="object"?c[c.length-1]:{},g=this,b=g._,y=g.back(-1);if(b.ing)return(d||a)({err:o.log("User is already being created or authenticated!"),wait:!0}),g;b.ing=!0;var m={},_,w=9;return m.a=function(v){if(!v)return m.b();if(!v.pub){var A=[];return Object.keys(v).forEach(function(E){E!="_"&&A.push(v[E])}),m.b(A)}if(m.name)return m.f(v);m.c((m.data=v).auth)},m.b=function(v){var A=(m.list=(m.list||[]).concat(v||[])).shift();if(_===A){if(m.name)return m.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(f&&w--){y.get("~@"+f).once(m.a);return}return m.err("Wrong user or password.")}y.get(A).once(m.a)},m.c=function(v){if(_===v)return m.b();if(typeof v=="string")return m.c(u(v));i.work(h,(m.auth=v).s,m.d,m.enc)},m.d=function(v){i.decrypt(m.auth.ek,v,m.e,m.enc)},m.e=function(v){if(_===v)return m.enc?(m.enc=null,m.b()):(m.enc={encode:"utf8"},m.c(m.auth));m.half=v,m.f(m.data)},m.f=function(v){var A=m.half||{},E=m.data||{};m.g(m.lol={pub:v.pub||E.pub,epub:v.epub||E.epub,priv:v.priv||A.priv,epriv:v.epriv||A.epriv})},m.g=function(v){if(!v||!v.pub||!v.epub)return m.b();m.pair=v;var A=y._.user,E=A._;E.tag;var P=E.opt;E=A._=y.get("~"+v.pub)._,E.opt=P,A.is={pub:v.pub,epub:v.epub,alias:f||v.pub},E.sea=m.pair,b.ing=!1;try{h&&_==(u(b.root.graph["~"+v.pub].auth)||"")[":"]&&(p.shuffle=p.change=h)}catch{}if(p.change?m.z():(d||a)(E),i.window&&(g.back("user")._.opt||p).remember)try{var T={};T=i.window.sessionStorage,T.recall=!0,T.pair=JSON.stringify(v)}catch{}try{y._.tag.auth?y._.on("auth",E):setTimeout(function(){y._.on("auth",E)},1)}catch(I){o.log("Your 'auth' callback crashed with:",I)}},m.h=function(v){if(!v)return m.b();if(f=v.alias,f||(f=v.alias="~"+l.pub),!v.auth)return m.g(l);l=null,m.c((m.data=v).auth)},m.z=function(){m.salt=String.random(64),i.work(p.change,m.salt,m.y)},m.y=function(v){i.encrypt({priv:m.pair.priv,epriv:m.pair.epriv},v,m.x,{raw:1})},m.x=function(v){m.w(JSON.stringify({ek:v,s:m.salt}))},m.w=function(v){if(p.shuffle){console.log("migrate core account from UTF8 & shuffle");var A={};Object.keys(m.data).forEach(function(E){A[E]=m.data[E]}),delete A._,A.auth=v,y.get("~"+m.pair.pub).put(A)}y.get("~"+m.pair.pub).get("auth").put(v,d||a)},m.err=function(v){var A={err:o.log(v||"User cannot be found!")};b.ing=!1,(d||a)(A)},m.plugin=function(v){if(!(m.name=v))return m.err();var A=[v];v[0]!=="~"&&(A[1]="~"+v,A[2]="~@"+v),m.b(A)},l?l.priv&&l.epriv?m.g(l):y.get("~"+l.pub).once(m.h):f?y.get("~@"+f).once(m.a):!f&&!h&&i.name(m.plugin),g};function u(c){if(typeof c!="string")return c;try{c=JSON.parse(c)}catch{c={}}return c}})(t,"./auth"),t(function(s){var r=t("./user"),i=r.SEA;r.GUN,r.prototype.recall=function(o,a){var u=this,c=u.back(-1);if(o=o||{},o&&o.sessionStorage){if(i.window)try{var l={};l=i.window.sessionStorage,l&&(c._.opt.remember=!0,(u.back("user")._.opt||o).remember=!0,(l.recall||l.pair)&&c.user().auth(JSON.parse(l.pair),a))}catch{}return u}return u}})(t,"./recall"),t(function(s){var r=t("./user"),i=r.SEA,o=r.GUN,a=function(){};r.prototype.pair=function(){var u=this,c;try{c=new Proxy({DANGER:"☠"},{get:function(l,f,h){if(!(!u.is||!(u._||"").sea))return u._.sea[f]}})}catch{}return c},r.prototype.delete=async function(u,c,l){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var f=this;f.back(-1);var h=f.back("user");try{h.auth(u,c,function(d){var p=(h.is||{}).pub;h.map().once(function(){this.put(null)}),h.leave(),(l||a)({ok:0})})}catch(d){o.log("User.delete failed! Error:",d)}return f},r.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const u=this.back(-1);try{return await authRecall(u),u._.user._}catch{const l="No session!";throw o.log(l),{err:l}}},r.prototype.trust=async function(u){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),o.is(u)&&u.get("pub").get((c,l)=>{console.log(c,l)}),u.get("trust").get(path).put(theirPubkey)},r.prototype.grant=function(u,c){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var l=this,f=l.back(-1).user(),h=f._.sea,d="";return l.back(function(p){p.is||(d+=p.get||"")}),async function(){var p,g=await f.get("grant").get(h.pub).get(d).then();g=await i.decrypt(g,h),g||(g=i.random(16).toString(),p=await i.encrypt(g,h),f.get("grant").get(h.pub).get(d).put(p));var b=u.get("pub").then(),y=u.get("epub").then();b=await b,y=await y;var m=await i.secret(y,h);p=await i.encrypt(g,m),f.get("grant").get(b).get(d).put(p,c)}(),l},r.prototype.secret=function(u,c){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var l=this,f=l.back(-1).user(),h=f.pair(),d="";return l.back(function(p){p.is||(d+=p.get||"")}),async function(){var p,g=await f.get("trust").get(h.pub).get(d).then();g=await i.decrypt(g,h),g||(g=i.random(16).toString(),p=await i.encrypt(g,h),f.get("trust").get(h.pub).get(d).put(p)),p=await i.encrypt(u,g),l.put(p,c)}(),l},s.exports=r})(t,"./share"),t(function(s){var r=t("./sea"),i=t("./settings"),o,a=(r.window||"").GUN||t((""+o==typeof e?".":"")+"./gun",1);a.on("opt",function(p){p.sea||(p.sea={own:{}},p.on("put",u,p)),this.to.next(p)});function u(p){var g=this,b=g.as,y=p.put,m=y["#"],_=y["."],w=y[":"],v=y[">"],A=p["#"],E;if(!(!m||!_)){if((p._||"").faith&&(b.opt||"").faith&&typeof p._=="function"){r.opt.pack(y,function(T){r.verify(T,!1,function(I){y["="]=r.opt.unpack(I),g.to.next(p)})});return}var P=function(T){b.on("in",{"@":A,err:p.err=T})};if((p._||"").DBG&&((p._||"").DBG.c=+new Date),0<=m.indexOf("<?")&&(E=parseFloat(m.split("<?")[1]||""),E&&v<a.state()-E*1e3)){(E=p._)&&E.stun&&E.stun--;return}if(m==="~@"){u.alias(g,p,w,_,m,b,P);return}if(m.slice(0,2)==="~@"){u.pubs(g,p,w,_,m,b,P);return}if(E=r.opt.pub(m)){u.pub(g,p,w,_,m,b,P,b.user||"",E);return}if(0<=m.indexOf("#")){u.hash(g,p,w,_,m,b,P);return}u.any(g,p,w,_,m,b,P,b.user||"")}}u.hash=function(p,g,b,y,m,_,w){r.work(b,null,function(v){function A(E){let P="";for(let T=0;T<E.length;T++)P+=T-1&1?"":String.fromCharCode(parseInt(E.substring(T-1,T+1),16));return btoa(P)}if(v&&v===y.split("#").slice(-1)[0])return p.to.next(g);if(v&&v===A(y.split("#").slice(-1)[0]))return p.to.next(g);w("Data hash not same as hash!")},{name:"SHA-256"})},u.alias=function(p,g,b,y,m,_,w){if(!b)return w("Data must exist!");if("~@"+y===l(b))return p.to.next(g);w("Alias not same!")},u.pubs=function(p,g,b,y,m,_,w){if(!b)return w("Alias must exist!");if(y===l(b))return p.to.next(g);w("Alias not same!")},u.pub=async function(p,g,b,y,m,_,w,v,A){var E;const P=await i.parse(b)||{},T=(I,F,k)=>{if(I.m&&I.s&&F&&A)return r.verify(I,A,S=>{if(o!==S&&o!==S.e&&g.put[">"]&&g.put[">"]>parseFloat(S.e))return w("Certificate expired.");if(o!==S&&S.c&&S.w&&(S.c===F||S.c.indexOf("*")>-1)){let j=m.indexOf("/")>-1?m.replace(m.substring(0,m.indexOf("/")+1),""):"";String.match=String.match||a.text.match;const D=Array.isArray(S.w)?S.w:typeof S.w=="object"||typeof S.w=="string"?[S.w]:[];for(const C of D)if(String.match(j,C["#"])&&String.match(y,C["."])||!C["."]&&String.match(j,C["#"])||!C["#"]&&String.match(y,C["."])||String.match(j?j+"/"+y:y,C["#"]||C)){if(C["+"]&&C["+"].indexOf("*")>-1&&j&&j.indexOf(F)==-1&&y.indexOf(F)==-1)return w(`Path "${j}" or key "${y}" must contain string "${F}".`);if(S.wb&&(typeof S.wb=="string"||(S.wb||{})["#"])){var x=p.as.root.$.back(-1);return typeof S.wb=="string"&&S.wb.slice(0,1)!=="~"&&(x=x.get("~"+A)),x.get(S.wb).get(F).once(R=>R&&(R===1||R===!0)?w(`Certificant ${F} blocked.`):k(S))}return k(S)}return w("Certificate verification fail.")}})};if(y==="pub"&&"~"+A===m)return b===A?p.to.next(g):w("Account not same!");if((E=v.is)&&E.pub&&!P["*"]&&!P["+"]&&(A===E.pub||A!==E.pub&&((g._.msg||{}).opt||{}).cert)){r.opt.pack(g.put,I=>{r.sign(I,v._.sea,async function(F){if(o===F)return w(r.err||"Signature fail.");if(g.put[":"]={":":E=r.opt.unpack(F.m),"~":F.s},g.put["="]=E,A===v.is.pub){(E=l(b))&&((_.sea.own[E]=_.sea.own[E]||{})[A]=1),JSON.stringifyAsync(g.put[":"],function(k,S){return k?w(k||"Stringify error."):(g.put[":"]=S,p.to.next(g))});return}if(A!==v.is.pub&&((g._.msg||{}).opt||{}).cert){const k=await i.parse(g._.msg.opt.cert);k&&k.m&&k.s&&T(k,v.is.pub,S=>{g.put[":"]["+"]=k,g.put[":"]["*"]=v.is.pub,JSON.stringifyAsync(g.put[":"],function(x,j){return x?w(x||"Stringify error."):(g.put[":"]=j,p.to.next(g))})})}},{raw:1})});return}r.opt.pack(g.put,I=>{r.verify(I,P["*"]||A,function(F){var k;if(F=r.opt.unpack(F),o===F)return w("Unverified data.");if((k=l(F))&&A===r.opt.pub(k)&&((_.sea.own[k]=_.sea.own[k]||{})[A]=1),P["+"]&&P["+"].m&&P["+"].s&&P["*"])T(P["+"],P["*"],S=>(g.put["="]=F,p.to.next(g)));else return g.put["="]=F,p.to.next(g)})})},u.any=function(p,g,b,y,m,_,w,v){if(_.opt.secure)return w("Soul missing public key at '"+y+"'.");_.on("secure",function(A){if(this.off(),!_.opt.secure)return p.to.next(A);w("Data cannot be changed.")}).on.on("secure",g)};var c=a.valid,l=function(p,g){return typeof(g=c(p))=="string"&&g};(a.state||"").ify;var f=/[^\w_-]/;r.opt.pub=function(p){if(p&&(p=p.split("~"),!(!p||!(p=p[1]))&&(p=p.split(f).slice(0,2),!(!p||p.length!=2)&&(p[0]||"")[0]!=="@")))return p=p.slice(0,2).join("."),p},r.opt.stringy=function(p){},r.opt.pack=function(p,g,b,y,m){var _,w;if(r.opt.check(p))return g(p);p&&p["#"]&&p["."]&&p[">"]&&(_=p[":"],w=1),JSON.parseAsync(w?_:p,function(v,A){var E=o!==(A||"")[":"]&&(A||"")["~"];if(!E){g(p);return}g({m:{"#":m||p["#"],".":b||p["."],":":(A||"")[":"],">":p[">"]||a.state.is(y,b)},s:E})})};var h=r.opt;r.opt.unpack=function(p,g,b){var y;if(o!==p){if(p&&o!==(y=p[":"]))return y;if(g=g||h.fall_key,!b&&h.fall_val&&(b={},b[g]=h.fall_val),!(!g||!b)){if(p===b[g]||!r.opt.check(b[g]))return p;var m=b&&b._&&b._["#"]||h.fall_soul,_=a.state.is(b,g)||h.fall_state;if(p&&p.length===4&&m===p[0]&&g===p[1]&&d(_)===d(p[3]))return p[2];if(_<r.opt.shuffle_attack)return p}}},r.opt.shuffle_attack=15463296e5;var d=Math.floor})(t,"./index")})()}(Sr)),Sr.exports}var Zf=Kf();const Le=en(Zf);is.post("Welcome to Gun-Vue");let ei;function xt(n={localStorage:!1}){if(!ei){const t={peers:[Pt.peer]};typeof n=="object"&&Object.assign(t,n),console.log(t.peers),ei=Xe(t)}return ei}function g1(n={localStorage:!1}){return Xe({peers:[Pt.peer],...n})}var Ea;(Ea=Xe==null?void 0:Xe.node)==null||Ea.soul;var Ca;const m1=(Ca=Xe==null?void 0:Xe.text)==null?void 0:Ca.random;var ni,Js;function Yf(){if(Js)return ni;Js=1;const n="[a-fA-F\\d:]",t=c=>c&&c.includeBoundaries?`(?:(?<=\\s|^)(?=${n})|(?<=${n})(?=\\s|$))`:"",e="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",r=`
(?:
(?:${s}:){7}(?:${s}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${s}:){6}(?:${e}|:${s}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${s}:){5}(?::${e}|(?::${s}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${s}:){4}(?:(?::${s}){0,1}:${e}|(?::${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${s}:){3}(?:(?::${s}){0,2}:${e}|(?::${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${s}:){2}(?:(?::${s}){0,3}:${e}|(?::${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${s}:){1}(?:(?::${s}){0,4}:${e}|(?::${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${s}){0,5}:${e}|(?::${s}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp(`(?:^${e}$)|(?:^${r}$)`),o=new RegExp(`^${e}$`),a=new RegExp(`^${r}$`),u=c=>c&&c.exact?i:new RegExp(`(?:${t(c)}${e}${t(c)})|(?:${t(c)}${r}${t(c)})`,"g");return u.v4=c=>c&&c.exact?o:new RegExp(`${t(c)}${e}${t(c)}`,"g"),u.v6=c=>c&&c.exact?a:new RegExp(`${t(c)}${r}${t(c)}`,"g"),ni=u,ni}const Xf=JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","اتصالات","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","诺基亚","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]');var ri,Ks;function Qf(){if(Ks)return ri;Ks=1;const n=Yf(),t=Xf;return ri=e=>{e={strict:!0,...e};const s=`(?:(?:[a-z]+:)?//)${e.strict?"":"?"}`,r="(?:\\S+(?::\\S*)?@)?",i=n.v4().source,o="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",a="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",u=`(?:\\.${e.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${t.sort((h,d)=>d.length-h.length).join("|")})`})\\.?`,f=`(?:${s}|www\\.)${r}(?:localhost|${i}|${o}${a}${u})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return e.exact?new RegExp(`(?:^${f}$)`,"i"):new RegExp(f,"ig")},ri}var th=Qf();const eh=en(th),Pi=At({}),Ii=At({});async function nh({source:n="https://raw.githubusercontent.com/wiki/amark/gun/volunteer.dht.md"}={}){const s=(await(await fetch(n)).text()).match(eh());return s.push(Pt.peer),Array.from(s).forEach(i=>{let o=new URL(i);if(o.pathname==="/gun"&&o.pathname.indexOf("~~")===-1){let a=performance.now();fetch(o.href,{method:"HEAD",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"}).then(u=>{let c=performance.now();if(u.ok){const l={host:o.hostname,ping:(c-a).toFixed(),url:o.href};Pi[o.hostname]=l}else Ii[o.hostname]=u}).catch(u=>{Ii[o.hostname]=u})}}),Pi}function b1(){return{relays:Pi,errors:Ii,loadRelays:nh}}function _1(n){return typeof n=="string"&&n.length===44&&n.charAt(43)==="="}async function ss(n){return await Le.work(n,null,null,{name:"SHA-256"})}async function rh(n){let t=typeof n=="string"?n:JSON.stringify(n);return{hash:await ss(t),hashed:t}}function y1(n){if(!n)return;const t=/[+=/]/g;return n.replace(t,ih)}function ih(n){switch(n){case"+":return"-";case"=":return".";case"/":return"_"}}function w1(n,t={}){if(n){if(typeof n=="object")return n}else return t;try{return JSON.parse(n)}catch{return t}}async function sh({pair:n,tag:t="word",dot:e="",users:s="*",personal:r=!1}){let i={"*":`${t}`};e&&(i["."]=e),r&&(i["+"]="*");try{return await Le.certify(s,i,n)}catch(o){return console.log("cert error: ",o),""}}async function Zs({pair:n,list:t=[]}){const e={};for(let s of t)e[s.tag]=await sh({...s,pair:n});return e}function Be(n){return Array.isArray?Array.isArray(n):qc(n)==="[object Array]"}function oh(n){if(typeof n=="string")return n;let t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function ah(n){return n==null?"":oh(n)}function Se(n){return typeof n=="string"}function zc(n){return typeof n=="number"}function uh(n){return n===!0||n===!1||ch(n)&&qc(n)=="[object Boolean]"}function Hc(n){return typeof n=="object"}function ch(n){return Hc(n)&&n!==null}function Kt(n){return n!=null}function ii(n){return!n.trim().length}function qc(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const lh="Incorrect 'index' type",fh=n=>`Invalid value for key ${n}`,hh=n=>`Pattern length exceeds max of ${n}.`,dh=n=>`Missing ${n} property in key`,ph=n=>`Property 'weight' in key '${n}' must be a positive integer`,Ys=Object.prototype.hasOwnProperty;class gh{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(s=>{let r=Gc(s);this._keys.push(r),this._keyMap[r.id]=r,e+=r.weight}),this._keys.forEach(s=>{s.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Gc(n){let t=null,e=null,s=null,r=1,i=null;if(Se(n)||Be(n))s=n,t=Xs(n),e=ji(n);else{if(!Ys.call(n,"name"))throw new Error(dh("name"));const o=n.name;if(s=o,Ys.call(n,"weight")&&(r=n.weight,r<=0))throw new Error(ph(o));t=Xs(o),e=ji(o),i=n.getFn}return{path:t,id:e,weight:r,src:s,getFn:i}}function Xs(n){return Be(n)?n:n.split(".")}function ji(n){return Be(n)?n.join("."):n}function mh(n,t){let e=[],s=!1;const r=(i,o,a)=>{if(Kt(i))if(!o[a])e.push(i);else{let u=o[a];const c=i[u];if(!Kt(c))return;if(a===o.length-1&&(Se(c)||zc(c)||uh(c)))e.push(ah(c));else if(Be(c)){s=!0;for(let l=0,f=c.length;l<f;l+=1)r(c[l],o,a+1)}else o.length&&r(c,o,a+1)}};return r(n,Se(t)?t.split("."):t,0),s?e:e[0]}const bh={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},_h={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,t)=>n.score===t.score?n.idx<t.idx?-1:1:n.score<t.score?-1:1},yh={location:0,threshold:.6,distance:100},wh={useExtendedSearch:!1,getFn:mh,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var dt={..._h,...bh,...yh,...wh};const vh=/[^ ]+/g;function xh(n=1,t=3){const e=new Map,s=Math.pow(10,t);return{get(r){const i=r.match(vh).length;if(e.has(i))return e.get(i);const o=1/Math.pow(i,.5*n),a=parseFloat(Math.round(o*s)/s);return e.set(i,a),a},clear(){e.clear()}}}class os{constructor({getFn:t=dt.getFn,fieldNormWeight:e=dt.fieldNormWeight}={}){this.norm=xh(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,s)=>{this._keysMap[e.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Se(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();Se(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,s=this.size();e<s;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Kt(t)||ii(t))return;let s={v:t,i:e,n:this.norm.get(t)};this.records.push(s)}_addObject(t,e){let s={i:e,$:{}};this.keys.forEach((r,i)=>{let o=r.getFn?r.getFn(t):this.getFn(t,r.path);if(Kt(o)){if(Be(o)){let a=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:c,value:l}=u.pop();if(Kt(l))if(Se(l)&&!ii(l)){let f={v:l,i:c,n:this.norm.get(l)};a.push(f)}else Be(l)&&l.forEach((f,h)=>{u.push({nestedArrIndex:h,value:f})})}s.$[i]=a}else if(Se(o)&&!ii(o)){let a={v:o,n:this.norm.get(o)};s.$[i]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Wc(n,t,{getFn:e=dt.getFn,fieldNormWeight:s=dt.fieldNormWeight}={}){const r=new os({getFn:e,fieldNormWeight:s});return r.setKeys(n.map(Gc)),r.setSources(t),r.create(),r}function kh(n,{getFn:t=dt.getFn,fieldNormWeight:e=dt.fieldNormWeight}={}){const{keys:s,records:r}=n,i=new os({getFn:t,fieldNormWeight:e});return i.setKeys(s),i.setIndexRecords(r),i}function hr(n,{errors:t=0,currentLocation:e=0,expectedLocation:s=0,distance:r=dt.distance,ignoreLocation:i=dt.ignoreLocation}={}){const o=t/n.length;if(i)return o;const a=Math.abs(s-e);return r?o+a/r:a?1:o}function Sh(n=[],t=dt.minMatchCharLength){let e=[],s=-1,r=-1,i=0;for(let o=n.length;i<o;i+=1){let a=n[i];a&&s===-1?s=i:!a&&s!==-1&&(r=i-1,r-s+1>=t&&e.push([s,r]),s=-1)}return n[i-1]&&i-s>=t&&e.push([s,i-1]),e}const hn=32;function Ah(n,t,e,{location:s=dt.location,distance:r=dt.distance,threshold:i=dt.threshold,findAllMatches:o=dt.findAllMatches,minMatchCharLength:a=dt.minMatchCharLength,includeMatches:u=dt.includeMatches,ignoreLocation:c=dt.ignoreLocation}={}){if(t.length>hn)throw new Error(hh(hn));const l=t.length,f=n.length,h=Math.max(0,Math.min(s,f));let d=i,p=h;const g=a>1||u,b=g?Array(f):[];let y;for(;(y=n.indexOf(t,p))>-1;){let E=hr(t,{currentLocation:y,expectedLocation:h,distance:r,ignoreLocation:c});if(d=Math.min(E,d),p=y+l,g){let P=0;for(;P<l;)b[y+P]=1,P+=1}}p=-1;let m=[],_=1,w=l+f;const v=1<<l-1;for(let E=0;E<l;E+=1){let P=0,T=w;for(;P<T;)hr(t,{errors:E,currentLocation:h+T,expectedLocation:h,distance:r,ignoreLocation:c})<=d?P=T:w=T,T=Math.floor((w-P)/2+P);w=T;let I=Math.max(1,h-T+1),F=o?f:Math.min(h+T,f)+l,k=Array(F+2);k[F+1]=(1<<E)-1;for(let x=F;x>=I;x-=1){let j=x-1,D=e[n.charAt(j)];if(g&&(b[j]=+!!D),k[x]=(k[x+1]<<1|1)&D,E&&(k[x]|=(m[x+1]|m[x])<<1|1|m[x+1]),k[x]&v&&(_=hr(t,{errors:E,currentLocation:j,expectedLocation:h,distance:r,ignoreLocation:c}),_<=d)){if(d=_,p=j,p<=h)break;I=Math.max(1,2*h-p)}}if(hr(t,{errors:E+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:c})>d)break;m=k}const A={isMatch:p>=0,score:Math.max(.001,_)};if(g){const E=Sh(b,a);E.length?u&&(A.indices=E):A.isMatch=!1}return A}function Eh(n){let t={};for(let e=0,s=n.length;e<s;e+=1){const r=n.charAt(e);t[r]=(t[r]||0)|1<<s-e-1}return t}class Vc{constructor(t,{location:e=dt.location,threshold:s=dt.threshold,distance:r=dt.distance,includeMatches:i=dt.includeMatches,findAllMatches:o=dt.findAllMatches,minMatchCharLength:a=dt.minMatchCharLength,isCaseSensitive:u=dt.isCaseSensitive,ignoreLocation:c=dt.ignoreLocation}={}){if(this.options={location:e,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(h,d)=>{this.chunks.push({pattern:h,alphabet:Eh(h),startIndex:d})},f=this.pattern.length;if(f>hn){let h=0;const d=f%hn,p=f-d;for(;h<p;)l(this.pattern.substr(h,hn),h),h+=hn;if(d){const g=f-hn;l(this.pattern.substr(g),g)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:s}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return s&&(p.indices=[[0,t.length-1]]),p}const{location:r,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,ignoreLocation:c}=this.options;let l=[],f=0,h=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:b})=>{const{isMatch:y,score:m,indices:_}=Ah(t,p,g,{location:r+b,distance:i,threshold:o,findAllMatches:a,minMatchCharLength:u,includeMatches:s,ignoreLocation:c});y&&(h=!0),f+=m,y&&_&&(l=[...l,..._])});let d={isMatch:h,score:h?f/this.chunks.length:1};return h&&s&&(d.indices=l),d}}class nn{constructor(t){this.pattern=t}static isMultiMatch(t){return Qs(t,this.multiRegex)}static isSingleMatch(t){return Qs(t,this.singleRegex)}search(){}}function Qs(n,t){const e=n.match(t);return e?e[1]:null}class Ch extends nn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Th extends nn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class Dh extends nn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Oh extends nn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class Ph extends nn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Ih extends nn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class Jc extends nn{constructor(t,{location:e=dt.location,threshold:s=dt.threshold,distance:r=dt.distance,includeMatches:i=dt.includeMatches,findAllMatches:o=dt.findAllMatches,minMatchCharLength:a=dt.minMatchCharLength,isCaseSensitive:u=dt.isCaseSensitive,ignoreLocation:c=dt.ignoreLocation}={}){super(t),this._bitapSearch=new Vc(t,{location:e,threshold:s,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Kc extends nn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,s;const r=[],i=this.pattern.length;for(;(s=t.indexOf(this.pattern,e))>-1;)e=s+i,r.push([s,e-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const Ri=[Ch,Kc,Dh,Oh,Ih,Ph,Th,Jc],to=Ri.length,jh=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Rh="|";function Fh(n,t={}){return n.split(Rh).map(e=>{let s=e.trim().split(jh).filter(i=>i&&!!i.trim()),r=[];for(let i=0,o=s.length;i<o;i+=1){const a=s[i];let u=!1,c=-1;for(;!u&&++c<to;){const l=Ri[c];let f=l.isMultiMatch(a);f&&(r.push(new l(f,t)),u=!0)}if(!u)for(c=-1;++c<to;){const l=Ri[c];let f=l.isSingleMatch(a);if(f){r.push(new l(f,t));break}}}return r})}const Lh=new Set([Jc.type,Kc.type]);class Nh{constructor(t,{isCaseSensitive:e=dt.isCaseSensitive,includeMatches:s=dt.includeMatches,minMatchCharLength:r=dt.minMatchCharLength,ignoreLocation:i=dt.ignoreLocation,findAllMatches:o=dt.findAllMatches,location:a=dt.location,threshold:u=dt.threshold,distance:c=dt.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:s,minMatchCharLength:r,findAllMatches:o,ignoreLocation:i,location:a,threshold:u,distance:c},this.pattern=e?t:t.toLowerCase(),this.query=Fh(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let i=0,o=[],a=0;for(let u=0,c=e.length;u<c;u+=1){const l=e[u];o.length=0,i=0;for(let f=0,h=l.length;f<h;f+=1){const d=l[f],{isMatch:p,indices:g,score:b}=d.search(t);if(p){if(i+=1,a+=b,s){const y=d.constructor.type;Lh.has(y)?o=[...o,...g]:o.push(g)}}else{a=0,i=0,o.length=0;break}}if(i){let f={isMatch:!0,score:a/i};return s&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const Fi=[];function Bh(...n){Fi.push(...n)}function Li(n,t){for(let e=0,s=Fi.length;e<s;e+=1){let r=Fi[e];if(r.condition(n,t))return new r(n,t)}return new Vc(n,t)}const Pr={AND:"$and",OR:"$or"},Ni={PATH:"$path",PATTERN:"$val"},Bi=n=>!!(n[Pr.AND]||n[Pr.OR]),$h=n=>!!n[Ni.PATH],Mh=n=>!Be(n)&&Hc(n)&&!Bi(n),eo=n=>({[Pr.AND]:Object.keys(n).map(t=>({[t]:n[t]}))});function Zc(n,t,{auto:e=!0}={}){const s=r=>{let i=Object.keys(r);const o=$h(r);if(!o&&i.length>1&&!Bi(r))return s(eo(r));if(Mh(r)){const u=o?r[Ni.PATH]:i[0],c=o?r[Ni.PATTERN]:r[u];if(!Se(c))throw new Error(fh(u));const l={keyId:ji(u),pattern:c};return e&&(l.searcher=Li(c,t)),l}let a={children:[],operator:i[0]};return i.forEach(u=>{const c=r[u];Be(c)&&c.forEach(l=>{a.children.push(s(l))})}),a};return Bi(n)||(n=eo(n)),s(n)}function Uh(n,{ignoreFieldNorm:t=dt.ignoreFieldNorm}){n.forEach(e=>{let s=1;e.matches.forEach(({key:r,norm:i,score:o})=>{const a=r?r.weight:null;s*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:i))}),e.score=s})}function zh(n,t){const e=n.matches;t.matches=[],Kt(e)&&e.forEach(s=>{if(!Kt(s.indices)||!s.indices.length)return;const{indices:r,value:i}=s;let o={indices:r,value:i};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),t.matches.push(o)})}function Hh(n,t){t.score=n.score}function qh(n,t,{includeMatches:e=dt.includeMatches,includeScore:s=dt.includeScore}={}){const r=[];return e&&r.push(zh),s&&r.push(Hh),n.map(i=>{const{idx:o}=i,a={item:t[o],refIndex:o};return r.length&&r.forEach(u=>{u(i,a)}),a})}class bn{constructor(t,e={},s){this.options={...dt,...e},this.options.useExtendedSearch,this._keyStore=new gh(this.options.keys),this.setCollection(t,s)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof os))throw new Error(lh);this._myIndex=e||Wc(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Kt(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let s=0,r=this._docs.length;s<r;s+=1){const i=this._docs[s];t(i,s)&&(this.removeAt(s),s-=1,r-=1,e.push(i))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let u=Se(t)?Se(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Uh(u,{ignoreFieldNorm:a}),i&&u.sort(o),zc(e)&&e>-1&&(u=u.slice(0,e)),qh(u,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(t){const e=Li(t,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:i,i:o,n:a})=>{if(!Kt(i))return;const{isMatch:u,score:c,indices:l}=e.searchIn(i);u&&r.push({item:i,idx:o,matches:[{score:c,value:i,norm:a,indices:l}]})}),r}_searchLogical(t){const e=Zc(t,this.options),s=(a,u,c)=>{if(!a.children){const{keyId:f,searcher:h}=a,d=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:h});return d&&d.length?[{idx:c,item:u,matches:d}]:[]}const l=[];for(let f=0,h=a.children.length;f<h;f+=1){const d=a.children[f],p=s(d,u,c);if(p.length)l.push(...p);else if(a.operator===Pr.AND)return[]}return l},r=this._myIndex.records,i={},o=[];return r.forEach(({$:a,i:u})=>{if(Kt(a)){let c=s(e,a,u);c.length&&(i[u]||(i[u]={idx:u,item:a,matches:[]},o.push(i[u])),c.forEach(({matches:l})=>{i[u].matches.push(...l)}))}}),o}_searchObjectList(t){const e=Li(t,this.options),{keys:s,records:r}=this._myIndex,i=[];return r.forEach(({$:o,i:a})=>{if(!Kt(o))return;let u=[];s.forEach((c,l)=>{u.push(...this._findMatches({key:c,value:o[l],searcher:e}))}),u.length&&i.push({idx:a,item:o,matches:u})}),i}_findMatches({key:t,value:e,searcher:s}){if(!Kt(e))return[];let r=[];if(Be(e))e.forEach(({v:i,i:o,n:a})=>{if(!Kt(i))return;const{isMatch:u,score:c,indices:l}=s.searchIn(i);u&&r.push({score:c,key:t,value:i,idx:o,norm:a,indices:l})});else{const{v:i,n:o}=e,{isMatch:a,score:u,indices:c}=s.searchIn(i);a&&r.push({score:u,key:t,value:i,norm:o,indices:c})}return r}}bn.version="7.0.0";bn.createIndex=Wc;bn.parseIndex=kh;bn.config=dt;bn.parseQuery=Zc;Bh(Nh);const Ze=At({word:null,def:null}),$i=$e("dict-lang","en");In(Ze,()=>{Ze.word&&Ze.def&&Gh(Ze)});function v1(){const n=xt(),t=ue(""),e=It(()=>Yc(t.value));async function s(){const u=await ss(e.value);n.get("dict").get("#word").get(u).put(e.value),Ze.word=u,t.value=""}const r=At({});n.user(mt.pub).get("dict").map().on(async(u,c)=>{if(!u)return;let l=c.slice(0,44),f=c.slice(45,89),h=await n.get("dict").get("#def").get(f).then();if(h){try{h=JSON.parse(h)}catch(d){console.log(d,h);return}(h==null?void 0:h.lang)==$i.value&&(r[l]=r[l]||await n.get("dict").get("#word").get(l).then())}});const i=At({});n.get("dict").get("#word").map().once((u,c)=>{u.includes(" ")||(i[c]=u)});const o=It(()=>{let u=Object.entries(i).map(c=>({text:c[1],hash:c[0]}));return new bn(u,{keys:["text"],includeScore:!0})}),a=It(()=>o.value.search(t.value));return{input:t,found:a,words:i,linked:r,word:e,addWord:s}}function x1(n){const t=xt(),e=ue("");return t.get("dict").get("#word").get(n).once(s=>{e.value=Yc(s)}),{word:e}}function k1(){const n=xt(),t=At({text:"",lang:$i,part:"noun"});async function e(){const{hash:a,hashed:u}=await rh(t);n.get("dict").get("#def").get(a).put(u),Ze.def=a,t.text="",t.part=null}const s=At({});n.user(mt.pub).get("dict").map().on(async(a,u)=>{if(!a)return;let c=u.slice(45,89),l=await n.get("dict").get("#def").get(c).then();if(l)try{if(l=JSON.parse(l),(l==null?void 0:l.lang)!=$i.value)return;s[c]=s[c]||l}catch(f){console.log(f,l)}});const r=At({});n.get("dict").get("#def").map().once((a,u)=>{r[u]=JSON.parse(a)});const i=It(()=>{let a=[];for(let u in r)a.push({hash:u,...r[u]});return new bn(a,{keys:["text"],includeScore:!0})}),o=It(()=>i.value.search(t.text));return{def:t,addDef:e,defs:r,found:o,linked:s}}async function Gh({word:n,def:t}){var i;const e=xt(),{user:s}=rn();let r=await e.user(mt.pub).get("dict").get(`${n}:${t}@${s.pub}`).then();e.user(mt.pub).get("dict").get(`${n}:${t}@${s.pub}`).put(!r,null,{opt:{cert:(i=mt.features)==null?void 0:i.dict}}),Ze.word=null,Ze.def=null}function S1(n){const t=xt(),e=At({});return t.user(mt.pub).get("dict").map().on((s,r)=>{var l;if(r.indexOf(n)==-1)return;const{from:o,to:a,author:u}=as(r);let c=o==n?a:o;e[c]=e[c]||{},s?e[c][u]=s:((l=e==null?void 0:e[c])==null||delete l[u],Object.keys(e==null?void 0:e[c]).length==0&&(e==null||delete e[c]))}),e}function A1(n){const t=xt(),e=At({});return t.user(mt.pub).get("dict").map().on((s,r)=>{var u;const{from:i,to:o,author:a}=as(r);a==n&&(e[i]=e[i]||{},s?e[i][o]=s:((u=e==null?void 0:e[i])==null||delete u[o],Object.keys(e[i]).length==0&&(e==null||delete e[i])))}),e}function E1(){const n=xt(),t=At({});return n.user(mt.pub).get("dict").map().once(async(e,s)=>{const{from:r,to:i,author:o}=as(s);t[o]=t[o]||{},t[o][r]=t[o][r]||{},t[o][r][i]=e}),t}function C1(){const n=xt(),t=At({});return n.user(mt.pub).get("dict").map().once(async(e,s)=>{let r=s.slice(45,89),i=await n.get("dict").get("#def").get(r).then();if(i){try{i=JSON.parse(i)}catch(o){console.log(i,o)}i!=null&&i.lang&&(t[i==null?void 0:i.lang]=t[i==null?void 0:i.lang]||0,t[i==null?void 0:i.lang]++)}}),t}function as(n){return{from:n.slice(0,44),to:n.slice(45,89),author:n.slice(-87)}}function Yc(n){if(!n)return"";let t=n.toLowerCase().matchAll(new RegExp("\\p{L}","gu"),"");return Array.from(t).map(e=>e[0]).join("")}function no(n,t,e,s=!0){const r=document.createElement("a");r.download=e,s?r.href=URL.createObjectURL(new Blob([n],{type:t})):r.href=`data:${t};,${n}`,r.dataset.downloadurl=[t,r.download,r.href].join(":"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function T1(n,t=e=>console.log(e)){if(!n.length)return;const e=n[0],s=2e7;if(e.size>s){console.error("File is bigger than "+Xc(s))+"";return}let r=new FileReader;r.readAsText(e),r.onload=()=>{t(r.result)}}function D1({preserveRatio:n=!1,picSize:t=100,maxSize:e=1024e4}){const s=At({errors:[],status:"",output:{}});function r(d){const p=d.target.files;a(),p.length&&(s.status="loading",Array.from(p).map(g=>i(g)))}function i(d){return o(d).then(p=>{s.output={name:f(d.name),content:p,size:Xc(Math.round(p.length*3/4))},s.status="success"}),null}function o(d){return new Promise((p,g)=>{const b=new FileReader,y=new FileReader,m=d.slice(0,4);b.readAsArrayBuffer(m),b.onloadend=_=>{const w=_.target.result;let v=c(l(w));if(u(d.size)>u(e)&&s.errors.push({message:"File size is too large!"}),v===!1&&s.errors.push({message:"File type is not supported!"}),s.errors.length>0){h(s.errors),a();return}else y.readAsDataURL(d)},y.onloadend=()=>{const _=new Image,w=y.result;typeof w=="string"&&(_.src=w,_.onload=()=>{const v=n?_.naturalWidth/_.naturalHeight:1,A=document.createElement("canvas");A.width=t,A.height=t/v,A.getContext("2d").drawImage(_,0,0,A.width,A.height),p(A.toDataURL())})},b.onerror=_=>g(_),y.onerror=_=>g(_)})}function a(){s.status="",s.errors=[],s.output={}}function u(d){return d*Math.pow(10,-6)}function c(d){return["89504E47","47494638","FFD8FFDB","FFD8FFE0","FFD8FFE1","FFD8FFE2","FFD8FFE3","FFD8FFE8","FFD8FFED","3C3F786D","3C737667"].includes(d)}function l(d){const p=new Uint8Array(d);let g=[];return p.forEach(b=>{g.push(b.toString(16))}),g.join("").toUpperCase()}function f(d){return d.replace(/\.[^/.]+$/,"").toLowerCase()}function h(d){d.length===2?console.error("File upload failed due to size and type!"):console.error(d[0].message+d[0].type)}return{state:s,handleChange:r}}const Wh=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];function Xc(n){let t=0,e=parseInt(n+"",10)||0;for(;e>=1024&&++t;)e=e/1024;return e.toFixed(e<10&&t>0?1:0)+" "+Wh[t]}function O1(n){var t;return(t=n.match(/[^:]\w+\/[\w-+\d.]+(?=;|,)/))==null?void 0:t[0]}function P1(n){return n.substring(n.indexOf("/")+1,n.indexOf(";base64"))}var ro={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};function I1(n){for(var t in ro)if(n.indexOf(t)===0)return ro[t]}var si={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var io;function Vh(){return io||(io=1,function(n,t){(function(e){n.exports=e()})(function(){return function e(s,r,i){function o(c,l){if(!r[c]){if(!s[c]){var f=typeof dn=="function"&&dn;if(!l&&f)return f(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var d=r[c]={exports:{}};s[c][0].call(d.exports,function(p){var g=s[c][1][p];return o(g||p)},d,d.exports,e,s,r,i)}return r[c].exports}for(var a=typeof dn=="function"&&dn,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(e,s,r){var i=e("./utils"),o=e("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var c,l,f,h,d,p,g,b=[],y=0,m=u.length,_=m,w=i.getTypeOf(u)!=="string";y<u.length;)_=m-y,f=w?(c=u[y++],l=y<m?u[y++]:0,y<m?u[y++]:0):(c=u.charCodeAt(y++),l=y<m?u.charCodeAt(y++):0,y<m?u.charCodeAt(y++):0),h=c>>2,d=(3&c)<<4|l>>4,p=1<_?(15&l)<<2|f>>6:64,g=2<_?63&f:64,b.push(a.charAt(h)+a.charAt(d)+a.charAt(p)+a.charAt(g));return b.join("")},r.decode=function(u){var c,l,f,h,d,p,g=0,b=0,y="data:";if(u.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var m,_=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&_--,u.charAt(u.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=o.uint8array?new Uint8Array(0|_):new Array(0|_);g<u.length;)c=a.indexOf(u.charAt(g++))<<2|(h=a.indexOf(u.charAt(g++)))>>4,l=(15&h)<<4|(d=a.indexOf(u.charAt(g++)))>>2,f=(3&d)<<6|(p=a.indexOf(u.charAt(g++))),m[b++]=c,d!==64&&(m[b++]=l),p!==64&&(m[b++]=f);return m}},{"./support":30,"./utils":32}],2:[function(e,s,r){var i=e("./external"),o=e("./stream/DataWorker"),a=e("./stream/Crc32Probe"),u=e("./stream/DataLengthProbe");function c(l,f,h,d,p){this.compressedSize=l,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=p}c.prototype={getContentWorker:function(){var l=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return l.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(l,f,h){return l.pipe(new a).pipe(new u("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},s.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,s,r){var i=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,s,r){var i=e("./utils"),o=function(){for(var a,u=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;u[c]=a}return u}();s.exports=function(a,u){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,l,f,h){var d=o,p=h+f;c^=-1;for(var g=h;g<p;g++)c=c>>>8^d[255&(c^l[g])];return-1^c}(0|u,a,a.length,0):function(c,l,f,h){var d=o,p=h+f;c^=-1;for(var g=h;g<p;g++)c=c>>>8^d[255&(c^l.charCodeAt(g))];return-1^c}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(e,s,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,s,r){var i=null;i=typeof Promise<"u"?Promise:e("lie"),s.exports={Promise:i}},{lie:37}],7:[function(e,s,r){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),a=e("./utils"),u=e("./stream/GenericWorker"),c=i?"uint8array":"array";function l(f,h){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}r.magic="\b\0",a.inherits(l,u),l.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,f.data),!1)},l.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},r.compressWorker=function(f){return new l("Deflate",f)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,s,r){function i(d,p){var g,b="";for(g=0;g<p;g++)b+=String.fromCharCode(255&d),d>>>=8;return b}function o(d,p,g,b,y,m){var _,w,v=d.file,A=d.compression,E=m!==c.utf8encode,P=a.transformTo("string",m(v.name)),T=a.transformTo("string",c.utf8encode(v.name)),I=v.comment,F=a.transformTo("string",m(I)),k=a.transformTo("string",c.utf8encode(I)),S=T.length!==v.name.length,x=k.length!==I.length,j="",D="",C="",R=v.dir,N=v.date,z={crc32:0,compressedSize:0,uncompressedSize:0};p&&!g||(z.crc32=d.crc32,z.compressedSize=d.compressedSize,z.uncompressedSize=d.uncompressedSize);var M=0;p&&(M|=8),E||!S&&!x||(M|=2048);var U=0,tt=0;R&&(U|=16),y==="UNIX"?(tt=798,U|=function(Z,gt){var Et=Z;return Z||(Et=gt?16893:33204),(65535&Et)<<16}(v.unixPermissions,R)):(tt=20,U|=function(Z){return 63&(Z||0)}(v.dosPermissions)),_=N.getUTCHours(),_<<=6,_|=N.getUTCMinutes(),_<<=5,_|=N.getUTCSeconds()/2,w=N.getUTCFullYear()-1980,w<<=4,w|=N.getUTCMonth()+1,w<<=5,w|=N.getUTCDate(),S&&(D=i(1,1)+i(l(P),4)+T,j+="up"+i(D.length,2)+D),x&&(C=i(1,1)+i(l(F),4)+k,j+="uc"+i(C.length,2)+C);var X="";return X+=`
\0`,X+=i(M,2),X+=A.magic,X+=i(_,2),X+=i(w,2),X+=i(z.crc32,4),X+=i(z.compressedSize,4),X+=i(z.uncompressedSize,4),X+=i(P.length,2),X+=i(j.length,2),{fileRecord:f.LOCAL_FILE_HEADER+X+P+j,dirRecord:f.CENTRAL_FILE_HEADER+i(tt,2)+X+i(F.length,2)+"\0\0\0\0"+i(U,4)+i(b,4)+P+j+F}}var a=e("../utils"),u=e("../stream/GenericWorker"),c=e("../utf8"),l=e("../crc32"),f=e("../signature");function h(d,p,g,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=g,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,u),h.prototype.push=function(d){var p=d.meta.percent||0,g=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,u.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:g?(p+100*(g-b-1))/g:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var p=this.streamFiles&&!d.file.dir;if(p){var g=o(d,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var p=this.streamFiles&&!d.file.dir,g=o(d,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),p)this.push({data:function(b){return f.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var g=this.bytesWritten-d,b=function(y,m,_,w,v){var A=a.transformTo("string",v(w));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(y,2)+i(y,2)+i(m,4)+i(_,4)+i(A.length,2)+A}(this.dirRecords.length,g,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var p=this;return d.on("data",function(g){p.processChunk(g)}),d.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),d.on("error",function(g){p.error(g)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var p=this._sources;if(!u.prototype.error.call(this,d))return!1;for(var g=0;g<p.length;g++)try{p[g].error(d)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var d=this._sources,p=0;p<d.length;p++)d[p].lock()},s.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,s,r){var i=e("../compressions"),o=e("./ZipFileWorker");r.generateWorker=function(a,u,c){var l=new o(u.streamFiles,c,u.platform,u.encodeFileName),f=0;try{a.forEach(function(h,d){f++;var p=function(m,_){var w=m||_,v=i[w];if(!v)throw new Error(w+" is not a valid compression method !");return v}(d.options.compression,u.compression),g=d.options.compressionOptions||u.compressionOptions||{},b=d.dir,y=d.date;d._compressWorker(p,g).withStreamInfo("file",{name:h,dir:b,date:y,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=f}catch(h){l.error(h)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,s,r){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=e("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,s,r){var i=e("./utils"),o=e("./external"),a=e("./utf8"),u=e("./zipEntries"),c=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function f(h){return new o.Promise(function(d,p){var g=h.decompressed.getContentWorker().pipe(new c);g.on("error",function(b){p(b)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}s.exports=function(h,d){var p=this;return d=i.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(g){var b=new u(d);return b.load(g),b}).then(function(g){var b=[o.Promise.resolve(g)],y=g.files;if(d.checkCRC32)for(var m=0;m<y.length;m++)b.push(f(y[m]));return o.Promise.all(b)}).then(function(g){for(var b=g.shift(),y=b.files,m=0;m<y.length;m++){var _=y[m],w=_.fileNameStr,v=i.resolve(_.fileNameStr);p.file(v,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:d.createFolders}),_.dir||(p.file(v).unsafeOriginalName=w)}return b.zipComment.length&&(p.comment=b.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,s,r){var i=e("../utils"),o=e("../stream/GenericWorker");function a(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(l){c.push({data:l,meta:{percent:0}})}).on("error",function(l){c.isPaused?this.generatedError=l:c.error(l)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,s,r){var i=e("readable-stream").Readable;function o(a,u,c){i.call(this,u),this._helper=a;var l=this;a.on("data",function(f,h){l.push(f)||l._helper.pause(),c&&c(h)}).on("error",function(f){l.emit("error",f)}).on("end",function(){l.push(null)})}e("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},s.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,s,r){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(e,s,r){function i(v,A,E){var P,T=a.getTypeOf(A),I=a.extend(E||{},l);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(v=y(v)),I.createFolders&&(P=b(v))&&m.call(this,P,!0);var F=T==="string"&&I.binary===!1&&I.base64===!1;E&&E.binary!==void 0||(I.binary=!F),(A instanceof f&&A.uncompressedSize===0||I.dir||!A||A.length===0)&&(I.base64=!1,I.binary=!0,A="",I.compression="STORE",T="string");var k=null;k=A instanceof f||A instanceof u?A:p.isNode&&p.isStream(A)?new g(v,A):a.prepareContent(v,A,I.binary,I.optimizedBinaryString,I.base64);var S=new h(v,k,I);this.files[v]=S}var o=e("./utf8"),a=e("./utils"),u=e("./stream/GenericWorker"),c=e("./stream/StreamHelper"),l=e("./defaults"),f=e("./compressedObject"),h=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),g=e("./nodejs/NodejsStreamInputAdapter"),b=function(v){v.slice(-1)==="/"&&(v=v.substring(0,v.length-1));var A=v.lastIndexOf("/");return 0<A?v.substring(0,A):""},y=function(v){return v.slice(-1)!=="/"&&(v+="/"),v},m=function(v,A){return A=A!==void 0?A:l.createFolders,v=y(v),this.files[v]||i.call(this,v,null,{dir:!0,createFolders:A}),this.files[v]};function _(v){return Object.prototype.toString.call(v)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(v){var A,E,P;for(A in this.files)P=this.files[A],(E=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&v(E,P)},filter:function(v){var A=[];return this.forEach(function(E,P){v(E,P)&&A.push(P)}),A},file:function(v,A,E){if(arguments.length!==1)return v=this.root+v,i.call(this,v,A,E),this;if(_(v)){var P=v;return this.filter(function(I,F){return!F.dir&&P.test(I)})}var T=this.files[this.root+v];return T&&!T.dir?T:null},folder:function(v){if(!v)return this;if(_(v))return this.filter(function(T,I){return I.dir&&v.test(T)});var A=this.root+v,E=m.call(this,A),P=this.clone();return P.root=E.name,P},remove:function(v){v=this.root+v;var A=this.files[v];if(A||(v.slice(-1)!=="/"&&(v+="/"),A=this.files[v]),A&&!A.dir)delete this.files[v];else for(var E=this.filter(function(T,I){return I.name.slice(0,v.length)===v}),P=0;P<E.length;P++)delete this.files[E[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(v){var A,E={};try{if((E=a.extend(v||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");a.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var P=E.comment||this.comment||"";A=d.generateWorker(this,E,P)}catch(T){(A=new u("error")).error(T)}return new c(A,E.type||"string",E.mimeType)},generateAsync:function(v,A){return this.generateInternalStream(v).accumulate(A)},generateNodeStream:function(v,A){return(v=v||{}).type||(v.type="nodebuffer"),this.generateInternalStream(v).toNodejsStream(A)}};s.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,s,r){s.exports=e("stream")},{stream:void 0}],17:[function(e,s,r){var i=e("./DataReader");function o(a){i.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}e("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),c=a.charCodeAt(1),l=a.charCodeAt(2),f=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===c&&this.data[h+2]===l&&this.data[h+3]===f)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),c=a.charCodeAt(1),l=a.charCodeAt(2),f=a.charCodeAt(3),h=this.readData(4);return u===h[0]&&c===h[1]&&l===h[2]&&f===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},s.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,s,r){var i=e("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,c=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},s.exports=o},{"../utils":32}],19:[function(e,s,r){var i=e("./Uint8ArrayReader");function o(a){i.call(this,a)}e("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},s.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,s,r){var i=e("./DataReader");function o(a){i.call(this,a)}e("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},s.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,s,r){var i=e("./ArrayReader");function o(a){i.call(this,a)}e("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},s.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,s,r){var i=e("../utils"),o=e("../support"),a=e("./ArrayReader"),u=e("./StringReader"),c=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");s.exports=function(f){var h=i.getTypeOf(f);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(f):o.uint8array?new l(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,s,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,s,r){var i=e("./GenericWorker"),o=e("../utils");function a(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(a,i),a.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},s.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(e,s,r){var i=e("./GenericWorker"),o=e("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(a,i),a.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,s,r){var i=e("../utils"),o=e("./GenericWorker");function a(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(a,o),a.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},s.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(e,s,r){var i=e("../utils"),o=e("./GenericWorker");function a(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(l){c.dataIsReady=!0,c.data=l,c.max=l&&l.length||0,c.type=i.getTypeOf(l),c.isPaused||c._tickAndRepeat()},function(l){c.error(l)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(e,s,r){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(u){a.processChunk(u)}),o.on("end",function(){a.end()}),o.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},s.exports=i},{}],29:[function(e,s,r){var i=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),u=e("../base64"),c=e("../support"),l=e("../external"),f=null;if(c.nodestream)try{f=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,g){return new l.Promise(function(b,y){var m=[],_=p._internalType,w=p._outputType,v=p._mimeType;p.on("data",function(A,E){m.push(A),g&&g(E)}).on("error",function(A){m=[],y(A)}).on("end",function(){try{var A=function(E,P,T){switch(E){case"blob":return i.newBlob(i.transformTo("arraybuffer",P),T);case"base64":return u.encode(P);default:return i.transformTo(E,P)}}(w,function(E,P){var T,I=0,F=null,k=0;for(T=0;T<P.length;T++)k+=P[T].length;switch(E){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(F=new Uint8Array(k),T=0;T<P.length;T++)F.set(P[T],I),I+=P[T].length;return F;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+E+"'")}}(_,m),v);b(A)}catch(E){y(E)}m=[]}).resume()})}function d(p,g,b){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=b,i.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(m){this._worker=new a("error"),this._worker.error(m)}}d.prototype={accumulate:function(p){return h(this,p)},on:function(p,g){var b=this;return p==="data"?this._worker.on(p,function(y){g.call(b,y.data,y.meta)}):this._worker.on(p,function(){i.delay(g,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},p)}},s.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,s,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,s,r){for(var i=e("./utils"),o=e("./support"),a=e("./nodejsUtils"),u=e("./stream/GenericWorker"),c=new Array(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;c[254]=c[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}r.utf8encode=function(d){return o.nodebuffer?a.newBufferFrom(d,"utf-8"):function(p){var g,b,y,m,_,w=p.length,v=0;for(m=0;m<w;m++)(64512&(b=p.charCodeAt(m)))==55296&&m+1<w&&(64512&(y=p.charCodeAt(m+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),m++),v+=b<128?1:b<2048?2:b<65536?3:4;for(g=o.uint8array?new Uint8Array(v):new Array(v),m=_=0;_<v;m++)(64512&(b=p.charCodeAt(m)))==55296&&m+1<w&&(64512&(y=p.charCodeAt(m+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),m++),b<128?g[_++]=b:(b<2048?g[_++]=192|b>>>6:(b<65536?g[_++]=224|b>>>12:(g[_++]=240|b>>>18,g[_++]=128|b>>>12&63),g[_++]=128|b>>>6&63),g[_++]=128|63&b);return g}(d)},r.utf8decode=function(d){return o.nodebuffer?i.transformTo("nodebuffer",d).toString("utf-8"):function(p){var g,b,y,m,_=p.length,w=new Array(2*_);for(g=b=0;g<_;)if((y=p[g++])<128)w[b++]=y;else if(4<(m=c[y]))w[b++]=65533,g+=m-1;else{for(y&=m===2?31:m===3?15:7;1<m&&g<_;)y=y<<6|63&p[g++],m--;1<m?w[b++]=65533:y<65536?w[b++]=y:(y-=65536,w[b++]=55296|y>>10&1023,w[b++]=56320|1023&y)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),i.applyFromCharCode(w)}(d=i.transformTo(o.uint8array?"uint8array":"array",d))},i.inherits(f,u),f.prototype.processChunk=function(d){var p=i.transformTo(o.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=p;(p=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),p.set(g,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var b=function(m,_){var w;for((_=_||m.length)>m.length&&(_=m.length),w=_-1;0<=w&&(192&m[w])==128;)w--;return w<0||w===0?_:w+c[m[w]]>_?w:_}(p),y=p;b!==p.length&&(o.uint8array?(y=p.subarray(0,b),this.leftOver=p.subarray(b,p.length)):(y=p.slice(0,b),this.leftOver=p.slice(b,p.length))),this.push({data:r.utf8decode(y),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=f,i.inherits(h,u),h.prototype.processChunk=function(d){this.push({data:r.utf8encode(d.data),meta:d.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,s,r){var i=e("./support"),o=e("./base64"),a=e("./nodejsUtils"),u=e("./external");function c(g){return g}function l(g,b){for(var y=0;y<g.length;++y)b[y]=255&g.charCodeAt(y);return b}e("setimmediate"),r.newBlob=function(g,b){r.checkSupport("blob");try{return new Blob([g],{type:b})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,b,y){var m=[],_=0,w=g.length;if(w<=y)return String.fromCharCode.apply(null,g);for(;_<w;)b==="array"||b==="nodebuffer"?m.push(String.fromCharCode.apply(null,g.slice(_,Math.min(_+y,w)))):m.push(String.fromCharCode.apply(null,g.subarray(_,Math.min(_+y,w)))),_+=y;return m.join("")},stringifyByChar:function(g){for(var b="",y=0;y<g.length;y++)b+=String.fromCharCode(g[y]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(g){var b=65536,y=r.getTypeOf(g),m=!0;if(y==="uint8array"?m=f.applyCanBeUsed.uint8array:y==="nodebuffer"&&(m=f.applyCanBeUsed.nodebuffer),m)for(;1<b;)try{return f.stringifyByChunk(g,y,b)}catch{b=Math.floor(b/2)}return f.stringifyByChar(g)}function d(g,b){for(var y=0;y<g.length;y++)b[y]=g[y];return b}r.applyFromCharCode=h;var p={};p.string={string:c,array:function(g){return l(g,new Array(g.length))},arraybuffer:function(g){return p.string.uint8array(g).buffer},uint8array:function(g){return l(g,new Uint8Array(g.length))},nodebuffer:function(g){return l(g,a.allocBuffer(g.length))}},p.array={string:h,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},p.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return d(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},p.uint8array={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return a.newBufferFrom(g)}},p.nodebuffer={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return p.nodebuffer.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:c},r.transformTo=function(g,b){if(b=b||"",!g)return b;r.checkSupport(g);var y=r.getTypeOf(b);return p[y][g](b)},r.resolve=function(g){for(var b=g.split("/"),y=[],m=0;m<b.length;m++){var _=b[m];_==="."||_===""&&m!==0&&m!==b.length-1||(_===".."?y.pop():y.push(_))}return y.join("/")},r.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(g)?"nodebuffer":i.uint8array&&g instanceof Uint8Array?"uint8array":i.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(g){if(!i[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(g){var b,y,m="";for(y=0;y<(g||"").length;y++)m+="\\x"+((b=g.charCodeAt(y))<16?"0":"")+b.toString(16).toUpperCase();return m},r.delay=function(g,b,y){setImmediate(function(){g.apply(y||null,b||[])})},r.inherits=function(g,b){function y(){}y.prototype=b.prototype,g.prototype=new y},r.extend=function(){var g,b,y={};for(g=0;g<arguments.length;g++)for(b in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],b)&&y[b]===void 0&&(y[b]=arguments[g][b]);return y},r.prepareContent=function(g,b,y,m,_){return u.Promise.resolve(b).then(function(w){return i.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new u.Promise(function(v,A){var E=new FileReader;E.onload=function(P){v(P.target.result)},E.onerror=function(P){A(P.target.error)},E.readAsArrayBuffer(w)}):w}).then(function(w){var v=r.getTypeOf(w);return v?(v==="arraybuffer"?w=r.transformTo("uint8array",w):v==="string"&&(_?w=o.decode(w):y&&m!==!0&&(w=function(A){return l(A,i.uint8array?new Uint8Array(A.length):new Array(A.length))}(w))),w):u.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,s,r){var i=e("./reader/readerFor"),o=e("./utils"),a=e("./signature"),u=e("./zipEntry"),c=e("./support");function l(f){this.files=[],this.loadOptions=f}l.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var p=this.reader.readString(4)===h;return this.reader.setIndex(d),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",d=o.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,p=this.zip64EndOfCentralSize-44;0<p;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var p=h-d;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,s,r){var i=e("./reader/readerFor"),o=e("./utils"),a=e("./compressedObject"),u=e("./crc32"),c=e("./utf8"),l=e("./compressions"),f=e("./support");function h(d,p){this.options=d,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var p,g;if(d.skip(22),this.fileNameLength=d.readInt(2),g=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(b){for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)&&l[y].magic===b)return l[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var p=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(p),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var p,g,b,y=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<y;)p=d.readInt(2),g=d.readInt(2),b=d.readData(g),this.extraFields[p]={id:p,length:g,value:b};d.setIndex(y)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var g=o.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var y=o.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var p=i(d.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var p=i(d.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(d.length-5))}return null}},s.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,s,r){function i(p,g,b){this.name=p,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=g,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=e("./stream/StreamHelper"),a=e("./stream/DataWorker"),u=e("./utf8"),c=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(p){var g=null,b="string";try{if(!p)throw new Error("No output type specified.");var y=(b=p.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),g=this._decompressWorker();var m=!this._dataBinary;m&&!y&&(g=g.pipe(new u.Utf8EncodeWorker)),!m&&y&&(g=g.pipe(new u.Utf8DecodeWorker))}catch(_){(g=new l("error")).error(_)}return new o(g,b,"")},async:function(p,g){return this.internalStream(p).accumulate(g)},nodeStream:function(p,g){return this.internalStream(p||"nodebuffer").toNodejsStream(g)},_compressWorker:function(p,g){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(b,p,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)i.prototype[f[d]]=h;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,s,r){(function(i){var o,a,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,l=new u(p),f=i.document.createTextNode("");l.observe(f,{characterData:!0}),o=function(){f.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var g=i.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},i.document.documentElement.appendChild(g)}:function(){setTimeout(p,0)};else{var h=new i.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var d=[];function p(){var g,b;a=!0;for(var y=d.length;y;){for(b=d,d=[],g=-1;++g<y;)b[g]();y=d.length}a=!1}s.exports=function(g){d.push(g)!==1||a||o()}}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,s,r){var i=e("immediate");function o(){}var a={},u=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function f(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,y!==o&&g(this,y)}function h(y,m,_){this.promise=y,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function d(y,m,_){i(function(){var w;try{w=m(_)}catch(v){return a.reject(y,v)}w===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,w)})}function p(y){var m=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof m=="function")return function(){m.apply(y,arguments)}}function g(y,m){var _=!1;function w(E){_||(_=!0,a.reject(y,E))}function v(E){_||(_=!0,a.resolve(y,E))}var A=b(function(){m(v,w)});A.status==="error"&&w(A.value)}function b(y,m){var _={};try{_.value=y(m),_.status="success"}catch(w){_.status="error",_.value=w}return _}(s.exports=f).prototype.finally=function(y){if(typeof y!="function")return this;var m=this.constructor;return this.then(function(_){return m.resolve(y()).then(function(){return _})},function(_){return m.resolve(y()).then(function(){throw _})})},f.prototype.catch=function(y){return this.then(null,y)},f.prototype.then=function(y,m){if(typeof y!="function"&&this.state===c||typeof m!="function"&&this.state===u)return this;var _=new this.constructor(o);return this.state!==l?d(_,this.state===c?y:m,this.outcome):this.queue.push(new h(_,y,m)),_},h.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){d(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){a.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){d(this.promise,this.onRejected,y)},a.resolve=function(y,m){var _=b(p,m);if(_.status==="error")return a.reject(y,_.value);var w=_.value;if(w)g(y,w);else{y.state=c,y.outcome=m;for(var v=-1,A=y.queue.length;++v<A;)y.queue[v].callFulfilled(m)}return y},a.reject=function(y,m){y.state=u,y.outcome=m;for(var _=-1,w=y.queue.length;++_<w;)y.queue[_].callRejected(m);return y},f.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},f.reject=function(y){var m=new this(o);return a.reject(m,y)},f.all=function(y){var m=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,w=!1;if(!_)return this.resolve([]);for(var v=new Array(_),A=0,E=-1,P=new this(o);++E<_;)T(y[E],E);return P;function T(I,F){m.resolve(I).then(function(k){v[F]=k,++A!==_||w||(w=!0,a.resolve(P,v))},function(k){w||(w=!0,a.reject(P,k))})}},f.race=function(y){var m=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=y.length,w=!1;if(!_)return this.resolve([]);for(var v=-1,A=new this(o);++v<_;)E=y[v],m.resolve(E).then(function(P){w||(w=!0,a.resolve(A,P))},function(P){w||(w=!0,a.reject(A,P))});var E;return A}},{immediate:36}],38:[function(e,s,r){var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,s,r){var i=e("./zlib/deflate"),o=e("./utils/common"),a=e("./utils/strings"),u=e("./zlib/messages"),c=e("./zlib/zstream"),l=Object.prototype.toString,f=0,h=-1,d=0,p=8;function g(y){if(!(this instanceof g))return new g(y);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},y||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(_!==f)throw new Error(u[_]);if(m.header&&i.deflateSetHeader(this.strm,m.header),m.dictionary){var w;if(w=typeof m.dictionary=="string"?a.string2buf(m.dictionary):l.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(_=i.deflateSetDictionary(this.strm,w))!==f)throw new Error(u[_]);this._dict_set=!0}}function b(y,m){var _=new g(m);if(_.push(y,!0),_.err)throw _.msg||u[_.err];return _.result}g.prototype.push=function(y,m){var _,w,v=this.strm,A=this.options.chunkSize;if(this.ended)return!1;w=m===~~m?m:m===!0?4:0,typeof y=="string"?v.input=a.string2buf(y):l.call(y)==="[object ArrayBuffer]"?v.input=new Uint8Array(y):v.input=y,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new o.Buf8(A),v.next_out=0,v.avail_out=A),(_=i.deflate(v,w))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);v.avail_out!==0&&(v.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(v.output,v.next_out))):this.onData(o.shrinkBuf(v.output,v.next_out)))}while((0<v.avail_in||v.avail_out===0)&&_!==1);return w===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):w!==2||(this.onEnd(f),!(v.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Deflate=g,r.deflate=b,r.deflateRaw=function(y,m){return(m=m||{}).raw=!0,b(y,m)},r.gzip=function(y,m){return(m=m||{}).gzip=!0,b(y,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,s,r){var i=e("./zlib/inflate"),o=e("./utils/common"),a=e("./utils/strings"),u=e("./zlib/constants"),c=e("./zlib/messages"),l=e("./zlib/zstream"),f=e("./zlib/gzheader"),h=Object.prototype.toString;function d(g){if(!(this instanceof d))return new d(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||g&&g.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var y=i.inflateInit2(this.strm,b.windowBits);if(y!==u.Z_OK)throw new Error(c[y]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function p(g,b){var y=new d(b);if(y.push(g,!0),y.err)throw y.msg||c[y.err];return y.result}d.prototype.push=function(g,b){var y,m,_,w,v,A,E=this.strm,P=this.options.chunkSize,T=this.options.dictionary,I=!1;if(this.ended)return!1;m=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof g=="string"?E.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?E.input=new Uint8Array(g):E.input=g,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(P),E.next_out=0,E.avail_out=P),(y=i.inflate(E,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&T&&(A=typeof T=="string"?a.string2buf(T):h.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,y=i.inflateSetDictionary(this.strm,A)),y===u.Z_BUF_ERROR&&I===!0&&(y=u.Z_OK,I=!1),y!==u.Z_STREAM_END&&y!==u.Z_OK)return this.onEnd(y),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&y!==u.Z_STREAM_END&&(E.avail_in!==0||m!==u.Z_FINISH&&m!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(E.output,E.next_out),w=E.next_out-_,v=a.buf2string(E.output,_),E.next_out=w,E.avail_out=P-w,w&&o.arraySet(E.output,E.output,_,w,0),this.onData(v)):this.onData(o.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(I=!0)}while((0<E.avail_in||E.avail_out===0)&&y!==u.Z_STREAM_END);return y===u.Z_STREAM_END&&(m=u.Z_FINISH),m===u.Z_FINISH?(y=i.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u.Z_OK):m!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(E.avail_out=0))},d.prototype.onData=function(g){this.chunks.push(g)},d.prototype.onEnd=function(g){g===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},r.Inflate=d,r.inflate=p,r.inflateRaw=function(g,b){return(b=b||{}).raw=!0,p(g,b)},r.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,s,r){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var l=c.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var f in l)l.hasOwnProperty(f)&&(u[f]=l[f])}}return u},r.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,l,f,h){if(c.subarray&&u.subarray)u.set(c.subarray(l,l+f),h);else for(var d=0;d<f;d++)u[h+d]=c[l+d]},flattenChunks:function(u){var c,l,f,h,d,p;for(c=f=0,l=u.length;c<l;c++)f+=u[c].length;for(p=new Uint8Array(f),c=h=0,l=u.length;c<l;c++)d=u[c],p.set(d,h),h+=d.length;return p}},a={arraySet:function(u,c,l,f,h){for(var d=0;d<f;d++)u[h+d]=c[l+d]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(i)},{}],42:[function(e,s,r){var i=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(f,h){if(h<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,h));for(var d="",p=0;p<h;p++)d+=String.fromCharCode(f[p]);return d}u[254]=u[254]=1,r.string2buf=function(f){var h,d,p,g,b,y=f.length,m=0;for(g=0;g<y;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<y&&(64512&(p=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),g++),m+=d<128?1:d<2048?2:d<65536?3:4;for(h=new i.Buf8(m),g=b=0;b<m;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<y&&(64512&(p=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(p-56320),g++),d<128?h[b++]=d:(d<2048?h[b++]=192|d>>>6:(d<65536?h[b++]=224|d>>>12:(h[b++]=240|d>>>18,h[b++]=128|d>>>12&63),h[b++]=128|d>>>6&63),h[b++]=128|63&d);return h},r.buf2binstring=function(f){return l(f,f.length)},r.binstring2buf=function(f){for(var h=new i.Buf8(f.length),d=0,p=h.length;d<p;d++)h[d]=f.charCodeAt(d);return h},r.buf2string=function(f,h){var d,p,g,b,y=h||f.length,m=new Array(2*y);for(d=p=0;d<y;)if((g=f[d++])<128)m[p++]=g;else if(4<(b=u[g]))m[p++]=65533,d+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&d<y;)g=g<<6|63&f[d++],b--;1<b?m[p++]=65533:g<65536?m[p++]=g:(g-=65536,m[p++]=55296|g>>10&1023,m[p++]=56320|1023&g)}return l(m,p)},r.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+u[f[d]]>h?d:h}},{"./common":41}],43:[function(e,s,r){s.exports=function(i,o,a,u){for(var c=65535&i|0,l=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;l=l+(c=c+o[u++]|0)|0,--f;);c%=65521,l%=65521}return c|l<<16|0}},{}],44:[function(e,s,r){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,s,r){var i=function(){for(var o,a=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[u]=o}return a}();s.exports=function(o,a,u,c){var l=i,f=c+u;o^=-1;for(var h=c;h<f;h++)o=o>>>8^l[255&(o^a[h])];return-1^o}},{}],46:[function(e,s,r){var i,o=e("../utils/common"),a=e("./trees"),u=e("./adler32"),c=e("./crc32"),l=e("./messages"),f=0,h=4,d=0,p=-2,g=-1,b=4,y=2,m=8,_=9,w=286,v=30,A=19,E=2*w+1,P=15,T=3,I=258,F=I+T+1,k=42,S=113,x=1,j=2,D=3,C=4;function R(O,W){return O.msg=l[W],W}function N(O){return(O<<1)-(4<O?9:0)}function z(O){for(var W=O.length;0<=--W;)O[W]=0}function M(O){var W=O.state,G=W.pending;G>O.avail_out&&(G=O.avail_out),G!==0&&(o.arraySet(O.output,W.pending_buf,W.pending_out,G,O.next_out),O.next_out+=G,W.pending_out+=G,O.total_out+=G,O.avail_out-=G,W.pending-=G,W.pending===0&&(W.pending_out=0))}function U(O,W){a._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,W),O.block_start=O.strstart,M(O.strm)}function tt(O,W){O.pending_buf[O.pending++]=W}function X(O,W){O.pending_buf[O.pending++]=W>>>8&255,O.pending_buf[O.pending++]=255&W}function Z(O,W){var G,$,B=O.max_chain_length,H=O.strstart,K=O.prev_length,Y=O.nice_match,q=O.strstart>O.w_size-F?O.strstart-(O.w_size-F):0,et=O.window,it=O.w_mask,nt=O.prev,ct=O.strstart+I,St=et[H+K-1],_t=et[H+K];O.prev_length>=O.good_match&&(B>>=2),Y>O.lookahead&&(Y=O.lookahead);do if(et[(G=W)+K]===_t&&et[G+K-1]===St&&et[G]===et[H]&&et[++G]===et[H+1]){H+=2,G++;do;while(et[++H]===et[++G]&&et[++H]===et[++G]&&et[++H]===et[++G]&&et[++H]===et[++G]&&et[++H]===et[++G]&&et[++H]===et[++G]&&et[++H]===et[++G]&&et[++H]===et[++G]&&H<ct);if($=I-(ct-H),H=ct-I,K<$){if(O.match_start=W,Y<=(K=$))break;St=et[H+K-1],_t=et[H+K]}}while((W=nt[W&it])>q&&--B!=0);return K<=O.lookahead?K:O.lookahead}function gt(O){var W,G,$,B,H,K,Y,q,et,it,nt=O.w_size;do{if(B=O.window_size-O.lookahead-O.strstart,O.strstart>=nt+(nt-F)){for(o.arraySet(O.window,O.window,nt,nt,0),O.match_start-=nt,O.strstart-=nt,O.block_start-=nt,W=G=O.hash_size;$=O.head[--W],O.head[W]=nt<=$?$-nt:0,--G;);for(W=G=nt;$=O.prev[--W],O.prev[W]=nt<=$?$-nt:0,--G;);B+=nt}if(O.strm.avail_in===0)break;if(K=O.strm,Y=O.window,q=O.strstart+O.lookahead,et=B,it=void 0,it=K.avail_in,et<it&&(it=et),G=it===0?0:(K.avail_in-=it,o.arraySet(Y,K.input,K.next_in,it,q),K.state.wrap===1?K.adler=u(K.adler,Y,it,q):K.state.wrap===2&&(K.adler=c(K.adler,Y,it,q)),K.next_in+=it,K.total_in+=it,it),O.lookahead+=G,O.lookahead+O.insert>=T)for(H=O.strstart-O.insert,O.ins_h=O.window[H],O.ins_h=(O.ins_h<<O.hash_shift^O.window[H+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[H+T-1])&O.hash_mask,O.prev[H&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=H,H++,O.insert--,!(O.lookahead+O.insert<T)););}while(O.lookahead<F&&O.strm.avail_in!==0)}function Et(O,W){for(var G,$;;){if(O.lookahead<F){if(gt(O),O.lookahead<F&&W===f)return x;if(O.lookahead===0)break}if(G=0,O.lookahead>=T&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+T-1])&O.hash_mask,G=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),G!==0&&O.strstart-G<=O.w_size-F&&(O.match_length=Z(O,G)),O.match_length>=T)if($=a._tr_tally(O,O.strstart-O.match_start,O.match_length-T),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=T){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+T-1])&O.hash_mask,G=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else $=a._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if($&&(U(O,!1),O.strm.avail_out===0))return x}return O.insert=O.strstart<T-1?O.strstart:T-1,W===h?(U(O,!0),O.strm.avail_out===0?D:C):O.last_lit&&(U(O,!1),O.strm.avail_out===0)?x:j}function ft(O,W){for(var G,$,B;;){if(O.lookahead<F){if(gt(O),O.lookahead<F&&W===f)return x;if(O.lookahead===0)break}if(G=0,O.lookahead>=T&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+T-1])&O.hash_mask,G=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=T-1,G!==0&&O.prev_length<O.max_lazy_match&&O.strstart-G<=O.w_size-F&&(O.match_length=Z(O,G),O.match_length<=5&&(O.strategy===1||O.match_length===T&&4096<O.strstart-O.match_start)&&(O.match_length=T-1)),O.prev_length>=T&&O.match_length<=O.prev_length){for(B=O.strstart+O.lookahead-T,$=a._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-T),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=B&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+T-1])&O.hash_mask,G=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=T-1,O.strstart++,$&&(U(O,!1),O.strm.avail_out===0))return x}else if(O.match_available){if(($=a._tr_tally(O,0,O.window[O.strstart-1]))&&U(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return x}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&($=a._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<T-1?O.strstart:T-1,W===h?(U(O,!0),O.strm.avail_out===0?D:C):O.last_lit&&(U(O,!1),O.strm.avail_out===0)?x:j}function pt(O,W,G,$,B){this.good_length=O,this.max_lazy=W,this.nice_length=G,this.max_chain=$,this.func=B}function vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*E),this.dyn_dtree=new o.Buf16(2*(2*v+1)),this.bl_tree=new o.Buf16(2*(2*A+1)),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(P+1),this.heap=new o.Buf16(2*w+1),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yt(O){var W;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=y,(W=O.state).pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?k:S,O.adler=W.wrap===2?0:1,W.last_flush=f,a._tr_init(W),d):R(O,p)}function Ot(O){var W=yt(O);return W===d&&function(G){G.window_size=2*G.w_size,z(G.head),G.max_lazy_match=i[G.level].max_lazy,G.good_match=i[G.level].good_length,G.nice_match=i[G.level].nice_length,G.max_chain_length=i[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=T-1,G.match_available=0,G.ins_h=0}(O.state),W}function zt(O,W,G,$,B,H){if(!O)return p;var K=1;if(W===g&&(W=6),$<0?(K=0,$=-$):15<$&&(K=2,$-=16),B<1||_<B||G!==m||$<8||15<$||W<0||9<W||H<0||b<H)return R(O,p);$===8&&($=9);var Y=new vt;return(O.state=Y).strm=O,Y.wrap=K,Y.gzhead=null,Y.w_bits=$,Y.w_size=1<<Y.w_bits,Y.w_mask=Y.w_size-1,Y.hash_bits=B+7,Y.hash_size=1<<Y.hash_bits,Y.hash_mask=Y.hash_size-1,Y.hash_shift=~~((Y.hash_bits+T-1)/T),Y.window=new o.Buf8(2*Y.w_size),Y.head=new o.Buf16(Y.hash_size),Y.prev=new o.Buf16(Y.w_size),Y.lit_bufsize=1<<B+6,Y.pending_buf_size=4*Y.lit_bufsize,Y.pending_buf=new o.Buf8(Y.pending_buf_size),Y.d_buf=1*Y.lit_bufsize,Y.l_buf=3*Y.lit_bufsize,Y.level=W,Y.strategy=H,Y.method=G,Ot(O)}i=[new pt(0,0,0,0,function(O,W){var G=65535;for(G>O.pending_buf_size-5&&(G=O.pending_buf_size-5);;){if(O.lookahead<=1){if(gt(O),O.lookahead===0&&W===f)return x;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var $=O.block_start+G;if((O.strstart===0||O.strstart>=$)&&(O.lookahead=O.strstart-$,O.strstart=$,U(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-F&&(U(O,!1),O.strm.avail_out===0))return x}return O.insert=0,W===h?(U(O,!0),O.strm.avail_out===0?D:C):(O.strstart>O.block_start&&(U(O,!1),O.strm.avail_out),x)}),new pt(4,4,8,4,Et),new pt(4,5,16,8,Et),new pt(4,6,32,32,Et),new pt(4,4,16,16,ft),new pt(8,16,32,32,ft),new pt(8,16,128,128,ft),new pt(8,32,128,256,ft),new pt(32,128,258,1024,ft),new pt(32,258,258,4096,ft)],r.deflateInit=function(O,W){return zt(O,W,m,15,8,0)},r.deflateInit2=zt,r.deflateReset=Ot,r.deflateResetKeep=yt,r.deflateSetHeader=function(O,W){return O&&O.state?O.state.wrap!==2?p:(O.state.gzhead=W,d):p},r.deflate=function(O,W){var G,$,B,H;if(!O||!O.state||5<W||W<0)return O?R(O,p):p;if($=O.state,!O.output||!O.input&&O.avail_in!==0||$.status===666&&W!==h)return R(O,O.avail_out===0?-5:p);if($.strm=O,G=$.last_flush,$.last_flush=W,$.status===k)if($.wrap===2)O.adler=0,tt($,31),tt($,139),tt($,8),$.gzhead?(tt($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),tt($,255&$.gzhead.time),tt($,$.gzhead.time>>8&255),tt($,$.gzhead.time>>16&255),tt($,$.gzhead.time>>24&255),tt($,$.level===9?2:2<=$.strategy||$.level<2?4:0),tt($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(tt($,255&$.gzhead.extra.length),tt($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(O.adler=c(O.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(tt($,0),tt($,0),tt($,0),tt($,0),tt($,0),tt($,$.level===9?2:2<=$.strategy||$.level<2?4:0),tt($,3),$.status=S);else{var K=m+($.w_bits-8<<4)<<8;K|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(K|=32),K+=31-K%31,$.status=S,X($,K),$.strstart!==0&&(X($,O.adler>>>16),X($,65535&O.adler)),O.adler=1}if($.status===69)if($.gzhead.extra){for(B=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>B&&(O.adler=c(O.adler,$.pending_buf,$.pending-B,B)),M(O),B=$.pending,$.pending!==$.pending_buf_size));)tt($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>B&&(O.adler=c(O.adler,$.pending_buf,$.pending-B,B)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){B=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>B&&(O.adler=c(O.adler,$.pending_buf,$.pending-B,B)),M(O),B=$.pending,$.pending===$.pending_buf_size)){H=1;break}H=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,tt($,H)}while(H!==0);$.gzhead.hcrc&&$.pending>B&&(O.adler=c(O.adler,$.pending_buf,$.pending-B,B)),H===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){B=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>B&&(O.adler=c(O.adler,$.pending_buf,$.pending-B,B)),M(O),B=$.pending,$.pending===$.pending_buf_size)){H=1;break}H=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,tt($,H)}while(H!==0);$.gzhead.hcrc&&$.pending>B&&(O.adler=c(O.adler,$.pending_buf,$.pending-B,B)),H===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&M(O),$.pending+2<=$.pending_buf_size&&(tt($,255&O.adler),tt($,O.adler>>8&255),O.adler=0,$.status=S)):$.status=S),$.pending!==0){if(M(O),O.avail_out===0)return $.last_flush=-1,d}else if(O.avail_in===0&&N(W)<=N(G)&&W!==h)return R(O,-5);if($.status===666&&O.avail_in!==0)return R(O,-5);if(O.avail_in!==0||$.lookahead!==0||W!==f&&$.status!==666){var Y=$.strategy===2?function(q,et){for(var it;;){if(q.lookahead===0&&(gt(q),q.lookahead===0)){if(et===f)return x;break}if(q.match_length=0,it=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++,it&&(U(q,!1),q.strm.avail_out===0))return x}return q.insert=0,et===h?(U(q,!0),q.strm.avail_out===0?D:C):q.last_lit&&(U(q,!1),q.strm.avail_out===0)?x:j}($,W):$.strategy===3?function(q,et){for(var it,nt,ct,St,_t=q.window;;){if(q.lookahead<=I){if(gt(q),q.lookahead<=I&&et===f)return x;if(q.lookahead===0)break}if(q.match_length=0,q.lookahead>=T&&0<q.strstart&&(nt=_t[ct=q.strstart-1])===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]){St=q.strstart+I;do;while(nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&nt===_t[++ct]&&ct<St);q.match_length=I-(St-ct),q.match_length>q.lookahead&&(q.match_length=q.lookahead)}if(q.match_length>=T?(it=a._tr_tally(q,1,q.match_length-T),q.lookahead-=q.match_length,q.strstart+=q.match_length,q.match_length=0):(it=a._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++),it&&(U(q,!1),q.strm.avail_out===0))return x}return q.insert=0,et===h?(U(q,!0),q.strm.avail_out===0?D:C):q.last_lit&&(U(q,!1),q.strm.avail_out===0)?x:j}($,W):i[$.level].func($,W);if(Y!==D&&Y!==C||($.status=666),Y===x||Y===D)return O.avail_out===0&&($.last_flush=-1),d;if(Y===j&&(W===1?a._tr_align($):W!==5&&(a._tr_stored_block($,0,0,!1),W===3&&(z($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),M(O),O.avail_out===0))return $.last_flush=-1,d}return W!==h?d:$.wrap<=0?1:($.wrap===2?(tt($,255&O.adler),tt($,O.adler>>8&255),tt($,O.adler>>16&255),tt($,O.adler>>24&255),tt($,255&O.total_in),tt($,O.total_in>>8&255),tt($,O.total_in>>16&255),tt($,O.total_in>>24&255)):(X($,O.adler>>>16),X($,65535&O.adler)),M(O),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?d:1)},r.deflateEnd=function(O){var W;return O&&O.state?(W=O.state.status)!==k&&W!==69&&W!==73&&W!==91&&W!==103&&W!==S&&W!==666?R(O,p):(O.state=null,W===S?R(O,-3):d):p},r.deflateSetDictionary=function(O,W){var G,$,B,H,K,Y,q,et,it=W.length;if(!O||!O.state||(H=(G=O.state).wrap)===2||H===1&&G.status!==k||G.lookahead)return p;for(H===1&&(O.adler=u(O.adler,W,it,0)),G.wrap=0,it>=G.w_size&&(H===0&&(z(G.head),G.strstart=0,G.block_start=0,G.insert=0),et=new o.Buf8(G.w_size),o.arraySet(et,W,it-G.w_size,G.w_size,0),W=et,it=G.w_size),K=O.avail_in,Y=O.next_in,q=O.input,O.avail_in=it,O.next_in=0,O.input=W,gt(G);G.lookahead>=T;){for($=G.strstart,B=G.lookahead-(T-1);G.ins_h=(G.ins_h<<G.hash_shift^G.window[$+T-1])&G.hash_mask,G.prev[$&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=$,$++,--B;);G.strstart=$,G.lookahead=T-1,gt(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=T-1,G.match_available=0,O.next_in=Y,O.input=q,O.avail_in=K,G.wrap=H,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,s,r){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,s,r){s.exports=function(i,o){var a,u,c,l,f,h,d,p,g,b,y,m,_,w,v,A,E,P,T,I,F,k,S,x,j;a=i.state,u=i.next_in,x=i.input,c=u+(i.avail_in-5),l=i.next_out,j=i.output,f=l-(o-i.avail_out),h=l+(i.avail_out-257),d=a.dmax,p=a.wsize,g=a.whave,b=a.wnext,y=a.window,m=a.hold,_=a.bits,w=a.lencode,v=a.distcode,A=(1<<a.lenbits)-1,E=(1<<a.distbits)-1;t:do{_<15&&(m+=x[u++]<<_,_+=8,m+=x[u++]<<_,_+=8),P=w[m&A];e:for(;;){if(m>>>=T=P>>>24,_-=T,(T=P>>>16&255)===0)j[l++]=65535&P;else{if(!(16&T)){if(!(64&T)){P=w[(65535&P)+(m&(1<<T)-1)];continue e}if(32&T){a.mode=12;break t}i.msg="invalid literal/length code",a.mode=30;break t}I=65535&P,(T&=15)&&(_<T&&(m+=x[u++]<<_,_+=8),I+=m&(1<<T)-1,m>>>=T,_-=T),_<15&&(m+=x[u++]<<_,_+=8,m+=x[u++]<<_,_+=8),P=v[m&E];n:for(;;){if(m>>>=T=P>>>24,_-=T,!(16&(T=P>>>16&255))){if(!(64&T)){P=v[(65535&P)+(m&(1<<T)-1)];continue n}i.msg="invalid distance code",a.mode=30;break t}if(F=65535&P,_<(T&=15)&&(m+=x[u++]<<_,(_+=8)<T&&(m+=x[u++]<<_,_+=8)),d<(F+=m&(1<<T)-1)){i.msg="invalid distance too far back",a.mode=30;break t}if(m>>>=T,_-=T,(T=l-f)<F){if(g<(T=F-T)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break t}if(S=y,(k=0)===b){if(k+=p-T,T<I){for(I-=T;j[l++]=y[k++],--T;);k=l-F,S=j}}else if(b<T){if(k+=p+b-T,(T-=b)<I){for(I-=T;j[l++]=y[k++],--T;);if(k=0,b<I){for(I-=T=b;j[l++]=y[k++],--T;);k=l-F,S=j}}}else if(k+=b-T,T<I){for(I-=T;j[l++]=y[k++],--T;);k=l-F,S=j}for(;2<I;)j[l++]=S[k++],j[l++]=S[k++],j[l++]=S[k++],I-=3;I&&(j[l++]=S[k++],1<I&&(j[l++]=S[k++]))}else{for(k=l-F;j[l++]=j[k++],j[l++]=j[k++],j[l++]=j[k++],2<(I-=3););I&&(j[l++]=j[k++],1<I&&(j[l++]=j[k++]))}break}}break}}while(u<c&&l<h);u-=I=_>>3,m&=(1<<(_-=I<<3))-1,i.next_in=u,i.next_out=l,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=l<h?h-l+257:257-(l-h),a.hold=m,a.bits=_}},{}],49:[function(e,s,r){var i=e("../utils/common"),o=e("./adler32"),a=e("./crc32"),u=e("./inffast"),c=e("./inftrees"),l=1,f=2,h=0,d=-2,p=1,g=852,b=592;function y(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(k){var S;return k&&k.state?(S=k.state,k.total_in=k.total_out=S.total=0,k.msg="",S.wrap&&(k.adler=1&S.wrap),S.mode=p,S.last=0,S.havedict=0,S.dmax=32768,S.head=null,S.hold=0,S.bits=0,S.lencode=S.lendyn=new i.Buf32(g),S.distcode=S.distdyn=new i.Buf32(b),S.sane=1,S.back=-1,h):d}function w(k){var S;return k&&k.state?((S=k.state).wsize=0,S.whave=0,S.wnext=0,_(k)):d}function v(k,S){var x,j;return k&&k.state?(j=k.state,S<0?(x=0,S=-S):(x=1+(S>>4),S<48&&(S&=15)),S&&(S<8||15<S)?d:(j.window!==null&&j.wbits!==S&&(j.window=null),j.wrap=x,j.wbits=S,w(k))):d}function A(k,S){var x,j;return k?(j=new m,(k.state=j).window=null,(x=v(k,S))!==h&&(k.state=null),x):d}var E,P,T=!0;function I(k){if(T){var S;for(E=new i.Buf32(512),P=new i.Buf32(32),S=0;S<144;)k.lens[S++]=8;for(;S<256;)k.lens[S++]=9;for(;S<280;)k.lens[S++]=7;for(;S<288;)k.lens[S++]=8;for(c(l,k.lens,0,288,E,0,k.work,{bits:9}),S=0;S<32;)k.lens[S++]=5;c(f,k.lens,0,32,P,0,k.work,{bits:5}),T=!1}k.lencode=E,k.lenbits=9,k.distcode=P,k.distbits=5}function F(k,S,x,j){var D,C=k.state;return C.window===null&&(C.wsize=1<<C.wbits,C.wnext=0,C.whave=0,C.window=new i.Buf8(C.wsize)),j>=C.wsize?(i.arraySet(C.window,S,x-C.wsize,C.wsize,0),C.wnext=0,C.whave=C.wsize):(j<(D=C.wsize-C.wnext)&&(D=j),i.arraySet(C.window,S,x-j,D,C.wnext),(j-=D)?(i.arraySet(C.window,S,x-j,j,0),C.wnext=j,C.whave=C.wsize):(C.wnext+=D,C.wnext===C.wsize&&(C.wnext=0),C.whave<C.wsize&&(C.whave+=D))),0}r.inflateReset=w,r.inflateReset2=v,r.inflateResetKeep=_,r.inflateInit=function(k){return A(k,15)},r.inflateInit2=A,r.inflate=function(k,S){var x,j,D,C,R,N,z,M,U,tt,X,Z,gt,Et,ft,pt,vt,yt,Ot,zt,O,W,G,$,B=0,H=new i.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return d;(x=k.state).mode===12&&(x.mode=13),R=k.next_out,D=k.output,z=k.avail_out,C=k.next_in,j=k.input,N=k.avail_in,M=x.hold,U=x.bits,tt=N,X=z,W=h;t:for(;;)switch(x.mode){case p:if(x.wrap===0){x.mode=13;break}for(;U<16;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(2&x.wrap&&M===35615){H[x.check=0]=255&M,H[1]=M>>>8&255,x.check=a(x.check,H,2,0),U=M=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&M)<<8)+(M>>8))%31){k.msg="incorrect header check",x.mode=30;break}if((15&M)!=8){k.msg="unknown compression method",x.mode=30;break}if(U-=4,O=8+(15&(M>>>=4)),x.wbits===0)x.wbits=O;else if(O>x.wbits){k.msg="invalid window size",x.mode=30;break}x.dmax=1<<O,k.adler=x.check=1,x.mode=512&M?10:12,U=M=0;break;case 2:for(;U<16;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(x.flags=M,(255&x.flags)!=8){k.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){k.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=M>>8&1),512&x.flags&&(H[0]=255&M,H[1]=M>>>8&255,x.check=a(x.check,H,2,0)),U=M=0,x.mode=3;case 3:for(;U<32;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}x.head&&(x.head.time=M),512&x.flags&&(H[0]=255&M,H[1]=M>>>8&255,H[2]=M>>>16&255,H[3]=M>>>24&255,x.check=a(x.check,H,4,0)),U=M=0,x.mode=4;case 4:for(;U<16;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}x.head&&(x.head.xflags=255&M,x.head.os=M>>8),512&x.flags&&(H[0]=255&M,H[1]=M>>>8&255,x.check=a(x.check,H,2,0)),U=M=0,x.mode=5;case 5:if(1024&x.flags){for(;U<16;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}x.length=M,x.head&&(x.head.extra_len=M),512&x.flags&&(H[0]=255&M,H[1]=M>>>8&255,x.check=a(x.check,H,2,0)),U=M=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(N<(Z=x.length)&&(Z=N),Z&&(x.head&&(O=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),i.arraySet(x.head.extra,j,C,Z,O)),512&x.flags&&(x.check=a(x.check,j,Z,C)),N-=Z,C+=Z,x.length-=Z),x.length))break t;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(N===0)break t;for(Z=0;O=j[C+Z++],x.head&&O&&x.length<65536&&(x.head.name+=String.fromCharCode(O)),O&&Z<N;);if(512&x.flags&&(x.check=a(x.check,j,Z,C)),N-=Z,C+=Z,O)break t}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(N===0)break t;for(Z=0;O=j[C+Z++],x.head&&O&&x.length<65536&&(x.head.comment+=String.fromCharCode(O)),O&&Z<N;);if(512&x.flags&&(x.check=a(x.check,j,Z,C)),N-=Z,C+=Z,O)break t}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;U<16;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(M!==(65535&x.check)){k.msg="header crc mismatch",x.mode=30;break}U=M=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),k.adler=x.check=0,x.mode=12;break;case 10:for(;U<32;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}k.adler=x.check=y(M),U=M=0,x.mode=11;case 11:if(x.havedict===0)return k.next_out=R,k.avail_out=z,k.next_in=C,k.avail_in=N,x.hold=M,x.bits=U,2;k.adler=x.check=1,x.mode=12;case 12:if(S===5||S===6)break t;case 13:if(x.last){M>>>=7&U,U-=7&U,x.mode=27;break}for(;U<3;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}switch(x.last=1&M,U-=1,3&(M>>>=1)){case 0:x.mode=14;break;case 1:if(I(x),x.mode=20,S!==6)break;M>>>=2,U-=2;break t;case 2:x.mode=17;break;case 3:k.msg="invalid block type",x.mode=30}M>>>=2,U-=2;break;case 14:for(M>>>=7&U,U-=7&U;U<32;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if((65535&M)!=(M>>>16^65535)){k.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&M,U=M=0,x.mode=15,S===6)break t;case 15:x.mode=16;case 16:if(Z=x.length){if(N<Z&&(Z=N),z<Z&&(Z=z),Z===0)break t;i.arraySet(D,j,C,Z,R),N-=Z,C+=Z,z-=Z,R+=Z,x.length-=Z;break}x.mode=12;break;case 17:for(;U<14;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(x.nlen=257+(31&M),M>>>=5,U-=5,x.ndist=1+(31&M),M>>>=5,U-=5,x.ncode=4+(15&M),M>>>=4,U-=4,286<x.nlen||30<x.ndist){k.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;U<3;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}x.lens[K[x.have++]]=7&M,M>>>=3,U-=3}for(;x.have<19;)x.lens[K[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,G={bits:x.lenbits},W=c(0,x.lens,0,19,x.lencode,0,x.work,G),x.lenbits=G.bits,W){k.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;pt=(B=x.lencode[M&(1<<x.lenbits)-1])>>>16&255,vt=65535&B,!((ft=B>>>24)<=U);){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(vt<16)M>>>=ft,U-=ft,x.lens[x.have++]=vt;else{if(vt===16){for($=ft+2;U<$;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(M>>>=ft,U-=ft,x.have===0){k.msg="invalid bit length repeat",x.mode=30;break}O=x.lens[x.have-1],Z=3+(3&M),M>>>=2,U-=2}else if(vt===17){for($=ft+3;U<$;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}U-=ft,O=0,Z=3+(7&(M>>>=ft)),M>>>=3,U-=3}else{for($=ft+7;U<$;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}U-=ft,O=0,Z=11+(127&(M>>>=ft)),M>>>=7,U-=7}if(x.have+Z>x.nlen+x.ndist){k.msg="invalid bit length repeat",x.mode=30;break}for(;Z--;)x.lens[x.have++]=O}}if(x.mode===30)break;if(x.lens[256]===0){k.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,G={bits:x.lenbits},W=c(l,x.lens,0,x.nlen,x.lencode,0,x.work,G),x.lenbits=G.bits,W){k.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,G={bits:x.distbits},W=c(f,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,G),x.distbits=G.bits,W){k.msg="invalid distances set",x.mode=30;break}if(x.mode=20,S===6)break t;case 20:x.mode=21;case 21:if(6<=N&&258<=z){k.next_out=R,k.avail_out=z,k.next_in=C,k.avail_in=N,x.hold=M,x.bits=U,u(k,X),R=k.next_out,D=k.output,z=k.avail_out,C=k.next_in,j=k.input,N=k.avail_in,M=x.hold,U=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;pt=(B=x.lencode[M&(1<<x.lenbits)-1])>>>16&255,vt=65535&B,!((ft=B>>>24)<=U);){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(pt&&!(240&pt)){for(yt=ft,Ot=pt,zt=vt;pt=(B=x.lencode[zt+((M&(1<<yt+Ot)-1)>>yt)])>>>16&255,vt=65535&B,!(yt+(ft=B>>>24)<=U);){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}M>>>=yt,U-=yt,x.back+=yt}if(M>>>=ft,U-=ft,x.back+=ft,x.length=vt,pt===0){x.mode=26;break}if(32&pt){x.back=-1,x.mode=12;break}if(64&pt){k.msg="invalid literal/length code",x.mode=30;break}x.extra=15&pt,x.mode=22;case 22:if(x.extra){for($=x.extra;U<$;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}x.length+=M&(1<<x.extra)-1,M>>>=x.extra,U-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;pt=(B=x.distcode[M&(1<<x.distbits)-1])>>>16&255,vt=65535&B,!((ft=B>>>24)<=U);){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(!(240&pt)){for(yt=ft,Ot=pt,zt=vt;pt=(B=x.distcode[zt+((M&(1<<yt+Ot)-1)>>yt)])>>>16&255,vt=65535&B,!(yt+(ft=B>>>24)<=U);){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}M>>>=yt,U-=yt,x.back+=yt}if(M>>>=ft,U-=ft,x.back+=ft,64&pt){k.msg="invalid distance code",x.mode=30;break}x.offset=vt,x.extra=15&pt,x.mode=24;case 24:if(x.extra){for($=x.extra;U<$;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}x.offset+=M&(1<<x.extra)-1,M>>>=x.extra,U-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){k.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(z===0)break t;if(Z=X-z,x.offset>Z){if((Z=x.offset-Z)>x.whave&&x.sane){k.msg="invalid distance too far back",x.mode=30;break}gt=Z>x.wnext?(Z-=x.wnext,x.wsize-Z):x.wnext-Z,Z>x.length&&(Z=x.length),Et=x.window}else Et=D,gt=R-x.offset,Z=x.length;for(z<Z&&(Z=z),z-=Z,x.length-=Z;D[R++]=Et[gt++],--Z;);x.length===0&&(x.mode=21);break;case 26:if(z===0)break t;D[R++]=x.length,z--,x.mode=21;break;case 27:if(x.wrap){for(;U<32;){if(N===0)break t;N--,M|=j[C++]<<U,U+=8}if(X-=z,k.total_out+=X,x.total+=X,X&&(k.adler=x.check=x.flags?a(x.check,D,X,R-X):o(x.check,D,X,R-X)),X=z,(x.flags?M:y(M))!==x.check){k.msg="incorrect data check",x.mode=30;break}U=M=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;U<32;){if(N===0)break t;N--,M+=j[C++]<<U,U+=8}if(M!==(4294967295&x.total)){k.msg="incorrect length check",x.mode=30;break}U=M=0}x.mode=29;case 29:W=1;break t;case 30:W=-3;break t;case 31:return-4;case 32:default:return d}return k.next_out=R,k.avail_out=z,k.next_in=C,k.avail_in=N,x.hold=M,x.bits=U,(x.wsize||X!==k.avail_out&&x.mode<30&&(x.mode<27||S!==4))&&F(k,k.output,k.next_out,X-k.avail_out)?(x.mode=31,-4):(tt-=k.avail_in,X-=k.avail_out,k.total_in+=tt,k.total_out+=X,x.total+=X,x.wrap&&X&&(k.adler=x.check=x.flags?a(x.check,D,X,k.next_out-X):o(x.check,D,X,k.next_out-X)),k.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(tt==0&&X===0||S===4)&&W===h&&(W=-5),W)},r.inflateEnd=function(k){if(!k||!k.state)return d;var S=k.state;return S.window&&(S.window=null),k.state=null,h},r.inflateGetHeader=function(k,S){var x;return k&&k.state&&2&(x=k.state).wrap?((x.head=S).done=!1,h):d},r.inflateSetDictionary=function(k,S){var x,j=S.length;return k&&k.state?(x=k.state).wrap!==0&&x.mode!==11?d:x.mode===11&&o(1,S,j,0)!==x.check?-3:F(k,S,j,j)?(x.mode=31,-4):(x.havedict=1,h):d},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,s,r){var i=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(l,f,h,d,p,g,b,y){var m,_,w,v,A,E,P,T,I,F=y.bits,k=0,S=0,x=0,j=0,D=0,C=0,R=0,N=0,z=0,M=0,U=null,tt=0,X=new i.Buf16(16),Z=new i.Buf16(16),gt=null,Et=0;for(k=0;k<=15;k++)X[k]=0;for(S=0;S<d;S++)X[f[h+S]]++;for(D=F,j=15;1<=j&&X[j]===0;j--);if(j<D&&(D=j),j===0)return p[g++]=20971520,p[g++]=20971520,y.bits=1,0;for(x=1;x<j&&X[x]===0;x++);for(D<x&&(D=x),k=N=1;k<=15;k++)if(N<<=1,(N-=X[k])<0)return-1;if(0<N&&(l===0||j!==1))return-1;for(Z[1]=0,k=1;k<15;k++)Z[k+1]=Z[k]+X[k];for(S=0;S<d;S++)f[h+S]!==0&&(b[Z[f[h+S]]++]=S);if(E=l===0?(U=gt=b,19):l===1?(U=o,tt-=257,gt=a,Et-=257,256):(U=u,gt=c,-1),k=x,A=g,R=S=M=0,w=-1,v=(z=1<<(C=D))-1,l===1&&852<z||l===2&&592<z)return 1;for(;;){for(P=k-R,I=b[S]<E?(T=0,b[S]):b[S]>E?(T=gt[Et+b[S]],U[tt+b[S]]):(T=96,0),m=1<<k-R,x=_=1<<C;p[A+(M>>R)+(_-=m)]=P<<24|T<<16|I|0,_!==0;);for(m=1<<k-1;M&m;)m>>=1;if(m!==0?(M&=m-1,M+=m):M=0,S++,--X[k]==0){if(k===j)break;k=f[h+b[S]]}if(D<k&&(M&v)!==w){for(R===0&&(R=D),A+=x,N=1<<(C=k-R);C+R<j&&!((N-=X[C+R])<=0);)C++,N<<=1;if(z+=1<<C,l===1&&852<z||l===2&&592<z)return 1;p[w=M&v]=D<<24|C<<16|A-g|0}}return M!==0&&(p[A+M]=k-R<<24|64<<16|0),y.bits=D,0}},{"../utils/common":41}],51:[function(e,s,r){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,s,r){var i=e("../utils/common"),o=0,a=1;function u(B){for(var H=B.length;0<=--H;)B[H]=0}var c=0,l=29,f=256,h=f+1+l,d=30,p=19,g=2*h+1,b=15,y=16,m=7,_=256,w=16,v=17,A=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));u(F);var k=new Array(2*d);u(k);var S=new Array(512);u(S);var x=new Array(256);u(x);var j=new Array(l);u(j);var D,C,R,N=new Array(d);function z(B,H,K,Y,q){this.static_tree=B,this.extra_bits=H,this.extra_base=K,this.elems=Y,this.max_length=q,this.has_stree=B&&B.length}function M(B,H){this.dyn_tree=B,this.max_code=0,this.stat_desc=H}function U(B){return B<256?S[B]:S[256+(B>>>7)]}function tt(B,H){B.pending_buf[B.pending++]=255&H,B.pending_buf[B.pending++]=H>>>8&255}function X(B,H,K){B.bi_valid>y-K?(B.bi_buf|=H<<B.bi_valid&65535,tt(B,B.bi_buf),B.bi_buf=H>>y-B.bi_valid,B.bi_valid+=K-y):(B.bi_buf|=H<<B.bi_valid&65535,B.bi_valid+=K)}function Z(B,H,K){X(B,K[2*H],K[2*H+1])}function gt(B,H){for(var K=0;K|=1&B,B>>>=1,K<<=1,0<--H;);return K>>>1}function Et(B,H,K){var Y,q,et=new Array(b+1),it=0;for(Y=1;Y<=b;Y++)et[Y]=it=it+K[Y-1]<<1;for(q=0;q<=H;q++){var nt=B[2*q+1];nt!==0&&(B[2*q]=gt(et[nt]++,nt))}}function ft(B){var H;for(H=0;H<h;H++)B.dyn_ltree[2*H]=0;for(H=0;H<d;H++)B.dyn_dtree[2*H]=0;for(H=0;H<p;H++)B.bl_tree[2*H]=0;B.dyn_ltree[2*_]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function pt(B){8<B.bi_valid?tt(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function vt(B,H,K,Y){var q=2*H,et=2*K;return B[q]<B[et]||B[q]===B[et]&&Y[H]<=Y[K]}function yt(B,H,K){for(var Y=B.heap[K],q=K<<1;q<=B.heap_len&&(q<B.heap_len&&vt(H,B.heap[q+1],B.heap[q],B.depth)&&q++,!vt(H,Y,B.heap[q],B.depth));)B.heap[K]=B.heap[q],K=q,q<<=1;B.heap[K]=Y}function Ot(B,H,K){var Y,q,et,it,nt=0;if(B.last_lit!==0)for(;Y=B.pending_buf[B.d_buf+2*nt]<<8|B.pending_buf[B.d_buf+2*nt+1],q=B.pending_buf[B.l_buf+nt],nt++,Y===0?Z(B,q,H):(Z(B,(et=x[q])+f+1,H),(it=E[et])!==0&&X(B,q-=j[et],it),Z(B,et=U(--Y),K),(it=P[et])!==0&&X(B,Y-=N[et],it)),nt<B.last_lit;);Z(B,_,H)}function zt(B,H){var K,Y,q,et=H.dyn_tree,it=H.stat_desc.static_tree,nt=H.stat_desc.has_stree,ct=H.stat_desc.elems,St=-1;for(B.heap_len=0,B.heap_max=g,K=0;K<ct;K++)et[2*K]!==0?(B.heap[++B.heap_len]=St=K,B.depth[K]=0):et[2*K+1]=0;for(;B.heap_len<2;)et[2*(q=B.heap[++B.heap_len]=St<2?++St:0)]=1,B.depth[q]=0,B.opt_len--,nt&&(B.static_len-=it[2*q+1]);for(H.max_code=St,K=B.heap_len>>1;1<=K;K--)yt(B,et,K);for(q=ct;K=B.heap[1],B.heap[1]=B.heap[B.heap_len--],yt(B,et,1),Y=B.heap[1],B.heap[--B.heap_max]=K,B.heap[--B.heap_max]=Y,et[2*q]=et[2*K]+et[2*Y],B.depth[q]=(B.depth[K]>=B.depth[Y]?B.depth[K]:B.depth[Y])+1,et[2*K+1]=et[2*Y+1]=q,B.heap[1]=q++,yt(B,et,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(_t,Gt){var sn,Wt,te,Tt,Ue,_n,ee=Gt.dyn_tree,$n=Gt.max_code,Wr=Gt.stat_desc.static_tree,lr=Gt.stat_desc.has_stree,on=Gt.stat_desc.extra_bits,Mn=Gt.stat_desc.extra_base,ze=Gt.stat_desc.max_length,yn=0;for(Tt=0;Tt<=b;Tt++)_t.bl_count[Tt]=0;for(ee[2*_t.heap[_t.heap_max]+1]=0,sn=_t.heap_max+1;sn<g;sn++)ze<(Tt=ee[2*ee[2*(Wt=_t.heap[sn])+1]+1]+1)&&(Tt=ze,yn++),ee[2*Wt+1]=Tt,$n<Wt||(_t.bl_count[Tt]++,Ue=0,Mn<=Wt&&(Ue=on[Wt-Mn]),_n=ee[2*Wt],_t.opt_len+=_n*(Tt+Ue),lr&&(_t.static_len+=_n*(Wr[2*Wt+1]+Ue)));if(yn!==0){do{for(Tt=ze-1;_t.bl_count[Tt]===0;)Tt--;_t.bl_count[Tt]--,_t.bl_count[Tt+1]+=2,_t.bl_count[ze]--,yn-=2}while(0<yn);for(Tt=ze;Tt!==0;Tt--)for(Wt=_t.bl_count[Tt];Wt!==0;)$n<(te=_t.heap[--sn])||(ee[2*te+1]!==Tt&&(_t.opt_len+=(Tt-ee[2*te+1])*ee[2*te],ee[2*te+1]=Tt),Wt--)}}(B,H),Et(et,St,B.bl_count)}function O(B,H,K){var Y,q,et=-1,it=H[1],nt=0,ct=7,St=4;for(it===0&&(ct=138,St=3),H[2*(K+1)+1]=65535,Y=0;Y<=K;Y++)q=it,it=H[2*(Y+1)+1],++nt<ct&&q===it||(nt<St?B.bl_tree[2*q]+=nt:q!==0?(q!==et&&B.bl_tree[2*q]++,B.bl_tree[2*w]++):nt<=10?B.bl_tree[2*v]++:B.bl_tree[2*A]++,et=q,St=(nt=0)===it?(ct=138,3):q===it?(ct=6,3):(ct=7,4))}function W(B,H,K){var Y,q,et=-1,it=H[1],nt=0,ct=7,St=4;for(it===0&&(ct=138,St=3),Y=0;Y<=K;Y++)if(q=it,it=H[2*(Y+1)+1],!(++nt<ct&&q===it)){if(nt<St)for(;Z(B,q,B.bl_tree),--nt!=0;);else q!==0?(q!==et&&(Z(B,q,B.bl_tree),nt--),Z(B,w,B.bl_tree),X(B,nt-3,2)):nt<=10?(Z(B,v,B.bl_tree),X(B,nt-3,3)):(Z(B,A,B.bl_tree),X(B,nt-11,7));et=q,St=(nt=0)===it?(ct=138,3):q===it?(ct=6,3):(ct=7,4)}}u(N);var G=!1;function $(B,H,K,Y){X(B,(c<<1)+(Y?1:0),3),function(q,et,it,nt){pt(q),tt(q,it),tt(q,~it),i.arraySet(q.pending_buf,q.window,et,it,q.pending),q.pending+=it}(B,H,K)}r._tr_init=function(B){G||(function(){var H,K,Y,q,et,it=new Array(b+1);for(q=Y=0;q<l-1;q++)for(j[q]=Y,H=0;H<1<<E[q];H++)x[Y++]=q;for(x[Y-1]=q,q=et=0;q<16;q++)for(N[q]=et,H=0;H<1<<P[q];H++)S[et++]=q;for(et>>=7;q<d;q++)for(N[q]=et<<7,H=0;H<1<<P[q]-7;H++)S[256+et++]=q;for(K=0;K<=b;K++)it[K]=0;for(H=0;H<=143;)F[2*H+1]=8,H++,it[8]++;for(;H<=255;)F[2*H+1]=9,H++,it[9]++;for(;H<=279;)F[2*H+1]=7,H++,it[7]++;for(;H<=287;)F[2*H+1]=8,H++,it[8]++;for(Et(F,h+1,it),H=0;H<d;H++)k[2*H+1]=5,k[2*H]=gt(H,5);D=new z(F,E,f+1,h,b),C=new z(k,P,0,d,b),R=new z(new Array(0),T,0,p,m)}(),G=!0),B.l_desc=new M(B.dyn_ltree,D),B.d_desc=new M(B.dyn_dtree,C),B.bl_desc=new M(B.bl_tree,R),B.bi_buf=0,B.bi_valid=0,ft(B)},r._tr_stored_block=$,r._tr_flush_block=function(B,H,K,Y){var q,et,it=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(nt){var ct,St=4093624447;for(ct=0;ct<=31;ct++,St>>>=1)if(1&St&&nt.dyn_ltree[2*ct]!==0)return o;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return a;for(ct=32;ct<f;ct++)if(nt.dyn_ltree[2*ct]!==0)return a;return o}(B)),zt(B,B.l_desc),zt(B,B.d_desc),it=function(nt){var ct;for(O(nt,nt.dyn_ltree,nt.l_desc.max_code),O(nt,nt.dyn_dtree,nt.d_desc.max_code),zt(nt,nt.bl_desc),ct=p-1;3<=ct&&nt.bl_tree[2*I[ct]+1]===0;ct--);return nt.opt_len+=3*(ct+1)+5+5+4,ct}(B),q=B.opt_len+3+7>>>3,(et=B.static_len+3+7>>>3)<=q&&(q=et)):q=et=K+5,K+4<=q&&H!==-1?$(B,H,K,Y):B.strategy===4||et===q?(X(B,2+(Y?1:0),3),Ot(B,F,k)):(X(B,4+(Y?1:0),3),function(nt,ct,St,_t){var Gt;for(X(nt,ct-257,5),X(nt,St-1,5),X(nt,_t-4,4),Gt=0;Gt<_t;Gt++)X(nt,nt.bl_tree[2*I[Gt]+1],3);W(nt,nt.dyn_ltree,ct-1),W(nt,nt.dyn_dtree,St-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,it+1),Ot(B,B.dyn_ltree,B.dyn_dtree)),ft(B),Y&&pt(B)},r._tr_tally=function(B,H,K){return B.pending_buf[B.d_buf+2*B.last_lit]=H>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&H,B.pending_buf[B.l_buf+B.last_lit]=255&K,B.last_lit++,H===0?B.dyn_ltree[2*K]++:(B.matches++,H--,B.dyn_ltree[2*(x[K]+f+1)]++,B.dyn_dtree[2*U(H)]++),B.last_lit===B.lit_bufsize-1},r._tr_align=function(B){X(B,2,3),Z(B,_,F),function(H){H.bi_valid===16?(tt(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(e,s,r){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,s,r){(function(i){(function(o,a){if(!o.setImmediate){var u,c,l,f,h=1,d={},p=!1,g=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,u={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){m(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,v=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=v,w}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(w){o.postMessage(f+w,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(w){m(w.data)},function(w){l.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(w){var v=g.createElement("script");v.onreadystatechange=function(){m(w),v.onreadystatechange=null,c.removeChild(v),v=null},c.appendChild(v)}):function(w){setTimeout(m,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var v=new Array(arguments.length-1),A=0;A<v.length;A++)v[A]=arguments[A+1];var E={callback:w,args:v};return d[h]=E,u(h),h++},b.clearImmediate=y}function y(w){delete d[w]}function m(w){if(p)setTimeout(m,0,w);else{var v=d[w];if(v){p=!0;try{(function(A){var E=A.callback,P=A.args;switch(P.length){case 0:E();break;case 1:E(P[0]);break;case 2:E(P[0],P[1]);break;case 3:E(P[0],P[1],P[2]);break;default:E.apply(a,P)}})(v)}finally{y(w),p=!1}}}}function _(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(f)===0&&m(+w.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Fe<"u"?Fe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(si)),si.exports}var Jh=Vh();const j1=en(Jh);var Ar={exports:{}},Kh=Ar.exports,so;function Zh(){return so||(so=1,function(n,t){(function(e,s){n.exports=s()})(Kh,()=>(()=>{var e={d:(h,d)=>{for(var p in d)e.o(d,p)&&!e.o(h,p)&&Object.defineProperty(h,p,{enumerable:!0,get:d[p]})},o:(h,d)=>Object.prototype.hasOwnProperty.call(h,d)},s={};function r(h){return Array.isArray(h)?"array":h instanceof Date?"date":h instanceof Error?"error":h instanceof RegExp?"regexp":h===null?"null":typeof h=="object"&&Object.prototype.toString.call(h)==="[object Object]"?"object":typeof h}e.d(s,{default:()=>f});var i={base:o,date:o,error:o,symbol:o,string:o,number:o,boolean:o,regexp:o,null:o,undefined:o};function o(h){return h}var a={indent:" ",prefix:`
`,postfix:"",errorToString:function(h,d){return Error.prototype.toString.call(h)},dateToString:function(h){return"new Date(".concat(Date.prototype.toISOString.call(h),")")},colors:i};function u(h){return h===void 0&&(h={}),Object.assign({},a,h,{colors:Object.assign({},i,h.colors)})}function c(h,d){h===void 0&&(h=1),d===void 0&&(d="  ");for(var p="",g=0;g<h;g+=1)p+=d;return p}var l=["object","array"];function f(h,d){var p=u(d),g=p.colors,b=p.prefix,y=p.postfix,m=p.dateToString,_=p.errorToString,w=p.indent,v=new Map;function A(F,k,S){if(k===void 0&&(k=1),S===void 0&&(S=0),Object.keys(F).length===0)return" ".concat(g.base("{}"));var x=`
`,j=c(k,w);return Object.keys(F).forEach(function(D){var C=F[D],R=r(C),N=c(S,"  "),z=l.includes(R)?"":" ",M=T(C)?" ".concat(g.base("[Circular]")):P(R,C,k+1,S);x+="".concat(N).concat(j).concat(g.base("".concat(D,":"))).concat(z).concat(M,`
`)}),x.substring(0,x.length-1)}function E(F,k,S){if(k===void 0&&(k=1),S===void 0&&(S=0),F.length===0)return" ".concat(g.base("[]"));var x=`
`,j=c(k,w);return F.forEach(function(D){var C=r(D),R=c(S,"  "),N=T(D)?g.base("[Circular]"):P(C,D,k,S+1).toString().trimLeft();x+="".concat(R).concat(j).concat("".concat(g.base("-")," ")).concat(N,`
`)}),x.substring(0,x.length-1)}function P(F,k,S,x){switch(F){case"array":return E(k,S,x);case"object":return A(k,S,x);case"string":return g.string(k);case"symbol":return g.symbol(k.toString());case"number":return g.number(k);case"boolean":return g.boolean(k);case"null":return g.null("null");case"undefined":return g.undefined("undefined");case"date":return g.date(m(k));case"error":return g.error(_(k,c(S,w)));case"regexp":return g.regexp(k.toString());default:return k&&k.toString?k.toString():Object.prototype.toString.call(k)}}function T(F){return!(!["object","array"].includes(r(F))||!v.has(F)&&(v.set(F,!0),1))}var I="";return v.set(h,!0),r(h)==="object"&&Object.keys(h).length>0?I=A(h):r(h)==="array"&&h.length>0&&(I=E(h)),I.length===0?"":"".concat(b).concat(I.slice(1)).concat(y)}return s.default})())}(Ar)),Ar.exports}var Yh=Zh();const R1=en(Yh),oo={};function Xh(n){let t=oo[n];if(t)return t;t=oo[n]=[];for(let e=0;e<128;e++){const s=String.fromCharCode(e);t.push(s)}for(let e=0;e<n.length;e++){const s=n.charCodeAt(e);t[s]="%"+("0"+s.toString(16).toUpperCase()).slice(-2)}return t}function jn(n,t){typeof t!="string"&&(t=jn.defaultChars);const e=Xh(t);return n.replace(/(%[a-f0-9]{2})+/gi,function(s){let r="";for(let i=0,o=s.length;i<o;i+=3){const a=parseInt(s.slice(i+1,i+3),16);if(a<128){r+=e[a];continue}if((a&224)===192&&i+3<o){const u=parseInt(s.slice(i+4,i+6),16);if((u&192)===128){const c=a<<6&1984|u&63;c<128?r+="��":r+=String.fromCharCode(c),i+=3;continue}}if((a&240)===224&&i+6<o){const u=parseInt(s.slice(i+4,i+6),16),c=parseInt(s.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const l=a<<12&61440|u<<6&4032|c&63;l<2048||l>=55296&&l<=57343?r+="���":r+=String.fromCharCode(l),i+=6;continue}}if((a&248)===240&&i+9<o){const u=parseInt(s.slice(i+4,i+6),16),c=parseInt(s.slice(i+7,i+9),16),l=parseInt(s.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(l&192)===128){let f=a<<18&1835008|u<<12&258048|c<<6&4032|l&63;f<65536||f>1114111?r+="����":(f-=65536,r+=String.fromCharCode(55296+(f>>10),56320+(f&1023))),i+=9;continue}}r+="�"}return r})}jn.defaultChars=";/?:@&=+$,#";jn.componentChars="";const ao={};function Qh(n){let t=ao[n];if(t)return t;t=ao[n]=[];for(let e=0;e<128;e++){const s=String.fromCharCode(e);/^[0-9a-z]$/i.test(s)?t.push(s):t.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2))}for(let e=0;e<n.length;e++)t[n.charCodeAt(e)]=n[e];return t}function or(n,t,e){typeof t!="string"&&(e=t,t=or.defaultChars),typeof e>"u"&&(e=!0);const s=Qh(t);let r="";for(let i=0,o=n.length;i<o;i++){const a=n.charCodeAt(i);if(e&&a===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(n.slice(i+1,i+3))){r+=n.slice(i,i+3),i+=2;continue}if(a<128){r+=s[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&i+1<o){const u=n.charCodeAt(i+1);if(u>=56320&&u<=57343){r+=encodeURIComponent(n[i]+n[i+1]),i++;continue}}r+="%EF%BF%BD";continue}r+=encodeURIComponent(n[i])}return r}or.defaultChars=";/?:@&=+$,-_.!~*'()#";or.componentChars="-_.!~*'()";function us(n){let t="";return t+=n.protocol||"",t+=n.slashes?"//":"",t+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?t+="["+n.hostname+"]":t+=n.hostname||"",t+=n.port?":"+n.port:"",t+=n.pathname||"",t+=n.search||"",t+=n.hash||"",t}function Ir(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const td=/^([a-z0-9.+-]+:)/i,ed=/:[0-9]*$/,nd=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,rd=["<",">",'"',"`"," ","\r",`
`,"	"],id=["{","}","|","\\","^","`"].concat(rd),sd=["'"].concat(id),uo=["%","/","?",";","#"].concat(sd),co=["/","?","#"],od=255,lo=/^[+a-z0-9A-Z_-]{0,63}$/,ad=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,fo={javascript:!0,"javascript:":!0},ho={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function cs(n,t){if(n&&n instanceof Ir)return n;const e=new Ir;return e.parse(n,t),e}Ir.prototype.parse=function(n,t){let e,s,r,i=n;if(i=i.trim(),!t&&n.split("#").length===1){const c=nd.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=td.exec(i);if(o&&(o=o[0],e=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(r=i.substr(0,2)==="//",r&&!(o&&fo[o])&&(i=i.substr(2),this.slashes=!0)),!fo[o]&&(r||o&&!ho[o])){let c=-1;for(let p=0;p<co.length;p++)s=i.indexOf(co[p]),s!==-1&&(c===-1||s<c)&&(c=s);let l,f;c===-1?f=i.lastIndexOf("@"):f=i.lastIndexOf("@",c),f!==-1&&(l=i.slice(0,f),i=i.slice(f+1),this.auth=l),c=-1;for(let p=0;p<uo.length;p++)s=i.indexOf(uo[p]),s!==-1&&(c===-1||s<c)&&(c=s);c===-1&&(c=i.length),i[c-1]===":"&&c--;const h=i.slice(0,c);i=i.slice(c),this.parseHost(h),this.hostname=this.hostname||"";const d=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!d){const p=this.hostname.split(/\./);for(let g=0,b=p.length;g<b;g++){const y=p[g];if(y&&!y.match(lo)){let m="";for(let _=0,w=y.length;_<w;_++)y.charCodeAt(_)>127?m+="x":m+=y[_];if(!m.match(lo)){const _=p.slice(0,g),w=p.slice(g+1),v=y.match(ad);v&&(_.push(v[1]),w.unshift(v[2])),w.length&&(i=w.join(".")+i),this.hostname=_.join(".");break}}}}this.hostname.length>od&&(this.hostname=""),d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=i.indexOf("#");a!==-1&&(this.hash=i.substr(a),i=i.slice(0,a));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),ho[e]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Ir.prototype.parseHost=function(n){let t=ed.exec(n);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)};const ud=Object.freeze(Object.defineProperty({__proto__:null,decode:jn,encode:or,format:us,parse:cs},Symbol.toStringTag,{value:"Module"})),Qc=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tl=/[\0-\x1F\x7F-\x9F]/,cd=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,ls=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,el=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,nl=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ld=Object.freeze(Object.defineProperty({__proto__:null,Any:Qc,Cc:tl,Cf:cd,P:ls,S:el,Z:nl},Symbol.toStringTag,{value:"Module"})),fd=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(n=>n.charCodeAt(0))),hd=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(n=>n.charCodeAt(0)));var oi;const dd=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),pd=(oi=String.fromCodePoint)!==null&&oi!==void 0?oi:function(n){let t="";return n>65535&&(n-=65536,t+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),t+=String.fromCharCode(n),t};function gd(n){var t;return n>=55296&&n<=57343||n>1114111?65533:(t=dd.get(n))!==null&&t!==void 0?t:n}var Ut;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(Ut||(Ut={}));const md=32;var Ye;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Ye||(Ye={}));function Mi(n){return n>=Ut.ZERO&&n<=Ut.NINE}function bd(n){return n>=Ut.UPPER_A&&n<=Ut.UPPER_F||n>=Ut.LOWER_A&&n<=Ut.LOWER_F}function _d(n){return n>=Ut.UPPER_A&&n<=Ut.UPPER_Z||n>=Ut.LOWER_A&&n<=Ut.LOWER_Z||Mi(n)}function yd(n){return n===Ut.EQUALS||_d(n)}var Mt;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(Mt||(Mt={}));var Ke;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Ke||(Ke={}));class wd{constructor(t,e,s){this.decodeTree=t,this.emitCodePoint=e,this.errors=s,this.state=Mt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ke.Strict}startEntity(t){this.decodeMode=t,this.state=Mt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,e){switch(this.state){case Mt.EntityStart:return t.charCodeAt(e)===Ut.NUM?(this.state=Mt.NumericStart,this.consumed+=1,this.stateNumericStart(t,e+1)):(this.state=Mt.NamedEntity,this.stateNamedEntity(t,e));case Mt.NumericStart:return this.stateNumericStart(t,e);case Mt.NumericDecimal:return this.stateNumericDecimal(t,e);case Mt.NumericHex:return this.stateNumericHex(t,e);case Mt.NamedEntity:return this.stateNamedEntity(t,e)}}stateNumericStart(t,e){return e>=t.length?-1:(t.charCodeAt(e)|md)===Ut.LOWER_X?(this.state=Mt.NumericHex,this.consumed+=1,this.stateNumericHex(t,e+1)):(this.state=Mt.NumericDecimal,this.stateNumericDecimal(t,e))}addToNumericResult(t,e,s,r){if(e!==s){const i=s-e;this.result=this.result*Math.pow(r,i)+parseInt(t.substr(e,i),r),this.consumed+=i}}stateNumericHex(t,e){const s=e;for(;e<t.length;){const r=t.charCodeAt(e);if(Mi(r)||bd(r))e+=1;else return this.addToNumericResult(t,s,e,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(t,s,e,16),-1}stateNumericDecimal(t,e){const s=e;for(;e<t.length;){const r=t.charCodeAt(e);if(Mi(r))e+=1;else return this.addToNumericResult(t,s,e,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(t,s,e,10),-1}emitNumericEntity(t,e){var s;if(this.consumed<=e)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ut.SEMI)this.consumed+=1;else if(this.decodeMode===Ke.Strict)return 0;return this.emitCodePoint(gd(this.result),this.consumed),this.errors&&(t!==Ut.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,e){const{decodeTree:s}=this;let r=s[this.treeIndex],i=(r&Ye.VALUE_LENGTH)>>14;for(;e<t.length;e++,this.excess++){const o=t.charCodeAt(e);if(this.treeIndex=vd(s,r,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Ke.Attribute&&(i===0||yd(o))?0:this.emitNotTerminatedNamedEntity();if(r=s[this.treeIndex],i=(r&Ye.VALUE_LENGTH)>>14,i!==0){if(o===Ut.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Ke.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:e,decodeTree:s}=this,r=(s[e]&Ye.VALUE_LENGTH)>>14;return this.emitNamedEntityData(e,r,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,e,s){const{decodeTree:r}=this;return this.emitCodePoint(e===1?r[t]&~Ye.VALUE_LENGTH:r[t+1],s),e===3&&this.emitCodePoint(r[t+2],s),s}end(){var t;switch(this.state){case Mt.NamedEntity:return this.result!==0&&(this.decodeMode!==Ke.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Mt.NumericDecimal:return this.emitNumericEntity(0,2);case Mt.NumericHex:return this.emitNumericEntity(0,3);case Mt.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Mt.EntityStart:return 0}}}function rl(n){let t="";const e=new wd(n,s=>t+=pd(s));return function(r,i){let o=0,a=0;for(;(a=r.indexOf("&",a))>=0;){t+=r.slice(o,a),e.startEntity(i);const c=e.write(r,a+1);if(c<0){o=a+e.end();break}o=a+c,a=c===0?o+1:o}const u=t+r.slice(o);return t="",u}}function vd(n,t,e,s){const r=(t&Ye.BRANCH_LENGTH)>>7,i=t&Ye.JUMP_TABLE;if(r===0)return i!==0&&s===i?e:-1;if(i){const u=s-i;return u<0||u>=r?-1:n[e+u]-1}let o=e,a=o+r-1;for(;o<=a;){const u=o+a>>>1,c=n[u];if(c<s)o=u+1;else if(c>s)a=u-1;else return n[u+r]}return-1}const xd=rl(fd);rl(hd);function il(n,t=Ke.Legacy){return xd(n,t)}function kd(n){return Object.prototype.toString.call(n)}function fs(n){return kd(n)==="[object String]"}const Sd=Object.prototype.hasOwnProperty;function Ad(n,t){return Sd.call(n,t)}function Ur(n){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e){if(typeof e!="object")throw new TypeError(e+"must be object");Object.keys(e).forEach(function(s){n[s]=e[s]})}}),n}function sl(n,t,e){return[].concat(n.slice(0,t),e,n.slice(t+1))}function hs(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function jr(n){if(n>65535){n-=65536;const t=55296+(n>>10),e=56320+(n&1023);return String.fromCharCode(t,e)}return String.fromCharCode(n)}const ol=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Ed=/&([a-z#][a-z0-9]{1,31});/gi,Cd=new RegExp(ol.source+"|"+Ed.source,"gi"),Td=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Dd(n,t){if(t.charCodeAt(0)===35&&Td.test(t)){const s=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return hs(s)?jr(s):n}const e=il(n);return e!==n?e:n}function Od(n){return n.indexOf("\\")<0?n:n.replace(ol,"$1")}function Rn(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(Cd,function(t,e,s){return e||Dd(t,s)})}const Pd=/[&<>"]/,Id=/[&<>"]/g,jd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Rd(n){return jd[n]}function tn(n){return Pd.test(n)?n.replace(Id,Rd):n}const Fd=/[.?*+^$[\]\\(){}|-]/g;function Ld(n){return n.replace(Fd,"\\$&")}function Ct(n){switch(n){case 9:case 32:return!0}return!1}function tr(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function er(n){return ls.test(n)||el.test(n)}function nr(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function zr(n){return n=n.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(n=n.replace(/ẞ/g,"ß")),n.toLowerCase().toUpperCase()}const Nd={mdurl:ud,ucmicro:ld},Bd=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:sl,assign:Ur,escapeHtml:tn,escapeRE:Ld,fromCodePoint:jr,has:Ad,isMdAsciiPunct:nr,isPunctChar:er,isSpace:Ct,isString:fs,isValidEntityCode:hs,isWhiteSpace:tr,lib:Nd,normalizeReference:zr,unescapeAll:Rn,unescapeMd:Od},Symbol.toStringTag,{value:"Module"}));function $d(n,t,e){let s,r,i,o;const a=n.posMax,u=n.pos;for(n.pos=t+1,s=1;n.pos<a;){if(i=n.src.charCodeAt(n.pos),i===93&&(s--,s===0)){r=!0;break}if(o=n.pos,n.md.inline.skipToken(n),i===91){if(o===n.pos-1)s++;else if(e)return n.pos=u,-1}}let c=-1;return r&&(c=n.pos),n.pos=u,c}function Md(n,t,e){let s,r=t;const i={ok:!1,pos:0,str:""};if(n.charCodeAt(r)===60){for(r++;r<e;){if(s=n.charCodeAt(r),s===10||s===60)return i;if(s===62)return i.pos=r+1,i.str=Rn(n.slice(t+1,r)),i.ok=!0,i;if(s===92&&r+1<e){r+=2;continue}r++}return i}let o=0;for(;r<e&&(s=n.charCodeAt(r),!(s===32||s<32||s===127));){if(s===92&&r+1<e){if(n.charCodeAt(r+1)===32)break;r+=2;continue}if(s===40&&(o++,o>32))return i;if(s===41){if(o===0)break;o--}r++}return t===r||o!==0||(i.str=Rn(n.slice(t,r)),i.pos=r,i.ok=!0),i}function Ud(n,t,e,s){let r,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(s)o.str=s.str,o.marker=s.marker;else{if(i>=e)return o;let a=n.charCodeAt(i);if(a!==34&&a!==39&&a!==40)return o;t++,i++,a===40&&(a=41),o.marker=a}for(;i<e;){if(r=n.charCodeAt(i),r===o.marker)return o.pos=i+1,o.str+=Rn(n.slice(t,i)),o.ok=!0,o;if(r===40&&o.marker===41)return o;r===92&&i+1<e&&i++,i++}return o.can_continue=!0,o.str+=Rn(n.slice(t,i)),o}const zd=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Md,parseLinkLabel:$d,parseLinkTitle:Ud},Symbol.toStringTag,{value:"Module"})),Ce={};Ce.code_inline=function(n,t,e,s,r){const i=n[t];return"<code"+r.renderAttrs(i)+">"+tn(i.content)+"</code>"};Ce.code_block=function(n,t,e,s,r){const i=n[t];return"<pre"+r.renderAttrs(i)+"><code>"+tn(n[t].content)+`</code></pre>
`};Ce.fence=function(n,t,e,s,r){const i=n[t],o=i.info?Rn(i.info).trim():"";let a="",u="";if(o){const l=o.split(/(\s+)/g);a=l[0],u=l.slice(2).join("")}let c;if(e.highlight?c=e.highlight(i.content,a,u)||tn(i.content):c=tn(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const l=i.attrIndex("class"),f=i.attrs?i.attrs.slice():[];l<0?f.push(["class",e.langPrefix+a]):(f[l]=f[l].slice(),f[l][1]+=" "+e.langPrefix+a);const h={attrs:f};return`<pre><code${r.renderAttrs(h)}>${c}</code></pre>
`}return`<pre><code${r.renderAttrs(i)}>${c}</code></pre>
`};Ce.image=function(n,t,e,s,r){const i=n[t];return i.attrs[i.attrIndex("alt")][1]=r.renderInlineAsText(i.children,e,s),r.renderToken(n,t,e)};Ce.hardbreak=function(n,t,e){return e.xhtmlOut?`<br />
`:`<br>
`};Ce.softbreak=function(n,t,e){return e.breaks?e.xhtmlOut?`<br />
`:`<br>
`:`
`};Ce.text=function(n,t){return tn(n[t].content)};Ce.html_block=function(n,t){return n[t].content};Ce.html_inline=function(n,t){return n[t].content};function Nn(){this.rules=Ur({},Ce)}Nn.prototype.renderAttrs=function(t){let e,s,r;if(!t.attrs)return"";for(r="",e=0,s=t.attrs.length;e<s;e++)r+=" "+tn(t.attrs[e][0])+'="'+tn(t.attrs[e][1])+'"';return r};Nn.prototype.renderToken=function(t,e,s){const r=t[e];let i="";if(r.hidden)return"";r.block&&r.nesting!==-1&&e&&t[e-1].hidden&&(i+=`
`),i+=(r.nesting===-1?"</":"<")+r.tag,i+=this.renderAttrs(r),r.nesting===0&&s.xhtmlOut&&(i+=" /");let o=!1;if(r.block&&(o=!0,r.nesting===1&&e+1<t.length)){const a=t[e+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===r.tag)&&(o=!1)}return i+=o?`>
`:">",i};Nn.prototype.renderInline=function(n,t,e){let s="";const r=this.rules;for(let i=0,o=n.length;i<o;i++){const a=n[i].type;typeof r[a]<"u"?s+=r[a](n,i,t,e,this):s+=this.renderToken(n,i,t)}return s};Nn.prototype.renderInlineAsText=function(n,t,e){let s="";for(let r=0,i=n.length;r<i;r++)switch(n[r].type){case"text":s+=n[r].content;break;case"image":s+=this.renderInlineAsText(n[r].children,t,e);break;case"html_inline":case"html_block":s+=n[r].content;break;case"softbreak":case"hardbreak":s+=`
`;break}return s};Nn.prototype.render=function(n,t,e){let s="";const r=this.rules;for(let i=0,o=n.length;i<o;i++){const a=n[i].type;a==="inline"?s+=this.renderInline(n[i].children,t,e):typeof r[a]<"u"?s+=r[a](n,i,t,e,this):s+=this.renderToken(n,i,t,e)}return s};function Vt(){this.__rules__=[],this.__cache__=null}Vt.prototype.__find__=function(n){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===n)return t;return-1};Vt.prototype.__compile__=function(){const n=this,t=[""];n.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(s){t.indexOf(s)<0&&t.push(s)})}),n.__cache__={},t.forEach(function(e){n.__cache__[e]=[],n.__rules__.forEach(function(s){s.enabled&&(e&&s.alt.indexOf(e)<0||n.__cache__[e].push(s.fn))})})};Vt.prototype.at=function(n,t,e){const s=this.__find__(n),r=e||{};if(s===-1)throw new Error("Parser rule not found: "+n);this.__rules__[s].fn=t,this.__rules__[s].alt=r.alt||[],this.__cache__=null};Vt.prototype.before=function(n,t,e,s){const r=this.__find__(n),i=s||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(r,0,{name:t,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null};Vt.prototype.after=function(n,t,e,s){const r=this.__find__(n),i=s||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(r+1,0,{name:t,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null};Vt.prototype.push=function(n,t,e){const s=e||{};this.__rules__.push({name:n,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};Vt.prototype.enable=function(n,t){Array.isArray(n)||(n=[n]);const e=[];return n.forEach(function(s){const r=this.__find__(s);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[r].enabled=!0,e.push(s)},this),this.__cache__=null,e};Vt.prototype.enableOnly=function(n,t){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(n,t)};Vt.prototype.disable=function(n,t){Array.isArray(n)||(n=[n]);const e=[];return n.forEach(function(s){const r=this.__find__(s);if(r<0){if(t)return;throw new Error("Rules manager: invalid rule name "+s)}this.__rules__[r].enabled=!1,e.push(s)},this),this.__cache__=null,e};Vt.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function le(n,t,e){this.type=n,this.tag=t,this.attrs=null,this.map=null,this.nesting=e,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}le.prototype.attrIndex=function(t){if(!this.attrs)return-1;const e=this.attrs;for(let s=0,r=e.length;s<r;s++)if(e[s][0]===t)return s;return-1};le.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};le.prototype.attrSet=function(t,e){const s=this.attrIndex(t),r=[t,e];s<0?this.attrPush(r):this.attrs[s]=r};le.prototype.attrGet=function(t){const e=this.attrIndex(t);let s=null;return e>=0&&(s=this.attrs[e][1]),s};le.prototype.attrJoin=function(t,e){const s=this.attrIndex(t);s<0?this.attrPush([t,e]):this.attrs[s][1]=this.attrs[s][1]+" "+e};function al(n,t,e){this.src=n,this.env=e,this.tokens=[],this.inlineMode=!1,this.md=t}al.prototype.Token=le;const Hd=/\r\n?|\n/g,qd=/\0/g;function Gd(n){let t;t=n.src.replace(Hd,`
`),t=t.replace(qd,"�"),n.src=t}function Wd(n){let t;n.inlineMode?(t=new n.Token("inline","",0),t.content=n.src,t.map=[0,1],t.children=[],n.tokens.push(t)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function Vd(n){const t=n.tokens;for(let e=0,s=t.length;e<s;e++){const r=t[e];r.type==="inline"&&n.md.inline.parse(r.content,n.md,n.env,r.children)}}function Jd(n){return/^<a[>\s]/i.test(n)}function Kd(n){return/^<\/a\s*>/i.test(n)}function Zd(n){const t=n.tokens;if(n.md.options.linkify)for(let e=0,s=t.length;e<s;e++){if(t[e].type!=="inline"||!n.md.linkify.pretest(t[e].content))continue;let r=t[e].children,i=0;for(let o=r.length-1;o>=0;o--){const a=r[o];if(a.type==="link_close"){for(o--;r[o].level!==a.level&&r[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(Jd(a.content)&&i>0&&i--,Kd(a.content)&&i++),!(i>0)&&a.type==="text"&&n.md.linkify.test(a.content)){const u=a.content;let c=n.md.linkify.match(u);const l=[];let f=a.level,h=0;c.length>0&&c[0].index===0&&o>0&&r[o-1].type==="text_special"&&(c=c.slice(1));for(let d=0;d<c.length;d++){const p=c[d].url,g=n.md.normalizeLink(p);if(!n.md.validateLink(g))continue;let b=c[d].text;c[d].schema?c[d].schema==="mailto:"&&!/^mailto:/i.test(b)?b=n.md.normalizeLinkText("mailto:"+b).replace(/^mailto:/,""):b=n.md.normalizeLinkText(b):b=n.md.normalizeLinkText("http://"+b).replace(/^http:\/\//,"");const y=c[d].index;if(y>h){const v=new n.Token("text","",0);v.content=u.slice(h,y),v.level=f,l.push(v)}const m=new n.Token("link_open","a",1);m.attrs=[["href",g]],m.level=f++,m.markup="linkify",m.info="auto",l.push(m);const _=new n.Token("text","",0);_.content=b,_.level=f,l.push(_);const w=new n.Token("link_close","a",-1);w.level=--f,w.markup="linkify",w.info="auto",l.push(w),h=c[d].lastIndex}if(h<u.length){const d=new n.Token("text","",0);d.content=u.slice(h),d.level=f,l.push(d)}t[e].children=r=sl(r,o,l)}}}}const ul=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Yd=/\((c|tm|r)\)/i,Xd=/\((c|tm|r)\)/ig,Qd={c:"©",r:"®",tm:"™"};function t0(n,t){return Qd[t.toLowerCase()]}function e0(n){let t=0;for(let e=n.length-1;e>=0;e--){const s=n[e];s.type==="text"&&!t&&(s.content=s.content.replace(Xd,t0)),s.type==="link_open"&&s.info==="auto"&&t--,s.type==="link_close"&&s.info==="auto"&&t++}}function n0(n){let t=0;for(let e=n.length-1;e>=0;e--){const s=n[e];s.type==="text"&&!t&&ul.test(s.content)&&(s.content=s.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),s.type==="link_open"&&s.info==="auto"&&t--,s.type==="link_close"&&s.info==="auto"&&t++}}function r0(n){let t;if(n.md.options.typographer)for(t=n.tokens.length-1;t>=0;t--)n.tokens[t].type==="inline"&&(Yd.test(n.tokens[t].content)&&e0(n.tokens[t].children),ul.test(n.tokens[t].content)&&n0(n.tokens[t].children))}const i0=/['"]/,po=/['"]/g,go="’";function dr(n,t,e){return n.slice(0,t)+e+n.slice(t+1)}function s0(n,t){let e;const s=[];for(let r=0;r<n.length;r++){const i=n[r],o=n[r].level;for(e=s.length-1;e>=0&&!(s[e].level<=o);e--);if(s.length=e+1,i.type!=="text")continue;let a=i.content,u=0,c=a.length;t:for(;u<c;){po.lastIndex=u;const l=po.exec(a);if(!l)break;let f=!0,h=!0;u=l.index+1;const d=l[0]==="'";let p=32;if(l.index-1>=0)p=a.charCodeAt(l.index-1);else for(e=r-1;e>=0&&!(n[e].type==="softbreak"||n[e].type==="hardbreak");e--)if(n[e].content){p=n[e].content.charCodeAt(n[e].content.length-1);break}let g=32;if(u<c)g=a.charCodeAt(u);else for(e=r+1;e<n.length&&!(n[e].type==="softbreak"||n[e].type==="hardbreak");e++)if(n[e].content){g=n[e].content.charCodeAt(0);break}const b=nr(p)||er(String.fromCharCode(p)),y=nr(g)||er(String.fromCharCode(g)),m=tr(p),_=tr(g);if(_?f=!1:y&&(m||b||(f=!1)),m?h=!1:b&&(_||y||(h=!1)),g===34&&l[0]==='"'&&p>=48&&p<=57&&(h=f=!1),f&&h&&(f=b,h=y),!f&&!h){d&&(i.content=dr(i.content,l.index,go));continue}if(h)for(e=s.length-1;e>=0;e--){let w=s[e];if(s[e].level<o)break;if(w.single===d&&s[e].level===o){w=s[e];let v,A;d?(v=t.md.options.quotes[2],A=t.md.options.quotes[3]):(v=t.md.options.quotes[0],A=t.md.options.quotes[1]),i.content=dr(i.content,l.index,A),n[w.token].content=dr(n[w.token].content,w.pos,v),u+=A.length-1,w.token===r&&(u+=v.length-1),a=i.content,c=a.length,s.length=e;continue t}}f?s.push({token:r,pos:l.index,single:d,level:o}):h&&d&&(i.content=dr(i.content,l.index,go))}}}function o0(n){if(n.md.options.typographer)for(let t=n.tokens.length-1;t>=0;t--)n.tokens[t].type!=="inline"||!i0.test(n.tokens[t].content)||s0(n.tokens[t].children,n)}function a0(n){let t,e;const s=n.tokens,r=s.length;for(let i=0;i<r;i++){if(s[i].type!=="inline")continue;const o=s[i].children,a=o.length;for(t=0;t<a;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=e=0;t<a;t++)o[t].type==="text"&&t+1<a&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==e&&(o[e]=o[t]),e++);t!==e&&(o.length=e)}}const ai=[["normalize",Gd],["block",Wd],["inline",Vd],["linkify",Zd],["replacements",r0],["smartquotes",o0],["text_join",a0]];function ds(){this.ruler=new Vt;for(let n=0;n<ai.length;n++)this.ruler.push(ai[n][0],ai[n][1])}ds.prototype.process=function(n){const t=this.ruler.getRules("");for(let e=0,s=t.length;e<s;e++)t[e](n)};ds.prototype.State=al;function Te(n,t,e,s){this.src=n,this.md=t,this.env=e,this.tokens=s,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const r=this.src;for(let i=0,o=0,a=0,u=0,c=r.length,l=!1;o<c;o++){const f=r.charCodeAt(o);if(!l)if(Ct(f)){a++,f===9?u+=4-u%4:u++;continue}else l=!0;(f===10||o===c-1)&&(f!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(u),this.bsCount.push(0),l=!1,a=0,u=0,i=o+1)}this.bMarks.push(r.length),this.eMarks.push(r.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Te.prototype.push=function(n,t,e){const s=new le(n,t,e);return s.block=!0,e<0&&this.level--,s.level=this.level,e>0&&this.level++,this.tokens.push(s),s};Te.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Te.prototype.skipEmptyLines=function(t){for(let e=this.lineMax;t<e&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Te.prototype.skipSpaces=function(t){for(let e=this.src.length;t<e;t++){const s=this.src.charCodeAt(t);if(!Ct(s))break}return t};Te.prototype.skipSpacesBack=function(t,e){if(t<=e)return t;for(;t>e;)if(!Ct(this.src.charCodeAt(--t)))return t+1;return t};Te.prototype.skipChars=function(t,e){for(let s=this.src.length;t<s&&this.src.charCodeAt(t)===e;t++);return t};Te.prototype.skipCharsBack=function(t,e,s){if(t<=s)return t;for(;t>s;)if(e!==this.src.charCodeAt(--t))return t+1;return t};Te.prototype.getLines=function(t,e,s,r){if(t>=e)return"";const i=new Array(e-t);for(let o=0,a=t;a<e;a++,o++){let u=0;const c=this.bMarks[a];let l=c,f;for(a+1<e||r?f=this.eMarks[a]+1:f=this.eMarks[a];l<f&&u<s;){const h=this.src.charCodeAt(l);if(Ct(h))h===9?u+=4-(u+this.bsCount[a])%4:u++;else if(l-c<this.tShift[a])u++;else break;l++}u>s?i[o]=new Array(u-s+1).join(" ")+this.src.slice(l,f):i[o]=this.src.slice(l,f)}return i.join("")};Te.prototype.Token=le;const u0=65536;function ui(n,t){const e=n.bMarks[t]+n.tShift[t],s=n.eMarks[t];return n.src.slice(e,s)}function mo(n){const t=[],e=n.length;let s=0,r=n.charCodeAt(s),i=!1,o=0,a="";for(;s<e;)r===124&&(i?(a+=n.substring(o,s-1),o=s):(t.push(a+n.substring(o,s)),a="",o=s+1)),i=r===92,s++,r=n.charCodeAt(s);return t.push(a+n.substring(o)),t}function c0(n,t,e,s){if(t+2>e)return!1;let r=t+1;if(n.sCount[r]<n.blkIndent||n.sCount[r]-n.blkIndent>=4)return!1;let i=n.bMarks[r]+n.tShift[r];if(i>=n.eMarks[r])return!1;const o=n.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=n.eMarks[r])return!1;const a=n.src.charCodeAt(i++);if(a!==124&&a!==45&&a!==58&&!Ct(a)||o===45&&Ct(a))return!1;for(;i<n.eMarks[r];){const w=n.src.charCodeAt(i);if(w!==124&&w!==45&&w!==58&&!Ct(w))return!1;i++}let u=ui(n,t+1),c=u.split("|");const l=[];for(let w=0;w<c.length;w++){const v=c[w].trim();if(!v){if(w===0||w===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;v.charCodeAt(v.length-1)===58?l.push(v.charCodeAt(0)===58?"center":"right"):v.charCodeAt(0)===58?l.push("left"):l.push("")}if(u=ui(n,t).trim(),u.indexOf("|")===-1||n.sCount[t]-n.blkIndent>=4)return!1;c=mo(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const f=c.length;if(f===0||f!==l.length)return!1;if(s)return!0;const h=n.parentType;n.parentType="table";const d=n.md.block.ruler.getRules("blockquote"),p=n.push("table_open","table",1),g=[t,0];p.map=g;const b=n.push("thead_open","thead",1);b.map=[t,t+1];const y=n.push("tr_open","tr",1);y.map=[t,t+1];for(let w=0;w<c.length;w++){const v=n.push("th_open","th",1);l[w]&&(v.attrs=[["style","text-align:"+l[w]]]);const A=n.push("inline","",0);A.content=c[w].trim(),A.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let m,_=0;for(r=t+2;r<e&&!(n.sCount[r]<n.blkIndent);r++){let w=!1;for(let A=0,E=d.length;A<E;A++)if(d[A](n,r,e,!0)){w=!0;break}if(w||(u=ui(n,r).trim(),!u)||n.sCount[r]-n.blkIndent>=4||(c=mo(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),_+=f-c.length,_>u0))break;if(r===t+2){const A=n.push("tbody_open","tbody",1);A.map=m=[t+2,0]}const v=n.push("tr_open","tr",1);v.map=[r,r+1];for(let A=0;A<f;A++){const E=n.push("td_open","td",1);l[A]&&(E.attrs=[["style","text-align:"+l[A]]]);const P=n.push("inline","",0);P.content=c[A]?c[A].trim():"",P.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return m&&(n.push("tbody_close","tbody",-1),m[1]=r),n.push("table_close","table",-1),g[1]=r,n.parentType=h,n.line=r,!0}function l0(n,t,e){if(n.sCount[t]-n.blkIndent<4)return!1;let s=t+1,r=s;for(;s<e;){if(n.isEmpty(s)){s++;continue}if(n.sCount[s]-n.blkIndent>=4){s++,r=s;continue}break}n.line=r;const i=n.push("code_block","code",0);return i.content=n.getLines(t,r,4+n.blkIndent,!1)+`
`,i.map=[t,n.line],!0}function f0(n,t,e,s){let r=n.bMarks[t]+n.tShift[t],i=n.eMarks[t];if(n.sCount[t]-n.blkIndent>=4||r+3>i)return!1;const o=n.src.charCodeAt(r);if(o!==126&&o!==96)return!1;let a=r;r=n.skipChars(r,o);let u=r-a;if(u<3)return!1;const c=n.src.slice(a,r),l=n.src.slice(r,i);if(o===96&&l.indexOf(String.fromCharCode(o))>=0)return!1;if(s)return!0;let f=t,h=!1;for(;f++,!(f>=e||(r=a=n.bMarks[f]+n.tShift[f],i=n.eMarks[f],r<i&&n.sCount[f]<n.blkIndent));)if(n.src.charCodeAt(r)===o&&!(n.sCount[f]-n.blkIndent>=4)&&(r=n.skipChars(r,o),!(r-a<u)&&(r=n.skipSpaces(r),!(r<i)))){h=!0;break}u=n.sCount[t],n.line=f+(h?1:0);const d=n.push("fence","code",0);return d.info=l,d.content=n.getLines(t+1,f,u,!0),d.markup=c,d.map=[t,n.line],!0}function h0(n,t,e,s){let r=n.bMarks[t]+n.tShift[t],i=n.eMarks[t];const o=n.lineMax;if(n.sCount[t]-n.blkIndent>=4||n.src.charCodeAt(r)!==62)return!1;if(s)return!0;const a=[],u=[],c=[],l=[],f=n.md.block.ruler.getRules("blockquote"),h=n.parentType;n.parentType="blockquote";let d=!1,p;for(p=t;p<e;p++){const _=n.sCount[p]<n.blkIndent;if(r=n.bMarks[p]+n.tShift[p],i=n.eMarks[p],r>=i)break;if(n.src.charCodeAt(r++)===62&&!_){let v=n.sCount[p]+1,A,E;n.src.charCodeAt(r)===32?(r++,v++,E=!1,A=!0):n.src.charCodeAt(r)===9?(A=!0,(n.bsCount[p]+v)%4===3?(r++,v++,E=!1):E=!0):A=!1;let P=v;for(a.push(n.bMarks[p]),n.bMarks[p]=r;r<i;){const T=n.src.charCodeAt(r);if(Ct(T))T===9?P+=4-(P+n.bsCount[p]+(E?1:0))%4:P++;else break;r++}d=r>=i,u.push(n.bsCount[p]),n.bsCount[p]=n.sCount[p]+1+(A?1:0),c.push(n.sCount[p]),n.sCount[p]=P-v,l.push(n.tShift[p]),n.tShift[p]=r-n.bMarks[p];continue}if(d)break;let w=!1;for(let v=0,A=f.length;v<A;v++)if(f[v](n,p,e,!0)){w=!0;break}if(w){n.lineMax=p,n.blkIndent!==0&&(a.push(n.bMarks[p]),u.push(n.bsCount[p]),l.push(n.tShift[p]),c.push(n.sCount[p]),n.sCount[p]-=n.blkIndent);break}a.push(n.bMarks[p]),u.push(n.bsCount[p]),l.push(n.tShift[p]),c.push(n.sCount[p]),n.sCount[p]=-1}const g=n.blkIndent;n.blkIndent=0;const b=n.push("blockquote_open","blockquote",1);b.markup=">";const y=[t,0];b.map=y,n.md.block.tokenize(n,t,p);const m=n.push("blockquote_close","blockquote",-1);m.markup=">",n.lineMax=o,n.parentType=h,y[1]=n.line;for(let _=0;_<l.length;_++)n.bMarks[_+t]=a[_],n.tShift[_+t]=l[_],n.sCount[_+t]=c[_],n.bsCount[_+t]=u[_];return n.blkIndent=g,!0}function d0(n,t,e,s){const r=n.eMarks[t];if(n.sCount[t]-n.blkIndent>=4)return!1;let i=n.bMarks[t]+n.tShift[t];const o=n.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;i<r;){const c=n.src.charCodeAt(i++);if(c!==o&&!Ct(c))return!1;c===o&&a++}if(a<3)return!1;if(s)return!0;n.line=t+1;const u=n.push("hr","hr",0);return u.map=[t,n.line],u.markup=Array(a+1).join(String.fromCharCode(o)),!0}function bo(n,t){const e=n.eMarks[t];let s=n.bMarks[t]+n.tShift[t];const r=n.src.charCodeAt(s++);if(r!==42&&r!==45&&r!==43)return-1;if(s<e){const i=n.src.charCodeAt(s);if(!Ct(i))return-1}return s}function _o(n,t){const e=n.bMarks[t]+n.tShift[t],s=n.eMarks[t];let r=e;if(r+1>=s)return-1;let i=n.src.charCodeAt(r++);if(i<48||i>57)return-1;for(;;){if(r>=s)return-1;if(i=n.src.charCodeAt(r++),i>=48&&i<=57){if(r-e>=10)return-1;continue}if(i===41||i===46)break;return-1}return r<s&&(i=n.src.charCodeAt(r),!Ct(i))?-1:r}function p0(n,t){const e=n.level+2;for(let s=t+2,r=n.tokens.length-2;s<r;s++)n.tokens[s].level===e&&n.tokens[s].type==="paragraph_open"&&(n.tokens[s+2].hidden=!0,n.tokens[s].hidden=!0,s+=2)}function g0(n,t,e,s){let r,i,o,a,u=t,c=!0;if(n.sCount[u]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[u]-n.listIndent>=4&&n.sCount[u]<n.blkIndent)return!1;let l=!1;s&&n.parentType==="paragraph"&&n.sCount[u]>=n.blkIndent&&(l=!0);let f,h,d;if((d=_o(n,u))>=0){if(f=!0,o=n.bMarks[u]+n.tShift[u],h=Number(n.src.slice(o,d-1)),l&&h!==1)return!1}else if((d=bo(n,u))>=0)f=!1;else return!1;if(l&&n.skipSpaces(d)>=n.eMarks[u])return!1;if(s)return!0;const p=n.src.charCodeAt(d-1),g=n.tokens.length;f?(a=n.push("ordered_list_open","ol",1),h!==1&&(a.attrs=[["start",h]])):a=n.push("bullet_list_open","ul",1);const b=[u,0];a.map=b,a.markup=String.fromCharCode(p);let y=!1;const m=n.md.block.ruler.getRules("list"),_=n.parentType;for(n.parentType="list";u<e;){i=d,r=n.eMarks[u];const w=n.sCount[u]+d-(n.bMarks[u]+n.tShift[u]);let v=w;for(;i<r;){const j=n.src.charCodeAt(i);if(j===9)v+=4-(v+n.bsCount[u])%4;else if(j===32)v++;else break;i++}const A=i;let E;A>=r?E=1:E=v-w,E>4&&(E=1);const P=w+E;a=n.push("list_item_open","li",1),a.markup=String.fromCharCode(p);const T=[u,0];a.map=T,f&&(a.info=n.src.slice(o,d-1));const I=n.tight,F=n.tShift[u],k=n.sCount[u],S=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=P,n.tight=!0,n.tShift[u]=A-n.bMarks[u],n.sCount[u]=v,A>=r&&n.isEmpty(u+1)?n.line=Math.min(n.line+2,e):n.md.block.tokenize(n,u,e,!0),(!n.tight||y)&&(c=!1),y=n.line-u>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=S,n.tShift[u]=F,n.sCount[u]=k,n.tight=I,a=n.push("list_item_close","li",-1),a.markup=String.fromCharCode(p),u=n.line,T[1]=u,u>=e||n.sCount[u]<n.blkIndent||n.sCount[u]-n.blkIndent>=4)break;let x=!1;for(let j=0,D=m.length;j<D;j++)if(m[j](n,u,e,!0)){x=!0;break}if(x)break;if(f){if(d=_o(n,u),d<0)break;o=n.bMarks[u]+n.tShift[u]}else if(d=bo(n,u),d<0)break;if(p!==n.src.charCodeAt(d-1))break}return f?a=n.push("ordered_list_close","ol",-1):a=n.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(p),b[1]=u,n.line=u,n.parentType=_,c&&p0(n,g),!0}function m0(n,t,e,s){let r=n.bMarks[t]+n.tShift[t],i=n.eMarks[t],o=t+1;if(n.sCount[t]-n.blkIndent>=4||n.src.charCodeAt(r)!==91)return!1;function a(m){const _=n.lineMax;if(m>=_||n.isEmpty(m))return null;let w=!1;if(n.sCount[m]-n.blkIndent>3&&(w=!0),n.sCount[m]<0&&(w=!0),!w){const E=n.md.block.ruler.getRules("reference"),P=n.parentType;n.parentType="reference";let T=!1;for(let I=0,F=E.length;I<F;I++)if(E[I](n,m,_,!0)){T=!0;break}if(n.parentType=P,T)return null}const v=n.bMarks[m]+n.tShift[m],A=n.eMarks[m];return n.src.slice(v,A+1)}let u=n.src.slice(r,i+1);i=u.length;let c=-1;for(r=1;r<i;r++){const m=u.charCodeAt(r);if(m===91)return!1;if(m===93){c=r;break}else if(m===10){const _=a(o);_!==null&&(u+=_,i=u.length,o++)}else if(m===92&&(r++,r<i&&u.charCodeAt(r)===10)){const _=a(o);_!==null&&(u+=_,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(r=c+2;r<i;r++){const m=u.charCodeAt(r);if(m===10){const _=a(o);_!==null&&(u+=_,i=u.length,o++)}else if(!Ct(m))break}const l=n.md.helpers.parseLinkDestination(u,r,i);if(!l.ok)return!1;const f=n.md.normalizeLink(l.str);if(!n.md.validateLink(f))return!1;r=l.pos;const h=r,d=o,p=r;for(;r<i;r++){const m=u.charCodeAt(r);if(m===10){const _=a(o);_!==null&&(u+=_,i=u.length,o++)}else if(!Ct(m))break}let g=n.md.helpers.parseLinkTitle(u,r,i);for(;g.can_continue;){const m=a(o);if(m===null)break;u+=m,r=i,i=u.length,o++,g=n.md.helpers.parseLinkTitle(u,r,i,g)}let b;for(r<i&&p!==r&&g.ok?(b=g.str,r=g.pos):(b="",r=h,o=d);r<i;){const m=u.charCodeAt(r);if(!Ct(m))break;r++}if(r<i&&u.charCodeAt(r)!==10&&b)for(b="",r=h,o=d;r<i;){const m=u.charCodeAt(r);if(!Ct(m))break;r++}if(r<i&&u.charCodeAt(r)!==10)return!1;const y=zr(u.slice(1,c));return y?(s||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[y]>"u"&&(n.env.references[y]={title:b,href:f}),n.line=o),!0):!1}const b0=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_0="[a-zA-Z_:][a-zA-Z0-9:._-]*",y0="[^\"'=<>`\\x00-\\x20]+",w0="'[^']*'",v0='"[^"]*"',x0="(?:"+y0+"|"+w0+"|"+v0+")",k0="(?:\\s+"+_0+"(?:\\s*=\\s*"+x0+")?)",cl="<[A-Za-z][A-Za-z0-9\\-]*"+k0+"*\\s*\\/?>",ll="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",S0="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",A0="<[?][\\s\\S]*?[?]>",E0="<![A-Za-z][^>]*>",C0="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",T0=new RegExp("^(?:"+cl+"|"+ll+"|"+S0+"|"+A0+"|"+E0+"|"+C0+")"),D0=new RegExp("^(?:"+cl+"|"+ll+")"),wn=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+b0.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(D0.source+"\\s*$"),/^$/,!1]];function O0(n,t,e,s){let r=n.bMarks[t]+n.tShift[t],i=n.eMarks[t];if(n.sCount[t]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(r)!==60)return!1;let o=n.src.slice(r,i),a=0;for(;a<wn.length&&!wn[a][0].test(o);a++);if(a===wn.length)return!1;if(s)return wn[a][2];let u=t+1;if(!wn[a][1].test(o)){for(;u<e&&!(n.sCount[u]<n.blkIndent);u++)if(r=n.bMarks[u]+n.tShift[u],i=n.eMarks[u],o=n.src.slice(r,i),wn[a][1].test(o)){o.length!==0&&u++;break}}n.line=u;const c=n.push("html_block","",0);return c.map=[t,u],c.content=n.getLines(t,u,n.blkIndent,!0),!0}function P0(n,t,e,s){let r=n.bMarks[t]+n.tShift[t],i=n.eMarks[t];if(n.sCount[t]-n.blkIndent>=4)return!1;let o=n.src.charCodeAt(r);if(o!==35||r>=i)return!1;let a=1;for(o=n.src.charCodeAt(++r);o===35&&r<i&&a<=6;)a++,o=n.src.charCodeAt(++r);if(a>6||r<i&&!Ct(o))return!1;if(s)return!0;i=n.skipSpacesBack(i,r);const u=n.skipCharsBack(i,35,r);u>r&&Ct(n.src.charCodeAt(u-1))&&(i=u),n.line=t+1;const c=n.push("heading_open","h"+String(a),1);c.markup="########".slice(0,a),c.map=[t,n.line];const l=n.push("inline","",0);l.content=n.src.slice(r,i).trim(),l.map=[t,n.line],l.children=[];const f=n.push("heading_close","h"+String(a),-1);return f.markup="########".slice(0,a),!0}function I0(n,t,e){const s=n.md.block.ruler.getRules("paragraph");if(n.sCount[t]-n.blkIndent>=4)return!1;const r=n.parentType;n.parentType="paragraph";let i=0,o,a=t+1;for(;a<e&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3)continue;if(n.sCount[a]>=n.blkIndent){let d=n.bMarks[a]+n.tShift[a];const p=n.eMarks[a];if(d<p&&(o=n.src.charCodeAt(d),(o===45||o===61)&&(d=n.skipChars(d,o),d=n.skipSpaces(d),d>=p))){i=o===61?1:2;break}}if(n.sCount[a]<0)continue;let h=!1;for(let d=0,p=s.length;d<p;d++)if(s[d](n,a,e,!0)){h=!0;break}if(h)break}if(!i)return!1;const u=n.getLines(t,a,n.blkIndent,!1).trim();n.line=a+1;const c=n.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,n.line];const l=n.push("inline","",0);l.content=u,l.map=[t,n.line-1],l.children=[];const f=n.push("heading_close","h"+String(i),-1);return f.markup=String.fromCharCode(o),n.parentType=r,!0}function j0(n,t,e){const s=n.md.block.ruler.getRules("paragraph"),r=n.parentType;let i=t+1;for(n.parentType="paragraph";i<e&&!n.isEmpty(i);i++){if(n.sCount[i]-n.blkIndent>3||n.sCount[i]<0)continue;let c=!1;for(let l=0,f=s.length;l<f;l++)if(s[l](n,i,e,!0)){c=!0;break}if(c)break}const o=n.getLines(t,i,n.blkIndent,!1).trim();n.line=i;const a=n.push("paragraph_open","p",1);a.map=[t,n.line];const u=n.push("inline","",0);return u.content=o,u.map=[t,n.line],u.children=[],n.push("paragraph_close","p",-1),n.parentType=r,!0}const pr=[["table",c0,["paragraph","reference"]],["code",l0],["fence",f0,["paragraph","reference","blockquote","list"]],["blockquote",h0,["paragraph","reference","blockquote","list"]],["hr",d0,["paragraph","reference","blockquote","list"]],["list",g0,["paragraph","reference","blockquote"]],["reference",m0],["html_block",O0,["paragraph","reference","blockquote"]],["heading",P0,["paragraph","reference","blockquote"]],["lheading",I0],["paragraph",j0]];function Hr(){this.ruler=new Vt;for(let n=0;n<pr.length;n++)this.ruler.push(pr[n][0],pr[n][1],{alt:(pr[n][2]||[]).slice()})}Hr.prototype.tokenize=function(n,t,e){const s=this.ruler.getRules(""),r=s.length,i=n.md.options.maxNesting;let o=t,a=!1;for(;o<e&&(n.line=o=n.skipEmptyLines(o),!(o>=e||n.sCount[o]<n.blkIndent));){if(n.level>=i){n.line=e;break}const u=n.line;let c=!1;for(let l=0;l<r;l++)if(c=s[l](n,o,e,!1),c){if(u>=n.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");n.tight=!a,n.isEmpty(n.line-1)&&(a=!0),o=n.line,o<e&&n.isEmpty(o)&&(a=!0,o++,n.line=o)}};Hr.prototype.parse=function(n,t,e,s){if(!n)return;const r=new this.State(n,t,e,s);this.tokenize(r,r.line,r.lineMax)};Hr.prototype.State=Te;function ar(n,t,e,s){this.src=n,this.env=e,this.md=t,this.tokens=s,this.tokens_meta=Array(s.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ar.prototype.pushPending=function(){const n=new le("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};ar.prototype.push=function(n,t,e){this.pending&&this.pushPending();const s=new le(n,t,e);let r=null;return e<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),s.level=this.level,e>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(s),this.tokens_meta.push(r),s};ar.prototype.scanDelims=function(n,t){const e=this.posMax,s=this.src.charCodeAt(n),r=n>0?this.src.charCodeAt(n-1):32;let i=n;for(;i<e&&this.src.charCodeAt(i)===s;)i++;const o=i-n,a=i<e?this.src.charCodeAt(i):32,u=nr(r)||er(String.fromCharCode(r)),c=nr(a)||er(String.fromCharCode(a)),l=tr(r),f=tr(a),h=!f&&(!c||l||u),d=!l&&(!u||f||c);return{can_open:h&&(t||!d||u),can_close:d&&(t||!h||c),length:o}};ar.prototype.Token=le;function R0(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function F0(n,t){let e=n.pos;for(;e<n.posMax&&!R0(n.src.charCodeAt(e));)e++;return e===n.pos?!1:(t||(n.pending+=n.src.slice(n.pos,e)),n.pos=e,!0)}const L0=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function N0(n,t){if(!n.md.options.linkify||n.linkLevel>0)return!1;const e=n.pos,s=n.posMax;if(e+3>s||n.src.charCodeAt(e)!==58||n.src.charCodeAt(e+1)!==47||n.src.charCodeAt(e+2)!==47)return!1;const r=n.pending.match(L0);if(!r)return!1;const i=r[1],o=n.md.linkify.matchAtStart(n.src.slice(e-i.length));if(!o)return!1;let a=o.url;if(a.length<=i.length)return!1;a=a.replace(/\*+$/,"");const u=n.md.normalizeLink(a);if(!n.md.validateLink(u))return!1;if(!t){n.pending=n.pending.slice(0,-i.length);const c=n.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const l=n.push("text","",0);l.content=n.md.normalizeLinkText(a);const f=n.push("link_close","a",-1);f.markup="linkify",f.info="auto"}return n.pos+=a.length-i.length,!0}function B0(n,t){let e=n.pos;if(n.src.charCodeAt(e)!==10)return!1;const s=n.pending.length-1,r=n.posMax;if(!t)if(s>=0&&n.pending.charCodeAt(s)===32)if(s>=1&&n.pending.charCodeAt(s-1)===32){let i=s-1;for(;i>=1&&n.pending.charCodeAt(i-1)===32;)i--;n.pending=n.pending.slice(0,i),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(e++;e<r&&Ct(n.src.charCodeAt(e));)e++;return n.pos=e,!0}const ps=[];for(let n=0;n<256;n++)ps.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){ps[n.charCodeAt(0)]=1});function $0(n,t){let e=n.pos;const s=n.posMax;if(n.src.charCodeAt(e)!==92||(e++,e>=s))return!1;let r=n.src.charCodeAt(e);if(r===10){for(t||n.push("hardbreak","br",0),e++;e<s&&(r=n.src.charCodeAt(e),!!Ct(r));)e++;return n.pos=e,!0}let i=n.src[e];if(r>=55296&&r<=56319&&e+1<s){const a=n.src.charCodeAt(e+1);a>=56320&&a<=57343&&(i+=n.src[e+1],e++)}const o="\\"+i;if(!t){const a=n.push("text_special","",0);r<256&&ps[r]!==0?a.content=i:a.content=o,a.markup=o,a.info="escape"}return n.pos=e+1,!0}function M0(n,t){let e=n.pos;if(n.src.charCodeAt(e)!==96)return!1;const r=e;e++;const i=n.posMax;for(;e<i&&n.src.charCodeAt(e)===96;)e++;const o=n.src.slice(r,e),a=o.length;if(n.backticksScanned&&(n.backticks[a]||0)<=r)return t||(n.pending+=o),n.pos+=a,!0;let u=e,c;for(;(c=n.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&n.src.charCodeAt(u)===96;)u++;const l=u-c;if(l===a){if(!t){const f=n.push("code_inline","code",0);f.markup=o,f.content=n.src.slice(e,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=u,!0}n.backticks[l]=c}return n.backticksScanned=!0,t||(n.pending+=o),n.pos+=a,!0}function U0(n,t){const e=n.pos,s=n.src.charCodeAt(e);if(t||s!==126)return!1;const r=n.scanDelims(n.pos,!0);let i=r.length;const o=String.fromCharCode(s);if(i<2)return!1;let a;i%2&&(a=n.push("text","",0),a.content=o,i--);for(let u=0;u<i;u+=2)a=n.push("text","",0),a.content=o+o,n.delimiters.push({marker:s,length:0,token:n.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return n.pos+=r.length,!0}function yo(n,t){let e;const s=[],r=t.length;for(let i=0;i<r;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const a=t[o.end];e=n.tokens[o.token],e.type="s_open",e.tag="s",e.nesting=1,e.markup="~~",e.content="",e=n.tokens[a.token],e.type="s_close",e.tag="s",e.nesting=-1,e.markup="~~",e.content="",n.tokens[a.token-1].type==="text"&&n.tokens[a.token-1].content==="~"&&s.push(a.token-1)}for(;s.length;){const i=s.pop();let o=i+1;for(;o<n.tokens.length&&n.tokens[o].type==="s_close";)o++;o--,i!==o&&(e=n.tokens[o],n.tokens[o]=n.tokens[i],n.tokens[i]=e)}}function z0(n){const t=n.tokens_meta,e=n.tokens_meta.length;yo(n,n.delimiters);for(let s=0;s<e;s++)t[s]&&t[s].delimiters&&yo(n,t[s].delimiters)}const fl={tokenize:U0,postProcess:z0};function H0(n,t){const e=n.pos,s=n.src.charCodeAt(e);if(t||s!==95&&s!==42)return!1;const r=n.scanDelims(n.pos,s===42);for(let i=0;i<r.length;i++){const o=n.push("text","",0);o.content=String.fromCharCode(s),n.delimiters.push({marker:s,length:r.length,token:n.tokens.length-1,end:-1,open:r.can_open,close:r.can_close})}return n.pos+=r.length,!0}function wo(n,t){const e=t.length;for(let s=e-1;s>=0;s--){const r=t[s];if(r.marker!==95&&r.marker!==42||r.end===-1)continue;const i=t[r.end],o=s>0&&t[s-1].end===r.end+1&&t[s-1].marker===r.marker&&t[s-1].token===r.token-1&&t[r.end+1].token===i.token+1,a=String.fromCharCode(r.marker),u=n.tokens[r.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?a+a:a,u.content="";const c=n.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?a+a:a,c.content="",o&&(n.tokens[t[s-1].token].content="",n.tokens[t[r.end+1].token].content="",s--)}}function q0(n){const t=n.tokens_meta,e=n.tokens_meta.length;wo(n,n.delimiters);for(let s=0;s<e;s++)t[s]&&t[s].delimiters&&wo(n,t[s].delimiters)}const hl={tokenize:H0,postProcess:q0};function G0(n,t){let e,s,r,i,o="",a="",u=n.pos,c=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const l=n.pos,f=n.posMax,h=n.pos+1,d=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(d<0)return!1;let p=d+1;if(p<f&&n.src.charCodeAt(p)===40){for(c=!1,p++;p<f&&(e=n.src.charCodeAt(p),!(!Ct(e)&&e!==10));p++);if(p>=f)return!1;if(u=p,r=n.md.helpers.parseLinkDestination(n.src,p,n.posMax),r.ok){for(o=n.md.normalizeLink(r.str),n.md.validateLink(o)?p=r.pos:o="",u=p;p<f&&(e=n.src.charCodeAt(p),!(!Ct(e)&&e!==10));p++);if(r=n.md.helpers.parseLinkTitle(n.src,p,n.posMax),p<f&&u!==p&&r.ok)for(a=r.str,p=r.pos;p<f&&(e=n.src.charCodeAt(p),!(!Ct(e)&&e!==10));p++);}(p>=f||n.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof n.env.references>"u")return!1;if(p<f&&n.src.charCodeAt(p)===91?(u=p+1,p=n.md.helpers.parseLinkLabel(n,p),p>=0?s=n.src.slice(u,p++):p=d+1):p=d+1,s||(s=n.src.slice(h,d)),i=n.env.references[zr(s)],!i)return n.pos=l,!1;o=i.href,a=i.title}if(!t){n.pos=h,n.posMax=d;const g=n.push("link_open","a",1),b=[["href",o]];g.attrs=b,a&&b.push(["title",a]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=p,n.posMax=f,!0}function W0(n,t){let e,s,r,i,o,a,u,c,l="";const f=n.pos,h=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const d=n.pos+2,p=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(p<0)return!1;if(i=p+1,i<h&&n.src.charCodeAt(i)===40){for(i++;i<h&&(e=n.src.charCodeAt(i),!(!Ct(e)&&e!==10));i++);if(i>=h)return!1;for(c=i,a=n.md.helpers.parseLinkDestination(n.src,i,n.posMax),a.ok&&(l=n.md.normalizeLink(a.str),n.md.validateLink(l)?i=a.pos:l=""),c=i;i<h&&(e=n.src.charCodeAt(i),!(!Ct(e)&&e!==10));i++);if(a=n.md.helpers.parseLinkTitle(n.src,i,n.posMax),i<h&&c!==i&&a.ok)for(u=a.str,i=a.pos;i<h&&(e=n.src.charCodeAt(i),!(!Ct(e)&&e!==10));i++);else u="";if(i>=h||n.src.charCodeAt(i)!==41)return n.pos=f,!1;i++}else{if(typeof n.env.references>"u")return!1;if(i<h&&n.src.charCodeAt(i)===91?(c=i+1,i=n.md.helpers.parseLinkLabel(n,i),i>=0?r=n.src.slice(c,i++):i=p+1):i=p+1,r||(r=n.src.slice(d,p)),o=n.env.references[zr(r)],!o)return n.pos=f,!1;l=o.href,u=o.title}if(!t){s=n.src.slice(d,p);const g=[];n.md.inline.parse(s,n.md,n.env,g);const b=n.push("image","img",0),y=[["src",l],["alt",""]];b.attrs=y,b.children=g,b.content=s,u&&y.push(["title",u])}return n.pos=i,n.posMax=h,!0}const V0=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,J0=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function K0(n,t){let e=n.pos;if(n.src.charCodeAt(e)!==60)return!1;const s=n.pos,r=n.posMax;for(;;){if(++e>=r)return!1;const o=n.src.charCodeAt(e);if(o===60)return!1;if(o===62)break}const i=n.src.slice(s+1,e);if(J0.test(i)){const o=n.md.normalizeLink(i);if(!n.md.validateLink(o))return!1;if(!t){const a=n.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(i);const c=n.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return n.pos+=i.length+2,!0}if(V0.test(i)){const o=n.md.normalizeLink("mailto:"+i);if(!n.md.validateLink(o))return!1;if(!t){const a=n.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const u=n.push("text","",0);u.content=n.md.normalizeLinkText(i);const c=n.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return n.pos+=i.length+2,!0}return!1}function Z0(n){return/^<a[>\s]/i.test(n)}function Y0(n){return/^<\/a\s*>/i.test(n)}function X0(n){const t=n|32;return t>=97&&t<=122}function Q0(n,t){if(!n.md.options.html)return!1;const e=n.posMax,s=n.pos;if(n.src.charCodeAt(s)!==60||s+2>=e)return!1;const r=n.src.charCodeAt(s+1);if(r!==33&&r!==63&&r!==47&&!X0(r))return!1;const i=n.src.slice(s).match(T0);if(!i)return!1;if(!t){const o=n.push("html_inline","",0);o.content=i[0],Z0(o.content)&&n.linkLevel++,Y0(o.content)&&n.linkLevel--}return n.pos+=i[0].length,!0}const tp=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,ep=/^&([a-z][a-z0-9]{1,31});/i;function np(n,t){const e=n.pos,s=n.posMax;if(n.src.charCodeAt(e)!==38||e+1>=s)return!1;if(n.src.charCodeAt(e+1)===35){const i=n.src.slice(e).match(tp);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),a=n.push("text_special","",0);a.content=hs(o)?jr(o):jr(65533),a.markup=i[0],a.info="entity"}return n.pos+=i[0].length,!0}}else{const i=n.src.slice(e).match(ep);if(i){const o=il(i[0]);if(o!==i[0]){if(!t){const a=n.push("text_special","",0);a.content=o,a.markup=i[0],a.info="entity"}return n.pos+=i[0].length,!0}}}return!1}function vo(n){const t={},e=n.length;if(!e)return;let s=0,r=-2;const i=[];for(let o=0;o<e;o++){const a=n[o];if(i.push(0),(n[s].marker!==a.marker||r!==a.token-1)&&(s=o),r=a.token,a.length=a.length||0,!a.close)continue;t.hasOwnProperty(a.marker)||(t[a.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[a.marker][(a.open?3:0)+a.length%3];let c=s-i[s]-1,l=c;for(;c>u;c-=i[c]+1){const f=n[c];if(f.marker===a.marker&&f.open&&f.end<0){let h=!1;if((f.close||a.open)&&(f.length+a.length)%3===0&&(f.length%3!==0||a.length%3!==0)&&(h=!0),!h){const d=c>0&&!n[c-1].open?i[c-1]+1:0;i[o]=o-c+d,i[c]=d,a.open=!1,f.end=o,f.close=!1,l=-1,r=-2;break}}}l!==-1&&(t[a.marker][(a.open?3:0)+(a.length||0)%3]=l)}}function rp(n){const t=n.tokens_meta,e=n.tokens_meta.length;vo(n.delimiters);for(let s=0;s<e;s++)t[s]&&t[s].delimiters&&vo(t[s].delimiters)}function ip(n){let t,e,s=0;const r=n.tokens,i=n.tokens.length;for(t=e=0;t<i;t++)r[t].nesting<0&&s--,r[t].level=s,r[t].nesting>0&&s++,r[t].type==="text"&&t+1<i&&r[t+1].type==="text"?r[t+1].content=r[t].content+r[t+1].content:(t!==e&&(r[e]=r[t]),e++);t!==e&&(r.length=e)}const ci=[["text",F0],["linkify",N0],["newline",B0],["escape",$0],["backticks",M0],["strikethrough",fl.tokenize],["emphasis",hl.tokenize],["link",G0],["image",W0],["autolink",K0],["html_inline",Q0],["entity",np]],li=[["balance_pairs",rp],["strikethrough",fl.postProcess],["emphasis",hl.postProcess],["fragments_join",ip]];function ur(){this.ruler=new Vt;for(let n=0;n<ci.length;n++)this.ruler.push(ci[n][0],ci[n][1]);this.ruler2=new Vt;for(let n=0;n<li.length;n++)this.ruler2.push(li[n][0],li[n][1])}ur.prototype.skipToken=function(n){const t=n.pos,e=this.ruler.getRules(""),s=e.length,r=n.md.options.maxNesting,i=n.cache;if(typeof i[t]<"u"){n.pos=i[t];return}let o=!1;if(n.level<r){for(let a=0;a<s;a++)if(n.level++,o=e[a](n,!0),n.level--,o){if(t>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;o||n.pos++,i[t]=n.pos};ur.prototype.tokenize=function(n){const t=this.ruler.getRules(""),e=t.length,s=n.posMax,r=n.md.options.maxNesting;for(;n.pos<s;){const i=n.pos;let o=!1;if(n.level<r){for(let a=0;a<e;a++)if(o=t[a](n,!1),o){if(i>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(n.pos>=s)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};ur.prototype.parse=function(n,t,e,s){const r=new this.State(n,t,e,s);this.tokenize(r);const i=this.ruler2.getRules(""),o=i.length;for(let a=0;a<o;a++)i[a](r)};ur.prototype.State=ar;function sp(n){const t={};n=n||{},t.src_Any=Qc.source,t.src_Cc=tl.source,t.src_Z=nl.source,t.src_P=ls.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const e="[><｜]";return t.src_pseudo_letter="(?:(?!"+e+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+e+"|"+t.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+e+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+e+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Ui(n){return Array.prototype.slice.call(arguments,1).forEach(function(e){e&&Object.keys(e).forEach(function(s){n[s]=e[s]})}),n}function qr(n){return Object.prototype.toString.call(n)}function op(n){return qr(n)==="[object String]"}function ap(n){return qr(n)==="[object Object]"}function up(n){return qr(n)==="[object RegExp]"}function xo(n){return qr(n)==="[object Function]"}function cp(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const dl={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function lp(n){return Object.keys(n||{}).reduce(function(t,e){return t||dl.hasOwnProperty(e)},!1)}const fp={"http:":{validate:function(n,t,e){const s=n.slice(t);return e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i")),e.re.http.test(s)?s.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,t,e){const s=n.slice(t);return e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i")),e.re.no_http.test(s)?t>=3&&n[t-3]===":"||t>=3&&n[t-3]==="/"?0:s.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(n,t,e){const s=n.slice(t);return e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i")),e.re.mailto.test(s)?s.match(e.re.mailto)[0].length:0}}},hp="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",dp="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function pp(n){n.__index__=-1,n.__text_cache__=""}function gp(n){return function(t,e){const s=t.slice(e);return n.test(s)?s.match(n)[0].length:0}}function ko(){return function(n,t){t.normalize(n)}}function Rr(n){const t=n.re=sp(n.__opts__),e=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||e.push(hp),e.push(t.src_xn),t.src_tlds=e.join("|");function s(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(s(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(s(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(s(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(s(t.tpl_host_fuzzy_test),"i");const r=[];n.__compiled__={};function i(a,u){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+u)}Object.keys(n.__schemas__).forEach(function(a){const u=n.__schemas__[a];if(u===null)return;const c={validate:null,link:null};if(n.__compiled__[a]=c,ap(u)){up(u.validate)?c.validate=gp(u.validate):xo(u.validate)?c.validate=u.validate:i(a,u),xo(u.normalize)?c.normalize=u.normalize:u.normalize?i(a,u):c.normalize=ko();return}if(op(u)){r.push(a);return}i(a,u)}),r.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:ko()};const o=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(cp).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),pp(n)}function mp(n,t){const e=n.__index__,s=n.__last_index__,r=n.__text_cache__.slice(e,s);this.schema=n.__schema__.toLowerCase(),this.index=e+t,this.lastIndex=s+t,this.raw=r,this.text=r,this.url=r}function zi(n,t){const e=new mp(n,t);return n.__compiled__[e.schema].normalize(e,n),e}function Zt(n,t){if(!(this instanceof Zt))return new Zt(n,t);t||lp(n)&&(t=n,n={}),this.__opts__=Ui({},dl,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Ui({},fp,n),this.__compiled__={},this.__tlds__=dp,this.__tlds_replaced__=!1,this.re={},Rr(this)}Zt.prototype.add=function(t,e){return this.__schemas__[t]=e,Rr(this),this};Zt.prototype.set=function(t){return this.__opts__=Ui(this.__opts__,t),this};Zt.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let e,s,r,i,o,a,u,c,l;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(e=u.exec(t))!==null;)if(i=this.testSchemaAt(t,e[2],u.lastIndex),i){this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(s=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=s.index+s[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=s.index+s[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=t.indexOf("@"),l>=0&&(r=t.match(this.re.email_fuzzy))!==null&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};Zt.prototype.pretest=function(t){return this.re.pretest.test(t)};Zt.prototype.testSchemaAt=function(t,e,s){return this.__compiled__[e.toLowerCase()]?this.__compiled__[e.toLowerCase()].validate(t,s,this):0};Zt.prototype.match=function(t){const e=[];let s=0;this.__index__>=0&&this.__text_cache__===t&&(e.push(zi(this,s)),s=this.__last_index__);let r=s?t.slice(s):t;for(;this.test(r);)e.push(zi(this,s)),r=r.slice(this.__last_index__),s+=this.__last_index__;return e.length?e:null};Zt.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const e=this.re.schema_at_start.exec(t);if(!e)return null;const s=this.testSchemaAt(t,e[2],e[0].length);return s?(this.__schema__=e[2],this.__index__=e.index+e[1].length,this.__last_index__=e.index+e[0].length+s,zi(this,0)):null};Zt.prototype.tlds=function(t,e){return t=Array.isArray(t)?t:[t],e?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(s,r,i){return s!==i[r-1]}).reverse(),Rr(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Rr(this),this)};Zt.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Zt.prototype.onCompile=function(){};const On=2147483647,Ae=36,gs=1,rr=26,bp=38,_p=700,pl=72,gl=128,ml="-",yp=/^xn--/,wp=/[^\0-\x7F]/,vp=/[\x2E\u3002\uFF0E\uFF61]/g,xp={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},fi=Ae-gs,Ee=Math.floor,hi=String.fromCharCode;function Ve(n){throw new RangeError(xp[n])}function kp(n,t){const e=[];let s=n.length;for(;s--;)e[s]=t(n[s]);return e}function bl(n,t){const e=n.split("@");let s="";e.length>1&&(s=e[0]+"@",n=e[1]),n=n.replace(vp,".");const r=n.split("."),i=kp(r,t).join(".");return s+i}function _l(n){const t=[];let e=0;const s=n.length;for(;e<s;){const r=n.charCodeAt(e++);if(r>=55296&&r<=56319&&e<s){const i=n.charCodeAt(e++);(i&64512)==56320?t.push(((r&1023)<<10)+(i&1023)+65536):(t.push(r),e--)}else t.push(r)}return t}const Sp=n=>String.fromCodePoint(...n),Ap=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Ae},So=function(n,t){return n+22+75*(n<26)-((t!=0)<<5)},yl=function(n,t,e){let s=0;for(n=e?Ee(n/_p):n>>1,n+=Ee(n/t);n>fi*rr>>1;s+=Ae)n=Ee(n/fi);return Ee(s+(fi+1)*n/(n+bp))},wl=function(n){const t=[],e=n.length;let s=0,r=gl,i=pl,o=n.lastIndexOf(ml);o<0&&(o=0);for(let a=0;a<o;++a)n.charCodeAt(a)>=128&&Ve("not-basic"),t.push(n.charCodeAt(a));for(let a=o>0?o+1:0;a<e;){const u=s;for(let l=1,f=Ae;;f+=Ae){a>=e&&Ve("invalid-input");const h=Ap(n.charCodeAt(a++));h>=Ae&&Ve("invalid-input"),h>Ee((On-s)/l)&&Ve("overflow"),s+=h*l;const d=f<=i?gs:f>=i+rr?rr:f-i;if(h<d)break;const p=Ae-d;l>Ee(On/p)&&Ve("overflow"),l*=p}const c=t.length+1;i=yl(s-u,c,u==0),Ee(s/c)>On-r&&Ve("overflow"),r+=Ee(s/c),s%=c,t.splice(s++,0,r)}return String.fromCodePoint(...t)},vl=function(n){const t=[];n=_l(n);const e=n.length;let s=gl,r=0,i=pl;for(const u of n)u<128&&t.push(hi(u));const o=t.length;let a=o;for(o&&t.push(ml);a<e;){let u=On;for(const l of n)l>=s&&l<u&&(u=l);const c=a+1;u-s>Ee((On-r)/c)&&Ve("overflow"),r+=(u-s)*c,s=u;for(const l of n)if(l<s&&++r>On&&Ve("overflow"),l===s){let f=r;for(let h=Ae;;h+=Ae){const d=h<=i?gs:h>=i+rr?rr:h-i;if(f<d)break;const p=f-d,g=Ae-d;t.push(hi(So(d+p%g,0))),f=Ee(p/g)}t.push(hi(So(f,0))),i=yl(r,c,a===o),r=0,++a}++r,++s}return t.join("")},Ep=function(n){return bl(n,function(t){return yp.test(t)?wl(t.slice(4).toLowerCase()):t})},Cp=function(n){return bl(n,function(t){return wp.test(t)?"xn--"+vl(t):t})},xl={version:"2.3.1",ucs2:{decode:_l,encode:Sp},decode:wl,encode:vl,toASCII:Cp,toUnicode:Ep},Tp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Dp={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Op={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Pp={default:Tp,zero:Dp,commonmark:Op},Ip=/^(vbscript|javascript|file|data):/,jp=/^data:image\/(gif|png|jpeg|webp);/;function Rp(n){const t=n.trim().toLowerCase();return Ip.test(t)?jp.test(t):!0}const kl=["http:","https:","mailto:"];function Fp(n){const t=cs(n,!0);if(t.hostname&&(!t.protocol||kl.indexOf(t.protocol)>=0))try{t.hostname=xl.toASCII(t.hostname)}catch{}return or(us(t))}function Lp(n){const t=cs(n,!0);if(t.hostname&&(!t.protocol||kl.indexOf(t.protocol)>=0))try{t.hostname=xl.toUnicode(t.hostname)}catch{}return jn(us(t),jn.defaultChars+"%")}function ce(n,t){if(!(this instanceof ce))return new ce(n,t);t||fs(n)||(t=n||{},n="default"),this.inline=new ur,this.block=new Hr,this.core=new ds,this.renderer=new Nn,this.linkify=new Zt,this.validateLink=Rp,this.normalizeLink=Fp,this.normalizeLinkText=Lp,this.utils=Bd,this.helpers=Ur({},zd),this.options={},this.configure(n),t&&this.set(t)}ce.prototype.set=function(n){return Ur(this.options,n),this};ce.prototype.configure=function(n){const t=this;if(fs(n)){const e=n;if(n=Pp[e],!n)throw new Error('Wrong `markdown-it` preset "'+e+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&t.set(n.options),n.components&&Object.keys(n.components).forEach(function(e){n.components[e].rules&&t[e].ruler.enableOnly(n.components[e].rules),n.components[e].rules2&&t[e].ruler2.enableOnly(n.components[e].rules2)}),this};ce.prototype.enable=function(n,t){let e=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(r){e=e.concat(this[r].ruler.enable(n,!0))},this),e=e.concat(this.inline.ruler2.enable(n,!0));const s=n.filter(function(r){return e.indexOf(r)<0});if(s.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+s);return this};ce.prototype.disable=function(n,t){let e=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(r){e=e.concat(this[r].ruler.disable(n,!0))},this),e=e.concat(this.inline.ruler2.disable(n,!0));const s=n.filter(function(r){return e.indexOf(r)<0});if(s.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+s);return this};ce.prototype.use=function(n){const t=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,t),this};ce.prototype.parse=function(n,t){if(typeof n!="string")throw new Error("Input data should be a String");const e=new this.core.State(n,this,t);return this.core.process(e),e.tokens};ce.prototype.render=function(n,t){return t=t||{},this.renderer.render(this.parse(n,t),this.options,t)};ce.prototype.parseInline=function(n,t){const e=new this.core.State(n,this,t);return e.inlineMode=!0,this.core.process(e),e.tokens};ce.prototype.renderInline=function(n,t){return t=t||{},this.renderer.render(this.parseInline(n,t),this.options,t)};var di,Ao;function Np(){if(Ao)return di;Ao=1;function n(t,e){e=e||{};let s=typeof e.externalClassName=="string"||e.externalClassName===null?e.externalClassName:"external-link",r=typeof e.internalClassName=="string"||e.internalClassName===null?e.internalClassName:null,i=Array.isArray(e.internalDomains)?e.internalDomains.map(d=>d.toLowerCase()):[],o=e.externalTarget||"_self",a=e.internalTarget||"_self",u=e.externalRel||null,c=e.internalRel||null;if(s===null&&r===null&&o==="_self"&&a==="_self"&&u===null&&c===null)return;function l(d){function p(g){if(g.children&&g.children.map(p),g.type==="link_open"){let b=g.attrGet("href"),y=f(b),m=y?r:s;if(m){let v=g.attrGet("class")||"";v!==""&&(m=v+" "+m),g.attrSet("class",m)}let _=y?a:o;_!=="_self"&&g.attrSet("target",_);let w=y?c:u;if(w){let v=g.attrGet("rel")||"";v!==""&&(w=v+" "+w),g.attrSet("rel",w)}}}d.tokens.map(p)}function f(d){let p=h(d);return p===null||i.indexOf(p)!==-1}function h(d){let p=d.split("//")[1];return p?(p=p.split("/")[0].toLowerCase(),p||null):null}t.core.ruler.push("external_links",l)}return di=n,di}var Bp=Np();const F1=en(Bp),gn=Tn.room,mt=At({pub:$e("current-room",gn.pub),isRoot:It(()=>mt.pub==gn.pub),hosts:{},features:{},profile:{}});Ra(()=>{const n=xt();mt.pub==gn.pub?(mt.hosts=gn.hosts,mt.features=gn.features):(mt.features={},mt.hosts={},n.user(mt.pub).get("hosts").map().once((t,e)=>{mt.hosts[e]=t}),n.user(mt.pub).get("features").map().once((t,e)=>{mt.features[e]=t}))});function L1(n=mt.pub){const t=At({pub:n,isFavourite:!1,isRoot:It(()=>n==gn.pub),hosts:{},features:{},profile:{}}),e=xt(),{user:s}=rn();return e.user(n).get("profile").map().on((r,i)=>{t.profile[i]=r}),e.user(n).get("hosts").map().once((r,i)=>{t.hosts[i]=r}),e.user(n).get("features").map().once((r,i)=>{t.features[i]=r}),e.user().get("rooms").get(`${n}@${s==null?void 0:s.pub}`).on(r=>{t.isFavourite=r}),{room:t,submitRoom:Mp,enterRoom:Up,createRoom:ms,leaveRoom:zp,updateRoomProfile:Hi}}function N1(n=mt.pub){const t=ue(),e=xt();e.user(n).get("profile").get("logo").on(i=>{if(!i){t.value=null;return}e.get("#logos").get(i).once(o=>{t.value=o})});async function s(i){if(i){const o=await ss(i);e.get("#logos").get(o).put(i),Hi("logo",o)}else r()}function r(){Hi("logo",null)}return{logo:t,uploadLogo:s,removeLogo:r}}function B1(n=mt.pub){return{rooms:It(()=>$p("rooms",n)),createRoom:ms}}function $p(n,t=mt.pub){const e=xt(),s=At({});return e.user(t).get(`${n}`).map().on(function(r,i){let o=i.substring(0,87);s[o]=s[o]||{},s[o][i.substring(88)]=r}),s}function Hi(n,t){var i,o;const e=xt(),{user:s}=rn();let r=(o=(i=mt.hosts)==null?void 0:i[s.pub])==null?void 0:o.profile;e.user(mt.pub).get("profile").get(n).put(t,null,{opt:{cert:r}})}async function ms({pair:n,name:t,featureList:e=Object.keys(Tn==null?void 0:Tn.features),publish:s=!0}={}){var h;const{user:r}=rn();if(!n)return;const i=n.pub,o=await Zs({pair:n,list:[{tag:"profile",users:[r.pub]},{tag:"features",users:[r.pub]},{tag:"hosts",users:[r.pub]}]}),a=await Zs({pair:n,list:e.map(d=>({tag:d,personal:!0}))}),u=await r.encrypt(`${n}`),c=await r.encrypt(`${i}`),l={...Tn,relay:Pt.peer,room:{pub:n.pub,hosts:{[r.pub]:{enc:u,...o}},features:a}};console.log("COPY THIS ROOM INFO TO USE IT AS A ROOT",l,"STORE THIS KEY PAIR IN A SAFE PLACE",n);const f=xt();await f.user().get("rooms").get(`${i}@${r.pub}`).put(!0).then(),await f.user().get("my_rooms").get(c).put(u).then(),await f.user(i).get("hosts").get(r.pub).put({enc:u,...o},null,{opt:{cert:o.hosts}}).then(),await f.user(i).get("features").put(a,null,{opt:{cert:o.features}}).then(),t&&await f.user(i).get("profile").put({name:t},null,{opt:{cert:o.profile}}).then(),s&&await f.user(mt.pub).get("rooms").get(`${i}@${r.pub}`).put(!0,null,{opt:{cert:(h=mt==null?void 0:mt.features)==null?void 0:h.rooms}}).then(),no(JSON.stringify(l),"application/json","gun.config.json"),no(JSON.stringify(n),"application/json",`room_${t||i}.json`)}async function $1(n,t){const e=await wt.decrypt(n);ms({pair:e,name:t})}async function Mp(n){var s;const t=xt(),e=await t.user(mt.pub).get("rooms").get(`${n}@${wt.pub}`).then();t.user(mt.pub).get("rooms").get(`${n}@${wt.pub}`).put(!e,null,{opt:{cert:(s=mt.features)==null?void 0:s.rooms}})}function M1(n=mt.pub){var e;xt().user(n).get("space").get(wt.pub).put(JSON.stringify({x:Math.random(),y:Math.random()}),null,{opt:{cert:(e=mt.features)==null?void 0:e.space}})}async function U1(n=mt.pub){const t=xt(),{user:e}=rn(),s=await t.user().get("rooms").get(`${n}@${e.pub}`).then();t.user().get("rooms").get(`${n}@${e.pub}`).put(!s)}function Up(n){mt.pub=n}function zp(){mt.pub=gn.pub}var pi,vn,Hp={1467:n=>{function t(e,s){if(typeof e[0]=="string")return e.join("");if(typeof e[0]=="number")return new Uint8Array(e);const r=new Uint8Array(s);let i=0;for(let o=0,a=e.length;o<a;o++){const u=e[o];r.set(u,i),i+=u.byteLength||u.length}return r}n.exports=async function*(e,s=512,r={}){typeof s=="object"&&(s=(r=s).size);let{nopad:i,zeroPadding:o=!0}=r;i&&(o=!1);let a=[],u=0;for await(const c of e)if(u+=c.byteLength||c.length||1,a.push(c),u>=s){const l=t(a,u);let f=0;for(;u>=s;)yield l.slice(f,f+s),u-=s,f+=s;a=[l.slice(f,l.length)]}u&&(yield t(a,o?s:u))}},4497:(n,t,e)=>{const s=e(8454),r=e(9596);n.exports=class{constructor(i,o){if(this.store=i,this.chunkLength=i.chunkLength,this.inProgressGets=new Map,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.cache=new s(o)}put(i,o,a=()=>{}){if(!this.cache)return r(()=>a(new Error("CacheStore closed")));this.cache.remove(i),this.store.put(i,o,a)}get(i,o,a=()=>{}){if(typeof o=="function")return this.get(i,null,o);if(!this.cache)return r(()=>a(new Error("CacheStore closed")));o||(o={});let u=this.cache.get(i);if(u){const f=o.offset||0,h=o.length||u.length-f;return f===0&&h===u.length||(u=u.slice(f,h+f)),r(()=>a(null,u))}let c=this.inProgressGets.get(i);const l=!!c;c||(c=[],this.inProgressGets.set(i,c)),c.push({opts:o,cb:a}),l||this.store.get(i,(f,h)=>{f||this.cache==null||this.cache.set(i,h);const d=this.inProgressGets.get(i);this.inProgressGets.delete(i);for(const{opts:p,cb:g}of d)if(f)g(f);else{const b=p.offset||0,y=p.length||h.length-b;let m=h;b===0&&y===h.length||(m=h.slice(b,y+b)),g(null,m)}})}close(i=()=>{}){if(!this.cache)return r(()=>i(new Error("CacheStore closed")));this.cache=null,this.store.close(i)}destroy(i=()=>{}){if(!this.cache)return r(()=>i(new Error("CacheStore closed")));this.cache=null,this.store.destroy(i)}}},4018:n=>{n.exports=function(){for(var t=navigator.hardwareConcurrency||1,e=[],s=0;s<t;s++)e.push({model:"",speed:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}});return e}},7833:(n,t,e)=>{var s=e(717);t.formatArgs=function(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;i.splice(1,0,o,"color: inherit");let a=0,u=0;i[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(a++,c==="%c"&&(u=a))}),i.splice(u,0,o)},t.save=function(i){try{i?t.storage.setItem("debug",i):t.storage.removeItem("debug")}catch{}},t.load=function(){let i;try{i=t.storage.getItem("debug")}catch{}return!i&&s!==void 0&&"env"in s&&(i=s.env.DEBUG),i},t.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),n.exports=e(736)(t);const{formatters:r}=n.exports;r.j=function(i){try{return JSON.stringify(i)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}},736:(n,t,e)=>{n.exports=function(s){function r(a){let u,c,l,f=null;function h(...d){if(!h.enabled)return;const p=h,g=Number(new Date),b=g-(u||g);p.diff=b,p.prev=u,p.curr=g,u=g,d[0]=r.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let y=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(m,_)=>{if(m==="%%")return"%";y++;const w=r.formatters[_];if(typeof w=="function"){const v=d[y];m=w.call(p,v),d.splice(y,1),y--}return m}),r.formatArgs.call(p,d),(p.log||r.log).apply(p,d)}return h.namespace=a,h.useColors=r.useColors(),h.color=r.selectColor(a),h.extend=i,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(c!==r.namespaces&&(c=r.namespaces,l=r.enabled(a)),l),set:d=>{f=d}}),typeof r.init=="function"&&r.init(h),h}function i(a,u){const c=r(this.namespace+(u===void 0?":":u)+a);return c.log=this.log,c}function o(a,u){let c=0,l=0,f=-1,h=0;for(;c<a.length;)if(l<u.length&&(u[l]===a[c]||u[l]==="*"))u[l]==="*"?(f=l,h=c,l++):(c++,l++);else{if(f===-1)return!1;l=f+1,h++,c=h}for(;l<u.length&&u[l]==="*";)l++;return l===u.length}return r.debug=r,r.default=r,r.coerce=function(a){return a instanceof Error?a.stack||a.message:a},r.disable=function(){const a=[...r.names,...r.skips.map(u=>"-"+u)].join(",");return r.enable(""),a},r.enable=function(a){r.save(a),r.namespaces=a,r.names=[],r.skips=[];const u=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(const c of u)c[0]==="-"?r.skips.push(c.slice(1)):r.names.push(c)},r.enabled=function(a){for(const u of r.skips)if(o(a,u))return!1;for(const u of r.names)if(o(a,u))return!0;return!1},r.humanize=e(6585),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(s).forEach(a=>{r[a]=s[a]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(a){let u=0;for(let c=0;c<a.length;c++)u=(u<<5)-u+a.charCodeAt(c),u|=0;return r.colors[Math.abs(u)%r.colors.length]},r.enable(r.load()),r}},6611:(n,t,e)=>{var s=e(717),r=e(3519),i=function(){},o=function(a,u,c){if(typeof u=="function")return o(a,null,u);u||(u={}),c=r(c||i);var l=a._writableState,f=a._readableState,h=u.readable||u.readable!==!1&&a.readable,d=u.writable||u.writable!==!1&&a.writable,p=!1,g=function(){a.writable||b()},b=function(){d=!1,h||c.call(a)},y=function(){h=!1,d||c.call(a)},m=function(E){c.call(a,E?new Error("exited with error code: "+E):null)},_=function(E){c.call(a,E)},w=function(){s.nextTick(v)},v=function(){if(!p)return(!h||f&&f.ended&&!f.destroyed)&&(!d||l&&l.ended&&!l.destroyed)?void 0:c.call(a,new Error("premature close"))},A=function(){a.req.on("finish",b)};return function(E){return E.setHeader&&typeof E.abort=="function"}(a)?(a.on("complete",b),a.on("abort",w),a.req?A():a.on("request",A)):d&&!l&&(a.on("end",g),a.on("close",g)),function(E){return E.stdio&&Array.isArray(E.stdio)&&E.stdio.length===3}(a)&&a.on("exit",m),a.on("end",y),a.on("finish",b),u.error!==!1&&a.on("error",_),a.on("close",w),function(){p=!0,a.removeListener("complete",b),a.removeListener("abort",w),a.removeListener("request",A),a.req&&a.req.removeListener("finish",b),a.removeListener("end",g),a.removeListener("close",g),a.removeListener("finish",b),a.removeListener("exit",m),a.removeListener("end",y),a.removeListener("error",_),a.removeListener("close",w)}};n.exports=o},6310:n=>{function t(e,s){for(const r in s)Object.defineProperty(e,r,{value:s[r],enumerable:!0,configurable:!0});return e}n.exports=function(e,s,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof s=="object"&&(r=s,s=""),s&&(r.code=s);try{return t(e,r)}catch{r.message=e.message,r.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),t(new o,r)}}},580:n=>{var t=/["'&<>]/;n.exports=function(e){var s,r=""+e,i=t.exec(r);if(!i)return r;var o="",a=0,u=0;for(a=i.index;a<r.length;a++){switch(r.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}u!==a&&(o+=r.substring(u,a)),u=a+1,o+=s}return u!==a?o+r.substring(u,a):o}},7007:n=>{var t=Object.create||function(g){var b=function(){};return b.prototype=g,new b},e=Object.keys||function(g){var b=[];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&b.push(y);return y},s=Function.prototype.bind||function(g){var b=this;return function(){return b.apply(g,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=t(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}n.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var i,o=10;try{var a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0}),i=a.x===0}catch{i=!1}function u(g){return g._maxListeners===void 0?r.defaultMaxListeners:g._maxListeners}function c(g,b,y,m){var _,w,v;if(typeof y!="function")throw new TypeError('"listener" argument must be a function');if((w=g._events)?(w.newListener&&(g.emit("newListener",b,y.listener?y.listener:y),w=g._events),v=w[b]):(w=g._events=t(null),g._eventsCount=0),v){if(typeof v=="function"?v=w[b]=m?[y,v]:[v,y]:m?v.unshift(y):v.push(y),!v.warned&&(_=u(g))&&_>0&&v.length>_){v.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+v.length+' "'+String(b)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');A.name="MaxListenersExceededWarning",A.emitter=g,A.type=b,A.count=v.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",A.name,A.message)}}else v=w[b]=y,++g._eventsCount;return g}function l(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var g=new Array(arguments.length),b=0;b<g.length;++b)g[b]=arguments[b];this.listener.apply(this.target,g)}}function f(g,b,y){var m={fired:!1,wrapFn:void 0,target:g,type:b,listener:y},_=s.call(l,m);return _.listener=y,m.wrapFn=_,_}function h(g,b,y){var m=g._events;if(!m)return[];var _=m[b];return _?typeof _=="function"?y?[_.listener||_]:[_]:y?function(w){for(var v=new Array(w.length),A=0;A<v.length;++A)v[A]=w[A].listener||w[A];return v}(_):p(_,_.length):[]}function d(g){var b=this._events;if(b){var y=b[g];if(typeof y=="function")return 1;if(y)return y.length}return 0}function p(g,b){for(var y=new Array(b),m=0;m<b;++m)y[m]=g[m];return y}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(g){if(typeof g!="number"||g<0||g!=g)throw new TypeError('"defaultMaxListeners" must be a positive number');o=g}}):r.defaultMaxListeners=o,r.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||isNaN(g))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=g,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(g){var b,y,m,_,w,v,A=g==="error";if(v=this._events)A=A&&v.error==null;else if(!A)return!1;if(A){if(arguments.length>1&&(b=arguments[1]),b instanceof Error)throw b;var E=new Error('Unhandled "error" event. ('+b+")");throw E.context=b,E}if(!(y=v[g]))return!1;var P=typeof y=="function";switch(m=arguments.length){case 1:(function(T,I,F){if(I)T.call(F);else for(var k=T.length,S=p(T,k),x=0;x<k;++x)S[x].call(F)})(y,P,this);break;case 2:(function(T,I,F,k){if(I)T.call(F,k);else for(var S=T.length,x=p(T,S),j=0;j<S;++j)x[j].call(F,k)})(y,P,this,arguments[1]);break;case 3:(function(T,I,F,k,S){if(I)T.call(F,k,S);else for(var x=T.length,j=p(T,x),D=0;D<x;++D)j[D].call(F,k,S)})(y,P,this,arguments[1],arguments[2]);break;case 4:(function(T,I,F,k,S,x){if(I)T.call(F,k,S,x);else for(var j=T.length,D=p(T,j),C=0;C<j;++C)D[C].call(F,k,S,x)})(y,P,this,arguments[1],arguments[2],arguments[3]);break;default:for(_=new Array(m-1),w=1;w<m;w++)_[w-1]=arguments[w];(function(T,I,F,k){if(I)T.apply(F,k);else for(var S=T.length,x=p(T,S),j=0;j<S;++j)x[j].apply(F,k)})(y,P,this,_)}return!0},r.prototype.addListener=function(g,b){return c(this,g,b,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(g,b){return c(this,g,b,!0)},r.prototype.once=function(g,b){if(typeof b!="function")throw new TypeError('"listener" argument must be a function');return this.on(g,f(this,g,b)),this},r.prototype.prependOnceListener=function(g,b){if(typeof b!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(g,f(this,g,b)),this},r.prototype.removeListener=function(g,b){var y,m,_,w,v;if(typeof b!="function")throw new TypeError('"listener" argument must be a function');if(!(m=this._events))return this;if(!(y=m[g]))return this;if(y===b||y.listener===b)--this._eventsCount==0?this._events=t(null):(delete m[g],m.removeListener&&this.emit("removeListener",g,y.listener||b));else if(typeof y!="function"){for(_=-1,w=y.length-1;w>=0;w--)if(y[w]===b||y[w].listener===b){v=y[w].listener,_=w;break}if(_<0)return this;_===0?y.shift():function(A,E){for(var P=E,T=P+1,I=A.length;T<I;P+=1,T+=1)A[P]=A[T];A.pop()}(y,_),y.length===1&&(m[g]=y[0]),m.removeListener&&this.emit("removeListener",g,v||b)}return this},r.prototype.removeAllListeners=function(g){var b,y,m;if(!(y=this._events))return this;if(!y.removeListener)return arguments.length===0?(this._events=t(null),this._eventsCount=0):y[g]&&(--this._eventsCount==0?this._events=t(null):delete y[g]),this;if(arguments.length===0){var _,w=e(y);for(m=0;m<w.length;++m)(_=w[m])!=="removeListener"&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=t(null),this._eventsCount=0,this}if(typeof(b=y[g])=="function")this.removeListener(g,b);else if(b)for(m=b.length-1;m>=0;m--)this.removeListener(g,b[m]);return this},r.prototype.listeners=function(g){return h(this,g,!0)},r.prototype.rawListeners=function(g){return h(this,g,!1)},r.listenerCount=function(g,b){return typeof g.listenerCount=="function"?g.listenerCount(b):d.call(g,b)},r.prototype.listenerCount=d,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},5809:n=>{n.exports=class{constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(t){return this.buffer[this.top]===void 0&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}},6080:(n,t,e)=>{const s=e(5809);n.exports=class{constructor(r){this.hwm=r||16,this.head=new s(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(r){if(this.length++,!this.head.push(r)){const i=this.head;this.head=i.next=new s(2*this.head.buffer.length),this.head.push(r)}}shift(){this.length!==0&&this.length--;const r=this.tail.shift();if(r===void 0&&this.tail.next){const i=this.tail.next;return this.tail.next=null,this.tail=i,this.tail.shift()}return r}peek(){const r=this.tail.peek();return r===void 0&&this.tail.next?this.tail.next.peek():r}isEmpty(){return this.length===0}}},3468:()=>{typeof ReadableStream<"u"&&(ReadableStream.prototype[Symbol.asyncIterator]||(ReadableStream.prototype[Symbol.asyncIterator]=function({preventCancel:n}={}){const t=this.getReader(),e=this;let s=t.read();return{next(){const r=s;return s=t.read(),r},return:async r=>(await s,t.releaseLock(),n||e.cancel(),{done:!0,value:r}),async throw(r){throw await this.return(),r},[Symbol.asyncIterator](){return this}}}),ReadableStream.prototype.getIterator||(ReadableStream.prototype.getIterator=function({preventCancel:n}={}){return this[Symbol.asyncIterator]({preventCancel:n})}))},3714:(n,t,e)=>{const s=e(9596);n.exports=class{constructor(r){if(this.store=r,this.chunkLength=r.chunkLength,!this.store||!this.store.get||!this.store.put)throw new Error("First argument must be abstract-chunk-store compliant");this.mem=[]}put(r,i,o=()=>{}){this.mem[r]=i,this.store.put(r,i,a=>{this.mem[r]=null,o(a)})}get(r,i,o=()=>{}){if(typeof i=="function")return this.get(r,null,i);let a=this.mem[r];if(!a)return this.store.get(r,i,o);i||(i={});const u=i.offset||0,c=i.length||a.length-u;u===0&&c===a.length||(a=a.slice(u,c+u)),s(()=>o(null,a))}close(r=()=>{}){this.store.close(r)}destroy(r=()=>{}){this.store.destroy(r)}}},6698:n=>{typeof Object.create=="function"?n.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,e){if(e){t.super_=e;var s=function(){};s.prototype=e.prototype,t.prototype=new s,t.prototype.constructor=t}}},405:n=>{n.exports=async function*(t){for(let e of t)typeof e=="function"&&(e=e()),yield*e}},9439:(n,t,e)=>{t.RateLimiter=e(3065),t.TokenBucket=e(5472)},3085:(n,t,e)=>{var s=e(717);n.exports=function(){if(s!==void 0&&s.hrtime){var r=s.hrtime(),i=r[0],o=r[1];return 1e3*i+Math.floor(o/1e6)}return new Date().getTime()}},3065:(n,t,e)=>{var s=e(717),r=e(5472),i=e(3085),o=function(a,u,c){this.tokenBucket=new r(a,a,u,null),this.tokenBucket.content=a,this.curIntervalStart=i(),this.tokensThisInterval=0,this.fireImmediately=c};o.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(a,u){if(a>this.tokenBucket.bucketSize)return s.nextTick(u.bind(null,"Requested tokens "+a+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var c=this,l=i();if((l<this.curIntervalStart||l-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=l,this.tokensThisInterval=0),a>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)s.nextTick(u.bind(null,null,-1));else{var f=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-l);setTimeout(function(){c.tokenBucket.removeTokens(a,h)},f)}return!1}return this.tokenBucket.removeTokens(a,h);function h(d,p){if(d)return u(d,null);c.tokensThisInterval+=a,u(null,p)}},tryRemoveTokens:function(a){if(a>this.tokenBucket.bucketSize)return!1;var u=i();if((u<this.curIntervalStart||u-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=u,this.tokensThisInterval=0),a>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var c=this.tokenBucket.tryRemoveTokens(a);return c&&(this.tokensThisInterval+=a),c},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},n.exports=o},5472:(n,t,e)=>{var s=e(717),r=function(i,o,a,u){if(this.bucketSize=i,this.tokensPerInterval=o,typeof a=="string")switch(a){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+a)}else this.interval=a;this.parentBucket=u,this.content=0,this.lastDrip=+new Date};r.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(i,o){var a=this;return this.bucketSize?i>this.bucketSize?(s.nextTick(o.bind(null,"Requested tokens "+i+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),i>this.content?u():this.parentBucket?this.parentBucket.removeTokens(i,function(c,l){return c?o(c,null):i>a.content?u():(a.content-=i,void o(null,Math.min(l,a.content)))}):(this.content-=i,s.nextTick(o.bind(null,null,this.content)),!0)):(s.nextTick(o.bind(null,null,i,Number.POSITIVE_INFINITY)),!0);function u(){var c=Math.ceil((i-a.content)*(a.interval/a.tokensPerInterval));return setTimeout(function(){a.removeTokens(i,o)},c),!1}},tryRemoveTokens:function(i){return!this.bucketSize||!(i>this.bucketSize)&&(this.drip(),!(i>this.content)&&!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(i))&&(this.content-=i,!0))},drip:function(){if(this.tokensPerInterval){var i=+new Date,o=Math.max(i-this.lastDrip,0);this.lastDrip=i;var a=o*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+a,this.bucketSize)}else this.content=this.bucketSize}},n.exports=r},8454:(n,t,e)=>{var s=e(7007),r=e(6698);function i(o){if(!(this instanceof i))return new i(o);typeof o=="number"&&(o={max:o}),o||(o={}),s.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=o.max||1e3,this.maxAge=o.maxAge||0}n.exports=i,r(i,s.EventEmitter),Object.defineProperty(i.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),i.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},i.prototype.remove=function(o){if(typeof o!="string"&&(o=""+o),this.cache.hasOwnProperty(o)){var a=this.cache[o];return delete this.cache[o],this._unlink(o,a.prev,a.next),a.value}},i.prototype._unlink=function(o,a,u){this.length--,this.length===0?this.head=this.tail=null:this.head===o?(this.head=a,this.cache[this.head].next=null):this.tail===o?(this.tail=u,this.cache[this.tail].prev=null):(this.cache[a].next=u,this.cache[u].prev=a)},i.prototype.peek=function(o){if(this.cache.hasOwnProperty(o)){var a=this.cache[o];if(this._checkAge(o,a))return a.value}},i.prototype.set=function(o,a){var u;if(typeof o!="string"&&(o=""+o),this.cache.hasOwnProperty(o)){if((u=this.cache[o]).value=a,this.maxAge&&(u.modified=Date.now()),o===this.head)return a;this._unlink(o,u.prev,u.next)}else u={value:a,modified:0,next:null,prev:null},this.maxAge&&(u.modified=Date.now()),this.cache[o]=u,this.length===this.max&&this.evict();return this.length++,u.next=null,u.prev=this.head,this.head&&(this.cache[this.head].next=o),this.head=o,this.tail||(this.tail=o),a},i.prototype._checkAge=function(o,a){return!(this.maxAge&&Date.now()-a.modified>this.maxAge)||(this.remove(o),this.emit("evict",{key:o,value:a.value}),!1)},i.prototype.get=function(o){if(typeof o!="string"&&(o=""+o),this.cache.hasOwnProperty(o)){var a=this.cache[o];if(this._checkAge(o,a))return this.head!==o&&(o===this.tail?(this.tail=a.next,this.cache[this.tail].prev=null):this.cache[a.prev].next=a.next,this.cache[a.next].prev=a.prev,this.cache[this.head].next=o,a.prev=this.head,a.next=null,this.head=o),a.value}},i.prototype.evict=function(){if(this.tail){var o=this.tail,a=this.remove(this.tail);this.emit("evict",{key:o,value:a})}}},4862:(n,t,e)=>{n.exports=r;const s=e(9596);function r(i,o){if(!(this instanceof r))return new r(i,o);if(o||(o={}),this.chunkLength=Number(i),!this.chunkLength)throw new Error("First argument must be a chunk length");this.chunks=[],this.closed=!1,this.length=Number(o.length)||1/0,this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}r.prototype.put=function(i,o,a=()=>{}){if(this.closed)return s(()=>a(new Error("Storage is closed")));const u=i===this.lastChunkIndex;return u&&o.length!==this.lastChunkLength?s(()=>a(new Error("Last chunk length must be "+this.lastChunkLength))):u||o.length===this.chunkLength?(this.chunks[i]=o,void s(()=>a(null))):s(()=>a(new Error("Chunk length must be "+this.chunkLength)))},r.prototype.get=function(i,o,a=()=>{}){if(typeof o=="function")return this.get(i,null,o);if(this.closed)return s(()=>a(new Error("Storage is closed")));let u=this.chunks[i];if(!u){const f=new Error("Chunk not found");return f.notFound=!0,s(()=>a(f))}o||(o={});const c=o.offset||0,l=o.length||u.length-c;c===0&&l===u.length||(u=u.slice(c,l+c)),s(()=>a(null,u))},r.prototype.close=r.prototype.destroy=function(i=()=>{}){if(this.closed)return s(()=>i(new Error("Storage is closed")));this.closed=!0,this.chunks=null,s(()=>i(null))}},8673:n=>{function t(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}t.prototype.define=function(e,s){for(let r in e){let i=e[r].map(function(o){return o.toLowerCase()});r=r.toLowerCase();for(let o=0;o<i.length;o++){const a=i[o];if(a[0]!=="*"){if(!s&&a in this._types)throw new Error('Attempt to change mapping for "'+a+'" extension from "'+this._types[a]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+a+'" from the list of extensions for "'+r+'".');this._types[a]=r}}if(s||!this._extensions[r]){const o=i[0];this._extensions[r]=o[0]!=="*"?o:o.substr(1)}}},t.prototype.getType=function(e){let s=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),r=s.replace(/^.*\./,"").toLowerCase(),i=s.length<e.length;return(r.length<s.length-1||!i)&&this._types[r]||null},t.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},n.exports=t},1133:(n,t,e)=>{let s=e(8673);n.exports=new s(e(8446))},8446:n=>{n.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},6585:n=>{var t=1e3,e=60*t,s=60*e,r=24*s,i=7*r,o=365.25*r;function a(u,c,l,f){var h=c>=1.5*l;return Math.round(u/l)+" "+f+(h?"s":"")}n.exports=function(u,c){c=c||{};var l=typeof u;if(l==="string"&&u.length>0)return function(f){if(!((f=String(f)).length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(h){var d=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return d*o;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*s;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}(u);if(l==="number"&&isFinite(u))return c.long?function(f){var h=Math.abs(f);return h>=r?a(f,h,r,"day"):h>=s?a(f,h,s,"hour"):h>=e?a(f,h,e,"minute"):h>=t?a(f,h,t,"second"):f+" ms"}(u):function(f){var h=Math.abs(f);return h>=r?Math.round(f/r)+"d":h>=s?Math.round(f/s)+"h":h>=e?Math.round(f/e)+"m":h>=t?Math.round(f/t)+"s":f+"ms"}(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}},3519:(n,t,e)=>{var s=e(6587);function r(o){var a=function(){return a.called?a.value:(a.called=!0,a.value=o.apply(this,arguments))};return a.called=!1,a}function i(o){var a=function(){if(a.called)throw new Error(a.onceError);return a.called=!0,a.value=o.apply(this,arguments)},u=o.name||"Function wrapped with `once`";return a.onceError=u+" shouldn't be called more than once",a.called=!1,a}n.exports=s(r),n.exports.strict=s(i),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},8444:n=>{n.exports=function(t){return Math.max(16384,1<<Math.log2(t<1024?1:t/1024)+.5)}},815:(n,t,e)=>{var s,r=e(717),i=e(3519),o=e(6611);try{s=e(2376)}catch{}var a=function(){},u=/^v?\.0/.test(r.version),c=function(d){return typeof d=="function"},l=function(d,p,g,b){b=i(b);var y=!1;d.on("close",function(){y=!0}),o(d,{readable:p,writable:g},function(_){if(_)return b(_);y=!0,b()});var m=!1;return function(_){if(!y&&!m)return m=!0,function(w){return!!u&&!!s&&(w instanceof(s.ReadStream||a)||w instanceof(s.WriteStream||a))&&c(w.close)}(d)?d.close(a):function(w){return w.setHeader&&c(w.abort)}(d)?d.abort():c(d.destroy)?d.destroy():void b(_||new Error("stream was destroyed"))}},f=function(d){d()},h=function(d,p){return d.pipe(p)};n.exports=function(){var d,p=Array.prototype.slice.call(arguments),g=c(p[p.length-1]||a)&&p.pop()||a;if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new Error("pump requires two streams per minimum");var b=p.map(function(y,m){var _=m<p.length-1;return l(y,_,m>0,function(w){d||(d=w),w&&b.forEach(f),_||(b.forEach(f),g(d))})});return p.reduce(h)}},9596:n=>{let t;n.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):e=>(t||(t=Promise.resolve())).then(e).catch(s=>setTimeout(()=>{throw s},0))},7373:n=>{n.exports=function(t){var e=0;return function(){if(e===t.length)return null;var s=t.length-e,r=Math.random()*s|0,i=t[e+r],o=t[e];return t[e]=i,t[e+r]=o,e++,i}}},2878:n=>{function t(i,o){return{start:i.start,end:i.end,index:o}}function e(i){return{start:i.start,end:i.end}}function s(i,o){return i.index-o.index}function r(i,o){return i.start-o.start}n.exports=function(i,o,a){if(typeof o!="string")throw new TypeError("argument str must be a string");var u=o.indexOf("=");if(u===-1)return-2;var c=o.slice(u+1).split(","),l=[];l.type=o.slice(0,u);for(var f=0;f<c.length;f++){var h=c[f].split("-"),d=parseInt(h[0],10),p=parseInt(h[1],10);isNaN(d)?(d=i-p,p=i-1):isNaN(p)&&(p=i-1),p>i-1&&(p=i-1),isNaN(d)||isNaN(p)||d>p||d<0||l.push({start:d,end:p})}return l.length<1?-1:a&&a.combine?function(g){for(var b=g.map(t).sort(r),y=0,m=1;m<b.length;m++){var _=b[m],w=b[y];_.start>w.end+1?b[++y]=_:_.end>w.end&&(w.end=_.end,w.index=Math.min(w.index,_.index))}b.length=y+1;var v=b.sort(s).map(e);return v.type=g.type,v}(l):l}},8727:n=>{function t(c){return parseInt(c,10)===c}function e(c){function l(h){if(h===void 0){h=new Array(c);for(var d=0;d<c;d++)h[d]=Math.floor(Math.random()*c)}else if(typeof h=="string")h=(h=""+h).split("").map(function(_){return _.charCodeAt(0)%c});else{if(!Array.isArray(h))throw new TypeError("invalid seed key specified");if(!h.every(function(_){return typeof _=="number"&&_===(0|_)}))throw new TypeError("invalid seed key specified: not array of integers")}for(var p=h.length,g=function(){for(var _=new Array(c),w=0;w<c;w++)_[w]=w;return _}(),b=0,y=0;y<c;y++){b=(b+g[y]+h[y%p])%c;var m=g[y];g[y]=g[b],g[b]=m}return g}function f(h){this.s=l(h),this.i=0,this.j=0}return f.prototype.randomNative=function(){this.i=(this.i+1)%c,this.j=(this.j+this.s[this.i])%c;var h=this.s[this.i];return this.s[this.i]=this.s[this.j],this.s[this.j]=h,this.s[(this.s[this.i]+this.s[this.j])%c]},f.prototype.randomUInt32=function(){return 256*(256*(256*this.randomByte()+this.randomByte())+this.randomByte())+this.randomByte()},f.prototype.randomFloat=function(){return this.randomUInt32()/4294967296},f.prototype.random=function(){var h,d;if(arguments.length===1)h=0,d=arguments[0];else{if(arguments.length!==2)throw new TypeError("random takes one or two integer arguments");h=arguments[0],d=arguments[1]}if(!t(h)||!t(d))throw new TypeError("random takes one or two integer arguments");return h+this.randomUInt32()%(d-h+1)},f.prototype.currentState=function(){return{i:this.i,j:this.j,s:this.s.slice()}},f.prototype.setState=function(h){var d=h.s,p=h.i,g=h.j;if(!(p===(0|p)&&0<=p&&p<c))throw new Error("state.i should be integer [0, "+(c-1)+"]");if(!(g===(0|g)&&0<=g&&g<c))throw new Error("state.j should be integer [0, "+(c-1)+"]");if(!Array.isArray(d)||d.length!==c)throw new Error("state should be array of length "+c);for(var b=0;b<c;b++)if(d.indexOf(b)===-1)throw new Error("state should be permutation of 0.."+(c-1)+": "+b+" is missing");this.i=p,this.j=g,this.s=d.slice()},f}var s=e(256);s.prototype.randomByte=s.prototype.randomNative;var r=e(16);r.prototype.randomByte=function(){return 16*this.randomNative()+this.randomNative()};var i=97,o=48;function a(c){return c<10?String.fromCharCode(o+c):String.fromCharCode(i+c-10)}function u(c){return parseInt(c,16)}r.prototype.currentStateString=function(){var c=this.currentState();return a(c.i)+a(c.j)+c.s.map(a).join("")},r.prototype.setStateString=function(c){if(!c.match(/^[0-9a-f]{18}$/))throw new TypeError("RC4small stateString should be 18 hex character string");var l=u(c[0]),f=u(c[1]),h=c.split("").slice(2).map(u);this.setState({i:l,j:f,s:h})},s.RC4small=r,n.exports=s},5372:(n,t,e)=>{n.exports=function(r,i,o){if(typeof i!="number")throw new Error("second argument must be a Number");let a,u,c,l,f,h,d=!0;Array.isArray(r)?(a=[],c=u=r.length):(l=Object.keys(r),a={},c=u=l.length);function p(b){function y(){o&&o(b,a),o=null}d?s(y):y()}function g(b,y,m){if(a[b]=m,y&&(f=!0),--c==0||y)p(y);else if(!f&&h<u){let _;l?(_=l[h],h+=1,r[_](function(w,v){g(_,w,v)})):(_=h,h+=1,r[_](function(w,v){g(_,w,v)}))}}h=i,c?l?l.some(function(b,y){return r[b](function(m,_){g(b,m,_)}),y===i-1}):r.some(function(b,y){return b(function(m,_){g(y,m,_)}),y===i-1}):p(null),d=!1};const s=e(9596)},8190:(n,t,e)=>{n.exports=function(r,i){let o,a,u,c=!0;Array.isArray(r)?(o=[],a=r.length):(u=Object.keys(r),o={},a=u.length);function l(h){function d(){i&&i(h,o),i=null}c?s(d):d()}function f(h,d,p){o[h]=p,(--a==0||d)&&l(d)}a?u?u.forEach(function(h){r[h](function(d,p){f(h,d,p)})}):r.forEach(function(h,d){h(function(p,g){f(d,p,g)})}):l(null),c=!1};const s=e(9596)},7541:(n,t,e)=>{const s=e(8765),r=e(8499);n.exports={Throttle:s,ThrottleGroup:r}},8499:(n,t,e)=>{const{TokenBucket:s}=e(9439),r=e(8765);n.exports=class{constructor(i={}){if(typeof i!="object")throw new Error("Options must be an object");this.throttles=[],this.setEnabled(i.enabled),this.setRate(i.rate,i.chunksize)}getEnabled(){return this._enabled}getRate(){return this.bucket.tokensPerInterval}getChunksize(){return this.chunksize}setEnabled(i=!0){if(typeof i!="boolean")throw new Error("Enabled must be a boolean");this._enabled=i;for(const o of this.throttles)o.setEnabled(i)}setRate(i,o=null){if(!Number.isInteger(i)||i<0)throw new Error("Rate must be an integer bigger than zero");if(i=parseInt(i),o&&(typeof o!="number"||o<=0))throw new Error("Chunksize must be bigger than zero");if(o=o||Math.max(parseInt(i/10),1),o=parseInt(o),i>0&&o>i)throw new Error("Chunk size must be smaller than rate");this.bucket||(this.bucket=new s(i,i,"second",null)),this.bucket.bucketSize=i,this.bucket.tokensPerInterval=i,this.chunksize=o}setChunksize(i){if(!Number.isInteger(i)||i<=0)throw new Error("Chunk size must be an integer bigger than zero");const o=this.getRate();if(i=parseInt(i),o>0&&i>o)throw new Error("Chunk size must be smaller than rate");this.chunksize=i}throttle(i={}){if(typeof i!="object")throw new Error("Options must be an object");return new r({...i,group:this})}destroy(){for(const i of this.throttles)i.destroy();this.throttles=[]}_addThrottle(i){if(!(i instanceof r))throw new Error("Throttle must be an instance of Throttle");this.throttles.push(i)}_removeThrottle(i){const o=this.throttles.indexOf(i);o>-1&&this.throttles.splice(o,1)}}},8765:(n,t,e)=>{const{EventEmitter:s}=e(7007),{Transform:r}=e(8179),{wait:i}=e(2072);n.exports=class extends r{constructor(a={}){if(super(),typeof a!="object")throw new Error("Options must be an object");const u=Object.assign({},a);if(u.group&&!(u.group instanceof o))throw new Error("Group must be an instanece of ThrottleGroup");u.group||(u.group=new o(u)),this._setEnabled(u.enabled||u.group.enabled),this._group=u.group,this._emitter=new s,this._destroyed=!1,this._group._addThrottle(this)}getEnabled(){return this._enabled}getGroup(){return this._group}_setEnabled(a=!0){if(typeof a!="boolean")throw new Error("Enabled must be a boolean");this._enabled=a}setEnabled(a){this._setEnabled(a),this._enabled?this._emitter.emit("enabled"):this._emitter.emit("disabled")}_transform(a,u){this._processChunk(a,u)}async _waitForTokens(a){return new Promise((u,c)=>{let l=!1;const f=this;function h(d){if(f._emitter.removeListener("disabled",h),f._emitter.removeListener("destroyed",h),!l){if(l=!0,d)return c(d);u()}}this._emitter.once("disabled",h),this._emitter.once("destroyed",h),this._group.bucket.removeTokens(a,h)})}_areBothEnabled(){return this._enabled&&this._group.getEnabled()}async _processChunk(a,u){if(!this._areBothEnabled())return u(null,a);let c=0,l=this._group.getChunksize(),f=a.slice(c,c+l);for(;f.length>0;){if(this._areBothEnabled())try{for(;this._group.getRate()===0&&!this._destroyed&&this._areBothEnabled();)if(await i(1e3),this._destroyed)return;if(this._areBothEnabled()&&!this._group.bucket.tryRemoveTokens(f.length)&&(await this._waitForTokens(f.length),this._destroyed))return}catch(h){return u(h)}this.push(f),c+=l,l=this._areBothEnabled()?this._group.getChunksize():a.length-c,f=a.slice(c,c+l)}return u()}destroy(...a){this._group._removeThrottle(this),this._destroyed=!0,this._emitter.emit("destroyed"),super.destroy(...a)}};const o=e(8499)},2072:n=>{n.exports={wait:function(t){return new Promise(e=>setTimeout(e,t))}}},8179:(n,t,e)=>{const{EventEmitter:s}=e(7007),r=new Error("Stream was destroyed"),i=new Error("Premature close"),o=e(6080),a=e(5335),u=536870911,c=1^u,l=2^u,f=32,h=64,d=128,p=256,g=1024,b=2048,y=4096,m=8192,_=16384,w=32768,v=131072,A=131328,E=16^u,P=536805375,T=768^u,I=536838143,F=536739839,k=1<<18,S=2<<18,x=4<<18,j=8<<18,D=16<<18,C=32<<18,R=64<<18,N=128<<18,z=256<<18,M=512<<18,U=1024<<18,tt=535822335,X=503316479,Z=268435455,gt=262160,Et=536608751,ft=8404992,pt=14,vt=15,yt=8405006,Ot=33587200,zt=33587215,O=2359296,W=270794767,G=Symbol.asyncIterator||Symbol("asyncIterator");class ${constructor(L,{highWaterMark:Q=16384,map:lt=null,mapWritable:bt,byteLength:kt,byteLengthWritable:jt}={}){this.stream=L,this.queue=new o,this.highWaterMark=Q,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=jt||kt||Mn,this.map=bt||lt,this.afterWrite=it.bind(this),this.afterUpdateNextTick=St.bind(this)}get ended(){return!!(this.stream._duplexState&C)}push(L){return!(142606350&this.stream._duplexState)&&(this.map!==null&&(L=this.map(L)),this.buffered+=this.byteLength(L),this.queue.push(L),this.buffered<this.highWaterMark?(this.stream._duplexState|=j,!0):(this.stream._duplexState|=6291456,!1))}shift(){const L=this.queue.shift();return this.buffered-=this.byteLength(L),this.buffered===0&&(this.stream._duplexState&=534773759),L}end(L){typeof L=="function"?this.stream.once("finish",L):L!=null&&this.push(L),this.stream._duplexState=(this.stream._duplexState|M)&tt}autoBatch(L,Q){const lt=[],bt=this.stream;for(lt.push(L);(bt._duplexState&W)===O;)lt.push(bt._writableState.shift());if(bt._duplexState&vt)return Q(null);bt._writev(lt,Q)}update(){const L=this.stream;L._duplexState|=S;do{for(;(L._duplexState&W)===j;){const Q=this.shift();L._duplexState|=67371008,L._write(Q,this.afterWrite)}1310720&L._duplexState||this.updateNonPrimary()}while(this.continueUpdate()===!0);L._duplexState&=536346623}updateNonPrimary(){const L=this.stream;if((144965647&L._duplexState)===M)return L._duplexState=L._duplexState|k,void L._final(q.bind(this));(L._duplexState&pt)!=4?(L._duplexState&zt)==1&&(L._duplexState=(L._duplexState|gt)&c,L._open(_t.bind(this))):L._duplexState&Ot||(L._duplexState|=gt,L._destroy(et.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&N)&&(this.stream._duplexState&=X,!0)}updateCallback(){(35127311&this.stream._duplexState)===x?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&N||(this.stream._duplexState|=N,this.stream._duplexState&S||queueMicrotask(this.afterUpdateNextTick))}}class B{constructor(L,{highWaterMark:Q=16384,map:lt=null,mapReadable:bt,byteLength:kt,byteLengthReadable:jt}={}){this.stream=L,this.queue=new o,this.highWaterMark=Q===0?1:Q,this.buffered=0,this.readAhead=Q>0,this.error=null,this.pipeline=null,this.byteLength=jt||kt||Mn,this.map=bt||lt,this.pipeTo=null,this.afterRead=nt.bind(this),this.afterUpdateNextTick=ct.bind(this)}get ended(){return!!(this.stream._duplexState&_)}pipe(L,Q){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof Q!="function"&&(Q=null),this.stream._duplexState|=512,this.pipeTo=L,this.pipeline=new K(this.stream,L,Q),Q&&this.stream.on("error",ze),on(L))L._writableState.pipeline=this.pipeline,Q&&L.on("error",ze),L.on("finish",this.pipeline.finished.bind(this.pipeline));else{const lt=this.pipeline.done.bind(this.pipeline,L),bt=this.pipeline.done.bind(this.pipeline,L,null);L.on("error",lt),L.on("close",bt),L.on("finish",this.pipeline.finished.bind(this.pipeline))}L.on("drain",Y.bind(this)),this.stream.emit("piping",L),L.emit("pipe",this.stream)}push(L){const Q=this.stream;return L===null?(this.highWaterMark=0,Q._duplexState=536805311&Q._duplexState|1024,!1):this.map!==null&&(L=this.map(L))===null?(Q._duplexState&=P,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(L),this.queue.push(L),Q._duplexState=(Q._duplexState|d)&P,this.buffered<this.highWaterMark)}shift(){const L=this.queue.shift();return this.buffered-=this.byteLength(L),this.buffered===0&&(this.stream._duplexState&=536862591),L}unshift(L){const Q=[this.map!==null?this.map(L):L];for(;this.buffered>0;)Q.push(this.shift());for(let lt=0;lt<Q.length-1;lt++){const bt=Q[lt];this.buffered+=this.byteLength(bt),this.queue.push(bt)}this.push(Q[Q.length-1])}read(){const L=this.stream;if((16527&L._duplexState)===d){const Q=this.shift();return this.pipeTo!==null&&this.pipeTo.write(Q)===!1&&(L._duplexState&=T),L._duplexState&b&&L.emit("data",Q),Q}return this.readAhead===!1&&(L._duplexState|=v,this.updateNextTick()),null}drain(){const L=this.stream;for(;(16527&L._duplexState)===d&&768&L._duplexState;){const Q=this.shift();this.pipeTo!==null&&this.pipeTo.write(Q)===!1&&(L._duplexState&=T),L._duplexState&b&&L.emit("data",Q)}}update(){const L=this.stream;L._duplexState|=f;do{for(this.drain();this.buffered<this.highWaterMark&&(214047&L._duplexState)===v;)L._duplexState|=65552,L._read(this.afterRead),this.drain();(12431&L._duplexState)==4224&&(L._duplexState|=m,L.emit("readable")),80&L._duplexState||this.updateNonPrimary()}while(this.continueUpdate()===!0);L._duplexState&=536870879}updateNonPrimary(){const L=this.stream;(1167&L._duplexState)===g&&(L._duplexState=536869887&L._duplexState|16384,L.emit("end"),(L._duplexState&yt)===ft&&(L._duplexState|=4),this.pipeTo!==null&&this.pipeTo.end()),(L._duplexState&pt)!=4?(L._duplexState&zt)==1&&(L._duplexState=(L._duplexState|gt)&c,L._open(_t.bind(this))):L._duplexState&Ot||(L._duplexState|=gt,L._destroy(et.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&w)&&(this.stream._duplexState&=I,!0)}updateCallback(){(32879&this.stream._duplexState)===h?this.update():this.updateNextTick()}updateNextTickIfOpen(){32769&this.stream._duplexState||(this.stream._duplexState|=w,this.stream._duplexState&f||queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){this.stream._duplexState&w||(this.stream._duplexState|=w,this.stream._duplexState&f||queueMicrotask(this.afterUpdateNextTick))}}class H{constructor(L){this.data=null,this.afterTransform=Gt.bind(L),this.afterFinal=null}}class K{constructor(L,Q,lt){this.from=L,this.to=Q,this.afterPipe=lt,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(L,Q){Q&&(this.error=Q),L!==this.to||(this.to=null,this.from===null)?L!==this.from||(this.from=null,this.to===null)?(this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):L._duplexState&_||this.to.destroy(this.error||new Error("Readable stream closed before ending")):this.from._duplexState&_&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function Y(){this.stream._duplexState|=512,this.updateCallback()}function q(at){const L=this.stream;at&&L.destroy(at),L._duplexState&pt||(L._duplexState|=C,L.emit("finish")),(L._duplexState&yt)===ft&&(L._duplexState|=4),L._duplexState&=402391039,L._duplexState&S?this.updateNextTick():this.update()}function et(at){const L=this.stream;at||this.error===r||(at=this.error),at&&L.emit("error",at),L._duplexState|=8,L.emit("close");const Q=L._readableState,lt=L._writableState;if(Q!==null&&Q.pipeline!==null&&Q.pipeline.done(L,at),lt!==null){for(;lt.drains!==null&&lt.drains.length>0;)lt.drains.shift().resolve(!1);lt.pipeline!==null&&lt.pipeline.done(L,at)}}function it(at){const L=this.stream;at&&L.destroy(at),L._duplexState&=469499903,this.drains!==null&&function(Q){for(let lt=0;lt<Q.length;lt++)--Q[lt].writes==0&&(Q.shift().resolve(!0),lt--)}(this.drains),(6553615&L._duplexState)===D&&(L._duplexState&=532676607,(L._duplexState&R)===R&&L.emit("drain")),this.updateCallback()}function nt(at){at&&this.stream.destroy(at),this.stream._duplexState&=E,this.readAhead!==!1||this.stream._duplexState&p||(this.stream._duplexState&=F),this.updateCallback()}function ct(){this.stream._duplexState&f||(this.stream._duplexState&=I,this.update())}function St(){this.stream._duplexState&S||(this.stream._duplexState&=X,this.update())}function _t(at){const L=this.stream;at&&L.destroy(at),4&L._duplexState||(17423&L._duplexState||(L._duplexState|=h),142606351&L._duplexState||(L._duplexState|=x),L.emit("open")),L._duplexState&=Et,L._writableState!==null&&L._writableState.updateCallback(),L._readableState!==null&&L._readableState.updateCallback()}function Gt(at,L){L!=null&&this.push(L),this._writableState.afterWrite(at)}function sn(at){this._readableState!==null&&(at==="data"&&(this._duplexState|=133376,this._readableState.updateNextTick()),at==="readable"&&(this._duplexState|=y,this._readableState.updateNextTick())),this._writableState!==null&&at==="drain"&&(this._duplexState|=R,this._writableState.updateNextTick())}class Wt extends s{constructor(L){super(),this._duplexState=0,this._readableState=null,this._writableState=null,L&&(L.open&&(this._open=L.open),L.destroy&&(this._destroy=L.destroy),L.predestroy&&(this._predestroy=L.predestroy),L.signal&&L.signal.addEventListener("abort",yn.bind(this))),this.on("newListener",sn)}_open(L){L(null)}_destroy(L){L(null)}_predestroy(){}get readable(){return this._readableState!==null||void 0}get writable(){return this._writableState!==null||void 0}get destroyed(){return!!(8&this._duplexState)}get destroying(){return!!(this._duplexState&pt)}destroy(L){this._duplexState&pt||(L||(L=r),this._duplexState=535822271&this._duplexState|4,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=L),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=L),this._duplexState|=2,this._predestroy(),this._duplexState&=l,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}class te extends Wt{constructor(L){super(L),this._duplexState|=8519681,this._readableState=new B(this,L),L&&(this._readableState.readAhead===!1&&(this._duplexState&=F),L.read&&(this._read=L.read),L.eagerOpen&&this._readableState.updateNextTick(),L.encoding&&this.setEncoding(L.encoding))}setEncoding(L){const Q=new a(L),lt=this._readableState.map||Wr;return this._readableState.map=function(bt){const kt=Q.push(bt);return kt===""&&(bt.byteLength!==0||Q.remaining>0)?null:lt(kt)},this}_read(L){L(null)}pipe(L,Q){return this._readableState.updateNextTick(),this._readableState.pipe(L,Q),L}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(L){return this._readableState.updateNextTickIfOpen(),this._readableState.push(L)}unshift(L){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(L)}resume(){return this._duplexState|=A,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?536739583:536870655,this}static _fromAsyncIterator(L,Q){let lt;const bt=new te({...Q,read(jt){L.next().then(kt).then(jt.bind(null,null)).catch(jt)},predestroy(){lt=L.return()},destroy(jt){if(!lt)return jt(null);lt.then(jt.bind(null,null)).catch(jt)}});return bt;function kt(jt){jt.done?bt.push(null):bt.push(jt.value)}}static from(L,Q){if(on(lt=L)&&lt.readable)return L;var lt;if(L[G])return this._fromAsyncIterator(L[G](),Q);Array.isArray(L)||(L=L===void 0?[]:[L]);let bt=0;return new te({...Q,read(kt){this.push(bt===L.length?null:L[bt++]),kt(null)}})}static isBackpressured(L){return!!(17422&L._duplexState)||L._readableState.buffered>=L._readableState.highWaterMark}static isPaused(L){return!(L._duplexState&p)}[G](){const L=this;let Q=null,lt=null,bt=null;return this.on("error",Ht=>{Q=Ht}),this.on("readable",function(){lt!==null&&kt(L.read())}),this.on("close",function(){lt!==null&&kt(null)}),{[G](){return this},next:()=>new Promise(function(Ht,an){lt=Ht,bt=an;const Rt=L.read();Rt!==null?kt(Rt):8&L._duplexState&&kt(null)}),return:()=>jt(null),throw:Ht=>jt(Ht)};function kt(Ht){bt!==null&&(Q?bt(Q):Ht!==null||L._duplexState&_?lt({value:Ht,done:Ht===null}):bt(r),bt=lt=null)}function jt(Ht){return L.destroy(Ht),new Promise((an,Rt)=>{if(8&L._duplexState)return an({value:void 0,done:!0});L.once("close",function(){Ht?Rt(Ht):an({value:void 0,done:!0})})})}}}class Tt extends Wt{constructor(L){super(L),this._duplexState|=16385,this._writableState=new $(this,L),L&&(L.writev&&(this._writev=L.writev),L.write&&(this._write=L.write),L.final&&(this._final=L.final),L.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=U}uncork(){this._duplexState&=Z,this._writableState.updateNextTick()}_writev(L,Q){Q(null)}_write(L,Q){this._writableState.autoBatch(L,Q)}_final(L){L(null)}static isBackpressured(L){return!!(146800654&L._duplexState)}static drained(L){if(L.destroyed)return Promise.resolve(!1);const Q=L._writableState;var lt;const bt=((lt=L)._writev!==Tt.prototype._writev&&lt._writev!==Ue.prototype._writev?Math.min(1,Q.queue.length):Q.queue.length)+(L._duplexState&z?1:0);return bt===0?Promise.resolve(!0):(Q.drains===null&&(Q.drains=[]),new Promise(kt=>{Q.drains.push({writes:bt,resolve:kt})}))}write(L){return this._writableState.updateNextTick(),this._writableState.push(L)}end(L){return this._writableState.updateNextTick(),this._writableState.end(L),this}}class Ue extends te{constructor(L){super(L),this._duplexState=1|this._duplexState&v,this._writableState=new $(this,L),L&&(L.writev&&(this._writev=L.writev),L.write&&(this._write=L.write),L.final&&(this._final=L.final))}cork(){this._duplexState|=U}uncork(){this._duplexState&=Z,this._writableState.updateNextTick()}_writev(L,Q){Q(null)}_write(L,Q){this._writableState.autoBatch(L,Q)}_final(L){L(null)}write(L){return this._writableState.updateNextTick(),this._writableState.push(L)}end(L){return this._writableState.updateNextTick(),this._writableState.end(L),this}}class _n extends Ue{constructor(L){super(L),this._transformState=new H(this),L&&(L.transform&&(this._transform=L.transform),L.flush&&(this._flush=L.flush))}_write(L,Q){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=L:this._transform(L,this._transformState.afterTransform)}_read(L){if(this._transformState.data!==null){const Q=this._transformState.data;this._transformState.data=null,L(null),this._transform(Q,this._transformState.afterTransform)}else L(null)}destroy(L){super.destroy(L),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(L,Q){Q(null,L)}_flush(L){L(null)}_final(L){this._transformState.afterFinal=L,this._flush(ee.bind(this))}}function ee(at,L){const Q=this._transformState.afterFinal;if(at)return Q(at);L!=null&&this.push(L),this.push(null),Q(null)}function $n(at,...L){const Q=Array.isArray(at)?[...at,...L]:[at,...L],lt=Q.length&&typeof Q[Q.length-1]=="function"?Q.pop():null;if(Q.length<2)throw new Error("Pipeline requires at least 2 streams");let bt=Q[0],kt=null,jt=null;for(let Rt=1;Rt<Q.length;Rt++)kt=Q[Rt],on(bt)?bt.pipe(kt,an):(Ht(bt,!0,Rt>1,an),bt.pipe(kt)),bt=kt;if(lt){let Rt=!1;const Un=on(kt)||!(!kt._writableState||!kt._writableState.autoDestroy);kt.on("error",Vr=>{jt===null&&(jt=Vr)}),kt.on("finish",()=>{Rt=!0,Un||lt(jt)}),Un&&kt.on("close",()=>lt(jt||(Rt?null:i)))}return kt;function Ht(Rt,Un,Vr,Jr){Rt.on("error",Jr),Rt.on("close",function(){if(Rt._readableState&&!Rt._readableState.ended||Vr&&Rt._writableState&&!Rt._writableState.ended)return Jr(i)})}function an(Rt){if(Rt&&!jt){jt=Rt;for(const Un of Q)Un.destroy(Rt)}}}function Wr(at){return at}function lr(at){return!!at._readableState||!!at._writableState}function on(at){return typeof at._duplexState=="number"&&lr(at)}function Mn(at){return function(L){return typeof L=="object"&&L!==null&&typeof L.byteLength=="number"}(at)?at.byteLength:1024}function ze(){}function yn(){this.destroy(new Error("Stream aborted."))}n.exports={pipeline:$n,pipelinePromise:function(...at){return new Promise((L,Q)=>$n(...at,lt=>{if(lt)return Q(lt);L()}))},isStream:lr,isStreamx:on,isEnded:function(at){return!!at._readableState&&at._readableState.ended},isFinished:function(at){return!!at._writableState&&at._writableState.ended},isDisturbed:function(at){return!!(1&~at._duplexState)||!!(at._duplexState&Ot)},getStreamError:function(at,L={}){const Q=at._readableState&&at._readableState.error||at._writableState&&at._writableState.error;return L.all||Q!==r?Q:null},Stream:Wt,Writable:Tt,Readable:te,Duplex:Ue,Transform:_n,PassThrough:class extends _n{}}},5335:(n,t,e)=>{const s=e(3198),r=e(3198);n.exports=class{constructor(i="utf8"){switch(this.encoding=function(o){switch(o=o.toLowerCase()){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return o;default:throw new Error("Unknown encoding: "+o)}}(i),this.encoding){case"utf8":this.decoder=new r;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new s(this.encoding)}}get remaining(){return this.decoder.remaining}push(i){return typeof i=="string"?i:this.decoder.decode(i)}write(i){return this.push(i)}end(i){let o="";return i&&(o=this.push(i)),o+=this.decoder.flush(),o}}},3198:n=>{n.exports=class{constructor(t){this.decoder=new TextDecoder(t==="utf16le"?"utf16-le":t)}get remaining(){return-1}decode(t){return this.decoder.decode(t,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}},1035:n=>{function t(e){return(+Date.now()-e)/100&65535}n.exports=function(e){const s=+Date.now(),r=10*(e||5),i=[0];let o=1,a=t(s)-1&65535;return function(u){const c=t(s);let l=c-a&65535;for(l>r&&(l=r),a=c;l--;)o===r&&(o=0),i[o]=i[o===0?r-1:o-1],o++;u&&(i[o-1]+=u);const f=i[o-1],h=i.length<r?0:i[o===r?0:o];return i.length<10?f:10*(f-h)/i.length}}},1314:n=>{n.exports=function(t,e){if(!(e>=t.length||e<0)){var s=t.pop();if(e<t.length){var r=t[e];return t[e]=s,r}return s}}},6587:n=>{n.exports=function t(e,s){if(e&&s)return t(e)(s);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){r[i]=e[i]}),r;function r(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=e.apply(this,i),u=i[i.length-1];return typeof a=="function"&&a!==u&&Object.keys(u).forEach(function(c){a[c]=u[c]}),a}}},4343:()=>{},6686:()=>{},4043:()=>{},7828:()=>{},6889:()=>{},8878:()=>{},2701:()=>{},7264:()=>{},1551:()=>{},826:()=>{},61:()=>{},7936:()=>{},2532:()=>{},2123:()=>{},3208:()=>{},2376:()=>{},3970:()=>{},2799:()=>{},8271:()=>{},3278:()=>{},6664:()=>{},1827:()=>{},6819:(n,t,e)=>{n.exports=e(8330).version},5658:(n,t,e)=>{e.r(t),e.d(t,{default:()=>b,enableSecure:()=>g});var s=e(7007),r=e(8179),i=e(1314),o=e(7833),a=e(6458);const u="tcpIncoming",c="tcpOutgoing",l="utpIncoming",f="utpOutgoing",h="webSeed",d=o("webtorrent:peer");let p=!1;const g=()=>{p=!0};class b extends s{constructor(m,_){super(),this.id=m,this.type=_,d("new %s Peer %s",_,m),this.addr=null,this.conn=null,this.swarm=null,this.wire=null,this.source=null,this.connected=!1,this.destroyed=!1,this.timeout=null,this.retries=0,this.sentPe1=!1,this.sentPe2=!1,this.sentPe3=!1,this.sentPe4=!1,this.sentHandshake=!1}onConnect(){if(this.destroyed)return;this.connected=!0,d("Peer %s connected",this.id),clearTimeout(this.connectTimeout);const m=this.conn;m.once("end",()=>{this.destroy()}),m.once("close",()=>{this.destroy()}),m.once("finish",()=>{this.destroy()}),m.once("error",w=>{this.destroy(w)});const _=this.wire=new a.A(this.type,this.retries,p);_.once("end",()=>{this.destroy()}),_.once("close",()=>{this.destroy()}),_.once("finish",()=>{this.destroy()}),_.once("error",w=>{this.destroy(w)}),_.once("pe1",()=>{this.onPe1()}),_.once("pe2",()=>{this.onPe2()}),_.once("pe3",()=>{this.onPe3()}),_.once("pe4",()=>{this.onPe4()}),_.once("handshake",(w,v)=>{this.onHandshake(w,v)}),this.startHandshakeTimeout(),this.setThrottlePipes(),this.swarm&&(this.type==="tcpOutgoing"?p&&this.retries===0&&!this.sentPe1?this.sendPe1():this.sentHandshake||this.handshake():this.type==="tcpIncoming"||this.sentHandshake||this.handshake())}sendPe1(){this.wire.sendPe1(),this.sentPe1=!0}onPe1(){this.sendPe2()}sendPe2(){this.wire.sendPe2(),this.sentPe2=!0}onPe2(){this.sendPe3()}sendPe3(){this.wire.sendPe3(this.swarm.infoHash),this.sentPe3=!0}onPe3(m){this.swarm&&(this.swarm.infoHashHash!==m&&this.destroy(new Error("unexpected crypto handshake info hash for this swarm")),this.sendPe4())}sendPe4(){this.wire.sendPe4(this.swarm.infoHash),this.sentPe4=!0}onPe4(){this.sentHandshake||this.handshake()}clearPipes(){this.conn.unpipe(),this.wire.unpipe()}setThrottlePipes(){const m=this;(0,r.pipeline)(this.conn,this.throttleGroups.down.throttle(),new r.Transform({transform(_,w){m.emit("download",_.length),m.destroyed||w(null,_)}}),this.wire,this.throttleGroups.up.throttle(),new r.Transform({transform(_,w){m.emit("upload",_.length),m.destroyed||w(null,_)}}),this.conn)}onHandshake(m,_){if(!this.swarm||this.destroyed)return;if(this.swarm.destroyed)return this.destroy(new Error("swarm already destroyed"));if(m!==this.swarm.infoHash)return this.destroy(new Error("unexpected handshake info hash for this swarm"));if(_===this.swarm.peerId)return this.destroy(new Error("refusing to connect to ourselves"));d("Peer %s got handshake %s",this.id,m),clearTimeout(this.handshakeTimeout),this.retries=0;let w=this.addr;!w&&this.conn.remoteAddress&&this.conn.remotePort&&(w=`${this.conn.remoteAddress}:${this.conn.remotePort}`),this.swarm._onWire(this.wire,w),this.swarm&&!this.swarm.destroyed&&(this.sentHandshake||this.handshake())}handshake(){const m={dht:!this.swarm.private&&!!this.swarm.client.dht,fast:!0};this.wire.handshake(this.swarm.infoHash,this.swarm.client.peerId,m),this.sentHandshake=!0}startConnectTimeout(){clearTimeout(this.connectTimeout);const m={webrtc:25e3,tcpOutgoing:5e3,utpOutgoing:5e3};this.connectTimeout=setTimeout(()=>{this.destroy(new Error("connect timeout"))},m[this.type]),this.connectTimeout.unref&&this.connectTimeout.unref()}startHandshakeTimeout(){clearTimeout(this.handshakeTimeout),this.handshakeTimeout=setTimeout(()=>{this.destroy(new Error("handshake timeout"))},25e3),this.handshakeTimeout.unref&&this.handshakeTimeout.unref()}destroy(m){if(this.destroyed)return;this.destroyed=!0,this.connected=!1,d("destroy %s %s (error: %s)",this.type,this.id,m&&(m.message||m)),clearTimeout(this.connectTimeout),clearTimeout(this.handshakeTimeout);const _=this.swarm,w=this.conn,v=this.wire;this.swarm=null,this.conn=null,this.wire=null,_&&v&&i(_.wires,_.wires.indexOf(v)),w&&(w.on("error",()=>{}),w.destroy()),v&&v.destroy(),_&&_.removePeer(this.id)}}b.TYPE_TCP_INCOMING=u,b.TYPE_TCP_OUTGOING=c,b.TYPE_UTP_INCOMING=l,b.TYPE_UTP_OUTGOING=f,b.TYPE_WEBRTC="webrtc",b.TYPE_WEBSEED=h,b.SOURCE_MANUAL="manual",b.SOURCE_TRACKER="tracker",b.SOURCE_DHT="dht",b.SOURCE_LSD="lsd",b.SOURCE_UT_PEX="ut_pex",b.createWebRTCPeer=(y,m,_,w=null)=>{const v=new b(y.id,"webrtc");if(v.conn=y,v.swarm=m,v.throttleGroups=_,v.source=w,v.conn.connected)v.onConnect();else{const A=()=>{v.conn.removeListener("connect",E),v.conn.removeListener("error",P)},E=()=>{A(),v.onConnect()},P=T=>{A(),v.destroy(T)};v.conn.once("connect",E),v.conn.once("error",P),v.startConnectTimeout()}return v},b.createTCPIncomingPeer=(y,m)=>b._createIncomingPeer(y,u,m),b.createUTPIncomingPeer=(y,m)=>b._createIncomingPeer(y,l,m),b.createTCPOutgoingPeer=(y,m,_,w)=>b._createOutgoingPeer(y,m,c,_,w),b.createUTPOutgoingPeer=(y,m,_,w)=>b._createOutgoingPeer(y,m,f,_,w),b._createIncomingPeer=(y,m,_)=>{const w=`${y.remoteAddress}:${y.remotePort}`,v=new b(w,m);return v.conn=y,v.addr=w,v.throttleGroups=_,v.onConnect(),v},b._createOutgoingPeer=(y,m,_,w,v=null)=>{const A=new b(y,_);return A.addr=y,A.swarm=m,A.throttleGroups=w,A.source=v,A},b.createWebSeedPeer=(y,m,_,w)=>{const v=new b(m,h);return v.swarm=_,v.conn=y,v.throttleGroups=w,v.onConnect(),v}},988:(n,t,e)=>{e.d(t,{A:()=>p});var s=e(9639);function r(g){const b=g<0?1:0;return g=Math.abs(Number(g||1)),Math.floor(Math.log10(g))+1+b}function i(g){return ArrayBuffer.isView(g)?"arraybufferview":Array.isArray(g)?"array":g instanceof Number?"number":g instanceof Boolean?"boolean":g instanceof Set?"set":g instanceof Map?"map":g instanceof String?"string":g instanceof ArrayBuffer?"arraybuffer":typeof g}function o(g,b,y){const m=[];let _=null;return o._encode(m,g),_=(0,s.xW)(m),o.bytes=_.length,ArrayBuffer.isView(b)?(b.set(_,y),b):_}o.bytes=-1,o._floatConversionDetected=!1,o._encode=function(g,b){if(b!=null)switch(i(b)){case"object":o.dict(g,b);break;case"map":o.dictMap(g,b);break;case"array":o.list(g,b);break;case"set":o.listSet(g,b);break;case"string":o.string(g,b);break;case"number":case"boolean":o.number(g,b);break;case"arraybufferview":o.buffer(g,new Uint8Array(b.buffer,b.byteOffset,b.byteLength));break;case"arraybuffer":o.buffer(g,new Uint8Array(b))}};const a=new Uint8Array([101]),u=new Uint8Array([100]),c=new Uint8Array([108]);o.buffer=function(g,b){g.push((0,s.L0)(b.length+":"),b)},o.string=function(g,b){g.push((0,s.L0)((0,s.L0)(b).byteLength+":"+b))},o.number=function(g,b){if(Number.isInteger(b))return g.push((0,s.L0)("i"+BigInt(b)+"e"));const y=2147483648,m=(b/y|0)*y+(b%y|0);g.push((0,s.L0)("i"+m+"e")),m===b||o._floatConversionDetected||(o._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+b+'":','Bencoding only defines support for integers, value was converted to "'+m+'"'),console.trace())},o.dict=function(g,b){g.push(u);let y,m=0;const _=Object.keys(b).sort(),w=_.length;for(;m<w;m++)y=_[m],b[y]!=null&&(o.string(g,y),o._encode(g,b[y]));g.push(a)},o.dictMap=function(g,b){g.push(u);const y=Array.from(b.keys()).sort();for(const m of y)b.get(m)!=null&&(ArrayBuffer.isView(m)?o._encode(g,m):o.string(g,String(m)),o._encode(g,b.get(m)));g.push(a)},o.list=function(g,b){let y=0;const m=b.length;for(g.push(c);y<m;y++)b[y]!=null&&o._encode(g,b[y]);g.push(a)},o.listSet=function(g,b){g.push(c);for(const y of b)y!=null&&o._encode(g,y);g.push(a)};const l=o;function f(g,b,y){let m=0,_=1;for(let w=b;w<y;w++){const v=g[w];if(v<58&&v>=48)m=10*m+(v-48);else if(w!==b||v!==43){if(w!==b||v!==45){if(v===46)break;throw new Error("not a number: buffer["+w+"] = "+v)}_=-1}}return m*_}function h(g,b,y,m){return g==null||g.length===0?null:(typeof b!="number"&&m==null&&(m=b,b=void 0),typeof y!="number"&&m==null&&(m=y,y=void 0),h.position=0,h.encoding=m||null,h.data=ArrayBuffer.isView(g)?new Uint8Array(g.slice(b,y)):(0,s.L0)(g),h.bytes=h.data.length,h.next())}h.bytes=0,h.position=0,h.data=null,h.encoding=null,h.next=function(){switch(h.data[h.position]){case 100:return h.dictionary();case 108:return h.list();case 105:return h.integer();default:return h.buffer()}},h.find=function(g){let b=h.position;const y=h.data.length,m=h.data;for(;b<y;){if(m[b]===g)return b;b++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(g)+'" [0x'+g.toString(16)+"]")},h.dictionary=function(){h.position++;const g={};for(;h.data[h.position]!==101;){const b=h.buffer();let y=(0,s.dU)(b);y.includes("�")&&(y=(0,s.V5)(b)),g[y]=h.next()}return h.position++,g},h.list=function(){h.position++;const g=[];for(;h.data[h.position]!==101;)g.push(h.next());return h.position++,g},h.integer=function(){const g=h.find(101),b=f(h.data,h.position+1,g);return h.position+=g+1-h.position,b},h.buffer=function(){let g=h.find(58);const b=f(h.data,h.position,g),y=++g+b;return h.position=y,h.encoding?(0,s.dU)(h.data.slice(g,y)):h.data.slice(g,y)};function d(g){if(g==null)return 0;const b=i(g);switch(b){case"arraybufferview":return function(y){const m=y.byteLength-y.byteOffset;return r(m)+1+m}(g);case"string":return function(y){const m=(0,s.L0)(y).byteLength;return r(m)+1+m}(g);case"array":case"set":return function(y){let m=2;for(const _ of y)m+=d(_);return m}(g);case"number":return 1+r(Math.floor(g))+1;case"bigint":return 1+g.toString().length+1;case"object":return function(y){let m=2;const _=Object.keys(y);for(let w=0;w<_.length;w++){const v=(0,s.L0)(_[w]).byteLength;m+=r(v)+1+v,m+=d(y[_[w]])}return m}(g);case"map":return function(y){let m=2;for(const[_,w]of y){const v=(0,s.L0)(_).byteLength;m+=r(v)+1+v,m+=d(w)}return m}(g);default:throw new TypeError(`Unsupported value of type "${b}"`)}}const p={encode:l,decode:h,byteLength:d,encodingLength:d}},3033:(n,t,e)=>{function s(i){return(i>>3)+ +(i%8!=0)}e.d(t,{A:()=>r});class r{get length(){return this.buffer.length<<3}constructor(o=0,a){const u=a==null?void 0:a.grow;this.grow=u?Number.isFinite(u)?s(u):u:0,this.buffer=typeof o=="number"?new Uint8Array(s(o)):o}get(o){const a=o>>3;return a<this.buffer.length&&!!(this.buffer[a]&128>>o%8)}set(o,a=!0){const u=o>>3;if(a){if(u>=this.buffer.length){const c=Math.max(u+1,Math.min(2*this.buffer.length,this.grow));if(c<=this.grow){const l=new Uint8Array(c);l.set(this.buffer),this.buffer=l}}this.buffer[u]|=128>>o%8}else u<this.buffer.length&&(this.buffer[u]&=~(128>>o%8))}setAll(o,a=0){const u=Math.min(s(a+o.length),this.grow);if(this.buffer.length<u){const f=new Uint8Array(u);f.set(this.buffer),this.buffer=f}let c=a>>3,l=128>>a%8;for(let f=0;f<o.length;f++)if(o[f]?this.buffer[c]|=l:this.buffer[c]&=~l,l===1){if(c+=1,c>=this.buffer.length)break;l=128}else l>>=1}forEach(o,a=0,u=8*this.buffer.length){let c=a>>3,l=128>>a%8;for(let f=a;f<u;f++)o(!!(this.buffer[c]&l),f),l===1?(c+=1,l=128):l>>=1}isEmpty(){for(let o=0;o<this.buffer.length;o++)if(this.buffer[o]!==0)return!1;return!0}}},6458:(n,t,e)=>{e.d(t,{A:()=>x});var s=e(988),r=e(3033),i=e(7264),o=e(7833),a=e(8727),u=e(8179),c=e(9639),l=e(1035),f=e(1314);const h=o("bittorrent-protocol"),d=(0,c.L0)("BitTorrent protocol"),p=new Uint8Array([0,0,0,0]),g=new Uint8Array([0,0,0,1,0]),b=new Uint8Array([0,0,0,1,1]),y=new Uint8Array([0,0,0,1,2]),m=new Uint8Array([0,0,0,1,3]),_=[0,0,0,0,0,0,0,0],w=[0,0,0,3,9,0,0],v=new Uint8Array([0,0,0,1,14]),A=new Uint8Array([0,0,0,1,15]),E=new Uint8Array([0,0,0,0,0,0,0,0]),P=new Uint8Array([0,0,1,2]),T=new Uint8Array([0,0,0,2]);function I(j,D){for(let C=j.length;C--;)j[C]^=D[C];return j}class F{constructor(D,C,R,N){this.piece=D,this.offset=C,this.length=R,this.callback=N}}class k{constructor(){this.buffer=new Uint8Array}get(D){return!0}set(D){}}class S extends u.Duplex{constructor(D=null,C=0,R=!1){super(),this._debugId=(0,c.V5)((0,c.po)(4)),this._debug("new wire"),this.peerId=null,this.peerIdBuffer=null,this.type=D,this.amChoking=!0,this.amInterested=!1,this.peerChoking=!0,this.peerInterested=!1,this.peerPieces=new r.A(0,{grow:4e5}),this.extensions={},this.peerExtensions={},this.requests=[],this.peerRequests=[],this.extendedMapping={},this.peerExtendedMapping={},this.extendedHandshake={},this.peerExtendedHandshake={},this.hasFast=!1,this.allowedFastSet=[],this.peerAllowedFastSet=[],this._ext={},this._nextExt=1,this.uploaded=0,this.downloaded=0,this.uploadSpeed=l(),this.downloadSpeed=l(),this._keepAliveInterval=null,this._timeout=null,this._timeoutMs=0,this._timeoutExpiresAt=null,this._finished=!1,this._parserSize=0,this._parser=null,this._buffer=[],this._bufferSize=0,this._peEnabled=R,R?(this._dh=i.createDiffieHellman("ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a36210000000000090563","hex",2),this._myPubKey=this._dh.generateKeys("hex")):this._myPubKey=null,this._peerPubKey=null,this._sharedSecret=null,this._peerCryptoProvide=[],this._cryptoHandshakeDone=!1,this._cryptoSyncPattern=null,this._waitMaxBytes=null,this._encryptionMethod=null,this._encryptGenerator=null,this._decryptGenerator=null,this._setGenerators=!1,this.once("finish",()=>this._onFinish()),this.on("finish",this._onFinish),this._debug("type:",this.type),this.type==="tcpIncoming"&&this._peEnabled?this._determineHandshakeType():this.type==="tcpOutgoing"&&this._peEnabled&&C===0?this._parsePe2():this._parseHandshake(null)}setKeepAlive(D){this._debug("setKeepAlive %s",D),clearInterval(this._keepAliveInterval),D!==!1&&(this._keepAliveInterval=setInterval(()=>{this.keepAlive()},55e3))}setTimeout(D,C){this._debug("setTimeout ms=%d unref=%s",D,C),this._timeoutMs=D,this._timeoutUnref=!!C,this._resetTimeout(!0)}destroy(){if(!this.destroyed)return this._debug("destroy"),this.end(),this}end(D){if(!this.destroyed&&!this.destroying)return this._debug("end"),this._onUninterested(),this._onChoke(),super.end(D)}use(D){const C=D.prototype.name;if(!C)throw new Error('Extension class requires a "name" property on the prototype');this._debug("use extension.name=%s",C);const R=this._nextExt,N=new D(this);function z(){}typeof N.onHandshake!="function"&&(N.onHandshake=z),typeof N.onExtendedHandshake!="function"&&(N.onExtendedHandshake=z),typeof N.onMessage!="function"&&(N.onMessage=z),this.extendedMapping[R]=C,this._ext[C]=N,this[C]=N,this._nextExt+=1}keepAlive(){this._debug("keep-alive"),this._push(p)}sendPe1(){if(this._peEnabled){const D=Math.floor(513*Math.random()),C=(0,c.po)(D);this._push((0,c.xW)([(0,c.fk)(this._myPubKey),C]))}}sendPe2(){const D=Math.floor(513*Math.random()),C=(0,c.po)(D);this._push((0,c.xW)([(0,c.fk)(this._myPubKey),C]))}async sendPe3(D){await this.setEncrypt(this._sharedSecret,D);const C=await(0,c.tW)((0,c.fk)(this._utfToHex("req1")+this._sharedSecret)),R=I(await(0,c.tW)((0,c.fk)(this._utfToHex("req2")+D)),await(0,c.tW)((0,c.fk)(this._utfToHex("req3")+this._sharedSecret))),N=new DataView((0,c.po)(2).buffer).getUint16(0)%512,z=(0,c.po)(N);let M=new Uint8Array(14+N+2);M.set(E),M.set(P,8);const U=new DataView(M.buffer);U.setInt16(12,N),z.copy(M,14),U.setInt16(14+N,0),M=this._encryptHandshake(M),this._push((0,c.xW)([C,R,M]))}async sendPe4(D){await this.setEncrypt(this._sharedSecret,D);const C=new DataView((0,c.po)(2).buffer).getUint16(0)%512,R=(0,c.po)(C);let N=new Uint8Array(14+C);const z=new DataView(N.buffer);N.set(E),N.set(T,8),z.setInt16(12,C),N.set(R,14),N=this._encryptHandshake(N),this._push(N),this._cryptoHandshakeDone=!0,this._debug("completed crypto handshake")}handshake(D,C,R){let N,z;if(typeof D=="string"?(D=D.toLowerCase(),N=(0,c.fk)(D)):(N=D,D=(0,c.V5)(N)),typeof C=="string"?z=(0,c.fk)(C):(z=C,C=(0,c.V5)(z)),this._infoHash=N,N.length!==20||z.length!==20)throw new Error("infoHash and peerId MUST have length 20");this._debug("handshake i=%s p=%s exts=%o",D,C,R);const M=new Uint8Array(_);this.extensions={extended:!0,dht:!(!R||!R.dht),fast:!(!R||!R.fast)},M[5]|=16,this.extensions.dht&&(M[7]|=1),this.extensions.fast&&(M[7]|=4),this.extensions.fast&&this.peerExtensions.fast&&(this._debug("fast extension is enabled"),this.hasFast=!0),this._push((0,c.xW)([d,M,N,z])),this._handshakeSent=!0,this.peerExtensions.extended&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_sendExtendedHandshake(){const D=Object.assign({},this.extendedHandshake);D.m={};for(const C in this.extendedMapping){const R=this.extendedMapping[C];D.m[R]=Number(C)}this.extended(0,s.A.encode(D)),this._extendedHandshakeSent=!0}choke(){if(!this.amChoking)if(this.amChoking=!0,this._debug("choke"),this._push(g),this.hasFast){let D=0;for(;this.peerRequests.length>D;){const C=this.peerRequests[D];this.allowedFastSet.includes(C.piece)?++D:this.reject(C.piece,C.offset,C.length)}}else for(;this.peerRequests.length;)this.peerRequests.pop()}unchoke(){this.amChoking&&(this.amChoking=!1,this._debug("unchoke"),this._push(b))}interested(){this.amInterested||(this.amInterested=!0,this._debug("interested"),this._push(y))}uninterested(){this.amInterested&&(this.amInterested=!1,this._debug("uninterested"),this._push(m))}have(D){this._debug("have %d",D),this._message(4,[D],null)}bitfield(D){this._debug("bitfield"),ArrayBuffer.isView(D)||(D=D.buffer),this._message(5,[],D)}request(D,C,R,N){return N||(N=()=>{}),this._finished?N(new Error("wire is closed")):!this.peerChoking||this.hasFast&&this.peerAllowedFastSet.includes(D)?(this._debug("request index=%d offset=%d length=%d",D,C,R),this.requests.push(new F(D,C,R,N)),this._timeout||this._resetTimeout(!0),void this._message(6,[D,C,R],null)):N(new Error("peer is choking"))}piece(D,C,R){this._debug("piece index=%d offset=%d",D,C),this._message(7,[D,C],R),this.uploaded+=R.length,this.uploadSpeed(R.length),this.emit("upload",R.length)}cancel(D,C,R){this._debug("cancel index=%d offset=%d length=%d",D,C,R),this._callback(this._pull(this.requests,D,C,R),new Error("request was cancelled"),null),this._message(8,[D,C,R],null)}port(D){this._debug("port %d",D);const C=new Uint8Array(w);new DataView(C.buffer).setUint16(5,D),this._push(C)}suggest(D){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("suggest %d",D),this._message(13,[D],null)}haveAll(){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("have-all"),this._push(v)}haveNone(){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("have-none"),this._push(A)}reject(D,C,R){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("reject index=%d offset=%d length=%d",D,C,R),this._pull(this.peerRequests,D,C,R),this._message(16,[D,C,R],null)}allowedFast(D){if(!this.hasFast)throw Error("fast extension is disabled");this._debug("allowed-fast %d",D),this.allowedFastSet.includes(D)||this.allowedFastSet.push(D),this._message(17,[D],null)}extended(D,C){if(this._debug("extended ext=%s",D),typeof D=="string"&&this.peerExtendedMapping[D]&&(D=this.peerExtendedMapping[D]),typeof D!="number")throw new Error(`Unrecognized extension: ${D}`);{const R=new Uint8Array([D]),N=ArrayBuffer.isView(C)?C:s.A.encode(C);this._message(20,[],(0,c.xW)([R,N]))}}async setEncrypt(D,C){let R,N,z,M;switch(this.type){case"tcpIncoming":R=await(0,c.tW)((0,c.fk)(this._utfToHex("keyB")+D+C)),z=await(0,c.tW)((0,c.fk)(this._utfToHex("keyA")+D+C)),N=[];for(const U of R.values())N.push(U);M=[];for(const U of z.values())M.push(U);this._encryptGenerator=new a(N),this._decryptGenerator=new a(M);break;case"tcpOutgoing":R=await(0,c.tW)((0,c.fk)(this._utfToHex("keyA")+D+C)),z=await(0,c.tW)((0,c.fk)(this._utfToHex("keyB")+D+C)),N=[];for(const U of R.values())N.push(U);M=[];for(const U of z.values())M.push(U);this._encryptGenerator=new a(N),this._decryptGenerator=new a(M);break;default:return!1}for(let U=0;U<1024;U++)this._encryptGenerator.randomByte(),this._decryptGenerator.randomByte();return this._setGenerators=!0,!0}_message(D,C,R){const N=R?R.length:0,z=new Uint8Array(5+4*C.length),M=new DataView(z.buffer);M.setUint32(0,z.length+N-4),z[4]=D;for(let U=0;U<C.length;U++)M.setUint32(5+4*U,C[U]);this._push(z),R&&this._push(R)}_push(D){if(!this._finished)return this._encryptionMethod===2&&this._cryptoHandshakeDone&&(D=this._encrypt(D)),this.push(D)}_onKeepAlive(){this._debug("got keep-alive"),this.emit("keep-alive")}_onPe1(D){this._peerPubKey=(0,c.V5)(D),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe1")}_onPe2(D){this._peerPubKey=(0,c.V5)(D),this._sharedSecret=this._dh.computeSecret(this._peerPubKey,"hex","hex"),this.emit("pe2")}async _onPe3(D){const C=await(0,c.V5)(this._utfToHex("req3")+this._sharedSecret),R=(0,c.V5)(I(C,D));this.emit("pe3",R)}_onPe3Encrypted(D,C){if(!(0,c.LC)(D,E))return this._debug("Error: verification constant did not match"),void this.destroy();for(const R of C.values())R!==0&&this._peerCryptoProvide.push(R);this._peerCryptoProvide.includes(2)?this._encryptionMethod=2:(this._debug("Error: RC4 encryption method not provided by peer"),this.destroy())}_onPe4(D){this._encryptionMethod=D[3],P.includes(this._encryptionMethod)||(this._debug("Error: peer selected invalid crypto method"),this.destroy()),this._cryptoHandshakeDone=!0,this._debug("crypto handshake done"),this.emit("pe4")}_onHandshake(D,C,R){const N=(0,c.V5)(D),z=(0,c.V5)(C);this._debug("got handshake i=%s p=%s exts=%o",N,z,R),this.peerId=z,this.peerIdBuffer=C,this.peerExtensions=R,this.extensions.fast&&this.peerExtensions.fast&&(this._debug("fast extension is enabled"),this.hasFast=!0),this.emit("handshake",N,z,R);for(const M in this._ext)this._ext[M].onHandshake(N,z,R);R.extended&&this._handshakeSent&&!this._extendedHandshakeSent&&this._sendExtendedHandshake()}_onChoke(){if(this.peerChoking=!0,this._debug("got choke"),this.emit("choke"),!this.hasFast)for(;this.requests.length;)this._callback(this.requests.pop(),new Error("peer is choking"),null)}_onUnchoke(){this.peerChoking=!1,this._debug("got unchoke"),this.emit("unchoke")}_onInterested(){this.peerInterested=!0,this._debug("got interested"),this.emit("interested")}_onUninterested(){this.peerInterested=!1,this._debug("got uninterested"),this.emit("uninterested")}_onHave(D){this.peerPieces.get(D)||(this._debug("got have %d",D),this.peerPieces.set(D,!0),this.emit("have",D))}_onBitField(D){this.peerPieces=new r.A(D),this._debug("got bitfield"),this.emit("bitfield",this.peerPieces)}_onRequest(D,C,R){if(this.amChoking&&(!this.hasFast||!this.allowedFastSet.includes(D)))return void(this.hasFast&&this.reject(D,C,R));this._debug("got request index=%d offset=%d length=%d",D,C,R);const N=(M,U)=>{if(z===this._pull(this.peerRequests,D,C,R))return M?(this._debug("error satisfying request index=%d offset=%d length=%d (%s)",D,C,R,M.message),void(this.hasFast&&this.reject(D,C,R))):void this.piece(D,C,U)},z=new F(D,C,R,N);this.peerRequests.push(z),this.emit("request",D,C,R,N)}_onPiece(D,C,R){this._debug("got piece index=%d offset=%d",D,C),this._callback(this._pull(this.requests,D,C,R.length),null,R),this.downloaded+=R.length,this.downloadSpeed(R.length),this.emit("download",R.length),this.emit("piece",D,C,R)}_onCancel(D,C,R){this._debug("got cancel index=%d offset=%d length=%d",D,C,R),this._pull(this.peerRequests,D,C,R),this.emit("cancel",D,C,R)}_onPort(D){this._debug("got port %d",D),this.emit("port",D)}_onSuggest(D){if(!this.hasFast)return this._debug("Error: got suggest whereas fast extension is disabled"),void this.destroy();this._debug("got suggest %d",D),this.emit("suggest",D)}_onHaveAll(){if(!this.hasFast)return this._debug("Error: got have-all whereas fast extension is disabled"),void this.destroy();this._debug("got have-all"),this.peerPieces=new k,this.emit("have-all")}_onHaveNone(){if(!this.hasFast)return this._debug("Error: got have-none whereas fast extension is disabled"),void this.destroy();this._debug("got have-none"),this.emit("have-none")}_onReject(D,C,R){if(!this.hasFast)return this._debug("Error: got reject whereas fast extension is disabled"),void this.destroy();this._debug("got reject index=%d offset=%d length=%d",D,C,R),this._callback(this._pull(this.requests,D,C,R),new Error("request was rejected"),null),this.emit("reject",D,C,R)}_onAllowedFast(D){if(!this.hasFast)return this._debug("Error: got allowed-fast whereas fast extension is disabled"),void this.destroy();this._debug("got allowed-fast %d",D),this.peerAllowedFastSet.includes(D)||this.peerAllowedFastSet.push(D),this.peerAllowedFastSet.length>100&&this.peerAllowedFastSet.shift(),this.emit("allowed-fast",D)}_onExtended(D,C){if(D===0){let R;try{R=s.A.decode(C)}catch(N){this._debug("ignoring invalid extended handshake: %s",N.message||N)}if(!R)return;if(this.peerExtendedHandshake=R,typeof R.m=="object")for(const N in R.m)this.peerExtendedMapping[N]=Number(R.m[N].toString());for(const N in this._ext)this.peerExtendedMapping[N]&&this._ext[N].onExtendedHandshake(this.peerExtendedHandshake);this._debug("got extended handshake"),this.emit("extended","handshake",this.peerExtendedHandshake)}else this.extendedMapping[D]&&(D=this.extendedMapping[D],this._ext[D]&&this._ext[D].onMessage(C)),this._debug("got extended message ext=%s",D),this.emit("extended",D,C)}_onTimeout(){this._debug("request timed out"),this._callback(this.requests.shift(),new Error("request has timed out"),null),this.emit("timeout")}_write(D,C){if(this._encryptionMethod===2&&this._cryptoHandshakeDone&&(D=this._decrypt(D)),this._bufferSize+=D.length,this._buffer.push(D),this._buffer.length>1&&(this._buffer=[(0,c.xW)(this._buffer,this._bufferSize)]),this._cryptoSyncPattern){const R=this._buffer[0].indexOf(this._cryptoSyncPattern);if(R!==-1)this._buffer[0]=this._buffer[0].slice(R+this._cryptoSyncPattern.length),this._bufferSize-=R+this._cryptoSyncPattern.length,this._cryptoSyncPattern=null;else if(this._bufferSize+D.length>this._waitMaxBytes+this._cryptoSyncPattern.length)return this._debug("Error: could not resynchronize"),void this.destroy()}for(;this._bufferSize>=this._parserSize&&!this._cryptoSyncPattern;)if(this._parserSize===0)this._parser(new Uint8Array);else{const R=this._buffer[0];this._bufferSize-=this._parserSize,this._buffer=this._bufferSize?[R.slice(this._parserSize)]:[],this._parser(R.slice(0,this._parserSize))}C(null)}_callback(D,C,R){D&&(this._resetTimeout(!this.peerChoking&&!this._finished),D.callback(C,R))}_resetTimeout(D){if(!D||!this._timeoutMs||!this.requests.length)return clearTimeout(this._timeout),this._timeout=null,void(this._timeoutExpiresAt=null);const C=Date.now()+this._timeoutMs;if(this._timeout){if(C-this._timeoutExpiresAt<.05*this._timeoutMs)return;clearTimeout(this._timeout)}this._timeoutExpiresAt=C,this._timeout=setTimeout(()=>this._onTimeout(),this._timeoutMs),this._timeoutUnref&&this._timeout.unref&&this._timeout.unref()}_parse(D,C){this._parserSize=D,this._parser=C}_parseUntil(D,C){this._cryptoSyncPattern=D,this._waitMaxBytes=C}_onMessageLength(D){const C=new DataView(D.buffer,D.byteOffset,D.byteLength).getUint32(0);C>0?this._parse(C,this._onMessage):(this._onKeepAlive(),this._parse(4,this._onMessageLength))}_onMessage(D){this._parse(4,this._onMessageLength);const C=new DataView(D.buffer,D.byteOffset,D.byteLength);switch(D[0]){case 0:return this._onChoke();case 1:return this._onUnchoke();case 2:return this._onInterested();case 3:return this._onUninterested();case 4:return this._onHave(C.getUint32(1));case 5:return this._onBitField(D.slice(1));case 6:return this._onRequest(C.getUint32(1),C.getUint32(5),C.getUint32(9));case 7:return this._onPiece(C.getUint32(1),C.getUint32(5),D.slice(9));case 8:return this._onCancel(C.getUint32(1),C.getUint32(5),C.getUint32(9));case 9:return this._onPort(C.getUint16(1));case 13:return this._onSuggest(C.getUint32(1));case 14:return this._onHaveAll();case 15:return this._onHaveNone();case 16:return this._onReject(C.getUint32(1),C.getUint32(5),C.getUint32(9));case 17:return this._onAllowedFast(C.getUint32(1));case 20:return this._onExtended(D[1],D.slice(2));default:return this._debug("got unknown message"),this.emit("unknownmessage",D)}}_determineHandshakeType(){this._parse(1,D=>{const C=D[0];C===19?this._parse(C+48,this._onHandshakeBuffer):this._parsePe1(D)})}_parsePe1(D){this._parse(95,C=>{this._onPe1((0,c.xW)([D,C])),this._parsePe3()})}_parsePe2(){this._parse(96,D=>{for(this._onPe2(D);!this._setGenerators;);this._parsePe4()})}async _parsePe3(){const D=await(0,c.tW)((0,c.fk)(this._utfToHex("req1")+this._sharedSecret));this._parseUntil(D,512),this._parse(20,C=>{for(this._onPe3(C);!this._setGenerators;);this._parsePe3Encrypted()})}_parsePe3Encrypted(){this._parse(14,D=>{const C=this._decryptHandshake(D.slice(0,8)),R=this._decryptHandshake(D.slice(8,12)),N=new DataView(this._decryptHandshake(D.slice(12,14)).buffer).getUint16(0);this._parse(N,z=>{z=this._decryptHandshake(z),this._parse(2,M=>{const U=new DataView(this._decryptHandshake(M).buffer).getUint16(0);this._parse(U,tt=>{tt=this._decryptHandshake(tt),this._onPe3Encrypted(C,R,z,tt);const X=U?tt[0]:null,Z=U?tt.slice(1,20):null;X===19&&(0,c.dU)(Z)==="BitTorrent protocol"?this._onHandshakeBuffer(tt.slice(1)):this._parseHandshake()})})})})}_parsePe4(){const D=this._decryptHandshake(E);this._parseUntil(D,512),this._parse(6,C=>{const R=this._decryptHandshake(C.slice(0,4)),N=new DataView(this._decryptHandshake(C.slice(4,6)).buffer).getUint16(0);this._parse(N,z=>{this._decryptHandshake(z),this._onPe4(R),this._parseHandshake(null)})})}_parseHandshake(){this._parse(1,D=>{const C=D[0];if(C!==19)return this._debug("Error: wire not speaking BitTorrent protocol (%s)",C.toString()),void this.end();this._parse(C+48,this._onHandshakeBuffer)})}_onHandshakeBuffer(D){const C=D.slice(0,19);if((0,c.dU)(C)!=="BitTorrent protocol")return this._debug("Error: wire not speaking BitTorrent protocol (%s)",(0,c.dU)(C)),void this.end();D=D.slice(19),this._onHandshake(D.slice(8,28),D.slice(28,48),{dht:!!(1&D[7]),fast:!!(4&D[7]),extended:!!(16&D[5])}),this._parse(4,this._onMessageLength)}_onFinish(){for(this._finished=!0,this.push(null);this.read(););for(clearInterval(this._keepAliveInterval),this._parse(Number.MAX_VALUE,()=>{});this.peerRequests.length;)this.peerRequests.pop();for(;this.requests.length;)this._callback(this.requests.pop(),new Error("wire was closed"),null)}_debug(...D){D[0]=`[${this._debugId}] ${D[0]}`,h(...D)}_pull(D,C,R,N){for(let z=0;z<D.length;z++){const M=D[z];if(M.piece===C&&M.offset===R&&M.length===N)return f(D,z),M}return null}_encryptHandshake(D){const C=new Uint8Array(D);if(!this._encryptGenerator)return this._debug("Warning: Encrypting without any generator"),C;for(let R=0;R<D.length;R++){const N=this._encryptGenerator.randomByte();C[R]=C[R]^N}return C}_encrypt(D){const C=new Uint8Array(D);if(!this._encryptGenerator||this._encryptionMethod!==2)return C;for(let R=0;R<D.length;R++){const N=this._encryptGenerator.randomByte();C[R]=C[R]^N}return C}_decryptHandshake(D){const C=new Uint8Array(D);if(!this._decryptGenerator)return this._debug("Warning: Decrypting without any generator"),C;for(let R=0;R<D.length;R++){const N=this._decryptGenerator.randomByte();C[R]=C[R]^N}return C}_decrypt(D){const C=new Uint8Array(D);if(!this._decryptGenerator||this._encryptionMethod!==2)return C;for(let R=0;R<D.length;R++){const N=this._decryptGenerator.randomByte();C[R]=C[R]^N}return C}_utfToHex(D){return(0,c.V5)((0,c.L0)(D))}}const x=S},9639:(n,t,e)=>{e.d(t,{NJ:()=>y,V5:()=>o,dU:()=>p,HB:()=>m,xW:()=>u,LC:()=>c,tW:()=>P,fk:()=>a,Ht:()=>_,po:()=>T,L0:()=>b});const s="0123456789abcdef",r=[],i=[];for(let I=0;I<256;I++)r[I]=s[I>>4&15]+s[15&I],I<16&&(I<10?i[48+I]=I:i[87+I]=I);const o=I=>{const F=I.length;let k="",S=0;for(;S<F;)k+=r[I[S++]];return k},a=I=>{const F=I.length>>1,k=F<<1,S=new Uint8Array(F);let x=0,j=0;for(;j<k;)S[x++]=i[I.charCodeAt(j++)]<<4|i[I.charCodeAt(j++)];return S},u=(I,F=0)=>{const k=I.length||0;if(!F){let D=k;for(;D--;)F+=I[D].length}const S=new Uint8Array(F);let x=F,j=k;for(;j--;)x-=I[j].length,S.set(I[j],x);return S},c=(I,F)=>{if(I.length!==F.length)return!1;for(let k=I.length;k>-1;k-=1)if(I[k]!==F[k])return!1;return!0};for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=typeof Uint8Array>"u"?[]:new Uint8Array(256),h=0;h<64;h++)f[l.charCodeAt(h)]=h;const d=new TextDecoder,p=(I,F)=>F?new TextDecoder(F).decode(I):d.decode(I),g=new TextEncoder,b=I=>g.encode(I),y=I=>function(F){var k,S=new Uint8Array(F),x=S.length,j="";for(k=0;k<x;k+=3)j+=l[S[k]>>2],j+=l[(3&S[k])<<4|S[k+1]>>4],j+=l[(15&S[k+1])<<2|S[k+2]>>6],j+=l[63&S[k+2]];return x%3==2?j=j.substring(0,j.length-1)+"=":x%3==1&&(j=j.substring(0,j.length-2)+"=="),j}(I),m=I=>{let F,k="",S=0;const x=I.length;for(;S<x;)F=I.charCodeAt(S++),k+=s[F>>4]+s[15&F];return k},_=I=>{const F=a(I);if(F.length<=65536)return String.fromCharCode(...F);let k="",S=0;for(;S<F.length;)k+=String.fromCharCode(...F.subarray(S,S+=65536));return k},w=typeof window<"u"?window:self,v=w.crypto||w.msCrypto||{},A=v.subtle||v.webkitSubtle,E={hex:o,base64:y},P=async(I,F,k="sha-1")=>{if(!A)throw new Error("no web crypto support");typeof I=="string"&&(I=b(I));const S=new Uint8Array(await A.digest(k,I));return F?E[F](S):S},T=I=>{const F=new Uint8Array(I);return v.getRandomValues(F)}},717:(n,t,e)=>{e.r(t),e.d(t,{addListener:()=>h,argv:()=>a,binding:()=>P,browser:()=>i,chdir:()=>T,cwd:()=>A,emit:()=>y,env:()=>o,listeners:()=>v,nextTick:()=>w,off:()=>p,on:()=>f,once:()=>d,prependListener:()=>m,prependOnceListener:()=>_,removeAllListeners:()=>b,removeListener:()=>g,title:()=>r,umask:()=>E,version:()=>u,versions:()=>c});var s=e(9596);const r="browser",i=!0,o={},a=[],u="",c={};function l(){}const f=l,h=l,d=l,p=l,g=l,b=l,y=l,m=l,_=l,w=(I,...F)=>s(()=>I(...F)),v=I=>[],A=()=>"/",E=()=>0,P=I=>{throw new Error("process.binding is not supported")},T=I=>{throw new Error("process.chdir is not supported")}},8330:n=>{n.exports={version:"2.5.19"}}},Eo={};function ot(n){var t=Eo[n];if(t!==void 0)return t.exports;var e=Eo[n]={exports:{}};return Hp[n](e,e.exports,ot),e.exports}vn=Object.getPrototypeOf?n=>Object.getPrototypeOf(n):n=>n.__proto__,ot.t=function(n,t){if(1&t&&(n=this(n)),8&t||typeof n=="object"&&n&&(4&t&&n.__esModule||16&t&&typeof n.then=="function"))return n;var e=Object.create(null);ot.r(e);var s={};pi=pi||[null,vn({}),vn([]),vn(vn)];for(var r=2&t&&n;typeof r=="object"&&!~pi.indexOf(r);r=vn(r))Object.getOwnPropertyNames(r).forEach(i=>s[i]=()=>n[i]);return s.default=()=>n,ot.d(e,s),e},ot.d=(n,t)=>{for(var e in t)ot.o(t,e)&&!ot.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})},ot.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),ot.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var Sl={};ot.d(Sl,{A:()=>Pn});var Me=ot(7007);function Fr(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function qp(n,t){let e,s="",r=0,i=-1,o=0;for(let a=0;a<=n.length;++a){if(a<n.length)e=n.charCodeAt(a);else{if(e===47)break;e=47}if(e===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){const u=s.lastIndexOf("/");if(u!==s.length-1){u===-1?(s="",r=0):(s=s.slice(0,u),r=s.length-1-s.lastIndexOf("/")),i=a,o=0;continue}}else if(s.length===2||s.length===1){s="",r=0,i=a,o=0;continue}}t&&(s.length>0?s+="/..":s="..",r=2)}else s.length>0?s+="/"+n.slice(i+1,a):s=n.slice(i+1,a),r=a-i-1;i=a,o=0}else e===46&&o!==-1?++o:o=-1}return s}function ir(){if(arguments.length===0)return".";let n;for(let t=0;t<arguments.length;++t){const e=arguments[t];Fr(e),e.length>0&&(n===void 0?n=e:n+="/"+e)}return n===void 0?".":function(t){if(Fr(t),t.length===0)return".";const e=t.charCodeAt(0)===47,s=t.charCodeAt(t.length-1)===47;return(t=qp(t,!e)).length!==0||e||(t="."),t.length>0&&s&&(t+="/"),e?"/"+t:t}(n)}ot(717);const Gp="/";var ke=ot(988),Al=ot(1467),Wp=ot(8444),Vp=ot(2123);const Jp=new RegExp(["^npm-debug\\.log$","^\\..*\\.swp$","^\\.DS_Store$","^\\.AppleDouble$","^\\.LSOverride$","^Icon\\r$","^\\._.*","^\\.Spotlight-V100(?:$|\\/)","\\.Trashes","^__MACOSX$","~$","^Thumbs\\.db$","^ehthumbs\\.db$","^[Dd]esktop\\.ini$","@eaDir$"].join("|"));function Kp(n){return Jp.test(n)}var El=ot(405),Qe=ot(8190),qt=ot(9596),rt=ot(9639),gr=(ot(3468),ot(2532));const Zp=[["udp://tracker.leechers-paradise.org:6969"],["udp://tracker.coppersurfer.tk:6969"],["udp://tracker.opentrackr.org:1337"],["udp://explodie.org:6969"],["udp://tracker.empire-js.us:1337"],["wss://tracker.btorrent.xyz"],["wss://tracker.openwebtorrent.com"],["wss://tracker.webtorrent.dev"]],Yt=Symbol("itemPath");function Cl(n,t,e){var s;if(s=n,typeof FileList<"u"&&s instanceof FileList&&(n=Array.from(n)),Array.isArray(n)||(n=[n]),n.length===0)throw new Error("invalid input type");n.forEach(u=>{if(u==null)throw new Error(`invalid input type: ${u}`)}),(n=n.map(u=>Co(u)&&typeof u.path=="string"&&typeof gr=="function"?u.path:u)).length!==1||typeof n[0]=="string"||n[0].name||(n[0].name=t.name);let r=null;n.forEach((u,c)=>{if(typeof u=="string")return;let l=u.fullPath||u.name;l||(l=`Unknown File ${c+1}`,u.unknownName=!0),u[Yt]=l.split("/"),u[Yt][0]||u[Yt].shift(),u[Yt].length<2?r=null:c===0&&n.length>1?r=u[Yt][0]:u[Yt][0]!==r&&(r=null)}),(t.filterJunkFiles===void 0||t.filterJunkFiles)&&(n=n.filter(u=>typeof u=="string"||!function(c){const l=c[c.length-1];return l[0]==="."&&Kp(l)}(u[Yt]))),r&&n.forEach(u=>{const c=(ArrayBuffer.isView(u)||To(u))&&!u[Yt];typeof u=="string"||c||u[Yt].shift()}),!t.name&&r&&(t.name=r),t.name||n.some(u=>typeof u=="string"?(t.name=function(c,l){Fr(c);let f,h=0,d=-1,p=!0;for(f=c.length-1;f>=0;--f)if(c.charCodeAt(f)===47){if(!p){h=f+1;break}}else d===-1&&(p=!1,d=f+1);return d===-1?"":c.slice(h,d)}(u),!0):!u.unknownName&&(t.name=u[Yt][u[Yt].length-1],!0)),t.name||(t.name=`Unnamed Torrent ${Date.now()}`),t.maxPieceLength||(t.maxPieceLength=4194304);const i=n.reduce((u,c)=>u+ +(typeof c=="string"),0);let o=n.length===1;if(n.length===1&&typeof n[0]=="string"){if(typeof gr!="function")throw new Error("filesystem paths do not work in the browser");Vp(n[0],(u,c)=>{if(u)return e(u);o=c,a()})}else qt(a);function a(){Qe(n.map(u=>c=>{const l={};if(Co(u))l.getStream=u.stream(),l.length=u.size;else if(ArrayBuffer.isView(u))l.getStream=[u],l.length=u.length;else{if(!To(u)){if(typeof u=="string"){if(typeof gr!="function")throw new Error("filesystem paths do not work in the browser");return void gr(u,i>1||o,c)}throw new Error("invalid input type")}l.getStream=async function*(f,h){for await(const d of f)h.length+=d.length,yield d}(u,l),l.length=0}l.path=u[Yt],c(null,l)}),(u,c)=>{if(u)return e(u);c=c.flat(),e(null,c,o)})}}const Yp=5;function Xp(n,t){return n+t.length}function Co(n){return typeof Blob<"u"&&n instanceof Blob}function To(n){return typeof n=="object"&&n!=null&&typeof n.pipe=="function"}const Qp=function(n,t,e){typeof t=="function"&&([t,e]=[e,t]),Cl(n,t=t?Object.assign({},t):{},(s,r,i)=>{if(s)return e(s);t.singleFileTorrent=i,function(o,a,u){let c=a.announceList;c||(typeof a.announce=="string"?c=[[a.announce]]:Array.isArray(a.announce)&&(c=a.announce.map(d=>[d]))),c||(c=[]),globalThis.WEBTORRENT_ANNOUNCE&&(typeof globalThis.WEBTORRENT_ANNOUNCE=="string"?c.push([[globalThis.WEBTORRENT_ANNOUNCE]]):Array.isArray(globalThis.WEBTORRENT_ANNOUNCE)&&(c=c.concat(globalThis.WEBTORRENT_ANNOUNCE.map(d=>[d])))),a.announce===void 0&&a.announceList===void 0&&(c=c.concat(Zp)),typeof a.urlList=="string"&&(a.urlList=[a.urlList]);const l={info:{name:a.name},"creation date":Math.ceil((Number(a.creationDate)||Date.now())/1e3),encoding:"UTF-8"};c.length!==0&&(l.announce=c[0][0],l["announce-list"]=c),a.comment!==void 0&&(l.comment=a.comment),a.createdBy!==void 0&&(l["created by"]=a.createdBy),a.private!==void 0&&(l.info.private=Number(a.private)),a.info!==void 0&&Object.assign(l.info,a.info),a.sslCert!==void 0&&(l.info["ssl-cert"]=a.sslCert),a.urlList!==void 0&&(l["url-list"]=a.urlList);const f=o.reduce(Xp,0),h=a.pieceLength||Math.min(Wp(f),a.maxPieceLength);l.info["piece length"]=h,async function(d,p,g,b,y){const m=[];let _=0,w=0;const v=d.map(F=>F.getStream),A=b.onProgress;let E=0,P=0,T=!1;const I=Al(El(v),p,{zeroPadding:!1});try{for await(const F of I)await new Promise(k=>{_+=F.length;const S=P;++P,++E<Yp&&k(),(0,rt.tW)(F,"hex").then(x=>{m[S]=x,--E,w+=F.length,A&&A(w,g),k(),T&&E===0&&y(null,(0,rt.fk)(m.join("")),_)})});if(E===0)return y(null,(0,rt.fk)(m.join("")),_);T=!0}catch(F){y(F)}}(o,h,f,a,(d,p,g)=>{if(d)return u(d);l.info.pieces=p,o.forEach(b=>{delete b.getStream}),a.singleFileTorrent?l.info.length=g:l.info.files=o,u(null,ke.A.encode(l))})}(r,t,e)})};var fe=ot(7833),Do=ot(6664),Oo=ot(1827),Po=ot(3208);const bs=self.fetch||(()=>{throw new Error("global fetch is not available!")}),Io=[255,255,26,27,28,29,30,31,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255],tg=function(n){if(!ArrayBuffer.isView(n)&&typeof n!="string")throw new TypeError("base32.decode only takes Buffer or string as parameter");let t,e=0,s=0,r=0;ArrayBuffer.isView(n)||(n=(0,rt.L0)(n));const i=new Uint8Array(Math.ceil(5*n.length/8));for(let o=0;o<n.length&&n[o]!==61;o++){const a=n[o]-48;if(!(a<Io.length))throw new Error("Invalid input - it is not base32 encoded string");s=Io[a],e<=3?(e=(e+5)%8,e===0?(t|=s,i[r]=t,r++,t=0):t|=255&s<<8-e):(e=(e+5)%8,t|=255&s>>>e,i[r]=t,r++,t=255&s<<8-e)}return i.subarray(0,r)};function eg(n){return n.reduce((t,e,s,r)=>{const i=e.split("-").map(o=>parseInt(o));return t.concat(((o,a=o)=>Array.from({length:a-o+1},(u,c)=>c+o))(...i))},[])}const gi=function(n){const t={},e=n.split("magnet:?")[1];let s;return(e&&e.length>=0?e.split("&"):[]).forEach(r=>{const i=r.split("=");if(i.length!==2)return;const o=i[0];let a=i[1];o==="dn"&&(a=decodeURIComponent(a).replace(/\+/g," ")),o!=="tr"&&o!=="xs"&&o!=="as"&&o!=="ws"||(a=decodeURIComponent(a)),o==="kt"&&(a=decodeURIComponent(a).split("+")),o==="ix"&&(a=Number(a)),o==="so"&&(a=eg(decodeURIComponent(a).split(","))),t[o]?(Array.isArray(t[o])||(t[o]=[t[o]]),t[o].push(a)):t[o]=a}),t.xt&&(Array.isArray(t.xt)?t.xt:[t.xt]).forEach(r=>{(s=r.match(/^urn:btih:(.{40})/))?t.infoHash=s[1].toLowerCase():(s=r.match(/^urn:btih:(.{32})/))?t.infoHash=(0,rt.V5)(tg(s[1])):(s=r.match(/^urn:btmh:1220(.{64})/))&&(t.infoHashV2=s[1].toLowerCase())}),t.xs&&(Array.isArray(t.xs)?t.xs:[t.xs]).forEach(r=>{(s=r.match(/^urn:btpk:(.{64})/))&&(t.publicKey=s[1].toLowerCase())}),t.infoHash&&(t.infoHashBuffer=(0,rt.fk)(t.infoHash)),t.infoHashV2&&(t.infoHashV2Buffer=(0,rt.fk)(t.infoHashV2)),t.publicKey&&(t.publicKeyBuffer=(0,rt.fk)(t.publicKey)),t.dn&&(t.name=t.dn),t.kt&&(t.keywords=t.kt),t.announce=[],(typeof t.tr=="string"||Array.isArray(t.tr))&&(t.announce=t.announce.concat(t.tr)),t.urlList=[],(typeof t.as=="string"||Array.isArray(t.as))&&(t.urlList=t.urlList.concat(t.as)),(typeof t.ws=="string"||Array.isArray(t.ws))&&(t.urlList=t.urlList.concat(t.ws)),t.peerAddresses=[],(typeof t["x.pe"]=="string"||Array.isArray(t["x.pe"]))&&(t.peerAddresses=t.peerAddresses.concat(t["x.pe"])),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList)),t.peerAddresses=Array.from(new Set(t.peerAddresses)),t};async function qi(n){if(typeof n=="string"&&/^(stream-)?magnet:/.test(n)){const t=gi(n);if(!t.infoHash)throw new Error("Invalid torrent identifier");return t}if(typeof n=="string"&&(/^[a-f0-9]{40}$/i.test(n)||/^[a-z2-7]{32}$/i.test(n)))return gi(`magnet:?xt=urn:btih:${n}`);if(ArrayBuffer.isView(n)&&n.length===20)return gi(`magnet:?xt=urn:btih:${(0,rt.V5)(n)}`);if(ArrayBuffer.isView(n))return await async function(t){ArrayBuffer.isView(t)&&(t=ke.A.decode(t)),un(t.info,"info"),un(t.info["name.utf-8"]||t.info.name,"info.name"),un(t.info["piece length"],"info['piece length']"),un(t.info.pieces,"info.pieces"),t.info.files?t.info.files.forEach(i=>{un(typeof i.length=="number","info.files[0].length"),un(i["path.utf-8"]||i.path,"info.files[0].path")}):un(typeof t.info.length=="number","info.length");const e={info:t.info,infoBuffer:ke.A.encode(t.info),name:(0,rt.dU)(t.info["name.utf-8"]||t.info.name),announce:[]};e.infoHashBuffer=await(0,rt.tW)(e.infoBuffer),e.infoHash=(0,rt.V5)(e.infoHashBuffer),t.info.private!==void 0&&(e.private=!!t.info.private),t["creation date"]&&(e.created=new Date(1e3*t["creation date"])),t["created by"]&&(e.createdBy=(0,rt.dU)(t["created by"])),ArrayBuffer.isView(t.comment)&&(e.comment=(0,rt.dU)(t.comment)),Array.isArray(t["announce-list"])&&t["announce-list"].length>0?t["announce-list"].forEach(i=>{i.forEach(o=>{e.announce.push((0,rt.dU)(o))})}):t.announce&&e.announce.push((0,rt.dU)(t.announce)),ArrayBuffer.isView(t["url-list"])&&(t["url-list"]=t["url-list"].length>0?[t["url-list"]]:[]),e.urlList=(t["url-list"]||[]).map(i=>(0,rt.dU)(i)),e.announce=Array.from(new Set(e.announce)),e.urlList=Array.from(new Set(e.urlList));const s=t.info.files||[t.info];e.files=s.map((i,o)=>{const a=[].concat(e.name,i["path.utf-8"]||i.path||[]).map(u=>ArrayBuffer.isView(u)?(0,rt.dU)(u):u);return{path:ir.apply(null,[Gp].concat(a)).slice(1),name:a[a.length-1],length:i.length,offset:s.slice(0,o).reduce(jo,0)}}),e.length=s.reduce(jo,0);const r=e.files[e.files.length-1];return e.pieceLength=t.info["piece length"],e.lastPieceLength=(r.offset+r.length)%e.pieceLength||e.pieceLength,e.pieces=function(i){const o=[];for(let a=0;a<i.length;a+=20)o.push((0,rt.V5)(i.slice(a,a+20)));return o}(t.info.pieces),e}(n);if(n&&n.infoHash)return n.infoHash=n.infoHash.toLowerCase(),n.announce||(n.announce=[]),typeof n.announce=="string"&&(n.announce=[n.announce]),n.urlList||(n.urlList=[]),n;throw new Error("Invalid torrent identifier")}async function Tl(n,t,e){if(typeof t=="function")return Tl(n,{},t);if(typeof e!="function")throw new Error("second argument must be a Function");let s;try{s=await qi(n)}catch{}if(s&&s.infoHash)qt(()=>{e(null,s)});else if(r=n,typeof Blob<"u"&&r instanceof Blob)try{i(new Uint8Array(await n.arrayBuffer()))}catch(o){return e(new Error(`Error converting Blob: ${o.message}`))}else if(/^https?:/.test(n))try{const o=await bs(n,{headers:{"user-agent":"WebTorrent (https://webtorrent.io)"},signal:AbortSignal.timeout(3e4),...t});i(new Uint8Array(await o.arrayBuffer()))}catch(o){return e(new Error(`Error downloading torrent: ${o.message}`))}else typeof Po.readFile=="function"&&typeof n=="string"?Po.readFile(n,(o,a)=>{if(o)return e(new Error("Invalid torrent identifier"));i(a)}):qt(()=>{e(new Error("Invalid torrent identifier"))});var r;async function i(o){try{s=await qi(o)}catch(a){return e(a)}s&&s.infoHash?e(null,s):e(new Error("Invalid torrent identifier"))}}function jo(n,t){return n+t.length}function un(n,t){if(!n)throw new Error(`Torrent is missing required field: ${t}`)}const Er=qi,ng=function(n){n=Object.assign({},n);let t=new Set;n.xt&&typeof n.xt=="string"&&t.add(n.xt),n.xt&&Array.isArray(n.xt)&&(t=new Set(n.xt)),n.infoHashBuffer&&t.add(`urn:btih:${(0,rt.V5)(n.infoHashBuffer)}`),n.infoHash&&t.add(`urn:btih:${n.infoHash}`),n.infoHashV2Buffer&&t.add(n.xt=`urn:btmh:1220${(0,rt.V5)(n.infoHashV2Buffer)}`),n.infoHashV2&&t.add(`urn:btmh:1220${n.infoHashV2}`);const e=Array.from(t);e.length===1&&(n.xt=e[0]),e.length>1&&(n.xt=e),n.publicKeyBuffer&&(n.xs=`urn:btpk:${(0,rt.V5)(n.publicKeyBuffer)}`),n.publicKey&&(n.xs=`urn:btpk:${n.publicKey}`),n.name&&(n.dn=n.name),n.keywords&&(n.kt=n.keywords),n.announce&&(n.tr=n.announce),n.urlList&&(n.ws=n.urlList,delete n.as),n.peerAddresses&&(n["x.pe"]=n.peerAddresses);let s="magnet:?";return Object.keys(n).filter(r=>r.length===2||r==="x.pe").forEach((r,i)=>{const o=Array.isArray(n[r])?n[r]:[n[r]];var a;o.forEach((u,c)=>{(i>0||c>0)&&(r!=="kt"&&r!=="so"||c===0)&&(s+="&"),r==="dn"&&(u=encodeURIComponent(u).replace(/%20/g,"+")),r!=="tr"&&r!=="as"&&r!=="ws"||(u=encodeURIComponent(u)),r!=="xs"||u.startsWith("urn:btpk:")||(u=encodeURIComponent(u)),r==="kt"&&(u=encodeURIComponent(u)),r!=="so"&&(s+=r==="kt"&&c>0?`+${u}`:`${r}=${u}`)}),r==="so"&&(s+=`${r}=${a=o,a.reduce((u,c,l,f)=>(l!==0&&c===f[l-1]+1||u.push([]),u[u.length-1].push(c),u),[]).map(u=>u.length>1?`${u[0]}-${u[u.length-1]}`:`${u[0]}`)}`)}),s},Ne=typeof window<"u"?window:self,Gi=Ne.RTCPeerConnection||Ne.mozRTCPeerConnection||Ne.webkitRTCPeerConnection,rg=Ne.RTCSessionDescription||Ne.mozRTCSessionDescription||Ne.webkitRTCSessionDescription,ig=Ne.RTCIceCandidate||Ne.mozRTCIceCandidate||Ne.webkitRTCIceCandidate;var Gr=ot(8179),Ft=ot(6310);const sg=fe("simple-peer"),mi=65536;function Ro(n){return n.replace(/a=ice-options:trickle\s\n/g,"")}let Cr=class Wi extends Gr.Duplex{constructor(e){super(e=Object.assign({allowHalfOpen:!1},e));Jt(this,"_pc");if(this.__objectMode=!!e.objectMode,this._id=(0,rt.V5)((0,rt.po)(4)).slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||(0,rt.V5)((0,rt.po)(20)):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Wi.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Wi.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(s=>s),this.trickle=e.trickle===void 0||e.trickle,this.allowHalfTrickle=e.allowHalfTrickle!==void 0&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this._destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,!Gi)throw Ft(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new Gi(this.config)}catch(s){return void this.__destroy(Ft(s,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=s=>{this._onIceCandidate(s)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(s=>{this.__destroy(Ft(s,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=s=>{this._setupData(s)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this._destroying){if(this.destroyed)throw Ft(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new rg(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(s=>{this._addIceCandidate(s)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(s=>{this.__destroy(Ft(s,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.__destroy(Ft(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const s=new ig(e);this._pc.addIceCandidate(s).catch(r=>{var i;!s.address||s.address.endsWith(".local")?(i="Ignoring unsupported ICE candidate.",console.warn(i)):this.__destroy(Ft(r,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this._destroying){if(this.destroyed)throw Ft(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,queueMicrotask(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this._destroying){if(this.destroyed)throw Ft(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}_final(e){this._readableState.ended||this.push(null),e(null)}__destroy(e){this.end(),this._destroy(()=>{},e)}_destroy(e,s){this.destroyed||this._destroying||(this._destroying=!0,this._debug("destroying (error: %s)",s&&(s.message||s)),setTimeout(()=>{if(this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,s&&this.emit("error",s),e()},0))}_setupData(e){if(!e.channel)return this.__destroy(Ft(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=mi),this.channelName=this._channel.label,this._channel.onmessage=r=>{this._onChannelMessage(r)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=r=>{const i=r.error instanceof Error?r.error:new Error(`Datachannel error: ${r.message} ${r.filename}:${r.lineno}:${r.colno}`);this.__destroy(Ft(i,"ERR_DATA_CHANNEL"))};let s=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(s&&this._onChannelClose(),s=!0):s=!1},5e3)}_write(e,s){if(this.destroyed)return s(Ft(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.__destroy(Ft(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>mi?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=s):s(null)}else this._debug("write before connect"),this._chunk=e,this._cb=s}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.__destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=Ro(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const s=()=>{if(this.destroyed)return;const r=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:r.type,sdp:r.sdp})};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?s():this.once("_iceComplete",s))}).catch(r=>{this.__destroy(Ft(r,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.__destroy(Ft(e,"ERR_CREATE_OFFER"))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=Ro(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const s=()=>{var i;if(this.destroyed)return;const r=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:r.type,sdp:r.sdp}),this.initiator||((i=this._requestMissingTransceivers)==null||i.call(this))};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?s():this.once("_iceComplete",s))}).catch(r=>{this.__destroy(Ft(r,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.__destroy(Ft(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._destroying||this._pc.connectionState==="failed"&&this.__destroy(Ft(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,s=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,s),this.emit("iceStateChange",e,s),e!=="connected"&&e!=="completed"||(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.__destroy(Ft(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.__destroy(Ft(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const s=r=>(Object.prototype.toString.call(r.values)==="[object Array]"&&r.values.forEach(i=>{Object.assign(r,i)}),r);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(r=>{const i=[];r.forEach(o=>{i.push(s(o))}),e(null,i)},r=>e(r)):this._pc.getStats.length>0?this._pc.getStats(r=>{if(this.destroyed)return;const i=[];r.result().forEach(o=>{const a={};o.names().forEach(u=>{a[u]=o.stat(u)}),a.id=o.id,a.type=o.type,a.timestamp=o.timestamp,i.push(s(a))}),e(null,i)},r=>e(r)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this._destroying||this.getStats((s,r)=>{if(this.destroyed||this._destroying)return;s&&(r=[]);const i={},o={},a={};let u=!1;r.forEach(l=>{l.type!=="remotecandidate"&&l.type!=="remote-candidate"||(i[l.id]=l),l.type!=="localcandidate"&&l.type!=="local-candidate"||(o[l.id]=l),l.type!=="candidatepair"&&l.type!=="candidate-pair"||(a[l.id]=l)});const c=l=>{u=!0;let f=o[l.localCandidateId];f&&(f.ip||f.address)?(this.localAddress=f.ip||f.address,this.localPort=Number(f.port)):f&&f.ipAddress?(this.localAddress=f.ipAddress,this.localPort=Number(f.portNumber)):typeof l.googLocalAddress=="string"&&(f=l.googLocalAddress.split(":"),this.localAddress=f[0],this.localPort=Number(f[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let h=i[l.remoteCandidateId];h&&(h.ip||h.address)?(this.remoteAddress=h.ip||h.address,this.remotePort=Number(h.port)):h&&h.ipAddress?(this.remoteAddress=h.ipAddress,this.remotePort=Number(h.portNumber)):typeof l.googRemoteAddress=="string"&&(h=l.googRemoteAddress.split(":"),this.remoteAddress=h[0],this.remotePort=Number(h[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(r.forEach(l=>{l.type==="transport"&&l.selectedCandidatePairId&&c(a[l.selectedCandidatePairId]),(l.type==="googCandidatePair"&&l.googActiveConnection==="true"||(l.type==="candidatepair"||l.type==="candidate-pair")&&l.selected)&&c(l)}),u||Object.keys(a).length&&!Object.keys(o).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(f){return this.__destroy(Ft(f,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const l=this._cb;this._cb=null,l(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>mi||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let s=e.data;s instanceof ArrayBuffer?s=new Uint8Array(s):this.__objectMode===!1&&(s=(0,rt.L0)(s)),this.push(s)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.__destroy())}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],sg.apply(null,e)}};Cr.WEBRTC_SUPPORT=!!Gi,Cr.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},Cr.channelConfig={};const _s=Cr;var Lr=ot(1035),Fo=ot(7541),Lo=ot(3278),Vi=ot(8271),Dl=ot(6686),No=ot(7828),Bo=ot(6889);const og=/^\[?([^\]]+)]?:(\d+)$/;let Hn=new Map;function qn(n){if(Hn.size===1e5&&Hn.clear(),!Hn.has(n)){const t=og.exec(n);if(!t)throw new Error(`invalid addr: ${n}`);Hn.set(n,[t[1],Number(t[2])])}return Hn.get(n)}var Nr=ot(3033),ag=ot(4497);async function*ug(n,t={}){if(n!=null&&n[Symbol.asyncIterator])return void(yield*n[Symbol.asyncIterator](t.offset));if(!(n!=null&&n.get))throw new Error("First argument must be an abstract-chunk-store compliant store");const e=t.chunkLength||n.chunkLength;if(!e)throw new Error("missing required `chunkLength` property");let s=t.length||n.length;if(!Number.isFinite(s))throw new Error("missing required `length` property");const r=t.offset||0,i=(u,c,l)=>new Promise((f,h)=>{n.get(u,{offset:l,length:c},(d,p)=>{d&&h(d),f(p)})});let o=Math.floor(r/e);const a=r%e;if(r){const u=Math.min(s,e-a);s-=u,yield i(o++,u,a)}for(let u=s;u>0;++o,u-=e)yield i(o,Math.min(u,e))}async function cg(n,t,e={}){if(!(n!=null&&n.put))throw new Error("First argument must be an abstract-chunk-store compliant store");const s=e.chunkLength||n.chunkLength;if(!s)throw new Error("missing required `chunkLength` property");const r=e.storeMaxOutstandingPuts||16;let i=0,o=0,a=()=>{},u=!1;for await(const c of Al(t,s,{zeroPadding:e.zeroPadding||!1}))await new Promise(l=>{i++<=r&&l(),n.put(o++,c,f=>{if(f)throw f;--i,l(),u&&i===0&&a()})});i!==0&&(u=new Promise(c=>{a=c}),await u)}var lg=ot(4018),$o=ot(3970),Ol=ot(3519),fg=ot(1551);const Ji={DEFAULT_ANNOUNCE_PEERS:50,MAX_ANNOUNCE_PEERS:82,parseUrl:n=>{const t=new URL(n.replace(/^udp:/,"http:"));return n.match(/^udp:/)&&Object.defineProperties(t,{href:{value:t.href.replace(/^http/,"udp")},protocol:{value:t.protocol.replace(/^http/,"udp")},origin:{value:t.origin.replace(/^http/,"udp")}}),t},...ot.t(fg,2)};var Mo=ot(826),Uo=ot(61),Qn=ot(2701);const hg=fe("simple-websocket"),Yn=typeof Qn!="function"?WebSocket:Qn;class Pl extends Gr.Duplex{constructor(t={}){if(typeof t=="string"&&(t={url:t}),super(t=Object.assign({allowHalfOpen:!1},t)),this.__objectMode=!!t.objectMode,t.objectMode!=null&&delete t.objectMode,t.url==null&&t.socket==null)throw new Error("Missing required `url` or `socket` option");if(t.url!=null&&t.socket!=null)throw new Error("Must specify either `url` or `socket` option, not both");if(this._id=(0,rt.V5)((0,rt.po)(4)).slice(0,7),this._debug("new websocket: %o",t),this.connected=!1,this._chunk=null,this._cb=null,this._interval=null,t.socket)this.url=t.socket.url,this._ws=t.socket,this.connected=t.socket.readyState===Yn.OPEN;else{this.url=t.url;try{this._ws=typeof Qn=="function"?new Yn(t.url,{...t,encoding:void 0}):new Yn(t.url)}catch(e){return void qt(()=>this.destroy(e))}}this._ws.binaryType="arraybuffer",t.socket&&this.connected?qt(()=>this._handleOpen()):this._ws.onopen=()=>this._handleOpen(),this._ws.onmessage=e=>this._handleMessage(e),this._ws.onclose=()=>this._handleClose(),this._ws.onerror=e=>this._handleError(e),this._handleFinishBound=()=>this._handleFinish(),this.once("finish",this._handleFinishBound)}send(t){this._ws.send(t)}_final(t){this._readableState.ended||this.push(null),t(null)}_destroy(t){if(!this.destroyed){if(this._writableState.ended||this.end(),this.connected=!1,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._handleFinishBound&&this.removeListener("finish",this._handleFinishBound),this._handleFinishBound=null,this._ws){const e=this._ws,s=()=>{e.onclose=null};if(e.readyState===Yn.CLOSED)s();else try{e.onclose=s,e.close()}catch{s()}e.onopen=null,e.onmessage=null,e.onerror=()=>{}}this._ws=null,t()}}_write(t,e){if(this.destroyed)return e(new Error("cannot write after socket is destroyed"));if(this.connected){try{this.send(t)}catch(s){return this.destroy(s)}typeof Qn!="function"&&this._ws.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._ws.bufferedAmount),this._cb=e):e(null)}else this._debug("write before connect"),this._chunk=t,this._cb=e}_handleOpen(){if(!this.connected&&!this.destroyed){if(this.connected=!0,this._chunk){try{this.send(this._chunk)}catch(e){return this.destroy(e)}this._chunk=null,this._debug('sent chunk from "write before connect"');const t=this._cb;this._cb=null,t(null)}typeof Qn!="function"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}}_handleMessage(t){if(this.destroyed)return;let e=t.data;e instanceof ArrayBuffer&&(e=new Uint8Array(e)),this.__objectMode===!1&&(e=(0,rt.L0)(e)),this.push(e)}_handleClose(){this.destroyed||(this._debug("on close"),this.destroy())}_handleError(t){this.destroy(new Error(`Error connecting to ${this.url}`))}_handleFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this.connected?t():this.once("connect",t)}_onInterval(){if(!this._cb||!this._ws||this._ws.bufferedAmount>65536)return;this._debug("ending backpressure: bufferedAmount %d",this._ws.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],hg.apply(null,t)}}Pl.WEBSOCKET_SUPPORT=!!Yn;const dg=class extends Me{constructor(n,t){super(),this.client=n,this.announceUrl=t,this.interval=null,this.destroyed=!1}setInterval(n){n==null&&(n=this.DEFAULT_ANNOUNCE_INTERVAL),clearInterval(this.interval),n&&(this.interval=setInterval(()=>{this.announce(this.client._defaultAnnounceOpts())},n),this.interval.unref&&this.interval.unref())}},re=fe("bittorrent-tracker:websocket-tracker"),Pe={};class Ki extends dg{constructor(t,e){super(t,e),re("new websocket tracker %s",e),this.peers={},this.socket=null,this.reconnecting=!1,this.retries=0,this.reconnectTimer=null,this.expectingResponse=!1,this._openSocket()}announce(t){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.announce(t)});const e=Object.assign({},t,{action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary});if(this._trackerId&&(e.trackerid=this._trackerId),t.event==="stopped"||t.event==="completed")this._send(e);else{const s=Math.min(t.numwant,5);this._generateOffers(s,r=>{e.numwant=s,e.offers=r,this._send(e)})}}scrape(t){if(this.destroyed||this.reconnecting)return;if(!this.socket.connected)return void this.socket.once("connect",()=>{this.scrape(t)});const e={action:"scrape",info_hash:Array.isArray(t.infoHash)&&t.infoHash.length>0?t.infoHash.map(s=>(0,rt.Ht)(s)):t.infoHash&&(0,rt.Ht)(t.infoHash)||this.client._infoHashBinary};this._send(e)}destroy(t=zo){if(this.destroyed)return t(null);this.destroyed=!0,clearInterval(this.interval),clearTimeout(this.reconnectTimer);for(const i in this.peers){const o=this.peers[i];clearTimeout(o.trackerTimeout),o.destroy()}if(this.peers=null,this.socket&&(this.socket.removeListener("connect",this._onSocketConnectBound),this.socket.removeListener("data",this._onSocketDataBound),this.socket.removeListener("close",this._onSocketCloseBound),this.socket.removeListener("error",this._onSocketErrorBound),this.socket=null),this._onSocketConnectBound=null,this._onSocketErrorBound=null,this._onSocketDataBound=null,this._onSocketCloseBound=null,Pe[this.announceUrl]&&(Pe[this.announceUrl].consumers-=1),Pe[this.announceUrl].consumers>0)return t();let e,s=Pe[this.announceUrl];if(delete Pe[this.announceUrl],s.on("error",zo),s.once("close",t),!this.expectingResponse)return r();function r(){e&&(clearTimeout(e),e=null),s.removeListener("data",r),s.destroy(),s=null}e=setTimeout(r,Ji.DESTROY_TIMEOUT),s.once("data",r)}_openSocket(){if(this.destroyed=!1,this.peers||(this.peers={}),this._onSocketConnectBound=()=>{this._onSocketConnect()},this._onSocketErrorBound=t=>{this._onSocketError(t)},this._onSocketDataBound=t=>{this._onSocketData(t)},this._onSocketCloseBound=()=>{this._onSocketClose()},this.socket=Pe[this.announceUrl],this.socket)Pe[this.announceUrl].consumers+=1,this.socket.connected&&this._onSocketConnectBound();else{const t=new URL(this.announceUrl);let e;this.client._proxyOpts&&(e=t.protocol==="wss:"?this.client._proxyOpts.httpsAgent:this.client._proxyOpts.httpAgent,!e&&this.client._proxyOpts.socksProxy&&(e=this.client._proxyOpts.socksProxy)),this.socket=Pe[this.announceUrl]=new Pl({url:this.announceUrl,agent:e}),this.socket.consumers=1,this.socket.once("connect",this._onSocketConnectBound)}this.socket.on("data",this._onSocketDataBound),this.socket.once("close",this._onSocketCloseBound),this.socket.once("error",this._onSocketErrorBound)}_onSocketConnect(){this.destroyed||this.reconnecting&&(this.reconnecting=!1,this.retries=0,this.announce(this.client._defaultAnnounceOpts()))}_onSocketData(t){if(!this.destroyed){this.expectingResponse=!1;try{t=JSON.parse((0,rt.dU)(t))}catch{return void this.client.emit("warning",new Error("Invalid tracker response"))}t.action==="announce"?this._onAnnounceResponse(t):t.action==="scrape"?this._onScrapeResponse(t):this._onSocketError(new Error(`invalid action in WS response: ${t.action}`))}}_onAnnounceResponse(t){if(t.info_hash!==this.client._infoHashBinary)return void re("ignoring websocket data from %s for %s (looking for %s: reused socket)",this.announceUrl,(0,rt.HB)(t.info_hash),this.client.infoHash);if(t.peer_id&&t.peer_id===this.client._peerIdBinary)return;re("received %s from %s for %s",JSON.stringify(t),this.announceUrl,this.client.infoHash);const e=t["failure reason"];if(e)return this.client.emit("warning",new Error(e));const s=t["warning message"];s&&this.client.emit("warning",new Error(s));const r=t.interval||t["min interval"];r&&this.setInterval(1e3*r);const i=t["tracker id"];if(i&&(this._trackerId=i),t.complete!=null){const a=Object.assign({},t,{announce:this.announceUrl,infoHash:(0,rt.HB)(t.info_hash)});this.client.emit("update",a)}let o;if(t.offer&&t.peer_id&&(re("creating peer (from remote offer)"),o=this._createPeer(),o.id=(0,rt.HB)(t.peer_id),o.once("signal",a=>{const u={action:"announce",info_hash:this.client._infoHashBinary,peer_id:this.client._peerIdBinary,to_peer_id:t.peer_id,answer:a,offer_id:t.offer_id};this._trackerId&&(u.trackerid=this._trackerId),this._send(u)}),this.client.emit("peer",o),o.signal(t.offer)),t.answer&&t.peer_id){const a=(0,rt.HB)(t.offer_id);o=this.peers[a],o?(o.id=(0,rt.HB)(t.peer_id),this.client.emit("peer",o),o.signal(t.answer),clearTimeout(o.trackerTimeout),o.trackerTimeout=null,delete this.peers[a]):re(`got unexpected answer: ${JSON.stringify(t.answer)}`)}}_onScrapeResponse(t){t=t.files||{};const e=Object.keys(t);e.length!==0?e.forEach(s=>{const r=Object.assign(t[s],{announce:this.announceUrl,infoHash:(0,rt.HB)(s)});this.client.emit("scrape",r)}):this.client.emit("warning",new Error("invalid scrape response"))}_onSocketClose(){this.destroyed||(this.destroy(),this._startReconnectTimer())}_onSocketError(t){this.destroyed||(this.destroy(),this.client.emit("warning",t),this._startReconnectTimer())}_startReconnectTimer(){const t=Math.floor(3e5*Math.random())+Math.min(1e4*Math.pow(2,this.retries),36e5);this.reconnecting=!0,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.retries++,this._openSocket()},t),this.reconnectTimer.unref&&this.reconnectTimer.unref(),re("reconnecting socket in %s ms",t)}_send(t){if(this.destroyed)return;this.expectingResponse=!0;const e=JSON.stringify(t);re("send %s",e),this.socket.send(e)}_generateOffers(t,e){const s=this,r=[];re("generating %s offers",t);for(let a=0;a<t;++a)i();function i(){const a=(0,rt.V5)((0,rt.po)(20));re("creating peer (from _generateOffers)");const u=s.peers[a]=s._createPeer({initiator:!0});u.once("signal",c=>{r.push({offer:c,offer_id:(0,rt.Ht)(a)}),o()}),u.trackerTimeout=setTimeout(()=>{re("tracker timeout: destroying peer"),u.trackerTimeout=null,delete s.peers[a],u.destroy()},5e4),u.trackerTimeout.unref&&u.trackerTimeout.unref()}function o(){r.length===t&&(re("generated %s offers",t),e(r))}o()}_createPeer(t){const e=this;t=Object.assign({trickle:!1,config:e.client._rtcConfig,wrtc:e.client._wrtc},t);const s=new _s(t);return s.once("error",r),s.once("connect",function i(){s.removeListener("error",r),s.removeListener("connect",i)}),s;function r(i){e.client.emit("warning",new Error(`Connection error: ${i.message}`)),s.destroy()}}}function zo(){}Ki.prototype.DEFAULT_ANNOUNCE_INTERVAL=3e4,Ki._socketPool=Pe;const pg=Ki;var gg=ot(717);const He=fe("bittorrent-tracker:client");class Zi extends Me{constructor(t={}){if(super(),!t.peerId)throw new Error("Option `peerId` is required");if(!t.infoHash)throw new Error("Option `infoHash` is required");if(!t.announce)throw new Error("Option `announce` is required");if(!gg.browser&&!t.port)throw new Error("Option `port` is required");this.peerId=typeof t.peerId=="string"?t.peerId:(0,rt.V5)(t.peerId),this._peerIdBuffer=(0,rt.fk)(this.peerId),this._peerIdBinary=(0,rt.Ht)(this.peerId),this.infoHash=typeof t.infoHash=="string"?t.infoHash.toLowerCase():(0,rt.V5)(t.infoHash),this._infoHashBuffer=(0,rt.fk)(this.infoHash),this._infoHashBinary=(0,rt.Ht)(this.infoHash),He("new client %s",this.infoHash),this.destroyed=!1,this._port=t.port,this._getAnnounceOpts=t.getAnnounceOpts,this._rtcConfig=t.rtcConfig,this._userAgent=t.userAgent,this._proxyOpts=t.proxyOpts,this._wrtc=typeof t.wrtc=="function"?t.wrtc():t.wrtc;let e=typeof t.announce=="string"?[t.announce]:t.announce==null?[]:t.announce;e=e.map(i=>(ArrayBuffer.isView(i)&&(i=(0,rt.dU)(i)),i[i.length-1]==="/"&&(i=i.substring(0,i.length-1)),i)),e=Array.from(new Set(e));const s=this._wrtc!==!1&&(!!this._wrtc||_s.WEBRTC_SUPPORT),r=i=>{qt(()=>{this.emit("warning",i)})};this._trackers=e.map(i=>{let o;try{o=Ji.parseUrl(i)}catch{return r(new Error(`Invalid tracker URL: ${i}`)),null}const a=o.port;if(a<0||a>65535)return r(new Error(`Invalid tracker port: ${i}`)),null;const u=o.protocol;return u!=="http:"&&u!=="https:"||typeof Mo!="function"?u==="udp:"&&typeof Uo=="function"?new Uo(this,i):u!=="ws:"&&u!=="wss:"||!s||u==="ws:"&&typeof window<"u"&&window.location.protocol==="https:"?(r(new Error(`Unsupported tracker protocol: ${i}`)),null):new pg(this,i):new Mo(this,i)}).filter(Boolean)}start(t){(t=this._defaultAnnounceOpts(t)).event="started",He("send `start` %o",t),this._announce(t),this._trackers.forEach(e=>{e.setInterval()})}stop(t){(t=this._defaultAnnounceOpts(t)).event="stopped",He("send `stop` %o",t),this._announce(t)}complete(t){t||(t={}),(t=this._defaultAnnounceOpts(t)).event="completed",He("send `complete` %o",t),this._announce(t)}update(t){(t=this._defaultAnnounceOpts(t)).event&&delete t.event,He("send `update` %o",t),this._announce(t)}_announce(t){this._trackers.forEach(e=>{e.announce(t)})}scrape(t){He("send `scrape`"),t||(t={}),this._trackers.forEach(e=>{e.scrape(t)})}setInterval(t){He("setInterval %d",t),this._trackers.forEach(e=>{e.setInterval(t)})}destroy(t){if(this.destroyed)return;this.destroyed=!0,He("destroy");const e=this._trackers.map(s=>r=>{s.destroy(r)});Qe(e,t),this._trackers=[],this._getAnnounceOpts=null}_defaultAnnounceOpts(t={}){return t.numwant==null&&(t.numwant=Ji.DEFAULT_ANNOUNCE_PEERS),t.uploaded==null&&(t.uploaded=0),t.downloaded==null&&(t.downloaded=0),this._getAnnounceOpts&&(t=Object.assign({},t,this._getAnnounceOpts())),t}}Zi.scrape=(n,t)=>{if(t=Ol(t),!n.infoHash)throw new Error("Option `infoHash` is required");if(!n.announce)throw new Error("Option `announce` is required");const e=Object.assign({},n,{infoHash:Array.isArray(n.infoHash)?n.infoHash[0]:n.infoHash,peerId:(0,rt.L0)("01234567890123456789"),port:6881}),s=new Zi(e);s.once("error",t),s.once("warning",t);let r=Array.isArray(n.infoHash)?n.infoHash.length:1;const i={};return s.on("scrape",o=>{if(r-=1,i[o.infoHash]=o,r===0){s.destroy();const a=Object.keys(i);a.length===1?t(null,i[a[0]]):t(null,i)}}),s.scrape({infoHash:n.infoHash}),s};const mg=Zi;ot(7936);var Ho=ot(2799),bg=ot(717);const qo=fe("torrent-discovery");class _g extends Me.EventEmitter{constructor(t){if(super(),!t.peerId)throw new Error("Option `peerId` is required");if(!t.infoHash)throw new Error("Option `infoHash` is required");if(!bg.browser&&!t.port)throw new Error("Option `port` is required");this.peerId=typeof t.peerId=="string"?t.peerId:t.peerId.toString("hex"),this.infoHash=typeof t.infoHash=="string"?t.infoHash.toLowerCase():t.infoHash.toString("hex"),this._port=t.port,this._userAgent=t.userAgent,this.destroyed=!1,this._announce=t.announce||[],this._intervalMs=t.intervalMs||9e5,this._trackerOpts=null,this._dhtAnnouncing=!1,this._dhtTimeout=!1,this._internalDHT=!1,this._onWarning=s=>{this.emit("warning",s)},this._onError=s=>{this.emit("error",s)},this._onDHTPeer=(s,r)=>{r.toString("hex")===this.infoHash&&this.emit("peer",`${s.host}:${s.port}`,"dht")},this._onTrackerPeer=s=>{this.emit("peer",s,"tracker")},this._onTrackerAnnounce=()=>{this.emit("trackerAnnounce")},this._onLSDPeer=(s,r)=>{this.emit("peer",s,"lsd")};const e=(s,r)=>{const i=new $o.Client(r);return i.on("warning",this._onWarning),i.on("error",this._onError),i.listen(s),this._internalDHT=!0,i};t.tracker===!1?this.tracker=null:t.tracker&&typeof t.tracker=="object"?(this._trackerOpts=Object.assign({},t.tracker),this.tracker=this._createTracker()):this.tracker=this._createTracker(),t.dht===!1||typeof $o.Client!="function"?this.dht=null:t.dht&&typeof t.dht.addNode=="function"?this.dht=t.dht:t.dht&&typeof t.dht=="object"?this.dht=e(t.dhtPort,t.dht):this.dht=e(t.dhtPort),this.dht&&(this.dht.on("peer",this._onDHTPeer),this._dhtAnnounce()),t.lsd===!1||typeof Ho!="function"?this.lsd=null:this.lsd=this._createLSD()}updatePort(t){t!==this._port&&(this._port=t,this.dht&&this._dhtAnnounce(),this.tracker&&(this.tracker.stop(),this.tracker.destroy(()=>{this.tracker=this._createTracker()})))}complete(t){this.tracker&&this.tracker.complete(t)}destroy(t){if(this.destroyed)return;this.destroyed=!0,clearTimeout(this._dhtTimeout);const e=[];this.tracker&&(this.tracker.stop(),this.tracker.removeListener("warning",this._onWarning),this.tracker.removeListener("error",this._onError),this.tracker.removeListener("peer",this._onTrackerPeer),this.tracker.removeListener("update",this._onTrackerAnnounce),e.push(s=>{this.tracker.destroy(s)})),this.dht&&this.dht.removeListener("peer",this._onDHTPeer),this._internalDHT&&(this.dht.removeListener("warning",this._onWarning),this.dht.removeListener("error",this._onError),e.push(s=>{this.dht.destroy(s)})),this.lsd&&(this.lsd.removeListener("warning",this._onWarning),this.lsd.removeListener("error",this._onError),this.lsd.removeListener("peer",this._onLSDPeer),e.push(s=>{this.lsd.destroy(s)})),Qe(e,t),this.dht=null,this.tracker=null,this.lsd=null,this._announce=null}_createTracker(){const t=Object.assign({},this._trackerOpts,{infoHash:this.infoHash,announce:this._announce,peerId:this.peerId,port:this._port,userAgent:this._userAgent}),e=new mg(t);return e.on("warning",this._onWarning),e.on("error",this._onError),e.on("peer",this._onTrackerPeer),e.on("update",this._onTrackerAnnounce),e.setInterval(this._intervalMs),e.start(),e}_dhtAnnounce(){this._dhtAnnouncing||(qo("dht announce"),this._dhtAnnouncing=!0,clearTimeout(this._dhtTimeout),this.dht.announce(this.infoHash,this._port,t=>{this._dhtAnnouncing=!1,qo("dht announce complete"),t&&this.emit("warning",t),this.emit("dhtAnnounce"),this.destroyed||(this._dhtTimeout=setTimeout(()=>{this._dhtAnnounce()},this._intervalMs+Math.floor(Math.random()*this._intervalMs/5)),this._dhtTimeout.unref&&this._dhtTimeout.unref())}))}_createLSD(){const t=Object.assign({},{infoHash:this.infoHash,peerId:this.peerId,port:this._port}),e=new Ho(t);return e.on("warning",this._onWarning),e.on("error",this._onError),e.on("peer",this._onLSDPeer),e.start(),e}}const yg=_g,wg=["seeking position failed.","InvalidStateError"],vg=["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],bi=n=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${n}`,"SyntaxError"];class mr extends WritableStream{constructor(t){super(t),Object.setPrototypeOf(this,FileSystemWritableFileStream.prototype),this._closed=!1}async close(){this._closed=!0;const t=this.getWriter(),e=t.close();return t.releaseLock(),e}seek(t){return this.write({type:"seek",position:t})}truncate(t){return this.write({type:"truncate",size:t})}write(t){if(this._closed)return Promise.reject(new TypeError("Cannot write to a CLOSED writable stream"));const e=this.getWriter(),s=e.write(t);return e.releaseLock(),s}}if(Object.defineProperty(mr.prototype,Symbol.toStringTag,{value:"FileSystemWritableFileStream",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(mr.prototype,{close:{enumerable:!0},seek:{enumerable:!0},truncate:{enumerable:!0},write:{enumerable:!0}}),!globalThis.FileSystemFileHandle||globalThis.FileSystemFileHandle.prototype.createWritable||globalThis.FileSystemWritableFileStream||(globalThis.FileSystemWritableFileStream=mr),globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable){const n=new WeakMap;let t;const e=()=>{let r,i;onmessage=async o=>{const a=o.ports[0],u=o.data;switch(u.type){case"open":{const c=u.name;let l=await navigator.storage.getDirectory();for(const f of u.path)l=await l.getDirectoryHandle(f);r=await l.getFileHandle(c),i=await r.createSyncAccessHandle();break}case"write":i.write(u.data,{at:u.position}),i.flush();break;case"truncate":i.truncate(u.size);break;case"abort":case"close":i.close()}a.postMessage(0)}};globalThis.FileSystemFileHandle.prototype.createWritable=async function(r){if(!t){const d=`(${e.toString()})()`,p=new Blob([d],{type:"text/javascript"});t=URL.createObjectURL(p)}const i=new Worker(t,{type:"module"});let o=0;const a=new TextEncoder;let u=await this.getFile().then(d=>d.size);const c=d=>new Promise((p,g)=>{const b=new MessageChannel;b.port1.onmessage=y=>{y.data instanceof Error?g(y.data):p(y.data),b.port1.close(),b.port2.close(),b.port1.onmessage=null},i.postMessage(d,[b.port2])}),l=await navigator.storage.getDirectory(),f=await n.get(this),h=await l.resolve(f);if(h===null)throw new DOMException(...vg);return await c({type:"open",path:h,name:this.name}),(r==null?void 0:r.keepExistingData)===!1&&(await c({type:"truncate",size:0}),u=0),new mr({async write(d){if((d=(d==null?void 0:d.constructor)===Object?{...d}:{type:"write",data:d,position:o}).type==="write"){if(!("data"in d))throw await c({type:"close"}),new DOMException(...bi("write requires a data argument"));if(d.position??(d.position=o),typeof d.data=="string")d.data=a.encode(d.data);else if(d.data instanceof ArrayBuffer)d.data=new Uint8Array(d.data);else if(d.data instanceof Uint8Array||!ArrayBuffer.isView(d.data)){if(!(d.data instanceof Uint8Array)){const p=await new Response(d.data).arrayBuffer();d.data=new Uint8Array(p)}}else d.data=new Uint8Array(d.data.buffer,d.data.byteOffset,d.data.byteLength);Number.isInteger(d.position)&&d.position>=0&&(o=d.position),o+=d.data.byteLength,u+=d.data.byteLength}else{if(d.type==="seek"){if(Number.isInteger(d.position)&&d.position>=0){if(u<d.position)throw new DOMException(...wg);return void(o=d.position)}throw await c({type:"close"}),new DOMException(...bi("seek requires a position argument"))}if(d.type==="truncate"){if(!(Number.isInteger(d.size)&&d.size>=0))throw await c({type:"close"}),new DOMException(...bi("truncate requires a size argument"));u=d.size,o>u&&(o=u)}}await c(d)},async close(){await c({type:"close"}),i.terminate()},async abort(d){await c({type:"abort",reason:d}),i.terminate()}})};const s=FileSystemDirectoryHandle.prototype.getFileHandle;FileSystemDirectoryHandle.prototype.getFileHandle=async function(...r){const i=await s.call(this,...r);return n.set(i,this),i}}const xg=/[<>:"/\\|?*\u0000-\u001F]/g;var Ta,Da;(Da=(Ta=globalThis.navigator)==null?void 0:Ta.storage)!=null&&Da.getDirectory&&navigator.storage.getDirectory().then(n=>{n.removeEntry("chunks",{recursive:!0}).catch(()=>{})});const Gn=(n,t)=>{};class Il{constructor(t,e={}){Jt(this,"name","");Jt(this,"chunks",[]);Jt(this,"chunkMap",[]);Jt(this,"directoryMap",{});Jt(this,"files");Jt(this,"rootDirPromise");Jt(this,"storageDirPromise");Jt(this,"chunksDirPromise");Jt(this,"closing",!1);Jt(this,"closed",!1);var s,r;if(this.chunkLength=Number(t),!this.chunkLength)throw new Error("First argument must be a chunk length");if(!((r=(s=globalThis.navigator)==null?void 0:s.storage)!=null&&r.getDirectory))throw new Error("FSA API is not supported");if(this.closed=!1,this.name=e.name||crypto.randomUUID(),this.rootDirPromise=e.rootDir||navigator.storage.getDirectory(),this.storageDirPromise=(async()=>(await this.rootDirPromise).getDirectoryHandle(this.name,{create:!0}))(),this.chunksDirPromise=this.storageDirPromise,e.files&&e.rootDir){if(this.chunksDirPromise=this._getChunksDirHandle(),this.files=e.files.map((i,o,a)=>{if(i.path==null)throw new Error("File is missing `path` property");if(i.length==null)throw new Error("File is missing `length` property");if(i.offset==null)if(o===0)i.offset=0;else{const h=a[o-1];i.offset=h.offset+h.length}i.handle==null&&(i.handle=this._createFileHandle({path:i.path})),i.blob=this._createBlobReference(i.handle);const u=i.offset,c=i.offset+i.length,l=Math.floor(u/this.chunkLength),f=Math.floor((c-1)/this.chunkLength);for(let h=l;h<=f;++h){const d=h*this.chunkLength,p=u<d?0:u-d,g=c>d+this.chunkLength?this.chunkLength:c-d,b=u>d?0:d-u;this.chunkMap[h]||(this.chunkMap[h]=[]),this.chunkMap[h].push({from:p,to:g,offset:b,file:i})}return i}),window.addEventListener("pagehide",()=>this.cleanup()),this.length=this.files.reduce((i,o)=>i+o.length,0),e.length!=null&&e.length!==this.length)throw new Error("total `files` length is not equal to explicit `length` option")}else this.length=Number(e.length)||1/0;this.length!==1/0&&(this.lastChunkLength=this.length%this.chunkLength||this.chunkLength,this.lastChunkIndex=Math.ceil(this.length/this.chunkLength)-1)}async _getChunkHandle(t){let e=this.chunks[t];if(!e){const s=await this.chunksDirPromise;this.chunks[t]=e=await s.getFileHandle(t,{create:!0})}return e}async _createFileHandle(t){const e=t.path.slice(t.path.lastIndexOf("/")+1);return(await this._getDirectoryHandle(t)).getFileHandle(e.replace(xg,""),{create:!0})}async _createBlobReference(t){return(await t).getFile()}async _getDirectoryHandle(t){const e=t.path.lastIndexOf("/");if(e===-1||e===0)return this.storageDirPromise;const s=t.path=t.path.slice(0,e);return this.directoryMap[s]||(this.directoryMap[s]=(async()=>(await this._getDirectoryHandle(t)).getDirectoryHandle(s.slice(s.lastIndexOf("/")+1),{create:!0}))()),this.directoryMap[s]}async _getChunksDirHandle(){return(await(await navigator.storage.getDirectory()).getDirectoryHandle("chunks",{create:!0})).getDirectoryHandle(this.name,{create:!0})}async put(t,e,s=Gn){try{return await this._put(t,e),s(null),null}catch(r){return queueMicrotask(()=>s(r)),r}}async getStreamForHandle(t){return(await t).createWritable({keepExistingData:!0})}async _put(t,e){if(this.closed)throw new Error("Storage is closed");const s=t===this.lastChunkIndex;if(s&&e.length!==this.lastChunkLength)throw new Error(`Last chunk length must be ${this.lastChunkLength}`);if(!s&&e.length!==this.chunkLength)throw new Error(`Chunk length must be ${this.chunkLength}`);const r=(async()=>{const a=await this._getChunkHandle(t),u=await a.createWritable({keepExistingData:!1});await u.write(e),await u.close()})();if(!this.files)return r;const i=this.chunkMap[t];if(!i)throw new Error("No files matching the request range");const o=i.map(async({file:a,offset:u,from:c,to:l})=>{a.stream||(a.stream=this.getStreamForHandle(a.handle)),await(await a.stream).write({type:"write",position:u,data:e.slice(c,l)})});o.push(r),await Promise.all(o)}async get(t,e,s=Gn){e==null&&(e={});try{const r=await this._get(t,e);return s(null,r),r}catch(r){return s(r),r}}async _get(t,e){if(typeof e=="function")return this.get(t,void 0,e);if(this.closed)throw new Error("Storage is closed");const s=t===this.lastChunkIndex?this.lastChunkLength:this.chunkLength,r=e.offset||0,i=e.length?r+e.length:s,o=e.length||s-r;if(r<0||r<0||i>s)throw new Error("Invalid offset and/or length");if(r===i)return new Uint8Array(0);if(!this.files||this.chunks[t]){let h=await(await this._getChunkHandle(t)).getFile();r===0&&o===s||(h=h.slice(r,o+r));const d=await h.arrayBuffer();if(d.byteLength===0)throw new Error(`Index ${t} does not exist`);return new Uint8Array(d)}let a=this.chunkMap[t];if(!a)throw new Error("No files matching the request range");if(e&&(a=a.filter(({from:f,to:h})=>h>r&&f<i),a.length===0))throw new Error("No files matching the request range");const u=a.map(async({from:f,to:h,offset:d,file:p})=>(e&&(h>i&&(h=i),f<r&&(d+=r-f,f=r)),(await p.blob).slice(d,d+h-f))),c=await Promise.all(u),l=c.length===1?await c[0].arrayBuffer():await new Blob(c).arrayBuffer();if(l.byteLength===0)throw new Error(`Index ${t} does not exist`);return new Uint8Array(l)}async close(t=Gn){if(this.closing)return((e=Gn,s)=>queueMicrotask(()=>e(new Error(s))))(t,"Storage is closed");this.closing=!0,this.chunkMap=void 0,this.directoryMap=void 0,this.files&&await this.cleanup(),this.closed=!0,queueMicrotask(()=>t(null))}async cleanup(){if(this.closed||!this.files)return;const t=[];for(const s of this.files)s.stream&&(t.push(s.stream.then(r=>r.close())),s.stream=void 0);const e=(async()=>{const s=await this.chunksDirPromise;this.chunks=[];for await(const r of s.keys())await s.removeEntry(r,{recursive:!0});this.chunksDirPromise=this._getChunksDirHandle(),await this.chunksDirPromise})();await Promise.all(t);for(const s of this.files)s.blob=this._createBlobReference(s.handle);await e}async destroy(t=Gn){this.close(async e=>{if(e)return t(e);try{await(await this.rootDirPromise).removeEntry(this.name,{recursive:!0})}catch(s){return t(s)}t(null)})}}var kg=ot(3714),Sg=ot(1314);const Go=fe("lt_donthave"),jl=()=>{class n extends Me.EventEmitter{constructor(e){super(),this._peerSupports=!1,this._wire=e}onExtendedHandshake(){this._peerSupports=!0}onMessage(e){let s;try{s=new DataView(e.buffer).getUint32(0)}catch{return}this._wire.peerPieces.get(s)&&(Go("got donthave %d",s),this._wire.peerPieces.set(s,!1),this.emit("donthave",s),this._failRequests(s))}donthave(e){if(!this._peerSupports)return;Go("donthave %d",e);const s=new Uint8Array(4);new DataView(s.buffer).setUint32(0,e),this._wire.extended("lt_donthave",s)}_failRequests(e){const s=this._wire.requests;for(let r=0;r<s.length;r++){const i=s[r];i.piece===e&&(Sg(s,r),r-=1,this._wire._callback(i,new Error("peer sent donthave"),null))}}}return n.prototype.name="lt_donthave",n};var Rl=ot(4862),Wo=ot(5372);const ve=16384;class Re{constructor(t){this.length=t,this.missing=t,this.sources=null,this._chunks=Math.ceil(t/ve),this._remainder=t%ve||ve,this._buffered=0,this._buffer=null,this._cancellations=null,this._reservations=0,this._flushed=!1}chunkLength(t){return t===this._chunks-1?this._remainder:ve}chunkLengthRemaining(t){return this.length-t*ve}chunkOffset(t){return t*ve}reserve(){return this.init()?this._cancellations.length?this._cancellations.pop():this._reservations<this._chunks?this._reservations++:-1:-1}reserveRemaining(){if(!this.init())return-1;if(this._cancellations.length||this._reservations<this._chunks){let t=this._reservations;for(;this._cancellations.length;)t=Math.min(t,this._cancellations.pop());return this._reservations=this._chunks,t}return-1}cancel(t){this.init()&&this._cancellations.push(t)}cancelRemaining(t){this.init()&&(this._reservations=t)}get(t){return this.init()?this._buffer[t]:null}set(t,e,s){if(!this.init())return!1;const r=e.length,i=Math.ceil(r/ve);for(let o=0;o<i;o++)if(!this._buffer[t+o]){const a=o*ve,u=e.slice(a,a+ve);this._buffered++,this._buffer[t+o]=u,this.missing-=u.length,this.sources.includes(s)||this.sources.push(s)}return this._buffered===this._chunks}flush(){if(!this._buffer||this._chunks!==this._buffered)return null;const t=(0,rt.xW)(this._buffer,this.length);return this._buffer=null,this._cancellations=null,this.sources=null,this._flushed=!0,t}init(){return!this._flushed&&(this._buffer||(this._buffer=new Array(this._chunks),this._cancellations=[],this.sources=[]),!0)}}Re.BLOCK_LENGTH=ve;var Ag=ot(7373);const Eg=fe("ut_metadata"),Wn=16384,Cg=n=>{class t extends Me.EventEmitter{constructor(s){super(),this._wire=s,this._fetching=!1,this._metadataComplete=!1,this._metadataSize=null,this._remainingRejects=null,this._bitfield=new Nr.A(0,{grow:1e3}),ArrayBuffer.isView(n)&&this.setMetadata(n)}onHandshake(s,r,i){this._infoHash=s}onExtendedHandshake(s){return s.m&&s.m.ut_metadata?s.metadata_size?typeof s.metadata_size!="number"||1e7<s.metadata_size||s.metadata_size<=0?this.emit("warning",new Error("Peer gave invalid metadata size")):(this._metadataSize=s.metadata_size,this._numPieces=Math.ceil(this._metadataSize/Wn),this._remainingRejects=2*this._numPieces,void this._requestPieces()):this.emit("warning",new Error("Peer does not have metadata")):this.emit("warning",new Error("Peer does not support ut_metadata"))}onMessage(s){let r,i;try{const o=(0,rt.dU)(s),a=o.indexOf("ee")+2;r=ke.A.decode(o.substring(0,a)),i=s.slice(a)}catch{return}switch(r.msg_type){case 0:this._onRequest(r.piece);break;case 1:this._onData(r.piece,i,r.total_size);break;case 2:this._onReject(r.piece)}}fetch(){this._metadataComplete||(this._fetching=!0,this._metadataSize&&this._requestPieces())}cancel(){this._fetching=!1}async setMetadata(s){if(this._metadataComplete)return!0;Eg("set metadata");try{const r=ke.A.decode(s).info;r&&(s=ke.A.encode(r))}catch{}return(!this._infoHash||this._infoHash===await(0,rt.tW)(s,"hex"))&&(this.cancel(),this.metadata=s,this._metadataComplete=!0,this._metadataSize=this.metadata.length,this._wire.extendedHandshake.metadata_size=this._metadataSize,this.emit("metadata",ke.A.encode({info:ke.A.decode(this.metadata)})),!0)}_send(s,r){let i=ke.A.encode(s);ArrayBuffer.isView(r)&&(i=(0,rt.xW)([i,r])),this._wire.extended("ut_metadata",i)}_request(s){this._send({msg_type:0,piece:s})}_data(s,r,i){const o={msg_type:1,piece:s};typeof i=="number"&&(o.total_size=i),this._send(o,r)}_reject(s){this._send({msg_type:2,piece:s})}_onRequest(s){if(!this._metadataComplete)return void this._reject(s);const r=s*Wn;let i=r+Wn;i>this._metadataSize&&(i=this._metadataSize);const o=this.metadata.slice(r,i);this._data(s,o,this._metadataSize)}_onData(s,r,i){r.length>Wn||!this._fetching||(this.metadata.set(r,s*Wn),this._bitfield.set(s),this._checkDone())}_onReject(s){this._remainingRejects>0&&this._fetching?(this._request(s),this._remainingRejects-=1):this.emit("warning",new Error('Peer sent "reject" too much'))}_requestPieces(){if(this._fetching){this.metadata=new Uint8Array(this._metadataSize);for(let s=0;s<this._numPieces;s++)this._request(s)}}async _checkDone(){let s=!0;for(let r=0;r<this._numPieces;r++)if(!this._bitfield.get(r)){s=!1;break}s&&(await this.setMetadata(this.metadata)||this._failedMetadata())}_failedMetadata(){this._bitfield=new Nr.A(0,{grow:1e3}),this._remainingRejects-=this._numPieces,this._remainingRejects>0?this._requestPieces():this.emit("warning",new Error("Peer sent invalid metadata"))}}return t.prototype.name="ut_metadata",t};var _i=ot(8878),Tg=ot(1133);const Dg=fe("webtorrent:file-iterator");class Og extends Me{constructor(t,{start:e,end:s}){super(),this._torrent=t._torrent,this._pieceLength=t._torrent.pieceLength,this._startPiece=(e+t.offset)/this._pieceLength|0,this._endPiece=(s+t.offset)/this._pieceLength|0,this._piece=this._startPiece,this._offset=e+t.offset-this._startPiece*this._pieceLength,this._missing=s-e+1,this._criticalLength=Math.min(1048576/this._pieceLength|0,2),this._torrent._select(this._startPiece,this._endPiece,1,null,!0),this.destroyed=!1}[Symbol.asyncIterator](){return this}next(){return new Promise((t,e)=>{if(this._missing===0||this.destroyed)return t({done:!0}),this.destroy();const s=(i,o)=>{if(!this._torrent.bitfield.get(i)){const a=u=>{(u===i||this.destroyed)&&(this._torrent.removeListener("verified",a),s(i,o))};return this._torrent.on("verified",a),this._torrent.critical(i,i+this._criticalLength)}if(this._torrent.destroyed)return e(new Error("Torrent removed"));this._torrent.store.get(i,o,(a,u)=>this.destroyed?t({done:!0}):(Dg("read %s and yielding (length %s) (err %s)",i,u==null?void 0:u.length,a==null?void 0:a.message),a?e(a):void t({value:u,done:!1})))},r=Math.min(this._missing,this._pieceLength-this._offset);s(this._piece++,{length:r,offset:this._offset}),this._missing-=r,this._offset=0})}async return(){return this.destroy(),{done:!0}}async throw(t){throw t}destroy(t=()=>{},e){this.destroyed||(this.destroyed=!0,this._torrent.destroyed||this._torrent._deselect(this._startPiece,this._endPiece,!0),this.emit("return"),t(e))}}class Vo extends Me{constructor(t,e){super(),this._torrent=t,this._destroyed=!1,this._fileStreams=new Set,this._iterators=new Set,this.name=e.name,this.path=e.path,this.length=e.length,this.size=e.length,this.type=Tg.getType(this.name)||"application/octet-stream",this.offset=e.offset,this.done=!1;const s=e.offset,r=s+e.length-1;this._startPiece=s/this._torrent.pieceLength|0,this._endPiece=r/this._torrent.pieceLength|0,this.length===0&&(this.done=!0,this.emit("done")),this._client=t.client}get downloaded(){if(this._destroyed||!this._torrent.bitfield)return 0;const{pieces:t,bitfield:e,pieceLength:s,lastPieceLength:r}=this._torrent,{_startPiece:i,_endPiece:o}=this,a=c=>{const l=c===t.length-1?r:s;return e.get(c)?l:l-t[c].missing};let u=0;for(let c=i;c<=o;c+=1){const l=a(c);if(u+=l,c===i){const f=this.offset%s;u-=Math.min(f,l)}if(c===o){const f=(o===t.length-1?r:s)-(this.offset+this.length)%s;u-=Math.min(f,l)}}return u}get progress(){return this.length?this.downloaded/this.length:0}select(t){this.length!==0&&this._torrent.select(this._startPiece,this._endPiece,t)}deselect(){this.length!==0&&this._torrent.deselect(this._startPiece,this._endPiece)}[Symbol.asyncIterator](t={}){if(this.length===0)return async function*(){}();const{start:e=0}=t??{},s=t!=null&&t.end&&t.end<this.length?t.end:this.length-1;if(this.done)return ug(this._torrent.store,{offset:e+this.offset,length:s-e+1});const r=new Og(this,{start:e,end:s});return this._iterators.add(r),r.once("return",()=>{this._iterators.delete(r)}),r}createReadStream(t){const e=this[Symbol.asyncIterator](t),s=Gr.Readable.from(e);return this._fileStreams.add(s),s.once("close",()=>{this._fileStreams.delete(s)}),s}async arrayBuffer(t={}){const{start:e=0}=t,s=t!=null&&t.end&&t.end<this.length?t.end:this.length-1,r=new Uint8Array(s-e+1);let i=0;for await(const o of this[Symbol.asyncIterator]({start:e,end:s}))r.set(o,i),i+=o.length;return r.buffer}async blob(t){return new Blob([await this.arrayBuffer(t)],{type:this.type})}stream(t){let e;return new ReadableStream({start:()=>{e=this[Symbol.asyncIterator](t)},async pull(s){const{value:r,done:i}=await e.next();i?s.close():s.enqueue(r)},cancel(){e.return()}})}get streamURL(){if(!this._client._server)throw new Error("No server created");return`${this._client._server.pathname}/${this._torrent.infoHash}/${this.path}`}streamTo(t){return t.src=this.streamURL,t}includes(t){return this._startPiece<=t&&this._endPiece>=t}_destroy(){this._destroyed=!0,this._torrent=null;for(const t of this._fileStreams)t.destroy();this._fileStreams.clear();for(const t of this._iterators)t.destroy();this._iterators.clear()}}var ie=ot(5658);class Pg{constructor(t){this._torrent=t,this._numPieces=t.pieces.length,this._pieces=new Array(this._numPieces),this._onWire=e=>{this.recalculate(),this._initWire(e)},this._onWireHave=e=>{this._pieces[e]+=1},this._onWireBitfield=()=>{this.recalculate()},this._torrent.wires.forEach(e=>{this._initWire(e)}),this._torrent.on("wire",this._onWire),this.recalculate()}getRarestPiece(t){let e=[],s=1/0;for(let r=0;r<this._numPieces;++r){if(t&&!t(r))continue;const i=this._pieces[r];i===s?e.push(r):i<s&&(e=[r],s=i)}return e.length?e[Math.random()*e.length|0]:-1}destroy(){this._torrent.removeListener("wire",this._onWire),this._torrent.wires.forEach(t=>{this._cleanupWireEvents(t)}),this._torrent=null,this._pieces=null,this._onWire=null,this._onWireHave=null,this._onWireBitfield=null}_initWire(t){t._onClose=()=>{this._cleanupWireEvents(t);for(let e=0;e<this._numPieces;++e)this._pieces[e]-=t.peerPieces.get(e)},t.on("have",this._onWireHave),t.on("bitfield",this._onWireBitfield),t.once("close",t._onClose)}recalculate(){this._pieces.fill(0);for(const t of this._torrent.wires)for(let e=0;e<this._numPieces;++e)this._pieces[e]+=t.peerPieces.get(e)}_cleanupWireEvents(t){t.removeListener("have",this._onWireHave),t.removeListener("bitfield",this._onWireBitfield),t._onClose&&t.removeListener("close",t._onClose),t._onClose=null}}var Ig=ot(4343),jg=ot(6458),cr=ot(6819);const De=fe("webtorrent:webconn");class Rg extends jg.A{constructor(t,e){super(),this.url=t,this.connId=t,this._torrent=e,this._init(t)}_init(t){this.setKeepAlive(!0),this.use(jl()),this.once("handshake",async(e,s)=>{const r=await(0,rt.tW)(t,"hex");if(this.destroyed)return;this.handshake(e,r);const i=this._torrent.pieces.length,o=new Nr.A(i);for(let a=0;a<=i;a++)o.set(a,!0);this.bitfield(o)}),this.once("interested",()=>{De("interested"),this.unchoke()}),this.on("uninterested",()=>{De("uninterested")}),this.on("choke",()=>{De("choke")}),this.on("unchoke",()=>{De("unchoke")}),this.on("bitfield",()=>{De("bitfield")}),this.lt_donthave.on("donthave",()=>{De("donthave")}),this.on("request",(e,s,r,i)=>{De("request pieceIndex=%d offset=%d length=%d",e,s,r),this.httpRequest(e,s,r,(o,a)=>{if(o){this.lt_donthave.donthave(e);const u=setTimeout(()=>{this.destroyed||this.have(e)},1e4);u.unref&&u.unref()}i(o,a)})})}async httpRequest(t,e,s,r){r=Ol(r);const i=t*this._torrent.pieceLength+e,o=i+s-1,a=this._torrent.files;let u,c;if(a.length<=1)u=[{url:this.url,start:i,end:o}];else{const l=a.filter(f=>f.offset<=o&&f.offset+f.length>i);if(l.length<1)return r(new Error("Could not find file corresponding to web seed range request"));u=l.map(f=>{const h=f.offset+f.length-1;return{url:this.url+(this.url[this.url.length-1]==="/"?"":"/")+f.path.replace(this._torrent.path,""),fileOffsetInRange:Math.max(f.offset-i,0),start:Math.max(i-f.offset,0),end:Math.min(h,o-f.offset)}})}try{c=await Promise.all(u.map(async({start:l,end:f,url:h})=>{De("Requesting url=%s pieceIndex=%d offset=%d length=%d start=%d end=%d",h,t,e,s,l,f);const d=await bs(h,{cache:"no-store",method:"GET",headers:{"Cache-Control":"no-store","user-agent":`WebTorrent/${cr} (https://webtorrent.io)`,range:`bytes=${l}-${f}`},signal:AbortSignal.timeout(6e4)});if(!d.ok)throw new Error(`Unexpected HTTP status code ${d.status}`);const p=new Uint8Array(await d.arrayBuffer());return De("Got data of length %d",p.length),p}))}catch(l){return r(l)}r(null,(0,rt.xW)(c))}destroy(){super.destroy(),this._torrent=null}}class Fg{constructor(){Jt(this,"_items",[])}remove(t){for(let e=0;e<this._items.length;e++){const s=this._items[e];if(s.isStreamSelection){if(!t.isStreamSelection)continue;if(s.from===t.from&&s.to===t.to){this._items.splice(e,1);break}}else if(Fl(t,s))s.to=Math.max(t.from-1,0);else if(Ll(t,s))s.from=t.to+1;else if(Nl(t,s)){const r=[],i={...s,to:Math.max(t.from-1,0)};i.to-i.from>=0&&t.from!==0&&r.push(i);const o={...s,from:t.to+1};o.to-o.from>=0&&r.push(o),this._items.splice(e,1,...r),e=e-1+r.length}else Bl(t,s)&&(this._items.splice(e,1),e--)}}insert(t){if(t.from>t.to)throw new Error("Invalid interval");if(!t.isStreamSelection){const{notify:e}=t,s=[];for(const r of this._items)r.notify&&Lg(t,r)&&s.push(r.notify);s.length>0&&(t.notify=()=>{s.forEach(r=>r()),e==null||e()}),this.remove(t)}this._items.push(t)}sort(t=(e,s)=>e.from-s.from){this._items.sort(t)}get length(){return this._items.length}get(t){return this._items[t]}swap(t,e){const s=this._items[t];this._items[t]=this._items[e],this._items[e]=s}clear(){this._items.length=0}*[Symbol.iterator](){for(let t=0;t<this._items.length;t++){const e=this._items[t];e.remove=()=>{this._items.splice(t,1),t--},yield e,delete e.remove}}}function Fl(n,t){return n.from<=t.to&&n.from>t.from&&n.to>t.to}function Ll(n,t){return n.to>=t.from&&n.to<t.to&&n.from<t.from}function Nl(n,t){const e=t.to-t.from,s=n.to-n.from;return n.from>=t.from&&n.to<=t.to&&s<e}function Bl(n,t){return n.from<=t.from&&n.to>=t.to}const Lg=(n,t)=>()=>Fl(n,t)||Ll(n,t)||Nl(n,t)||Bl(n,t);var $l=ot(717);const Ng=fe("webtorrent:torrent"),yi=5e3,wi=3*Re.BLOCK_LENGTH,Jo=$l.browser?lg().length:2,vi=[1e3,5e3,15e3],Ko=`WebTorrent/${cr} (https://webtorrent.io)`;var Oa,Pa,Ia,ja;const Bg=((Pa=(Oa=globalThis.navigator)==null?void 0:Oa.storage)==null?void 0:Pa.getDirectory)&&((ja=(Ia=globalThis.FileSystemFileHandle)==null?void 0:Ia.prototype)==null?void 0:ja.createWritable),$g=!$l.browser||Bg?Il:Rl;let Yi;try{Yi=ir(Dl.statSync("/tmp")&&"/tmp","webtorrent")}catch{Yi=ir(typeof Bo.tmpdir=="function"?Bo.tmpdir():"/","webtorrent")}const Zo=typeof window<"u"&&typeof window.requestIdleCallback=="function"&&window.requestIdleCallback;class Yo extends Me{constructor(t,e,s){super(),this._debugId="unknown infohash",this.client=e,this.announce=s.announce,this.urlList=s.urlList,this.path=s.path||Yi,this.addUID=s.addUID||!1,this.rootDir=s.rootDir||null,this.skipVerify=!!s.skipVerify,this._store=s.store||$g,this._preloadedStore=s.preloadedStore||null,this._storeCacheSlots=s.storeCacheSlots!==void 0?s.storeCacheSlots:20,this._destroyStoreOnDestroy=s.destroyStoreOnDestroy||!1,this.store=null,this.storeOpts=s.storeOpts,this.alwaysChokeSeeders=s.alwaysChokeSeeders??!0,this._getAnnounceOpts=s.getAnnounceOpts,typeof s.private=="boolean"&&(this.private=s.private),this.strategy=s.strategy||"sequential",this.maxWebConns=s.maxWebConns||4,this._rechokeNumSlots=s.uploads===!1||s.uploads===0?0:+s.uploads||10,this._rechokeOptimisticWire=null,this._rechokeOptimisticTime=0,this._rechokeIntervalId=null,this._noPeersIntervalId=null,this._noPeersIntervalTime=s.noPeersIntervalTime?1e3*s.noPeersIntervalTime:3e4,this._startAsDeselected=s.deselect||!1,this.ready=!1,this.destroyed=!1,this.paused=s.paused||!1,this.done=!1,this.metadata=null,this.files=[],this.pieces=[],this._amInterested=!1,this._selections=new Fg,this._critical=[],this.wires=[],this._queue=[],this._peers={},this._peersLength=0,this.received=0,this.uploaded=0,this._downloadSpeed=Lr(),this._uploadSpeed=Lr(),this._servers=[],this._xsRequests=[],this._fileModtimes=s.fileModtimes,t!==null&&this._onTorrentId(t),this._debug("new torrent")}get timeRemaining(){return this.done?0:this.downloadSpeed===0?1/0:(this.length-this.downloaded)/this.downloadSpeed*1e3}get downloaded(){if(!this.bitfield)return 0;let t=0;for(let e=0,s=this.pieces.length;e<s;++e)if(this.bitfield.get(e))t+=e===s-1?this.lastPieceLength:this.pieceLength;else{const r=this.pieces[e];t+=r.length-r.missing}return t}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){return this.length?this.downloaded/this.length:0}get ratio(){return this.uploaded/(this.received||this.length)}get numPeers(){return this.wires.length}get torrentFileBlob(){return this.torrentFile?new Blob([this.torrentFile],{type:"application/x-bittorrent"}):null}get _numQueued(){return this._queue.length+(this._peersLength-this._numConns)}get _numConns(){let t=0;for(const e in this._peers)this._peers[e].connected&&(t+=1);return t}async _onTorrentId(t){if(this.destroyed)return;let e;try{e=await Er(t)}catch{}e?(this.infoHash=e.infoHash,this._debugId=(0,rt.V5)(e.infoHash).substring(0,7),qt(()=>{this.destroyed||this._onParsedTorrent(e)})):Tl(t,(s,r)=>{if(!this.destroyed)return s?this._destroy(s):void this._onParsedTorrent(r)})}_onParsedTorrent(t){if(!this.destroyed){if(this._processParsedTorrent(t),!this.infoHash)return this._destroy(new Error("Malformed torrent data: No info hash"));this._rechokeIntervalId=setInterval(()=>{this._rechoke()},1e4),this._rechokeIntervalId.unref&&this._rechokeIntervalId.unref(),this.emit("_infoHash",this.infoHash),this.destroyed||(this.emit("infoHash",this.infoHash),this.destroyed||(this.client.listening?this._onListening():this.client.once("listening",()=>{this._onListening()})))}}_processParsedTorrent(t){this._debugId=(0,rt.V5)(t.infoHash).substring(0,7),this.private!==void 0&&(t.private=this.private),Array.isArray(this.announce)&&(t.announce=t.announce.concat(this.announce)),this.client.tracker&&Array.isArray(this.client.tracker.announce)&&!t.private&&(t.announce=t.announce.concat(this.client.tracker.announce)),this.client.tracker&&globalThis.WEBTORRENT_ANNOUNCE&&!t.private&&(t.announce=t.announce.concat(globalThis.WEBTORRENT_ANNOUNCE)),this.urlList&&(t.urlList=t.urlList.concat(this.urlList)),t.announce=Array.from(new Set(t.announce)),t.urlList=Array.from(new Set(t.urlList)),Object.assign(this,t),this.magnetURI=ng(t),this.torrentFile=function(e){const s={info:e.info};return s["announce-list"]=(e.announce||[]).map(r=>(s.announce||(s.announce=r),[r=(0,rt.L0)(r)])),s["url-list"]=e.urlList||[],e.private!==void 0&&(s.private=Number(e.private)),e.created&&(s["creation date"]=e.created.getTime()/1e3|0),e.createdBy&&(s["created by"]=e.createdBy),e.comment&&(s.comment=e.comment),ke.A.encode(s)}(t)}_onListening(){this.destroyed||(this.info?this._onMetadata(this):(this.xs&&this._getMetadataFromServer(),this._startDiscovery()))}_startDiscovery(){if(this.discovery||this.destroyed)return;let t=this.client.tracker;t&&(t=Object.assign({},this.client.tracker,{getAnnounceOpts:()=>{if(this.destroyed)return;const e={uploaded:this.uploaded,downloaded:this.downloaded,left:Math.max(this.length-this.downloaded,0)};return this.client.tracker.getAnnounceOpts&&Object.assign(e,this.client.tracker.getAnnounceOpts()),this._getAnnounceOpts&&Object.assign(e,this._getAnnounceOpts()),e}})),this.peerAddresses&&this.peerAddresses.forEach(e=>this.addPeer(e,ie.default.SOURCE_MANUAL)),this.discovery=new yg({infoHash:this.infoHash,announce:this.announce,peerId:this.client.peerId,dht:!this.private&&this.client.dht,tracker:t,port:this.client.torrentPort,userAgent:Ko,lsd:this.client.lsd}),this.discovery.on("error",e=>{this._destroy(e)}),this.discovery.on("peer",(e,s)=>{this._debug("peer %s discovered via %s",e,s),this.client.seedOutgoingConnections||!this.done?this.addPeer(e,s):this._debug("discovery ignoring peer %s: torrent is done and seedOutgoingConnections is false",e)}),this.discovery.on("trackerAnnounce",()=>{this.emit("trackerAnnounce")}),this.discovery.on("dhtAnnounce",()=>{this.emit("dhtAnnounce")}),this.discovery.on("warning",e=>{this.emit("warning",e)}),this._noPeersIntervalId=setInterval(()=>{if(this.destroyed)return;const e={[ie.default.SOURCE_TRACKER]:{enabled:!!this.client.tracker,numPeers:0},[ie.default.SOURCE_DHT]:{enabled:!!this.client.dht,numPeers:0},[ie.default.SOURCE_LSD]:{enabled:!!this.client.lsd,numPeers:0},[ie.default.SOURCE_UT_PEX]:{enabled:this.client.utPex&&typeof _i=="function",numPeers:0}};for(const s of Object.values(this._peers)){const r=e[s.source];r!==void 0&&r.numPeers++}for(const s of Object.keys(e)){const r=e[s];r.enabled&&r.numPeers===0&&this.emit("noPeers",s)}},this._noPeersIntervalTime),this._noPeersIntervalId.unref&&this._noPeersIntervalId.unref()}_getMetadataFromServer(){const t=this,e=Array.isArray(this.xs)?this.xs:[this.xs];t._xsRequestsController=new AbortController;const s=t._xsRequestsController.signal,r=e.map(i=>o=>{(async function(a,u){if(a.indexOf("http://")!==0&&a.indexOf("https://")!==0)return t.emit("warning",new Error(`skipping non-http xs param: ${a}`)),u(null);const c={method:"GET",headers:{"user-agent":Ko},signal:s};let l,f,h;try{l=await bs(a,c)}catch{return t.emit("warning",new Error(`http error from xs param: ${a}`)),u(null)}if(t.destroyed||t.metadata)return u(null);if(l.status!==200)return t.emit("warning",new Error(`non-200 status code ${l.status} from xs param: ${a}`)),u(null);try{f=new Uint8Array(await l.arrayBuffer())}catch(d){return t.emit("warning",d),u(null)}try{h=await Er(f)}catch{}if(!h)return t.emit("warning",new Error(`got invalid torrent file from xs param: ${a}`)),u(null);if(h.infoHash!==t.infoHash)return t.emit("warning",new Error(`got torrent file with incorrect info hash from xs param: ${a}`)),u(null);t._onMetadata(h),u(null)})(i,o)});Qe(r)}async _onMetadata(t){var r;if(this.metadata||this.destroyed)return;let e;if(this._debug("got metadata"),(r=this._xsRequestsController)==null||r.abort(),this._xsRequestsController=null,t&&t.infoHash)e=t;else try{e=await Er(t)}catch(i){return this._destroy(i)}this._processParsedTorrent(e),this.metadata=this.torrentFile,this.client.enableWebSeeds&&this.urlList.forEach(i=>{this.addWebSeed(i)}),this._rarityMap=new Pg(this),this.files=this.files.map(i=>new Vo(this,i));let s=this._preloadedStore;if(s||(s=new this._store(this.pieceLength,{...this.storeOpts,torrent:this,path:this.path,files:this.files,length:this.length,name:this.name+" - "+this.infoHash.slice(0,8),addUID:this.addUID,rootDir:this.rootDir,max:this._storeCacheSlots})),this._storeCacheSlots>0&&!(s instanceof Rl)&&(s=new ag(s,{max:this._storeCacheSlots})),this.store=new kg(s),this.so&&!this._startAsDeselected?this.files.forEach((i,o)=>{this.so.includes(o)&&this.files[o].select()}):this.pieces.length===0||this._startAsDeselected||this.select(0,this.pieces.length-1,0),this._hashes=this.pieces,this.pieces=this.pieces.map((i,o)=>{const a=o===this.pieces.length-1?this.lastPieceLength:this.pieceLength;return new Re(a)}),this._reservations=this.pieces.map(()=>[]),this.bitfield=new Nr.A(this.pieces.length),this.emit("metadata"),!this.destroyed)if(this.skipVerify)this._markAllVerified(),this._onStore();else{const i=o=>{if(o)return this._destroy(o);this._debug("done verifying"),this._onStore()};this._debug("verifying existing torrent data"),this._fileModtimes&&this._store===Il?this.getFileModtimes((o,a)=>{if(o)return this._destroy(o);this.files.map((u,c)=>a[c]===this._fileModtimes[c]).every(u=>u)?(this._markAllVerified(),this._onStore()):this._verifyPieces(i)}):this._verifyPieces(i)}}getFileModtimes(t){const e=[];Wo(this.files.map((s,r)=>i=>{const o=this.addUID?ir(this.name+" - "+this.infoHash.slice(0,8)):ir(this.path,s.path);Dl.stat(o,(a,u)=>{if(a&&a.code!=="ENOENT")return i(a);e[r]=u&&u.mtime.getTime(),i(null)})}),Jo,s=>{this._debug("done getting file modtimes"),t(s,e)})}_verifyPieces(t){Wo(this.pieces.map((e,s)=>r=>{if(this.destroyed)return r(new Error("torrent is destroyed"));const i={};s===this.pieces.length-1&&(i.length=this.lastPieceLength),this.store.get(s,i,async(o,a)=>{if(this.destroyed)return r(new Error("torrent is destroyed"));if(o)return qt(()=>r(null));const u=await(0,rt.tW)(a,"hex");if(this.destroyed)return r(new Error("torrent is destroyed"));u===this._hashes[s]?(this._debug("piece verified %s",s),this._markVerified(s)):(this._markUnverified(s),this._debug("piece invalid %s",s)),r(null)})}),Jo,t)}rescanFiles(t){if(this.destroyed)throw new Error("torrent is destroyed");t||(t=Xo),this._verifyPieces(e=>{if(e)return this._destroy(e),t(e);this._checkDone(),t(null)})}_markAllVerified(){for(let t=0;t<this.pieces.length;t++)this._markVerified(t)}_markVerified(t){this.pieces[t]=null,this._reservations[t]=null,this.bitfield.set(t,!0),this.emit("verified",t)}_markUnverified(t){const e=t===this.pieces.length-1?this.lastPieceLength:this.pieceLength;this.pieces[t]=new Re(e),this.bitfield.set(t,!1),this._startAsDeselected||this.select(t,t,1),this.files.forEach(s=>{s.done&&s.includes(t)&&(s.done=!1)})}_hasAllPieces(){for(let t=0;t<this.pieces.length;t++)if(!this.bitfield.get(t))return!1;return!0}_hasNoPieces(){return!this._hasMorePieces(0)}_hasMorePieces(t){let e=0;for(let s=0;s<this.pieces.length;s++)if(this.bitfield.get(s)&&(e+=1,e>t))return!0;return!1}_onStore(){this.destroyed||(this._debug("on store"),this._startDiscovery(),this.ready=!0,this.emit("ready"),this._checkDone(),this._updateSelections(),this.wires.forEach(t=>{t.ut_metadata&&t.ut_metadata.setMetadata(this.metadata),this._onWireWithMetadata(t)}))}destroy(t,e){if(typeof t=="function")return this.destroy(null,t);this._destroy(null,t,e)}_destroy(t,e,s){var i;if(typeof e=="function")return this._destroy(t,null,e);if(this.destroyed)return;this.destroyed=!0,this._debug("destroy"),this.client._remove(this),this._selections.clear(),clearInterval(this._rechokeIntervalId),clearInterval(this._noPeersIntervalId),(i=this._xsRequestsController)==null||i.abort(),this._rarityMap&&this._rarityMap.destroy();for(const o in this._peers)this.removePeer(o);this.files.forEach(o=>{o instanceof Vo&&o._destroy()});const r=this._servers.map(o=>a=>{o.destroy(a)});if(this.discovery&&r.push(o=>{this.discovery.destroy(o)}),this.store){let o=this._destroyStoreOnDestroy;e&&e.destroyStore!==void 0&&(o=e.destroyStore),r.push(a=>{o?this.store.destroy(a):this.store.close(a)})}Qe(r,s),t&&(this.listenerCount("error")===0?this.client.emit("error",t):this.emit("error",t)),this.emit("close"),this.client=null,this.files=[],this.discovery=null,this.store=null,this._rarityMap=null,this._peers=null,this._servers=null,this._xsRequests=null}addPeer(t,e){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.infoHash)throw new Error("addPeer() must not be called before the `infoHash` event");let s;if(typeof t=="string"){let o;try{o=qn(t)}catch{return this._debug("ignoring peer: invalid %s",t),this.emit("invalidPeer",t),!1}s=o[0]}else typeof t.remoteAddress=="string"&&(s=t.remoteAddress);if(this.client.blocked&&s&&this.client.blocked.contains(s))return this._debug("ignoring peer: blocked %s",t),typeof t!="string"&&t.destroy(),this.emit("blockedPeer",t),!1;const r=this.client.utp&&this._isIPv4(s)?"utp":"tcp",i=!!this._addPeer(t,r,e);return i?this.emit("peer",t):this.emit("invalidPeer",t),i}_addPeer(t,e,s){if(this.destroyed)return typeof t!="string"&&t.destroy(),null;if(typeof t=="string"&&!this._validAddr(t))return this._debug("ignoring peer: invalid %s",t),null;const r=t&&t.id||t;if(this._peers[r])return this._debug("ignoring peer: duplicate (%s)",r),typeof t!="string"&&t.destroy(),null;if(this.paused)return this._debug("ignoring peer: torrent is paused"),typeof t!="string"&&t.destroy(),null;let i;return this._debug("add peer %s",r),i=typeof t=="string"?e==="utp"?ie.default.createUTPOutgoingPeer(t,this,this.client.throttleGroups,s):ie.default.createTCPOutgoingPeer(t,this,this.client.throttleGroups,s):ie.default.createWebRTCPeer(t,this,this.client.throttleGroups,s),this._registerPeer(i),typeof t=="string"&&(this._queue.push(i),this._drain()),i}addWebSeed(t){if(this.destroyed)throw new Error("torrent is destroyed");let e,s;if(typeof t=="string"){if(e=t,!/^https?:\/\/.+/.test(e))return this.emit("warning",new Error(`ignoring invalid web seed: ${e}`)),void this.emit("invalidPeer",e);if(this._peers[e])return this.emit("warning",new Error(`ignoring duplicate web seed: ${e}`)),void this.emit("invalidPeer",e);s=new Rg(e,this)}else{if(!t||typeof t.connId!="string")return void this.emit("warning",new Error("addWebSeed must be passed a string or connection object with id property"));if(s=t,e=s.connId,this._peers[e])return this.emit("warning",new Error(`ignoring duplicate web seed: ${e}`)),void this.emit("invalidPeer",e)}this._debug("add web seed %s",e);const r=ie.default.createWebSeedPeer(s,e,this,this.client.throttleGroups);this._registerPeer(r),this.emit("peer",e)}_addIncomingPeer(t){return this.destroyed?t.destroy(new Error("torrent is destroyed")):this.paused?t.destroy(new Error("torrent is paused")):(this._debug("add incoming peer %s",t.id),void this._registerPeer(t))}_registerPeer(t){t.on("download",e=>{this.destroyed||(this.received+=e,this._downloadSpeed(e),this.client._downloadSpeed(e),this.emit("download",e),this.destroyed||this.client.emit("download",e))}),t.on("upload",e=>{this.destroyed||(this.uploaded+=e,this._uploadSpeed(e),this.client._uploadSpeed(e),this.emit("upload",e),this.destroyed||this.client.emit("upload",e))}),this._peers[t.id]=t,this._peersLength+=1}removePeer(t){var s;const e=(t==null?void 0:t.id)||t;t&&!t.id&&(t=(s=this._peers)==null?void 0:s[e]),t&&(t.destroy(),this.destroyed||(this._debug("removePeer %s",e),delete this._peers[e],this._peersLength-=1,this._drain()))}_select(t=0,e=this.pieces.length-1,s,r,i=!1){if(this.destroyed)throw new Error("torrent is destroyed");if(t<0||e<t||this.pieces.length<=e)throw new Error(`invalid selection ${t} : ${e}`);s=Number(s)||0,this._debug("select %s-%s (priority %s)",t,e,s),this._selections.insert({from:t,to:e,offset:0,priority:s,notify:r,isStreamSelection:i}),this._selections.sort((o,a)=>a.priority-o.priority),this._updateSelections()}select(t,e,s,r){this._select(t,e,s,r,!1)}_deselect(t,e,s=!1){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("deselect %s-%s",t,e),this._selections.remove({from:t,to:e,isStreamSelection:s}),this._updateSelections()}deselect(t,e){this._deselect(t,e,!1)}critical(t,e){if(this.destroyed)throw new Error("torrent is destroyed");this._debug("critical %s-%s",t,e);for(let s=t;s<=e;++s)this._critical[s]=!0;this._updateSelections()}_onWire(t,e){if(this._debug("got wire %s (%s)",t._debugId,e||"Unknown"),this.wires.push(t),e){const s=qn(e);t.remoteAddress=s[0],t.remotePort=s[1]}this.client.dht&&this.client.dht.listening&&t.on("port",s=>{if(!this.destroyed&&!this.client.dht.destroyed){if(!t.remoteAddress)return this._debug("ignoring PORT from peer with no address");if(s===0||s>65536)return this._debug("ignoring invalid PORT from peer");this._debug("port: %s (from %s)",s,e),this.client.dht.addNode({host:t.remoteAddress,port:s})}}),t.on("timeout",()=>{this._debug("wire timeout (%s)",e),t.destroy()}),t.type!=="webSeed"&&t.setTimeout(3e4,!0),t.setKeepAlive(!0),t.use(Cg(this.metadata)),t.ut_metadata.on("warning",s=>{this._debug("ut_metadata warning: %s",s.message)}),this.metadata||(t.ut_metadata.on("metadata",s=>{this._debug("got metadata via ut_metadata"),this._onMetadata(s)}),t.ut_metadata.fetch()),this.client.utPex&&typeof _i=="function"&&!this.private&&(t.use(_i()),t.ut_pex.on("peer",s=>{this.client.seedOutgoingConnections||!this.done?(this._debug("ut_pex: got peer: %s (from %s)",s,e),this.addPeer(s,ie.default.SOURCE_UT_PEX)):this._debug("ut_pex ignoring peer %s: torrent is done and seedOutgoingConnections is false",s)}),t.ut_pex.on("dropped",s=>{const r=this._peers[s];r&&!r.connected&&(this._debug("ut_pex: dropped peer: %s (from %s)",s,e),this.removePeer(s))}),t.once("close",()=>{t.ut_pex.reset()})),t.use(jl()),this.emit("wire",t,e),this.ready&&qt(()=>{this._onWireWithMetadata(t)})}_onWireWithMetadata(t){let e=null;const s=()=>{this.destroyed||t.destroyed||(this._numQueued>2*(this._numConns-this.numPeers)&&t.amInterested?t.destroy():(e=setTimeout(s,yi),e.unref&&e.unref()))};let r;const i=()=>{if(t.peerPieces.buffer.length===this.bitfield.buffer.length){for(r=0;r<this.pieces.length;++r)if(!t.peerPieces.get(r))return;t.isSeeder=!0,this.alwaysChokeSeeders&&t.choke()}};t.on("bitfield",()=>{i(),this._update(),this._updateWireInterest(t)}),t.on("have",()=>{i(),this._update(),this._updateWireInterest(t)}),t.lt_donthave.on("donthave",()=>{i(),this._update(),this._updateWireInterest(t)}),t.on("have-all",()=>{t.isSeeder=!0,this.alwaysChokeSeeders&&t.choke(),this._update(),this._updateWireInterest(t)}),t.on("have-none",()=>{t.isSeeder=!1,this._update(),this._updateWireInterest(t)}),t.on("allowed-fast",o=>{this._update()}),t.once("interested",()=>{t.unchoke()}),t.once("close",()=>{clearTimeout(e)}),t.on("choke",()=>{clearTimeout(e),e=setTimeout(s,yi),e.unref&&e.unref()}),t.on("unchoke",()=>{clearTimeout(e),this._update()}),t.on("request",(o,a,u,c)=>{if(u>131072)return t.destroy();this.pieces[o]||this.store.get(o,{offset:a,length:u},c)}),t.hasFast&&this._hasAllPieces()?t.haveAll():t.hasFast&&this._hasNoPieces()?t.haveNone():t.bitfield(this.bitfield),this._updateWireInterest(t),t.peerExtensions.dht&&this.client.dht&&this.client.dht.listening&&t.port(this.client.dht.address().port),t.type!=="webSeed"&&(e=setTimeout(s,yi),e.unref&&e.unref()),t.isSeeder=!1,i()}_updateSelections(){this.ready&&!this.destroyed&&(qt(()=>{this._gcSelections()}),this._updateInterest(),this._update())}_gcSelections(){var t,e;for(const s of this._selections){const r=s.offset;for(;this.bitfield.get(s.from+s.offset)&&s.from+s.offset<s.to;)s.offset+=1;r!==s.offset&&((t=s.notify)==null||t.call(s)),s.to===s.from+s.offset&&this.bitfield.get(s.from+s.offset)&&(s.remove(),(e=s.notify)==null||e.call(s),this._updateInterest())}this._selections.length||this.emit("idle")}_updateInterest(){const t=this._amInterested;this._amInterested=!!this._selections.length,this.wires.forEach(e=>this._updateWireInterest(e)),t!==this._amInterested&&(this._amInterested?this.emit("interested"):this.emit("uninterested"))}_updateWireInterest(t){let e=!1;for(let s=0;s<this.pieces.length;++s)if(this.pieces[s]&&t.peerPieces.get(s)){e=!0;break}e?t.interested():t.uninterested()}_update(){Zo?Zo(()=>this._updateWireWrapper(),{timeout:250}):this._updateWireWrapper()}_updateWireWrapper(){if(this.destroyed)return;const t=Ag(this.wires);let e;for(;e=t();)this._updateWire(e)}_updateWire(t){if(t.destroyed)return!1;const e=this,s=xi(t,.5);if(t.requests.length>=s)return;const r=xi(t,1);if(t.peerChoking)t.hasFast&&t.peerAllowedFastSet.length>0&&!this._hasMorePieces(t.peerAllowedFastSet.length-1)&&function(){if(t.requests.length>=r)return!1;for(const u of t.peerAllowedFastSet){if(t.peerPieces.get(u)&&!e.bitfield.get(u))for(;e._request(t,u,!1)&&t.requests.length<r;);if(!(t.requests.length<r))return!0}}();else{if(!t.downloaded)return function(){if(t.requests.length)return;let u=e._selections.length;for(;u--;){const c=e._selections.get(u);let l;if(e.strategy==="rarest"){const f=c.from+c.offset,h=c.to,d=h-f+1,p={};let g=0;const b=i(f,h,p);for(;g<d&&(l=e._rarityMap.getRarestPiece(b),!(l<0));){if(e._request(t,l,!1))return;p[l]=!0,g+=1}}else for(l=c.to;l>=c.from+c.offset;--l)if(t.peerPieces.get(l)&&e._request(t,l,!1))return}}();a(!1)||a(!0)}function i(u,c,l,f){return h=>h>=u&&h<=c&&!(h in l)&&t.peerPieces.get(h)&&(!f||f(h))}function o(u){let c=u;for(let l=u;l<e._selections.length&&e._selections.get(l).priority;l++)c=l;e._selections.swap(u,c)}function a(u){if(t.requests.length>=r)return!0;const c=function(){const l=t.downloadSpeed()||1;if(l>wi)return()=>!0;const f=Math.max(1,t.requests.length)*Re.BLOCK_LENGTH/l;let h=10,d=0;return p=>{if(!h||e.bitfield.get(p))return!0;let g=e.pieces[p].missing;for(;d<e.wires.length;d++){const b=e.wires[d],y=b.downloadSpeed();if(!(y<wi)&&!(y<=l)&&b.peerPieces.get(p)&&!((g-=y*f)>0))return h--,!1}return!0}}();for(let l=0;l<e._selections.length;l++){const f=e._selections.get(l);let h;if(e.strategy==="rarest"){const d=f.from+f.offset,p=f.to,g=p-d+1,b={};let y=0;const m=i(d,p,b,c);for(;y<g&&(h=e._rarityMap.getRarestPiece(m),!(h<0));){for(;e._request(t,h,e._critical[h]||u)&&t.requests.length<r;);if(!(t.requests.length<r))return f.priority&&o(l),!0;b[h]=!0,y++}}else for(h=f.from+f.offset;h<=f.to;h++)if(t.peerPieces.get(h)&&c(h)){for(;e._request(t,h,e._critical[h]||u)&&t.requests.length<r;);if(!(t.requests.length<r))return f.priority&&o(l),!0}}return!1}}_rechoke(){if(!this.ready)return;const t=this.wires.map(r=>({wire:r,random:Math.random()})).sort((r,i)=>{const o=r.wire,a=i.wire;return o.downloadSpeed()!==a.downloadSpeed()?o.downloadSpeed()-a.downloadSpeed():o.uploadSpeed()!==a.uploadSpeed()?o.uploadSpeed()-a.uploadSpeed():o.amChoking!==a.amChoking?o.amChoking?-1:1:r.random-i.random}).map(r=>r.wire);this._rechokeOptimisticTime<=0?this._rechokeOptimisticWire=null:this._rechokeOptimisticTime-=1;let e=0;for(;t.length>0&&e<this._rechokeNumSlots-1;){const r=t.pop();r.isSeeder||r===this._rechokeOptimisticWire||(r.unchoke(),r.peerInterested&&e++)}if(this._rechokeOptimisticWire===null&&this._rechokeNumSlots>0){const r=t.filter(i=>i.peerInterested);if(r.length>0){const i=r[s=r.length,Math.random()*s|0];i.unchoke(),this._rechokeOptimisticWire=i,this._rechokeOptimisticTime=2}}var s;t.filter(r=>r!==this._rechokeOptimisticWire).forEach(r=>r.choke())}_hotswap(t,e){const s=t.downloadSpeed();if(s<Re.BLOCK_LENGTH||!this._reservations[e])return!1;const r=this._reservations[e];if(!r)return!1;let i,o,a=1/0;for(o=0;o<r.length;o++){const u=r[o];if(!u||u===t)continue;const c=u.downloadSpeed();c>=wi||2*c>s||c>a||(i=u,a=c)}if(!i)return!1;for(o=0;o<r.length;o++)r[o]===i&&(r[o]=null);for(o=0;o<i.requests.length;o++){const u=i.requests[o];u.piece===e&&this.pieces[e].cancel(u.offset/Re.BLOCK_LENGTH|0)}return this.emit("hotswap",i,t,e),!0}_request(t,e,s){const r=this,i=t.requests.length,o=t.type==="webSeed";if(r.bitfield.get(e))return!1;const a=o?Math.min(function(g,b,y){return 1+Math.ceil(b*g.downloadSpeed()/y)}(t,1,r.pieceLength),r.maxWebConns):xi(t,1);if(i>=a)return!1;const u=r.pieces[e];let c=o?u.reserveRemaining():u.reserve();if(c===-1&&s&&r._hotswap(t,e)&&(c=o?u.reserveRemaining():u.reserve()),c===-1)return!1;let l=r._reservations[e];l||(l=r._reservations[e]=[]);let f=l.indexOf(null);f===-1&&(f=l.length),l[f]=t;const h=u.chunkOffset(c),d=o?u.chunkLengthRemaining(c):u.chunkLength(c);function p(){qt(()=>{r._update()})}return t.request(e,h,d,async function g(b,y){if(r.destroyed)return;if(!r.ready)return r.once("ready",()=>{g(b,y)});if(l[f]===t&&(l[f]=null),u!==r.pieces[e])return p();if(b)return r._debug("error getting piece %s (offset: %s length: %s) from %s: %s",e,h,d,`${t.remoteAddress}:${t.remotePort}`,b.message),o?u.cancelRemaining(c):u.cancel(c),void p();if(r._debug("got piece %s (offset: %s length: %s) from %s",e,h,d,`${t.remoteAddress}:${t.remotePort}`),!u.set(c,y,t))return p();const m=u.flush(),_=await(0,rt.tW)(m,"hex");r.destroyed||(_===r._hashes[e]?(r._debug("piece verified %s",e),r.store.put(e,m,w=>{w?r._destroy(w):(r.pieces[e]=null,r._markVerified(e),r.wires.forEach(v=>{v.have(e)}),r._checkDone(),p())})):(r.pieces[e]=new Re(u.length),r.emit("warning",new Error(`Piece ${e} failed verification`)),p()))}),!0}_checkDone(){var e;if(this.destroyed)return;this.files.forEach(s=>{if(!s.done){for(let r=s._startPiece;r<=s._endPiece;++r)if(!this.bitfield.get(r))return;s.done=!0,s.emit("done"),this._debug(`file done: ${s.name}`)}});const t=this.files.every(s=>s.done);return!this.done&&t?(this.done=!0,this._debug(`torrent done: ${this.infoHash}`),this.emit("done"),this.destroyed||this.discovery.complete()):this.done&&!t&&(this.done=!1,(e=this.discovery.tracker)==null||e.start()),this._gcSelections(),t}async load(t,e){if(this.destroyed)throw new Error("torrent is destroyed");if(!this.ready)return this.once("ready",()=>{this.load(t,e)});Array.isArray(t)||(t=[t]),e||(e=Xo);try{await cg(this.store,El(t),{chunkLength:this.pieceLength}),this._markAllVerified(),this._checkDone(),e(null)}catch(s){return e(s),s}}pause(){this.destroyed||(this._debug("pause"),this.paused=!0)}resume(){this.destroyed||(this._debug("resume"),this.paused=!1,this._drain())}_debug(){const t=[].slice.call(arguments);t[0]=`[${this.client?this.client._debugId:"No Client"}] [${this._debugId}] ${t[0]}`,Ng(...t)}_drain(){if(this._debug("_drain numConns %s maxConns %s",this._numConns,this.client.maxConns),typeof No.connect!="function"||this.destroyed||this.paused||this._numConns>=this.client.maxConns)return;this._debug("drain (%s queued, %s/%s peers)",this._numQueued,this.numPeers,this.client.maxConns);const t=this._queue.shift();if(!t)return;this._debug("%s connect attempt to %s",t.type,t.addr);const e=qn(t.addr),s={host:e[0],port:e[1]};this.client.utp&&t.type===ie.default.TYPE_UTP_OUTGOING?t.conn=Ig.connect(s.port,s.host):t.conn=No.connect(s);const r=t.conn;r.once("connect",()=>{this.destroyed||t.onConnect()}),r.once("error",i=>{t.destroy(i)}),t.startConnectTimeout(),r.on("close",()=>{if(this.destroyed)return;if(t.retries>=vi.length){if(this.client.utp){const a=this._addPeer(t.addr,"tcp",t.source);a&&(a.retries=0)}else this._debug("conn %s closed: will not re-add (max %s attempts)",t.addr,vi.length);return}const i=vi[t.retries];this._debug("conn %s closed: will re-add to queue in %sms (attempt %s)",t.addr,i,t.retries+1);const o=setTimeout(()=>{if(this.destroyed)return;const a=qn(t.addr)[0],u=this.client.utp&&this._isIPv4(a)?"utp":"tcp",c=this._addPeer(t.addr,u,t.source);c&&(c.retries=t.retries+1)},i);o.unref&&o.unref()})}_validAddr(t){let e;try{e=qn(t)}catch{return!1}const s=e[0],r=e[1];return r>0&&r<65535&&!(s==="127.0.0.1"&&r===this.client.torrentPort)}_isIPv4(t){return/^((?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])[.]){3}(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/.test(t)}}function xi(n,t){let e=2+Math.ceil(t*n.downloadSpeed()/Re.BLOCK_LENGTH);if(n.peerExtendedHandshake){const s=n.peerExtendedHandshake.reqq;typeof s=="number"&&s>0&&(e=Math.min(e,s))}return e}function Xo(){}var Mg=ot(4043),Oe=ot(580),Ml=ot(815),Ug=ot(2878);class Xt{constructor(t,e={}){this.client=t,e.origin||(e.origin="*"),this.opts=e,this.pendingReady=new Set}static serveIndexPage(t,e,s){const r=e.map(i=>`<li>
        <a href="${Oe(s)}/${i.infoHash}">
          ${Oe(i.name)}
        </a>
        (${Oe(i.length)} bytes)
      </li>`).join("<br>");return t.status=200,t.headers["Content-Type"]="text/html",t.body=br("WebTorrent",`<h1>WebTorrent</h1>
       <ol>${r}</ol>`),t}isOriginAllowed(t){return this.opts.origin!==!1&&(this.opts.origin==="*"||t.headers.origin===this.opts.origin)}static serveMethodNotAllowed(t){return t.status=405,t.headers["Content-Type"]="text/html",t.body=br("405 - Method Not Allowed","<h1>405 - Method Not Allowed</h1>"),t}static serve404Page(t){return t.status=404,t.headers["Content-Type"]="text/html",t.body=br("404 - Not Found","<h1>404 - Not Found</h1>"),t}static serveTorrentPage(t,e,s){const r=t.files.map(i=>`<li>
        <a href="${Oe(s)}/${t.infoHash}/${Oe(i.path)}">
          ${Oe(i.path)}
        </a>
        (${Oe(i.length)} bytes)
      </li>`).join("<br>");return e.status=200,e.headers["Content-Type"]="text/html",e.body=br(`${Oe(t.name)} - WebTorrent`,`<h1>${Oe(t.name)}</h1>
      <ol>${r}</ol>`),e}static serveOptionsRequest(t,e){return e.status=204,e.headers["Access-Control-Max-Age"]="600",e.headers["Access-Control-Allow-Methods"]="GET,HEAD",t.headers["access-control-request-headers"]&&(e.headers["Access-Control-Allow-Headers"]=t.headers["access-control-request-headers"]),e}static serveFile(t,e,s){s.status=200,s.headers.Expires="0",s.headers["Cache-Control"]="no-cache, no-store, must-revalidate, max-age=0",s.headers["Accept-Ranges"]="bytes",s.headers["Content-Type"]=t.type,s.headers["transferMode.dlna.org"]="Streaming",s.headers["contentFeatures.dlna.org"]="DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000",e.destination==="document"?(s.headers["Content-Type"]="application/octet-stream",s.headers["Content-Disposition"]=`attachment; filename*=UTF-8''${Qo(t.name)}`,s.body="DOWNLOAD"):s.headers["Content-Disposition"]=`inline; filename*=UTF-8''${Qo(t.name)}`;let r=Ug(t.length,e.headers.range||"");if(Array.isArray(r)?(s.status=206,r=r[0],s.headers["Content-Range"]=`bytes ${r.start}-${r.end}/${t.length}`,s.headers["Content-Length"]=r.end-r.start+1):(s.statusCode=200,r=null,s.headers["Content-Length"]=t.length),e.method==="GET"){const i=t[Symbol.asyncIterator](r);let o=null;t.emit("iterator",{iterator:i,req:e,file:t},c=>{o=c});const a=Gr.Readable.from(o||i);let u=null;t.emit("stream",{stream:a,req:e,file:t},c=>{u=Ml(a,c)}),s.body=u||a}else s.body=!1;return s}async onRequest(t,e){let s=new URL(t.url,"http://example.com").pathname;s=s.slice(s.indexOf(this.pathname)+this.pathname.length+1);const r={headers:{"X-Content-Type-Options":"nosniff","Content-Security-Policy":"base-uri 'none'; frame-ancestors 'none'; form-action 'none';"}};if(this.isOriginAllowed(t)&&(r.headers["Access-Control-Allow-Origin"]=this.opts.origin==="*"?"*":t.headers.origin),s==="favicon.ico")return e(Xt.serve404Page(r));if(t.method==="OPTIONS")return this.isOriginAllowed(t)?e(Xt.serveOptionsRequest(t,r)):e(Xt.serveMethodNotAllowed(r));const i=async()=>{this.pendingReady.delete(i);const a=await o();e(a)},o=async()=>{if(s==="")return Xt.serveIndexPage(r,this.client.torrents,this.pathname);let[a,...u]=s.split("/");u=decodeURI(u.join("/"));const c=await this.client.get(a);if(!a||!c)return Xt.serve404Page(r);if(!u)return Xt.serveTorrentPage(c,r,this.pathname);const l=c.files.find(f=>f.path.replace(/\\/g,"/")===u);return l?Xt.serveFile(l,t,r):Xt.serve404Page(r)};if(t.method==="GET"||t.method==="HEAD"){if(this.client.ready){const a=await o();return e(a)}return this.pendingReady.add(i),void this.client.once("ready",i)}return e(Xt.serveMethodNotAllowed(r))}close(t=()=>{}){this.closed=!0,this.pendingReady.forEach(e=>{this.client.removeListener("ready",e)}),this.pendingReady.clear(),qt(t)}destroy(t=()=>{}){this.closed?qt(t):this.close(t),this.client=null}}class zg extends Xt{constructor(t,e){super(t,e),this.server=Mg.createServer(),this._listen=this.server.listen,this.server.listen=this.listen.bind(this),this._close=this.server.close,this.server.close=this.close.bind(this),this.sockets=new Set,this.closed=!1,this.pathname=(e==null?void 0:e.pathname)||"/webtorrent"}wrapRequest(t,e){return this.opts.hostname&&t.headers.host!==`${this.opts.hostname}:${this.server.address().port}`?t.destroy():new URL(t.url,"http://example.com").pathname.startsWith(this.pathname)?void this.onRequest(t,({status:s,headers:r,body:i})=>{e.writeHead(s,r),i._readableState||i._writableState?Ml(i,e):e.end(i)}):t.destroy()}onConnection(t){t.setTimeout(36e6),this.sockets.add(t),t.once("close",()=>{this.sockets.delete(t)})}address(){return this.server.address()}listen(...t){return this.closed=!1,this.server.on("connection",this.onConnection.bind(this)),this.server.on("request",this.wrapRequest.bind(this)),this._listen.apply(this.server,t)}close(t=()=>{}){this.server.removeAllListeners("connection"),this.server.removeAllListeners("request"),this.server.removeAllListeners("listening"),super.close(),this._close.call(this.server,t)}destroy(t){this.sockets.forEach(e=>{e.destroy()}),super.destroy(t)}}class Hg extends Xt{constructor(t,e){super(t,e),this.registration=e.controller,this.workerKeepAliveInterval=null,this.workerPortCount=0;const s=new URL(e.controller.scope);this.pathname=s.pathname+"webtorrent",this._address={port:s.port,family:"IPv4",address:s.hostname},this.boundHandler=this.wrapRequest.bind(this),navigator.serviceWorker.addEventListener("message",this.boundHandler),fetch(`${this.pathname}/cancel/`).then(r=>{r.body.cancel()})}wrapRequest(t){const e=t.data;if(!(e!=null&&e.type)==="webtorrent"||!e.url)return null;const[s]=t.ports;this.onRequest(e,({status:r,headers:i,body:o})=>{var c;const a=(c=o[Symbol.asyncIterator])==null?void 0:c.call(o),u=()=>{s.onmessage=null,o!=null&&o.destroy&&o.destroy(),this.workerPortCount--,this.workerPortCount||(clearInterval(this.workerKeepAliveInterval),this.workerKeepAliveInterval=null)};s.onmessage=async l=>{if(l.data){let f;try{f=(await a.next()).value}catch{}s.postMessage(f),f||u(),this.workerKeepAliveInterval||(this.workerKeepAliveInterval=setInterval(()=>fetch(`${this.pathname}/keepalive/`),2e4))}else u()},this.workerPortCount++,s.postMessage({status:r,headers:i,body:a?"STREAM":o})})}listen(t,e){e()}address(){return this._address}close(t){navigator.serviceWorker.removeEventListener("message",this.boundHandler),super.close(t)}destroy(t){super.destroy(t)}}function br(n,t){return`
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8">
        <title>${n}</title>
      </head>
      <body>
        ${t}
      </body>
    </html>
  `}function Qo(n){return encodeURIComponent(n).replace(/['()]/g,escape).replace(/\*/g,"%2A").replace(/%(?:7C|60|5E)/g,unescape)}const ki=fe("webtorrent"),Ul=cr.replace(/\d*./g,n=>("0"+n%100).slice(-2)).slice(0,4),qg=`-WW${Ul}-`;class Pn extends Me{constructor(t={}){super(),typeof t.peerId=="string"?this.peerId=t.peerId:ArrayBuffer.isView(t.peerId)?this.peerId=(0,rt.V5)(t.peerId):this.peerId=(0,rt.V5)((0,rt.L0)(qg+(0,rt.NJ)((0,rt.po)(9)))),this.peerIdBuffer=(0,rt.fk)(this.peerId),typeof t.nodeId=="string"?this.nodeId=t.nodeId:ArrayBuffer.isView(t.nodeId)?this.nodeId=(0,rt.V5)(t.nodeId):this.nodeId=(0,rt.V5)((0,rt.po)(20)),this.nodeIdBuffer=(0,rt.fk)(this.nodeId),this._debugId=this.peerId.substring(0,7),this.destroyed=!1,this.listening=!1,this.torrentPort=t.torrentPort||0,this.dhtPort=t.dhtPort||0,this.tracker=t.tracker!==void 0?t.tracker:{},this.lsd=t.lsd!==!1,this.utPex=t.utPex!==!1,this.natUpnp=t.natUpnp??!0,this.natPmp=t.natPmp??!0,this.torrents=[],this.maxConns=Number(t.maxConns)||55,this.utp=Pn.UTP_SUPPORT&&t.utp!==!1,this.seedOutgoingConnections=t.seedOutgoingConnections??!0,this._downloadLimit=Math.max(typeof t.downloadLimit=="number"?t.downloadLimit:-1,-1),this._uploadLimit=Math.max(typeof t.uploadLimit=="number"?t.uploadLimit:-1,-1),(this.natUpnp||this.natPmp)&&typeof Lo=="function"&&(this.natTraversal=new Lo({enableUPNP:this.natUpnp,enablePMP:this.natPmp,upnpPermanentFallback:t.natUpnp==="permanent"})),t.secure===!0&&Promise.resolve().then(ot.bind(ot,5658)).then(({enableSecure:s})=>s()),this._debug("new webtorrent (peerId %s, nodeId %s, port %s)",this.peerId,this.nodeId,this.torrentPort),this.throttleGroups={down:new Fo.ThrottleGroup({rate:Math.max(this._downloadLimit,0),enabled:this._downloadLimit>=0}),up:new Fo.ThrottleGroup({rate:Math.max(this._uploadLimit,0),enabled:this._uploadLimit>=0})},this.tracker&&(typeof this.tracker!="object"&&(this.tracker={}),globalThis.WRTC&&!this.tracker.wrtc&&(this.tracker.wrtc=globalThis.WRTC)),typeof Vi=="function"?this._connPool=new Vi(this):qt(()=>{this._onListening()}),this._downloadSpeed=Lr(),this._uploadSpeed=Lr(),t.dht!==!1&&typeof Do.Client=="function"?(this.dht=new Do.Client(Object.assign({},{nodeId:this.nodeId},t.dht)),this.dht.once("error",s=>{this._destroy(s)}),this.dht.once("listening",()=>{const s=this.dht.address();s&&(this.dhtPort=s.port,this.natTraversal&&this.natTraversal.map({publicPort:this.dhtPort,privatePort:this.dhtPort,protocol:"udp",description:"WebTorrent DHT"}).catch(r=>{ki("error mapping DHT port via UPnP/PMP: %o",r)}))}),this.dht.setMaxListeners(0),this.dht.listen(this.dhtPort)):this.dht=!1,this.enableWebSeeds=t.webSeeds!==!1;const e=()=>{this.destroyed||(this.ready=!0,this.emit("ready"))};typeof Oo=="function"&&t.blocklist!=null?Oo(t.blocklist,{headers:{"user-agent":`WebTorrent/${cr} (https://webtorrent.io)`}},(s,r)=>{if(s)return console.error(`Failed to load blocklist: ${s.message}`);this.blocked=r,e()}):qt(e)}createServer(t,e){if(this.destroyed)throw new Error("torrent is destroyed");if(this._server)throw new Error("server already created");if(typeof window<"u"&&e!=="node"||e==="browser"){if(!((t==null?void 0:t.controller)instanceof ServiceWorkerRegistration))throw new Error("Invalid worker registration");if(t.controller.active.state!=="activated")throw new Error("Worker isn't activated");return this._server=new Hg(this,t),this._server}return this._server=new zg(this,t),this._server}get downloadSpeed(){return this._downloadSpeed()}get uploadSpeed(){return this._uploadSpeed()}get progress(){const t=this.torrents.filter(e=>e.progress!==1);return t.reduce((e,s)=>e+s.downloaded,0)/(t.reduce((e,s)=>e+(s.length||0),0)||1)}get ratio(){return this.torrents.reduce((t,e)=>t+e.uploaded,0)/(this.torrents.reduce((t,e)=>t+e.received,0)||1)}async get(t){if(t instanceof Yo){if(this.torrents.includes(t))return t}else{const e=this.torrents;let s;try{s=await Er(t)}catch{}if(!s)return null;if(!s.infoHash)throw new Error("Invalid torrent identifier");for(const r of e)if(r.infoHash===s.infoHash)return r}return null}add(t,e={},s=()=>{}){if(this.destroyed)throw new Error("client is destroyed");typeof e=="function"&&([e,s]=[{},e]);const r=()=>{if(!this.destroyed){for(const a of this.torrents)if(a.infoHash===o.infoHash&&a!==o)return o._destroy(new Error(`Cannot add duplicate torrent ${o.infoHash}`)),void s(a)}},i=()=>{this.destroyed||(s(o),this.emit("torrent",o))};this._debug("add"),e=e?Object.assign({},e):{};const o=new Yo(t,this,e);return this.torrents.push(o),o.once("_infoHash",r),o.once("ready",i),o.once("close",function a(){o.removeListener("_infoHash",r),o.removeListener("ready",i),o.removeListener("close",a)}),this.emit("add",o),o}seed(t,e,s){if(this.destroyed)throw new Error("client is destroyed");typeof e=="function"&&([e,s]=[{},e]),this._debug("seed"),(e=e?Object.assign({},e):{}).skipVerify=!0;const r=typeof t=="string";r&&(e.path=function(c){if(Fr(c),c.length===0)return".";let l=c.charCodeAt(0);const f=l===47;let h=-1,d=!0;for(let p=c.length-1;p>=1;--p)if(l=c.charCodeAt(p),l===47){if(!d){h=p;break}}else d=!1;return h===-1?f?"/":".":f&&h===1?"//":c.slice(0,h)}(t)),e.createdBy||(e.createdBy=`WebTorrent/${Ul}`);const i=c=>{this._debug("on seed"),typeof s=="function"&&s(c),c.emit("seed"),this.emit("seed",c)},o=this.add(null,e,c=>{const l=[f=>{if(r||e.preloadedStore)return f();c.load(a,f)}];this.dht&&l.push(f=>{c.once("dhtAnnounce",f)}),Qe(l,f=>{if(!this.destroyed)return f?c._destroy(f):void i(c)})});let a;var u;return u=t,typeof FileList<"u"&&u instanceof FileList?t=Array.from(t):Array.isArray(t)||(t=[t]),Qe(t.map(c=>async l=>{if(!e.preloadedStore&&function(f){return typeof f=="object"&&f!=null&&typeof f.pipe=="function"}(c)){const f=[];try{for await(const d of c)f.push(d)}catch(d){return l(d)}const h=(0,rt.xW)(f);h.name=c.name,l(null,h)}else l(null,c)}),(c,l)=>{if(!this.destroyed)return c?o._destroy(c):void function(f,h,d){typeof h=="function"&&([h,d]=[d,h]),Cl(f,h=h?Object.assign({},h):{},d)}(l,e,(f,h)=>{if(!this.destroyed){if(f)return o._destroy(f);a=h.map(d=>d.getStream),Qp(l,e,async(d,p)=>{if(this.destroyed)return;if(d)return o._destroy(d);const g=await this.get(p);g?(console.warn("A torrent with the same id is already being seeded"),o._destroy(),typeof s=="function"&&s(g)):o._onTorrentId(p)})}})}),o}async remove(t,e,s){if(typeof e=="function")return this.remove(t,null,e);this._debug("remove");const r=await this.get(t);if(!r)throw new Error(`No torrent with id ${t}`);this._remove(r,e,s)}_remove(t,e,s){if(!t)return;if(typeof e=="function")return this._remove(t,null,e);const r=this.torrents.indexOf(t);r!==-1&&(this.torrents.splice(r,1),t.destroy(e,s),this.dht&&this.dht._tables.remove(t.infoHash),this.emit("remove",t))}address(){return this.listening?this._connPool?this._connPool.tcpServer.address():{address:"0.0.0.0",family:"IPv4",port:0}:null}throttleDownload(t){return t=Number(t),!(isNaN(t)||!isFinite(t)||t<-1)&&(this._downloadLimit=t,this._downloadLimit<0?this.throttleGroups.down.setEnabled(!1):(this.throttleGroups.down.setEnabled(!0),void this.throttleGroups.down.setRate(this._downloadLimit)))}throttleUpload(t){return t=Number(t),!(isNaN(t)||!isFinite(t)||t<-1)&&(this._uploadLimit=t,this._uploadLimit<0?this.throttleGroups.up.setEnabled(!1):(this.throttleGroups.up.setEnabled(!0),void this.throttleGroups.up.setRate(this._uploadLimit)))}destroy(t){if(this.destroyed)throw new Error("client already destroyed");this._destroy(null,t)}_destroy(t,e){this._debug("client destroy"),this.destroyed=!0;const s=this.torrents.map(r=>i=>{r.destroy(i)});this._connPool&&s.push(r=>{this._connPool.destroy(r)}),this.dht&&s.push(r=>{this.dht.destroy(r)}),this._server&&s.push(r=>{this._server.destroy(r)}),this.natTraversal&&s.push(r=>{this.natTraversal.destroy().then(()=>r())}),Qe(s,e),t&&this.emit("error",t),this.torrents=[],this._connPool=null,this.dht=null,this.throttleGroups.down.destroy(),this.throttleGroups.up.destroy()}_onListening(){if(this._debug("listening"),this.listening=!0,this._connPool){const t=this._connPool.tcpServer.address();t&&(this.torrentPort=t.port,this.natTraversal&&this.natTraversal.map({publicPort:this.torrentPort,privatePort:this.torrentPort,protocol:this.utp?null:"tcp",description:"WebTorrent Torrent"}).catch(e=>{ki("error mapping WebTorrent port via UPnP/PMP: %o",e)}))}this.emit("listening")}_debug(){const t=[].slice.call(arguments);t[0]=`[${this._debugId}] ${t[0]}`,ki(...t)}async _getByHash(t){for(const e of this.torrents)if(e.infoHashHash||(e.infoHashHash=await(0,rt.tW)((0,rt.fk)("72657132"+e.infoHash),"hex")),t===e.infoHashHash)return e;return null}}Pn.WEBRTC_SUPPORT=_s.WEBRTC_SUPPORT,Pn.UTP_SUPPORT=Vi.UTP_SUPPORT,Pn.VERSION=cr;var Gg=Sl.A;class Wg{constructor(){this.files=new Map,this.metadata=new Map}async getDirectoryHandle(){return this}async getFileHandle(t,e={}){return!this.files.has(t)&&e.create&&this.files.set(t,null),{createWritable:async()=>({write:async s=>{this.files.set(t,s)},close:async()=>{}}),getFile:async()=>{const s=this.files.get(t);return new File([s],t)}}}async removeEntry(t){this.files.delete(t),this.metadata.delete(t)}entries(){return Array.from(this.files.keys()).map(t=>[t])}}const Vg=["udp://tracker.leechers-paradise.org:6969","udp://tracker.coppersurfer.tk:6969","udp://tracker.opentrackr.org:1337","udp://explodie.org:6969","udp://tracker.empire-js.us:1337","wss://tracker.btorrent.xyz","wss://tracker.openwebtorrent.com"],ta=$e("trackers",Vg);function z1(){const n=At(new Map),t=ue(!1),e=At({done:!1,progress:0,downloadSpeed:0,downloaded:0});let s=null,r=null,i=null;async function o(){try{await navigator.storage.persist()||console.warn("Storage persistence denied");const I=await navigator.storage.estimate();return console.log(`Storage quota: ${I.quota} bytes`),console.log(`Storage usage: ${I.usage} bytes`),!0}catch(T){return console.error("Storage permission error:",T),!1}}async function a(){try{if(!(await navigator.storage.estimate()).quota)throw new Error("Storage quota is 0, likely in private mode");if("storage"in navigator&&"getDirectory"in navigator.storage){const I=await navigator.permissions.query({name:"persistent-storage"});if(I.state==="granted"||I.state==="prompt")return await o(),s=await navigator.storage.getDirectory(),i=await u(),!0}throw new Error("Storage API not available or permission denied")}catch(T){return console.warn("OPFS not available, falling back to in-memory storage:",T),s=new Wg,i=s,!0}}async function u(){return await s.getDirectoryHandle("files",{create:!0})}function c(T){const I=ta.value.map(F=>`&tr=${encodeURIComponent(F)}`).join("");return`magnet:?xt=urn:btih:${T}${I}`}function l(T){return T.replace(/[^a-zA-Z0-9.-]/g,"_")}async function f(T){try{const k=await(await(await i.getFileHandle(`${T}.meta.json`)).getFile()).text();return JSON.parse(k)}catch{return null}}async function h(T,I){const k=await(await i.getFileHandle(`${T}.meta.json`,{create:!0})).createWritable();await k.write(JSON.stringify(I)),await k.close()}async function d(){try{await a(),r=new Gg,r.on("download",T=>{const I=r.torrents[r.torrents.length-1];I&&Object.assign(e,{done:I.done,progress:I.progress,downloaded:I.downloaded,downloadSpeed:I.downloadSpeed})}),t.value=!0,await g()}catch(T){return console.error("Torrent system initialization failed:",T),!1}}async function p(T,I){const F=l(T.name);try{const S=await(await i.getFileHandle(F,{create:!0})).createWritable(),x=await T.arrayBuffer();return await S.write(x),await S.close(),await h(F,{originalName:T.name,type:T.type||"application/octet-stream",lastModified:Date.now(),infoHash:I}),F}catch(k){return console.error("Error caching downloaded file:",k),null}}async function g(){if(i)for await(const[T]of i.entries()){if(T.endsWith(".meta.json"))continue;const I=await f(T);if(!I)continue;const F=await w(T);if(F){const k=new File([F],I.originalName,{type:I.type}),S=I.infoHash?{infoHash:I.infoHash}:void 0;await b(k,T,S)}}}async function b(T,I,F={}){return new Promise(k=>{r.seed([T],F,S=>{n.set(I,{file:T,torrent:S,info:{infoHash:S.infoHash,magnetURI:S.magnetURI,name:S.name,length:S.length}}),k(n.get(I))})})}async function y(T){t.value||await d();const I=[];for(const F of T){const k=await _(F);if(k){const S=await b(F,k);I.push(S)}}return I}async function m(T){const I=n.get(T);I!=null&&I.torrent&&I.torrent.destroy(),await(i==null?void 0:i.removeEntry(T)),await(i==null?void 0:i.removeEntry(`${T}.meta.json`).catch(()=>{})),n.delete(T)}async function _(T){if(!i)return null;try{const I=l(T.name),k=await(await i.getFileHandle(I,{create:!0})).createWritable();return await k.write(T),await k.close(),await h(I,{originalName:T.name,type:T.type,lastModified:T.lastModified}),I}catch(I){return console.error("Error saving to OPFS:",I),null}}async function w(T){if(!i)return null;try{return await(await i.getFileHandle(T)).getFile()}catch(I){return console.error("Error loading from OPFS:",I),null}}async function v(T){if(!i)return null;for await(const[I]of i.entries()){if(I.endsWith(".meta.json"))continue;const F=await f(I);if((F==null?void 0:F.infoHash)===T){const k=await w(I);if(k){const S=new File([k],F.originalName,{type:F.type});return S.path=F.originalName,S.length=k.size,S.progress=1,S.downloaded=k.size,S.blob=async()=>new Blob([await S.arrayBuffer()],{type:S.type}),S}}}return null}async function A(T){t.value||await d();const I=await v(T);return I?(console.log("File found in cache, returning without download"),[I]):new Promise(async F=>{function k(x){const j=x.files.map(D=>(D.blob=()=>new Promise((C,R)=>{const N=[],z=D.createReadStream();z.on("data",M=>N.push(M)),z.on("end",()=>{const M=new Blob(N,{type:D.type||"application/octet-stream"});C(M)}),z.on("error",R)}),D));x.on("done",async()=>{for(const D of j)await p(D,x.infoHash)}),F(j)}let S=await r.get(T);if(S)k(S);else{const x=c(T);r.add(x,k)}})}async function E(){if(i){for(const[T,I]of n)I!=null&&I.torrent&&I.torrent.destroy();n.clear();try{for await(const[T]of i.entries())await i.removeEntry(T);console.log("Files directory cleared successfully")}catch(T){throw console.error("Error clearing files directory:",T),T}}}async function P(){if(s){await E();try{for await(const[T,I]of s.entries())I.kind==="file"?await s.removeEntry(T):I.kind==="directory"&&await s.removeEntry(T,{recursive:!0});console.log("OPFS cleared successfully")}catch(T){throw console.error("Error clearing OPFS:",T),T}}}return{files:n,initialized:t,downloadStatus:e,init:d,upload:y,download:A,deleteFile:m,trackers:ta,clearFiles:E,clearOPFS:P}}const Jg=Lc("deep"),H1=At({pub:""}),wt=At({initiated:!1,auth:!1,is:null,name:"",pub:It(()=>{var n;return(n=wt==null?void 0:wt.is)==null?void 0:n.pub}),color:It(()=>wt.pub?Jg.hex(wt.pub):"gray"),pulse:0,pulser:null,blink:!1,safe:{saved:!1,password:"",enc:"",pass:""},rooms:{},db:void 0,pair(){return console.warn("User pair read externally"),Xn()},async encrypt(n){return await Le.encrypt(n,Xn())},async decrypt(n){return await Le.decrypt(n,Xn())},async secret(n){return await Le.secret(n,Xn())}});let Kg=0;function Xn(){var t,e;return console.log("User pair read",++Kg),(e=(t=xt().user())==null?void 0:t._)==null?void 0:e.sea}function rn(){if(!wt.initiated){const n=xt();wt.db=n.user(),n.user().recall({sessionStorage:!0},()=>{console.log("user was recalled")}),n.on("auth",()=>{const t=xt();wt.is=t.user().is,wt.pulser&&clearInterval(wt.pulser),wt.pulser=setInterval(()=>{t.user().get("pulse").put(Date.now())},1e3),t.user().get("epub").put(wt.is.epub),t.user().get("pulse").on(e=>{wt.blink=!wt.blink,wt.pulse=e}),t.user().get("safe").map().on((e,s)=>{wt.safe[s]=e}),t.user().get("profile").get("name").on(e=>wt.name=e),t.user().get("my_rooms").map().on(async(e,s)=>{let r=await Le.decrypt(s,wt.pair());wt.rooms[r]=e})}),wt.initiated=!0}return{user:wt,auth:zl,leave:Zg}}async function zl(n,t=e=>{}){const e=xt();if(!Yg(n)){console.log("incorrect pair",n);return}e.user().auth(n,async()=>{t(n),console.log("user is authenticated")})}function Zg(){var e;const n=xt();let t=!!((e=wt.is)!=null&&e.pub);wt.initiated=!1,clearInterval(wt.pulser),n.user().leave(),setTimeout(()=>{t&&!Xn()&&(wt.is=null,console.info("User logged out"))},500)}function q1(n){xt().user().get("profile").get(n).put("")}function G1(n,t){n&&t!==void 0&&xt().user().get("profile").get(n).put(t)}function Yg(n){return!!(n&&typeof n=="object"&&n.pub&&n.epub&&n.priv&&n.epriv)}var Xg=Object.defineProperty,ea=Object.getOwnPropertySymbols,Qg=Object.prototype.hasOwnProperty,tm=Object.prototype.propertyIsEnumerable,na=(n,t,e)=>t in n?Xg(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Xi=(n,t)=>{for(var e in t||(t={}))Qg.call(t,e)&&na(n,e,t[e]);if(ea)for(var e of ea(t))tm.call(t,e)&&na(n,e,t[e]);return n},em=()=>({emit(n,...t){for(let e=this.events[n]||[],s=0,r=e.length;s<r;s++)e[s](...t)},events:{},on(n,t){var e;return((e=this.events)[n]||(e[n]=[])).push(t),()=>{var s;this.events[n]=(s=this.events[n])==null?void 0:s.filter(r=>t!==r)}}});function Br(n,t){return n-t}function nm(n){return n<0?-1:1}function $r(n){return[Math.abs(n),nm(n)]}function Hl(){const n=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${n()+n()}-${n()}-${n()}-${n()}-${n()}${n()}${n()}`}var rm=2,Ie=rm;function ql(n,t){const e=document.createElementNS("http://www.w3.org/2000/svg","defs"),s=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("fill",t),s.setAttribute("id",n),s.setAttribute("viewBox","0 -5 10 10"),s.setAttribute("refX","5"),s.setAttribute("refY","0"),s.setAttribute("markerWidth","4"),s.setAttribute("markerHeight","4"),s.setAttribute("orient","auto"),r.setAttribute("d","M0,-5L10,0L0,5"),s.appendChild(r),e.appendChild(s),e}function im(n,t){const e=n.x-t.x,s=n.y-t.y;return e*e+s*s}function sm(n,t,e){let s=t.x,r=t.y,i=e.x-s,o=e.y-r;if(i!==0||o!==0){const a=((n.x-s)*i+(n.y-r)*o)/(i*i+o*o);a>1?(s=e.x,r=e.y):a>0&&(s+=i*a,r+=o*a)}return i=n.x-s,o=n.y-r,i*i+o*o}function om(n,t){let e=n[0];const s=[e];let r;for(let i=1,o=n.length;i<o;i++)r=n[i],im(r,e)>t&&(s.push(r),e=r);return e!==r&&r&&s.push(r),s}function Qi(n,t,e,s,r){let i=s,o=0;for(let a=t+1;a<e;a++){const u=sm(n[a],n[t],n[e]);u>i&&(o=a,i=u)}i>s&&(o-t>1&&Qi(n,t,o,s,r),r.push(n[o]),e-o>1&&Qi(n,o,e,s,r))}function am(n,t){const e=n.length-1,s=[n[0]];return Qi(n,0,e,t,s),s.push(n[e]),s}function ra(n,t,e=!1){if(n.length<=2)return n;const s=t*t;return n=e?n:om(n,s),n=am(n,s),n}var Bn=class{constructor(n){this.drauu=n,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onSelected(n){}onUnselected(){}onStart(n){}onMove(n){return!1}onEnd(n){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}get svgElement(){return this.drauu.el}getMousePosition(n){var t,e,s;const r=this.drauu.el,i=(t=this.drauu.options.coordinateScale)!=null?t:1,o=(e=this.drauu.options.offset)!=null?e:{x:0,y:0};if(this.drauu.options.coordinateTransform===!1){const a=this.drauu.el.getBoundingClientRect();return{x:(n.pageX-a.left+o.x)*i,y:(n.pageY-a.top+o.y)*i,pressure:n.pressure}}else{const a=this.drauu.svgPoint;a.x=n.clientX+o.x,a.y=n.clientY+o.y;const u=a.matrixTransform((s=r.getScreenCTM())==null?void 0:s.inverse());return{x:u.x*i,y:u.y*i,pressure:n.pressure}}}createElement(n,t){var e;const s=document.createElementNS("http://www.w3.org/2000/svg",n),r=t?Xi(Xi({},this.brush),t):this.brush;return s.setAttribute("fill",(e=r.fill)!=null?e:"transparent"),s.setAttribute("stroke",r.color),s.setAttribute("stroke-width",r.size.toString()),s.setAttribute("stroke-linecap","round"),r.dasharray&&s.setAttribute("stroke-dasharray",r.dasharray),s}attr(n,t){this.el.setAttribute(n,typeof t=="string"?t:t.toFixed(Ie))}_setEvent(n){this.event=n,this.point=this.getMousePosition(n)}_eventDown(n){return this._setEvent(n),this.start=this.point,this.onStart(this.point)}_eventMove(n){return this._setEvent(n),this.onMove(this.point)}_eventUp(n){return this._setEvent(n),this.onEnd(this.point)}},um=class fn extends Bn{constructor(){super(...arguments),this.points=[],this.count=0}onStart(t){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[t],this.brush.arrowEnd){this.arrowId=Hl();const e=ql(this.arrowId,this.brush.color);this.el.appendChild(e)}return this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&(this.points.push(t),this.count+=1),this.count>5&&(this.points=ra(this.points,1,!0),this.count=0),this.attr("d",fn.toSvgData(this.points)),!0}onEnd(){const t=this.el;if(this.el=null,!t)return!1;if(t.setAttribute("d",fn.toSvgData(ra(this.points,1,!0))),!t.getTotalLength()){const{x:e,y:s}=this.points[0],r=this.brush.size/2;t.setAttribute("d",`M ${e-r} ${s} a ${r},${r} 0 1,0 ${r*2},0 a ${r},${r} 0 1,0 ${-r*2},0`),t.setAttribute("fill",this.brush.color),t.setAttribute("stroke-width","0")}return!0}static line(t,e){const s=e.x-t.x,r=e.y-t.y;return{length:Math.sqrt(s**2+r**2),angle:Math.atan2(r,s)}}static controlPoint(t,e,s,r){const i=e||t,o=s||t,a=.2,u=fn.line(i,o),c=u.angle+(r?Math.PI:0),l=u.length*a,f=t.x+Math.cos(c)*l,h=t.y+Math.sin(c)*l;return{x:f,y:h}}static bezierCommand(t,e,s){const r=fn.controlPoint(s[e-1],s[e-2],t),i=fn.controlPoint(t,s[e-1],s[e+1],!0);return`C ${r.x.toFixed(Ie)},${r.y.toFixed(Ie)} ${i.x.toFixed(Ie)},${i.y.toFixed(Ie)} ${t.x.toFixed(Ie)},${t.y.toFixed(Ie)}`}static toSvgData(t){return t.reduce((e,s,r,i)=>r===0?`M ${s.x.toFixed(Ie)},${s.y.toFixed(Ie)}`:`${e} ${fn.bezierCommand(s,r,i)}`,"")}},cm=class extends Bn{onStart(n){return this.el=this.createElement("ellipse"),this.attr("cx",n.x),this.attr("cy",n.y),this.el}onMove(n){if(!this.el||!this.start)return!1;let[t,e]=$r(n.x-this.start.x),[s,r]=$r(n.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",t),this.attr("ry",s);else{const[i,o]=[this.start.x,this.start.x+t*e].sort(Br),[a,u]=[this.start.y,this.start.y+s*r].sort(Br);this.attr("cx",(i+o)/2),this.attr("cy",(a+u)/2),this.attr("rx",(o-i)/2),this.attr("ry",(u-a)/2)}return!0}onEnd(){const n=this.el;if(this.el=null,!n)return!1;try{if(!n.getTotalLength())return!1}catch{return!1}return!0}},lm=class extends Bn{constructor(){super(...arguments),this.pathSubFactor=20,this.pathFragments=[],this._erased=[]}onSelected(n){const t=(e,s)=>{if(e&&e.length)for(let r=0;r<e.length;r++){const i=e[r];if(i.getTotalLength){const o=i.getTotalLength();for(let a=0;a<this.pathSubFactor;a++){const u=i.getPointAtLength(o*a/this.pathSubFactor),c=i.getPointAtLength(o*(a+1)/this.pathSubFactor);this.pathFragments.push({x1:u.x,x2:c.x,y1:u.y,y2:c.y,segment:a,element:s||i})}}else i.children&&t(i.children,i)}};n&&t(n.children)}onUnselected(){this.pathFragments=[]}onStart(n){this.svgPointPrevious=this.svgElement.createSVGPoint(),this.svgPointPrevious.x=n.x,this.svgPointPrevious.y=n.y}onMove(n){this.svgPointCurrent=this.svgElement.createSVGPoint(),this.svgPointCurrent.x=n.x,this.svgPointCurrent.y=n.y;const t=this.checkAndEraseElement();return this.svgPointPrevious=this.svgPointCurrent,t}onEnd(){this.svgPointPrevious=void 0,this.svgPointCurrent=void 0;const n=this._erased;return this._erased=[],{undo:()=>n.forEach(t=>this.drauu._restoreNode(t)),redo:()=>n.forEach(t=>this.drauu._removeNode(t))}}checkAndEraseElement(){if(this.pathFragments.length)for(let n=0;n<this.pathFragments.length;n++){const t=this.pathFragments[n];if(this.svgPointPrevious&&this.svgPointCurrent){const e={x1:this.svgPointPrevious.x,x2:this.svgPointCurrent.x,y1:this.svgPointPrevious.y,y2:this.svgPointCurrent.y};this.lineLineIntersect(t,e)&&(this.drauu._removeNode(t.element),this._erased.push(t.element))}}return this._erased.length&&(this.pathFragments=this.pathFragments.filter(n=>!this._erased.includes(n.element))),this._erased.length>0}lineLineIntersect(n,t){const e=n.x1,s=n.x2,r=t.x1,i=t.x2,o=n.y1,a=n.y2,u=t.y1,c=t.y2,l=(e-s)*(u-c)-(o-a)*(r-i),f=(e*a-o*s)*(r-i)-(e-s)*(r*c-u*i),h=(e*a-o*s)*(u-c)-(o-a)*(r*c-u*i),d=(p,g,b)=>p>=g&&p<=b?!0:p>=b&&p<=g;if(l===0)return!1;{const p={x:f/l,y:h/l};return d(p.x,e,s)&&d(p.y,o,a)&&d(p.x,r,i)&&d(p.y,u,c)}}},fm=class extends Bn{onStart(n){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",n.x),this.attr("y1",n.y),this.attr("x2",n.x),this.attr("y2",n.y),this.brush.arrowEnd){const t=Hl(),e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.append(ql(t,this.brush.color)),e.append(this.el),this.attr("marker-end",`url(#${t})`),e}return this.el}onMove(n){if(!this.el)return!1;let{x:t,y:e}=n;if(this.shiftPressed){const s=n.x-this.start.x,r=n.y-this.start.y;if(r!==0){let i=s/r;i=Math.round(i),Math.abs(i)<=1?(t=this.start.x+r*i,e=this.start.y+r):(t=this.start.x+s,e=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-t),this.attr("y1",this.start.y*2-e),this.attr("x2",t),this.attr("y2",e)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",t),this.attr("y2",e)),!0}onEnd(){const n=this.el;if(this.el=null,!n)return!1;try{if(n.getTotalLength()<5)return!1}catch{return!1}return!0}},hm=class extends Bn{onStart(n){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",n.x),this.attr("y",n.y),this.el}onMove(n){if(!this.el||!this.start)return!1;let[t,e]=$r(n.x-this.start.x),[s,r]=$r(n.y-this.start.y);if(this.shiftPressed){const i=Math.min(t,s);t=i,s=i}if(this.altPressed)this.attr("x",this.start.x-t),this.attr("y",this.start.y-s),this.attr("width",t*2),this.attr("height",s*2);else{const[i,o]=[this.start.x,this.start.x+t*e].sort(Br),[a,u]=[this.start.y,this.start.y+s*r].sort(Br);this.attr("x",i),this.attr("y",a),this.attr("width",o-i),this.attr("height",u-a)}return!0}onEnd(){const n=this.el;if(this.el=null,!n)return!1;try{if(!n.getTotalLength())return!1}catch{return!1}return!0}};function ia(n,t,e,s=r=>r){return n*s(.5-t*(.5-e))}function dm(n){return[-n[0],-n[1]]}function ae(n,t){return[n[0]+t[0],n[1]+t[1]]}function Qt(n,t){return[n[0]-t[0],n[1]-t[1]]}function oe(n,t){return[n[0]*t,n[1]*t]}function pm(n,t){return[n[0]/t,n[1]/t]}function Vn(n){return[n[1],-n[0]]}function sa(n,t){return n[0]*t[0]+n[1]*t[1]}function gm(n,t){return n[0]===t[0]&&n[1]===t[1]}function mm(n){return Math.hypot(n[0],n[1])}function bm(n){return n[0]*n[0]+n[1]*n[1]}function oa(n,t){return bm(Qt(n,t))}function Gl(n){return pm(n,mm(n))}function _m(n,t){return Math.hypot(n[1]-t[1],n[0]-t[0])}function Jn(n,t,e){let s=Math.sin(e),r=Math.cos(e),i=n[0]-t[0],o=n[1]-t[1],a=i*r-o*s,u=i*s+o*r;return[a+t[0],u+t[1]]}function ts(n,t,e){return ae(n,oe(Qt(t,n),e))}function aa(n,t,e){return ae(n,oe(t,e))}var{min:xn,PI:ym}=Math,ua=.275,Kn=ym+1e-4;function wm(n,t={}){let{size:e=16,smoothing:s=.5,thinning:r=.5,simulatePressure:i=!0,easing:o=C=>C,start:a={},end:u={},last:c=!1}=t,{cap:l=!0,easing:f=C=>C*(2-C)}=a,{cap:h=!0,easing:d=C=>--C*C*C+1}=u;if(n.length===0||e<=0)return[];let p=n[n.length-1].runningLength,g=a.taper===!1?0:a.taper===!0?Math.max(e,p):a.taper,b=u.taper===!1?0:u.taper===!0?Math.max(e,p):u.taper,y=Math.pow(e*s,2),m=[],_=[],w=n.slice(0,10).reduce((C,R)=>{let N=R.pressure;if(i){let z=xn(1,R.distance/e),M=xn(1,1-z);N=xn(1,C+(M-C)*(z*ua))}return(C+N)/2},n[0].pressure),v=ia(e,r,n[n.length-1].pressure,o),A,E=n[0].vector,P=n[0].point,T=P,I=P,F=T,k=!1;for(let C=0;C<n.length;C++){let{pressure:R}=n[C],{point:N,vector:z,distance:M,runningLength:U}=n[C];if(C<n.length-1&&p-U<3)continue;if(r){if(i){let vt=xn(1,M/e),yt=xn(1,1-vt);R=xn(1,w+(yt-w)*(vt*ua))}v=ia(e,r,R,o)}else v=e/2;A===void 0&&(A=v);let tt=U<g?f(U/g):1,X=p-U<b?d((p-U)/b):1;v=Math.max(.01,v*Math.min(tt,X));let Z=(C<n.length-1?n[C+1]:n[C]).vector,gt=C<n.length-1?sa(z,Z):1,Et=sa(z,E)<0&&!k,ft=gt!==null&&gt<0;if(Et||ft){let vt=oe(Vn(E),v);for(let yt=1/13,Ot=0;Ot<=1;Ot+=yt)I=Jn(Qt(N,vt),N,Kn*Ot),m.push(I),F=Jn(ae(N,vt),N,Kn*-Ot),_.push(F);P=I,T=F,ft&&(k=!0);continue}if(k=!1,C===n.length-1){let vt=oe(Vn(z),v);m.push(Qt(N,vt)),_.push(ae(N,vt));continue}let pt=oe(Vn(ts(Z,z,gt)),v);I=Qt(N,pt),(C<=1||oa(P,I)>y)&&(m.push(I),P=I),F=ae(N,pt),(C<=1||oa(T,F)>y)&&(_.push(F),T=F),w=R,E=z}let S=n[0].point.slice(0,2),x=n.length>1?n[n.length-1].point.slice(0,2):ae(n[0].point,[1,1]),j=[],D=[];if(n.length===1){if(!(g||b)||c){let C=aa(S,Gl(Vn(Qt(S,x))),-(A||v)),R=[];for(let N=1/13,z=N;z<=1;z+=N)R.push(Jn(C,S,Kn*2*z));return R}}else{if(!(g||b&&n.length===1))if(l)for(let R=1/13,N=R;N<=1;N+=R){let z=Jn(_[0],S,Kn*N);j.push(z)}else{let R=Qt(m[0],_[0]),N=oe(R,.5),z=oe(R,.51);j.push(Qt(S,N),Qt(S,z),ae(S,z),ae(S,N))}let C=Vn(dm(n[n.length-1].vector));if(b||g&&n.length===1)D.push(x);else if(h){let R=aa(x,C,v);for(let N=1/29,z=N;z<1;z+=N)D.push(Jn(R,x,Kn*3*z))}else D.push(ae(x,oe(C,v)),ae(x,oe(C,v*.99)),Qt(x,oe(C,v*.99)),Qt(x,oe(C,v)))}return m.concat(D,_.reverse(),j)}function vm(n,t={}){var e;let{streamline:s=.5,size:r=16,last:i=!1}=t;if(n.length===0)return[];let o=.15+(1-s)*.85,a=Array.isArray(n[0])?n:n.map(({x:d,y:p,pressure:g=.5})=>[d,p,g]);if(a.length===2){let d=a[1];a=a.slice(0,-1);for(let p=1;p<5;p++)a.push(ts(a[0],d,p/4))}a.length===1&&(a=[...a,[...ae(a[0],[1,1]),...a[0].slice(2)]]);let u=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,l=0,f=u[0],h=a.length-1;for(let d=1;d<a.length;d++){let p=i&&d===h?a[d].slice(0,2):ts(f.point,a[d],o);if(gm(f.point,p))continue;let g=_m(p,f.point);if(l+=g,d<h&&!c){if(l<r)continue;c=!0}f={point:p,pressure:a[d][2]>=0?a[d][2]:.5,vector:Gl(Qt(f.point,p)),distance:g,runningLength:l},u.push(f)}return u[0].vector=((e=u[1])==null?void 0:e.vector)||[0,0],u}function xm(n,t={}){return wm(vm(n,t),t)}var km=class Wl extends Bn{constructor(){super(...arguments),this.points=[]}onStart(t){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[t],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&this.points.push(t),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!!t}getSvgData(t){return Wl.getSvgData(t,this.brush)}static getSvgData(t,e){const s=xm(t,Xi({size:e.size,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},e.stylusOptions));if(!s.length)return"";const r=s.reduce((i,[o,a],u,c)=>{const[l,f]=c[(u+1)%c.length];return i.push(o,a,(o+l)/2,(a+f)/2),i},["M",...s[0],"Q"]);return r.push("Z"),r.map(i=>typeof i=="number"?i.toFixed(2):i).join(" ")}};function Sm(n){return{draw:new um(n),stylus:new km(n),line:new fm(n),rectangle:new hm(n),ellipse:new cm(n),eraseLine:new lm(n)}}var Am=class{constructor(n={}){this.options=n,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=em(),this._originalPointerId=null,this._models=Sm(this),this._opStack=[],this._opIndex=0,this._disposables=[],this._elements=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),n.el&&this.mount(n.el,n.eventTarget,n.window)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(n){this._models[this.mode].onUnselected(),this.options.brush.mode=n,this.model.onSelected(this.el)}get brush(){return this.options.brush}set brush(n){this.options.brush=n}resolveSelector(n){return typeof n=="string"?document.querySelector(n):n||null}mount(n,t,e=window){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(n),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/svg', 'svg')");this.svgPoint=this.el.createSVGPoint();const s=this.resolveSelector(t)||this.el,r=this.eventStart.bind(this),i=this.eventMove.bind(this),o=this.eventEnd.bind(this),a=this.eventKeyboard.bind(this);s.addEventListener("pointerdown",r,{passive:!1}),e.addEventListener("pointermove",i,{passive:!1}),e.addEventListener("pointerup",o,{passive:!1}),e.addEventListener("pointercancel",o,{passive:!1}),e.addEventListener("keydown",a,!1),e.addEventListener("keyup",a,!1),this._disposables.push(()=>{s.removeEventListener("pointerdown",r),e.removeEventListener("pointermove",i),e.removeEventListener("pointerup",o),e.removeEventListener("pointercancel",o),e.removeEventListener("keydown",a,!1),e.removeEventListener("keyup",a,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(n=>n()),this._disposables.length=0,this._elements.length=0,this.el=null,this._emitter.emit("unmounted")}on(n,t){return this._emitter.on(n,t)}undo(){return!this.canUndo()||this.drawing?!1:(this._opStack[--this._opIndex].undo(),this._emitter.emit("changed"),!0)}redo(){return!this.canRedo()||this.drawing?!1:(this._opStack[this._opIndex++].redo(),this._emitter.emit("changed"),!0)}canRedo(){return this._opIndex<this._opStack.length}canUndo(){return this._opIndex>0}eventMove(n){!this.acceptsInput(n)||!this.drawing||this.model._eventMove(n)&&(n.stopPropagation(),n.preventDefault(),this._emitter.emit("changed"))}eventStart(n){this.acceptsInput(n)&&(n.stopPropagation(),n.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._originalPointerId=n.pointerId,this._emitter.emit("start"),this._currentNode=this.model._eventDown(n),this._currentNode&&this.mode!=="eraseLine"&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(n){if(!this.acceptsInput(n)||!this.drawing)return;const t=this.model._eventUp(n);if(!t)this.cancel();else if(t===!0){const e=this._currentNode;e&&(this._appendNode(e),this.commit({undo:()=>this._removeNode(e),redo:()=>this._restoreNode(e)}))}else this.commit(t);this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed"),this._originalPointerId=null}acceptsInput(n){return(!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(n.pointerType))&&!(this._originalPointerId&&this._originalPointerId!==n.pointerId)}eventKeyboard(n){this.shiftPressed===n.shiftKey&&this.altPressed===n.altKey||(this.shiftPressed=n.shiftKey,this.altPressed=n.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(n){this._opStack.length=this._opIndex,this._opStack.push(n),this._opIndex++;const t=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",t)}clear(){this._opStack.length=0,this._opIndex=0,this._elements=[],this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(n){this.clear(),this.el.innerHTML=n}_appendNode(n){const t=this._elements.at(-1);t?t.after(n):this.el.append(n);const e=this._elements.push(n)-1;n.dataset.drauu_index=e.toString()}_removeNode(n){n.remove(),this._elements[+n.dataset.drauu_index]=null}_restoreNode(n){const t=+n.dataset.drauu_index;this._elements[t]=n;for(let e=t-1;e>=0;e--){const s=this._elements[e];if(s){s.after(n);return}}this.el.prepend(n)}};function Em(n){return new Am(n)}const Nt=At({colors:["#000000",...new Array(12).fill(!0).map((n,t)=>`hsl(${t*30}, 100%,50%)`),"#ffffff"],sizes:mf([4,8,16,24]),modes:["line","arrow","stylus","rectangle","ellipse"],mode:It({get(){return ca.value},set(n){ca.value=n,n==="arrow"?(pn.mode="line",pn.arrowEnd=!0):(pn.mode=n,pn.arrowEnd=!1)}}),enabled:!1,pinned:$e("drawing-pinned",!1),canUndo:!1,canRedo:!1,canClear:!1,ing:!1,initiated:!1,content:"",clear:()=>{}}),pn=gf($e("drawing-brush",{color:Nt.colors[0],size:10,mode:"stylus",arrowEnd:!1})),ca=ue("stylus");let es=!1;const Cm=At({brush:pn,acceptsInputTypes:It(()=>Nt.enabled?void 0:["pen"])}),Bt=hf(Em(Cm));function _r(){es=!0,Nt.content!=null?Bt.load(Nt.content):Bt==null||Bt.clear(),es=!1}function Tm(){var n;Nt.canRedo=Bt.canRedo(),Nt.canUndo=Bt.canUndo(),Nt.canClear=!!((n=Bt.el)!=null&&n.children.length)}function W1(){if(!Nt.initiated){const n=xt(),{user:t}=rn(),e=n.user(mt.pub).get("space").get(t.pub).get("draw");e.on(i=>{Nt.ing||(Nt.content=i,_r())});const s=df(()=>{var i;if(Tm(),!es){let o=Bt.dump();Nt.content=o,e.put(o,void 0,{opt:{cert:(i=mt.features)==null?void 0:i.space}})}},200);Bt.on("changed",s),pf(()=>{Fa(()=>{_r()})}),In(()=>mt.pub,i=>{Bt==null||Bt.clear(),Nt.content="",_r()}),Bt.on("start",()=>Nt.ing=!0),Bt.on("end",()=>Nt.ing=!1),Nt.clear=()=>{var i;Bt==null||Bt.clear(),Nt.content="",e.put("",void 0,{opt:{cert:(i=mt.features)==null?void 0:i.space}})};const r=[];window.addEventListener("keydown",i=>{if(!Nt.enabled)return;const o=!i.ctrlKey&&!i.altKey&&!i.shiftKey&&!i.metaKey;let a=!0;i.code==="KeyZ"&&(i.ctrlKey||i.metaKey)?i.shiftKey?Bt.redo():Bt.undo():i.code==="Escape"?Nt.enabled=!1:i.code==="KeyC"&&(i.ctrlKey||i.metaKey)?Nt.clear():i.code.startsWith("Digit")&&o&&+i.code[5]<=r.length?pn.color=r[+i.code[5]-1]:a=!1,a&&(i.preventDefault(),i.stopPropagation())},!1)}return Nt.initiated=!0,{brush:pn,draw:Nt,drauu:Bt,loadCanvas:_r}}const Vl={trie:"ABAOAAAAAAAQmQAAAYAIf/ftmwuoFUUYx+d4z7nnHO+rUiF8gFHRBQ00CyQpJEtMUiwSSjLkViBlIqUhXnuoEXXpaWVkJFFWpj3EQCN6UdiVIKw0C4QSxbDkhkSKlUL/ZXe709yZ2XnvUfeDHzM7M/t937xn9+yZ3kTIDWAO6ALLwEoqzTbsAavBk2CNQvl14A1J/kawBXwIPgdfge/Aj2AfVe4g6AN/gL8BKRNSA1XQAYaCkeBF8ApYX47vTdkDLkDa2+BdsBV8Ar4EvWAn+AH8DPaBQ6CPuj4KTiblKxVC2irx/cMQvoNwVCW2cyHCOq4vrvTrn4D4pOR6CsJrwFjKfnTfDKSNq8Xx2YjfUun3fR7i85PrBQjvTeLdCFeBHjCUKr8a8bXgVbCx8v92uLHWz9yE28CSBLqsjDcVy7lmSyXmr3JMlPYBrj9L6jmf6ffxSN/OtMHXFbH+3UneXoQHkvgjYEii9zDSfgfHwAlQbiaktTnOG5KEw5sH6h2NtE5Oeko0r8ZJ8lVZCD8XR+MMumZS6VEdnkjq8zjVz88ivlaj319G2fVU+TT+FsL3JHq2SfI+Rt520At2gt0Ue5nr/eBXcAQcB/+AprpeG7Volqc5J7l3uIGOiUz/7uKMAdv+j7iSsjPVckyNtmirgoKCgoKCgoKCgoKCggIVZjTH79LS64WS9zYps3HPXOqZt7dKyGU1Qu5A2t1J+hKEy8HsWvw+cAXiVyD+WJL/FMIXwEvJ9WsIjyHclPEs/T7yH4CeB8FDYAVYCVaBh2tFXpFX5BV5RZ7rvLvAPeC+Wv57VkFBwenLNge/0clY09T/uzpLFyeNPh8vL/vxSYcNbTGHwDQFOtsJmdg+MH0pk7YB14dAZwch8zritOcQ7gDkLEJGgllgcgshi8D+OiHnDSbk+VLMzVScZVOLOI+mm9KxGfHDuG9MK54twOvgYKuanoKCgoKC048j2BcI9oUDOCccx35YKsffeUTfCV2C+OXJHj0I4W9IuxrPLEea4/yj4CpqDz/JOWtEuirV/u/I2hAfVuXvxSOQfj6VNwbxCYKyERORN5nKn1bt/+4pYhaVF33/dZNE11xJXsRU6J3JnFduxz0LwOLoXuR1JzrmGJxrVlL2exB/mvFnDa67Er3rMnylWa9R1ierGuCsx7IDbXN9QHs9aINvYHMPp09+apB+0iX6XreHYhlDj4RnygPLn2nYtP2nGc92Q5g51+v5WdCEnfBpl8Cv8Qq/n6jwrWa993LKd3hevzYm839zA6wDW+HDddjnP6J8+cKBX9Gc/6Uah30I/wQnGqC+qpTRJq0Z72xN++/sU+BdMFu3c08Bn02gv9/mcVE9/n48KjsW8UvBpHqc1wmmID49+g65nq2LZbRiue/BnAz9t9b59aHrOoK67kr03ZnctygJlyK8n7I1Kvo9A9ePGtSPtW/S/j6J2vXaptJ/lOO/7mTSRMUHKd6jQiH5SdH+7saxz/HfzvGZTTOVyhmOSwllp9Ek7z407Xc6FMVPdykJUBXdNm/kPacR15dQY1BWh1JGGVYHr6wPof3KSxpprDSynAnt4KpuvDlVUtTvmqqgDlUK9ppeM1TraSqsXdZ3Oj0Vnf2NJ7b305K2n2zfFbW/q/2lyoEwcdoPuo+rVJj33JWNYd784YnoPGQ7d3R9LmXc50No+z7OaeVEdxtx9/7H9bslV8/VqYR+H+bCBm/dp4W31qZjRoaL/ahR3zfy1hbR/q9aLpTI7LLrWV5Cj0lC5Pu+6BxAl6f3Ntm9Ov7ltf+x9Qltm/VB1Iasj3R5HVuqZUP2R4WJ5zVfZPODV5bnN1vWZTva6hfNd1o3e371MQ58jy/b9cilH7Q/Pua36Xqbh4jW2qznYVXdOvbzeObi7adpuuxMk6Uzz/6MhD0X8M4IvP51XT/2zJKnsP2p449ov+GdEejyvHcRrsc62+ema23WudOVqPprYjfvfSaEPXaM8ey5nG8qfcRD5Wxja8/GP1fYimq7sfXVWbNtRfXs7aM9THVEovrO0kZ8tH2otUtlzNFjTbaXqb6/0K2bzzaQ1ZGXzgqv/iI9IfvS51marq/K2kyHJOMe1XZUGVMi3SElq56i+tLpeYmPvS+vfqCFN5Z4c97nvGVt8Pqe55+uqKzbKnPRx97OXqui+5wj85vOUz0rhEBky0ZcjmeR3ya/N7r+jTJLfLUBL810jOqOYxfCWwN9+yBaj0KJy/lqYtvULx+iuwa73sNpvSJ7KvZDjp/UnqyNRNcmdlTK5H1m9KGPN/Zl7WjSxqrjy/TZSvSszL6HDz1+eZKnDyFs66ypoj1eRa9v0TlTqOpyKfQYz1tEa3Qee23qj0vRfVdi+zwp2ut03rnq+OxDaN/ZNV90rdpuOj6zelXbIeR4TcXm/QE9PnyKK/2yMylbH9EcyOO5hieyuqQieh7Lqw6ubZqOXZMxKxobsjGk6r/qPuZaTPaYkH2YCtuHdHlWV2hRabcQ80zVhs7abiMq73Vt54+qqPYRz8esevheV1XGE9uehFNGJrzfElh9tutnlrDj0KVOX/PQ53xn290EHd9tfFQVH+8ZdUW0/rD5Iddw33ZC7kMiu65xZUulDjr19SUi3122oQufXPmmOy+z7PqQ0O3pWtoDwquTqGxzIFyJr33N9Z4fQkL6YXM2ckGtAaClnjODPdPKoCsu68qK77qrwEoLGdhmPgltLxWf3xz51s3DREdIUbUZ0i9XtnTONLJ7Q/hqKrpjRrVs3vWihddXsn7UPc+a3OML0zaxtWfSXoTIfTbN45U1WUtltmT+i+qqY9u0X21E156NX3ndK9Np0095+6KiUyXNh5jOA54eV21ju36yemz8yPLJ1Vrgep8JtU/Zim4b88qp2vFFHjZ9rW8mvtvq9u2rrZ5Q9m3t+BpbJnk+x/e/",classes:{Other:0,Prepend:1,CR:2,LF:3,Control:4,Extend:5,Regional_Indicator:6,SpacingMark:7,L:8,V:9,T:10,LV:11,LVT:12,ZWJ:13,ExtPict:14}};var ys=0,Jl=-3;function sr(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Dm(n,t){this.source=n,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new sr,this.dtree=new sr}var Kl=new sr,Zl=new sr,ws=new Uint8Array(30),vs=new Uint16Array(30),Yl=new Uint8Array(30),Xl=new Uint16Array(30),Om=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),la=new sr,he=new Uint8Array(320);function Ql(n,t,e,s){var r,i;for(r=0;r<e;++r)n[r]=0;for(r=0;r<30-e;++r)n[r+e]=r/e|0;for(i=s,r=0;r<30;++r)t[r]=i,i+=1<<n[r]}function Pm(n,t){var e;for(e=0;e<7;++e)n.table[e]=0;for(n.table[7]=24,n.table[8]=152,n.table[9]=112,e=0;e<24;++e)n.trans[e]=256+e;for(e=0;e<144;++e)n.trans[24+e]=e;for(e=0;e<8;++e)n.trans[168+e]=280+e;for(e=0;e<112;++e)n.trans[176+e]=144+e;for(e=0;e<5;++e)t.table[e]=0;for(t.table[5]=32,e=0;e<32;++e)t.trans[e]=e}var fa=new Uint16Array(16);function Si(n,t,e,s){var r,i;for(r=0;r<16;++r)n.table[r]=0;for(r=0;r<s;++r)n.table[t[e+r]]++;for(n.table[0]=0,i=0,r=0;r<16;++r)fa[r]=i,i+=n.table[r];for(r=0;r<s;++r)t[e+r]&&(n.trans[fa[t[e+r]]++]=r)}function Im(n){n.bitcount--||(n.tag=n.source[n.sourceIndex++],n.bitcount=7);var t=n.tag&1;return n.tag>>>=1,t}function xe(n,t,e){if(!t)return e;for(;n.bitcount<24;)n.tag|=n.source[n.sourceIndex++]<<n.bitcount,n.bitcount+=8;var s=n.tag&65535>>>16-t;return n.tag>>>=t,n.bitcount-=t,s+e}function ns(n,t){for(;n.bitcount<24;)n.tag|=n.source[n.sourceIndex++]<<n.bitcount,n.bitcount+=8;var e=0,s=0,r=0,i=n.tag;do s=2*s+(i&1),i>>>=1,++r,e+=t.table[r],s-=t.table[r];while(s>=0);return n.tag=i,n.bitcount-=r,t.trans[e+s]}function jm(n,t,e){var s,r,i,o,a,u;for(s=xe(n,5,257),r=xe(n,5,1),i=xe(n,4,4),o=0;o<19;++o)he[o]=0;for(o=0;o<i;++o){var c=xe(n,3,0);he[Om[o]]=c}for(Si(la,he,0,19),a=0;a<s+r;){var l=ns(n,la);switch(l){case 16:var f=he[a-1];for(u=xe(n,2,3);u;--u)he[a++]=f;break;case 17:for(u=xe(n,3,3);u;--u)he[a++]=0;break;case 18:for(u=xe(n,7,11);u;--u)he[a++]=0;break;default:he[a++]=l;break}}Si(t,he,0,s),Si(e,he,s,r)}function ha(n,t,e){for(;;){var s=ns(n,t);if(s===256)return ys;if(s<256)n.dest[n.destLen++]=s;else{var r,i,o,a;for(s-=257,r=xe(n,ws[s],vs[s]),i=ns(n,e),o=n.destLen-xe(n,Yl[i],Xl[i]),a=o;a<o+r;++a)n.dest[n.destLen++]=n.dest[a]}}}function Rm(n){for(var t,e,s;n.bitcount>8;)n.sourceIndex--,n.bitcount-=8;if(t=n.source[n.sourceIndex+1],t=256*t+n.source[n.sourceIndex],e=n.source[n.sourceIndex+3],e=256*e+n.source[n.sourceIndex+2],t!==(~e&65535))return Jl;for(n.sourceIndex+=4,s=t;s;--s)n.dest[n.destLen++]=n.source[n.sourceIndex++];return n.bitcount=0,ys}function da(n,t){var e=new Dm(n,t),s,r,i;do{switch(s=Im(e),r=xe(e,2,0),r){case 0:i=Rm(e);break;case 1:i=ha(e,Kl,Zl);break;case 2:jm(e,e.ltree,e.dtree),i=ha(e,e.ltree,e.dtree);break;default:i=Jl}if(i!==ys)throw new Error("Data error")}while(!s);return e.destLen<e.dest.length?typeof e.dest.slice=="function"?e.dest.slice(0,e.destLen):e.dest.subarray(0,e.destLen):e.dest}Pm(Kl,Zl);Ql(ws,vs,4,3);Ql(Yl,Xl,2,1);ws[28]=0;vs[28]=258;const Fm=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,pa=(n,t,e)=>{let s=n[t];n[t]=n[e],n[e]=s},Lm=n=>{const t=n.length;for(let e=0;e<t;e+=4)pa(n,e,e+3),pa(n,e+1,e+2)},Nm=n=>{Fm&&Lm(n)},Bm={swap32LE:Nm},$m=Bm.swap32LE,xs=11,mn=5,Mm=xs-mn,Um=65536>>xs,zm=1<<Mm,Hm=zm-1,Tr=2,qm=1<<mn,Ai=qm-1,tf=65536>>mn,Gm=1024>>mn,Wm=tf+Gm,Vm=Wm,Jm=32,Km=Vm+Jm,Zm=1<<Tr;class Ym{constructor(t){const e=typeof t.readUInt32BE=="function"&&typeof t.slice=="function";if(e||t instanceof Uint8Array){let s;if(e)this.highStart=t.readUInt32LE(0),this.errorValue=t.readUInt32LE(4),s=t.readUInt32LE(8),t=t.slice(12);else{const r=new DataView(t.buffer);this.highStart=r.getUint32(0,!0),this.errorValue=r.getUint32(4,!0),s=r.getUint32(8,!0),t=t.subarray(12)}t=da(t,new Uint8Array(s)),t=da(t,new Uint8Array(s)),$m(t),this.data=new Uint32Array(t.buffer)}else({data:this.data,highStart:this.highStart,errorValue:this.errorValue}=t)}get(t){let e;return t<0||t>1114111?this.errorValue:t<55296||t>56319&&t<=65535?(e=(this.data[t>>mn]<<Tr)+(t&Ai),this.data[e]):t<=65535?(e=(this.data[tf+(t-55296>>mn)]<<Tr)+(t&Ai),this.data[e]):t<this.highStart?(e=this.data[Km-Um+(t>>xs)],e=this.data[e+(t>>mn&Hm)],e=(e<<Tr)+(t&Ai),this.data[e]):this.data[this.data.length-Zm]}}const ga=Vl.trie,{Other:ma,Prepend:ba,CR:Ei,LF:Ci,Control:_a,Extend:yr,Regional_Indicator:je,SpacingMark:Xm,L:ya,V:Ti,T:Di,LV:wa,LVT:va,ZWJ:kn,ExtPict:wr}=Vl.classes;let Dr=null;if(globalThis.window){const n=window.atob(ga);Dr=new Uint8Array(n.length);for(let t=0;t<n.length;t++)Dr[t]=n.charCodeAt(t)}else Dr=Buffer.from(ga,"base64");const Mr=new Ym(Dr),xa=function(n,t){const e=n.charCodeAt(t);if(55296<=e&&e<=56319){const s=e,r=n.charCodeAt(t+1);return 56320<=r&&r<=57343?(s-55296)*1024+(r-56320)+65536:s}if(56320<=e&&e<=57343){const s=n.charCodeAt(t-1),r=e;return 55296<=s&&s<=56319?(s-55296)*1024+(r-56320)+65536:r}return e},ks=function(n,t){let e,s;return 55296<=(e=n.charCodeAt(t))&&e<=56319&&56320<=(s=n.charCodeAt(t+1))&&s<=57343},Dt={NotBreak:0,BreakStart:1,Break:2,BreakLastRegional:3,BreakPenultimateRegional:4},ef=function(n,t,e,s){const r=[t].concat(e).concat([s]),i=n?t:r[r.length-2],o=n?r[1]:s;let a=r.lastIndexOf(je);if(a>0&&r.slice(1,a).every(u=>u===je)&&i!==ba&&i!==je)return r.filter(u=>u===je).length%2===1?Dt.BreakLastRegional:Dt.BreakPenultimateRegional;if(i===Ei&&o===Ci)return Dt.NotBreak;if(i===_a||i===Ei||i===Ci)return o!==yr&&e.every(u=>u===yr)?Dt.Break:Dt.BreakStart;if(o===_a||o===Ei||o===Ci)return Dt.BreakStart;if(i===ya&&(o===ya||o===Ti||o===wa||o===va)||(i===wa||i===Ti)&&(o===Ti||o===Di)||(i===va||i===Di)&&o===Di)return Dt.NotBreak;if(n){if(o===yr)return Dt.NotBreak;if(o===kn)return i==ma&&e.length>0&&e[0]==kn?s!=wr?Dt.BreakStart:Dt.Break:Dt.NotBreak}else if(o===yr||o===kn)return Dt.NotBreak;if(o===Xm||i===ba)return Dt.NotBreak;if(n){if(i==kn&&o==wr&&(t==kn||t==ma))return Dt.NotBreak}else if(t==wr&&i==kn&&o==wr)return Dt.NotBreak;return!n&&e.indexOf(je)>=0?Dt.Break:i===je&&o===je?Dt.NotBreak:Dt.BreakStart},ka=function(n,t,e){for(;e--;)t+=ks(n,t)?2:1;return t},Fn={};Fn.nextBreak=function(n,t=0){if(t<0)return 0;if(t>=n.length-1)return n.length;const e=Mr.get(n.codePointAt(t)),s=[];let r,i,o;for(r=i=t+1,o=n.length;i<o;r=i+=1){if(ks(n,r-1))continue;const a=Mr.get(n.codePointAt(r));if(ef(!1,e,s,a))return r;s.push(a)}return n.length};Fn.previousBreak=function(n,t=n.length){if(t>n.length)return n.length;if(t<=1)return 0;t--;let e=[],s=Mr.get(xa(n,t)),r,i;for(r=i=t-1;i>=-1;r=i+=-1){if(ks(n,r))continue;let o=Mr.get(xa(n,r));switch(ef(!0,o,e,s)){case Dt.Break:return r+e.length+1;case Dt.BreakStart:return r+1;case Dt.BreakLastRegional:return ka(n,r,e.concat(s).lastIndexOf(je)+1);case Dt.BreakPenultimateRegional:return ka(n,r,e.concat(s).lastIndexOf(je))}e.unshift(o)}};Fn.break=function(n){const t=[];let e=0,s;for(;(s=Fn.nextBreak(n,e))<n.length;)t.push(n.slice(e,s)),e=s;return e<n.length&&t.push(n.slice(e)),t};Fn.countBreaks=function(n){let t=0,e=0,s;for(;(s=Fn.nextBreak(n,e))<n.length;)e=s,t++;return e<n.length&&t++,t};var Qm=()=>{if(!CanvasRenderingContext2D||!e())return;const n=CanvasRenderingContext2D.prototype,t=n.drawImage;if(!t){console.error("This script requires a basic implementation of drawImage");return}n.drawImage=function(a,u,c){if(!(arguments.length===9))return t.apply(this,[...arguments]);const f=s(...arguments);if(!r(f))return t.apply(this,f)};function e(){const o=document.createElement("canvas").getContext("2d");o.fillRect(0,0,40,40),o.drawImage(o.canvas,-40,-40,80,80,50,50,20,20);const a=o.getImageData(50,50,30,30),u=new Uint32Array(a.data.buffer),c=(h,d)=>u[d*a.width+h],l=[[9,9],[20,9],[9,20],[20,20]],f=[[10,10],[19,10],[10,19],[19,19]];return l.some(([h,d])=>c(h,d)!==0)||f.some(([h,d])=>c(h,d)===0)}function s(o,a,u,c,l,f,h,d,p){const{width:g,height:b}=i(o);c<0&&(a+=c,c=Math.abs(c)),l<0&&(u+=l,l=Math.abs(l)),d<0&&(f+=d,d=Math.abs(d)),p<0&&(h+=p,p=Math.abs(p));const y=Math.max(a,0),m=Math.min(a+c,g),_=Math.max(u,0),w=Math.min(u+l,b),v=d/c,A=p/l;return[o,y,_,m-y,w-_,a<0?f-a*v:f,u<0?h-u*A:h,(m-y)*v,(w-_)*A]}function r(o){return[3,4,7,8].some(a=>!o[a])}function i(o){const a=u=>{const c=globalThis[u];return c&&o instanceof c};if(a("HTMLImageElement"))return{width:o.naturalWidth,height:o.naturalHeight};if(a("HTMLVideoElement"))return{width:o.videoWidth,height:o.videoHeight};if(a("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(a("HTMLCanvasElement")||a("ImageBitmap"))return o}},Sn={};function V1({pub:n,size:t=200,dark:e=!1,draw:s="circles",reflect:r=!0}){if(!t1(n)||!document)return"";const i=JSON.stringify(arguments[0]);if(Sn!=null&&Sn[i])return Sn[i];const o=document.createElement("canvas");o.width=o.height=t;const a=o.getContext("2d"),{decoded:u,finals:c}=e1(n);return i1({ctx:a,top:c[0],bottom:c[1],size:t,dark:e}),s=="squares"?(a.filter="blur(20px)",Sa(u[0],a,t),a.filter="blur(0px)",a.globalCompositeOperation="color-burn",Sa(u[1],a,t)):(Aa(u[0],a,t,.42*t),a.globalCompositeOperation="multiply",Aa(u[1],a,t,.125*t)),r&&(a.globalCompositeOperation="source-over",a.scale(-1,1),a.translate(-t/2,0),a.drawImage(o,t/2,0,t,t,0,0,t,t)),Sn[i]=o.toDataURL(),Sn[i]}function t1(n){return!!(n&&typeof n=="string"&&n.length==87&&n.split(".").length==2)}function e1(n){const t=n.split("."),e=t.map(a=>r1(a)),s=e.map(a=>a[42]),r=e.map(a=>a.reduce((u,c)=>u+c)/a.length),i=t.map(a=>n1(a)%360),o=t.map((a,u)=>`hsl(${i[u]} ${s[u]*100}% ${r[u]*100}%)`);return{finals:s,decoded:e,angles:i,averages:r,colors:o}}var nf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function n1(n){return n.split("").reduce((t,e)=>t*64+nf.indexOf(e),0)}function r1(n){const t=nf.split("");let e=[],s=0;for(let r of n)e[s++]=t.indexOf(r)/64;return e}function rf(n,t=3){return[...Array(Math.ceil(n.length/t))].map(()=>n.splice(0,t))}function i1({ctx:n,top:t=0,bottom:e=150,size:s=200,dark:r=!1}){var i=n.createLinearGradient(0,0,0,s);let o=70;r&&(o=0),i.addColorStop(0,`hsla(0,0%,${o+t*30}%)`),i.addColorStop(1,`hsla(0,0%,${o+e*30}%)`),n.fillStyle=i,n.fillRect(0,0,s,s)}function Sa(n,t,e){rf(n,14).forEach(r=>{if(r.length==14){let i=r[0]*e,o=r[1]*e,a=e/8+r[2]*e*(7/8),u=r[13]*Math.PI,c=r[3]*360,l=r[4]*100,f=r[5]*100,h=r[6],d=r[7],p=r[8]*360,g=r[9]*100,b=r[10]*100,y=r[11],m=r[12];const _=t.createLinearGradient(i+a*d,0,i+a*m,e);_.addColorStop(0,`hsla(${c},${l}%,${f}%,${h})`),_.addColorStop(1,`hsla(${p},${g}%,${b}%,${y})`),t.fillStyle=_,t.translate(i,o),t.rotate(u),t.fillRect(-a/2,-a/2,a,a),t.setTransform(1,0,0,1,0,0)}})}function Aa(n,t,e,s){rf(n,7).forEach(i=>{if(i.length==7){let o=e/2+i[0]*e/2,a=i[1]*e,u=i[2]*s,c=i[3]*360,l=i[4]*100,f=i[5]*100,h=i[6];t.beginPath(),t.arc(o,a,u,0,2*Math.PI,!1),t.fillStyle=`hsla(${c},${l}%,${f}%,${h})`,t.closePath(),t.fill()}})}Qm();const s1={install(n){for(const t in Oi)n.component(t,Oi[t])}},J1=Object.freeze(Object.defineProperty({__proto__:null,AccountAvatar:za,AccountBadge:Ua,AccountHome:La,AccountPetname:Na,AccountProfile:Ma,AccountReactions:Ba,AccountSelect:$a,AuthCreate:Ga,AuthCredentials:Wa,AuthForm:qa,AuthLogin:Ha,AuthPass:Va,ChatInput:Ja,ChatMessage:Ka,ChatMessages:Za,ChatPrivate:Vu,ChatPrivateCount:Ju,ChatPrivateList:Ku,ChatRoom:Xa,ChatTopics:Ya,DictAuthors:eu,DictBy:Qa,DictDefCard:nu,DictDefList:ru,DictDefPage:iu,DictLinkButton:cu,DictLinkList:uu,DictPanel:tu,DictWordCard:su,DictWordList:ou,DictWordPage:au,EmbedYoutube:lu,FileCard:du,FileHash:pu,FormLink:gu,FormPicture:mu,FormText:bu,FormTitle:yu,FormYoutube:_u,GiftButton:ku,GiftCard:wu,GiftForm:xu,GiftList:vu,GiftStatus:Eu,GiftWallet:Au,GiftWallets:Su,GuestList:pc,GunGraph:Cu,GunRelay:Tu,GunRelayList:Du,GunTools:Ou,GunVuePlugin:s1,MateButton:Pu,MateLink:ju,MateList:Iu,PostActionBan:Hu,PostActionReact:qu,PostActionStar:Uu,PostActionUpdate:zu,PostCard:Ru,PostForm:Fu,PostGraph:Lu,PostLine:Nu,PostLink:Bu,PostList:$u,PostPage:Mu,PostReactionButton:Gu,PostReactionTabs:Wu,ProjectCard:Yu,ProjectForm:tc,ProjectFunding:Qu,ProjectList:Zu,ProjectPage:Xu,QrLoad:ec,QrShare:rc,QrShow:nc,RoomActions:dc,RoomButton:hc,RoomCard:ic,RoomFeature:sc,RoomFeatureIcon:oc,RoomForm:ac,RoomList:cc,RoomLogo:uc,RoomPage:lc,RoomProfile:fc,SpaceArrow:bc,SpaceDraw:_c,SpaceGuest:mc,SpacePlane:gc,SpaceStatus:yc,TorrentDownload:hu,TorrentUpload:fu,UiButton:wc,UiComponents:Ec,UiDark:Ac,UiLayer:vc,UiLink:xc,UiModal:kc,UiPanel:Sc,UserAvatar:Cc,UserGraph:Tc,UserHome:Dc,UserIcon:Oc,UserListOverlay:Pc,UserPanel:Ic,UserProfile:jc,UserProfileField:Rc,UserRooms:Fc,components:Oi},Symbol.toStringTag,{value:"Module"}));export{S1 as $,za as A,G1 as B,Ju as C,h1 as D,Va as E,bn as F,no as G,nc as H,ce as I,F1 as J,R1 as K,Fn as L,Pu as M,wt as N,d1 as O,Yu as P,ec as Q,La as R,Le as S,hu as T,vc as U,Za as V,Ja as W,A1 as X,C1 as Y,$i as Z,E1 as _,rn as a,lc as a$,uu as a0,Ze as a1,cu as a2,k1 as a3,su as a4,nu as a5,x1 as a6,Yc as a7,v1 as a8,z1 as a9,bu as aA,rc as aB,Fu as aC,I1 as aD,Nu as aE,zu as aF,$u as aG,Gu as aH,fu as aI,Sc as aJ,yu as aK,Qu as aL,tc as aM,ku as aN,L1 as aO,N1 as aP,oc as aQ,ms as aR,B1 as aS,ac as aT,ic as aU,Gf as aV,uc as aW,dc as aX,sc as aY,pc as aZ,U1 as a_,du as aa,D1 as ab,lu as ac,Eu as ad,rh as ae,g1 as af,m1 as ag,wu as ah,hc as ai,xu as aj,Au as ak,p1 as al,Du as am,b1 as an,Cu as ao,ju as ap,xc as aq,qu as ar,Nc as as,y1 as at,j1 as au,O1 as av,P1 as aw,mu as ax,gu as ay,_u as az,Na as b,Tn as b0,$1 as b1,M1 as b2,W1 as b3,bc as b4,mc as b5,yc as b6,Oi as b7,Wa as b8,Ha as b9,Ic as ba,jc as bb,Fc as bc,Ku as bd,Dc as be,Cc as bf,Rc as bg,q1 as bh,Up as bi,J1 as bj,Fe as c,Ma as d,Iu as e,Ba as f,en as g,mt as h,xt as i,_1 as j,V1 as k,Wu as l,Ru as m,Ua as n,eh as o,Lc as p,H1 as q,ss as r,Tf as s,c1 as t,l1 as u,qa as v,Ga as w,f1 as x,T1 as y,w1 as z};
