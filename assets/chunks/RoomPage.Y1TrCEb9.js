import{aV as C,a as $,i as c,aO as F,q as L,aW as P,aK as N,aX as S,o as T,aY as U,aZ as V,a_ as z,aB as H}from"./components.E5lnCjC1.js";import{u as M}from"./useMd.Bol7O6Gk.js";import{u as j}from"./useBackground.DryehXy6.js";import"./theme.Ct9TrzLQ.js";import{h,ah as A,c as n,o as a,j as s,r as G,b as d,k as e,G as f,t as O,F as _,B as w,N as q,e as D}from"./framework.Cf-rbDpz.js";const E={class:"flex flex-col items-stretch"},K={class:"max-w-full flex flex-col items-stretche bg-light-100 bg-opacity-20 dark-bg-dark-800 dark-bg-opacity-40 p-4 md-p-12 shadow-xl backdrop-blur-md backdrop-filter rounded-t-xl"},W={class:"flex flex-wrap items-center gap-8"},X={class:"flex flex-col flex-auto",style:{flex:"100"}},Y={class:"flex gap-2 items-center"},Z={key:0,class:"i-la-star"},I={key:1,class:"i-la-star-solid"},J={class:"text-md"},Q={class:"flex items-center flex-wrap"},ee={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},te={class:"flex flex-wrap items-center gap-2 p-4"},se={class:"px-4 max-w-55ch"},oe={class:"relative"},le={key:0,class:"flex items-center"},ae=["innerHTML"],fe={__name:"RoomPage",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>C}},emits:["rooms","browse","user"],setup(p){const x=p,{user:b}=$(),i=h(()=>x.pub?x.pub:c.pub),{room:o,leaveRoom:re,updateRoomProfile:v,enterRoom:ie}=F(i.value),R=M(),u=A({name:!1,description:!1,text:!1});L("deep");const B=h(()=>j({pub:i.value,size:1200,attachment:"local"}));return(m,t)=>{var k,g,y;return a(),n("div",E,[s("div",{class:"pt-32 px-2 md-px-8 bg-cover relative flex flex-col items-center",style:q({...B.value})},[s("div",K,[s("div",W,[(a(),d(e(P),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:i.value,key:i.value},null,8,["pub"])),s("div",X,[s("div",Y,[f(e(N),{class:"font-bold text-2xl",text:e(o).profile.name||i.value.substring(0,12),editable:e(o).hosts[e(b).pub]&&i.value==e(c).pub&&!u.name,onUpdate:t[0]||(t[0]=r=>e(v)("name",r))},null,8,["text","editable"]),t[6]||(t[6]=s("div",{class:"flex-1"},null,-1)),s("button",{class:"button",onClick:t[1]||(t[1]=r=>e(S)(i.value))},[e(o).isFavourite?(a(),n("div",I)):(a(),n("div",Z))])]),s("div",J,O(e(o).profile.description),1),s("div",Q,[t[7]||(t[7]=s("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(a(!0),n(_,null,w(e(o).hosts,(r,l)=>(a(),n("div",{class:"p-2 flex flex-col items-start gap-2",key:l},[f(e(T),{pub:l,selectable:!0},null,8,["pub"])]))),128))]),f(e(U),{pub:i.value},null,8,["pub"])])])])],4),G(m.$slots,"default"),s("div",ee,[s("div",te,[(a(!0),n(_,null,w(p.titles,(r,l)=>(a(),d(e(V),{key:l,cert:e(o).features[l],type:l,title:r,pub:p.pub||e(c).pub,open:e(o).features[l]||l=="users"&&e(o).features.space||l=="chat"&&e(o).features.chat,onClick:ne=>m.$emit("browse",l)},null,8,["cert","type","title","pub","open","onClick"]))),128))]),s("div",se,[(a(),d(e(z),{state:"offline",onUser:t[2]||(t[2]=r=>m.$emit("user",r)),roomPub:(k=e(o))==null?void 0:k.pub,key:e(o).pub},null,8,["roomPub"]))]),s("div",oe,[u.text===!1?(a(),n("div",le,[s("div",{class:"p-4 prose max-w-65ch break-all",innerHTML:e(R).render(((g=e(o).profile)==null?void 0:g.text)||"")},null,8,ae),(y=e(o).hosts)!=null&&y[e(b).pub]?(a(),n("button",{key:0,class:"button absolute top-4 right-4 z-200",onClick:t[3]||(t[3]=r=>{var l;return u.text=((l=e(o).profile)==null?void 0:l.text)||""})},t[8]||(t[8]=[s("div",{class:"i-la-pen"},null,-1)]))):D("",!0)])):(a(),d(e(H),{key:1,text:u.text,"onUpdate:text":t[4]||(t[4]=r=>u.text=r),onClose:t[5]||(t[5]=r=>{e(v)("text",u.text),u.text=!1})},null,8,["text"]))])])])}}};export{fe as default};
