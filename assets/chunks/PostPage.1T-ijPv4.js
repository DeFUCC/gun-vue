import{aM as z,ay as U,aN as V,ag as E,aO as F}from"./components.Bh0JkzMg.js";import{u as H}from"./useMd.BeyRMBYA.js";import{u as T}from"./useZip.C1pNLveD.js";import{u as A}from"./usePosts.CTvqVKVV.js";import"./theme.B2AGLJY6.js";import{c as i,o,j as e,F as D,B as G,b as u,k as t,t as c,e as n,N as O,G as Y}from"./framework.NFQ89pQN.js";import"./useGift.iPkycH93.js";import"./composables.5HfwXz2v.js";const q={class:"rounded-lg max-w-65ch flex flex-col items-stretch justify-center w-full overscroll-contain bg-light-200 dark-bg-dark-500"},I={class:"flex flex-wrap"},J={class:"z-30 flex flex-wrap items-center w-full px-4 py-2 sticky top-0 shadow-xl filter grayscale-70 hover-grayscale-0 transition duration-400ms"},K={class:"ml-1 break-all font-bold"},Q={class:"flex-1 flex flex-col items-stretch",style:{flex:"10 1 300px"}},R={key:0,class:"z-1 max-w-100vw"},W=["src"],X={class:"flex flex-wrap items-start w-full justify-start"},Z={class:"w-full flex flex-col items-stretch"},tt={class:"p-2"},st=["src"],et={key:1,class:"text-2xl font-bold m-2"},lt={key:3,class:"m-2"},ot={class:"flex flex-wrap p-4 bg-dark-50 bg-opacity-25 dark-bg-dark-400 w-full items-center gap-1 text-sm"},it={key:0,class:"i-la-file-download"},at={key:1,class:"i-la-redo-alt animate-spin"},nt=["innerHTML"],vt={__name:"PostPage",props:{tag:{type:String,default:""},hash:{type:String,default:""}},emits:["close","browse","user"],setup(d){const M=H(),f=d,{post:l,download:S,downloading:_}=T({hash:f.hash}),{posts:rt,backlinks:j}=A(f.hash);return(r,s)=>{var k,x,p,v,y,b,g,h,w,$,C,P,B,L;return o(),i("div",q,[e("div",I,[(o(!0),i(D,null,G(t(j),(a,m)=>(o(),u(t(z),{key:m,style:{flex:"1 1 220px"},hash:m,tag:d.tag,authors:a,back:!0,onUser:s[0]||(s[0]=N=>r.$emit("user",N)),onClick:N=>r.$emit("browse",m)},null,8,["hash","tag","authors","onClick"]))),128))]),e("div",J,[e("div",{class:"hover-underline text-md cursor-pointer font-bold flex",onClick:s[1]||(s[1]=a=>r.$emit("close"))},s[6]||(s[6]=[e("div",{class:"p-0"},"#",-1)])),e("div",K,c((k=t(l))==null?void 0:k.title),1),s[9]||(s[9]=e("div",{class:"flex-1"},null,-1)),e("button",{class:"p-2",onClick:s[2]||(s[2]=a=>r.$router.back())},s[7]||(s[7]=[e("div",{class:"i-la-angle-left"},null,-1)])),e("button",{class:"p-2",onClick:s[3]||(s[3]=a=>r.$emit("close"))},s[8]||(s[8]=[e("div",{class:"i-la-times"},null,-1)]))]),e("div",Q,[(x=t(l))!=null&&x.cover||(p=t(l))!=null&&p.youtube||(v=t(l))!=null&&v.text?(o(),i("div",R,[e("img",{class:"sticky top-0",src:t(l).cover},null,8,W)])):n("",!0),e("div",X,[e("div",Z,[e("div",tt,[t(l).icon?(o(),i("img",{key:0,class:"w-20 h-20 rounded-full m-2",style:O([{flex:"0 1 40px"},{borderColor:"white"}]),src:t(l).icon},null,8,st)):n("",!0),(y=t(l))!=null&&y.title?(o(),i("div",et,c((b=t(l))==null?void 0:b.title),1)):n("",!0),(g=t(l))!=null&&g.link?(o(),u(t(U),{key:2,url:(h=t(l))==null?void 0:h.link},null,8,["url"])):n("",!0),(w=t(l))!=null&&w.statement?(o(),i("div",lt,c(($=t(l))==null?void 0:$.statement),1)):n("",!0)]),s[10]||(s[10]=e("div",{class:"flex-auto"},null,-1)),e("div",ot,[Y(t(V),{hash:d.hash},null,8,["hash"]),e("button",{class:"button flex items-center",onClick:s[4]||(s[4]=a=>t(S)())},[t(_)?(o(),i("div",at)):(o(),i("div",it))])])])]),(C=t(l))!=null&&C.youtube?(o(),u(t(E),{key:1,class:"mb-6 shadow-xl flex-1",video:(P=t(l))==null?void 0:P.youtube},null,8,["video"])):n("",!0),(B=t(l))!=null&&B.text?(o(),i("div",{key:2,class:"text-md markdown-body m-1 px-4 py-4 leading-relaxed",innerHTML:t(M).render((L=t(l))==null?void 0:L.text)},null,8,nt)):n("",!0),(o(),u(t(F),{key:d.tag,tag:d.hash,header:!1,onBrowse:s[5]||(s[5]=a=>r.$emit("browse",a))},null,8,["tag"]))])])}}};export{vt as default};
