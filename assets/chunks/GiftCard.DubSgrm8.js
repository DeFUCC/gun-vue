import{h as p,p as $,c as l,e as i,k as t,o as a,j as e,N as f,r as B,t as r,G as x,w as y,F as b,a0 as m}from"./framework.BN2VI_cg.js";import{a as D,q as N,j as O,ae as k,o as _,i as R}from"./components.DHXz-LG9.js";import{u as q,g as v}from"./useGift.C8WFePgg.js";import{u as P}from"./useProject.DqGYZHOI.js";import"./theme.DdZphXP3.js";import"./composables.C0u2Amen.js";const T={class:"flex flex-wrap gap-2 items-center px-2"},V={class:"flex-0 flex flex-wrap px-2 gap-2"},A={class:"flex flex-col"},E={class:"text-xl font-bold"},F={class:"flex flex-col"},L={class:"text-lg font-bold"},M={class:"flex items-center gap-2 flex-0"},z={class:"flex flex-col gap-2 text-xs"},J={class:"flex flex-col gap-2 text-xs"},U={class:"flex gap-2 flex-wrap"},H={key:0,class:"flex flex-col gap-1"},I={class:"p-0"},K={key:1,class:"flex flex-col gap-1"},Q={class:"text-xs"},W={class:"p-0"},X={key:2,class:"flex flex-col gap-1"},Y={class:"flex flex-1 gap-2 p-2 items-center flex-wrap leading-tight text-xs",style:{flex:"1 1 20%"}},Z={class:"flex gap-2"},it={__name:"GiftCard",props:{hash:{type:String,default:""}},emits:["project"],setup(c,{emit:tt}){const w=c,{user:g}=D(),C=N(),{gift:o,state:n}=q(w.hash),j=p(()=>new Date(o.date).toLocaleTimeString("en-GB")),S=p(()=>new Date(o.date).toLocaleDateString("en-GB")),G=p(()=>{const u=$();return O().user(o.room).get("profile").get("name").on(d=>u.value=d),u.value}),{project:h}=P(p(()=>o.project));return(u,s)=>Object.keys(t(o)).length>0?(a(),l("div",{key:0,class:"flex p-0 rounded-xl shadow-lg border-2 relative overflow-hidden",style:f({opacity:t(n).complete?1:.5})},[e("div",{class:"w-3 min-w-3 h-full flex-0",style:f({backgroundColor:t(C).hex(c.hash)})},null,4),e("div",T,[e("div",V,[e("div",A,[e("div",E,r(t(o).qn),1)]),e("div",F,[e("div",L,r(t(o).ql),1)])]),e("div",M,[e("div",z,[x(t(_),{pub:t(o).from,style:f({opacity:t(n).from?1:.4})},{default:y(()=>[x(t(k),{class:"mr-2",state:t(n).from},null,8,["state"])]),_:1},8,["pub","style"])]),s[5]||(s[5]=e("div",{class:"i-la-arrow-right m-2"},null,-1)),e("div",J,[x(t(_),{pub:t(o).to,style:f({opacity:t(n).to?1:.4})},{default:y(()=>[x(t(k),{class:"mr-2",state:t(n).to},null,8,["state"])]),_:1},8,["pub","style"])])]),B(u.$slots,"default"),e("div",U,[t(o).room!=t(R).pub?(a(),l("div",H,[s[6]||(s[6]=e("div",{class:"text-xs"},"ROOM ",-1)),e("div",I,r(G.value),1)])):i("",!0),t(o).date?(a(),l("div",K,[e("div",Q,r(S.value),1),e("div",W,r(j.value),1)])):i("",!0),t(o).project?(a(),l("div",X,[s[7]||(s[7]=e("div",{class:"text-xs"},"PROJECT",-1)),e("div",{class:"py-1 px-2 rounded-lg text-sm",style:f({backgroundColor:t(h).color}),onClick:s[0]||(s[0]=d=>u.$emit("project",t(o).project))},r(t(h).title),5)])):i("",!0),e("div",Y,r(t(o).wish),1)]),e("div",Z,[t(o).from==t(g).pub?(a(),l(b,{key:0},[t(n).from?(a(),l("button",{key:1,class:"button",onClick:s[2]||(s[2]=m(d=>t(v)(c.hash,!1),["stop","prevent"]))},"Cancel")):(a(),l("button",{key:0,class:"button",onClick:s[1]||(s[1]=m(d=>t(v)(c.hash,!0),["stop","prevent"]))},"Propose"))],64)):i("",!0),t(o).to==t(g).pub?(a(),l(b,{key:1},[t(n).to?i("",!0):(a(),l("button",{key:0,class:"button",onClick:s[3]||(s[3]=m(d=>t(v)(c.hash,!0),["stop","prevent"]))},"Accept")),t(n).to?(a(),l("button",{key:1,class:"button",onClick:s[4]||(s[4]=m(d=>t(v)(c.hash,!1),["stop","prevent"]))},"Reject")):i("",!0)],64)):i("",!0)])])],4)):i("",!0)}};export{it as default};
