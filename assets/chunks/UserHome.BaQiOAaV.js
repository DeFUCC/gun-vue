import{d as w,x as y,z as h,a0 as _,ai as b,h as $,c as r,o as l,j as o,J as d,k as s,w as x,b as m,e as c,G as C,H as B,T as U}from"./framework.DOfjDz1B.js";import{u as R,U as z,s as F,aZ as j,a_ as L,a2 as p,a$ as N,b0 as V}from"./components.BfL1cQFx.js";import{u as H}from"./useRooms.BrDJHFg_.js";import"./theme.2Mja-hgs.js";import M from"./RoomButton.BLqsigUt.js";import P from"./FileShare.B4OmtSB_.js";import S from"./FileInfo.WNhAviV7.js";import"./useRoomLogo.BYrIN1L9.js";import"./useBackground.DH-ZD7cH.js";const T={class:"flex flex-wrap items-stretch gap-2 p-2 w-full justify-stretch"},A={class:"flex flex-col items-start bg-light-900 dark-bg-dark-500 p-2 rounded-xl max-h-40vh overflow-y-scroll z-100",style:{flex:"1 1 300px"}},E={class:"flex flex-col items-stretch bg-light-900 dark-bg-dark-500 p-2 rounded-xl max-h-40vh overflow-y-scroll",style:{flex:"1 1 300px"}},G={key:0,class:"i-la-angle-down"},J={key:1,class:"i-la-angle-up"},O={class:"flex flex-wrap items-stretch bg-light-900 dark-bg-dark-500 p-2 rounded-xl max-w-600px max-h-40vh overflow-y-scroll",style:{flex:"1 1 300px"}},Z={class:"flex flex-col items-stretch bg-light-900 dark-bg-dark-500 p-2 rounded-xl",style:{flex:"1 1 200px"}},q={key:0,class:"i-la-angle-down"},D={key:1,class:"i-la-angle-up"},ae=w({__name:"UserHome",emits:["room","close","chat","browse"],setup(I,{emit:K}){const{user:i}=R(),g=y(!1);let n;h(()=>i.is,()=>{n&&n.off(),i.db.get("safe").get("saved").on((a,e,t,v)=>{n=v,g.value=a})},{immediate:!0}),_(()=>{n==null||n.off()});const f=b("showChats",!0),u=b("showRooms",!0),k=$(()=>Object.entries(H(i.pub)).filter(([a,e])=>e[i.pub]).map(([a])=>a));return(a,e)=>(l(),r("div",T,[o("div",A,[d(s(z),{size:120,editable:!0}),d(s(j),null,{default:x(()=>[o("button",{class:"button",onClick:e[0]||(e[0]=t=>s(F).pub=s(i).pub)}," Public profile")]),_:1})]),o("div",E,[o("button",{class:"z-100 bg-light-400 dark-bg-dark-700 rounded-xl sticky top-0 items-center w-full flex p-2",onClick:e[1]||(e[1]=t=>f.value=!s(f))},[e[7]||(e[7]=o("div",{class:"font-bold text-lg"},"Messages",-1)),e[8]||(e[8]=o("div",{class:"flex-1"},null,-1)),s(f)?(l(),r("div",G)):(l(),r("div",J))]),s(f)?(l(),m(s(L),{key:0,onChat:e[2]||(e[2]=t=>a.$emit("chat",t))})):c("",!0)]),o("div",O,[s(p)?(l(),m(S,{key:0,file:s(p),onClose:e[3]||(e[3]=t=>p.value=null)},null,8,["file"])):(l(),m(s(N),{key:1,class:"w-full",onFile:e[4]||(e[4]=t=>p.value=t)},{default:x(()=>[d(P)]),_:1}))]),o("div",Z,[d(s(V),{onBrowse:e[5]||(e[5]=t=>a.$emit("room",t))}),o("button",{class:"items-center w-full flex px-2 pb-2",onClick:e[6]||(e[6]=t=>u.value=!s(u))},[e[9]||(e[9]=o("div",{class:"font-bold text-lg"},"Starred rooms",-1)),e[10]||(e[10]=o("div",{class:"flex-1"},null,-1)),s(u)?(l(),r("div",q)):(l(),r("div",D))]),d(U,{name:"fade",mode:"out-in"},{default:x(()=>[s(u)?(l(),r("div",{class:"flex flex-col gap-4",key:s(i).pub},[(l(!0),r(C,null,B(k.value,t=>(l(),m(M,{key:t,pub:t,onBrowse:v=>a.$emit("room",t),panel:!1},null,8,["pub","onBrowse"]))),128))])):c("",!0)]),_:1})])]))}});export{ae as default};
