import{o as e,c as s,j as o,F as r,k as t,b as m,E as b,t as u,w as _,aC as w,aR as B,e as k}from"./framework.TCUxwrzd.js";import{a as C,aK as j,m as F,ad as $}from"./components.D4fD2a5V.js";import{a as S}from"./useGifts.DNVWRKAn.js";import"./theme.D4rRXU8L.js";import"./composables.Di8zjsLP.js";const E={class:"flex flex-col"},G={class:"text-xl my-4 p-2 flex items-center"},P=o("div",{class:"font-bold"},"Project funding",-1),D=o("div",{class:"flex-1"},null,-1),V={key:1,class:"text-xs"},A={key:0,class:"p-2 flex flex-col gap-4"},K={class:"p-2 w-full flex items-center gap-2"},L={class:"text-xl font-bold"},R={class:"text-xl"},U=o("div",{class:"opacity-50"},"by",-1),z={class:"flex flex-wrap gap-2"},H={class:"mr-2"},X={__name:"ProjectFunding",props:{path:{type:String,default:""},enabled:{type:Boolean,default:!1}},emits:["enable","gift","open"],setup(n,{emit:I}){const v=n,{gifts:J,collections:h}=S(v.path),{user:l}=C();return(f,d)=>(e(),s("div",E,[o("div",G,[P,D,n.enabled?(e(),m(t(j),{key:1,gift:{project:n.path,to:n.path.slice(-87)},onSent:d[1]||(d[1]=a=>f.$emit("gift",a))},null,8,["gift"])):(e(),s(r,{key:0},[n.path.includes(t(l).pub)?(e(),s("button",{key:0,class:"button",onClick:d[0]||(d[0]=a=>f.$emit("enable"))},"Enable Funding")):(e(),s("div",V,"Funding not yet enabled by the author"))],64))]),n.enabled?(e(),s("div",A,[(e(!0),s(r,null,b(t(h),(a,p)=>{var x,g,y;return e(),s("div",{class:"flex flex-col gap-2 p-2 bg-dark-50 rounded-xl bg-opacity-10 shadow-xl",key:a},[o("div",K,[o("div",L,u(a.sum),1),o("div",R,u(p),1),U,o("div",z,[(e(!0),s(r,null,b(a.from,(i,c)=>(e(),m(t(F),{key:i,pub:c},{default:_(()=>[o("div",H,u(i)+" "+u(p),1)]),_:2},1032,["pub"]))),128))])]),(y=(g=(x=t(h))==null?void 0:x[p])==null?void 0:g.from)!=null&&y[t(l).pub]||n.path.includes(t(l).pub)?(e(!0),s(r,{key:0},b(a.list,(i,c)=>w((e(),m(t($),{class:"cursor-pointer",key:c,hash:c,onClick:M=>f.$emit("open",c)},null,8,["hash","onClick"])),[[B,i.from==t(l).pub||i.to==t(l).pub]])),128)):k("",!0)])}),128))])):k("",!0)]))}};export{X as default};
