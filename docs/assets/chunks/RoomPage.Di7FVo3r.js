import{b5 as B,a as F,j as f,a_ as L,o as T,b6 as U,aT as _,m as N,b7 as S,b8 as j,aI as z,b9 as k}from"./components.BF3VL1wl.js";import{u as H}from"./useMd.DIVJn9do.js";import{u as M}from"./useBackground.BEpapf7F.js";import"./theme.DNNfahvK.js";import{h as y,ai as P,o as r,c as i,j as o,G as u,k as e,t as V,F as h,C as w,N as A,r as G,b as R,e as D}from"./framework.D0CZGv0r.js";const E={class:"flex flex-col items-stretch"},I={class:"max-w-full flex flex-col items-stretche bg-light-100 bg-opacity-20 dark-bg-dark-800 dark-bg-opacity-40 p-4 md-p-12 shadow-xl backdrop-blur-md backdrop-filter rounded-t-xl"},O={class:"flex flex-wrap items-center gap-8"},q={class:"flex flex-col flex-auto",style:{flex:"100"}},J={class:"text-md"},K={class:"flex items-center flex-wrap"},Q={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},W={class:"flex flex-wrap items-center gap-2 p-4"},X={class:"relative"},Y={key:0,class:"flex items-center"},Z=["innerHTML"],ee={class:"p-2 flex flex-col gap-2"},ue={__name:"RoomPage",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>B}},emits:["rooms","browse","user"],setup(p){const c=p,{user:b}=F(),d=y(()=>c.pub?c.pub:f.pub),{room:a,leaveRoom:te,updateRoomProfile:x,enterRoom:se}=L(d.value),C=H(),n=P({name:!1,description:!1,text:!1});T("deep");const $=y(()=>M({pub:d.value,size:1200,attachment:"local"}));return(m,t)=>{var v,g;return r(),i("div",E,[o("div",{class:"pt-32 px-2 md-px-8 bg-cover relative flex flex-col items-center",style:A({...$.value})},[o("div",I,[o("div",O,[u(e(U),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:p.pub},null,8,["pub"]),o("div",q,[u(e(_),{class:"font-bold text-2xl",text:e(a).profile.name||d.value.substring(0,12),editable:e(a).hosts[e(b).pub]&&d.value==e(f).pub&&!n.name,onUpdate:t[0]||(t[0]=l=>e(x)("name",l))},null,8,["text","editable"]),o("div",J,V(e(a).profile.description),1),o("div",K,[t[6]||(t[6]=o("div",{class:"font-bold mr-2"},"Hosts: ",-1)),(r(!0),i(h,null,w(e(a).hosts,(l,s)=>(r(),i("div",{class:"p-2 flex flex-col items-start gap-2",key:s},[u(e(N),{pub:s,selectable:!0},null,8,["pub"])]))),128))]),u(e(S),{pub:d.value},null,8,["pub"])])])])],4),G(m.$slots,"default"),o("div",Q,[o("div",W,[(r(!0),i(h,null,w(p.titles,(l,s)=>(r(),R(e(j),{key:s,cert:e(a).features[s],type:s,title:l,pub:p.pub||e(f).pub,open:e(a).features[s]||s=="users"&&e(a).features.space||s=="chat"&&e(a).features.chat,onClick:oe=>m.$emit("browse",s)},null,8,["cert","type","title","pub","open","onClick"]))),128))]),o("div",X,[n.text===!1?(r(),i("div",Y,[o("div",{class:"p-8 markdown-body prose",innerHTML:e(C).render(((v=e(a).profile)==null?void 0:v.text)||"")},null,8,Z),(g=e(a).hosts)!=null&&g[e(b).pub]?(r(),i("button",{key:0,class:"button absolute top-4 right-4 z-200",onClick:t[1]||(t[1]=l=>{var s;return n.text=((s=e(a).profile)==null?void 0:s.text)||""})},t[7]||(t[7]=[o("div",{class:"i-la-pen"},null,-1)]))):D("",!0)])):(r(),R(e(z),{key:1,text:n.text,"onUpdate:text":t[2]||(t[2]=l=>n.text=l),onClose:t[3]||(t[3]=l=>{e(x)("text",n.text),n.text=!1})},null,8,["text"]))]),o("div",ee,[u(e(k),{onUser:t[4]||(t[4]=l=>m.$emit("user",l))}),u(e(k),{state:"offline",onUser:t[5]||(t[5]=l=>m.$emit("user",l))})])])])}}};export{ue as default};
