var Y=Object.defineProperty;var Z=(t,e,s)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var y=(t,e,s)=>(Z(t,typeof e!="symbol"?e+"":e,s),s);import{d as ee,f as T,x as O,w as H,aE as te,as as J,o as d,c as v,j as se,b as G,J as ne,E as p,e as r,G as C,H as I,t as S,F as V,U,L as D,K as ie,at as re,a as oe,I as j,N as W}from"./framework.29bd70f6.js";import{a as ae,ak as le,k as ue,af as ce,c as pe,n as me,o as fe,l as M,v as de,P as he,al as ge}from"./components.fd82ec8a.js";import"../app.ec2fd68a.js";import{c as ve,C as be}from"./currencies.683c928a.js";import"./theme.4cee43e1.js";/**
 * Vue Number Format 3.27.0
 * (c) 2021-2023 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var q={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function xe(t,e,s){return Math.max(t,Math.min(e,s))}function ye(t){return xe(0,t,20)}class A{constructor(e){y(this,"options");y(this,"input");y(this,"number");y(this,"isClean");y(this,"isCustomDecimal");y(this,"preSurRegExp");y(this,"numberRegExp");y(this,"cleanRegExp");y(this,"negativeRegExp");this.options=Object.assign(q,e);const{prefix:s,suffix:i,decimal:o,reverseFill:n}=this.options;this.input="",this.number="",this.isClean=!n,this.preSurRegExp=new RegExp(`${s}|${i}`,"g"),this.numberRegExp=new RegExp(`[^0-9\\${o}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=o!=="."}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(e=!1){return this.isClean=e,this}sign(){if(this.input===null||this.input===void 0)return"";const e=this.input.toString().indexOf("-")>=0;return this.isClean?e&&this.realNumber()>0?"-":"":e?"-":""}toFixed(){const e=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/e||0).toFixed(ye(this.options.precision))}toNumber(e){return Number(e)}numberOnly(e){var s;return(s=this.input)==null?void 0:s.toString().replace(this.preSurRegExp,"").replace(e||this.numberRegExp,"")}isNegative(){return this.sign()==="-"}numbers(){const{reverseFill:e,decimal:s}=this.options,o=!(this.input.toString().indexOf(s)>=0)&&this.isCustomDecimal?this.input+s:this.input;return e?this.number=this.toFixed().replace(".",s):typeof this.input=="number"?this.number=this.parts(this.input.toString().replace("-",""),".").join(s):isNaN(this.toNumber(o))?this.number=this.parts(this.numberOnly()).join(s):this.number=this.parts(this.input.replace("-",""),".").join(s),this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(e,s){const{precision:i,minimumFractionDigits:o,decimal:n}=this.options;let a=e.toString().split(s||n);if(a.length>1&&(a[0]=this.toNumber(a[0])||0,a[1]=a.slice(1,a.length).join(""),a=a.slice(0,2)),this.isClean){const f=this.toNumber(a.join(".")).toFixed(i),u=this.toNumber(f),m=u.toFixed(o);o>=0&&u.toString().length<m.length?a=m.toString().split("."):a=u.toString().split(".")}return a.slice(0,2)}addSeparator(){const{decimal:e,separator:s}=this.options,i=this.numbers().split(e);return i[0]=i[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${s}`),i.join(e)}format(e){this.input=e;const{reverseFill:s,nullValue:i,prefix:o,suffix:n}=this.options;return this.isNull()&&!s?i:this.sign()+o+this.addSeparator()+n}unformat(e){this.input=e;const{reverseFill:s,nullValue:i}=this.options;return this.isNull()||s&&this.realNumber()===0?i:this.sign()+this.realNumber()}}const B="-";function Q(t){return JSON.parse(JSON.stringify(t))}function L(t){return new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function R(t){const e=t instanceof HTMLInputElement?t:t.querySelector("input");if(!e)throw new Error("facade directive requires an input element");return e}function z(t,e){const s=()=>{t.setSelectionRange(e,e)};s(),setTimeout(s,1)}function _(t,e,{emit:s=!0,force:i=!1,clean:o=!1}={}){var w;const{options:n,oldValue:a}=t,{reverseFill:f,max:u,min:m}=n,E=((w=e==null?void 0:e.props)==null?void 0:w.value)||t.value;if(i||a!==E){const h=new A(n).clean(o&&!f);let b=h.format(E),x=h.clean(!f).unformat(E);return o&&(Number(u)===u&&Number(x)>u?(b=h.format(u),x=h.unformat(u)):Number(m)===m&&Number(x)<m&&(b=h.format(m),x=h.unformat(m))),t.oldValue=b,t.unmasked=x,t.value!==b&&(t.value=b),s&&t.dispatchEvent(L("input"))}}function Ee(t){const{target:e,detail:s}=t;if(s!=null&&s.facade)return!1;t.stopPropagation();let i=e.value.length;const{oldValue:o,options:n}=e;e.selectionEnd&&(i=e.value.length-e.selectionEnd),_(e,null,{emit:!1,clean:!n.precision}),n.suffix&&(i=Math.max(i,n.suffix.length)),i=e.value.length-i,n.prefix&&(i=Math.max(i,n.prefix.length)),z(e,i),o!==e.value&&e.dispatchEvent(L("input"))}function Ne(t){const{target:e,detail:s}=t;if(s!=null&&s.facade)return!1;const{oldValue:i}=e;_(e,null,{force:!0,emit:!1,clean:!0}),i!==e.value&&e.dispatchEvent(L("change"))}function ke(t,e){const{options:s}=e,{prefix:i,suffix:o,decimal:n,min:a,separator:f}=s,{key:u}=t,m=new RegExp(`${i}|${o}`,"g"),E=e.value.replace(m,""),w=a===void 0||Number(a)<0||Number(a)!==a;if(u===n)E.includes(n)?t.preventDefault():E||(e.value="0"+n,e.dispatchEvent(new Event("input")));else if(u===B&&!w)t.preventDefault();else if(u==="Backspace"){const h=e.selectionEnd||0,b=e.value.slice(h-1,h),x=e.value.slice(h-2,h);let N=e.value.length-h;[i,B,f].includes(b)&&(t.preventDefault(),b===f?e.value=e.value.replace(x,""):e.value=e.value.replace(new RegExp(`[${i}${B}]`,"g"),""),N=Math.max(N,o.length),N=e.value.length-N,N=Math.max(N,i.length),z(e,N),e.dispatchEvent(new Event("input")))}}var we={beforeMount:(t,{value:e,modifiers:s},i)=>{var u;t=R(t);const o=Object.assign(Q(q),e,s),{reverseFill:n,precision:a,decimal:f}=o;t.options=o,n&&t.value?(t.value=parseFloat(new A({...o,reverseFill:!1}).unformat(t.value)).toFixed(a),(u=i==null?void 0:i.props)!=null&&u.value&&(i.props.value=t.value)):t.value&&!isNaN(Number(t.value))&&(t.value=t.value.replace(".",f)),_(t,i,{force:o.prefill,clean:!0,emit:!1})},mounted:t=>{t=R(t);const e=t.parentElement||t,s=i=>{i.target===t&&Ee(i)};e.addEventListener("input",s,!0),t.onblur=i=>Ne(i),t.onkeydown=i=>ke(i,t),t.cleanup=()=>e.removeEventListener("input",s,!0)},updated:(t,{value:e,oldValue:s,modifiers:i},o)=>{t=R(t);const n=t.options;t.options=Object.assign(n,e,i),e!==s?_(t,o,{force:!0,clean:!0}):_(t,o)},unmounted:t=>{R(t).cleanup()}};const g=Q(q);var P=ee({name:"VueNumber",directives:{number:we},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],required:!1,default:g.nullValue},masked:{type:Boolean,default:!1},reverseFill:{type:Boolean,default:g.reverseFill},prefill:{type:Boolean,default:g.prefill},precision:{type:Number,default:()=>g.precision},minimumFractionDigits:{type:Number,default:()=>g.minimumFractionDigits},decimal:{type:String,default:()=>g.decimal},min:{type:Number,default:()=>g.min},max:{type:Number,default:()=>g.max},separator:{type:String,default:()=>g.separator},prefix:{type:String,default:()=>g.prefix},suffix:{type:String,default:()=>g.suffix}},emits:["update:model-value","input:model-value"],setup(t,{emit:e}){const s=T(t.modelValue),i=T(""),o=O(()=>({...t})),n=O(()=>t.masked?s.value:i.value),a=u=>{const{target:m}=u;s.value=m.value,i.value=m.unmasked,e("input:model-value",n.value)},f=()=>{e("update:model-value",n.value)};return H(()=>t.modelValue,(u,m)=>{u!==m&&(s.value=u)}),{config:o,maskedValue:s,unmaskedValue:i,input:a,change:f}}});const Ce=["value"];function Fe(t,e,s,i,o,n){const a=te("number");return J((d(),v("input",{type:"text",autocomplete:"off",value:t.maskedValue,class:"v-number vue-number-format",onChange:e[0]||(e[0]=(...f)=>t.change&&t.change(...f)),onInput:e[1]||(e[1]=(...f)=>t.input&&t.input(...f))},null,40,Ce)),[[a,t.config]])}P.render=Fe;P.__file="src/component.vue";const _e={class:"flex flex-col max-w-140"},Se={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},Ve=p("div",{class:"p-2 text-right"},"FROM",-1),je={class:"flex-1"},Re=p("div",{class:"p-2 text-right"},"TO ",-1),Oe=p("div",{class:"flex-1"},null,-1),$e={key:1,class:"flex flex-col"},De={class:"font-bold"},Me={class:"flex flex-wrap gap-3"},Be=p("div",{class:"p-2 text-right"},"WALLET",-1),qe=p("div",{class:"p-2 text-right"},"Quantity",-1),Le=p("div",{class:"p-2 text-right"},"Quality",-1),Pe=p("div",{class:"p-2 text-right self-start"},"Wish ",-1),Te={class:"p-2 text-right"},Ge={key:0,class:"w-full"},Ie={key:1,class:"flex flex-wrap gap-1"},Ue=["onClick"],We={class:"font-bold"},He=p("div",{class:"p-2 text-right"},"ROOM",-1),Je={key:2,class:"flex"},Ae={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},tt={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(t,{emit:e}){const s=t,i={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},{user:o}=ae(),{gift:n,cleanGift:a,propose:f,proposed:u,hash:m,valid:E}=le(s.gift),{guests:w,count:h}=ue(),{project:b}=ce(se(n,"project")),{projects:x}=pe(),N=me();H(()=>n.wallet,k=>{k&&(n.ql=k.currency)});const K=O(()=>{const k=fe(),l=G({});return Object.keys(w).forEach(F=>{k.user(F).get("wallets").on((c,$)=>{l[F]=w[F]})}),l}),X=O(()=>{const k=G({});return Object.keys(x).forEach(l=>{l.includes(n.to)&&(k[l]=x[l])}),k});return(k,l)=>{const F=ne("gift-wallets");return d(),v("div",_e,[p("div",Se,[Ve,p("div",je,[r(o).pub?(d(),C(r(M),{key:0,pub:r(o).pub},null,8,["pub"])):(d(),C(r(de),{key:1}))]),Re,r(n).to?(d(),C(r(M),{key:0,pub:r(n).to},{default:I(()=>[Oe,p("div",{class:"i-la-times mr-2",onClick:l[0]||(l[0]=c=>{r(n).to="",r(n).wallet=null})})]),_:1},8,["pub"])):(d(),v("div",$e,[p("div",De,"USER SELECT OF "+S(Object.keys(r(K)).length),1),p("div",Me,[(d(!0),v(V,null,U(r(w),c=>(d(),C(r(M),{key:c,pub:c.pub,onClick:$=>r(n).to=c.pub},null,8,["pub","onClick"]))),128))])])),r(n).to?(d(),v(V,{key:2},[Be,(d(),C(F,{key:r(n).to,pub:r(n).to,"active-wallet":r(n).wallet,onWallet:l[1]||(l[1]=c=>r(n).wallet=c),onClear:l[2]||(l[2]=c=>r(n).wallet=null)},null,8,["pub","active-wallet"])),r(n).wallet?(d(),v(V,{key:0},[qe,D(r(P),ie({modelValue:r(n).qn,"onUpdate:modelValue":l[3]||(l[3]=c=>r(n).qn=c)},i,{placeholder:"Quantity"}),null,16,["modelValue"]),Le,D(r(be),{class:"rounded-xl",modelValue:r(n).ql,"onUpdate:modelValue":l[4]||(l[4]=c=>r(n).ql=c),options:r(ve),"append-to-body":!0,placeholder:"Currency abbreviation or short object description",taggable:!0,"push-tags":!0},null,8,["modelValue","options"]),Pe,J(p("textarea",{class:"p-2","onUpdate:modelValue":l[5]||(l[5]=c=>r(n).wish=c),placeholder:"Wish"},null,512),[[re,r(n).wish]]),p("div",Te,[oe("PROJECT "),r(n).project?j("",!0):(d(),v("div",Ge,"SELECT"))]),r(n).project?(d(),C(r(he),{key:0,project:r(b),path:r(n).project},{default:I(()=>[p("div",{class:"i-la-times",onClick:l[6]||(l[6]=c=>r(n).project=null)})]),_:1},8,["project","path"])):(d(),v("div",Ie,[(d(!0),v(V,null,U(r(X),(c,$)=>(d(),v("div",{class:"p-2 rounded-xl cursor-pointer",key:$,style:W({backgroundColor:c.color}),onClick:Qe=>r(n).project=c.path},[p("div",We,S(c.title),1)],12,Ue))),128))])),He,D(r(ge)),r(E)?(d(),v("div",Je,[p("button",{class:"button w-full justify-center",onClick:l[7]||(l[7]=c=>{r(f)(),k.$emit("sent",r(m))})},"Propose")])):j("",!0),p("pre",Ae,S(r(a)),1),p("div",{class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition",style:W({backgroundColor:r(N).hex(r(m)||"")})},S(r(m)),5)],64)):j("",!0)],64)):j("",!0)])])}}};export{tt as default};
