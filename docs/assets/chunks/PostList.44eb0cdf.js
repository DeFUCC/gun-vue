import{h as p,g as D,o as t,c as o,k as s,t as b,l,e as n,b as v,H as k,w as g,T as h,r as w,F as N,D as F,aD as T,N as U,aK as V,aI as A}from"./framework.72a11bd5.js";import{a as H,aO as L,aP as x,aQ as Q,aR as R,aS as j}from"./components.ede6c998.js";import"../app.6f46eec2.js";import"./theme.091da883.js";const E={class:"flex flex-col z-10 items-start justify-items-stretch"},G={key:0,class:"flex flex-wrap items-center p-2 text-xl sticky z-100 top-0 shadow-lg bg-light-700 w-full"},I=s("div",{class:"flex-1"},null,-1),K={class:"p-2 font-bold mx-2"},O={class:"flex flex-col bg-dark-50 bg-opacity-20 backdrop-filter backdrop-blur-md flex-1 p-2 w-full gap-8"},q={key:0,class:"p-2 flex flex-wrap z-300 text-sm bg-light-300 bg-opacity-40 dark-bg-dark-500 rounded-2xl m-2 flex-1",style:{order:"-2147483647",flex:"1000 100%"}},J={key:1,class:"flex flex-wrap gap-2"},M={key:0,class:"i-la-plus"},W={key:1,class:"i-la-times"},X=s("div",{class:"ml-2 mr-1"},"Add",-1),Y=s("label",{class:"button",title:"Upload feed",for:"import-feed"},[s("div",{class:"i-la-file-upload"}),s("div",{class:"ml-2 mr-1"},"Upload")],-1),Z={key:0,class:"i-la-eye"},ee={key:1,class:"i-la-eye-slash"},te=s("div",{class:"ml-2"},"Show hidden",-1),se={key:0,class:"i-la-file-download"},le={key:1,class:"i-la-redo-alt animate-spin"},ae=s("div",{class:"ml-2 mr-1"},"Download",-1),oe={key:1,class:"p-2 flex items-center gap-2",style:{order:"-2147483647",flex:"1000 100%"}},ie={class:"flex flex-wrap gap-4 p-2"},pe={__name:"PostList",props:{tag:{type:String,default:""},header:{type:Boolean,default:!0}},emits:["close","browse","user"],setup(i,{emit:_}){const{user:u}=H(),C=i,$=_,{posts:m,backlinks:ne,countPosts:y,countBacklinks:de,downloadPosts:P,downloading:S,uploadPosts:z}=L(C.tag),r=p();p(!1);const c=p(!1),B=D(()=>{const d={};for(let e in m){const a=x(m[e]);(c.value||a>0)&&(d[e]=m[e])}return d});return(d,e)=>(t(),o("div",E,[i.header?(t(),o("div",G,[s("div",{class:"text-xl ml-2 font-bold cursor-pointer",style:{flex:"1 100px"},onClick:e[0]||(e[0]=a=>d.$emit("close"))},"# "+b(i.tag),1),I,s("div",K,b(l(y)),1)])):n("",!0),s("div",O,[l(u).pub?(t(),o("div",q,[i.header?(t(),v(l(Q),{key:0})):n("",!0),l(u).pub?(t(),o("div",J,[s("button",{class:"button",onClick:e[1]||(e[1]=a=>r.value=!r.value)},[k(h,{name:"fade",mode:"out-in"},{default:g(()=>[r.value?(t(),o("div",W)):(t(),o("div",M))]),_:1}),X]),Y,s("button",{class:"button",onClick:e[2]||(e[2]=a=>c.value=!c.value)},[c.value?(t(),o("div",Z)):(t(),o("div",ee)),te]),0<l(y)?(t(),o("button",{key:0,class:"button",title:"Download feed",onClick:e[3]||(e[3]=a=>l(P)())},[l(S)?(t(),o("div",le)):(t(),o("div",se)),ae])):n("",!0),w(d.$slots,"default")])):n("",!0),s("input",{class:"hidden",id:"import-feed",ref:"file",tabindex:"-1",type:"file",accept:".zip",multiple:"",onChange:e[4]||(e[4]=a=>l(z)(a.target.files))},null,544),k(h,{name:"fade"},{default:g(()=>[r.value?(t(),v(l(R),{key:0,tag:i.tag,onClose:e[5]||(e[5]=a=>r.value=!1)},null,8,["tag"])):n("",!0)]),_:1})])):n("",!0),l(u).pub?n("",!0):(t(),o("div",oe,[s("button",{class:"button",onClick:e[6]||(e[6]=a=>l(u).auth=!0)},"Authorize to post here"),w(d.$slots,"default")]))]),s("div",ie,[k(A,{name:"list"},{default:g(()=>[(t(!0),o(N,null,F(B.value,(a,f)=>T((t(),v(l(j),{class:"max-w-xl flex-1 shadow-xl",key:f,style:U({order:-l(x)(a),opacity:l(x)(a)>0?1:.3}),hash:f,tag:i.tag,authors:a,onClick:re=>$("browse",f)},null,8,["style","hash","tag","authors","onClick"])),[[V,i.tag!=f]])),128))]),_:1})])]))}};export{pe as default};
