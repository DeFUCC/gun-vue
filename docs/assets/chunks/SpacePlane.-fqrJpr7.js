import{s as it,ao as yt,y as ot,z as bt,R as wt,k as o,d as _t,v as St,av as xt,aW as Tt,aq as It,D as Dt,o as b,c as S,P as Et,e as Ct,I as q,j as v,t as kt,F as B,E as R,n as Pt,b as j,M as Ot,w as Mt}from"./framework._p70gbZ2.js";import{a as Nt,m as $t,br as Lt,b3 as At,bs as zt,o as D,bt as Gt,bu as Ut,U as Kt,bv as Bt,V as Rt}from"./components.C6Mx1Nia.js";import"./theme.e8fDgIKL.js";function jt(){try{return"constructor"in GestureEvent}catch{return!1}}function at(){return typeof window<"u"&&"ontouchstart"in window}function lt(e){return"pointerId"in e?null:e.type==="touchend"?e.changedTouches:e.targetTouches}function ct(e){return Array.from(lt(e)).map(t=>t.identifier)}function J(e){const t="buttons"in e?e.buttons:0,{shiftKey:s,altKey:n,metaKey:r,ctrlKey:i}=e;return{buttons:t,shiftKey:s,altKey:n,metaKey:r,ctrlKey:i}}const Vt=e=>e;function Q(e,t=Vt){const s=lt(e),{clientX:n,clientY:r}=s?s[0]:e;return t([n,r])}function ut(){}function ft(...e){return e.length===0?ut:e.length===1?e[0]:function(){var t;for(let s of e)t=s.apply(this,arguments)||t;return t}}function x(e,t){if(e===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function Z(e,...t){return typeof e=="function"?e(...t):e}function M(e){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ut,canceled:!1,memo:void 0,args:void 0,...e}}function W(){const e={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=M({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),s=M({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),n=M({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),r=M({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=M({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:e,drag:t,pinch:s,wheel:n,move:r,scroll:i}}var Wt=Object.defineProperty,Ft=(e,t,s)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t,s)=>(Ft(e,typeof t!="symbol"?t+"":t,s),s);class Yt{constructor(t){this.classes=t,g(this,"nativeRefs"),g(this,"config"),g(this,"handlers"),g(this,"state"),g(this,"timeouts"),g(this,"domListeners"),g(this,"windowListeners"),g(this,"pointerIds",new Set),g(this,"touchIds",new Set),g(this,"supportsTouchEvents",at()),g(this,"supportsGestureEvents",jt()),g(this,"bind",(...s)=>{const n={};for(let r of this.classes)new r(this,s).addBindings(n);for(let r in this.nativeRefs)w(n,r,i=>this.nativeRefs[r]({...this.state.shared,event:i,args:s}));return this.config.domTarget?Zt(this,n):te(this,n)}),g(this,"clean",()=>{const{eventOptions:s,domTarget:n}=this.config,r=o(n);r&&N(r,dt(this.domListeners),s),Object.values(this.timeouts).forEach(clearTimeout),qt(this)}),g(this,"reset",()=>{this.state=W()}),this.classes=t,this.state=W(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function Ht(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(ct(t))}function Xt(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):ct(t).forEach(s=>e.touchIds.delete(s))}function qt(e){const{config:{window:t,eventOptions:s},windowListeners:n}=e,r=o(t);if(r){for(let i in n){const a=n[i];N(r,a,s)}e.windowListeners={}}}function Jt({config:e,windowListeners:t},s,n=e.eventOptions){const r=o(e.window);r&&(N(r,t[s],n),delete t[s])}function Qt({config:e,windowListeners:t},s,n=[],r=e.eventOptions){const i=o(e.window);i&&(N(i,t[s],r),ht(i,t[s]=n,r))}function Zt({config:e,domListeners:t},s){const{eventOptions:n,domTarget:r}=e,i=o(r);if(!i)throw new Error("domTarget must be defined");N(i,dt(t),n);for(let[a,l]of Object.entries(s)){const h=a.slice(2).toLowerCase();t.push([h,ft(...l)])}ht(i,t,n)}function te({config:e},t){const s={},n=e.eventOptions.capture?"Capture":"";for(let[r,i]of Object.entries(t)){const a=Array.isArray(i)?i:[i],l=r+n;s[l]=ft(...a)}return s}function dt(e=[]){return e.splice(0,e.length)}function w(e,t,s){e[t]||(e[t]=[]),e[t].push(s)}function ht(e,t=[],s={}){if(e)for(let[n,r]of t)e.addEventListener(n,r,s)}function N(e,t=[],s={}){if(e)for(let[n,r]of t)e.removeEventListener(n,r,s)}function F(e,t){return e.map((s,n)=>s+t[n])}function pt(e,t){return e.map((s,n)=>s-t[n])}function Y(e){return Math.hypot(...e)}function ee(e,t,s){const n=Y(t),r=n===0?0:1/n,i=s===0?0:1/s,a=i*n,l=t.map(c=>i*c),h=t.map(c=>r*c),f=Y(e);return{velocities:l,velocity:a,distance:f,direction:h}}function H(e){return Math.sign?Math.sign(e):+(e>0)-+(e<0)||+e}function se(e,t,s){return Math.max(t,Math.min(e,s))}function ne(e,t){return Math.pow(e,t*5)}function tt(e,t,s){return t===0||Math.abs(t)===1/0?ne(e,s):e*t*s/(t+s*e)}function et(e,t,s,n=.15){return n===0?se(e,t,s):e<t?-tt(t-e,s-t,n)+t:e>s?+tt(e-s,s-t,n)+s:e}var re=Object.defineProperty,ie=(e,t,s)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,A=(e,t,s)=>(ie(e,typeof t!="symbol"?t+"":t,s),s);const E=new Map,oe=e=>e;class ae{constructor(t,s=[]){this.controller=t,this.args=s,A(this,"debounced",!0),A(this,"setTimeout",(n,r=140,...i)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(n,r,...i)}),A(this,"clearTimeout",()=>{clearTimeout(this.controller.timeouts[this.stateKey])}),A(this,"fireGestureHandler",(n=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!n&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const h=this.state.active,f=this.state._active;this.state.active=f,this.state.first=f&&!h,this.state.last=h&&!f,this.controller.state.shared[this.ingKey]=f}const r=this.controller.pointerIds.size||this.controller.touchIds.size,i=this.controller.state.shared.buttons>0||r>0,a={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:r,down:i},l=this.handler(a);return this.state.memo=l!==void 0?l:this.state.memo,a}),this.controller=t,this.args=s}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||oe}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,s){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:s,threshold:n}=this.config,{_bounds:r,_initial:i,_active:a,_intentional:l,lastOffset:h,movement:f}=this.state,c=this.getInternalMovement(t,this.state),T=this.transform(n).map(Math.abs),C=l[0]===!1?st(c[0],T[0]):l[0],k=l[1]===!1?st(c[1],T[1]):l[1],_=this.checkIntentionality([C,k],c);if(_._blocked)return{..._,_movement:c,delta:[0,0]};const y=_._intentional,G=c;let I=[y[0]!==!1?c[0]-y[0]:0,y[1]!==!1?c[1]-y[1]:0];const P=F(I,h),O=a?s:[0,0];return I=nt(r,F(I,i),O),{..._,intentional:y[0]!==!1||y[1]!==!1,_initial:i,_movement:G,movement:I,values:t,offset:nt(r,P,O),delta:pt(I,f)}}clean(){this.clearTimeout()}}function st(e,t){return Math.abs(e)>=t?H(e)*t:!1}function nt(e,[t,s],[n,r]){const[[i,a],[l,h]]=e;return[et(t,i,a,n),et(s,l,h,r)]}function V({state:e},t,s){const{timeStamp:n,type:r}=t,i=e.values,a=s?0:n-e.startTime;return{_lastEventType:r,event:t,timeStamp:n,elapsedTime:a,previous:i}}function le({state:e,config:t,stateKey:s,args:n},r,i){const a=e.offset,l=i.timeStamp,{initial:h,bounds:f}=t,c={...W()[s],_active:!0,args:n,values:r,initial:r,offset:a,lastOffset:a,startTime:l};return{...c,_initial:Z(h,c),_bounds:Z(f,c)}}class ce extends ae{getInternalMovement(t,s){return pt(t,s.initial)}checkIntentionality(t,s){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[n,r]=s.map(Math.abs),i=this.state.axis||(n>r?"x":n<r?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:i}:i?this.config.axis&&i!==this.config.axis?{_intentional:t,_blocked:!0,axis:i}:(t[i==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}}getKinematics(t,s){const n=this.getMovement(t);if(!n._blocked){const r=s.timeStamp-this.state.timeStamp;Object.assign(n,ee(n.movement,n.delta,r))}return n}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}var ue=Object.defineProperty,fe=(e,t,s)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,p=(e,t,s)=>(fe(e,typeof t!="symbol"?t+"":t,s),s);const de=3;function rt(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}class he extends ce{constructor(){super(...arguments),p(this,"ingKey","dragging"),p(this,"stateKey","drag"),p(this,"setPointerCapture",t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:s,pointerId:n}=t;s&&"setPointerCapture"in s&&s.setPointerCapture(n),this.updateGestureState({_dragTarget:s,_dragPointerId:n})}),p(this,"releasePointerCapture",()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:s}=this.state;if(s&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(s)))try{t.releasePointerCapture(s)}catch{}}),p(this,"preventScroll",t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()}),p(this,"getEventId",t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId),p(this,"isValidEvent",t=>this.state._pointerId===this.getEventId(t)),p(this,"shouldPreventWindowScrollY",this.config.preventWindowScrollY&&this.controller.supportsTouchEvents),p(this,"setUpWindowScrollDetection",t=>{rt(t),Qt(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)}),p(this,"setUpDelayedDragTrigger",t=>{this.state._dragDelayed=!0,rt(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)}),p(this,"setStartState",t=>{const s=Q(t,this.transform);this.updateSharedState(J(t)),this.updateGestureState({...le(this,s,t),...V(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(s))}),p(this,"onDragStart",t=>{Ht(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))}),p(this,"onDragChange",t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let s;if(document.pointerLockElement){const{movementX:h,movementY:f}=t;s=F(this.transform([h,f]),this.state.values)}else s=Q(t,this.transform);const n=this.getKinematics(s,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&n.axis)if(n.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const r=J(t);this.updateSharedState(r);const i=V(this,t),a=Y(n._movement);let{_dragIsTap:l}=this.state;l&&a>=de&&(l=!1),this.updateGestureState({...i,...n,_dragIsTap:l}),this.fireGestureHandler()}),p(this,"onDragEnd",t=>{if(Xt(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const s=this.state._dragIsTap,[n,r]=this.state.velocities,[i,a]=this.state.movement,[l,h]=this.state._intentional,[f,c]=this.config.swipeVelocity,[T,C]=this.config.swipeDistance,k=this.config.swipeDuration,_={...V(this,t),...this.getMovement(this.state.values)},y=[0,0];_.elapsedTime<k&&(l!==!1&&Math.abs(n)>f&&Math.abs(i)>T&&(y[0]=H(n)),h!==!1&&Math.abs(r)>c&&Math.abs(a)>C&&(y[1]=H(r))),this.updateSharedState({buttons:0}),this.updateGestureState({..._,tap:s,swipe:y}),this.fireGestureHandler(this.config.filterTaps&&s===!0)}),p(this,"clean",()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),Jt(this.controller,this.stateKey)}),p(this,"onCancel",()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),wt(this.fireGestureHandler))}),p(this,"onClick",t=>{this.state._dragIsTap||t.stopPropagation()})}startDrag(t,s=!1){!this.state._active||this.state._dragStarted||(s||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(w(t,"onTouchStart",this.onDragStart),w(t,"onTouchMove",this.onDragChange),w(t,"onTouchEnd",this.onDragEnd),w(t,"onTouchCancel",this.onDragEnd)):(w(t,"onPointerDown",this.onDragStart),w(t,"onPointerMove",this.onDragChange),w(t,"onPointerUp",this.onDragEnd),w(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const s=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";w(t,s,this.onClick)}}}function pe(e,t){let s,n=[],r,i=!1;function a(...l){return i&&s===this&&t(l,n)||(r=e.apply(this,l),i=!0,s=this,n=l),r}return a}function z(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let s,n,r;if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!z(e[n],t[n]))return!1;return!0}let i;if(typeof Map=="function"&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;for(i=e.entries();!(n=i.next()).done;)if(!z(n.value[1],t.get(n.value[0])))return!1;return!0}if(typeof Set=="function"&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(n=i.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(r=Object.keys(e),s=r.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[n]))return!1;if(typeof Element<"u"&&e instanceof Element)return!1;for(n=s;n--!==0;)if(!(r[n]==="_owner"&&e.$$typeof)&&!z(e[r[n]],t[r[n]]))return!1;return!0}return e!==e&&t!==t}function me(e,t){try{return z(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}}function X(e={},t){const s={};for(const[n,r]of Object.entries(t))switch(typeof r){case"function":s[n]=r.call(s,e[n],n,e);break;case"object":s[n]=X(e[n],r);break;case"boolean":r&&(s[n]=e[n]);break}return s}const ge=180,ve=.15,ye=.5,be=50,we=250,_e={threshold(e=0){return x(e)},rubberband(e=0){switch(e){case!0:return x(ve);case!1:return x(0);default:return x(e)}},enabled(e=!0){return e},triggerAllEvents(e=!1){return e},initial(e=0){return typeof e=="function"?e:x(e)},transform:!0},mt={..._e,axis:!0,lockDirection(e=!1){return e},bounds(e={}){if(typeof e=="function")return i=>mt.bounds(e(i));const{left:t=-1/0,right:s=1/0,top:n=-1/0,bottom:r=1/0}=e;return[[t,s],[n,r]]}},Se=typeof window<"u"&&window.document&&window.document.createElement,xe={enabled(e=!0){return e},domTarget:!0,window(e=Se?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform:!0},Te={...mt,useTouch(e=!0){return e&&at()},preventWindowScrollY(e=!1){return e},threshold(e,t,{filterTaps:s=!1,lockDirection:n=!1,axis:r=void 0}){const i=x(e,s?3:n||r?1:0);return this.filterTaps=s,i},swipeVelocity(e=ye){return x(e)},swipeDistance(e=be){return x(e)},swipeDuration(e=we){return e},delay(e=0){switch(e){case!0:return ge;case!1:return 0;default:return e}}};function Ie(e){return X(e,xe)}function De(e={}){return X(e,Te)}function Ee({domTarget:e,eventOptions:t,window:s,enabled:n,...r}){const i=Ie({domTarget:e,eventOptions:t,window:s,enabled:n});return i.drag=De(r),i}function Ce(e,t,s={}){const n=ke(e),r=new Yt(n);return r.config=t,r.handlers=e,r.nativeRefs=s,yt()&&!t.manual&&(ot(r.bind),bt(r.clean)),r}function ke(e){const t=new Set;return e.drag&&t.add(E.get("drag")),e.wheel&&t.add(E.get("wheel")),e.scroll&&t.add(E.get("scroll")),e.move&&t.add(E.get("move")),e.pinch&&t.add(E.get("pinch")),e.hover&&t.add(E.get("hover")),t}function Pe(e,t={}){E.set("drag",he);const s=it();return s.value||(s.value=pe(Ee,me)),Ce({drag:e},s.value(t))}const Oe={class:"flex flex-col items-center"},Me=["viewBox"],Ne=v("defs",null,[v("filter",{id:"shadowButton",x:"-50%",height:"200%",width:"300%"},[v("feDropShadow",{dx:"0",dy:"3",stdDeviation:"3","flood-color":"#2225"})]),v("clipPath",{id:"mask",clipPathUnits:"objectBoundingBox"},[v("circle",{r:".5",cx:".5",cy:".5"})])],-1),$e=["transform"],Le=["innerHTML"],Ae=["x","y","viewBox"],ze=["x","y","width","height"],Ge={class:"link"},Ue=["x1","x2","y1","y2","stroke"],Ke=["transform"],Be={class:"mouse"},Re=["fill"],je={class:"arrows"},Ve={class:"guests"},He=_t({__name:"SpacePlane",props:{pad:{type:Number,default:50},coord:{type:String,default:""}},emits:["user","enter","leave","chat","post","update:coord"],setup(e,{emit:t}){const s=t,{user:n}=Nt();$t("deep");const{space:r,plane:i,pos:a,zoom:l,links:h,width:f,height:c,guests:T,guestCount:C,area:k,join:_,place:y,setStatus:G}=Lt({TIMEOUT:1e4});St(C,(m,d)=>{m>d?s("enter"):s("leave")});const I=At(m=>{y({x:m[0],y:m[1]}),s("update:coord",`${m[0]},${m[1]}`)},200);Pe(m=>{if(!(m.delta[0]&&m.delta[1])||U.ing)return;const[d,K]=m.delta;a[0]-=d,a[1]-=K,I(a)},{domTarget:i});const P=it(),{drauu:O,draw:U,loadCanvas:gt}=zt();return ot(()=>{O.mount(P.value,P.value.parentElement),gt()}),xt(()=>{console.log("activated")}),Tt(()=>{console.log("deactivated")}),It(()=>{O.unmount()}),(m,d)=>{const K=Dt("space-draw");return b(),S("div",Oe,[!o(r).joined&&o(n).is?(b(),S("div",{key:0,class:"text-2xl p-8 top-15vh cursor-pointer absolute rounded-3xl shadow-xl border-4",style:Et({borderColor:o(n).color}),onClick:d[0]||(d[0]=u=>{o(_)()})},"Click anywhere to join the space",4)):Ct("",!0),q(K,{class:"z-500"}),(b(),S("svg",{class:"h-full w-full z-200 bg-dark-100 bg-opacity-5 touch-none cursor-grab active-cursor-grabbing",ref_key:"plane",ref:i,xmlns:"http://www.w3.org/2000/svg",version:"1.1",baseProfile:"full","font-family":"Commissioner , sans-serif","text-anchor":"middle","dominant-baseline":"middle",viewBox:`${-e.pad+o(a)[0]-Number(o(f))/2} ${-e.pad+o(a)[1]-Number(o(c))/2} ${Number(o(f))*Number(o(l))+2*e.pad} ${Number(o(c))*Number(o(l))+2*e.pad}`,onClick:d[3]||(d[3]=u=>{o(n).is||(o(n).auth=!0)})},[Ne,v("text",{class:"text-xs","text-anchor":"end",fill:"currentColor",transform:`translate(${o(a)[0]+Number(o(f))/2-10} ${o(a)[1]-Number(o(c))/2+20})`},kt(o(a)),9,$e),(b(!0),S(B,null,R(o(T),u=>(b(),S("g",{class:"opacity-90",key:u.draw,innerHTML:u.draw},null,8,Le))),128)),(b(),S("svg",{class:Pt(["opacity-70",{"pointer-events-none":!o(U).enabled,"touch-none":o(U).enabled}]),ref_key:"paper",ref:P,x:o(a)[0]-Number(o(f))/2-e.pad,y:o(a)[1]-Number(o(c))/2-e.pad,viewBox:`${-e.pad+o(a)[0]-Number(o(f))/2} ${-e.pad+o(a)[1]-Number(o(c))/2} ${Number(o(f))+2*e.pad} ${Number(o(c))+2*e.pad}`},null,10,Ae)),v("rect",{ref_key:"area",ref:k,x:o(a)[0]-Number(o(f))/2,y:o(a)[1]-Number(o(c))/2,rx:"12",width:Number(o(f)),height:Number(o(c)),fill:"none",stroke:"#3333","stroke-width":"1"},null,8,ze),v("g",Ge,[v("line",{x1:o(a)[0],x2:o(r).my.mouse.x,y1:o(a)[1],y2:o(r).my.mouse.y,stroke:o(n).color,"stroke-dasharray":"6"},null,8,Ue)]),v("g",{class:"pointer",transform:`translate(${o(a)[0]} ${o(a)[1]})`},[v("g",Be,[v("circle",{style:{filter:"url(#shadowButton)"},fill:o(n).color,r:"8"},null,8,Re)])],8,Ke),v("g",je,[(b(!0),S(B,null,R(o(h),(u,$)=>(b(),j(o(Gt),{key:$,link:u,onUser:d[1]||(d[1]=L=>o(D).pub=L)},null,8,["link"]))),128))]),v("g",Ve,[(b(!0),S(B,null,R(o(T),u=>{var $,L;return b(),j(o(Ut),Ot({class:"cursor-pointer transition-all ease-out duration-600",key:u==null?void 0:u.pub,ref_for:!0},u,{style:{transform:`translate(${($=u==null?void 0:u.pos)==null?void 0:$.x}px, ${(L=u==null?void 0:u.pos)==null?void 0:L.y}px)`},onUpdateStatus:d[2]||(d[2]=vt=>o(G)(vt))}),null,16,["style"])}),128))])],8,Me)),q(o(Rt),{class:"z-4000",open:!!o(D).pub,onClose:d[8]||(d[8]=u=>o(D).pub=null)},{default:Mt(()=>[(b(),j(o(Kt),{class:"max-w-600px",key:o(D).pub,pub:o(D).pub,onUser:d[4]||(d[4]=u=>m.$emit("user",u)),onPost:d[5]||(d[5]=u=>m.$emit("post",String(o(Bt)(u)))),onChat:d[6]||(d[6]=u=>m.$emit("chat",o(D).pub)),onClose:d[7]||(d[7]=u=>o(D).pub=null)},null,8,["pub"]))]),_:1},8,["open"])])}}});export{He as default};
