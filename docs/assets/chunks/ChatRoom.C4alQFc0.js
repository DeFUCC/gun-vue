import{j as x,p as l,N as g,U as k,O as C,R as _}from"./components.uLkgiBox.js";import"./theme.CY_Hf4tR.js";import{u as v}from"./useChat.PC5nrG4x.js";import{d as S,q as w,aA as N,h as B,o as d,c as A,G as i,w as R,k as e,b as U,e as V,j as c,t as $,N as j,aX as z}from"./framework.BhkIoD7n.js";import{u as D}from"./useBackground.DM8FPnbf.js";const E={class:"px-4 py-6 flex flex-wrap items-center text-center"},q={class:"flex-1 ml-2 font-bold"},G={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 flex sticky bottom-0"},Q=S({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(f,{emit:H}){const r=f;let n;function m(){n||(n=new Audio(r.clickSound),n.volume=.1),n.play()}const{send:b,currentChat:u,sorted:p}=v();w(()=>r.topic,s=>{u.value=s},{immediate:!0}),N(p,(s,a)=>{if(s.length>a.length){m();const t=s.slice(-1)[0],{isSupported:o,notification:I,show:y,close:L,onClick:M,onShow:O,onError:T,onClose:W}=z({title:t==null?void 0:t.text,body:`${t==null?void 0:t.timestamp} by ${t==null?void 0:t.author}`,lang:"en",tag:"chat"});o.value&&y()}},{deep:!0});const h=B(()=>D({pub:x.pub,size:1200}));return(s,a)=>{var t;return d(),A("div",{class:"flex flex-col overflow-y-scroll",style:j([{flex:"1000 1 auto"},{...h.value}])},[i(e(k),{open:!!((t=e(l))!=null&&t.pub),onClose:a[0]||(a[0]=o=>e(l).pub="")},{default:R(()=>{var o;return[(o=e(l))!=null&&o.pub?(d(),U(e(g),{key:0,pub:e(l).pub},null,8,["pub"])):V("",!0)]}),_:1},8,["open"]),c("div",E,[c("div",q,$(e(u)),1)]),i(e(C),{messages:e(p)},null,8,["messages"]),c("div",G,[i(e(_),{class:"flex-auto",onSubmit:a[1]||(a[1]=o=>e(b)(o))})])],4)}}});export{Q as default};
