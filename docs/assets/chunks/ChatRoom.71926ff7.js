import"../app.ec2fd68a.js";import{K as h,b as g,L as k,p as l,N as C,U as w,O as S,R as v}from"./components.fd82ec8a.js";import{w as _,E as N}from"./theme.4cee43e1.js";import{d as B,w as E,x as L,o as d,c as R,L as i,H as U,e,G as V,I as $,E as c,t as z,N as A}from"./framework.29bd70f6.js";const D={class:"px-4 py-6 flex flex-wrap items-center text-center"},H={class:"flex-1 ml-2 font-bold"},I={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 flex sticky bottom-0"},Q=B({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(f,{emit:G}){const r=f;let n;function m(){n||(n=new Audio(r.clickSound),n.volume=.1),n.play()}const{send:b,currentChat:u,sorted:p}=h();E(()=>r.topic,a=>{u.value=a},{immediate:!0}),_(p,(a,s)=>{if(a.length>s.length){m();const t=a.slice(-1)[0],{isSupported:o,notification:K,show:y,close:M,onClick:O,onShow:T,onError:W,onClose:j}=N({title:t==null?void 0:t.text,body:`${t==null?void 0:t.timestamp} by ${t==null?void 0:t.author}`,lang:"en",tag:"chat"});o.value&&y()}},{deep:!0});const x=L(()=>g({pub:k.pub,size:1200}));return(a,s)=>{var t;return d(),R("div",{class:"flex flex-col overflow-y-scroll",style:A([{flex:"1000 1 auto"},{...e(x)}])},[i(e(w),{open:!!((t=e(l))!=null&&t.pub),onClose:s[0]||(s[0]=o=>e(l).pub="")},{default:U(()=>{var o;return[(o=e(l))!=null&&o.pub?(d(),V(e(C),{key:0,pub:e(l).pub},null,8,["pub"])):$("",!0)]}),_:1},8,["open"]),c("div",D,[c("div",H,z(e(u)),1)]),i(e(S),{messages:e(p)},null,8,["messages"]),c("div",I,[i(e(v),{class:"flex-auto",onSubmit:s[1]||(s[1]=o=>e(b)(o))})])],4)}}});export{Q as default};
