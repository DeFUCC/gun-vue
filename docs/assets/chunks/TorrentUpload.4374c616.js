import{A as b,B as y}from"./theme.4cee43e1.js";import{H as w,a8 as C,a9 as S}from"./components.fd82ec8a.js";import"../app.ec2fd68a.js";import{d as $,f as h,x as U,o as i,c,E as o,t as m,e as t,I as p,G as v,F as B,U as H,w as E}from"./framework.29bd70f6.js";const F={class:"flex flex-col gap-4 p-4"},L={class:"p-2 flex flex-wrap gap-2 bg-light-100 dark-bg-dark-400 rounded cursor-pointer"},D=o("div",{class:"font-bold"},"Upload a file",-1),N=o("div",{class:"flex-1"},null,-1),R={class:"flex flex-wrap gap-2"},T={key:0,class:"flex flex-col gap-2"},V=o("div",{class:"text-xl"},"Share the torrent",-1),A={class:"font-mono text-sm"},G=["href"],I=o("div",{class:"i-la-link"},null,-1),Q=o("div",{class:"p-0"},"Download URL",-1),j=[I,Q],q=o("div",{class:"i-la-copy"},null,-1),z={class:"p-0"},J=o("div",{class:"i-la-share"},null,-1),K=o("div",{class:"p-0"}," Share",-1),M=[J,K],oo=$({__name:"TorrentUpload",emits:["uploaded"],setup(O,{emit:P}){const r=h();h();function g(s){var a;const{torrent:e}=S((a=s==null?void 0:s.target)==null?void 0:a.files);E(e,async l=>{r.value=l,console.log(l)})}const d=U(()=>{var e,a,l;if(!((e=r.value)!=null&&e.infoHash))return"";let s=new URL((a=window==null?void 0:window.location)==null?void 0:a.href);return`${s.protocol}//${s.hostname}${s.port?`:${s.port}`:""}/#/file/${(l=r.value)==null?void 0:l.infoHash}`}),u=b({source:d}),{share:k,isSupported:x}=y();return(s,e)=>{var a,l,_;return i(),c("div",F,[o("label",L,[D,N,o("input",{type:"file",accept:"image/*",onChange:e[0]||(e[0]=n=>g(n))},null,32)]),o("div",R,[r.value?(i(),c("div",T,[V,o("div",A,m((a=r.value)==null?void 0:a.infoHash),1),o("a",{class:"gap-2 button underline font-bold break-all",href:t(d),target:"_blank"},j,8,G),t(u).isSupported.value?(i(),c("button",{key:0,class:"p-2 button gap-2",onClick:e[1]||(e[1]=n=>t(u).copy())},[q,o("div",z,m((l=t(u))!=null&&l.copied.value?"Copied!":"Copy"),1)])):p("",!0),t(x)?(i(),c("button",{key:1,class:"p-2 button gap-2",onClick:e[2]||(e[2]=n=>{var f;return t(k)({title:(f=r.value)==null?void 0:f.name,url:t(d)})})},M)):p("",!0)])):p("",!0),t(d)?(i(),v(t(w),{key:1,data:t(d)},null,8,["data"])):p("",!0)]),(i(!0),c(B,null,H((_=r.value)==null?void 0:_.files,n=>(i(),v(t(C),{key:n==null?void 0:n.name,file:n},null,8,["file"]))),128))])}}});export{oo as default};
