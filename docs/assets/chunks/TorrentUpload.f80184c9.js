import{E as y,F as w}from"./theme.8f3304ee.js";import{E as C,a5 as S,a6 as $,n as U,a as E}from"./components.5b1037ab.js";import"../app.0da7a9c9.js";import{d as H,f,x as B,o as i,c,E as e,t as v,e as d,I as p,G as m,F,U as L,w as D}from"./framework.088f8093.js";const G={class:"flex flex-col gap-4 p-4"},N={class:"p-2 flex flex-wrap gap-2 bg-light-100 dark-bg-dark-400 rounded cursor-pointer"},R=e("div",{class:"font-bold"},"Share a file via torrent",-1),T=e("div",{class:"flex-1"},null,-1),V={class:"flex flex-wrap gap-2"},I={key:0,class:"flex flex-col gap-2"},Q=e("div",{class:"text-xl"},"Share the torrent",-1),j={class:"font-mono text-sm"},q=["href"],z=e("div",{class:"i-la-link"},null,-1),A=e("div",{class:"p-0"},"Download URL",-1),J=[z,A],K=e("div",{class:"i-la-copy"},null,-1),M={class:"p-0"},O=e("div",{class:"i-la-share"},null,-1),P=e("div",{class:"p-0"}," Share",-1),W=[O,P],oe=H({__name:"TorrentUpload",emits:["uploaded"],setup(X,{emit:g}){const l=f();f();function k(t){var a;const{torrent:s}=$((a=t==null?void 0:t.target)==null?void 0:a.files);U();const{user:n}=E();D(s,async r=>{l.value=r;const o={infoHash:r.infoHash,length:r.length,name:r.name,author:n.pub};g("uploaded",o)})}const u=B(()=>{var s,n,a;if(!((s=l.value)!=null&&s.infoHash))return"";let t=new URL((n=window==null?void 0:window.location)==null?void 0:n.href);return`${t.protocol}//${t.hostname}${t.port?`:${t.port}`:""}/#/files/${(a=l.value)==null?void 0:a.infoHash}`}),_=y({source:u}),{share:x,isSupported:b}=w();return(t,s)=>{var n,a,r;return i(),c("div",G,[e("label",N,[R,T,e("input",{type:"file",accept:"image/*",onChange:s[0]||(s[0]=o=>k(o))},null,32)]),e("div",V,[l.value?(i(),c("div",I,[Q,e("div",j,v((n=l.value)==null?void 0:n.infoHash),1),e("a",{class:"gap-2 button underline font-bold break-all",href:u.value,target:"_blank"},J,8,q),d(_).isSupported.value?(i(),c("button",{key:0,class:"p-2 button gap-2",onClick:s[1]||(s[1]=o=>d(_).copy())},[K,e("div",M,v((a=d(_))!=null&&a.copied.value?"Copied!":"Copy"),1)])):p("",!0),d(b)?(i(),c("button",{key:1,class:"p-2 button gap-2",onClick:s[2]||(s[2]=o=>{var h;return d(x)({title:(h=l.value)==null?void 0:h.name,url:u.value})})},W)):p("",!0)])):p("",!0),u.value?(i(),m(d(C),{key:1,data:u.value},null,8,["data"])):p("",!0)]),(i(!0),c(F,null,L((r=l.value)==null?void 0:r.files,o=>(i(),m(d(S),{key:o==null?void 0:o.name,file:o},null,8,["file"]))),128))])}}});export{oe as default};
