import{x as V,f as P,w as _,J as z,o as n,c as i,E as a,e as t,G as D,I as b,t as g,L as u,N as E,at as L,au as S}from"./framework.e76a7413.js";import{a as G,F as H,ad as I,aA as A,aY as U,aZ as J,a_ as O}from"./components.ff545abb.js";import"../app.1dbdb34a.js";import{o as Y}from"./theme.7b41b406.js";const Z={class:"flex flex-col max-w-65ch"},q=["value"],K={class:"rounded p-2 bg-light-100 bg-opacity-80 dark-bg-dark-300 dark-bg-opacity-60 flex items-center"},Q={class:"flex flex-col"},R={class:"flex items-center gap-2"},W={class:"capitalize font-mono text-xs"},X={class:"px-2 px-1 bg-light-300 dark-bg-dark-300 rounded-lg font-mono text-xs"},tt={class:"px-2 px-1 bg-light-700 dark-bg-dark-700 rounded-lg font-mono text-xs mr-auto"},et=a("div",{class:"flex-1"},null,-1),ot={class:"flex flex-col gap-2 px-4 bg-light-200 dark-bg-dark-400 relative"},st=["innerHTML"],at={class:"text-xs max-w-full overflow-scroll"},ut={__name:"ProjectPage",props:{path:{type:String,default:""}},emits:["gift","user"],setup(r,{emit:lt}){const m=r,{user:$}=G(),T=H(),{project:s,updateField:d,updateCover:B}=I(m.path),l=V(()=>m.path.includes($.pub)),x=P(!1),c=P(s.content);_(()=>s.content,p=>{c.value=p});const M=Y(d,1e3);return(p,e)=>{var v,f,k,y,h,F,j,w,C;const N=z("account-badge");return n(),i("div",Z,[a("div",{class:"p-2 relative",style:E({background:`url(${t(s).cover}) center`,backgroundColor:(v=t(s))==null?void 0:v.color,paddingTop:(f=t(s))!=null&&f.cover||(k=t(s))!=null&&k.color?"220px":"60px"})},[t(l)?(n(),D(t(A),{key:0,class:"absolute top-2",onUpdate:e[0]||(e[0]=o=>t(B)(o))})):b("",!0),t(l)?(n(),i("input",{key:1,class:"absolute top-4 right-4",type:"color",value:(y=t(s))==null?void 0:y.color,onInput:e[1]||(e[1]=o=>t(d)("color",o.target.value))},null,40,q)):b("",!0),a("div",K,[a("div",Q,[a("div",R,[a("div",W,g((h=t(s))==null?void 0:h.type),1),a("div",X,g((F=t(s))==null?void 0:F.id),1),a("div",tt,g((j=t(s))==null?void 0:j.status),1)]),u(t(U),{class:"text-2xl font-bold",text:(w=t(s))==null?void 0:w.title,editable:t(l),onUpdate:e[2]||(e[2]=o=>t(d)("title",o))},null,8,["text","editable"]),u(t(U),{class:"text-md",text:(C=t(s))==null?void 0:C.description,editable:t(l),onUpdate:e[3]||(e[3]=o=>t(d)("description",o))},null,8,["text","editable"])]),et,u(N,{pub:r.path.slice(-87),onClick:e[4]||(e[4]=o=>p.$emit("user",r.path.slice(-87)))},null,8,["pub"])])],4),a("div",ot,[t(l)?(n(),i("div",{key:0,class:"i-la-pen cursor-pointer text-2xl absolute top-2 right-2 z-2",onClick:e[5]||(e[5]=o=>x.value=!x.value)})):b("",!0),!x.value||!t(l)?(n(),i("div",{key:1,class:"p-2 text-base prose prose-truegray dark-prose-light dark-bg-dark-400",innerHTML:t(T).render(c.value||"")},null,8,st)):L((n(),i("textarea",{key:2,class:"dark-bg-dark-400","onUpdate:modelValue":[e[6]||(e[6]=o=>c.value=o),e[7]||(e[7]=o=>t(M)("content",o))]},null,512)),[[S,c.value]]),a("pre",at,g(Object.keys(t(s))),1)]),u(t(J),{path:r.path,enabled:!!t(s).funding,onEnable:e[8]||(e[8]=o=>t(d)("funding","true")),onGift:e[9]||(e[9]=o=>p.$emit("gift",o))},null,8,["path","enabled"]),u(t(O),{source:r.path},null,8,["source"])])}}};export{ut as default};
