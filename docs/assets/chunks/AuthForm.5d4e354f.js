import{d as h,f as i,w as b,o as d,c as r,E as s,at as u,au as c,I as f,L as p,e as y,H as k,T as g,X as w}from"./framework.e76a7413.js";import{v as N,w as C,a as S,Q as V,S as E,x as L}from"./components.ff545abb.js";import"../app.1dbdb34a.js";import"./theme.7b41b406.js";const T={class:"flex flex-col my-4 flex-1 items-center bg-light-700 dark-bg-dark-50 rounded-3xl p-4 shadow-lg"},A=s("div",{class:"font-bold text-xl"},"I already have an account",-1),B=s("div",{class:"text-md"},"Login with a saved key",-1),P={class:"flex"},Q=s("div",{class:"i-la-key text-xl"},null,-1),U=s("div",{class:"p-1 ml-1 font-bold"},"Paste",-1),q=[Q,U],F=w('<label class="button m-2 cursor-pointer flex items-center" for="qr-input"><div class="i-la-qrcode text-xl"></div><div class="p-1 ml-1 font-bold">QR</div></label><label class="button m-2 cursor-pointer flex items-center" for="json-input"><div class="i-la-file-code text-xl"></div><div class="p-1 ml-1 font-bold">JSON</div></label>',2),I={key:0,class:"flex"},J=s("div",{class:"i-la-sign-in-alt"},null,-1),O=[J],$={class:"hidden"},D={class:"flex flex-wrap"},z=h({__name:"AuthForm",setup(H){const n=i("pass"),a=i(),o=i(null);function v(t){n.value!=t?n.value=t:n.value=null}b(a,t=>{console.log(t),t&&typeof t=="string"&&t.substring(0,3)=="SEA"&&(o.value=""),typeof t=="string"&&t.includes("#/auth/")&&(t=N(t));let e=C(t);e!=null&&e.pub&&(e!=null&&e.priv)?(x(e),a.value=""):console.log("No valid pair")});const{auth:x}=S();async function m(){a.value=await E.decrypt(a.value,o.value)}function _(t){var e;L((e=t.target)==null?void 0:e.files,l=>a.value=l)}return(t,e)=>(d(),r("div",T,[A,B,s("div",P,[s("button",{class:"button m-2 cursor-pointer flex items-center",onClick:e[0]||(e[0]=l=>v("key"))},q),F]),o.value!==null?(d(),r("form",I,[u(s("input",{class:"py-1 px-4 m-1 rounded-xl","onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),autofocus:"",type:"text",placeholder:"Enter the password"},null,512),[[c,o.value]]),s("button",{class:"button text-2xl",type:"submit",onClick:e[2]||(e[2]=l=>m())},O)])):f("",!0),s("div",$,[p(y(V),{onLoaded:e[3]||(e[3]=l=>a.value=l)}),s("input",{id:"json-input",ref:"file",tabindex:"-1",type:"file",accept:"application/json",onChange:e[4]||(e[4]=l=>_(l))},null,544)]),s("div",D,[p(g,{name:"fade"},{default:k(()=>[n.value=="key"?u((d(),r("textarea",{class:"p-2 text-sm flex-1 w-full dark-bg-dark-200",key:"text","onUpdate:modelValue":e[5]||(e[5]=l=>a.value=l),rows:"6",cols:"40",placeholder:"Paste your key pair here"},null,512)),[[c,a.value]]):f("",!0)]),_:1})])]))}});export{z as default};
