import{j as x,p as l,N as g,U as k,O as v,R as C}from"./components.BVdgfkYk.js";import"./theme.BDQwQt02.js";import{u as _}from"./useChat.DW6oITF9.js";import{d as S,v as w,az as B,h as N,o as d,c as V,I as i,w as z,k as e,b as R,e as U,j as c,t as $,P as j,aV as A}from"./framework.HF1qYBJ2.js";import{u as D}from"./useBackground.3hrntDSg.js";const E={class:"px-4 py-6 flex flex-wrap items-center text-center"},I={class:"flex-1 ml-2 font-bold"},H={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 flex sticky bottom-0"},X=S({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(f,{emit:L}){const r=f;let n;function m(){n||(n=new Audio(r.clickSound),n.volume=.1),n.play()}const{send:b,currentChat:u,sorted:p}=_();w(()=>r.topic,s=>{u.value=s},{immediate:!0}),B(p,(s,a)=>{if(s.length>a.length){m();const t=s.slice(-1)[0],{isSupported:o,notification:M,show:y,close:O,onClick:P,onShow:T,onError:W,onClose:q}=A({title:t==null?void 0:t.text,body:`${t==null?void 0:t.timestamp} by ${t==null?void 0:t.author}`,lang:"en",tag:"chat"});o.value&&y()}},{deep:!0});const h=N(()=>D({pub:x.pub,size:1200}));return(s,a)=>{var t;return d(),V("div",{class:"flex flex-col overflow-y-scroll",style:j([{flex:"1000 1 auto"},{...h.value}])},[i(e(k),{open:!!((t=e(l))!=null&&t.pub),onClose:a[0]||(a[0]=o=>e(l).pub="")},{default:z(()=>{var o;return[(o=e(l))!=null&&o.pub?(d(),R(e(g),{key:0,pub:e(l).pub},null,8,["pub"])):U("",!0)]}),_:1},8,["open"]),c("div",E,[c("div",I,$(e(u)),1)]),i(e(v),{messages:e(p)},null,8,["messages"]),c("div",H,[i(e(C),{class:"flex-auto",onSubmit:a[1]||(a[1]=o=>e(b)(o))})])],4)}}});export{X as default};
