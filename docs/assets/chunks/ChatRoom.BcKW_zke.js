import"./theme.zyIK20Is.js";import{R as x,j as g,p as l,X as k,Y as _,Z as v,_ as C,$ as S}from"./components.DvunW5qa.js";import{u as w}from"./useChat.D9B42BtX.js";import{u as B}from"./useBackground.B02xPUTO.js";import{d as N,v as $,h as R,o as d,c as V,I as i,w as j,k as e,b as z,e as A,j as c,t as D,P as E}from"./framework.B82iRX0g.js";const I={class:"px-4 py-6 flex flex-wrap items-center text-center"},U={class:"flex-1 ml-2 font-bold"},H={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 flex sticky bottom-0"},K=N({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(f,{emit:L}){const r=f;let n;function m(){n||(n=new Audio(r.clickSound),n.volume=.1),n.play()}const{send:b,currentChat:u,sorted:p}=w();$(()=>r.topic,a=>{u.value=a},{immediate:!0}),x(p,(a,s)=>{if(a.length>s.length){m();const t=a.slice(-1)[0],{isSupported:o,notification:M,show:y,close:P,onClick:T,onShow:W,onError:X,onClose:Y}=S({title:t==null?void 0:t.text,body:`${t==null?void 0:t.timestamp} by ${t==null?void 0:t.author}`,lang:"en",tag:"chat"});o.value&&y()}},{deep:!0});const h=R(()=>B({pub:g.pub,size:1200}));return(a,s)=>{var t;return d(),V("div",{class:"flex flex-col overflow-y-scroll",style:E([{flex:"1000 1 auto"},{...h.value}])},[i(e(_),{open:!!((t=e(l))!=null&&t.pub),onClose:s[0]||(s[0]=o=>e(l).pub="")},{default:j(()=>{var o;return[(o=e(l))!=null&&o.pub?(d(),z(e(k),{key:0,pub:e(l).pub},null,8,["pub"])):A("",!0)]}),_:1},8,["open"]),c("div",I,[c("div",U,D(e(u)),1)]),i(e(v),{messages:e(p)},null,8,["messages"]),c("div",H,[i(e(C),{class:"flex-auto",onSubmit:s[1]||(s[1]=o=>e(b)(o))})])],4)}}});export{K as default};
