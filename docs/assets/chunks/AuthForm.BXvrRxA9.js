import{d as y,s as i,v as b,o as d,c as r,j as s,aA as u,aB as c,e as f,I as v,k,w as g,T as w,a4 as N}from"./framework.B82iRX0g.js";import{a as C,w as p,x as S,Q as V,S as A,y as B}from"./components.DPLv1CDv.js";import"./theme.Dqgm_Dbe.js";const E={class:"flex flex-col my-4 flex-1 items-center bg-light-700 dark-bg-dark-50 rounded-3xl p-4 shadow-lg"},L=s("div",{class:"font-bold text-xl"},"I already have an account",-1),T=s("div",{class:"text-md"},"Login with a saved key",-1),P={class:"flex"},Q=s("div",{class:"i-la-key text-xl"},null,-1),U=s("div",{class:"p-1 ml-1 font-bold"},"Paste",-1),q=[Q,U],F=N('<label class="button m-2 cursor-pointer flex items-center" for="qr-input"><div class="i-la-qrcode text-xl"></div><div class="p-1 ml-1 font-bold">QR</div></label><label class="button m-2 cursor-pointer flex items-center" for="json-input"><div class="i-la-file-code text-xl"></div><div class="p-1 ml-1 font-bold">JSON</div></label>',2),I={key:0,class:"flex"},J=s("div",{class:"i-la-sign-in-alt"},null,-1),O=[J],$={class:"hidden"},j={class:"flex flex-wrap"},G=y({__name:"AuthForm",setup(D){const n=i("pass"),a=i(),o=i(null),{auth:x}=C();function m(t){n.value!=t?n.value=t:n.value=null}b(a,async t=>{if(!t)return;typeof t=="string"&&t.includes("#/auth/")&&(t=p(t)),t&&typeof t=="string"&&t.substring(0,3)=="SEA"&&(o.value="");let e=S(t);e!=null&&e.pub&&(e!=null&&e.priv)?(x(e),a.value=null):console.log("No valid pair")});async function _(t=a.value){typeof t=="string"&&t.includes("#/auth/")&&(t=p(t)),a.value=await A.decrypt(t,o.value)}function h(t){var e;B((e=t.target)==null?void 0:e.files,l=>a.value=l)}return(t,e)=>(d(),r("div",E,[L,T,s("div",P,[s("button",{class:"button m-2 cursor-pointer flex items-center",onClick:e[0]||(e[0]=l=>m("key"))},q),F]),o.value!==null?(d(),r("form",I,[u(s("input",{class:"py-1 px-4 m-1 rounded-xl","onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),autofocus:"",autocomplete:"current-password",type:"text",placeholder:"Enter the password"},null,512),[[c,o.value]]),s("button",{class:"button text-2xl",type:"submit",onClick:e[2]||(e[2]=l=>_())},O)])):f("",!0),s("div",$,[v(k(V),{onLoaded:e[3]||(e[3]=l=>a.value=l)}),s("input",{id:"json-input",ref:"file",tabindex:"-1",type:"file",accept:"application/json",onChange:e[4]||(e[4]=l=>h(l))},null,544)]),s("div",j,[v(w,{name:"fade"},{default:g(()=>[n.value=="key"?u((d(),r("textarea",{class:"p-2 text-sm flex-1 w-full dark-bg-dark-200",key:"text","onUpdate:modelValue":e[5]||(e[5]=l=>a.value=l),rows:"6",cols:"40",placeholder:"Paste your key pair here"},null,512)),[[c,a.value]]):f("",!0)]),_:1})])]))}});export{G as default};
