import{bj as B,a as C,T as m,bc as L,I as F,m as T,b as U,bk as S,b5 as z,k as H,bl as M,bm as N,aL as P,bn as g}from"./components.Cw6xLTg0.js";import"./theme.BgzKx3Gc.js";import{k as h,ak as V,o as r,c as i,m as s,J as u,p as e,t as j,F as y,G as _,Q as A,r as G,b as w,e as D}from"./framework.BoeOPt-z.js";const E={class:"flex flex-col items-stretch"},I={class:"max-w-full flex flex-col items-stretche bg-light-100 bg-opacity-20 dark-bg-dark-800 dark-bg-opacity-40 p-4 md-p-12 shadow-xl backdrop-blur-md backdrop-filter rounded-t-xl"},J={class:"flex flex-wrap items-center gap-8"},O={class:"flex flex-col flex-auto",style:{flex:"100"}},Q={class:"text-md"},q={class:"flex items-center flex-wrap"},K=s("div",{class:"font-bold mr-2"},"Hosts: ",-1),W={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},X={class:"flex flex-wrap items-center gap-2 p-4"},Y={class:"relative"},Z={key:0,class:"flex items-center"},ee=["innerHTML"],te=s("div",{class:"i-la-pen"},null,-1),se=[te],oe={class:"p-2 flex flex-col gap-2"},de={__name:"RoomPage",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>B}},emits:["rooms","browse","user"],setup(p){const f=p,{user:b}=C(),d=h(()=>f.pub?f.pub:m.pub),{room:a,leaveRoom:le,updateRoomProfile:x,enterRoom:ae}=L(d.value),R=F(),n=V({name:!1,description:!1,text:!1});T("deep");const $=h(()=>U({pub:d.value,size:1200,attachment:"local"}));return(c,o)=>{var v,k;return r(),i("div",E,[s("div",{class:"pt-32 px-2 md-px-8 bg-cover relative flex flex-col items-center",style:A({...$.value})},[s("div",I,[s("div",J,[u(e(S),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:p.pub},null,8,["pub"]),s("div",O,[u(e(z),{class:"font-bold text-2xl",text:e(a).profile.name||d.value.substring(0,12),editable:e(a).hosts[e(b).pub]&&d.value==e(m).pub&&!n.name,onUpdate:o[0]||(o[0]=l=>e(x)("name",l))},null,8,["text","editable"]),s("div",Q,j(e(a).profile.description),1),s("div",q,[K,(r(!0),i(y,null,_(e(a).hosts,(l,t)=>(r(),i("div",{class:"p-2 flex flex-col items-start gap-2",key:t},[u(e(H),{pub:t,selectable:!0},null,8,["pub"])]))),128))]),u(e(M),{pub:d.value},null,8,["pub"])])])])],4),G(c.$slots,"default"),s("div",W,[s("div",X,[(r(!0),i(y,null,_(p.titles,(l,t)=>(r(),w(e(N),{key:t,cert:e(a).features[t],type:t,title:l,pub:p.pub||e(m).pub,open:e(a).features[t]||t=="users"&&e(a).features.space||t=="chat"&&e(a).features.chat,onClick:re=>c.$emit("browse",t)},null,8,["cert","type","title","pub","open","onClick"]))),128))]),s("div",Y,[n.text===!1?(r(),i("div",Z,[s("div",{class:"p-8 markdown-body prose",innerHTML:e(R).render(((v=e(a).profile)==null?void 0:v.text)||"")},null,8,ee),(k=e(a).hosts)!=null&&k[e(b).pub]?(r(),i("button",{key:0,class:"button absolute top-4 right-4 z-200",onClick:o[1]||(o[1]=l=>{var t;return n.text=((t=e(a).profile)==null?void 0:t.text)||""})},se)):D("",!0)])):(r(),w(e(P),{key:1,text:n.text,"onUpdate:text":o[2]||(o[2]=l=>n.text=l),onClose:o[3]||(o[3]=l=>{e(x)("text",n.text),n.text=!1})},null,8,["text"]))]),s("div",oe,[u(e(g),{onUser:o[4]||(o[4]=l=>c.$emit("user",l))}),u(e(g),{state:"offline",onUser:o[5]||(o[5]=l=>c.$emit("user",l))})])])])}}};export{de as default};
