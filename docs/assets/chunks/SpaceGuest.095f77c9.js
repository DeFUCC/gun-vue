import{a as g,m as k,p as c,n as h,bn as v,o as x}from"./components.729d6b32.js";import{d as S,x as u,f as z,o as N,c as w,L as B,e as a,E as l,N as O}from"./framework.e76a7413.js";import"../app.4097dd74.js";import"./theme.431f0e0b.js";const U=["opacity"],C=["fill","stroke"],E=["xlink:href"],$=S({__name:"SpaceGuest",props:{pub:{type:String,default:""},status:{type:String,default:""},pos:{type:Object,default:()=>({x:0,y:0})},mouse:{type:Object,default:()=>({x:0,y:0})},pulse:{type:Number,default:0},blink:{type:Boolean,default:!1},size:{type:Number,default:100}},emits:["updateStatus"],setup(s,{emit:j}){const e=s,{user:d}=g(),f=1e4,m=u(()=>Date.now()-Number(e.pulse)),b=u(()=>m.value>f),y=k(),i=u(()=>y.hex(e.pub)),n=z(c({pub:e.pub,size:e.size*4})),r=h();return r.user(e.pub).get("avatar").on(o=>{o?r.get("#avatars").get(o).once(t=>{n.value=t}):n.value=c({pub:e.pub,size:e.size*4})}),(o,t)=>(N(),w("g",{class:"guest",opacity:a(b)?.1:1},[B(a(v),{class:"opacity-20 hover-opacity-90 transition font-mono",content:s.status,onUpdate:t[0]||(t[0]=p=>o.$emit("updateStatus",p)),editable:a(d).pub==s.pub,"max-row-length":30,"line-height":22},null,8,["content","editable"]),l("g",{class:"avatar",onClick:t[1]||(t[1]=p=>a(x).pub=s.pub)},[l("circle",{class:"transition duration-1000 ease-out",style:O({filter:"url(#shadowButton)"}),r:26,fill:a(i),"stroke-width":"8","stroke-opacity":"0.5",stroke:s.blink?a(i):"transparent"},null,12,C),l("image",{"xlink:href":n.value,x:"-25",y:"-25",height:"50",width:"50","clip-path":"url(#mask)"},null,8,E)])],8,U))}});export{$ as default};
