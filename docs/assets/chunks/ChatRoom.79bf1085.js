import"../app.145f5e9a.js";import{H as h,b as g,I as k,o as n,J as C,U as v,K as S,L as _}from"./components.175bfd8d.js";import{d as w,x as B,au as N,a_ as H,g as U,o as d,c as V,H as i,w as $,l as t,b as z,e as A,k as c,t as D,N as E}from"./framework.4eb5045b.js";import"./theme.9a7457db.js";const I={class:"px-4 py-6 flex flex-wrap items-center text-center"},L={class:"flex-1 ml-2 font-bold"},R={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 flex sticky bottom-0"},Q=w({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(f,{emit:J}){const u=f;let l;function m(){l||(l=new Audio(u.clickSound),l.volume=.1),l.play()}const{send:b,currentChat:r,sorted:p}=h();B(()=>u.topic,s=>{r.value=s},{immediate:!0}),N(p,(s,a)=>{if(s.length>a.length){m();const e=s.slice(-1)[0],{isSupported:o,notification:K,show:y,close:M,onClick:T,onShow:W,onError:j,onClose:q}=H({title:e==null?void 0:e.text,body:`${e==null?void 0:e.timestamp} by ${e==null?void 0:e.author}`,lang:"en",tag:"chat"});o.value&&y()}},{deep:!0});const x=U(()=>g({pub:k.pub,size:1200}));return(s,a)=>{var e;return d(),V("div",{class:"flex flex-col overflow-y-scroll",style:E([{flex:"1000 1 auto"},{...x.value}])},[i(t(v),{open:!!((e=t(n))!=null&&e.pub),onClose:a[0]||(a[0]=o=>t(n).pub="")},{default:$(()=>{var o;return[(o=t(n))!=null&&o.pub?(d(),z(t(C),{key:0,pub:t(n).pub},null,8,["pub"])):A("",!0)]}),_:1},8,["open"]),c("div",I,[c("div",L,D(t(r)),1)]),i(t(S),{messages:t(p)},null,8,["messages"]),c("div",R,[i(t(_),{class:"flex-auto",onSubmit:a[1]||(a[1]=o=>t(b)(o))})])],4)}}});export{Q as default};
