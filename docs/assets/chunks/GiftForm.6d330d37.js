var X=Object.defineProperty;var Z=(t,e,s)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var y=(t,e,s)=>(Z(t,typeof e!="symbol"?e+"":e,s),s);import{d as ee,h as U,g as O,v as H,aB as te,as as q,o as f,c as g,z as se,s as W,L as ne,k as p,l as r,b as _,w as G,t as S,M as C,N as D,Q as I,U as ie,aA as re,at as ae,a as oe,e as V,W as A}from"./framework.1b08ecce.js";import{a as le,ai as ue,j as ce,ad as pe,c as me,m as fe,n as de,k as M,q as he,P as ge,aj as ve}from"./components.de9791ff.js";import"../app.c42b6c21.js";import{c as be}from"./currencies.2275eeb0.js";import"./theme.e88ecc74.js";/**
 * Vue Number Format 3.27.0
 * (c) 2021-2023 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var L={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function xe(t,e,s){return Math.max(t,Math.min(e,s))}function ye(t){return xe(0,t,20)}class Q{constructor(e){y(this,"options");y(this,"input");y(this,"number");y(this,"isClean");y(this,"isCustomDecimal");y(this,"preSurRegExp");y(this,"numberRegExp");y(this,"cleanRegExp");y(this,"negativeRegExp");this.options=Object.assign(L,e);const{prefix:s,suffix:i,decimal:a,reverseFill:n}=this.options;this.input="",this.number="",this.isClean=!n,this.preSurRegExp=new RegExp(`${s}|${i}`,"g"),this.numberRegExp=new RegExp(`[^0-9\\${a}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=a!=="."}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(e=!1){return this.isClean=e,this}sign(){if(this.input===null||this.input===void 0)return"";const e=this.input.toString().indexOf("-")>=0;return this.isClean?e&&this.realNumber()>0?"-":"":e?"-":""}toFixed(){const e=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/e||0).toFixed(ye(this.options.precision))}toNumber(e){return Number(e)}numberOnly(e){var s;return(s=this.input)==null?void 0:s.toString().replace(this.preSurRegExp,"").replace(e||this.numberRegExp,"")}isNegative(){return this.sign()==="-"}numbers(){const{reverseFill:e,decimal:s}=this.options,a=!(this.input.toString().indexOf(s)>=0)&&this.isCustomDecimal?this.input+s:this.input;return e?this.number=this.toFixed().replace(".",s):typeof this.input=="number"?this.number=this.parts(this.input.toString().replace("-",""),".").join(s):isNaN(this.toNumber(a))?this.number=this.parts(this.numberOnly()).join(s):this.number=this.parts(this.input.replace("-",""),".").join(s),this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(e,s){const{precision:i,minimumFractionDigits:a,decimal:n}=this.options;let o=e.toString().split(s||n);if(o.length>1&&(o[0]=this.toNumber(o[0])||0,o[1]=o.slice(1,o.length).join(""),o=o.slice(0,2)),this.isClean){const d=this.toNumber(o.join(".")).toFixed(i),c=this.toNumber(d),m=c.toFixed(a);a>=0&&c.toString().length<m.length?o=m.toString().split("."):o=c.toString().split(".")}return o.slice(0,2)}addSeparator(){const{decimal:e,separator:s}=this.options,i=this.numbers().split(e);return i[0]=i[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${s}`),i.join(e)}format(e){this.input=e;const{reverseFill:s,nullValue:i,prefix:a,suffix:n}=this.options;return this.isNull()&&!s?i:this.sign()+a+this.addSeparator()+n}unformat(e){this.input=e;const{reverseFill:s,nullValue:i}=this.options;return this.isNull()||s&&this.realNumber()===0?i:this.sign()+this.realNumber()}}const B="-";function J(t){return JSON.parse(JSON.stringify(t))}function P(t){return new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function R(t){const e=t instanceof HTMLInputElement?t:t.querySelector("input");if(!e)throw new Error("facade directive requires an input element");return e}function z(t,e){const s=()=>{t.setSelectionRange(e,e)};s(),setTimeout(s,1)}function j(t,e,{emit:s=!0,force:i=!1,clean:a=!1}={}){var w;const{options:n,oldValue:o}=t,{reverseFill:d,max:c,min:m}=n,E=((w=e==null?void 0:e.props)==null?void 0:w.value)||t.value;if(i||o!==E){const h=new Q(n).clean(a&&!d);let b=h.format(E),x=h.clean(!d).unformat(E);return a&&(Number(c)===c&&Number(x)>c?(b=h.format(c),x=h.unformat(c)):Number(m)===m&&Number(x)<m&&(b=h.format(m),x=h.unformat(m))),t.oldValue=b,t.unmasked=x,t.value!==b&&(t.value=b),s&&t.dispatchEvent(P("input"))}}function Ee(t){const{target:e,detail:s}=t;if(s!=null&&s.facade)return!1;t.stopPropagation();let i=e.value.length;const{oldValue:a,options:n}=e;e.selectionEnd&&(i=e.value.length-e.selectionEnd),j(e,null,{emit:!1,clean:!n.precision}),n.suffix&&(i=Math.max(i,n.suffix.length)),i=e.value.length-i,n.prefix&&(i=Math.max(i,n.prefix.length)),z(e,i),a!==e.value&&e.dispatchEvent(P("input"))}function ke(t){const{target:e,detail:s}=t;if(s!=null&&s.facade)return!1;const{oldValue:i}=e;j(e,null,{force:!0,emit:!1,clean:!0}),i!==e.value&&e.dispatchEvent(P("change"))}function Ne(t,e){const{options:s}=e,{prefix:i,suffix:a,decimal:n,min:o,separator:d}=s,{key:c}=t,m=new RegExp(`${i}|${a}`,"g"),E=e.value.replace(m,""),w=o===void 0||Number(o)<0||Number(o)!==o;if(c===n)E.includes(n)?t.preventDefault():E||(e.value="0"+n,e.dispatchEvent(new Event("input")));else if(c===B&&!w)t.preventDefault();else if(c==="Backspace"){const h=e.selectionEnd||0,b=e.value.slice(h-1,h),x=e.value.slice(h-2,h);let k=e.value.length-h;[i,B,d].includes(b)&&(t.preventDefault(),b===d?e.value=e.value.replace(x,""):e.value=e.value.replace(new RegExp(`[${i}${B}]`,"g"),""),k=Math.max(k,a.length),k=e.value.length-k,k=Math.max(k,i.length),z(e,k),e.dispatchEvent(new Event("input")))}}var we={beforeMount:(t,{value:e,modifiers:s},i)=>{var c;t=R(t);const a=Object.assign(J(L),e,s),{reverseFill:n,precision:o,decimal:d}=a;t.options=a,n&&t.value?(t.value=parseFloat(new Q({...a,reverseFill:!1}).unformat(t.value)).toFixed(o),(c=i==null?void 0:i.props)!=null&&c.value&&(i.props.value=t.value)):t.value&&!isNaN(Number(t.value))&&(t.value=t.value.replace(".",d)),j(t,i,{force:a.prefill,clean:!0,emit:!1})},mounted:t=>{t=R(t);const e=t.parentElement||t,s=i=>{i.target===t&&Ee(i)};e.addEventListener("input",s,!0),t.onblur=i=>ke(i),t.onkeydown=i=>Ne(i,t),t.cleanup=()=>e.removeEventListener("input",s,!0)},updated:(t,{value:e,oldValue:s,modifiers:i},a)=>{t=R(t);const n=t.options;t.options=Object.assign(n,e,i),e!==s?j(t,a,{force:!0,clean:!0}):j(t,a)},unmounted:t=>{R(t).cleanup()}};const v=J(L);var T=ee({name:"VueNumber",directives:{number:we},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],required:!1,default:v.nullValue},masked:{type:Boolean,default:!1},reverseFill:{type:Boolean,default:v.reverseFill},prefill:{type:Boolean,default:v.prefill},precision:{type:Number,default:()=>v.precision},minimumFractionDigits:{type:Number,default:()=>v.minimumFractionDigits},decimal:{type:String,default:()=>v.decimal},min:{type:Number,default:()=>v.min},max:{type:Number,default:()=>v.max},separator:{type:String,default:()=>v.separator},prefix:{type:String,default:()=>v.prefix},suffix:{type:String,default:()=>v.suffix}},emits:["update:model-value","input:model-value"],setup(t,{emit:e}){const s=U(t.modelValue),i=U(""),a=O(()=>({...t})),n=O(()=>t.masked?s.value:i.value),o=c=>{const{target:m}=c;s.value=m.value,i.value=m.unmasked,e("input:model-value",n.value)},d=()=>{e("update:model-value",n.value)};return H(()=>t.modelValue,(c,m)=>{c!==m&&(s.value=c)}),{config:a,maskedValue:s,unmaskedValue:i,input:o,change:d}}});const _e=["value"];function Fe(t,e,s,i,a,n){const o=te("number");return q((f(),g("input",{type:"text",autocomplete:"off",value:t.maskedValue,class:"v-number vue-number-format",onChange:e[0]||(e[0]=(...d)=>t.change&&t.change(...d)),onInput:e[1]||(e[1]=(...d)=>t.input&&t.input(...d))},null,40,_e)),[[o,t.config]])}T.render=Fe;T.__file="src/component.vue";const Se={class:"flex flex-col max-w-140"},Ce={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},je=p("div",{class:"p-2 text-right"},"FROM",-1),Ve={class:"flex-1"},Re=p("div",{class:"p-2 text-right"},"TO ",-1),Oe=p("div",{class:"flex-1"},null,-1),$e={key:1,class:"flex flex-col"},De={class:"font-bold"},Me={class:"flex flex-wrap gap-3"},Be=p("div",{class:"p-2 text-right"},"WALLET",-1),qe=p("div",{class:"p-2 text-right"},"Quantity",-1),Le=p("div",{class:"p-2 text-right"},"Quality",-1),Pe=["value"],Te=p("div",{class:"p-2 text-right self-start"},"Wish ",-1),Ue={class:"p-2 text-right"},We={key:0,class:"w-full"},Ge={key:1,class:"flex flex-wrap gap-1"},Ie=["onClick"],Ae={class:"font-bold"},He=p("div",{class:"p-2 text-right"},"ROOM",-1),Qe={key:2,class:"flex"},Je={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},st={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(t,{emit:e}){const s=t,i={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},{user:a}=le(),{gift:n,cleanGift:o,propose:d,proposed:c,hash:m,valid:E}=ue(s.gift),{guests:w,count:h}=ce(),{project:b}=pe(se(n,"project")),{projects:x}=me(),k=fe();H(()=>n.wallet,N=>{N&&(n.ql=N.currency)});const Y=O(()=>{const N=de(),u=W({});return Object.keys(w).forEach(F=>{N.user(F).get("wallets").on((l,$)=>{u[F]=w[F]})}),u}),K=O(()=>{const N=W({});return Object.keys(x).forEach(u=>{u.includes(n.to)&&(N[u]=x[u])}),N});return(N,u)=>{const F=ne("gift-wallets");return f(),g("div",Se,[p("div",Ce,[je,p("div",Ve,[r(a).pub?(f(),_(r(M),{key:0,pub:r(a).pub},null,8,["pub"])):(f(),_(r(he),{key:1}))]),Re,r(n).to?(f(),_(r(M),{key:0,pub:r(n).to},{default:G(()=>[Oe,p("div",{class:"i-la-times mr-2",onClick:u[0]||(u[0]=l=>{r(n).to="",r(n).wallet=null})})]),_:1},8,["pub"])):(f(),g("div",$e,[p("div",De,"USER SELECT OF "+S(Object.keys(Y.value).length),1),p("div",Me,[(f(!0),g(C,null,D(r(w),l=>(f(),_(r(M),{key:l,pub:l.pub,onClick:$=>r(n).to=l.pub},null,8,["pub","onClick"]))),128))])])),r(n).to?(f(),g(C,{key:2},[Be,(f(),_(F,{key:r(n).to,pub:r(n).to,"active-wallet":r(n).wallet,onWallet:u[1]||(u[1]=l=>r(n).wallet=l),onClear:u[2]||(u[2]=l=>r(n).wallet=null)},null,8,["pub","active-wallet"])),r(n).wallet?(f(),g(C,{key:0},[qe,I(r(T),ie({modelValue:r(n).qn,"onUpdate:modelValue":u[3]||(u[3]=l=>r(n).qn=l)},i,{placeholder:"Quantity"}),null,16,["modelValue"]),Le,q(p("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":u[4]||(u[4]=l=>r(n).ql=l),placeholder:"Your account currency"},[(f(!0),g(C,null,D(r(be),l=>(f(),g("option",{key:l,value:l},S(l),9,Pe))),128))],512),[[re,r(n).ql]]),Te,q(p("textarea",{class:"p-2","onUpdate:modelValue":u[5]||(u[5]=l=>r(n).wish=l),placeholder:"Wish"},null,512),[[ae,r(n).wish]]),p("div",Ue,[oe("PROJECT "),r(n).project?V("",!0):(f(),g("div",We,"SELECT"))]),r(n).project?(f(),_(r(ge),{key:0,project:r(b),path:r(n).project},{default:G(()=>[p("div",{class:"i-la-times",onClick:u[6]||(u[6]=l=>r(n).project=null)})]),_:1},8,["project","path"])):(f(),g("div",Ge,[(f(!0),g(C,null,D(K.value,(l,$)=>(f(),g("div",{class:"p-2 rounded-xl cursor-pointer",key:$,style:A({backgroundColor:l.color}),onClick:ze=>r(n).project=l.path},[p("div",Ae,S(l.title),1)],12,Ie))),128))])),He,I(r(ve)),r(E)?(f(),g("div",Qe,[p("button",{class:"button w-full justify-center",onClick:u[7]||(u[7]=l=>{r(d)(),N.$emit("sent",r(m))})},"Propose")])):V("",!0),p("pre",Je,S(r(o)),1),p("div",{class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition",style:A({backgroundColor:r(k).hex(r(m)||"")})},S(r(m)),5)],64)):V("",!0)],64)):V("",!0)])])}}};export{st as default};
