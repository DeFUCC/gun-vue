import"./theme.B2FxFXkD.js";import{j as x,p as l,N as g,U as k,O as C,R as _}from"./components.DbnZk3WN.js";import{u as v}from"./useChat.DAdnsh3s.js";import{d as S,q as w,aB as B,h as N,o as d,c as R,G as i,w as U,k as e,b as V,e as $,j as c,t as j,N as z,aY as A}from"./framework.BtfQKcS5.js";import{u as D}from"./useBackground.B2jZ8777.js";const E={class:"px-4 py-6 flex flex-wrap items-center text-center"},q={class:"flex-1 ml-2 font-bold"},G={class:"p-4 bg-dark-50 bg-opacity-80 flex gap-2 flex sticky bottom-0"},Q=S({__name:"ChatRoom",props:{title:{type:String,default:"Topics"},topic:{type:String,default:"general"},clickSound:{type:String,default:"audio/safe.mp3"}},emits:["account"],setup(f,{emit:H}){const r=f;let n;function m(){n||(n=new Audio(r.clickSound),n.volume=.1),n.play()}const{send:b,currentChat:u,sorted:p}=v();w(()=>r.topic,s=>{u.value=s},{immediate:!0}),B(p,(s,a)=>{if(s.length>a.length){m();const t=s.slice(-1)[0],{isSupported:o,notification:I,show:y,close:L,onClick:M,onShow:O,onError:T,onClose:W}=A({title:t==null?void 0:t.text,body:`${t==null?void 0:t.timestamp} by ${t==null?void 0:t.author}`,lang:"en",tag:"chat"});o.value&&y()}},{deep:!0});const h=N(()=>D({pub:x.pub,size:1200}));return(s,a)=>{var t;return d(),R("div",{class:"flex flex-col overflow-y-scroll",style:z([{flex:"1000 1 auto"},{...h.value}])},[i(e(k),{open:!!((t=e(l))!=null&&t.pub),onClose:a[0]||(a[0]=o=>e(l).pub="")},{default:U(()=>{var o;return[(o=e(l))!=null&&o.pub?(d(),V(e(g),{key:0,pub:e(l).pub},null,8,["pub"])):$("",!0)]}),_:1},8,["open"]),c("div",E,[c("div",q,j(e(u)),1)]),i(e(C),{messages:e(p)},null,8,["messages"]),c("div",G,[i(e(_),{class:"flex-auto",onSubmit:a[1]||(a[1]=o=>e(b)(o))})])],4)}}});export{Q as default};
