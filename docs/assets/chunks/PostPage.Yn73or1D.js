import{o as S,aN as E,ay as F,aJ as H,aO as T,ah as A,aP as G}from"./components.BF3VL1wl.js";import{u as J}from"./useMd.DIVJn9do.js";import{u as O}from"./useZip.ByYsbD-b.js";import{u as Q}from"./usePosts.DpMZRzap.js";import"./theme.DNNfahvK.js";import{h as _,o,c as a,j as e,F as Y,C as q,b as c,k as s,t as f,e as n,N as I,G as j}from"./framework.D0CZGv0r.js";import"./useGift.DwZ54uS8.js";import"./composables.Dkv7Zox7.js";const K={class:"rounded-lg max-w-65ch flex flex-col items-stretch justify-center w-full overscroll-contain bg-light-200 dark-bg-dark-500"},R={class:"flex flex-wrap"},W={class:"z-30 flex flex-wrap items-center w-full px-4 py-2 sticky top-0 shadow-xl filter grayscale-70 hover-grayscale-0 transition duration-400ms"},X={class:"ml-1 break-all font-bold"},Z={class:"flex-1 flex flex-col items-stretch",style:{flex:"10 1 300px"}},ss={key:0,class:"z-1 max-w-100vw"},ts=["src"],es={class:"flex flex-wrap items-start w-full justify-start"},ls={class:"w-full flex flex-col items-stretch"},os={class:"p-2"},as=["src"],is={key:1,class:"text-2xl font-bold m-2"},ns={key:3,class:"m-2"},rs={class:"flex flex-wrap p-4 bg-dark-50 bg-opacity-25 dark-bg-dark-400 w-full items-center gap-1 text-sm"},ds={key:0,class:"i-la-file-download"},us={key:1,class:"i-la-redo-alt animate-spin"},cs=["innerHTML"],gs={__name:"PostPage",props:{tag:{type:String,default:""},hash:{type:String,default:""}},emits:["close","browse","user"],setup(d){const z=J(),u=d;_(()=>S("light").hex(u.hash));const M=_(()=>S("deep").hex(u.hash)),{post:l,download:U,downloading:V}=O({hash:u.hash}),{posts:ms,backlinks:D}=Q(u.hash);return(r,t)=>{var x,p,k,h,v,y,b,g,w,$,C,P,L,B;return o(),a("div",K,[e("div",R,[(o(!0),a(Y,null,q(s(D),(i,m)=>(o(),c(s(E),{key:m,style:{flex:"1 1 220px"},hash:m,tag:d.tag,authors:i,back:!0,onUser:t[0]||(t[0]=N=>r.$emit("user",N)),onClick:N=>r.$emit("browse",m)},null,8,["hash","tag","authors","onClick"]))),128))]),e("div",W,[e("div",{class:"hover-underline text-md cursor-pointer font-bold flex",onClick:t[1]||(t[1]=i=>r.$emit("close"))},t[6]||(t[6]=[e("div",{class:"p-0"},"#",-1)])),e("div",X,f((x=s(l))==null?void 0:x.title),1),t[9]||(t[9]=e("div",{class:"flex-1"},null,-1)),e("button",{class:"p-2",onClick:t[2]||(t[2]=i=>r.$router.back())},t[7]||(t[7]=[e("div",{class:"i-la-angle-left"},null,-1)])),e("button",{class:"p-2",onClick:t[3]||(t[3]=i=>r.$emit("close"))},t[8]||(t[8]=[e("div",{class:"i-la-times"},null,-1)]))]),e("div",Z,[(p=s(l))!=null&&p.cover||(k=s(l))!=null&&k.youtube||(h=s(l))!=null&&h.text?(o(),a("div",ss,[e("img",{class:"sticky top-0",src:s(l).cover},null,8,ts)])):n("",!0),e("div",es,[e("div",ls,[e("div",os,[s(l).icon?(o(),a("img",{key:0,class:"w-20 h-20 rounded-full m-2",style:I([{flex:"0 1 40px"},{borderColor:M.value}]),src:s(l).icon},null,12,as)):n("",!0),(v=s(l))!=null&&v.title?(o(),a("div",is,f((y=s(l))==null?void 0:y.title),1)):n("",!0),(b=s(l))!=null&&b.link?(o(),c(s(F),{key:2,url:(g=s(l))==null?void 0:g.link},null,8,["url"])):n("",!0),(w=s(l))!=null&&w.statement?(o(),a("div",ns,f(($=s(l))==null?void 0:$.statement),1)):n("",!0)]),t[10]||(t[10]=e("div",{class:"flex-auto"},null,-1)),e("div",rs,[j(s(H)),j(s(T),{hash:d.hash},null,8,["hash"]),e("button",{class:"button flex items-center",onClick:t[4]||(t[4]=i=>s(U)())},[s(V)?(o(),a("div",us)):(o(),a("div",ds))])])])]),(C=s(l))!=null&&C.youtube?(o(),c(s(A),{key:1,class:"mb-6 shadow-xl flex-1",video:(P=s(l))==null?void 0:P.youtube},null,8,["video"])):n("",!0),(L=s(l))!=null&&L.text?(o(),a("div",{key:2,class:"text-md markdown-body m-1 px-4 py-4 leading-relaxed",innerHTML:s(z).render((B=s(l))==null?void 0:B.text)},null,8,cs)):n("",!0),(o(),c(s(G),{key:d.tag,tag:d.hash,header:!1,onBrowse:t[5]||(t[5]=i=>r.$emit("browse",i))},null,8,["tag"]))])])}}};export{gs as default};
