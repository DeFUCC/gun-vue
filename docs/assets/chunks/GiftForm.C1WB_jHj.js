var Z=Object.defineProperty;var X=(e,t,n)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var g=(e,t,n)=>X(e,typeof t!="symbol"?t+"":t,n);import{d as ee,p as L,h as P,q as Y,b0 as te,aD as W,o as f,c as b,aJ as ie,ah as Q,B as se,j as d,k as l,b as R,w as I,t as C,F,C as q,G as z,K as ne,aZ as re,aE as le,a as oe,e as V,N as H}from"./framework.BtfQKcS5.js";import{a as ae,o as ue,h as pe,m as T,r as ce,P as me,ae as de}from"./components.D71Jr3ti.js";import{u as fe}from"./useGuests.BAsS34cd.js";import{a as he}from"./useGift.CJgxp0xt.js";import{u as ve}from"./useProject.BV_UXL4I.js";import{u as ge}from"./useProjects.CLlnugl0.js";import"./theme.3FzRrFlh.js";import{c as xe}from"./currencies.G9pkebxG.js";import"./composables.0TUOuYcI.js";/**
 * Vue Number Format 3.34.1
 * (c) 2021-2024 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var U={prefix:"",suffix:"",separator:",",decimal:".",inputmode:"numeric",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function be(e){return t=0,n=e,o=20,Math.max(t,Math.min(n,o));var t,n,o}class A{constructor(t){g(this,"options");g(this,"input");g(this,"number");g(this,"isClean");g(this,"isCustomDecimal");g(this,"noPreSuffix");g(this,"hasPreOrSuffix");g(this,"prefix");g(this,"preSufRegExp");g(this,"prefixRegExp");g(this,"suffixRegExp");g(this,"numberRegExp");g(this,"cleanRegExp");g(this,"negativeRegExp");this.options=Object.assign(J(U),t);const{prefix:n,suffix:o,decimal:p,reverseFill:i}=this.options;this.input="",this.number="",this.isClean=!i;const a=n,s=o,m=a.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),u=s.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");m&&(this.prefixRegExp=new RegExp(`^${m}`)),u&&(this.suffixRegExp=new RegExp(`${u}$`)),this.prefix=n,this.numberRegExp=new RegExp(`[^0-9\\${p}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi"),this.isCustomDecimal=p!==".",this.noPreSuffix=!a&&!s,this.hasPreOrSuffix=!this.noPreSuffix}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(t=!1){return this.isClean=t,this}sign(){if(this.input===null||this.input===void 0)return"";const t=this.input.toString().indexOf(w)>=0;return this.isClean?t&&this.realNumber()>0?w:"":t?w:""}toFixed(){const t=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/t||0).toFixed(be(this.options.precision))}toNumber(t){return Number(t)}numberOnly(t){var o;let n=(o=this.input)==null?void 0:o.toString();return this.prefixRegExp&&(n=n.replace(this.prefixRegExp,"")),this.suffixRegExp&&(n=n.replace(this.suffixRegExp,"")),n.replace(t||this.numberRegExp,"")}inputWithPreOrSuffix(){return this.input&&this.prefixRegExp?this.prefixRegExp.test(this.input.toString()):!this.input||!this.suffixRegExp||this.suffixRegExp.test(this.input.toString())}isNegative(){return this.sign()===w}isNumber(t){return!isNaN(this.toNumber(t||this.input))}numbers(){var p;const{reverseFill:t,decimal:n,separator:o}=this.options;if(t)this.number=this.toFixed().replace(".",n);else{const i=(p=this.input)==null?void 0:p.toString().replace(this.prefixRegExp??"","").replace(this.suffixRegExp??"","").replace(new RegExp(w,"g"),""),a=this.input.toString().indexOf(n)>=0&&this.isCustomDecimal,s=i.replace(new RegExp(`\\${o}`,"g"),"").replace(n,".");typeof this.input=="number"||this.isNumber()&&!a&&!this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(i,".").join(n):this.isNumber(s)&&!a&&this.inputWithPreOrSuffix()&&this.hasPreOrSuffix?this.number=this.parts(s,".").join(n):this.number=this.parts(this.numberOnly()).join(n)}return this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(t,n){const{precision:o,minimumFractionDigits:p,decimal:i}=this.options;let a=t.toString().split(n||i);if(a.length>1&&(a[0]=this.toNumber(a[0])||0,a[1]=a.slice(1,a.length).join(""),a=a.slice(0,2)),this.isClean){const s=this.toNumber(a.join(".")).toFixed(o),m=this.toNumber(s),u=m.toFixed(p);a=p>=0&&m.toString().length<u.length?u.toString().split("."):m.toString().split(".")}return a.slice(0,2)}addSeparator(){const{decimal:t,separator:n}=this.options,o=this.numbers().split(t);return o[0]=o[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${n}`),o.join(t)}format(t){this.input=t;const{reverseFill:n,nullValue:o,prefix:p,suffix:i}=this.options;return this.isNull()&&!n?o:this.sign()+p+this.addSeparator()+i}unformat(t){this.input=t;const{reverseFill:n,nullValue:o}=this.options,p=this.realNumber(),i=this.unformatNumber();return this.isNull()||n&&p===0?o:this.sign()+i}}const w="-";function J(e){return JSON.parse(JSON.stringify(e))}function _(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function $(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function K(e,t){const n=()=>{e.setSelectionRange(t,t)};n(),setTimeout(n,1)}function O(e,t,{emit:n=!0,force:o=!1,clean:p=!1}={}){var h;const{options:i,oldValue:a}=e,{reverseFill:s,max:m,min:u}=i,x=((h=t==null?void 0:t.props)==null?void 0:h.value)||e.value;if(o||a!==x){const k=new A(i).clean(p&&!s);let N=k.format(x),E=k.clean(!s).unformat(x);p&&(Number(m)===m&&Number(E)>m?(N=k.format(m),E=m.toString()):Number(u)===u&&Number(E)<u&&(N=k.format(u),E=u.toString())),e.oldValue=N,e.unmasked=E,e.value!==N&&(e.value=N)}return n&&e.dispatchEvent(_("input"))}var Ee={beforeMount:(e,{value:t,modifiers:n},o)=>{var u;e=$(e);const p=Object.assign(J(U),t,n),{reverseFill:i,precision:a,decimal:s,inputmode:m}=p;e.options=p,e.setAttribute("inputmode",m),i&&e.value?(e.value=parseFloat(new A({...p,reverseFill:!1}).unformat(e.value)).toFixed(a),(u=o==null?void 0:o.props)!=null&&u.value&&(o.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",s)),O(e,o,{force:p.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=$(e)).parentElement||e,n=i=>{i.target===e&&function(a){const{target:s,detail:m}=a;if(m!=null&&m.facade)return!1;a.stopPropagation();let u=s.value.length;const{oldValue:x,options:h}=s;s.selectionEnd&&(u=s.value.length-s.selectionEnd),O(s,null,{clean:!h.precision,emit:!1}),h.suffix&&(u=Math.max(u,h.suffix.length)),u=s.value.length-u,h.prefix&&(u=Math.max(u,h.prefix.length)),K(s,u),x!==s.value&&s.dispatchEvent(_("input"))}(i)},o=i=>{i.target===e&&function(a){const{target:s}=a,{oldValue:m}=s;O(s,null,{force:!0,clean:!0,emit:!1}),m!==s.value&&s.dispatchEvent(_("input"))}(i)},p=i=>{i.target===e&&function(a,s){const{options:m}=s,{prefix:u,suffix:x,decimal:h,min:k,separator:N}=m,{key:E}=a,D=new RegExp(`${u}|${x}`,"g"),j=s.value.replace(D,""),B=k===void 0||Number(k)<0||Number(k)!==k;if(E===h)j.includes(h)?a.preventDefault():j||(s.value="0",s.dispatchEvent(new Event("input")));else if(E!==w||B){if(E==="Backspace"){const v=s.selectionEnd||0,r=s.value.slice(v-1,v),S=s.value.slice(v-2,v);let c=s.value.length-v;[u,w,N].includes(r)&&(a.preventDefault(),s.value=r===N?s.value.replace(S,""):s.value.replace(new RegExp(`[${u}${w}]`,"g"),""),c=Math.max(c,x.length),c=s.value.length-c,c=Math.max(c,u.length),K(s,c),s.dispatchEvent(new Event("input")))}}else a.preventDefault()}(i,e)};t.addEventListener("input",n,!0),t.addEventListener("blur",o,!0),t.addEventListener("keydown",p,!0),e.cleanup=()=>{t.removeEventListener("input",n,!0),t.removeEventListener("blur",o,!0),t.removeEventListener("keydown",p,!0)}},updated:(e,{value:t,oldValue:n,modifiers:o},p)=>{if(e=$(e),t!==n){const i=e.options;e.options=Object.assign(i,t,o),O(e,p,{force:!0,clean:!1,emit:!1})}else O(e,p,{emit:!1})},unmounted:e=>{var t;(t=$(e))==null||t.cleanup()}};const y=J(U);var G=ee({name:"VueNumber",directives:{number:Ee},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:y.nullValue},masked:Boolean,readonly:Boolean,disabled:Boolean,reverseFill:{type:Boolean,default:y.reverseFill},prefill:{type:Boolean,default:y.prefill},precision:{type:Number,default:()=>y.precision},minimumFractionDigits:{type:Number,default:()=>y.minimumFractionDigits},decimal:{type:String,default:()=>y.decimal},min:{type:Number,default:()=>y.min},max:{type:Number,default:()=>y.max},separator:{type:String,default:()=>y.separator},prefix:{type:String,default:()=>y.prefix},suffix:{type:String,default:()=>y.suffix},inputmode:{type:String,default:()=>y.inputmode}},emits:["update:model-value","input:model-value"],setup(e,{emit:t}){const n=L(e.modelValue),o=L(!1),p=L(""),i=P(()=>({...e})),a=new A(i.value),s=P(()=>e.masked?a.format(n.value):p.value),m=()=>{t("update:model-value",s.value)};return Y(()=>e.modelValue,u=>{s.value!=u&&(n.value=a.format(u))}),{config:i,maskedValue:n,unmaskedValue:p,input:u=>{const{target:x}=u;n.value=x.value,p.value=x.unmasked,o.value=!0,t("input:model-value",s.value)},blur:()=>{o.value&&s.value!==e.modelValue&&m()},change:m}}});const ye=["value","readonly","disabled"];G.render=function(e,t,n,o,p,i){const a=te("number");return W((f(),b("input",{type:"text",autocomplete:"off",value:e.maskedValue,readonly:e.readonly,disabled:e.disabled,class:"v-number vue-number-format",onChange:t[0]||(t[0]=(...s)=>e.change&&e.change(...s)),onInput:t[1]||(t[1]=(...s)=>e.input&&e.input(...s)),onBlur:t[2]||(t[2]=(...s)=>e.blur&&e.blur(...s))},null,40,ye)),[[a,e.config]])},G.__file="src/component.vue";const ke={class:"flex flex-col max-w-140"},Ne={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},we={class:"flex-1"},Se={key:1,class:"flex flex-col"},Re={class:"font-bold"},Ce={class:"flex flex-wrap gap-3"},Fe=["value"],Oe={class:"p-2 text-right"},je={key:0,class:"w-full"},Ve={key:1,class:"flex flex-wrap gap-1"},$e=["onClick"],Pe={class:"font-bold"},De={key:2,class:"flex"},Be={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},Ie={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(e,{emit:t}){const n={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},o=e,{user:p}=ae(),{gift:i,cleanGift:a,propose:s,proposed:m,hash:u,valid:x}=he(o.gift),{guests:h,count:k}=fe(),{project:N}=ve(ie(i,"project")),{projects:E}=ge(),D=ue();Y(()=>i.wallet,v=>{v&&(i.ql=v.currency)});const j=P(()=>{const v=pe(),r=Q({});return Object.keys(h).forEach(S=>{v.user(S).get("wallets").on((c,M)=>{r[S]=h[S]})}),r}),B=P(()=>{const v=Q({});return Object.keys(E).forEach(r=>{r.includes(i.to)&&(v[r]=E[r])}),v});return(v,r)=>{const S=se("gift-wallets");return f(),b("div",ke,[d("div",Ne,[r[15]||(r[15]=d("div",{class:"p-2 text-right"},"FROM",-1)),d("div",we,[l(p).pub?(f(),R(l(T),{key:0,pub:l(p).pub},null,8,["pub"])):(f(),R(l(ce),{key:1}))]),r[16]||(r[16]=d("div",{class:"p-2 text-right"},"TO ",-1)),l(i).to?(f(),R(l(T),{key:0,pub:l(i).to},{default:I(()=>[r[8]||(r[8]=d("div",{class:"flex-1"},null,-1)),d("div",{class:"i-la-times mr-2",onClick:r[0]||(r[0]=c=>{l(i).to="",l(i).wallet=null})})]),_:1},8,["pub"])):(f(),b("div",Se,[d("div",Re,"USER SELECT OF "+C(Object.keys(j.value).length),1),d("div",Ce,[(f(!0),b(F,null,q(l(h),c=>(f(),R(l(T),{key:c,pub:c.pub,onClick:M=>l(i).to=c.pub},null,8,["pub","onClick"]))),128))])])),l(i).to?(f(),b(F,{key:2},[r[14]||(r[14]=d("div",{class:"p-2 text-right"},"WALLET",-1)),(f(),R(S,{key:l(i).to,pub:l(i).to,"active-wallet":l(i).wallet,onWallet:r[1]||(r[1]=c=>l(i).wallet=c),onClear:r[2]||(r[2]=c=>l(i).wallet=null)},null,8,["pub","active-wallet"])),l(i).wallet?(f(),b(F,{key:0},[r[10]||(r[10]=d("div",{class:"p-2 text-right"},"Quantity",-1)),z(l(G),ne({modelValue:l(i).qn,"onUpdate:modelValue":r[3]||(r[3]=c=>l(i).qn=c)},n,{placeholder:"Quantity"}),null,16,["modelValue"]),r[11]||(r[11]=d("div",{class:"p-2 text-right"},"Quality",-1)),W(d("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":r[4]||(r[4]=c=>l(i).ql=c),placeholder:"Your account currency"},[(f(!0),b(F,null,q(l(xe),c=>(f(),b("option",{key:c,value:c},C(c),9,Fe))),128))],512),[[re,l(i).ql]]),r[12]||(r[12]=d("div",{class:"p-2 text-right self-start"},"Wish ",-1)),W(d("textarea",{class:"p-2","onUpdate:modelValue":r[5]||(r[5]=c=>l(i).wish=c),placeholder:"Wish"},null,512),[[le,l(i).wish]]),d("div",Oe,[r[9]||(r[9]=oe("PROJECT ")),l(i).project?V("",!0):(f(),b("div",je,"SELECT"))]),l(i).project?(f(),R(l(me),{key:0,project:l(N),path:l(i).project},{default:I(()=>[d("div",{class:"i-la-times",onClick:r[6]||(r[6]=c=>l(i).project=null)})]),_:1},8,["project","path"])):(f(),b("div",Ve,[(f(!0),b(F,null,q(B.value,(c,M)=>(f(),b("div",{class:"p-2 rounded-xl cursor-pointer",key:M,style:H({backgroundColor:c.color}),onClick:Me=>l(i).project=c.path},[d("div",Pe,C(c.title),1)],12,$e))),128))])),r[13]||(r[13]=d("div",{class:"p-2 text-right"},"ROOM",-1)),z(l(de)),l(x)?(f(),b("div",De,[d("button",{class:"button w-full justify-center",onClick:r[7]||(r[7]=c=>{l(s)(),v.$emit("sent",l(u))})},"Propose")])):V("",!0),d("pre",Be,C(l(a)),1),d("div",{class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition",style:H({backgroundColor:l(D).hex(l(u)||"")})},C(l(u)),5)],64)):V("",!0)],64)):V("",!0)])])}}};export{Ie as default};
