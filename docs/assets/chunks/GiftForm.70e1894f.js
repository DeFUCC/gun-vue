var X=Object.defineProperty;var Z=(e,t,i)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var N=(e,t,i)=>(Z(e,typeof t!="symbol"?t+"":t,i),i);import{d as ee,h as D,g as O,x as Y,b1 as te,aN as T,o as f,c as g,ar as ne,ag as J,C as se,k as m,l,b as _,w as Q,t as S,F as j,D as B,H,L as ie,a$ as le,aO as re,a as ae,e as V,N as I}from"./framework.4eb5045b.js";import{a as oe,ai as ue,j as ce,ad as pe,c as de,m as me,n as fe,k as q,q as ve,P as he,aj as ge}from"./components.175bfd8d.js";import"../app.145f5e9a.js";import{c as be}from"./currencies.2275eeb0.js";import"./theme.9a7457db.js";/**
 * Vue Number Format 3.30.0
 * (c) 2021-2023 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var U={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:null,prefill:!0,reverseFill:!1,min:null,max:null,nullValue:""};function xe(e){return t=0,i=e,r=20,Math.max(t,Math.min(i,r));var t,i,r}class A{constructor(t){N(this,"options");N(this,"input");N(this,"number");N(this,"isClean");N(this,"preSurRegExp");N(this,"numberRegExp");N(this,"cleanRegExp");N(this,"negativeRegExp");this.options=Object.assign(U,t);const{prefix:i,suffix:r,decimal:c,reverseFill:n}=this.options;this.input="",this.number="",this.isClean=!n,this.preSurRegExp=new RegExp(`${i}|${r}`,"g"),this.numberRegExp=new RegExp(`[^0-9\\${c}]+`,"gi"),this.cleanRegExp=new RegExp("[^0-9]+","gi"),this.negativeRegExp=new RegExp("[^0-9\\-]+","gi")}isNull(){return!this.numberOnly(this.isClean?this.cleanRegExp:this.negativeRegExp)}clean(t=!1){return this.isClean=t,this}sign(){if(this.input===null||this.input===void 0)return"";const t=this.input.toString().indexOf("-")>=0;return this.isClean?t&&this.realNumber()>0?"-":"":t?"-":""}toFixed(){const t=Math.pow(10,this.options.precision);return(parseFloat(this.numberOnly(/\D+/g))/t||0).toFixed(xe(this.options.precision))}toNumber(t){return Number(t)}numberOnly(t){var i;return(i=this.input)==null?void 0:i.toString().replace(this.preSurRegExp,"").replace(t||this.numberRegExp,"")}isNegative(){return this.sign()==="-"}numbers(){const{reverseFill:t,decimal:i}=this.options;return t?this.number=this.toFixed().replace(".",i):typeof this.input=="number"?this.number=this.parts(this.input.toString().replace("-",""),".").join(i):isNaN(this.toNumber(this.input))?this.number=this.parts(this.numberOnly()).join(i):this.number=this.parts(this.input.replace("-",""),".").join(i),this.number}unformatNumber(){return this.numbers().toString().replace(this.options.decimal,".")}realNumber(){return parseFloat(this.unformatNumber())}parts(t,i){const{precision:r,minimumFractionDigits:c,decimal:n}=this.options;let a=t.toString().split(i||n);if(a.length>1&&(a[0]=this.toNumber(a[0])||0,a[1]=a.slice(1,a.length).join(""),a=a.slice(0,2)),this.isClean){const s=this.toNumber(a.join(".")).toFixed(r),d=this.toNumber(s),o=d.toFixed(c);a=c>=0&&d.toString().length<o.length?o.toString().split("."):d.toString().split(".")}return a.slice(0,2)}addSeparator(){const{decimal:t,separator:i}=this.options,r=this.numbers().split(t);return r[0]=r[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${i}`),r.join(t)}format(t){this.input=t;const{reverseFill:i,nullValue:r,prefix:c,suffix:n}=this.options;return this.isNull()&&!i?r:this.sign()+c+this.addSeparator()+n}unformat(t){this.input=t;const{reverseFill:i,nullValue:r}=this.options;return this.isNull()||i&&this.realNumber()===0?r:this.sign()+this.realNumber()}}const P="-";function K(e){return JSON.parse(JSON.stringify(e))}function G(e){return new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function R(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("number directive requires an input element");return t}function z(e,t){const i=()=>{e.setSelectionRange(t,t)};i(),setTimeout(i,1)}function F(e,t,{emit:i=!0,force:r=!1,clean:c=!1}={}){var v;const{options:n,oldValue:a}=e,{reverseFill:s,max:d,min:o}=n,y=((v=t==null?void 0:t.props)==null?void 0:v.value)||e.value;if(r||a!==y){const E=new A(n).clean(c&&!s);let k=E.format(y),b=E.clean(!s).unformat(y);return c&&(Number(d)===d&&Number(b)>d?(k=E.format(d),b=d.toString()):Number(o)===o&&Number(b)<o&&(k=E.format(o),b=o.toString())),e.oldValue=k,e.unmasked=b,e.value!==k&&(e.value=k),i&&e.dispatchEvent(G("input"))}}var ye={beforeMount:(e,{value:t,modifiers:i},r)=>{var d;e=R(e);const c=Object.assign(K(U),t,i),{reverseFill:n,precision:a,decimal:s}=c;e.options=c,n&&e.value?(e.value=parseFloat(new A({...c,reverseFill:!1}).unformat(e.value)).toFixed(a),(d=r==null?void 0:r.props)!=null&&d.value&&(r.props.value=e.value)):e.value&&!isNaN(Number(e.value))&&(e.value=e.value.replace(".",s)),F(e,r,{force:c.prefill,clean:!0,emit:!1})},mounted:e=>{const t=(e=R(e)).parentElement||e,i=n=>{n.target===e&&function(a){const{target:s,detail:d}=a;if(d!=null&&d.facade)return!1;a.stopPropagation();let o=s.value.length;const{oldValue:y,options:v}=s;s.selectionEnd&&(o=s.value.length-s.selectionEnd),F(s,null,{clean:!v.precision,emit:!1}),v.suffix&&(o=Math.max(o,v.suffix.length)),o=s.value.length-o,v.prefix&&(o=Math.max(o,v.prefix.length)),z(s,o),y!==s.value&&s.dispatchEvent(G("input"))}(n)},r=n=>{n.target===e&&function(a){const{target:s}=a,{oldValue:d}=s;F(s,null,{force:!0,clean:!0,emit:!1}),d!==s.value&&s.dispatchEvent(G("input"))}(n)},c=n=>{n.target===e&&function(a,s){const{options:d}=s,{prefix:o,suffix:y,decimal:v,min:E,separator:k}=d,{key:b}=a,$=new RegExp(`${o}|${y}`,"g"),C=s.value.replace($,""),L=E===void 0||Number(E)<0||Number(E)!==E;if(b===v)C.includes(v)?a.preventDefault():C||(s.value="0"+v,s.dispatchEvent(new Event("input")));else if(b!==P||L){if(b==="Backspace"){const h=s.selectionEnd||0,p=s.value.slice(h-1,h),w=s.value.slice(h-2,h);let u=s.value.length-h;[o,P,k].includes(p)&&(a.preventDefault(),s.value=p===k?s.value.replace(w,""):s.value.replace(new RegExp(`[${o}${P}]`,"g"),""),u=Math.max(u,y.length),u=s.value.length-u,u=Math.max(u,o.length),z(s,u),s.dispatchEvent(new Event("input")))}}else a.preventDefault()}(n,e)};t.addEventListener("input",i,!0),t.addEventListener("blur",r,!0),t.addEventListener("keydown",c,!0),e.cleanup=()=>{t.removeEventListener("input",i,!0),t.removeEventListener("blur",r,!0),t.removeEventListener("keydown",c,!0)}},updated:(e,{value:t,oldValue:i,modifiers:r},c)=>{if(e=R(e),t!==i){const n=e.options;e.options=Object.assign(n,t,r),F(e,c,{force:!0,clean:!0,emit:!1})}else F(e,c,{emit:!1})},unmounted:e=>{R(e).cleanup()}};const x=K(U);var W=ee({name:"VueNumber",directives:{number:ye},props:{modelValue:{type:[String,Number],required:!0},nullValue:{type:[Number,String],default:x.nullValue},masked:{type:Boolean,default:!1},reverseFill:{type:Boolean,default:x.reverseFill},prefill:{type:Boolean,default:x.prefill},precision:{type:Number,default:()=>x.precision},minimumFractionDigits:{type:Number,default:()=>x.minimumFractionDigits},decimal:{type:String,default:()=>x.decimal},min:{type:Number,default:()=>x.min},max:{type:Number,default:()=>x.max},separator:{type:String,default:()=>x.separator},prefix:{type:String,default:()=>x.prefix},suffix:{type:String,default:()=>x.suffix}},emits:["update:model-value","input:model-value"],setup(e,{emit:t}){const i=D(e.modelValue),r=D(!1),c=D(""),n=O(()=>({...e})),a=new A(n.value),s=O(()=>e.masked?a.format(i.value):c.value);return Y(()=>e.modelValue,d=>{const o=a.format(d);o!==i.value&&(i.value=o)}),{config:n,maskedValue:i,unmaskedValue:c,input:d=>{const{target:o}=d;i.value=o.value,c.value=o.unmasked,r.value=!0,t("input:model-value",s.value)},blur:()=>{r.value&&s.value!==e.modelValue&&t("update:model-value",s.value)},change:()=>{t("update:model-value",s.value)}}}});const Ee=["value"];W.render=function(e,t,i,r,c,n){const a=te("number");return T((f(),g("input",{type:"text",autocomplete:"off",value:e.maskedValue,class:"v-number vue-number-format",onChange:t[0]||(t[0]=(...s)=>e.change&&e.change(...s)),onInput:t[1]||(t[1]=(...s)=>e.input&&e.input(...s)),onBlur:t[2]||(t[2]=(...s)=>e.blur&&e.blur(...s))},null,40,Ee)),[[a,e.config]])},W.__file="src/component.vue";const ke={class:"flex flex-col max-w-140"},Ne={class:"grid p-4 gap-2 items-center",style:{"grid-template-columns":"1fr 10fr"}},we=m("div",{class:"p-2 text-right"},"FROM",-1),_e={class:"flex-1"},Se=m("div",{class:"p-2 text-right"},"TO ",-1),je=m("div",{class:"flex-1"},null,-1),Fe={key:1,class:"flex flex-col"},Ce={class:"font-bold"},Ve={class:"flex flex-wrap gap-3"},Re=m("div",{class:"p-2 text-right"},"WALLET",-1),Oe=m("div",{class:"p-2 text-right"},"Quantity",-1),$e=m("div",{class:"p-2 text-right"},"Quality",-1),Le=["value"],Me=m("div",{class:"p-2 text-right self-start"},"Wish ",-1),De={class:"p-2 text-right"},Be={key:0,class:"w-full"},qe={key:1,class:"flex flex-wrap gap-1"},Pe=["onClick"],Te={class:"font-bold"},Ge=m("div",{class:"p-2 text-right"},"ROOM",-1),We={key:2,class:"flex"},Ue={class:"overflow-scroll font-mono text-xs m-4 opacity-50 break-all col-span-2"},Ke={__name:"GiftForm",props:{gift:{type:Object,default:()=>({})}},emits:["sent","update:gift"],setup(e,{emit:t}){const i=e,r={decimal:".",separator:" ",prefix:"",precision:2,masked:!1},{user:c}=oe(),{gift:n,cleanGift:a,propose:s,proposed:d,hash:o,valid:y}=ue(i.gift),{guests:v,count:E}=ce(),{project:k}=pe(ne(n,"project")),{projects:b}=de(),$=me();Y(()=>n.wallet,h=>{h&&(n.ql=h.currency)});const C=O(()=>{const h=fe(),p=J({});return Object.keys(v).forEach(w=>{h.user(w).get("wallets").on((u,M)=>{p[w]=v[w]})}),p}),L=O(()=>{const h=J({});return Object.keys(b).forEach(p=>{p.includes(n.to)&&(h[p]=b[p])}),h});return(h,p)=>{const w=se("gift-wallets");return f(),g("div",ke,[m("div",Ne,[we,m("div",_e,[l(c).pub?(f(),_(l(q),{key:0,pub:l(c).pub},null,8,["pub"])):(f(),_(l(ve),{key:1}))]),Se,l(n).to?(f(),_(l(q),{key:0,pub:l(n).to},{default:Q(()=>[je,m("div",{class:"i-la-times mr-2",onClick:p[0]||(p[0]=u=>{l(n).to="",l(n).wallet=null})})]),_:1},8,["pub"])):(f(),g("div",Fe,[m("div",Ce,"USER SELECT OF "+S(Object.keys(C.value).length),1),m("div",Ve,[(f(!0),g(j,null,B(l(v),u=>(f(),_(l(q),{key:u,pub:u.pub,onClick:M=>l(n).to=u.pub},null,8,["pub","onClick"]))),128))])])),l(n).to?(f(),g(j,{key:2},[Re,(f(),_(w,{key:l(n).to,pub:l(n).to,"active-wallet":l(n).wallet,onWallet:p[1]||(p[1]=u=>l(n).wallet=u),onClear:p[2]||(p[2]=u=>l(n).wallet=null)},null,8,["pub","active-wallet"])),l(n).wallet?(f(),g(j,{key:0},[Oe,H(l(W),ie({modelValue:l(n).qn,"onUpdate:modelValue":p[3]||(p[3]=u=>l(n).qn=u)},r,{placeholder:"Quantity"}),null,16,["modelValue"]),$e,T(m("select",{class:"rounded-xl dark-bg-dark-100 p-2","onUpdate:modelValue":p[4]||(p[4]=u=>l(n).ql=u),placeholder:"Your account currency"},[(f(!0),g(j,null,B(l(be),u=>(f(),g("option",{key:u,value:u},S(u),9,Le))),128))],512),[[le,l(n).ql]]),Me,T(m("textarea",{class:"p-2","onUpdate:modelValue":p[5]||(p[5]=u=>l(n).wish=u),placeholder:"Wish"},null,512),[[re,l(n).wish]]),m("div",De,[ae("PROJECT "),l(n).project?V("",!0):(f(),g("div",Be,"SELECT"))]),l(n).project?(f(),_(l(he),{key:0,project:l(k),path:l(n).project},{default:Q(()=>[m("div",{class:"i-la-times",onClick:p[6]||(p[6]=u=>l(n).project=null)})]),_:1},8,["project","path"])):(f(),g("div",qe,[(f(!0),g(j,null,B(L.value,(u,M)=>(f(),g("div",{class:"p-2 rounded-xl cursor-pointer",key:M,style:I({backgroundColor:u.color}),onClick:Ae=>l(n).project=u.path},[m("div",Te,S(u.title),1)],12,Pe))),128))])),Ge,H(l(ge)),l(y)?(f(),g("div",We,[m("button",{class:"button w-full justify-center",onClick:p[7]||(p[7]=u=>{l(s)(),h.$emit("sent",l(o))})},"Propose")])):V("",!0),m("pre",Ue,S(l(a)),1),m("div",{class:"font-mono text-xs col-span-2 text-center rounded-lg m-2 transition",style:I({backgroundColor:l($).hex(l(o)||"")})},S(l(o)),5)],64)):V("",!0)],64)):V("",!0)])])}}};export{Ke as default};
