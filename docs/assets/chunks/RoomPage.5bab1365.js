import{b9 as B,a as C,I as m,b2 as F,F as L,m as U,b as N,ba as S,aY as T,k as z,bb as H,bc as M,aD as P,bd as k}from"./components.ff545abb.js";import"../app.1dbdb34a.js";import{x as y,b as V,o as r,c as i,E as l,L as u,e,t as A,F as h,U as _,N as D,r as E,G as w,I as G}from"./framework.e76a7413.js";import"./theme.7b41b406.js";const I={class:"flex flex-col items-stretch"},j={class:"max-w-full flex flex-col items-stretche bg-light-100 bg-opacity-20 dark-bg-dark-800 dark-bg-opacity-40 p-4 md-p-12 shadow-xl backdrop-blur-md backdrop-filter rounded-t-xl"},O={class:"flex flex-wrap items-center gap-8"},Y={class:"flex flex-col flex-auto",style:{flex:"100"}},q={class:"text-md"},J={class:"flex items-center flex-wrap"},K=l("div",{class:"font-bold mr-2"},"Hosts: ",-1),Q={class:"flex flex-col items-center bg-light-300 dark-bg-dark-400"},W={class:"flex flex-wrap items-center gap-2 p-4"},X={class:"relative"},Z={key:0,class:"flex items-center"},ee=["innerHTML"],te=l("div",{class:"i-la-pen"},null,-1),se=[te],de={__name:"RoomPage",props:{pub:{type:String,default:""},titles:{type:Object,default:()=>B}},emits:["rooms","browse","user"],setup(p){const b=p,{user:f}=C(),d=y(()=>b.pub?b.pub:m.pub),{room:a,leaveRoom:oe,updateRoomProfile:x,enterRoom:le}=F(d.value),R=L(),n=V({name:!1,description:!1,text:!1});U("deep");const $=y(()=>N({pub:d.value,size:1200,attachment:"local"}));return(c,s)=>{var v,g;return r(),i("div",I,[l("div",{class:"pt-32 px-2 md-px-8 bg-cover relative flex flex-col items-center",style:D({...e($)})},[l("div",j,[l("div",O,[u(e(S),{class:"flex-1 rounded-2xl overflow-hidden min-w-20",pub:p.pub},null,8,["pub"]),l("div",Y,[u(e(T),{class:"font-bold text-2xl",text:e(a).profile.name||e(d).substring(0,12),editable:e(a).hosts[e(f).pub]&&e(d)==e(m).pub&&!n.name,onUpdate:s[0]||(s[0]=o=>e(x)("name",o))},null,8,["text","editable"]),l("div",q,A(e(a).profile.description),1),l("div",J,[K,(r(!0),i(h,null,_(e(a).hosts,(o,t)=>(r(),i("div",{class:"p-2 flex flex-col items-start gap-2",key:t},[u(e(z),{pub:t,selectable:!0},null,8,["pub"])]))),128))]),u(e(H),{pub:e(d)},null,8,["pub"])])])])],4),E(c.$slots,"default"),l("div",Q,[l("div",W,[(r(!0),i(h,null,_(p.titles,(o,t)=>(r(),w(e(M),{key:t,cert:e(a).features[t],type:t,title:o,pub:p.pub||e(m).pub,open:e(a).features[t]||t=="users"&&e(a).features.space||t=="chat"&&e(a).features.chat,onClick:ae=>c.$emit("browse",t)},null,8,["cert","type","title","pub","open","onClick"]))),128))]),l("div",X,[n.text===!1?(r(),i("div",Z,[l("div",{class:"p-8 markdown-body prose",innerHTML:e(R).render(((v=e(a).profile)==null?void 0:v.text)||"")},null,8,ee),(g=e(a).hosts)!=null&&g[e(f).pub]?(r(),i("button",{key:0,class:"button absolute top-4 right-4 z-200",onClick:s[1]||(s[1]=o=>{var t;return n.text=((t=e(a).profile)==null?void 0:t.text)||""})},se)):G("",!0)])):(r(),w(e(P),{key:1,text:n.text,"onUpdate:text":s[2]||(s[2]=o=>n.text=o),onClose:s[3]||(s[3]=o=>{e(x)("text",n.text),n.text=!1})},null,8,["text"]))]),u(e(k),{onUser:s[4]||(s[4]=o=>c.$emit("user",o))}),u(e(k),{state:"offline",onUser:s[5]||(s[5]=o=>c.$emit("user",o))})])])}}};export{de as default};
