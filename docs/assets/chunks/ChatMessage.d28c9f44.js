import{d as _,x,f as w,p as k,o as f,c as h,as as S,aA as I,E as i,L as M,e as t,t as b,N as u,I as C,V as D,W as L,_ as N}from"./framework.29bd70f6.js";import{I as T,a as B,p as E,l as R,J as V}from"./components.fd82ec8a.js";import"../app.ec2fd68a.js";import"./theme.4cee43e1.js";const z=e=>(D("data-v-b483e91c"),e=e(),L(),e),A=["id","data-pub"],U={class:"ml-2 text-sm opacity-20 hover-opacity-80 transition cursor-default text-light-200"},$=z(()=>i("div",{class:"flex-1"},null,-1)),j={class:"ml-2 text-sm opacity-20 hover-opacity-80 transition cursor-default text-dark-200"},H=["innerHTML"],P=_({__name:"ChatMessage",props:{index:{type:Number,default:0},source:{type:Object,default:()=>({author:"",timestamp:"",text:"empty"})}},setup(e){const r=e,v=T(),d=x(()=>g(Number(r.source.timestamp))),{user:y}=B(),n=x(()=>r.source.author==y.pub);function g(a){if(!a)return;const s=new Date(a),o=s.toLocaleDateString("en-CA"),c=s.toLocaleTimeString("ru-RU");return{full:o+" "+c,date:o,time:c}}const l=w(!0);return k(()=>{var a,s;r.index>1&&((s=(a=document.getElementById(`chat-${r.index-1}`))==null?void 0:a.dataset)==null?void 0:s.pub)==r.source.author&&(l.value=!1)}),(a,s)=>{var o,c,p,m;return f(),h("div",{class:"px-1 py-2px flex flex-col w-full gap-1",style:u({alignItems:t(n)?"end":"start"})},[S(i("div",{class:"flex items-center w-full mt-2",id:`chat-${e.index}`,style:u({flexDirection:t(n)?"row-reverse":"row"}),"data-pub":e.source.author},[M(t(R),{class:"opacity-50 hover-opacity-90 transition",pub:e.source.author,"show-name":!0,size:20,onClick:s[0]||(s[0]=F=>t(E).pub=e.source.author)},null,8,["pub"]),i("div",U,b((o=t(d))==null?void 0:o.time),1),$,i("div",j,b((c=t(d))==null?void 0:c.date),1)],12,A),[[I,l.value]]),i("div",{class:"px-2 py-1 bg-light-300 dark-bg-dark-200 dark-bg-opacity-80 bg-opacity-80 rounded-b-xl max-w-max break-all overflow-hidden",style:u({borderTopLeftRadius:t(n)?"12px":"0px",borderTopRightRadius:t(n)?"0px":"12px",fontSize:e.source.text==t(V)(e.source.text)?"6em":"1em"})},[(p=e.source)!=null&&p.text?(f(),h("div",{key:0,class:"markdown-body",innerHTML:t(v).render((m=e.source)==null?void 0:m.text)},null,8,H)):C("",!0)],4)],4)}}});const G=N(P,[["__scopeId","data-v-b483e91c"]]);export{G as default};
