import{a as A,o as D,I as F,n as N,az as G,aI as H,aM as T,ad as K,aA as O,aK as Q,aN as Y,aO as q}from"./components.fd82ec8a.js";import"../app.ec2fd68a.js";import{x as S,o as l,c as a,E as e,F as J,U as R,G as u,e as s,t as m,N as U,I as i,L as M}from"./framework.29bd70f6.js";import"./theme.4cee43e1.js";const W={class:"rounded-lg max-w-65ch flex flex-col mx-auto items-stretch justify-center w-full overscroll-contain bg-light-200 dark-bg-dark-500"},X={class:"flex flex-wrap"},Z=e("div",{class:"p-0"},"#",-1),ss=[Z],es={class:"ml-1 break-all font-bold"},ts=e("div",{class:"flex-1"},null,-1),ls=e("div",{class:"i-la-angle-left"},null,-1),os=[ls],as=e("div",{class:"i-la-times"},null,-1),ns=[as],is={class:"flex-1 flex flex-col items-stretch",style:{flex:"10 1 300px"}},rs={key:0,class:"z-1 max-w-100vw"},ds=["src"],cs={class:"flex flex-wrap items-start w-full justify-start"},us={class:"w-full flex flex-col items-stretch"},hs={class:"p-2"},ms=["src"],fs={key:1,class:"text-2xl font-bold m-2"},xs={key:3,class:"m-2"},ks=e("div",{class:"flex-auto"},null,-1),vs={class:"flex flex-wrap p-4 bg-dark-50 bg-opacity-25 dark-bg-dark-400 w-full items-center gap-1 text-sm"},ps={key:0,class:"i-la-file-download"},ys={key:1,class:"i-la-redo-alt animate-spin"},gs=["innerHTML"],Ls={__name:"PostPage",props:{tag:{type:String,default:""},hash:{type:String,default:""}},emits:["close","browse","user"],setup(d){const c=d;A(),D();const E=F();S(()=>N("light").hex(c.hash));const f=S(()=>N("deep").hex(c.hash)),{post:t,download:I,downloading:V}=G({hash:c.hash}),{posts:bs,backlinks:j}=H(c.hash);return(r,o)=>{var x,k,v,p,y,g,b,_,w,$,C,L,P,z;return l(),a("div",W,[e("div",X,[(l(!0),a(J,null,R(s(j),(n,h)=>(l(),u(s(T),{key:h,style:{flex:"1 1 220px"},hash:h,tag:d.tag,authors:n,back:!0,onUser:o[0]||(o[0]=B=>r.$emit("user",B)),onClick:B=>r.$emit("browse",h)},null,8,["hash","tag","authors","onClick"]))),128))]),e("div",{class:"z-30 flex flex-wrap items-center w-full px-4 py-2 sticky top-0 shadow-xl filter grayscale-70 hover-grayscale-0 transition duration-400ms",style:U({backgroundColor:s(f)})},[e("div",{class:"hover-underline text-md cursor-pointer font-bold flex",onClick:o[1]||(o[1]=n=>r.$emit("close"))},ss),e("div",es,m((x=s(t))==null?void 0:x.title),1),ts,e("button",{class:"p-2",onClick:o[2]||(o[2]=n=>r.$router.back())},os),e("button",{class:"p-2",onClick:o[3]||(o[3]=n=>r.$emit("close"))},ns)],4),e("div",is,[(k=s(t))!=null&&k.cover||(v=s(t))!=null&&v.youtube||(p=s(t))!=null&&p.text?(l(),a("div",rs,[e("img",{class:"sticky top-0",src:s(t).cover},null,8,ds),(y=s(t))!=null&&y.youtube?(l(),u(s(K),{key:0,class:"mb-6 shadow-xl flex-1",video:(g=s(t))==null?void 0:g.youtube},null,8,["video"])):i("",!0)])):i("",!0),e("div",cs,[e("div",us,[e("div",hs,[s(t).icon?(l(),a("img",{key:0,class:"w-20 h-20 rounded-full m-2",style:U([{flex:"0 1 40px"},{borderColor:s(f)}]),src:s(t).icon},null,12,ms)):i("",!0),(b=s(t))!=null&&b.title?(l(),a("div",fs,m((_=s(t))==null?void 0:_.title),1)):i("",!0),(w=s(t))!=null&&w.link?(l(),u(s(O),{key:2,url:($=s(t))==null?void 0:$.link},null,8,["url"])):i("",!0),(C=s(t))!=null&&C.statement?(l(),a("div",xs,m((L=s(t))==null?void 0:L.statement),1)):i("",!0)]),ks,e("div",vs,[M(s(Q)),M(s(Y),{hash:d.hash},null,8,["hash"]),e("button",{class:"button flex items-center",onClick:o[4]||(o[4]=n=>s(I)())},[s(V)?(l(),a("div",ys)):(l(),a("div",ps))])])])]),(P=s(t))!=null&&P.text?(l(),a("div",{key:1,class:"text-md markdown-body bg-light-200 rounded-2xl m-1 px-4 py-4 leading-relaxed max-w-55ch z-10 overflow-scroll max-h-50vh",innerHTML:s(E).render((z=s(t))==null?void 0:z.text)},null,8,gs)):i("",!0),(l(),u(s(q),{key:d.tag,tag:d.hash,header:!1,onBrowse:o[5]||(o[5]=n=>r.$emit("browse",n))},null,8,["tag"]))])])}}};export{Ls as default};
