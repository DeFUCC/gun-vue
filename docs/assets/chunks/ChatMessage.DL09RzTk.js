import{d as w,h as f,s as k,y as S,o as x,c as h,aC as C,aR as D,j as c,I,k as u,t as v,P as n,e as M,p as T,l as B,_ as L}from"./framework.TCUxwrzd.js";import{a as N,p as R,m as _}from"./components.D4fD2a5V.js";import{u as j}from"./useMd.CfQ7drip.js";import{g as z}from"./useMates.-pMUoSrD.js";import"./theme.D4rRXU8L.js";const E=e=>(T("data-v-b483e91c"),e=e(),B(),e),P=["id","data-pub"],U={class:"ml-2 text-sm opacity-20 hover-opacity-80 transition cursor-default text-light-200"},V=E(()=>c("div",{class:"flex-1"},null,-1)),$={class:"ml-2 text-sm opacity-20 hover-opacity-80 transition cursor-default text-dark-200"},A=["innerHTML"],H=w({__name:"ChatMessage",props:{index:{type:Number,default:0},source:{type:Object,default:()=>({author:"",timestamp:"",text:"empty"})}},setup(e){const o=e,b=j(),d=f(()=>g(Number(o.source.timestamp))),{user:y}=N(),i=f(()=>o.source.author==y.pub);function g(a){if(!a)return;const t=new Date(a),s=t.toLocaleDateString("en-CA"),r=t.toLocaleTimeString("ru-RU");return{full:s+" "+r,date:s,time:r}}const l=k(!0);return S(()=>{var a,t;o.index>1&&((t=(a=document.getElementById(`chat-${o.index-1}`))==null?void 0:a.dataset)==null?void 0:t.pub)==o.source.author&&(l.value=!1)}),(a,t)=>{var s,r,m,p;return x(),h("div",{class:"px-1 py-2px flex flex-col w-full gap-1",style:n({alignItems:i.value?"end":"start"})},[C(c("div",{class:"flex items-center w-full mt-2",id:`chat-${e.index}`,style:n({flexDirection:i.value?"row-reverse":"row"}),"data-pub":e.source.author},[I(u(_),{class:"opacity-50 hover-opacity-90 transition",pub:e.source.author,"show-name":!0,size:20,onClick:t[0]||(t[0]=F=>u(R).pub=e.source.author)},null,8,["pub"]),c("div",U,v((s=d.value)==null?void 0:s.time),1),V,c("div",$,v((r=d.value)==null?void 0:r.date),1)],12,P),[[D,l.value]]),c("div",{class:"px-2 py-1 bg-light-300 dark-bg-dark-200 dark-bg-opacity-80 bg-opacity-80 rounded-b-xl max-w-max break-all overflow-hidden",style:n({borderTopLeftRadius:i.value?"12px":"0px",borderTopRightRadius:i.value?"0px":"12px",fontSize:e.source.text==u(z)(e.source.text)?"6em":"1em"})},[(m=e.source)!=null&&m.text?(x(),h("div",{key:0,class:"markdown-body",innerHTML:u(b).render((p=e.source)==null?void 0:p.text)},null,8,A)):M("",!0)],4)],4)}}}),Q=L(H,[["__scopeId","data-v-b483e91c"]]);export{Q as default};
