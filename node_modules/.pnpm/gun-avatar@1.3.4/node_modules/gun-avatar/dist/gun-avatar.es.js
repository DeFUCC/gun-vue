(()=>{if(!function(){const t=document.createElement("canvas").getContext("2d");t.fillRect(0,0,40,40),t.drawImage(t.canvas,-40,-40,80,80,50,50,20,20);const e=t.getImageData(50,50,30,30),a=new Uint32Array(e.data.buffer),i=(t,i)=>a[i*e.width+t];return[[9,9],[20,9],[9,20],[20,20]].some((([t,e])=>0!==i(t,e)))||[[10,10],[19,10],[10,19],[19,19]].some((([t,e])=>0===i(t,e)))}())return;const t=CanvasRenderingContext2D.prototype,e=t.drawImage;function a(t,e,a,i,n,r,s,o,h){const{width:u,height:l}=function(t){const e=e=>{const a=globalThis[e];return a&&t instanceof a};if(e("HTMLImageElement"))return{width:t.naturalWidth,height:t.naturalHeight};if(e("HTMLVideoElement"))return{width:t.videoWidth,height:t.videoHeight};if(e("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(e("HTMLCanvasElement")||e("ImageBitmap"))return t}(t);i<0&&(e+=i,i=Math.abs(i)),n<0&&(a+=n,n=Math.abs(n)),o<0&&(r+=o,o=Math.abs(o)),h<0&&(s+=h,h=Math.abs(h));const d=Math.max(e,0),c=Math.min(e+i,u),m=Math.max(a,0),g=Math.min(a+n,l),f=o/i,p=h/n;return[t,d,m,c-d,g-m,e<0?r-e*f:r,a<0?s-a*p:s,(c-d)*f,(g-m)*p]}function i(t){return[3,4,7,8].some((e=>!t[e]))}e?t.drawImage=function(t,n,r){const s=9===arguments.length;if(!s)return e.apply(this,[...arguments]);const o=a(...arguments);return i(o)?void 0:e.apply(this,o)}:console.error("This script requires a basic implementation of drawImage")})();const t={};if(document){class t extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.img=document.createElement("img"),this.shadowRoot.append(this.img)}render(){this.pub=this.hasAttribute("pub")?this.getAttribute("pub"):"1234123455Ute2tFhdjDQgzR-1234lfSlZxgEZKuquI.2F-j1234434U1234Asj-5lxnECG5TDyuPD8gEiuI123",this.size=this.hasAttribute("size")?this.getAttribute("size"):400,this.round=!(!this.hasAttribute("round")&&""!=this.getAttribute("round")),this.round?this.img.style.borderRadius="100%":this.img.style.borderRadius="0%",this.dark=!(!this.hasAttribute("dark")&&""!=this.getAttribute("dark")),this.img.src=e(this.pub,this.size,this.dark)}connectedCallback(){this.render()}static get observedAttributes(){return["pub","round","size","dark"]}attributeChangedCallback(t,e,a){this.render()}}customElements.define("gun-avatar",t),document.addEventListener("DOMContentLoaded",(()=>{let t=document.getElementsByClassName("gun-avatar");for(let a of t)a.src=e(a.dataset.pub,a.dataset.size,a.dataset.dark)}))}function e(e,i=800,n=!1){var r;if(!e)return;if(null==(r=null==t?void 0:t[i])?void 0:r[e])return t[i][e];const s=document.createElement("canvas");s.width=s.height=i;const o=s.getContext("2d"),h=e.split(".").map((t=>function(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split("");let a=[],i=0;for(let n of t)a[i++]=e.indexOf(n)/64;return a}(t)));return function(t,e,a,i,n=!1){var r=t.createLinearGradient(0,0,0,i);let s=70;n&&(s=0);r.addColorStop(0,`hsl(0,0%,${s+30*e}%)`),r.addColorStop(1,`hsl(0,0%,${s+30*a}%)`),t.fillStyle=r,t.fillRect(0,0,i,i)}(o,h[0][42],h[1][42],i,n),a(h[0],o,i,.42*i),o.globalCompositeOperation="lighter",a(h[1],o,i,.125*i),o.globalCompositeOperation="source-over",o.scale(-1,1),o.translate(-i/2,0),o.drawImage(s,i/2,0,i,i,0,0,i,i),t[i]=t[i]||{},t[i][e]=s.toDataURL(),t[i][e]}function a(t,e,a,i){(function(t,e=3){return[...Array(Math.ceil(t.length/e))].map((()=>t.splice(0,e)))})(t,7).forEach((t=>{if(7==t.length){let n=a/2+t[0]*a/2,r=t[1]*a,s=t[2]*i,o=360*t[3],h=100*t[4],u=100*t[5],l=t[6];e.beginPath(),e.arc(n,r,s,0,2*Math.PI,!1),e.fillStyle=`hsla(${o},${h}%,${u}%,${l})`,e.closePath(),e.fill()}}))}
